const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/userDomainPermissionService-DizwxGXC.js","assets/mui-emotion-vendor-rwx6c2Wh.js","assets/react-vendor-C_Qvy3u4.js","assets/mui-emotion-vendor-BU3nLhQd.css","assets/utils-B2F6Xi6s.js"])))=>i.map(i=>d[i]);
var nF=Object.defineProperty;var hS=e=>{throw TypeError(e)};var rF=(e,t,n)=>t in e?nF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var im=(e,t,n)=>rF(e,typeof t!="symbol"?t+"":t,n),om=(e,t,n)=>t.has(e)||hS("Cannot "+n);var dt=(e,t,n)=>(om(e,t,"read from private field"),n?n.call(e):t.get(e)),Qn=(e,t,n)=>t.has(e)?hS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),kn=(e,t,n,r)=>(om(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),aa=(e,t,n)=>(om(e,t,"access private method"),n);var Th=(e,t,n,r)=>({set _(i){kn(e,t,i,n)},get _(){return dt(e,t,r)}});import{c as f1,g as aF,s as iF,r as oF,u as sF,i as lF,j as Un,w as cF,P as re,d as uF,C as dF,e as XR,T as hF,A as Jt,S as ua,B as j,f as Xl,h as M,k as Yo,l as fF,m as ln,n as cn,o as On,p as Di,q as Fn,v as ud,x as ir,L as pF,y as ig,I as gF,z as mF,D as JR,U as p1,E as so,F as yF,G as bF,H as vF,J as xF,K as wF,M as CF,N as nx,O as SF,Q as dd,R as Ct,V as fS,W as Se,X as Me,Y as yn,Z as La,$ as _n,a0 as W,a1 as Lt,a2 as gr,a3 as ah,a4 as vi,a5 as hd,a6 as Zt,a7 as hn,a8 as an,a9 as QR,aa as PF,ab as ut,ac as wn,ad as Dt,ae as yi,af as $e,ag as ZR,ah as va,ai as pa,aj as mn,ak as ye,al as xa,am as eE,an as lo,ao as Is,ap as wa,aq as tE,ar as Zn,as as Sa,at as Kn,au as nr,av as Yn,aw as nE,ax as rE,ay as aE,az as iE,aA as oE,aB as sE,aC as rt,aD as In,aE as Sn,aF as ih,aG as kr,aH as Gr,aI as kF,aJ as _F,aK as TF,aL as IF,aM as OF,aN as AF,aO as DF,aP as pt,aQ as co,aR as Wf,aS as qf,aT as Bu,aU as cl,aV as Sr,aW as _i,aX as ds,aY as RF,aZ as Wo,a_ as EF,a$ as ul,b0 as ur,b1 as _r,b2 as sn,b3 as MF,b4 as Uf,b5 as LF,b6 as $F,b7 as jF,b8 as rx,b9 as Io,ba as ax,bb as pS,bc as gS,bd as mS,be as Hu,bf as sc,bg as Oo,bh as lc,bi as Aa,bj as cc,bk as Oa,bl as g1,bm as xi,bn as Xu,bo as m1,bp as FF,bq as zF,br as NF,bs as BF,bt as HF,bu as WF,bv as og,bw as qF,bx as UF,by as lE,bz as y1,bA as cE,bB as Vf,bC as VF,bD as ba,bE as b1,bF as GF,bG as Ja,bH as oh,bI as Sl,bJ as uE,bK as v1,bL as KF,bM as Cs,bN as YF,bO as XF,bP as qo,bQ as gf,bR as dE,bS as Ss,bT as ix,bU as mf,bV as yS,bW as hE,bX as Ih,bY as JF,bZ as sm,b_ as fE,b$ as Gf,c0 as Kf,c1 as QF,c2 as ZF,c3 as ez,c4 as bS,c5 as tz,c6 as lm,c7 as cm,c8 as um,c9 as vS,ca as nz,cb as rz,cc as az,cd as iz,b as xS,ce as oz,cf as sz,cg as lz,ch as cz,ci as uz,cj as dz,ck as hz,cl as fz,cm as pz,cn as pE,co as gE,cp as gz,cq as mz,cr as x1,cs as yz,ct as wS,cu as CS,cv as SS,cw as bz,cx as PS,cy as ox,cz as vz,cA as xz,cB as yf,cC as wz,cD as Yf,cE as sx,cF as kS,cG as _S,cH as Oh,cI as TS,cJ as IS,cK as Cz,cL as mE,cM as OS,cN as Sz,cO as Pz,cP as kz,cQ as AS}from"./mui-emotion-vendor-rwx6c2Wh.js";import{a as u,f as sg,g as vt,u as mo,r as ei,b as yE,c as Ce,h as Ah,i as lg,L as fd,O as bE,N as vE,j as _z,k as xn,B as Tz}from"./react-vendor-C_Qvy3u4.js";import{a as Ps,b as dm,l as Iz,p as nl,f as Oz,c as Az,i as Dz,d as rl,e as Rz,g as Ez,h as Mz,j as Lz,k as $z,m as jz,n as Fz,o as zz,q as Nz,r as Bz,s as Hz,t as Wz,u as qz,v as Uz,w as hm,x as fm,y as DS,z as uc,A as Dh,B as RS,C as Vz,D as ES,E as pm,F as MS,G as gm,H as LS,I as mm,J as Gz,K as Kz,L as Yz,M as Xz,N as Jz,O as Qz,P as Zz,Q as e3,R as t3,S as n3,T as r3,U as a3,V as i3,W as o3,X as s3,Y as l3,Z as c3,_ as u3,$ as d3,a0 as h3,a1 as f3,a2 as ym,a3 as dc,a4 as hc,a5 as p3}from"./utils-B2F6Xi6s.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var xE=typeof document<"u",Xf=u.createContext(typeof HTMLElement<"u"?f1({key:"css"}):null);Xf.Provider;var wE=function(t){return u.forwardRef(function(n,r){var i=u.useContext(Xf);return t(n,i,r)})};xE||(wE=function(t){return function(n){var r=u.useContext(Xf);return r===null?(r=f1({key:"css"}),u.createElement(Xf.Provider,{value:r},t(n,r))):t(n,r)}});var g3=u.createContext({}),cg={}.hasOwnProperty,lx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",CE=function(t,n){var r={};for(var i in n)cg.call(n,i)&&(r[i]=n[i]);return r[lx]=t,r},m3=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;oF(n,r,i);var o=sF(function(){return lF(n,r,i)});if(!xE&&o!==void 0){for(var s,l=r.name,c=r.next;c!==void 0;)l+=" "+c.name,c=c.next;return u.createElement("style",(s={},s["data-emotion"]=n.key+" "+l,s.dangerouslySetInnerHTML={__html:o},s.nonce=n.sheet.nonce,s))}return null},y3=wE(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[lx],o=[r],s="";typeof e.className=="string"?s=aF(t.registered,o,e.className):e.className!=null&&(s=e.className+" ");var l=iF(o,void 0,u.useContext(g3));s+=t.key+"-"+l.name;var c={};for(var d in e)cg.call(e,d)&&d!=="css"&&d!==lx&&(c[d]=e[d]);return c.className=s,n&&(c.ref=n),u.createElement(u.Fragment,null,u.createElement(m3,{cache:t,serialized:l,isStringTag:typeof i=="string"}),u.createElement(i,c))}),SE=y3,bn=Un.Fragment,a=function(t,n,r){return cg.call(n,"css")?Un.jsx(SE,CE(t,n),r):Un.jsx(t,n,r)},m=function(t,n,r){return cg.call(n,"css")?Un.jsxs(SE,CE(t,n),r):Un.jsxs(t,n,r)},Rh={},$S;function b3(){if($S)return Rh;$S=1;var e=sg();return Rh.createRoot=e.createRoot,Rh.hydrateRoot=e.hydrateRoot,Rh}var v3=b3();const x3=vt(v3);function w3(e){e()}function C3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){w3(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var jS={notify(){},get:()=>[]};function S3(e,t){let n,r=jS,i=0,o=!1;function s(y){h();const p=r.subscribe(y);let v=!1;return()=>{v||(v=!0,p(),f())}}function l(){r.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return o}function h(){i++,n||(n=e.subscribe(c),r=C3())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=jS)}function g(){o||(o=!0,h())}function w(){o&&(o=!1,f())}const x={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:g,tryUnsubscribe:w,getListeners:()=>r};return x}var P3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k3=P3(),_3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",T3=_3(),I3=()=>k3||T3?u.useLayoutEffect:u.useEffect,O3=I3(),bm=Symbol.for("react-redux-context"),vm=typeof globalThis<"u"?globalThis:{};function A3(){if(!u.createContext)return{};const e=vm[bm]??(vm[bm]=new Map);let t=e.get(u.createContext);return t||(t=u.createContext(null),e.set(u.createContext,t)),t}var Uo=A3();function D3(e){const{children:t,context:n,serverState:r,store:i}=e,o=u.useMemo(()=>{const c=S3(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=u.useMemo(()=>i.getState(),[i]);O3(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||Uo;return u.createElement(l.Provider,{value:o},t)}var R3=D3;function w1(e=Uo){return function(){return u.useContext(e)}}var PE=w1();function kE(e=Uo){const t=e===Uo?PE:w1(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var E3=kE();function M3(e=Uo){const t=e===Uo?E3:kE(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Kr=M3(),L3=(e,t)=>e===t;function $3(e=Uo){const t=e===Uo?PE:w1(e),n=(r,i={})=>{const{equalityFn:o=L3}=typeof i=="function"?{equalityFn:i}:i,s=t(),{store:l,subscription:c,getServerState:d}=s;u.useRef(!0);const h=u.useCallback({[r.name](g){return r(g)}}[r.name],[r]),f=cF.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,h,o);return u.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var zn=$3();function bf(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bf=function(n){return typeof n}:bf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bf(e)}function j3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z3(e,t,n){return t&&F3(e.prototype,t),e}function N3(e,t){return t&&(bf(t)==="object"||typeof t=="function")?t:vf(e)}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cx(e)}function vf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ux(e,t)}function ux(e,t){return ux=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},ux(e,t)}function xf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _E=function(e){B3(t,e);function t(){var n,r;j3(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=N3(this,(n=cx(t)).call.apply(n,[this].concat(o))),xf(vf(r),"state",{bootstrapped:!1}),xf(vf(r),"_unsubscribe",void 0),xf(vf(r),"handlePersistorState",function(){var l=r.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return z3(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(u.PureComponent);xf(_E,"defaultProps",{children:null,loading:null});function Zr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var H3=typeof Symbol=="function"&&Symbol.observable||"@@observable",FS=H3,xm=()=>Math.random().toString(36).substring(7).split("").join("."),W3={INIT:`@@redux/INIT${xm()}`,REPLACE:`@@redux/REPLACE${xm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xm()}`},Jf=W3;function C1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function S1(e,t,n){if(typeof e!="function")throw new Error(Zr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zr(1));return n(S1)(e,t)}let r=e,i=t,o=new Map,s=o,l=0,c=!1;function d(){s===o&&(s=new Map,o.forEach((p,v)=>{s.set(v,p)}))}function h(){if(c)throw new Error(Zr(3));return i}function f(p){if(typeof p!="function")throw new Error(Zr(4));if(c)throw new Error(Zr(5));let v=!0;d();const b=l++;return s.set(b,p),function(){if(v){if(c)throw new Error(Zr(6));v=!1,d(),s.delete(b),o=null}}}function g(p){if(!C1(p))throw new Error(Zr(7));if(typeof p.type>"u")throw new Error(Zr(8));if(typeof p.type!="string")throw new Error(Zr(17));if(c)throw new Error(Zr(9));try{c=!0,i=r(i,p)}finally{c=!1}return(o=s).forEach(b=>{b()}),p}function w(p){if(typeof p!="function")throw new Error(Zr(10));r=p,g({type:Jf.REPLACE})}function x(){const p=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Zr(11));function b(){const k=v;k.next&&k.next(h())}return b(),{unsubscribe:p(b)}},[FS](){return this}}}return g({type:Jf.INIT}),{dispatch:g,subscribe:f,getState:h,replaceReducer:w,[FS]:x}}function q3(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Jf.INIT})>"u")throw new Error(Zr(12));if(typeof n(void 0,{type:Jf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zr(13))})}function TE(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let i;try{q3(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let c=!1;const d={};for(let h=0;h<r.length;h++){const f=r[h],g=n[f],w=s[f],x=g(w,l);if(typeof x>"u")throw l&&l.type,new Error(Zr(14));d[f]=x,c=c||x!==w}return c=c||r.length!==Object.keys(s).length,c?d:s}}function Qf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function U3(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(Zr(15))};const s={getState:i.getState,dispatch:(c,...d)=>o(c,...d)},l=e.map(c=>c(s));return o=Qf(...l)(i.dispatch),{...i,dispatch:o}}}function V3(e){return C1(e)&&"type"in e&&typeof e.type=="string"}var IE=Symbol.for("immer-nothing"),zS=Symbol.for("immer-draftable"),Ra=Symbol.for("immer-state");function gi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pl=Object.getPrototypeOf;function Os(e){return!!e&&!!e[Ra]}function uo(e){var t;return e?OE(e)||Array.isArray(e)||!!e[zS]||!!((t=e.constructor)!=null&&t[zS])||dg(e)||hg(e):!1}var G3=Object.prototype.constructor.toString();function OE(e){if(!e||typeof e!="object")return!1;const t=Pl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===G3}function Zf(e,t){ug(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ug(e){const t=e[Ra];return t?t.type_:Array.isArray(e)?1:dg(e)?2:hg(e)?3:0}function dx(e,t){return ug(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function AE(e,t,n){const r=ug(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function K3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function dg(e){return e instanceof Map}function hg(e){return e instanceof Set}function is(e){return e.copy_||e.base_}function hx(e,t){if(dg(e))return new Map(e);if(hg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=OE(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ra];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[s]})}return Object.create(Pl(e),r)}else{const r=Pl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function P1(e,t=!1){return fg(e)||Os(e)||!uo(e)||(ug(e)>1&&(e.set=e.add=e.clear=e.delete=Y3),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>P1(r,!0))),e}function Y3(){gi(2)}function fg(e){return Object.isFrozen(e)}var X3={};function As(e){const t=X3[e];return t||gi(0,e),t}var pd;function DE(){return pd}function J3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function NS(e,t){t&&(As("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fx(e){px(e),e.drafts_.forEach(Q3),e.drafts_=null}function px(e){e===pd&&(pd=e.parent_)}function BS(e){return pd=J3(pd,e)}function Q3(e){const t=e[Ra];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ra].modified_&&(fx(t),gi(4)),uo(e)&&(e=ep(t,e),t.parent_||tp(t,e)),t.patches_&&As("Patches").generateReplacementPatches_(n[Ra].base_,e,t.patches_,t.inversePatches_)):e=ep(t,n,[]),fx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==IE?e:void 0}function ep(e,t,n){if(fg(t))return t;const r=t[Ra];if(!r)return Zf(t,(i,o)=>WS(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return tp(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Zf(o,(l,c)=>WS(e,r,i,l,c,n,s)),tp(e,i,!1),n&&e.patches_&&As("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function WS(e,t,n,r,i,o,s){if(Os(i)){const l=o&&t&&t.type_!==3&&!dx(t.assigned_,r)?o.concat(r):void 0,c=ep(e,i,l);if(AE(n,r,c),Os(c))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(uo(i)&&!fg(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ep(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tp(e,i)}}function tp(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&P1(t,n)}function Z3(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:DE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=k1;n&&(i=[r],o=gd);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var k1={get(e,t){if(t===Ra)return e;const n=is(e);if(!dx(n,t))return eN(e,n,t);const r=n[t];return e.finalized_||!uo(r)?r:r===wm(e.base_,t)?(Cm(e),e.copy_[t]=mx(r,e)):r},has(e,t){return t in is(e)},ownKeys(e){return Reflect.ownKeys(is(e))},set(e,t,n){const r=RE(is(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=wm(is(e),t),o=i==null?void 0:i[Ra];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(K3(n,i)&&(n!==void 0||dx(e.base_,t)))return!0;Cm(e),gx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Cm(e),gx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=is(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){gi(11)},getPrototypeOf(e){return Pl(e.base_)},setPrototypeOf(){gi(12)}},gd={};Zf(k1,(e,t)=>{gd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});gd.deleteProperty=function(e,t){return gd.set.call(this,e,t,void 0)};gd.set=function(e,t,n){return k1.set.call(this,e[0],t,n,e[0])};function wm(e,t){const n=e[Ra];return(n?is(n):e)[t]}function eN(e,t,n){var i;const r=RE(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function RE(e,t){if(!(t in e))return;let n=Pl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Pl(n)}}function gx(e){e.modified_||(e.modified_=!0,e.parent_&&gx(e.parent_))}function Cm(e){e.copy_||(e.copy_=hx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tN=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(c=o,...d){return s.produce(c,h=>n.call(this,h,...d))}}typeof n!="function"&&gi(6),r!==void 0&&typeof r!="function"&&gi(7);let i;if(uo(t)){const o=BS(this),s=mx(t,void 0);let l=!0;try{i=n(s),l=!1}finally{l?fx(o):px(o)}return NS(o,r),HS(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===IE&&(i=void 0),this.autoFreeze_&&P1(i,!0),r){const o=[],s=[];As("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else gi(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,c=>t(c,...l));let r,i;return[this.produce(t,n,(s,l)=>{r=s,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){uo(e)||gi(8),Os(e)&&(e=nN(e));const t=BS(this),n=mx(e,void 0);return n[Ra].isManual_=!0,px(t),n}finishDraft(e,t){const n=e&&e[Ra];(!n||!n.isManual_)&&gi(9);const{scope_:r}=n;return NS(r,t),HS(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=As("Patches").applyPatches_;return Os(e)?r(e,t):this.produce(e,i=>r(i,t))}};function mx(e,t){const n=dg(e)?As("MapSet").proxyMap_(e,t):hg(e)?As("MapSet").proxySet_(e,t):Z3(e,t);return(t?t.scope_:DE()).drafts_.push(n),n}function nN(e){return Os(e)||gi(10,e),EE(e)}function EE(e){if(!uo(e)||fg(e))return e;const t=e[Ra];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=hx(e,t.scope_.immer_.useStrictShallowCopy_)}else n=hx(e,!0);return Zf(n,(r,i)=>{AE(n,r,EE(i))}),t&&(t.finalized_=!1),n}var Ea=new tN,ME=Ea.produce;Ea.produceWithPatches.bind(Ea);Ea.setAutoFreeze.bind(Ea);Ea.setUseStrictShallowCopy.bind(Ea);Ea.applyPatches.bind(Ea);Ea.createDraft.bind(Ea);Ea.finishDraft.bind(Ea);function LE(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var rN=LE(),aN=LE,iN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qf:Qf.apply(null,arguments)},oN=e=>e&&typeof e.match=="function";function Ju(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ro(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>V3(r)&&r.type===e,n}var $E=class Wu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wu.prototype)}static get[Symbol.species](){return Wu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wu(...t[0].concat(this)):new Wu(...t.concat(this))}};function qS(e){return uo(e)?ME(e,()=>{}):e}function Eh(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function sN(e){return typeof e=="boolean"}var lN=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let s=new $E;return n&&(sN(n)?s.push(rN):s.push(aN(n.extraArgument))),s},cN="RTK_autoBatch",US=e=>t=>{setTimeout(t,e)},uN=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,s=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:US(10):e.type==="callback"?e.queueNotification:US(e.timeout),d=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const f=()=>i&&h(),g=r.subscribe(f);return l.add(h),()=>{g(),l.delete(h)}},dispatch(h){var f;try{return i=!((f=h==null?void 0:h.meta)!=null&&f[cN]),o=!i,o&&(s||(s=!0,c(d))),r.dispatch(h)}finally{i=!0}}})},dN=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new $E(e);return r&&i.push(uN(typeof r=="object"?r:void 0)),i};function hN(e){const t=lN(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(C1(n))l=TE(n);else throw new Error(ro(1));let c;typeof r=="function"?c=r(t):c=t();let d=Qf;i&&(d=iN({trace:!1,...typeof i=="object"&&i}));const h=U3(...c),f=dN(h);let g=typeof s=="function"?s(f):f();const w=d(...g);return S1(l,o,w)}function jE(e){const t={},n=[];let r;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(ro(28));if(l in t)throw new Error(ro(29));return t[l]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function fN(e){return typeof e=="function"}function pN(e,t){let[n,r,i]=jE(t),o;if(fN(e))o=()=>qS(e());else{const l=qS(e);o=()=>l}function s(l=o(),c){let d=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,f)=>{if(f)if(Os(h)){const w=f(h,c);return w===void 0?h:w}else{if(uo(h))return ME(h,g=>f(g,c));{const g=f(h,c);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},l)}return s.getInitialState=o,s}var gN=(e,t)=>oN(e)?e.match(t):e(t);function mN(...e){return t=>e.some(n=>gN(n,t))}var yN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bN=(e=21)=>{let t="",n=e;for(;n--;)t+=yN[Math.random()*64|0];return t},vN=["name","message","stack","code"],Sm=class{constructor(e,t){im(this,"_type");this.payload=e,this.meta=t}},VS=class{constructor(e,t){im(this,"_type");this.payload=e,this.meta=t}},xN=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of vN)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},GS="External signal was aborted",ti=(()=>{function e(t,n,r){const i=Ju(t+"/fulfilled",(c,d,h,f)=>({payload:c,meta:{...f||{},arg:h,requestId:d,requestStatus:"fulfilled"}})),o=Ju(t+"/pending",(c,d,h)=>({payload:void 0,meta:{...h||{},arg:d,requestId:c,requestStatus:"pending"}})),s=Ju(t+"/rejected",(c,d,h,f,g)=>({payload:f,error:(r&&r.serializeError||xN)(c||"Rejected"),meta:{...g||{},arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(h,f,g)=>{const w=r!=null&&r.idGenerator?r.idGenerator(c):bN(),x=new AbortController;let y,p;function v(P){p=P,x.abort()}d&&(d.aborted?v(GS):d.addEventListener("abort",()=>v(GS),{once:!0}));const b=async function(){var C,S;let P;try{let _=(C=r==null?void 0:r.condition)==null?void 0:C.call(r,c,{getState:f,extra:g});if(CN(_)&&(_=await _),_===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const T=new Promise((I,L)=>{y=()=>{L({name:"AbortError",message:p||"Aborted"})},x.signal.addEventListener("abort",y)});h(o(w,c,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:w,arg:c},{getState:f,extra:g}))),P=await Promise.race([T,Promise.resolve(n(c,{dispatch:h,getState:f,extra:g,requestId:w,signal:x.signal,abort:v,rejectWithValue:(I,L)=>new Sm(I,L),fulfillWithValue:(I,L)=>new VS(I,L)})).then(I=>{if(I instanceof Sm)throw I;return I instanceof VS?i(I.payload,w,c,I.meta):i(I,w,c)})])}catch(_){P=_ instanceof Sm?s(null,w,c,_.payload,_.meta):s(_,w,c)}finally{y&&x.signal.removeEventListener("abort",y)}return r&&!r.dispatchConditionRejection&&s.match(P)&&P.meta.condition||h(P),P}();return Object.assign(b,{abort:v,requestId:w,arg:c,unwrap(){return b.then(wN)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:i,settled:mN(s,i),typePrefix:t})}return e.withTypes=()=>e,e})();function wN(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function CN(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var SN=Symbol.for("rtk-slice-createasyncthunk");function PN(e,t){return`${e}/${t}`}function kN({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[SN];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(ro(11));const l=(typeof i.reducers=="function"?i.reducers(TN()):i.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(k,C){const S=typeof k=="string"?k:k.type;if(!S)throw new Error(ro(12));if(S in d.sliceCaseReducersByType)throw new Error(ro(13));return d.sliceCaseReducersByType[S]=C,h},addMatcher(k,C){return d.sliceMatchers.push({matcher:k,reducer:C}),h},exposeAction(k,C){return d.actionCreators[k]=C,h},exposeCaseReducer(k,C){return d.sliceCaseReducersByName[k]=C,h}};c.forEach(k=>{const C=l[k],S={reducerName:k,type:PN(o,k),createNotation:typeof i.reducers=="function"};ON(C)?DN(S,C,h,t):IN(S,C,h)});function f(){const[k={},C=[],S=void 0]=typeof i.extraReducers=="function"?jE(i.extraReducers):[i.extraReducers],_={...k,...d.sliceCaseReducersByType};return pN(i.initialState,T=>{for(let I in _)T.addCase(I,_[I]);for(let I of d.sliceMatchers)T.addMatcher(I.matcher,I.reducer);for(let I of C)T.addMatcher(I.matcher,I.reducer);S&&T.addDefaultCase(S)})}const g=k=>k,w=new Map,x=new WeakMap;let y;function p(k,C){return y||(y=f()),y(k,C)}function v(){return y||(y=f()),y.getInitialState()}function b(k,C=!1){function S(T){let I=T[k];return typeof I>"u"&&C&&(I=Eh(x,S,v)),I}function _(T=g){const I=Eh(w,C,()=>new WeakMap);return Eh(I,T,()=>{const L={};for(const[A,D]of Object.entries(i.selectors??{}))L[A]=_N(D,T,()=>Eh(x,T,v),C);return L})}return{reducerPath:k,getSelectors:_,get selectors(){return _(S)},selectSlice:S}}const P={name:o,reducer:p,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:v,...b(s),injectInto(k,{reducerPath:C,...S}={}){const _=C??s;return k.inject({reducerPath:_,reducer:p},S),{...P,...b(_,!0)}}};return P}}function _N(e,t,n,r){function i(o,...s){let l=t(o);return typeof l>"u"&&r&&(l=n()),e(l,...s)}return i.unwrapped=e,i}var Xo=kN();function TN(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function IN({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!AN(r))throw new Error(ro(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?Ju(e,s):Ju(e))}function ON(e){return e._reducerDefinitionType==="asyncThunk"}function AN(e){return e._reducerDefinitionType==="reducerWithPrepare"}function DN({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ro(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:d,options:h}=n,f=i(e,o,h);r.exposeAction(t,f),s&&r.addCase(f.fulfilled,s),l&&r.addCase(f.pending,l),c&&r.addCase(f.rejected,c),d&&r.addMatcher(f.settled,d),r.exposeCaseReducer(t,{fulfilled:s||Mh,pending:l||Mh,rejected:c||Mh,settled:d||Mh})}function Mh(){}function ro(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _1="persist:",FE="persist/FLUSH",T1="persist/REHYDRATE",zE="persist/PAUSE",NE="persist/PERSIST",BE="persist/PURGE",HE="persist/REGISTER",RN=-1;function wf(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wf=function(n){return typeof n}:wf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wf(e)}function KS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KS(n,!0).forEach(function(r){MN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KS(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LN(e,t,n,r){r.debug;var i=EN({},n);return e&&wf(e)==="object"&&Object.keys(e).forEach(function(o){o!=="_persist"&&t[o]===n[o]&&(i[o]=e[o])}),i}function $N(e){var t=e.blacklist||null,n=e.whitelist||null,r=e.transforms||[],i=e.throttle||0,o="".concat(e.keyPrefix!==void 0?e.keyPrefix:_1).concat(e.key),s=e.storage,l;e.serialize===!1?l=function(C){return C}:typeof e.serialize=="function"?l=e.serialize:l=jN;var c=e.writeFailHandler||null,d={},h={},f=[],g=null,w=null,x=function(C){Object.keys(C).forEach(function(S){v(S)&&d[S]!==C[S]&&f.indexOf(S)===-1&&f.push(S)}),Object.keys(d).forEach(function(S){C[S]===void 0&&v(S)&&f.indexOf(S)===-1&&d[S]!==void 0&&f.push(S)}),g===null&&(g=setInterval(y,i)),d=C};function y(){if(f.length===0){g&&clearInterval(g),g=null;return}var k=f.shift(),C=r.reduce(function(S,_){return _.in(S,k,d)},d[k]);if(C!==void 0)try{h[k]=l(C)}catch(S){console.error("redux-persist/createPersistoid: error serializing state",S)}else delete h[k];f.length===0&&p()}function p(){Object.keys(h).forEach(function(k){d[k]===void 0&&delete h[k]}),w=s.setItem(o,l(h)).catch(b)}function v(k){return!(n&&n.indexOf(k)===-1&&k!=="_persist"||t&&t.indexOf(k)!==-1)}function b(k){c&&c(k)}var P=function(){for(;f.length!==0;)y();return w||Promise.resolve()};return{update:x,flush:P}}function jN(e){return JSON.stringify(e)}function FN(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:_1).concat(e.key),r=e.storage;e.debug;var i;return e.deserialize===!1?i=function(s){return s}:typeof e.deserialize=="function"?i=e.deserialize:i=zN,r.getItem(n).then(function(o){if(o)try{var s={},l=i(o);return Object.keys(l).forEach(function(c){s[c]=t.reduceRight(function(d,h){return h.out(d,c,l)},i(l[c]))}),s}catch(c){throw c}else return})}function zN(e){return JSON.parse(e)}function NN(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:_1).concat(e.key);return t.removeItem(n,BN)}function BN(e){}function YS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YS(n,!0).forEach(function(r){HN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YS(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WN(e,t){if(e==null)return{};var n=qN(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qN(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var UN=5e3;function al(e,t){var n=e.version!==void 0?e.version:RN;e.debug;var r=e.stateReconciler===void 0?LN:e.stateReconciler,i=e.getStoredState||FN,o=e.timeout!==void 0?e.timeout:UN,s=null,l=!1,c=!0,d=function(f){return f._persist.rehydrated&&s&&!c&&s.update(f),f};return function(h,f){var g=h||{},w=g._persist,x=WN(g,["_persist"]),y=x;if(f.type===NE){var p=!1,v=function(T,I){p||(f.rehydrate(e.key,T,I),p=!0)};if(o&&setTimeout(function(){!p&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},o),c=!1,s||(s=$N(e)),w)return Hi({},t(y,f),{_persist:w});if(typeof f.rehydrate!="function"||typeof f.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return f.register(e.key),i(e).then(function(_){var T=e.migrate||function(I,L){return Promise.resolve(I)};T(_,n).then(function(I){v(I)},function(I){v(void 0,I)})},function(_){v(void 0,_)}),Hi({},t(y,f),{_persist:{version:n,rehydrated:!1}})}else{if(f.type===BE)return l=!0,f.result(NN(e)),Hi({},t(y,f),{_persist:w});if(f.type===FE)return f.result(s&&s.flush()),Hi({},t(y,f),{_persist:w});if(f.type===zE)c=!0;else if(f.type===T1){if(l)return Hi({},y,{_persist:Hi({},w,{rehydrated:!0})});if(f.key===e.key){var b=t(y,f),P=f.payload,k=r!==!1&&P!==void 0?r(P,h,b,e):b,C=Hi({},k,{_persist:Hi({},w,{rehydrated:!0})});return d(C)}}}if(!w)return t(h,f);var S=t(y,f);return S===y?h:d(Hi({},S,{_persist:w}))}}function XS(e){return KN(e)||GN(e)||VN()}function VN(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function GN(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function KN(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function JS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JS(n,!0).forEach(function(r){YN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JS(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WE={registry:[],bootstrapped:!1},XN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WE,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case HE:return yx({},t,{registry:[].concat(XS(t.registry),[n.key])});case T1:var r=t.registry.indexOf(n.key),i=XS(t.registry);return i.splice(r,1),yx({},t,{registry:i,bootstrapped:i.length===0});default:return t}};function JN(e,t,n){var r=S1(XN,WE,void 0),i=function(c){r.dispatch({type:HE,key:c})},o=function(c,d,h){var f={type:T1,payload:d,err:h,key:c};e.dispatch(f),r.dispatch(f)},s=yx({},r,{purge:function(){var c=[];return e.dispatch({type:BE,result:function(h){c.push(h)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:FE,result:function(h){c.push(h)}}),Promise.all(c)},pause:function(){e.dispatch({type:zE})},persist:function(){e.dispatch({type:NE,register:i,rehydrate:o})}});return s.persist(),s}var fc={},Lh={},$h={},QS;function QN(){if(QS)return $h;QS=1,$h.__esModule=!0,$h.default=i;function e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(l){return typeof l}:e=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(o)}function t(){}var n={getItem:t,setItem:t,removeItem:t};function r(o){if((typeof self>"u"?"undefined":e(self))!=="object"||!(o in self))return!1;try{var s=self[o],l="redux-persist ".concat(o," test");s.setItem(l,"test"),s.getItem(l),s.removeItem(l)}catch{return!1}return!0}function i(o){var s="".concat(o,"Storage");return r(s)?self[s]:n}return $h}var ZS;function ZN(){if(ZS)return Lh;ZS=1,Lh.__esModule=!0,Lh.default=n;var e=t(QN());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var i=(0,e.default)(r);return{getItem:function(s){return new Promise(function(l,c){l(i.getItem(s))})},setItem:function(s,l){return new Promise(function(c,d){c(i.setItem(s,l))})},removeItem:function(s){return new Promise(function(l,c){l(i.removeItem(s))})}}}return Lh}var eP;function eB(){if(eP)return fc;eP=1,fc.__esModule=!0,fc.default=void 0;var e=t(ZN());function t(r){return r&&r.__esModule?r:{default:r}}var n=(0,e.default)("local");return fc.default=n,fc}var tB=eB();const sh=vt(tB);var jh={},tP;function nB(){if(tP)return jh;tP=1,jh.__esModule=!0,jh.default=i;function e(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(s)}function t(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(s,h).enumerable})),c.push.apply(c,d)}return c}function n(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?t(c,!0).forEach(function(d){r(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):t(c).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function r(s,l,c){return l in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}function i(s,l,c,d){d.debug;var h=n({},c);return s&&e(s)==="object"&&Object.keys(s).forEach(function(f){if(f!=="_persist"&&l[f]===c[f]){if(o(c[f])){h[f]=n({},h[f],{},s[f]);return}h[f]=s[f]}}),h}function o(s){return s!==null&&!Array.isArray(s)&&e(s)==="object"}return jh}var rB=nB();const lh=vt(rB),aB=()=>{try{const e=localStorage.getItem("sidebarMode");return e||"vertical"}catch(e){return console.error("localStorage 접근 오류:",e),"vertical"}},iB={sidebarMode:aB()},qE=Xo({name:"ui",initialState:iB,reducers:{toggleSidebarMode:e=>{e.sidebarMode=e.sidebarMode==="vertical"?"horizontal":"vertical";try{localStorage.setItem("sidebarMode",e.sidebarMode)}catch(t){console.error("localStorage 저장 오류:",t)}},setSidebarMode:(e,t)=>{e.sidebarMode=t.payload;try{localStorage.setItem("sidebarMode",e.sidebarMode)}catch(n){console.error("localStorage 저장 오류:",n)}}}}),{toggleSidebarMode:UE,setSidebarMode:Fde}=qE.actions,I1=e=>e.ui.sidebarMode,oB=qE.reducer,O1=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",VE=/^\d+\.\d+\.\d+\.\d+$/.test(window.location.hostname),A1=!O1&&!VE&&window.location.port!=="5173",sB=()=>"/api",lB=()=>{if(A1||window.location.port==="8880")return"";if(O1){const e=window.location.protocol;return`${e}//localhost:${e==="https:"?"5000":"5100"}`}else return""},fi={BASE_URL:sB(),SOCKET_URL:lB(),IS_LOCALHOST:O1,IS_DIRECT_IP:VE,IS_NGINX_PROXY:A1,CURRENT_HOST:window.location.hostname};fi.BASE_URL,fi.SOCKET_URL,fi.IS_LOCALHOST,fi.IS_DIRECT_IP,fi.IS_NGINX_PROXY,fi.CURRENT_HOST,window.location.port;const GE=fi.BASE_URL,nt=Ps.create({baseURL:GE,headers:{"Content-Type":"application/json"},timeout:1e4}),cB=()=>"http://localhost:5101/api",ls=Ps.create({baseURL:cB(),headers:{"Content-Type":"application/json"},timeout:1e4});nt.interceptors.request.use(async e=>{try{if(e.url&&(e.url.includes("/auth/login")||e.url.includes("/auth/admin/login")||e.url.includes("/auth/login-admin")))e.headers["X-Domain"]=window.location.hostname;else{const n=localStorage.getItem("token");n&&(e.headers.Authorization=`Bearer ${n}`)}return e}catch(t){return console.error("요청 인터셉터 오류:",t),Promise.reject({...t,isApiServerDown:!0,message:"요청 처리 중 오류가 발생했습니다. 로컬 데이터를 사용합니다."})}},e=>Promise.reject(e));ls.interceptors.request.use(async e=>{try{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}catch(t){return console.error("유저 API 요청 인터셉터 오류:",t),Promise.reject(t)}},e=>Promise.reject(e));nt.interceptors.response.use(e=>e,async e=>{var n,r;if(e.isApiServerDown)return Promise.reject(e);const t=e.config;if(e.code==="ERR_NETWORK"||e.code==="ECONNABORTED")return Promise.reject(e);if(e.response&&e.response.status===401&&!t._retry){t.url;const i=((n=e.response.data)==null?void 0:n.error)||((r=e.response.data)==null?void 0:r.message)||"",o=i.toLowerCase().includes("jwt expired")||i.toLowerCase().includes("token expired"),l=["/settings/bank-accounts","/members/","/agent-levels","/domains","/domain-permissions/","/username-change/"].some(c=>t.url&&t.url.includes(c));if(l)return Promise.reject(e);t._retry=!0;try{const c=localStorage.getItem("refreshToken"),d=localStorage.getItem("token"),h=await Ps.post(`${GE}/auth/refresh-token`,{refreshToken:c},{headers:{Authorization:`Bearer ${d}`}}),{token:f}=h.data;return localStorage.setItem("token",f),t.headers.Authorization=`Bearer ${f}`,nt(t)}catch{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user");const d=new Error("Authentication failed");return d.isAuthError=!0,Promise.reject(d)}}return Promise.reject(e)});ls.interceptors.response.use(e=>e,async e=>(e.response&&e.response.status,Promise.reject(e)));const Pe={auth:{login:e=>nt.post("/auth/admin/login",e),logout:()=>nt.post("/auth/logout"),refreshToken:e=>nt.post("/auth/refresh-token",{refreshToken:e}),me:()=>nt.get("/auth/me")},agentLevels:{getAll:()=>nt.get("/agent-levels"),getById:e=>nt.get(`/agent-levels/${e}`),create:e=>nt.post("/agent-levels",e),update:(e,t)=>nt.put(`/agent-levels/${e}`,t),delete:e=>nt.delete(`/agent-levels/${e}`),updateHierarchy:(e,t)=>nt.put(`/agent-levels/${e}/hierarchy`,{hierarchyOrder:t})},permissions:{getRoles:()=>nt.get("/permissions/roles"),getRoleById:e=>nt.get(`/permissions/roles/${e}`),createRole:e=>nt.post("/permissions/roles",e),updateRole:(e,t)=>nt.put(`/permissions/roles/${e}`,t),deleteRole:e=>nt.delete(`/permissions/roles/${e}`),getRolePermissions:e=>nt.get(`/permissions/roles/${e}/permissions`),updateRolePermissions:(e,t)=>nt.put(`/permissions/roles/${e}/permissions`,{permissions:t}),getMemberPermissions:e=>nt.get(`/permissions/member/${e}`),updateMemberPermissions:(e,t)=>nt.put(`/permissions/member/${e}`,{permissions:t}),updateAgentLevelPermissions:(e,t)=>nt.put(`/permissions/agent-level/${e}`,{permissions:t})},members:{getAll:e=>nt.get("/members",{params:e}),getById:e=>nt.get(`/members/${e}`),create:e=>nt.post("/members",e),update:(e,t)=>nt.put(`/members/${e}`,t),delete:e=>nt.delete(`/members/${e}`),getChildren:e=>nt.get(`/members/${e}/children`),updatePermissions:(e,t)=>nt.put(`/members/${e}/permissions`,{permissions:t}),getByLevel:e=>nt.get(`/members/by-level/${e}`),checkUsername:e=>nt.get(`/members/check-username/${e}`),checkNickname:e=>nt.get(`/members/check-nickname/${e}`),checkReferralCode:(e,t)=>nt.get(`/members/check-referral-code/${e}`,{params:{memberId:t}}),updateReferralCode:(e,t)=>nt.put(`/members/${e}/referral-code`,{referralCode:t})},dashboard:{getStats:e=>nt.get("/dashboard/stats",{params:{period:e}}),getChartData:(e,t)=>nt.get("/dashboard/charts",{params:{chartType:e,period:t}})},userStatus:{getAll:()=>nt.get("/user-status/all")},usernameChange:{getHistory:e=>nt.get("/username-change/history",{params:e}),getOnlineChangeableUsers:()=>nt.get("/username-change/online-users"),getChangeableUsers:(e,t)=>nt.get("/username-change/changeable-users",{params:{agentId:e,excludeUserId:t}}),toggleChangeEnabled:(e,t)=>nt.put(`/username-change/toggle-enabled/${e}`,{enabled:t}),executeChange:e=>nt.post("/username-change/execute",e),validateChange:e=>nt.get(`/username-change/validate/${e}`)},settlement:{getTodaySettlement:()=>nt.get("/settlement/today"),getDailySettlement:e=>nt.get("/settlement/daily",{params:e}),getDaily:e=>nt.get("/settlement/daily",{params:e}),getThirdPartySettlement:e=>nt.get("/settlement/third-party",{params:e}),getDashboard:e=>nt.get("/settlement-api/dashboard",{params:e})},rollingHistory:{getAll:e=>nt.get("/rolling-history",{params:e}),convert:e=>nt.post("/rolling-history/convert",e)},commissionHistory:{getAll:e=>nt.get("/settings/betting-commission/logs",{params:e}),getStats:e=>nt.get("/settings/betting-commission/stats",{params:e})},moneyHistory:{getAll:e=>nt.get("/money-history",{params:e}),create:e=>nt.post("/money-history",e),updateStatus:(e,t)=>nt.put(`/money-history/${e}/status`,t)},moneyTransfer:{getAll:e=>nt.get("/money-transfer",{params:e}),transfer:e=>nt.post("/money-transfer/transfer",e),adminTransfer:e=>nt.post("/money-transfer/admin-transfer",e,{timeout:3e4})},betting:{getSlotCasino:e=>nt.get("/betting/slot-casino",{params:e}),getDetail:e=>nt.get(`/betting/detail/${e}`)},popups:{getAll:e=>nt.get("/popups",{params:e}),getById:e=>nt.get(`/popups/${e}`),create:e=>nt.post("/popups",e),update:(e,t)=>nt.put(`/popups/${e}`,t),delete:e=>nt.delete(`/popups/${e}`),toggle:e=>nt.post(`/popups/${e}/toggle`),getStats:e=>nt.get(`/popups/${e}/stats`),uploadImage:e=>nt.post("/popups/upload-image",e,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4}),deleteImage:e=>nt.delete("/popups/delete-image",{data:e}),getAutoCloseSettings:()=>nt.get("/popups/auto-close-settings"),updateAutoCloseSettings:e=>nt.put("/popups/auto-close-settings",e),clearAllDismissals:()=>nt.delete("/popups/dismissals/clear-all")},balance:{get:()=>nt.post("/balance/getbalance"),getAgent:()=>nt.get("/honor-sync/agent-info"),refresh:e=>nt.post(`/balance/admin/refresh-balance/${e}`)},games:{getAll:e=>nt.get("/games",{params:e}),getById:e=>nt.get(`/games/${e}`),create:e=>nt.post("/games",e),update:(e,t)=>nt.put(`/games/${e}`,t),updateStatus:(e,t)=>nt.put(`/games/${e}/status`,t),sync:e=>nt.post("/games/sync",e),getVendors:e=>nt.get("/games/vendors",{params:e})},honorSync:{getSyncStatus:()=>nt.get("/honor-sync/sync-status"),syncAllMembers:()=>nt.post("/honor-sync/sync-all-members"),syncMember:e=>nt.post(`/honor-sync/sync-member/${e}`),validateGameBalance:e=>nt.post("/honor-sync/validate-game-balance",e),validateTransferBalance:e=>nt.post("/honor-sync/validate-transfer-balance",e),transferToGame:e=>nt.post("/honor-sync/transfer-to-game",e),withdrawFromGame:e=>nt.post("/honor-sync/withdraw-from-game",e)},settings:{getBankAccounts:()=>nt.get("/settings/bank-accounts"),addBankAccount:e=>nt.post("/settings/bank-accounts",e),updateBankAccount:(e,t)=>nt.put(`/settings/bank-accounts/${e}`,t),deleteBankAccount:e=>nt.delete(`/settings/bank-accounts/${e}`)},systemSettings:{getApiSync:()=>nt.get("/system-settings/api-sync"),setApiSyncLevel:e=>nt.post("/system-settings/api-sync/level",{level:e}),toggleMemberApiSync:(e,t)=>nt.post(`/system-settings/api-sync/toggle/${e}`,{enabled:t}),getDomainSettings:()=>nt.get("/system-settings/domain-settings"),setDomainSettingLevel:e=>nt.post("/system-settings/domain-settings/level",{levelId:e})},masterIp:{getAll:()=>nt.get("/master-ip"),add:e=>nt.post("/master-ip",e),toggle:e=>nt.put(`/master-ip/${e}/toggle`),delete:e=>nt.delete(`/master-ip/${e}`),getLogs:e=>nt.get("/master-ip/logs",{params:e})},honorSync:{transferToGame:e=>nt.post("/honor-sync/transfer-to-game",e),withdrawFromGame:e=>nt.post("/honor-sync/withdraw-from-game",e),syncStatus:()=>nt.get("/honor-sync/sync-status"),agentInfo:()=>nt.get("/honor-sync/agent-info")},rollingTransfer:{transfer:e=>nt.post("/rolling-transfer/transfer",e),getHistory:e=>nt.get("/rolling-transfer/history",{params:e})},agentRequests:{create:e=>nt.post("/agent-requests/create",e),getReceived:()=>nt.get("/agent-requests/received"),updateStatus:(e,t)=>nt.put(`/agent-requests/${e}/status`,t)},deposit:{getBankAccount:()=>ls.get("/deposit/bank-account"),createInquiry:e=>ls.post("/deposit/inquiry",e),getCooldownSettings:()=>ls.get("/deposit/cooldown-settings")},withdrawal:{createInquiry:e=>ls.post("/withdrawal/inquiry",e),getCooldownSettings:()=>ls.get("/withdrawal/cooldown-settings")},notices:{getAll:e=>nt.get("/notices",{params:e}),getById:e=>nt.get(`/notices/${e}`),create:e=>nt.post("/notices",e),update:(e,t)=>nt.put(`/notices/${e}`,t),delete:e=>nt.delete(`/notices/${e}`),incrementView:e=>nt.put(`/notices/${e}/view`),getActiveCount:e=>nt.get("/notices/count/active",{params:e})},logs:{getAuthLogs:e=>nt.get("/logs/auth",{params:e}),getMemberChanges:e=>nt.get("/logs/member-changes",{params:e}),getSystemLogs:e=>nt.get("/logs/system",{params:e})},get:(e,t)=>nt.get(e,t),post:(e,t,n)=>nt.post(e,t,n),put:(e,t,n)=>nt.put(e,t,n),delete:(e,t)=>nt.delete(e,t),patch:(e,t,n)=>nt.patch(e,t,n)},uB={user:null,isLoading:!1,isAuthenticated:!1,error:null},Cf=ti("auth/login",async(e,{rejectWithValue:t})=>{var n,r,i;try{const o=window.location.origin,s={username:e.username,password:e.password,domain:o},l=await Pe.post("/auth/login",s);if(l.data.success){l.data.token,localStorage.setItem("token",l.data.token),l.data.refreshToken&&localStorage.setItem("refreshToken",l.data.refreshToken),window.dispatchEvent(new Event("authChange"));const c=l.data.user;let d=null;try{const h=await Pe.get(`/permissions/member/${c.id}`);(n=h.data)!=null&&n.success&&((r=h.data)!=null&&r.data)&&(d=h.data.data.effectivePermissions)}catch(h){console.error("권한 정보 로드 실패:",h),d={menus:[],buttons:[],features:[],restrictions:{menus:[],buttons:[],layouts:[],cssSelectors:[]}}}return{user:{...c,permissions:d},token:l.data.token}}else return t({message:"아이디 혹은 비밀번호가 틀립니다."})}catch(o){return t(((i=o.response)==null?void 0:i.data)||{message:"아이디 혹은 비밀번호가 틀립니다."})}}),Qu=ti("auth/logout",async(e,{rejectWithValue:t})=>{var n;try{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.dispatchEvent(new Event("authChange"));return}catch(r){return localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.dispatchEvent(new Event("authChange")),t(((n=r.response)==null?void 0:n.data)||{message:"로그아웃 실패"})}}),KE=Xo({name:"auth",initialState:uB,reducers:{clearError:e=>{e.error=null},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0},updateUserPermissions:(e,t)=>{e.user&&(e.user.permissions=t.payload,t.payload)}},extraReducers:e=>{e.addCase(Cf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Cf.fulfilled,(t,n)=>{t.isLoading=!1,t.isAuthenticated=!0,t.user=n.payload.user,t.error=null}).addCase(Cf.rejected,(t,n)=>{var r,i;t.isLoading=!1,t.isAuthenticated=!1,t.user=null,t.error=((r=n.payload)==null?void 0:r.error)||((i=n.payload)==null?void 0:i.message)||"아이디 혹은 비밀번호가 틀립니다."}).addCase(Qu.pending,t=>{t.isLoading=!0}).addCase(Qu.fulfilled,t=>{t.isLoading=!1,t.isAuthenticated=!1,t.user=null,t.error=null}).addCase(Qu.rejected,t=>{t.isLoading=!1,t.isAuthenticated=!1,t.user=null,t.error=null})}}),{clearError:zde,setUser:Ds,updateUserPermissions:dB}=KE.actions,hB=KE.reducer,fB={BASIC_STATS:[{key:"betting",titleSuffix:"베팅금",icon:"MoneyIcon",color:"blue",visible:!0,baseValue:86542e4,basePreviousValue:81e7,suffix:"원"},{key:"winning",titleSuffix:"당첨금",icon:"PaidIcon",color:"green",visible:!0,baseValue:78216e4,basePreviousValue:724e6,suffix:"원"},{key:"bettingProfit",titleSuffix:"베팅손익",icon:"TrendingUpIcon",color:"purple",visible:!0,baseValue:8326e4,basePreviousValue:79e6,suffix:"원"},{key:"deposit",titleSuffix:"입금액",icon:"CallReceivedIcon",color:"green",visible:!0,baseValue:21568e4,basePreviousValue:187e6,suffix:"원"},{key:"withdrawal",titleSuffix:"환전액",icon:"CallMadeIcon",color:"amber",visible:!0,baseValue:17542e4,basePreviousValue:1639e5,suffix:"원"},{key:"depositWithdrawalProfit",titleSuffix:"충환손익",icon:"AccountBalanceWalletIcon",color:"orange",visible:!0,baseValue:4026e4,basePreviousValue:39e6,suffix:"원"},{key:"rolling",titleSuffix:"롤링금",icon:"AutorenewIcon",color:"green",visible:!0,baseValue:12532e4,basePreviousValue:115e6,suffix:"원"},{key:"settlement",titleSuffix:"정산",icon:"AccountBalanceIcon",color:"blue",visible:!1,baseValue:6218e4,basePreviousValue:582e5,suffix:"원"}],MANAGEMENT_STATS:[{key:"totalProfit",titleSuffix:"총손익",icon:"ShowChartIcon",color:"red",visible:!0,baseValue:4206e4,basePreviousValue:393e5,suffix:"원"},{key:"rtp",titleSuffix:"RTP",icon:"PercentIcon",color:"red",visible:!0,baseValue:90.38,basePreviousValue:88.65,suffix:"%"}]},Fh={1:{templates:["BASIC_STATS","MANAGEMENT_STATS"],defaultVisible:!0,displayName:"본인"},default:{templates:["BASIC_STATS"],defaultVisible:!1,excludeKeys:["totalProfit","rtp"]},member:{templates:["BASIC_STATS"],defaultVisible:!1,includeKeys:["deposit","withdrawal","depositWithdrawalProfit","rolling"],displayName:"회원"}},pB=e=>`agent_level_${e}`,gB=(e,t)=>`${e}_${t}`,mB=e=>{const t=(e==null?void 0:e.name)||(e==null?void 0:e.levelType);return t||`레벨 ${(e==null?void 0:e.id)||""}`},nP=(e,t,n)=>{const i={1:1,2:.9,3:.85,4:.8,5:.75,6:.7,7:.65,8:.6}[t]||.5,s={betting:1,winning:.9,deposit:.8,withdrawal:.75,rolling:.85,settlement:.7}[n]||1;return Math.round(e*i*s)},yB=(e,t)=>e===1?!0:e>=8?["deposit","withdrawal","depositWithdrawalProfit","rolling"].includes(t):!["totalProfit","rtp"].includes(t),bB=e=>{if(!Array.isArray(e)||e.length===0)return console.warn("⚠️ generateAllCards: agentLevels가 비어있습니다."),[];const t=[];return e.forEach(n=>{const r=vB(n);t.push(...r)}),`${t.length}${e.length}`,t},vB=e=>{if(!(e!=null&&e.id))return console.warn("⚠️ generateCardsForLevel: 유효하지 않은 level 객체",e),[];const t=pB(e.id),n=mB(e),r=[],i=wB(e.id);return i.templates.forEach(o=>{const s=fB[o];if(!s){console.warn(`⚠️ 템플릿 '${o}'을 찾을 수 없습니다.`);return}s.forEach(l=>{if(!CB(e.id,l.key,i))return;const c=xB(l,e,t,n);r.push(c)})}),`${e.id}${n}${r.length}`,r},xB=(e,t,n,r)=>{const i=gB(n,e.key),o=nP(e.baseValue,t.id,e.key),s=nP(e.basePreviousValue,t.id,e.key);let l;return t.id===1?l=e.titleSuffix:l=`${r}${e.titleSuffix}`,{id:i,title:l,value:o,previousValue:s,suffix:e.suffix,type:n,icon:e.icon,visible:SB(t.id,e),color:e.color,levelId:t.id,levelName:t.name,cardKey:e.key,displayName:r}},wB=e=>Fh[e]?Fh[e]:e>=8?Fh.member:Fh.default,CB=(e,t,n)=>!(!yB(e,t)||n.includeKeys&&!n.includeKeys.includes(t)||n.excludeKeys&&n.excludeKeys.includes(t)),SB=(e,t)=>e===1?t.visible:!1,pc=[],gc=[{id:"bettingWinningComparison",title:"베팅/당첨금 금액 비교",type:"section",visible:!0,periodType:"monthly"},{id:"depositWithdrawalComparison",title:"입금/출금 금액 비교",type:"section",visible:!0,periodType:"monthly"},{id:"rollingAmountComparison",title:"롤링금 비교",type:"section",visible:!0,periodType:"monthly"},{id:"rolling-status",title:"롤링금 상태",type:"table",visible:!0,periodType:"monthly"},{id:"active-users",title:"접속자 현황",type:"table",visible:!0,periodType:"monthly"},{id:"deposit-withdrawal-graph",title:"입금/출금 그래프",type:"graph",visible:!0,periodType:"daily"},{id:"betting-winning-graph",title:"베팅/당첨금 그래프",type:"graph",visible:!0,periodType:"daily"}],jr=(e,t)=>e.filter(n=>n.visible&&t==="all").map((n,r)=>{if(e[0].title&&e[0].title.includes("베팅금")){const i=Math.floor(r/6),o=r%6;return{i:n.id,x:o*2,y:i,w:2,h:1,minW:2,maxW:4,minH:1,maxH:1}}else{const i=Math.floor(r/3),o=r%3;return{i:n.id,x:o*4,y:i,w:4,h:1,minW:3,maxW:12,minH:1,maxH:2}}}),PB={statsData:{cards:pc,period:"daily",layouts:{lg:jr(pc,"all"),md:jr(pc,"all"),sm:jr(pc,"all"),xs:jr(pc,"all")}},dashboardData:{items:gc,layouts:{lg:jr(gc,"all"),md:jr(gc,"all"),sm:jr(gc,"all"),xs:jr(gc,"all")}},uiState:{statsDisplayOptionsExpanded:!1,dashboardDisplayOptionsExpanded:!1,loading:!1,error:null}},YE=Xo({name:"dashboard",initialState:PB,reducers:{initializeCards:(e,t)=>{const{cards:n}=t.payload;e.statsData.cards=n,e.statsData.layouts={lg:jr(n,"all"),md:jr(n,"all"),sm:jr(n,"all"),xs:jr(n,"all")}},addCard:(e,t)=>{const n=t.payload;e.statsData.cards.push(n)},updateCard:(e,t)=>{const{cardId:n,updates:r}=t.payload,i=e.statsData.cards.findIndex(o=>o.id===n);i!==-1&&(e.statsData.cards[i]={...e.statsData.cards[i],...r})},removeCard:(e,t)=>{const n=t.payload;e.statsData.cards=e.statsData.cards.filter(r=>r.id!==n)},setCardVisibility:(e,t)=>{const{cardId:n,visible:r}=t.payload,i=e.statsData.cards.findIndex(o=>o.id===n);i!==-1&&(e.statsData.cards[i].visible=r)},setDashboardItemVisibility:(e,t)=>{const{itemId:n,visible:r}=t.payload,i=e.dashboardData.items.findIndex(o=>o.id===n);i!==-1&&(e.dashboardData.items[i].visible=r)},setPeriod:(e,t)=>{e.statsData.period=t.payload},setStatsLayouts:(e,t)=>{e.statsData.layouts=t.payload},setDashboardLayouts:(e,t)=>{e.dashboardData.layouts=t.payload},reorderCards:(e,t)=>{e.statsData.cards=t.payload},reorderDashboardItems:(e,t)=>{e.dashboardData.items=t.payload},toggleStatsDisplayOptions:e=>{e.uiState.statsDisplayOptionsExpanded=!e.uiState.statsDisplayOptionsExpanded},toggleDashboardDisplayOptions:e=>{e.uiState.dashboardDisplayOptionsExpanded=!e.uiState.dashboardDisplayOptionsExpanded},resetStatsLayout:e=>{e.statsData.layouts={lg:jr(e.statsData.cards,"all"),md:jr(e.statsData.cards,"all"),sm:jr(e.statsData.cards,"all"),xs:jr(e.statsData.cards,"all")}},resetDashboardLayout:e=>{e.dashboardData.layouts={lg:jr(e.dashboardData.items,"all"),md:jr(e.dashboardData.items,"all"),sm:jr(e.dashboardData.items,"all"),xs:jr(e.dashboardData.items,"all")}},setLoading:(e,t)=>{e.uiState.loading=t.payload},setError:(e,t)=>{e.uiState.error=t.payload}}}),{initializeCards:kB,addCard:Nde,updateCard:Bde,removeCard:Hde,setCardVisibility:_B,setDashboardItemVisibility:TB,setPeriod:XE,setStatsLayouts:rP,setDashboardLayouts:IB,reorderCards:Wde,reorderDashboardItems:qde,toggleStatsDisplayOptions:Ude,toggleDashboardDisplayOptions:Vde,resetStatsLayout:JE,resetDashboardLayout:QE,setLoading:Gs,setError:Gde}=YE.actions,ZE=e=>e.dashboard.statsData.cards,e5=e=>e.dashboard.dashboardData.items,OB=e=>e.dashboard.statsData.layouts,AB=e=>e.dashboard.dashboardData.layouts,t5=e=>e.dashboard.statsData.period,DB=e=>e.dashboard.uiState.loading,RB=YE.reducer,EB={isVisible:!0,soundEnabled:!0,notifications:{"member-registration":{id:"member-registration",title:"회원가입",icon:"PersonIcon",color:"#9c27b0",requests:0,pending:0},"deposit-inquiry":{id:"deposit-inquiry",title:"입금문의",icon:"ArrowUpwardIcon",color:"#f44336",requests:0,pending:0},"withdrawal-inquiry":{id:"withdrawal-inquiry",title:"출금문의",icon:"ArrowDownwardIcon",color:"#2196f3",requests:0,pending:0},"customer-service":{id:"customer-service",title:"고객센터",icon:"SupportAgentIcon",color:"#ff9800",requests:0,pending:0}}},n5=Xo({name:"notifications",initialState:EB,reducers:{toggleNotificationPanel:e=>{e.isVisible=!e.isVisible},toggleNotificationSound:e=>{e.soundEnabled=!e.soundEnabled},updateNotificationCount:(e,t)=>{const{id:n,requests:r,pending:i}=t.payload;if(n==="agent-inquiry"||n==="balance-mismatch"){console.warn(`[Redux] ${n} 업데이트 시도 차단됨`);return}e.notifications[n]&&(r!==void 0&&(e.notifications[n].requests=r),i!==void 0&&(e.notifications[n].pending=i))},updateAllNotifications:(e,t)=>{const n=t.payload;Object.keys(n).forEach(r=>{if(e.notifications[r]){const{requests:i,pending:o}=n[r];i!==void 0&&(e.notifications[r].requests=i),o!==void 0&&(e.notifications[r].pending=o)}})},generateRandomNotifications:e=>{Object.keys(e.notifications).forEach(t=>{e.notifications[t].requests=Math.floor(Math.random()*10),e.notifications[t].pending=Math.floor(Math.random()*10)})},initializeNotifications:(e,t)=>{const n=t.payload;["member-registration","deposit-inquiry","withdrawal-inquiry","customer-service"].forEach(i=>{n[i]&&e.notifications[i]&&(e.notifications[i].requests=n[i].requests||0,e.notifications[i].pending=n[i].pending||0)}),delete e.notifications["agent-inquiry"],delete e.notifications["balance-mismatch"]}}}),{toggleNotificationPanel:bx,toggleNotificationSound:MB,updateNotificationCount:Wi,updateAllNotifications:Kde,generateRandomNotifications:Yde,initializeNotifications:LB}=n5.actions,$B=e=>e.notifications.isVisible,r5=e=>e.notifications.soundEnabled,a5=e=>e.notifications.notifications,jB=(e,t)=>e.notifications.notifications[t],FB=e=>{const t=e.notifications.notifications;return Object.values(t).reduce((n,r)=>n+r.requests+r.pending,0)},zB=n5.reducer,Pm=ti("permissions/fetchRoles",async(e,{rejectWithValue:t})=>{var n;try{const r=[{id:1,name:"슈퍼관리자",createdAt:"2023-01-01",bankName:"신한은행",accountNumber:"110-123-456789",accountHolder:"홍길동"},{id:2,name:"관리자",createdAt:"2023-01-01",bankName:"국민은행",accountNumber:"123-45-67890",accountHolder:"김철수"},{id:3,name:"에이전트",createdAt:"2023-01-01",bankName:"우리은행",accountNumber:"1002-123-456789",accountHolder:"이영희"},{id:4,name:"회원",createdAt:"2023-01-01",bankName:"",accountNumber:"",accountHolder:""}];try{return(await Pe.permissions.getRoles()).data}catch(i){console.error("API 호출 실패, 로컬 데이터 사용:",i);const o=localStorage.getItem("roles");return o?JSON.parse(o):(localStorage.setItem("roles",JSON.stringify(r)),r)}}catch(r){return t(((n=r.response)==null?void 0:n.data)||"데이터를 불러오는데 실패했습니다.")}}),Sf=ti("permissions/fetchRolePermissions",async(e,{rejectWithValue:t})=>{var n;try{const r={1:[101,102,103,201,202,203,204,205,301,302,401,402,501,502,503,601,602,603,604],2:[101,102,103,201,202,203,204,301,401,501,502,503,601],3:[101,201,202,301,401,501],4:[101]};try{const i=await Pe.permissions.getRolePermissions(e);return{roleId:e,permissions:i.data}}catch(i){console.error("API 호출 실패, 로컬 데이터 사용:",i);const o=localStorage.getItem("rolePermissions");if(o){const s=JSON.parse(o);if(s[e])return{roleId:e,permissions:s[e]}}if(r[e]){const s=o?JSON.parse(o):{};return s[e]=r[e],localStorage.setItem("rolePermissions",JSON.stringify(s)),{roleId:e,permissions:r[e]}}return{roleId:e,permissions:[]}}}catch(r){return t(((n=r.response)==null?void 0:n.data)||"권한 정보를 불러오는데 실패했습니다.")}}),km=ti("permissions/createRole",async(e,{rejectWithValue:t})=>{var n;try{try{return(await Pe.permissions.createRole(e)).data}catch(r){console.error("API 호출 실패, 로컬 데이터 사용:",r);const i=localStorage.getItem("roles");let o=[];i&&(o=JSON.parse(i));const s=o.length>0?Math.max(...o.map(c=>c.id))+1:1,l={...e,id:s,createdAt:new Date().toISOString().split("T")[0]};return localStorage.setItem("roles",JSON.stringify([...o,l])),l}}catch(r){return t(((n=r.response)==null?void 0:n.data)||"역할 생성에 실패했습니다.")}}),_m=ti("permissions/updateRole",async({id:e,data:t},{rejectWithValue:n})=>{var r;try{try{return(await Pe.permissions.updateRole(e,t)).data}catch(i){console.error("API 호출 실패, 로컬 데이터 사용:",i);const o=localStorage.getItem("roles");if(!o)throw new Error("로컬 데이터가 없습니다.");const s=JSON.parse(o),l=s.findIndex(d=>d.id===e);if(l===-1)throw new Error("해당 ID의 역할을 찾을 수 없습니다.");const c={...s[l],...t,id:e};return s[l]=c,localStorage.setItem("roles",JSON.stringify(s)),c}}catch(i){return n(((r=i.response)==null?void 0:r.data)||"역할 업데이트에 실패했습니다.")}}),Tm=ti("permissions/deleteRole",async(e,{rejectWithValue:t})=>{var n;try{try{return await Pe.permissions.deleteRole(e),e}catch(r){console.error("API 호출 실패, 로컬 데이터 사용:",r);const i=localStorage.getItem("roles");if(!i)throw new Error("로컬 데이터가 없습니다.");const s=JSON.parse(i).filter(c=>c.id!==e);localStorage.setItem("roles",JSON.stringify(s));const l=localStorage.getItem("rolePermissions");if(l){const c=JSON.parse(l);delete c[e],localStorage.setItem("rolePermissions",JSON.stringify(c))}return e}}catch(r){return t(((n=r.response)==null?void 0:n.data)||"역할 삭제에 실패했습니다.")}}),Im=ti("permissions/updateRolePermissions",async({roleId:e,permissions:t},{rejectWithValue:n})=>{var r;try{try{const i=await Pe.permissions.updateRolePermissions(e,t);return{roleId:e,permissions:i.data}}catch(i){console.error("API 호출 실패, 로컬 데이터 사용:",i);const o=localStorage.getItem("rolePermissions");let s={};return o&&(s=JSON.parse(o)),s[e]=t,localStorage.setItem("rolePermissions",JSON.stringify(s)),{roleId:e,permissions:t}}}catch(i){return n(((r=i.response)==null?void 0:r.data)||"권한 업데이트에 실패했습니다.")}}),NB={roles:[],rolePermissions:{},status:"idle",error:null,selectedRoleId:null},i5=Xo({name:"permissions",initialState:NB,reducers:{setSelectedRoleId:(e,t)=>{e.selectedRoleId=t.payload},clearSelectedRoleId:e=>{e.selectedRoleId=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Pm.pending,t=>{t.status="loading"}).addCase(Pm.fulfilled,(t,n)=>{t.status="succeeded",t.roles=n.payload}).addCase(Pm.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"역할 정보를 불러오는데 실패했습니다."}).addCase(Sf.pending,t=>{t.status="loading"}).addCase(Sf.fulfilled,(t,n)=>{t.status="succeeded";const{roleId:r,permissions:i}=n.payload;t.rolePermissions[r]=i}).addCase(Sf.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"권한 정보를 불러오는데 실패했습니다."}).addCase(km.pending,t=>{t.status="loading"}).addCase(km.fulfilled,(t,n)=>{t.status="succeeded",t.roles.push(n.payload)}).addCase(km.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"역할 생성에 실패했습니다."}).addCase(_m.pending,t=>{t.status="loading"}).addCase(_m.fulfilled,(t,n)=>{t.status="succeeded";const r=t.roles.findIndex(i=>i.id===n.payload.id);r!==-1&&(t.roles[r]=n.payload)}).addCase(_m.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"역할 업데이트에 실패했습니다."}).addCase(Tm.pending,t=>{t.status="loading"}).addCase(Tm.fulfilled,(t,n)=>{t.status="succeeded",t.roles=t.roles.filter(r=>r.id!==n.payload),delete t.rolePermissions[n.payload]}).addCase(Tm.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"역할 삭제에 실패했습니다."}).addCase(Im.pending,t=>{t.status="loading"}).addCase(Im.fulfilled,(t,n)=>{t.status="succeeded";const{roleId:r,permissions:i}=n.payload;t.rolePermissions[r]=i}).addCase(Im.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"권한 업데이트에 실패했습니다."})}}),{setSelectedRoleId:Xde,clearSelectedRoleId:Jde,clearError:Qde}=i5.actions,BB=(e,t)=>e.permissions.rolePermissions[t]||[],HB=i5.reducer,aP={members:[],filter:{dateRange:null,memberType:"",memberStatus:"",connectionStatus:""},tableSettings:{visibleColumns:{checked:!0,rowNum:!0,type:!0,username:!0,connectionStatus:!0,onlineStatus:!0,api:!1,paymentStatus:!0,balance:!0,gameMoney:!0,depositWithdrawal:!0,rollingPercent:!0,rollingAmount:!0,realName:!0,bank:!1,accountNumber:!1,lastGame:!1,lastConnectedAt:!1,createdAt:!1,profit_casino:!0,profit_slot:!0,profit_total:!0,actions:!0},columnOrder:null,columnState:null,sortConfig:{key:"rowNum",direction:"asc"},pageSize:25,sequentialPageNumbers:!1,pinnedColumns:["checked","rowNum","type","username"],hasPinnedColumns:!0},status:"idle",error:null},o5=Xo({name:"members",initialState:aP,reducers:{setMembers:(e,t)=>{e.members=t.payload},setFilter:(e,t)=>{e.filter=t.payload},resetFilter:e=>{e.filter=aP.filter},updateTableSettings:(e,t)=>{e.tableSettings={...e.tableSettings,...t.payload}},updateVisibleColumns:(e,t)=>{e.tableSettings.visibleColumns={...e.tableSettings.visibleColumns,...t.payload}},updateColumnOrder:(e,t)=>{e.tableSettings.columnOrder=t.payload},updateColumnState:(e,t)=>{e.tableSettings.columnState=t.payload},updateSortConfig:(e,t)=>{e.tableSettings.sortConfig=t.payload},updatePageSize:(e,t)=>{e.tableSettings.pageSize=t.payload},updateSequentialPageNumbers:(e,t)=>{e.tableSettings.sequentialPageNumbers=t.payload},updatePinnedColumns:(e,t)=>{e.tableSettings.pinnedColumns=t.payload},updateHasPinnedColumns:(e,t)=>{e.tableSettings.hasPinnedColumns=t.payload},updateMemberBalance:(e,t)=>{const{userId:n,balance:r}=t.payload,i=e.members.find(o=>o.id===n);i&&(i.balance=r)}}}),{setMembers:Zde,setFilter:ehe,resetFilter:the,updateTableSettings:nhe,updateVisibleColumns:rhe,updateColumnOrder:ahe,updateColumnState:ihe,updateSortConfig:ohe,updatePageSize:she,updateSequentialPageNumbers:lhe,updatePinnedColumns:che,updateHasPinnedColumns:uhe,updateMemberBalance:s5}=o5.actions,iP=o5.reducer,Om=ti("agentLevels/fetchAll",async(e,{rejectWithValue:t})=>{var n;try{return(await Pe.agentLevels.getAll()).data}catch(r){return t(((n=r.response)==null?void 0:n.data)||"데이터를 불러오는데 실패했습니다.")}}),Am=ti("agentLevels/create",async(e,{rejectWithValue:t})=>{try{return(await Pe.agentLevels.create(e)).data}catch(n){return t(n.response.data)}}),Dm=ti("agentLevels/update",async({id:e,data:t},{rejectWithValue:n})=>{try{return(await Pe.agentLevels.update(e,t)).data}catch(r){return n(r.response.data)}}),Rm=ti("agentLevels/delete",async(e,{rejectWithValue:t})=>{try{return await Pe.agentLevels.delete(e),e}catch(n){return t(n.response.data)}}),WB={levels:[],status:"idle",error:null,selectedLevel:null},l5=Xo({name:"agentLevels",initialState:WB,reducers:{setSelectedLevel:(e,t)=>{e.selectedLevel=t.payload},clearSelectedLevel:e=>{e.selectedLevel=null},setLevels:(e,t)=>{e.levels=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Om.pending,t=>{t.status="loading"}).addCase(Om.fulfilled,(t,n)=>{t.status="succeeded",t.levels=n.payload}).addCase(Om.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"단계 정보를 불러오는데 실패했습니다."}).addCase(Am.pending,t=>{t.status="loading"}).addCase(Am.fulfilled,(t,n)=>{t.status="succeeded",t.levels.push(n.payload)}).addCase(Am.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"단계 생성에 실패했습니다."}).addCase(Dm.pending,t=>{t.status="loading"}).addCase(Dm.fulfilled,(t,n)=>{t.status="succeeded";const r=t.levels.findIndex(i=>i.id===n.payload.id);r!==-1&&(t.levels[r]=n.payload)}).addCase(Dm.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"단계 업데이트에 실패했습니다."}).addCase(Rm.pending,t=>{t.status="loading"}).addCase(Rm.fulfilled,(t,n)=>{t.status="succeeded",t.levels=t.levels.filter(r=>r.id!==n.payload)}).addCase(Rm.rejected,(t,n)=>{t.status="failed",t.error=n.payload||"단계 삭제에 실패했습니다."})}}),{setSelectedLevel:dhe,clearSelectedLevel:hhe,setLevels:fhe,clearError:phe}=l5.actions,qB=l5.reducer,UB={history:[],onlineChangeableUsers:[],changeableUsers:[],isLoading:!1,error:null,selectedUser:null,changeDialog:{open:!1,userId:null,agentId:null},toggleLoading:!1,toggleError:null},c5=Xo({name:"usernameChange",initialState:UB,reducers:{setHistory:(e,t)=>{e.history=t.payload},addHistoryRecord:(e,t)=>{e.history.unshift(t.payload)},setOnlineChangeableUsers:(e,t)=>{e.onlineChangeableUsers=t.payload},updateUserStatus:(e,t)=>{const{userId:n,status:r}=t.payload,i=e.onlineChangeableUsers.find(o=>o.userId===n);i&&(i.gameStatus=r)},setChangeableUsers:(e,t)=>{e.changeableUsers=t.payload},clearChangeableUsers:e=>{e.changeableUsers=[]},setSelectedUser:(e,t)=>{e.selectedUser=t.payload},clearSelectedUser:e=>{e.selectedUser=null},openChangeDialog:(e,t)=>{e.changeDialog={open:!0,userId:t.payload.userId,agentId:t.payload.agentId}},closeChangeDialog:e=>{e.changeDialog={open:!1,userId:null,agentId:null},e.changeableUsers=[]},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},toggleUsernameChangeEnabled:(e,t)=>{const{userId:n,enabled:r}=t.payload},setToggleLoading:(e,t)=>{e.toggleLoading=t.payload},setToggleError:(e,t)=>{e.toggleError=t.payload},executeUsernameChange:(e,t)=>{const{oldUserId:n,newUserId:r,agentId:i,reason:o}=t.payload,s={id:`UCH${Date.now()}`,changeDate:new Date().toISOString().replace("T"," ").substring(0,19),agentId:i,oldUsername:n,newUsername:r,changeReason:o||"사용자 요청",changedBy:"admin"};e.history.unshift(s),e.onlineChangeableUsers=e.onlineChangeableUsers.filter(l=>l.userId!==n),e.changeDialog={open:!1,userId:null,agentId:null},e.changeableUsers=[]}}}),{setHistory:ghe,addHistoryRecord:mhe,setOnlineChangeableUsers:oP,updateUserStatus:yhe,setChangeableUsers:zh,clearChangeableUsers:bhe,setSelectedUser:vhe,clearSelectedUser:xhe,openChangeDialog:VB,closeChangeDialog:u5,setLoading:il,setError:Ks,clearError:whe,toggleUsernameChangeEnabled:GB,setToggleLoading:Che,setToggleError:She,executeUsernameChange:KB}=c5.actions,YB=c5.reducer,XB={key:"auth",storage:sh,stateReconciler:lh},JB={key:"ui",storage:sh,stateReconciler:lh},QB={key:"notifications",storage:sh,stateReconciler:lh},sP={key:"members",storage:sh,stateReconciler:lh},ZB=TE({auth:al(XB,hB),ui:al(JB,oB),dashboard:RB,notifications:al(QB,zB),agentLevels:qB,permissions:HB,members:al(sP,iP),member:al(sP,iP),usernameChange:YB}),lP={0:e=>e,1:e=>{var t;return(t=e==null?void 0:e.notifications)!=null&&t.notifications&&(delete e.notifications.notifications["agent-inquiry"],delete e.notifications.notifications["balance-mismatch"]),e},2:e=>e},vx={key:"root",version:2,storage:sh,stateReconciler:lh,whitelist:["auth","ui","notifications","members"],migrate:(e,t)=>{`${t}${vx.version}`;let n=e;const r=t||0;for(let i=r;i<vx.version;i++)lP[i+1]&&(n=lP[i+1](n));return Promise.resolve(n)}},e6=al(vx,ZB),D1=hN({reducer:e6,middleware:e=>e({serializableCheck:!1})}),t6=JN(D1);var pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gg=typeof window>"u"||"Deno"in globalThis;function oi(){}function n6(e,t){return typeof e=="function"?e(t):e}function r6(e){return typeof e=="number"&&e>=0&&e!==1/0}function a6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xx(e,t){return typeof e=="function"?e(t):e}function i6(e,t){return typeof e=="function"?e(t):e}function cP(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:l}=e;if(s){if(r){if(t.queryHash!==R1(s,t.options))return!1}else if(!yd(t.queryKey,s))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||o&&!o(t))}function uP(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(md(t.options.mutationKey)!==md(o))return!1}else if(!yd(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function R1(e,t){return((t==null?void 0:t.queryKeyHashFn)||md)(e)}function md(e){return JSON.stringify(e,(t,n)=>wx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function yd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>yd(e[n],t[n])):!1}function d5(e,t){if(e===t)return e;const n=dP(e)&&dP(t);if(n||wx(e)&&wx(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,l=n?[]:{},c=new Set(r);let d=0;for(let h=0;h<s;h++){const f=n?h:o[h];(!n&&c.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,d++):(l[f]=d5(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&d++)}return i===s&&d===i?e:l}return t}function dP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wx(e){if(!hP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hP(e){return Object.prototype.toString.call(e)==="[object Object]"}function o6(e){return new Promise(t=>{setTimeout(t,e)})}function s6(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?d5(e,t):t}function l6(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function c6(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var E1=Symbol();function h5(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===E1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ms,Do,gl,HR,u6=(HR=class extends pg{constructor(){super();Qn(this,ms);Qn(this,Do);Qn(this,gl);kn(this,gl,t=>{if(!gg&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){dt(this,Do)||this.setEventListener(dt(this,gl))}onUnsubscribe(){var t;this.hasListeners()||((t=dt(this,Do))==null||t.call(this),kn(this,Do,void 0))}setEventListener(t){var n;kn(this,gl,t),(n=dt(this,Do))==null||n.call(this),kn(this,Do,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){dt(this,ms)!==t&&(kn(this,ms,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof dt(this,ms)=="boolean"?dt(this,ms):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ms=new WeakMap,Do=new WeakMap,gl=new WeakMap,HR),f5=new u6,ml,Ro,yl,WR,d6=(WR=class extends pg{constructor(){super();Qn(this,ml,!0);Qn(this,Ro);Qn(this,yl);kn(this,yl,t=>{if(!gg&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){dt(this,Ro)||this.setEventListener(dt(this,yl))}onUnsubscribe(){var t;this.hasListeners()||((t=dt(this,Ro))==null||t.call(this),kn(this,Ro,void 0))}setEventListener(t){var n;kn(this,yl,t),(n=dt(this,Ro))==null||n.call(this),kn(this,Ro,t(this.setOnline.bind(this)))}setOnline(t){dt(this,ml)!==t&&(kn(this,ml,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return dt(this,ml)}},ml=new WeakMap,Ro=new WeakMap,yl=new WeakMap,WR),np=new d6;function h6(){let e,t;const n=new Promise((i,o)=>{e=i,t=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function f6(e){return Math.min(1e3*2**e,3e4)}function p5(e){return(e??"online")==="online"?np.isOnline():!0}var g5=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Em(e){return e instanceof g5}function m5(e){let t=!1,n=0,r=!1,i;const o=h6(),s=y=>{var p;r||(g(new g5(y)),(p=e.abort)==null||p.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>f5.isFocused()&&(e.networkMode==="always"||np.isOnline())&&e.canRun(),h=()=>p5(e.networkMode)&&e.canRun(),f=y=>{var p;r||(r=!0,(p=e.onSuccess)==null||p.call(e,y),i==null||i(),o.resolve(y))},g=y=>{var p;r||(r=!0,(p=e.onError)==null||p.call(e,y),i==null||i(),o.reject(y))},w=()=>new Promise(y=>{var p;i=v=>{(r||d())&&y(v)},(p=e.onPause)==null||p.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),x=()=>{if(r)return;let y;const p=n===0?e.initialPromise:void 0;try{y=p??e.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(f).catch(v=>{var S;if(r)return;const b=e.retry??(gg?0:3),P=e.retryDelay??f6,k=typeof P=="function"?P(n,v):P,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,v);if(t||!C){g(v);return}n++,(S=e.onFail)==null||S.call(e,n,v),o6(k).then(()=>d()?void 0:w()).then(()=>{t?g(v):x()})})};return{promise:o,cancel:s,continue:()=>(i==null||i(),o),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():w().then(x),o)}}var p6=e=>setTimeout(e,0);function g6(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=p6;const o=l=>{t?e.push(l):i(()=>{n(l)})},s=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||s()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var fa=g6(),ys,qR,y5=(qR=class{constructor(){Qn(this,ys)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),r6(this.gcTime)&&kn(this,ys,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gg?1/0:300*1e3))}clearGcTimeout(){dt(this,ys)&&(clearTimeout(dt(this,ys)),kn(this,ys,void 0))}},ys=new WeakMap,qR),bl,bs,Ua,vs,ia,nh,xs,si,Xi,UR,m6=(UR=class extends y5{constructor(t){super();Qn(this,si);Qn(this,bl);Qn(this,bs);Qn(this,Ua);Qn(this,vs);Qn(this,ia);Qn(this,nh);Qn(this,xs);kn(this,xs,!1),kn(this,nh,t.defaultOptions),this.setOptions(t.options),this.observers=[],kn(this,vs,t.client),kn(this,Ua,dt(this,vs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,kn(this,bl,b6(this.options)),this.state=t.state??dt(this,bl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=dt(this,ia))==null?void 0:t.promise}setOptions(t){this.options={...dt(this,nh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&dt(this,Ua).remove(this)}setData(t,n){const r=s6(this.state.data,t,this.options);return aa(this,si,Xi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){aa(this,si,Xi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=dt(this,ia))==null?void 0:r.promise;return(i=dt(this,ia))==null||i.cancel(t),n?n.then(oi).catch(oi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(dt(this,bl))}isActive(){return this.observers.some(t=>i6(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===E1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>xx(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!a6(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=dt(this,ia))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=dt(this,ia))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),dt(this,Ua).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(dt(this,ia)&&(dt(this,xs)?dt(this,ia).cancel({revert:!0}):dt(this,ia).cancelRetry()),this.scheduleGc()),dt(this,Ua).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||aa(this,si,Xi).call(this,{type:"invalidate"})}fetch(t,n){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(dt(this,ia))return dt(this,ia).continueRetry(),dt(this,ia).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(w=>w.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(kn(this,xs,!0),r.signal)})},o=()=>{const g=h5(this.options,n),x=(()=>{const y={client:dt(this,vs),queryKey:this.queryKey,meta:this.meta};return i(y),y})();return kn(this,xs,!1),this.options.persister?this.options.persister(g,x,this):g(x)},l=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:dt(this,vs),state:this.state,fetchFn:o};return i(g),g})();(d=this.options.behavior)==null||d.onFetch(l,this),kn(this,bs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&aa(this,si,Xi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=g=>{var w,x,y,p;Em(g)&&g.silent||aa(this,si,Xi).call(this,{type:"error",error:g}),Em(g)||((x=(w=dt(this,Ua).config).onError)==null||x.call(w,g,this),(p=(y=dt(this,Ua).config).onSettled)==null||p.call(y,this.state.data,g,this)),this.scheduleGc()};return kn(this,ia,m5({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:g=>{var w,x,y,p;if(g===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(v){c(v);return}(x=(w=dt(this,Ua).config).onSuccess)==null||x.call(w,g,this),(p=(y=dt(this,Ua).config).onSettled)==null||p.call(y,g,this.state.error,this),this.scheduleGc()},onError:c,onFail:(g,w)=>{aa(this,si,Xi).call(this,{type:"failed",failureCount:g,error:w})},onPause:()=>{aa(this,si,Xi).call(this,{type:"pause"})},onContinue:()=>{aa(this,si,Xi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),dt(this,ia).start()}},bl=new WeakMap,bs=new WeakMap,Ua=new WeakMap,vs=new WeakMap,ia=new WeakMap,nh=new WeakMap,xs=new WeakMap,si=new WeakSet,Xi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...y6(r.data,this.options),fetchMeta:t.meta??null};case"success":return kn(this,bs,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Em(i)&&i.revert&&dt(this,bs)?{...dt(this,bs),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),fa.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),dt(this,Ua).notify({query:this,type:"updated",action:t})})},UR);function y6(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:p5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function b6(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ti,VR,v6=(VR=class extends pg{constructor(t={}){super();Qn(this,Ti);this.config=t,kn(this,Ti,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??R1(i,n);let s=this.get(o);return s||(s=new m6({client:t,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){dt(this,Ti).has(t.queryHash)||(dt(this,Ti).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=dt(this,Ti).get(t.queryHash);n&&(t.destroy(),n===t&&dt(this,Ti).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){fa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return dt(this,Ti).get(t)}getAll(){return[...dt(this,Ti).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>cP(t,r)):n}notify(t){fa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){fa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){fa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ti=new WeakMap,VR),Ii,da,ws,Oi,_o,GR,x6=(GR=class extends y5{constructor(t){super();Qn(this,Oi);Qn(this,Ii);Qn(this,da);Qn(this,ws);this.mutationId=t.mutationId,kn(this,da,t.mutationCache),kn(this,Ii,[]),this.state=t.state||w6(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){dt(this,Ii).includes(t)||(dt(this,Ii).push(t),this.clearGcTimeout(),dt(this,da).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){kn(this,Ii,dt(this,Ii).filter(n=>n!==t)),this.scheduleGc(),dt(this,da).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){dt(this,Ii).length||(this.state.status==="pending"?this.scheduleGc():dt(this,da).remove(this))}continue(){var t;return((t=dt(this,ws))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,s,l,c,d,h,f,g,w,x,y,p,v,b,P,k,C,S,_,T;const n=()=>{aa(this,Oi,_o).call(this,{type:"continue"})};kn(this,ws,m5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,L)=>{aa(this,Oi,_o).call(this,{type:"failed",failureCount:I,error:L})},onPause:()=>{aa(this,Oi,_o).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>dt(this,da).canRun(this)}));const r=this.state.status==="pending",i=!dt(this,ws).canStart();try{if(r)n();else{aa(this,Oi,_o).call(this,{type:"pending",variables:t,isPaused:i}),await((s=(o=dt(this,da).config).onMutate)==null?void 0:s.call(o,t,this));const L=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));L!==this.state.context&&aa(this,Oi,_o).call(this,{type:"pending",context:L,variables:t,isPaused:i})}const I=await dt(this,ws).start();return await((h=(d=dt(this,da).config).onSuccess)==null?void 0:h.call(d,I,t,this.state.context,this)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,I,t,this.state.context)),await((x=(w=dt(this,da).config).onSettled)==null?void 0:x.call(w,I,null,this.state.variables,this.state.context,this)),await((p=(y=this.options).onSettled)==null?void 0:p.call(y,I,null,t,this.state.context)),aa(this,Oi,_o).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(v=dt(this,da).config).onError)==null?void 0:b.call(v,I,t,this.state.context,this)),await((k=(P=this.options).onError)==null?void 0:k.call(P,I,t,this.state.context)),await((S=(C=dt(this,da).config).onSettled)==null?void 0:S.call(C,void 0,I,this.state.variables,this.state.context,this)),await((T=(_=this.options).onSettled)==null?void 0:T.call(_,void 0,I,t,this.state.context)),I}finally{aa(this,Oi,_o).call(this,{type:"error",error:I})}}finally{dt(this,da).runNext(this)}}},Ii=new WeakMap,da=new WeakMap,ws=new WeakMap,Oi=new WeakSet,_o=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),fa.batch(()=>{dt(this,Ii).forEach(r=>{r.onMutationUpdate(t)}),dt(this,da).notify({mutation:this,type:"updated",action:t})})},GR);function w6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zi,li,rh,KR,C6=(KR=class extends pg{constructor(t={}){super();Qn(this,Zi);Qn(this,li);Qn(this,rh);this.config=t,kn(this,Zi,new Set),kn(this,li,new Map),kn(this,rh,0)}build(t,n,r){const i=new x6({mutationCache:this,mutationId:++Th(this,rh)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){dt(this,Zi).add(t);const n=Nh(t);if(typeof n=="string"){const r=dt(this,li).get(n);r?r.push(t):dt(this,li).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(dt(this,Zi).delete(t)){const n=Nh(t);if(typeof n=="string"){const r=dt(this,li).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&dt(this,li).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Nh(t);if(typeof n=="string"){const r=dt(this,li).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=Nh(t);if(typeof n=="string"){const i=(r=dt(this,li).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fa.batch(()=>{dt(this,Zi).forEach(t=>{this.notify({type:"removed",mutation:t})}),dt(this,Zi).clear(),dt(this,li).clear()})}getAll(){return Array.from(dt(this,Zi))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uP(n,r))}findAll(t={}){return this.getAll().filter(n=>uP(t,n))}notify(t){fa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return fa.batch(()=>Promise.all(t.map(n=>n.continue().catch(oi))))}},Zi=new WeakMap,li=new WeakMap,rh=new WeakMap,KR);function Nh(e){var t;return(t=e.options.scope)==null?void 0:t.id}function fP(e){return{onFetch:(t,n)=>{var h,f,g,w,x;const r=t.options,i=(g=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:g.direction,o=((w=t.state.data)==null?void 0:w.pages)||[],s=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const p=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},v=h5(t.options,t.fetchOptions),b=async(P,k,C)=>{if(y)return Promise.reject();if(k==null&&P.pages.length)return Promise.resolve(P);const _=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:k,direction:C?"backward":"forward",meta:t.options.meta};return p(A),A})(),T=await v(_),{maxPages:I}=t.options,L=C?c6:l6;return{pages:L(P.pages,T,I),pageParams:L(P.pageParams,k,I)}};if(i&&o.length){const P=i==="backward",k=P?S6:pP,C={pages:o,pageParams:s},S=k(r,C);l=await b(C,S,P)}else{const P=e??o.length;do{const k=c===0?s[0]??r.initialPageParam:pP(r,l);if(c>0&&k==null)break;l=await b(l,k),c++}while(c<P)}return l};t.options.persister?t.fetchFn=()=>{var y,p;return(p=(y=t.options).persister)==null?void 0:p.call(y,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function pP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function S6(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Ir,Eo,Mo,vl,xl,Lo,wl,Cl,YR,P6=(YR=class{constructor(e={}){Qn(this,Ir);Qn(this,Eo);Qn(this,Mo);Qn(this,vl);Qn(this,xl);Qn(this,Lo);Qn(this,wl);Qn(this,Cl);kn(this,Ir,e.queryCache||new v6),kn(this,Eo,e.mutationCache||new C6),kn(this,Mo,e.defaultOptions||{}),kn(this,vl,new Map),kn(this,xl,new Map),kn(this,Lo,0)}mount(){Th(this,Lo)._++,dt(this,Lo)===1&&(kn(this,wl,f5.subscribe(async e=>{e&&(await this.resumePausedMutations(),dt(this,Ir).onFocus())})),kn(this,Cl,np.subscribe(async e=>{e&&(await this.resumePausedMutations(),dt(this,Ir).onOnline())})))}unmount(){var e,t;Th(this,Lo)._--,dt(this,Lo)===0&&((e=dt(this,wl))==null||e.call(this),kn(this,wl,void 0),(t=dt(this,Cl))==null||t.call(this),kn(this,Cl,void 0))}isFetching(e){return dt(this,Ir).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return dt(this,Eo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=dt(this,Ir).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=dt(this,Ir).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(xx(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return dt(this,Ir).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=dt(this,Ir).get(r.queryHash),o=i==null?void 0:i.state.data,s=n6(t,o);if(s!==void 0)return dt(this,Ir).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return fa.batch(()=>dt(this,Ir).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=dt(this,Ir).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=dt(this,Ir);fa.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=dt(this,Ir);return fa.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=fa.batch(()=>dt(this,Ir).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(oi).catch(oi)}invalidateQueries(e,t={}){return fa.batch(()=>(dt(this,Ir).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=fa.batch(()=>dt(this,Ir).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(oi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(oi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=dt(this,Ir).build(this,t);return n.isStaleByTime(xx(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(oi).catch(oi)}fetchInfiniteQuery(e){return e.behavior=fP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(oi).catch(oi)}ensureInfiniteQueryData(e){return e.behavior=fP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return np.isOnline()?dt(this,Eo).resumePausedMutations():Promise.resolve()}getQueryCache(){return dt(this,Ir)}getMutationCache(){return dt(this,Eo)}getDefaultOptions(){return dt(this,Mo)}setDefaultOptions(e){kn(this,Mo,e)}setQueryDefaults(e,t){dt(this,vl).set(md(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...dt(this,vl).values()],n={};return t.forEach(r=>{yd(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){dt(this,xl).set(md(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...dt(this,xl).values()],n={};return t.forEach(r=>{yd(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...dt(this,Mo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=R1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===E1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...dt(this,Mo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){dt(this,Ir).clear(),dt(this,Eo).clear()}},Ir=new WeakMap,Eo=new WeakMap,Mo=new WeakMap,vl=new WeakMap,xl=new WeakMap,Lo=new WeakMap,wl=new WeakMap,Cl=new WeakMap,YR),k6=u.createContext(void 0),_6=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Un.jsx(k6.Provider,{value:e,children:t}));const T6=(e="light")=>e==="dark"?{"--primary-color":"#90caf9","--primary-rgb":"144, 202, 249","--primary-light":"#e3f2fd","--primary-lighter":"rgba(144, 202, 249, 0.12)","--primary-dark":"#42a5f5","--secondary-color":"#f48fb1","--secondary-light":"#fce4ec","--secondary-dark":"#ec407a","--background-color":"#121212","--background-secondary":"#1e1e1e","--paper-color":"#1e1e1e","--divider-color":"rgba(255, 255, 255, 0.12)","--border-color":"rgba(255, 255, 255, 0.23)","--hover-color":"rgba(255, 255, 255, 0.08)","--text-primary":"rgba(255, 255, 255, 0.87)","--text-secondary":"rgba(255, 255, 255, 0.6)","--text-disabled":"rgba(255, 255, 255, 0.38)","--table-header-bg":"#2c2c2c","--table-row-hover":"rgba(255, 255, 255, 0.08)","--table-border":"#424242","--shadow-light":"0 1px 3px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.5)","--shadow-medium":"0 3px 6px rgba(0, 0, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.6)","--shadow-dark":"0 10px 20px rgba(0, 0, 0, 0.7), 0 6px 6px rgba(0, 0, 0, 0.7)","--icon-color":"rgba(255, 255, 255, 0.54)"}:{"--primary-color":"#1976d2","--primary-rgb":"25, 118, 210","--primary-light":"#4791db","--primary-lighter":"rgba(25, 118, 210, 0.08)","--primary-dark":"#115293","--secondary-color":"#dc004e","--secondary-light":"#e33371","--secondary-dark":"#9a0036","--background-color":"#f5f5f5","--background-secondary":"#f0f0f0","--paper-color":"#ffffff","--divider-color":"rgba(0, 0, 0, 0.12)","--border-color":"rgba(0, 0, 0, 0.23)","--hover-color":"rgba(0, 0, 0, 0.04)","--text-primary":"rgba(0, 0, 0, 0.87)","--text-secondary":"rgba(0, 0, 0, 0.6)","--text-disabled":"rgba(0, 0, 0, 0.38)","--table-header-bg":"#f1f1f1","--table-row-hover":"rgba(0, 0, 0, 0.04)","--table-border":"#e0e0e0","--shadow-light":"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)","--shadow-medium":"0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)","--shadow-dark":"0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23)","--icon-color":"rgba(0, 0, 0, 0.54)"},I6=f1({key:"mui-style",prepend:!0,stylisPlugins:[]}),b5=u.createContext({mode:"light",toggleTheme:()=>{},setMode:()=>{}}),O6=()=>u.useContext(b5),Cx=({children:e})=>{const[t,n]=u.useState(()=>localStorage.getItem("themeMode")||"light"),r=()=>{n(l=>l==="light"?"dark":"light")},i=l=>{(l==="light"||l==="dark")&&n(l)};u.useEffect(()=>{localStorage.setItem("themeMode",t),document.documentElement.setAttribute("data-theme",t);const l=T6(t);Object.entries(l).forEach(([c,d])=>{document.documentElement.style.setProperty(c,d)})},[t]);const o=u.useMemo(()=>uF({palette:{mode:t,primary:{main:t==="light"?"#1976d2":"#90caf9",light:t==="light"?"#4791db":"#e3f2fd",dark:t==="light"?"#115293":"#42a5f5",contrastText:"#ffffff"},secondary:{main:t==="light"?"#dc004e":"#f48fb1",light:t==="light"?"#e33371":"#fce4ec",dark:t==="light"?"#9a0036":"#ec407a",contrastText:"#ffffff"},error:{main:"#f44336",light:"#f6685e",dark:"#aa2e25",contrastText:"#ffffff"},warning:{main:"#ff9800",light:"#ffb74d",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{main:t==="light"?"#2196f3":"#29b6f6",light:"#64b5f6",dark:"#1976d2",contrastText:"#ffffff"},success:{main:t==="light"?"#4caf50":"#66bb6a",light:"#81c784",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},background:{default:t==="light"?"#f5f5f5":"#121212",paper:t==="light"?"#ffffff":"#1e1e1e"},text:{primary:t==="light"?"rgba(0, 0, 0, 0.87)":"rgba(255, 255, 255, 0.87)",secondary:t==="light"?"rgba(0, 0, 0, 0.6)":"rgba(255, 255, 255, 0.6)",disabled:t==="light"?"rgba(0, 0, 0, 0.38)":"rgba(255, 255, 255, 0.38)"},divider:t==="light"?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"},typography:{fontFamily:["Pretendard","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h1:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2},h2:{fontWeight:700,fontSize:"2rem",lineHeight:1.3},h3:{fontWeight:600,fontSize:"1.75rem",lineHeight:1.4},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.4},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1rem",lineHeight:1.4},subtitle1:{fontWeight:500,fontSize:"1rem",lineHeight:1.5},subtitle2:{fontWeight:500,fontSize:"0.875rem",lineHeight:1.5},body1:{fontSize:"1rem",lineHeight:1.5},body2:{fontSize:"0.875rem",lineHeight:1.5},button:{fontWeight:500,fontSize:"0.875rem",textTransform:"none"},caption:{fontSize:"0.75rem",lineHeight:1.5},overline:{fontSize:"0.75rem",fontWeight:500,textTransform:"uppercase",letterSpacing:"0.08em",lineHeight:1.5}},shape:{borderRadius:8},shadows:["none",t==="light"?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.5)",t==="light"?"0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)":"0 3px 6px rgba(0, 0, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.6)",t==="light"?"0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23)":"0 10px 20px rgba(0, 0, 0, 0.7), 0 6px 6px rgba(0, 0, 0, 0.7)",t==="light"?"0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)":"0 14px 28px rgba(0, 0, 0, 0.7), 0 10px 10px rgba(0, 0, 0, 0.7)",t==="light"?"0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22)":"0 19px 38px rgba(0, 0, 0, 0.8), 0 15px 12px rgba(0, 0, 0, 0.7)",t==="light"?"0 2px 2px rgba(0, 0, 0, 0.1), 0 4px 4px rgba(0, 0, 0, 0.1)":"0 2px 2px rgba(0, 0, 0, 0.5), 0 4px 4px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 2px rgba(0, 0, 0, 0.1), 0 4px 4px rgba(0, 0, 0, 0.1), 0 8px 8px rgba(0, 0, 0, 0.1)":"0 2px 2px rgba(0, 0, 0, 0.5), 0 4px 4px rgba(0, 0, 0, 0.5), 0 8px 8px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 2px rgba(0, 0, 0, 0.1), 0 4px 4px rgba(0, 0, 0, 0.1), 0 8px 8px rgba(0, 0, 0, 0.1), 0 16px 16px rgba(0, 0, 0, 0.1)":"0 2px 2px rgba(0, 0, 0, 0.5), 0 4px 4px rgba(0, 0, 0, 0.5), 0 8px 8px rgba(0, 0, 0, 0.5), 0 16px 16px rgba(0, 0, 0, 0.5)",t==="light"?"0 1px 1px rgba(0, 0, 0, 0.08), 0 2px 2px rgba(0, 0, 0, 0.08), 0 4px 4px rgba(0, 0, 0, 0.08)":"0 1px 1px rgba(0, 0, 0, 0.4), 0 2px 2px rgba(0, 0, 0, 0.4), 0 4px 4px rgba(0, 0, 0, 0.4)",t==="light"?"0 1px 1px rgba(0, 0, 0, 0.08), 0 2px 2px rgba(0, 0, 0, 0.08), 0 4px 4px rgba(0, 0, 0, 0.08), 0 8px 8px rgba(0, 0, 0, 0.08)":"0 1px 1px rgba(0, 0, 0, 0.4), 0 2px 2px rgba(0, 0, 0, 0.4), 0 4px 4px rgba(0, 0, 0, 0.4), 0 8px 8px rgba(0, 0, 0, 0.4)",t==="light"?"0 1px 1px rgba(0, 0, 0, 0.08), 0 2px 2px rgba(0, 0, 0, 0.08), 0 4px 4px rgba(0, 0, 0, 0.08), 0 8px 8px rgba(0, 0, 0, 0.08), 0 16px 16px rgba(0, 0, 0, 0.08)":"0 1px 1px rgba(0, 0, 0, 0.4), 0 2px 2px rgba(0, 0, 0, 0.4), 0 4px 4px rgba(0, 0, 0, 0.4), 0 8px 8px rgba(0, 0, 0, 0.4), 0 16px 16px rgba(0, 0, 0, 0.4)",t==="light"?"0 1px 1px rgba(0, 0, 0, 0.08), 0 2px 2px rgba(0, 0, 0, 0.08), 0 4px 4px rgba(0, 0, 0, 0.08), 0 8px 8px rgba(0, 0, 0, 0.08), 0 16px 16px rgba(0, 0, 0, 0.08), 0 32px 32px rgba(0, 0, 0, 0.08)":"0 1px 1px rgba(0, 0, 0, 0.4), 0 2px 2px rgba(0, 0, 0, 0.4), 0 4px 4px rgba(0, 0, 0, 0.4), 0 8px 8px rgba(0, 0, 0, 0.4), 0 16px 16px rgba(0, 0, 0, 0.4), 0 32px 32px rgba(0, 0, 0, 0.4)",t==="light"?"0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1), 0 16px 32px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5), 0 16px 32px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1), 0 16px 32px rgba(0, 0, 0, 0.1), 0 32px 64px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5), 0 16px 32px rgba(0, 0, 0, 0.5), 0 32px 64px rgba(0, 0, 0, 0.5)",t==="light"?"0 1px 2px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1), 0 16px 32px rgba(0, 0, 0, 0.1), 0 32px 64px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5), 0 16px 32px rgba(0, 0, 0, 0.5), 0 32px 64px rgba(0, 0, 0, 0.5)",t==="light"?"0 1px 2px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1), 0 16px 32px rgba(0, 0, 0, 0.1), 0 32px 64px rgba(0, 0, 0, 0.1), 0 64px 128px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5), 0 16px 32px rgba(0, 0, 0, 0.5), 0 32px 64px rgba(0, 0, 0, 0.5), 0 64px 128px rgba(0, 0, 0, 0.5)",t==="light"?"0 1px 2px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.1), 0 8px 16px rgba(0, 0, 0, 0.1), 0 16px 32px rgba(0, 0, 0, 0.1), 0 32px 64px rgba(0, 0, 0, 0.1), 0 64px 128px rgba(0, 0, 0, 0.1), 0 128px 256px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.5), 0 16px 32px rgba(0, 0, 0, 0.5), 0 32px 64px rgba(0, 0, 0, 0.5), 0 64px 128px rgba(0, 0, 0, 0.5), 0 128px 256px rgba(0, 0, 0, 0.5)",t==="light"?"0 2px 10px rgba(0, 0, 0, 0.15), 0 0 1px rgba(0, 0, 0, 0.3)":"0 2px 10px rgba(0, 0, 0, 0.5), 0 0 1px rgba(0, 0, 0, 0.7)",t==="light"?"0 3px 14px rgba(0, 0, 0, 0.2), 0 0 1px rgba(0, 0, 0, 0.3)":"0 3px 14px rgba(0, 0, 0, 0.6), 0 0 1px rgba(0, 0, 0, 0.7)",t==="light"?"0 5px 20px rgba(0, 0, 0, 0.25), 0 0 1px rgba(0, 0, 0, 0.3)":"0 5px 20px rgba(0, 0, 0, 0.7), 0 0 1px rgba(0, 0, 0, 0.7)",t==="light"?"0 8px 30px rgba(0, 0, 0, 0.3), 0 0 1px rgba(0, 0, 0, 0.3)":"0 8px 30px rgba(0, 0, 0, 0.8), 0 0 1px rgba(0, 0, 0, 0.7)",t==="light"?"0 12px 40px rgba(0, 0, 0, 0.35), 0 0 1px rgba(0, 0, 0, 0.3)":"0 12px 40px rgba(0, 0, 0, 0.9), 0 0 1px rgba(0, 0, 0, 0.7)",t==="light"?"0 24px 38px rgba(0, 0, 0, 0.25), 0 9px 46px rgba(0, 0, 0, 0.22)":"0 24px 38px rgba(0, 0, 0, 0.7), 0 9px 46px rgba(0, 0, 0, 0.6)"],components:{MuiCssBaseline:{styleOverrides:{body:{backgroundColor:t==="light"?"#f5f5f5":"#121212",color:t==="light"?"rgba(0, 0, 0, 0.87)":"rgba(255, 255, 255, 0.87)",transition:"background-color 0.3s ease, color 0.3s ease"}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:"8px",fontWeight:500},contained:{boxShadow:"none","&:hover":{boxShadow:t==="light"?"0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)":"0 3px 6px rgba(0, 0, 0, 0.6), 0 2px 4px rgba(0, 0, 0, 0.6)"}}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none","@media (max-width: 700px)":{padding:"6px !important"}},rounded:{borderRadius:"12px"}}},MuiCard:{styleOverrides:{root:{borderRadius:"12px",boxShadow:t==="light"?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 1px 3px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.5)"}}},MuiTableCell:{styleOverrides:{root:{borderBottom:`1px solid ${t==="light"?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}`},head:{fontWeight:600,backgroundColor:t==="light"?"#f1f1f1":"#2c2c2c"}}},MuiTableRow:{styleOverrides:{root:{"&:hover":{backgroundColor:t==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"}}}},MuiChip:{styleOverrides:{root:{borderRadius:"16px"}}},MuiDialog:{styleOverrides:{paper:{borderRadius:"12px"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}}},MuiSelect:{styleOverrides:{outlined:{borderRadius:"8px"}}},MuiTab:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiContainer:{styleOverrides:{root:{"@media (max-width: 700px)":{paddingLeft:"10px !important",paddingRight:"10px !important"},"@media (min-width: 701px)":{paddingLeft:"20px !important",paddingRight:"20px !important"}}}}}}),[t]),s={mode:t,toggleTheme:r,setMode:i};return a(b5.Provider,{value:s,children:a(dF,{value:I6,children:m(hF,{theme:o,children:[a(XR,{}),e]})})})};Cx.propTypes={children:re.node.isRequired};const $i=Object.create(null);$i.open="0";$i.close="1";$i.ping="2";$i.pong="3";$i.message="4";$i.upgrade="5";$i.noop="6";const Pf=Object.create(null);Object.keys($i).forEach(e=>{Pf[$i[e]]=e});const Sx={type:"error",data:"parser error"},v5=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",x5=typeof ArrayBuffer=="function",w5=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,M1=({type:e,data:t},n,r)=>v5&&t instanceof Blob?n?r(t):gP(t,r):x5&&(t instanceof ArrayBuffer||w5(t))?n?r(t):gP(new Blob([t]),r):r($i[e]+(t||"")),gP=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function mP(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mm;function A6(e,t){if(v5&&e.data instanceof Blob)return e.data.arrayBuffer().then(mP).then(t);if(x5&&(e.data instanceof ArrayBuffer||w5(e.data)))return t(mP(e.data));M1(e,!1,n=>{Mm||(Mm=new TextEncoder),t(Mm.encode(n))})}const yP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<yP.length;e++)qu[yP.charCodeAt(e)]=e;const D6=e=>{let t=e.length*.75,n=e.length,r,i=0,o,s,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),h=new Uint8Array(d);for(r=0;r<n;r+=4)o=qu[e.charCodeAt(r)],s=qu[e.charCodeAt(r+1)],l=qu[e.charCodeAt(r+2)],c=qu[e.charCodeAt(r+3)],h[i++]=o<<2|s>>4,h[i++]=(s&15)<<4|l>>2,h[i++]=(l&3)<<6|c&63;return d},R6=typeof ArrayBuffer=="function",L1=(e,t)=>{if(typeof e!="string")return{type:"message",data:C5(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:E6(e.substring(1),t)}:Pf[n]?e.length>1?{type:Pf[n],data:e.substring(1)}:{type:Pf[n]}:Sx},E6=(e,t)=>{if(R6){const n=D6(e);return C5(n,t)}else return{base64:!0,data:e}},C5=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},S5="",M6=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,s)=>{M1(o,!1,l=>{r[s]=l,++i===n&&t(r.join(S5))})})},L6=(e,t)=>{const n=e.split(S5),r=[];for(let i=0;i<n.length;i++){const o=L1(n[i],t);if(r.push(o),o.type==="error")break}return r};function $6(){return new TransformStream({transform(e,t){A6(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Lm;function Bh(e){return e.reduce((t,n)=>t+n.length,0)}function Hh(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function j6(e,t){Lm||(Lm=new TextDecoder);const n=[];let r=0,i=-1,o=!1;return new TransformStream({transform(s,l){for(n.push(s);;){if(r===0){if(Bh(n)<1)break;const c=Hh(n,1);o=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Bh(n)<2)break;const c=Hh(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Bh(n)<8)break;const c=Hh(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),h=d.getUint32(0);if(h>Math.pow(2,21)-1){l.enqueue(Sx);break}i=h*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Bh(n)<i)break;const c=Hh(n,i);l.enqueue(L1(o?c:Lm.decode(c),t)),r=0}if(i===0||i>e){l.enqueue(Sx);break}}}})}const P5=4;function Fr(e){if(e)return F6(e)}function F6(e){for(var t in Fr.prototype)e[t]=Fr.prototype[t];return e}Fr.prototype.on=Fr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Fr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Fr.prototype.off=Fr.prototype.removeListener=Fr.prototype.removeAllListeners=Fr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Fr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};Fr.prototype.emitReserved=Fr.prototype.emit;Fr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Fr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const mg=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Va=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),z6="arraybuffer";function k5(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const N6=Va.setTimeout,B6=Va.clearTimeout;function yg(e,t){t.useNativeTimers?(e.setTimeoutFn=N6.bind(Va),e.clearTimeoutFn=B6.bind(Va)):(e.setTimeoutFn=Va.setTimeout.bind(Va),e.clearTimeoutFn=Va.clearTimeout.bind(Va))}const H6=1.33;function W6(e){return typeof e=="string"?q6(e):Math.ceil((e.byteLength||e.size)*H6)}function q6(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function _5(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function U6(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function V6(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class G6 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class $1 extends Fr{constructor(t){super(),this.writable=!1,yg(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new G6(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=L1(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=U6(t);return n.length?"?"+n:""}}class K6 extends $1{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};L6(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,M6(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=_5()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let T5=!1;try{T5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Y6=T5;function X6(){}class J6 extends K6{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Ei extends Fr{constructor(t,n,r){super(),this.createRequest=t,yg(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=k5(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Ei.requestsCount++,Ei.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=X6,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ei.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ei.requestsCount=0;Ei.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bP);else if(typeof addEventListener=="function"){const e="onpagehide"in Va?"pagehide":"unload";addEventListener(e,bP,!1)}}function bP(){for(let e in Ei.requests)Ei.requests.hasOwnProperty(e)&&Ei.requests[e].abort()}const Q6=function(){const e=I5({xdomain:!1});return e&&e.responseType!==null}();class Z6 extends J6{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Q6&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ei(I5,this.uri(),t)}}function I5(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Y6))return new XMLHttpRequest}catch{}if(!t)try{return new Va[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const O5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class eH extends $1{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=O5?{}:k5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;M1(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&mg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=_5()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const $m=Va.WebSocket||Va.MozWebSocket;class tH extends eH{createSocket(t,n,r){return O5?new $m(t,n,r):n?new $m(t,n):new $m(t)}doWrite(t,n){this.ws.send(n)}}class nH extends $1{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=j6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=$6();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const o=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&mg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const rH={websocket:tH,webtransport:nH,polling:Z6},aH=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,iH=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Px(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=aH.exec(e||""),o={},s=14;for(;s--;)o[iH[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=oH(o,o.path),o.queryKey=sH(o,o.query),o}function oH(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function sH(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}const kx=typeof addEventListener=="function"&&typeof removeEventListener=="function",kf=[];kx&&addEventListener("offline",()=>{kf.forEach(e=>e())},!1);class jo extends Fr{constructor(t,n){if(super(),this.binaryType=z6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Px(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Px(n.host).host);yg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=V6(this.opts.query)),kx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},kf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=P5,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&jo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",jo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=W6(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,mg(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(jo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),kx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=kf.indexOf(this._offlineEventListener);r!==-1&&kf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}jo.protocol=P5;class lH extends jo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;jo.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;jo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=n.name,this.emitReserved("upgradeError",g)}}))};function o(){r||(r=!0,h(),n.close(),n=null)}const s=f=>{const g=new Error("probe error: "+f);g.transport=n.name,o(),this.emitReserved("upgradeError",g)};function l(){s("transport closed")}function c(){s("socket closed")}function d(f){n&&f.name!==n.name&&o()}const h=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",i),n.once("error",s),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let cH=class extends lH{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>rH[i]).filter(i=>!!i)),super(t,r)}};function uH(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Px(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const dH=typeof ArrayBuffer=="function",hH=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,A5=Object.prototype.toString,fH=typeof Blob=="function"||typeof Blob<"u"&&A5.call(Blob)==="[object BlobConstructor]",pH=typeof File=="function"||typeof File<"u"&&A5.call(File)==="[object FileConstructor]";function j1(e){return dH&&(e instanceof ArrayBuffer||hH(e))||fH&&e instanceof Blob||pH&&e instanceof File}function _f(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(_f(e[n]))return!0;return!1}if(j1(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return _f(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&_f(e[n]))return!0;return!1}function gH(e){const t=[],n=e.data,r=e;return r.data=_x(n,t),r.attachments=t.length,{packet:r,buffers:t}}function _x(e,t){if(!e)return e;if(j1(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=_x(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=_x(e[r],t));return n}return e}function mH(e,t){return e.data=Tx(e.data,t),delete e.attachments,e}function Tx(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Tx(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Tx(e[n],t));return e}const yH=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bH=5;var Bn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Bn||(Bn={}));class vH{constructor(t){this.replacer=t}encode(t){return(t.type===Bn.EVENT||t.type===Bn.ACK)&&_f(t)?this.encodeAsBinary({type:t.type===Bn.EVENT?Bn.BINARY_EVENT:Bn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Bn.BINARY_EVENT||t.type===Bn.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=gH(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function vP(e){return Object.prototype.toString.call(e)==="[object Object]"}class F1 extends Fr{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Bn.BINARY_EVENT;r||n.type===Bn.BINARY_ACK?(n.type=r?Bn.EVENT:Bn.ACK,this.reconstructor=new xH(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(j1(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Bn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Bn.BINARY_EVENT||r.type===Bn.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const s=t.substring(o,n);if(s!=Number(s)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const s=t.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(F1.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Bn.CONNECT:return vP(n);case Bn.DISCONNECT:return n===void 0;case Bn.CONNECT_ERROR:return typeof n=="string"||vP(n);case Bn.EVENT:case Bn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&yH.indexOf(n[0])===-1);case Bn.ACK:case Bn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class xH{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=mH(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wH=Object.freeze(Object.defineProperty({__proto__:null,Decoder:F1,Encoder:vH,get PacketType(){return Bn},protocol:bH},Symbol.toStringTag,{value:"Module"}));function ci(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const CH=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class D5 extends Fr{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ci(t,"open",this.onopen.bind(this)),ci(t,"packet",this.onpacket.bind(this)),ci(t,"error",this.onerror.bind(this)),ci(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,o;if(CH.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:Bn.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const h=this.ids++,f=n.pop();this._registerAckCallback(h,f),s.id=h}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),s=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};s.withError=!0,this.acks[t]=s}emitWithAck(t,...n){return new Promise((r,i)=>{const o=(s,l)=>s?i(s):r(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Bn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Bn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Bn.EVENT:case Bn.BINARY_EVENT:this.onevent(t);break;case Bn.ACK:case Bn.BINARY_ACK:this.onack(t);break;case Bn.DISCONNECT:this.ondisconnect();break;case Bn.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Bn.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Bn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Jl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Jl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};Jl.prototype.reset=function(){this.attempts=0};Jl.prototype.setMin=function(e){this.ms=e};Jl.prototype.setMax=function(e){this.max=e};Jl.prototype.setJitter=function(e){this.jitter=e};class Ix extends Fr{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,yg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Jl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||wH;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new cH(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ci(n,"open",function(){r.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},s=ci(n,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ci(t,"ping",this.onping.bind(this)),ci(t,"data",this.ondata.bind(this)),ci(t,"error",this.onerror.bind(this)),ci(t,"close",this.onclose.bind(this)),ci(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){mg(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new D5(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const mc={};function Tf(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=uH(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=mc[i]&&o in mc[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||s;let c;return l?c=new Ix(r,t):(mc[i]||(mc[i]=new Ix(r,t)),c=mc[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Tf,{Manager:Ix,Socket:D5,io:Tf,connect:Tf});class SH{constructor(){this.socket=null,this.isConnected=!1,this.listeners=new Map,this.connectionPromise=null,this.isConnecting=!1,this.connectionCount=0,this.pendingListeners=new Map}connect(){var r;if((r=this.socket)!=null&&r.connected)return Promise.resolve(this.socket);const t=localStorage.getItem("token");if(!t)return null;if(this.isConnecting&&this.connectionPromise)return this.connectionPromise;this.socket&&!this.isConnected&&(this.socket.disconnect(),this.socket=null),this.isConnecting=!0,this.connectionCount++;const n=fi.SOCKET_URL;return this.connectionPromise=new Promise((i,o)=>{try{this.socket=Tf(n,{transports:["websocket","polling"],timeout:1e4,forceNew:!1,autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:2e3,reconnectionDelayMax:1e4,maxReconnectionAttempts:5,auth:{token:t}});const s=setTimeout(()=>{console.warn("⏱️ Socket 연결 타임아웃"),this.isConnecting=!1,o(new Error("Socket 연결 타임아웃"))},15e3);this.socket.on("connect",()=>{clearTimeout(s),this.isConnected=!0,this.isConnecting=!1;const l=localStorage.getItem("token");l&&this.socket.emit("authenticate",{token:l,type:"admin"}),this.registerPendingListeners(),this.emitToListeners("connect"),i(this.socket)}),this.socket.on("authenticated",l=>{if(l.success)this.emitToListeners("authenticated",l);else if(console.error("❌ Socket 인증 실패:",l.error),this.emitToListeners("authentication_error",l.error),l.error&&l.error.includes("jwt expired")){this.socket&&this.socket.disconnect(),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.replace("/login");return}}),this.socket.on("disconnect",l=>{this.isConnected=!1,this.isConnecting=!1,this.emitToListeners("disconnect",l)}),this.socket.on("connect_error",l=>{clearTimeout(s),console.error("❌ Socket.IO 연결 오류:",l.message),console.error("❌ 오류 상세:",l),this.isConnected=!1,this.isConnecting=!1,this.connectionPromise=null,l.message&&l.message.includes("Authentication error")&&(this.socket.disconnect(),this.socket.io.opts.reconnection=!1,l.message.includes("Token expired")&&(window.store&&window.store.dispatch({type:"auth/logout"}),window.location.href="/login")),this.emitToListeners("connect_error",l),o(l)}),this.socket.on("reconnect",l=>{this.isConnected=!0,this.emitToListeners("reconnect",l)}),this.socket.on("reconnect_error",l=>{console.error("❌ Socket.IO 재연결 오류:",l.message),this.emitToListeners("reconnect_error",l)}),this.socket.on("reconnect_failed",()=>{console.error("❌ Socket.IO 재연결 완전 실패"),this.isConnected=!1,this.isConnecting=!1,this.emitToListeners("reconnect_failed")})}catch(s){console.error("Socket 생성 중 오류:",s.message),this.isConnecting=!1,o(s)}}),this.connectionPromise}joinRoom(t){this.socket&&this.isConnected&&this.socket.emit(`join-${t}`)}leaveRoom(t){this.socket&&this.isConnected&&this.socket.emit(`leave-${t}`)}emit(t,n){this.socket&&this.isConnected&&this.socket.emit(t,n)}on(t,n){this.socket?(this.socket.on(t,n),this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n)):(this.pendingListeners.has(t)||this.pendingListeners.set(t,[]),this.pendingListeners.get(t).push(n))}registerPendingListeners(){this.socket&&(this.pendingListeners.forEach((t,n)=>{t.forEach(r=>{this.socket.on(n,r),this.listeners.has(n)||this.listeners.set(n,[]),this.listeners.get(n).push(r)})}),this.pendingListeners.clear())}off(t,n){if(this.socket&&this.socket.off(t,n),this.listeners.has(t)){const r=this.listeners.get(t),i=r.indexOf(n);i>-1&&r.splice(i,1)}if(this.pendingListeners.has(t)){const r=this.pendingListeners.get(t),i=r.indexOf(n);i>-1&&r.splice(i,1)}}removeAllListeners(t){this.socket&&(this.socket.removeAllListeners(t),this.listeners.delete(t))}disconnect(){this.socket&&(this.listeners.forEach((t,n)=>{this.socket.removeAllListeners(n)}),this.listeners.clear(),this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.isConnecting=!1,this.connectionPromise=null)}getConnectionStatus(){var t;return{isConnected:this.isConnected,isConnecting:this.isConnecting,socketId:((t=this.socket)==null?void 0:t.id)||null}}emitToListeners(t,n){this.listeners.has(t)&&this.listeners.get(t).forEach(i=>{try{i(n)}catch{}})}}const Tn=new SH;class PH{constructor(){this.agentLevels=[],this.types={},this.typeHierarchy={},this.listeners=new Map,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{await this.waitForSocketConnection(),Tn.joinRoom("table-updates"),this.setupSocketListeners(),this.requestInitialData(),this.isInitialized=!0}catch(t){throw console.error("=== AgentLevelService 초기화 실패 ===",t),t}}async waitForSocketConnection(){try{return await Tn.connect()}catch(t){throw console.error("Socket 연결 실패:",t),new Error(`Socket 연결 실패: ${t.message}`)}}setupSocketListeners(){Tn.on("agent-levels-updated",t=>{switch(t.action||t.type){case"added":this.handleAgentLevelAdded(t.data);break;case"updated":this.handleAgentLevelUpdated(t.data);break;case"deleted":this.handleAgentLevelDeleted(t.id);break;case"hierarchy-changed":this.requestInitialData(),setTimeout(()=>{this.notifyListeners("hierarchy-changed",t)},100);break;default:this.requestInitialData()}}),Tn.on("agent-levels-data",t=>{t.success&&Array.isArray(t.data)?(this.agentLevels=t.data,this.updateTypesAndHierarchy(),this.notifyListeners("loaded",this.agentLevels)):console.error("❌ Socket을 통한 데이터 로드 실패:",t)})}handleAgentLevelAdded(t){this.agentLevels.push(t),this.updateTypesAndHierarchy(),this.notifyListeners("added",t)}handleAgentLevelUpdated(t){const n=this.agentLevels.findIndex(r=>r.id===t.id);n!==-1&&(this.agentLevels[n]=t,this.updateTypesAndHierarchy(),this.notifyListeners("updated",t))}handleAgentLevelDeleted(t){this.agentLevels=this.agentLevels.filter(n=>n.id!==t),this.updateTypesAndHierarchy(),this.notifyListeners("deleted",{id:t})}notifyListeners(t,n){setTimeout(()=>{let r=0;this.listeners.forEach(i=>{try{i({type:t,data:n,types:this.types,typeHierarchy:this.typeHierarchy}),r++}catch(o){console.error(`❌ 리스너 #${r} 호출 중 오류:`,o)}})},0)}requestInitialData(){Tn.emit("request-agent-levels")}updateTypesAndHierarchy(){if(!this.agentLevels||this.agentLevels.length===0){this.types={},this.typeHierarchy={};return}this.types={},this.typeHierarchy={};const t=[...this.agentLevels].sort((n,r)=>(n.level||999)-(r.level||999));t.forEach(n=>{const r=this.generateTypeId(n);this.types[r]={id:n.id,label:n.name||n.levelType,color:this.getColorFromBackground(n.background_color||n.backgroundColor),backgroundColor:n.background_color||n.backgroundColor,borderColor:n.border_color||n.borderColor,permissions:n.permission||n.permissions,hierarchyOrder:n.hierarchyOrder,order:n.level||n.hierarchyOrder}}),t.forEach((n,r)=>{const i=this.generateTypeId(n),o=t[r+1];if(o){const s=this.generateTypeId(o);this.typeHierarchy[i]=[s]}else this.typeHierarchy[i]=[]})}generateTypeId(t){return`agent_level_${t.id}`}getColorFromBackground(t){if(!t)return"default";const n={"#f44336":"error","#e91e63":"secondary","#9c27b0":"secondary","#673ab7":"secondary","#3f51b5":"primary","#2196f3":"info","#03a9f4":"info","#00bcd4":"info","#009688":"success","#4caf50":"success","#8bc34a":"success","#cddc39":"warning","#ffeb3b":"warning","#ffc107":"warning","#ff9800":"warning","#ff5722":"error"};return n[t]?n[t]:t.includes("red")||t.includes("#f4")||t.includes("#e9")?"error":t.includes("blue")||t.includes("#21")||t.includes("#3f")?"primary":t.includes("green")||t.includes("#4c")||t.includes("#00")?"success":t.includes("orange")||t.includes("#ff")?"warning":"default"}getTypes(){return{...this.types}}getTypeHierarchy(){return{...this.typeHierarchy}}getAgentLevels(){return[...this.agentLevels]}addListener(t){const n=Date.now()+Math.random();return this.listeners.set(n,t),n}removeListener(t){return this.listeners.delete(t)}removeAllListeners(){this.listeners.clear()}cleanup(){this.removeAllListeners(),Tn.off("agent-levels-updated"),Tn.off("agent-levels-data"),this.isInitialized=!1}}const ha=new PH;class kH{constructor(){this.lastSequence=0,this.missedSequences=new Set,this.sequenceGapThreshold=5,this.checkInterval=5e3,this.maxMissedSequences=1e3,this.checkTimer=null,this.socketService=null,this.onMissingEventsCallback=null}setSocketService(t){this.socketService=t,this.startMissingCheck()}setOnMissingEvents(t){this.onMissingEventsCallback=t}updateSequence(t){if(t<=this.lastSequence)return console.warn("⚠️ 중복 또는 이전 시퀀스 감지:",t),!1;const n=t-this.lastSequence;if(n>1){if(console.warn(`⚠️ 시퀀스 갭 감지: ${this.lastSequence} -> ${t} (${n-1}개 누락 가능성)`),n>this.maxMissedSequences)console.warn(`⚠️ 시퀀스 갭이 너무 큼(${n}). 시퀀스 리셋.`),this.missedSequences.clear();else for(let r=this.lastSequence+1;r<t;r++){if(this.missedSequences.size>=this.maxMissedSequences){const i=this.missedSequences.values().next().value;this.missedSequences.delete(i)}this.missedSequences.add(r)}n>this.sequenceGapThreshold&&this.requestMissingEvents()}return this.lastSequence=t,this.socketService&&this.socketService.emit("update-sequence",{sequence:t}),!0}requestMissingEvents(){if(!this.socketService){console.error("❌ Socket service not available");return}`${this.lastSequence}`,this.socketService.emit("request-missing-events",{lastSequence:this.lastSequence}),this.missingEventsListenerRegistered||(this.socketService.on("missing-events",t=>{`${t.count}`,this.onMissingEventsCallback&&t.events.forEach(n=>{n.sequence>this.lastSequence&&(this.onMissingEventsCallback(n),this.lastSequence=n.sequence)}),t.events.forEach(n=>{this.missedSequences.delete(n.sequence)})}),this.missingEventsListenerRegistered=!0)}startMissingCheck(){this.checkTimer&&clearInterval(this.checkTimer),this.checkTimer=setInterval(()=>{this.missedSequences.size>0&&(`${this.missedSequences.size}`,this.requestMissingEvents())},this.checkInterval)}cleanup(){this.checkTimer&&(clearInterval(this.checkTimer),this.checkTimer=null),this.socketService&&this.missingEventsListenerRegistered&&(this.socketService.off("missing-events"),this.missingEventsListenerRegistered=!1)}getStatus(){return{lastSequence:this.lastSequence,missedCount:this.missedSequences.size,missedSequences:Array.from(this.missedSequences).sort((t,n)=>t-n)}}resetOnReconnect(){this.lastSequence=0,this.missedSequences.clear(),this.requestMissingEvents()}}const Wh=new kH,R5=u.createContext(null),ni=()=>{const e=u.useContext(R5);if(!e)throw new Error("useSocket must be used within a SocketProvider");return e},_H=({children:e})=>{const[t,n]=u.useState(!1),[r,i]=u.useState(!1),[o,s]=u.useState(null),[l,c]=u.useState(!1),[d,h]=u.useState([]),[f,g]=u.useState({}),[w,x]=u.useState({});u.useEffect(()=>{let p=!0,v=null;const b=async()=>{if(!l)try{i(!0),s(null);const _=await Tn.connect();if(!p)return;if(!_){i(!1);return}if(Wh.setSocketService(Tn),!ha.isInitialized){const T=ha.addListener(D=>{if(p){const B=ha.getAgentLevels(),$=ha.getTypes(),N=ha.getTypeHierarchy();h([...B]),g({...$}),x({...N}),D.type==="loaded"&&B.length>0&&c(!0)}});await ha.initialize();const I=ha.getAgentLevels(),L=ha.getTypes(),A=ha.getTypeHierarchy();p&&(h([...I]),g({...L}),x({...A}),I.length>0&&c(!0)),v=()=>{ha.removeListener(T)}}if(!p)return;n(!0)}catch(_){console.error("❌ Socket 초기화 실패:",_),p&&s(_.message)}finally{p&&i(!1)}},P=()=>{p&&(n(!0),s(null))},k=_=>{p&&n(!1)},C=_=>{p&&(console.error("❌ Socket 연결 오류:",_),s(_.message),n(!1))},S=()=>{p&&(n(!0),s(null),Wh.resetOnReconnect())};return Tn.on("connect",P),Tn.on("disconnect",k),Tn.on("connect_error",C),Tn.on("reconnect",S),Tn.on("member:balance:updated",_=>{p&&window.dispatchEvent(new CustomEvent("memberBalanceUpdated",{detail:_}))}),Tn.on("balance:changed",_=>{p&&window.dispatchEvent(new CustomEvent("balanceChanged",{detail:_}))}),Tn.on("balance:update",_=>{p&&window.dispatchEvent(new CustomEvent("realtimeBalanceUpdate",{detail:_}))}),b(),()=>{p=!1,Tn.off("connect",P),Tn.off("disconnect",k),Tn.off("connect_error",C),Tn.off("reconnect",S),Tn.off("member:balance:updated"),Tn.off("balance:changed"),Tn.off("balance:update"),v&&v(),Wh.cleanup()}},[l]);const y={isConnected:t,isConnecting:r,connectionError:o,isInitialized:l,socketService:Tn,agentLevelService:ha,agentLevels:d,types:f,typeHierarchy:w,sequenceService:Wh};return a(R5.Provider,{value:y,children:e})},E5=u.createContext(),TH=({children:e})=>{const[t,n]=u.useState({open:!1,message:"",severity:"info"}),r=u.useCallback((l,c="info")=>{n({open:!0,message:l,severity:c})},[]),i=u.useCallback(()=>{n(l=>({...l,open:!1}))},[]),o=u.useCallback((l="페이지")=>{r(`${l} 새로고침 중...`,"info"),setTimeout(()=>{r(`${l} 새로고침 완료`,"success")},1e3)},[r]),s={notification:t,showNotification:r,closeNotification:i,handleRefresh:o};return m(E5.Provider,{value:s,children:[e,a(ua,{open:t.open,autoHideDuration:3e3,onClose:i,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{zIndex:9999},children:a(Jt,{onClose:i,severity:t.severity,sx:{width:"100%"},children:t.message})})]})},$a=()=>{const e=u.useContext(E5);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e};function IH(){const e=console.log;return console.log=e,()=>{console.log=e}}const OH=()=>{const e=Kr(),t=zn(n=>n.auth.user);return u.useEffect(()=>{(async()=>{var r,i;if(t&&t.id&&!t.permissions)try{const o=await Pe.get(`/permissions/member/${t.id}`);if(o.data,(r=o.data)!=null&&r.success&&((i=o.data)!=null&&i.data)){const s=o.data.data.effectivePermissions;e(Ds({...t,permissions:s}))}}catch(o){console.error("PermissionLoader: 권한 로드 실패:",o),e(Ds({...t,permissions:{menus:[],buttons:[],features:[],restrictions:{menus:[],buttons:[],layouts:[],cssSelectors:[]}}}))}})()},[t==null?void 0:t.id,e]),null},zi=()=>{const e=zn(l=>l.auth.user),t=u.useMemo(()=>e?e.permissions||{menus:[],buttons:[],features:[],restrictions:{menus:[],buttons:[],layouts:[],cssSelectors:[]}}:null,[e]);return{canAccessMenu:l=>{var c,d,h,f;return t?(e==null?void 0:e.role)==="master"||(e==null?void 0:e.agent_level_id)===999||(e==null?void 0:e.agent_level_id)===1?!0:(d=(c=t.restrictions)==null?void 0:c.menus)!=null&&d.includes(l)?!1:(h=t.menus)!=null&&h.includes("*")?!0:(f=t.menus)==null?void 0:f.includes(l):!1},canUseButton:l=>{var d,h,f,g;return t?(e==null?void 0:e.role)==="master"||(e==null?void 0:e.agent_level_id)===999||(e==null?void 0:e.agent_level_id)===1?!0:((h=(d=t.restrictions)==null?void 0:d.buttons)==null?void 0:h.includes(l))?!1:(f=t.buttons)!=null&&f.includes("*")?!0:(g=t.buttons)==null?void 0:g.includes(l):!1},canViewLayout:l=>{var d,h;return t?(e==null?void 0:e.role)==="master"||(e==null?void 0:e.agent_level_id)===999||(e==null?void 0:e.agent_level_id)===1?!0:!((h=(d=t.restrictions)==null?void 0:d.layouts)==null?void 0:h.includes(l)):!1},canShowElement:l=>{var c,d;return t?(e==null?void 0:e.role)==="master"||(e==null?void 0:e.agent_level_id)===999||(e==null?void 0:e.agent_level_id)===1?!0:!((d=(c=t.restrictions)==null?void 0:c.cssSelectors)!=null&&d.includes(l)):!1},hasPermission:l=>{var c;return t?(e==null?void 0:e.role)==="master"||(e==null?void 0:e.agent_level_id)===999||(e==null?void 0:e.agent_level_id)===1?!0:((c=t.permissions)==null?void 0:c.includes(l))||!1:!1},isAuthenticated:!!e,user:e,permissions:t,loading:!1}},AH=()=>{const e=zn(n=>n.auth.user);zi();const t=u.useRef(!1);return u.useEffect(()=>{e&&!t.current&&(t.current=!0),!e&&t.current&&(t.current=!1)},[e==null?void 0:e.id]),null},qh=e=>{let t=e.restrictions;if(typeof t=="string")try{t=JSON.parse(t)}catch{t={menus:[],buttons:[],layouts:[],cssSelectors:[]}}return(!t||typeof t!="object")&&(t={menus:[],buttons:[],layouts:[],cssSelectors:[]}),t.menus=t.menus||[],t.buttons=t.buttons||[],t.layouts=t.layouts||[],t.cssSelectors=t.cssSelectors||[],{id:e.id,permissionName:e.permission_name,description:e.description||"",isActive:e.is_active===1||e.is_active===!0,restrictions:t,createdAt:e.created_at?e.created_at.split("T")[0]:new Date().toISOString().split("T")[0],updatedAt:e.updated_at?e.updated_at.split("T")[0]:new Date().toISOString().split("T")[0]}},xP=e=>({permission_name:e.permissionName,description:e.description||"",is_active:e.isActive?1:0,restrictions:e.restrictions||{menus:[],buttons:[],layouts:[],cssSelectors:[]}}),cs={getAll:async()=>{var e;try{const t=await Pe.get("/permissions"),n=((e=t.data)==null?void 0:e.data)||t.data||[];return n.length+"",n.map(qh)}catch(t){throw console.error("권한 목록 조회 실패:",t),t}},getById:async e=>{var t;try{const n=await Pe.get(`/permissions/${e}`);return qh(((t=n.data)==null?void 0:t.data)||n.data)}catch(n){throw console.error("권한 조회 실패:",n),n}},create:async e=>{var t;try{const n=await Pe.post("/permissions",xP(e));return n.data,qh(((t=n.data)==null?void 0:t.data)||n.data)}catch(n){throw console.error("권한 생성 실패:",n),n}},update:async(e,t)=>{var n;try{const r=await Pe.put(`/permissions/${e}`,xP(t));return r.data,qh(((n=r.data)==null?void 0:n.data)||r.data)}catch(r){throw console.error("권한 업데이트 실패:",r),r}},delete:async e=>{try{return(await Pe.delete(`/permissions/${e}`)).data}catch(t){throw console.error("권한 삭제 실패:",t),t}},getMemberPermissions:async e=>{try{return(await Pe.get(`/permissions/member/${e}`)).data}catch(t){throw console.error("회원 권한 조회 실패:",t),t}},updateMemberPermissions:async(e,t)=>{try{return(await Pe.put(`/permissions/member/${e}`,{permissions:t})).data}catch(n){throw console.error("회원 권한 업데이트 실패:",n),n}}},DH=()=>{const e=Kr(),t=mo(),n=zn(r=>r.auth.user);return u.useEffect(()=>{if(!(n!=null&&n.id))return;const r=async()=>{var s,l;try{const c=await cs.getMemberPermissions(n.id);if(c.success&&c.data){const d=c.data.effectivePermissions;e(dB(d)),window.dispatchEvent(new Event("permissionsUpdated"));const h=window.location.pathname,f=RH(h);f&&((l=(s=d.restrictions)==null?void 0:s.menus)!=null&&l.includes(f))&&t("/dashboard")}}catch(c){console.error("권한 새로고침 실패:",c)}},i=s=>{var l,c;((l=s.affectedUsers)!=null&&l.includes(n.id)||(c=s.affectedLevels)!=null&&c.includes(n.agent_level_id)||s.updateType==="global")&&r()},o=s=>{s.userId===n.id&&r()};return Tn.on("permission-updated",i),Tn.on("user-permission-updated",o),Tn.on("agent-level-permission-updated",i),Tn.emit("join-permission-updates",{userId:n.id}),()=>{Tn.off("permission-updated",i),Tn.off("user-permission-updated",o),Tn.off("agent-level-permission-updated",i),Tn.emit("leave-permission-updates",{userId:n.id})}},[n==null?void 0:n.id,n==null?void 0:n.agent_level_id,e,t]),null},RH=e=>{const t={"/dashboard":"dashboard","/agent-management":"agent-management","/betting":"betting","/settlement":"settlement","/transactions":"transactions","/customer-service":"customer-service","/board":"board","/game-settings":"game-settings","/site-settings":"site-settings","/logs":"logs","/base-template":"base-template"};for(const[n,r]of Object.entries(t))if(e.startsWith(n))return r;return null},EH=()=>{var n;const[,e]=u.useState({}),{permissions:t}=zi();return u.useEffect(()=>{const r=()=>{e({})};return window.addEventListener("permissionsUpdated",r),()=>{window.removeEventListener("permissionsUpdated",r)}},[]),u.useEffect(()=>{var s;if(!((s=t==null?void 0:t.restrictions)!=null&&s.cssSelectors))return;const r=t.restrictions.cssSelectors,i="permission-css-restrictions";let o=document.getElementById(i);if(o&&o.remove(),r.length>0){o=document.createElement("style"),o.id=i;const l=r.map(c=>{const d=c.trim();return d?`${d} { display: none !important; }`:""}).filter(c=>c).join(`
`);o.textContent=l,document.head.appendChild(o)}return()=>{const l=document.getElementById(i);l&&l.remove()}},[(n=t==null?void 0:t.restrictions)==null?void 0:n.cssSelectors]),null},MH=({settings:e})=>{const n={...{backgroundColor:"#1a1a1a",backgroundImage:"",mainLogo:"",mainLogoPosition:{x:50,y:20},mainLogoSize:"200px",mainText:'<h1 style="color: white;">시스템 점검 중입니다</h1><p style="color: #ccc;">보다 나은 서비스를 제공하기 위해 시스템 점검을 진행하고 있습니다.</p>',footerLogo:"",footerText:"© 2024 All rights reserved.",socialLinks:[]},...e};return m(j,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:n.backgroundColor,backgroundImage:n.backgroundImage?`url(${n.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:[n.mainLogo&&a(j,{sx:{position:"absolute",left:`${n.mainLogoPosition.x}%`,top:`${n.mainLogoPosition.y}%`,transform:"translate(-50%, -50%)",zIndex:1},children:a("img",{src:n.mainLogo,alt:"Logo",style:{width:n.mainLogoSize,height:"auto"}})}),a(Xl,{maxWidth:"md",sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",py:4},children:a(j,{dangerouslySetInnerHTML:{__html:n.mainText},sx:{textAlign:"center","& h1":{fontSize:{xs:"2rem",md:"3rem"},fontWeight:700,mb:3,color:"white"},"& p":{fontSize:{xs:"1rem",md:"1.25rem"},mb:2,color:"#ccc",lineHeight:1.6}}})}),m(j,{sx:{p:3,textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)"},children:[n.footerLogo&&a(j,{sx:{mb:2},children:a("img",{src:n.footerLogo,alt:"Footer Logo",style:{height:"40px",maxWidth:"200px",objectFit:"contain"}})}),n.socialLinks&&n.socialLinks.length>0&&a(j,{sx:{mb:2,display:"flex",justifyContent:"center",gap:2},children:n.socialLinks.map((r,i)=>r.icon&&r.url&&a("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",transition:"transform 0.2s"},onMouseOver:o=>o.currentTarget.style.transform="scale(1.1)",onMouseOut:o=>o.currentTarget.style.transform="scale(1)",children:a("img",{src:r.icon,alt:r.platform,style:{width:"30px",height:"30px",objectFit:"contain"}})},i))}),a(M,{variant:"body2",sx:{color:"#888",fontSize:{xs:"0.875rem",md:"1rem"}},children:n.footerText}),!1]})]})};var jm={exports:{}},yc={},Uu={exports:{}},LH=Uu.exports,wP;function z1(){return wP||(wP=1,function(e,t){(function(n,r){r(t)})(LH,function(n){function r(G){return function(te,U,V,ae,ne,me,ue){return G(te,U,ue)}}function i(G){return function(te,U,V,ae){if(!te||!U||typeof te!="object"||typeof U!="object")return G(te,U,V,ae);var ne=ae.get(te),me=ae.get(U);if(ne&&me)return ne===U&&me===te;ae.set(te,U),ae.set(U,te);var ue=G(te,U,V,ae);return ae.delete(te),ae.delete(U),ue}}function o(G,Q){var te={};for(var U in G)te[U]=G[U];for(var U in Q)te[U]=Q[U];return te}function s(G){return G.constructor===Object||G.constructor==null}function l(G){return typeof G.then=="function"}function c(G,Q){return G===Q||G!==G&&Q!==Q}var d="[object Arguments]",h="[object Boolean]",f="[object Date]",g="[object RegExp]",w="[object Map]",x="[object Number]",y="[object Object]",p="[object Set]",v="[object String]",b=Object.prototype.toString;function P(G){var Q=G.areArraysEqual,te=G.areDatesEqual,U=G.areMapsEqual,V=G.areObjectsEqual,ae=G.areRegExpsEqual,ne=G.areSetsEqual,me=G.createIsNestedEqual,ue=me(Ae);function Ae(we,ce,De){if(we===ce)return!0;if(!we||!ce||typeof we!="object"||typeof ce!="object")return we!==we&&ce!==ce;if(s(we)&&s(ce))return V(we,ce,ue,De);var le=Array.isArray(we),se=Array.isArray(ce);if(le||se)return le===se&&Q(we,ce,ue,De);var J=b.call(we);return J!==b.call(ce)?!1:J===f?te(we,ce,ue,De):J===g?ae(we,ce,ue,De):J===w?U(we,ce,ue,De):J===p?ne(we,ce,ue,De):J===y||J===d?l(we)||l(ce)?!1:V(we,ce,ue,De):J===h||J===x||J===v?c(we.valueOf(),ce.valueOf()):!1}return Ae}function k(G,Q,te,U){var V=G.length;if(Q.length!==V)return!1;for(;V-- >0;)if(!te(G[V],Q[V],V,V,G,Q,U))return!1;return!0}var C=i(k);function S(G,Q){return c(G.valueOf(),Q.valueOf())}function _(G,Q,te,U){var V=G.size===Q.size;if(!V)return!1;if(!G.size)return!0;var ae={},ne=0;return G.forEach(function(me,ue){if(V){var Ae=!1,we=0;Q.forEach(function(ce,De){!Ae&&!ae[we]&&(Ae=te(ue,De,ne,we,G,Q,U)&&te(me,ce,ue,De,G,Q,U))&&(ae[we]=!0),we++}),ne++,V=Ae}}),V}var T=i(_),I="_owner",L=Object.prototype.hasOwnProperty;function A(G,Q,te,U){var V=Object.keys(G),ae=V.length;if(Object.keys(Q).length!==ae)return!1;for(var ne;ae-- >0;){if(ne=V[ae],ne===I){var me=!!G.$$typeof,ue=!!Q.$$typeof;if((me||ue)&&me!==ue)return!1}if(!L.call(Q,ne)||!te(G[ne],Q[ne],ne,ne,G,Q,U))return!1}return!0}var D=i(A);function B(G,Q){return G.source===Q.source&&G.flags===Q.flags}function $(G,Q,te,U){var V=G.size===Q.size;if(!V)return!1;if(!G.size)return!0;var ae={};return G.forEach(function(ne,me){if(V){var ue=!1,Ae=0;Q.forEach(function(we,ce){!ue&&!ae[Ae]&&(ue=te(ne,we,me,ce,G,Q,U))&&(ae[Ae]=!0),Ae++}),V=ue}}),V}var N=i($),F=Object.freeze({areArraysEqual:k,areDatesEqual:S,areMapsEqual:_,areObjectsEqual:A,areRegExpsEqual:B,areSetsEqual:$,createIsNestedEqual:r}),O=Object.freeze({areArraysEqual:C,areDatesEqual:S,areMapsEqual:T,areObjectsEqual:D,areRegExpsEqual:B,areSetsEqual:N,createIsNestedEqual:r}),R=P(F);function E(G,Q){return R(G,Q,void 0)}var z=P(o(F,{createIsNestedEqual:function(){return c}}));function q(G,Q){return z(G,Q,void 0)}var X=P(O);function H(G,Q){return X(G,Q,new WeakMap)}var K=P(o(O,{createIsNestedEqual:function(){return c}}));function ee(G,Q){return K(G,Q,new WeakMap)}function ge(G){return P(o(F,G(F)))}function oe(G){var Q=P(o(O,G(O)));return function(te,U,V){return V===void 0&&(V=new WeakMap),Q(te,U,V)}}n.circularDeepEqual=H,n.circularShallowEqual=ee,n.createCustomCircularEqual=oe,n.createCustomEqual=ge,n.deepEqual=E,n.sameValueZeroEqual=c,n.shallowEqual=q,Object.defineProperty(n,"__esModule",{value:!0})})}(Uu,Uu.exports)),Uu.exports}var Uh={exports:{}},CP;function bg(){if(CP)return Uh.exports;CP=1;function e(n){var r,i,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(r=0;r<s;r++)n[r]&&(i=e(n[r]))&&(o&&(o+=" "),o+=i)}else for(i in n)n[i]&&(o&&(o+=" "),o+=i);return o}function t(){for(var n,r,i=0,o="",s=arguments.length;i<s;i++)(n=arguments[i])&&(r=e(n))&&(o&&(o+=" "),o+=r);return o}return Uh.exports=t,Uh.exports.clsx=t,Uh.exports}var Wn={},Fm,SP;function $H(){return SP||(SP=1,Fm=function(t,n,r){return t===n?!0:t.className===n.className&&r(t.style,n.style)&&t.width===n.width&&t.autoSize===n.autoSize&&t.cols===n.cols&&t.draggableCancel===n.draggableCancel&&t.draggableHandle===n.draggableHandle&&r(t.verticalCompact,n.verticalCompact)&&r(t.compactType,n.compactType)&&r(t.layout,n.layout)&&r(t.margin,n.margin)&&r(t.containerPadding,n.containerPadding)&&t.rowHeight===n.rowHeight&&t.maxRows===n.maxRows&&t.isBounded===n.isBounded&&t.isDraggable===n.isDraggable&&t.isResizable===n.isResizable&&t.allowOverlap===n.allowOverlap&&t.preventCollision===n.preventCollision&&t.useCSSTransforms===n.useCSSTransforms&&t.transformScale===n.transformScale&&t.isDroppable===n.isDroppable&&r(t.resizeHandles,n.resizeHandles)&&r(t.resizeHandle,n.resizeHandle)&&t.onLayoutChange===n.onLayoutChange&&t.onDragStart===n.onDragStart&&t.onDrag===n.onDrag&&t.onDragStop===n.onDragStop&&t.onResizeStart===n.onResizeStart&&t.onResize===n.onResize&&t.onResizeStop===n.onResizeStop&&t.onDrop===n.onDrop&&r(t.droppingItem,n.droppingItem)&&r(t.innerRef,n.innerRef)}),Fm}var PP;function Ql(){if(PP)return Wn;PP=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.bottom=r,Wn.childrenEqual=c,Wn.cloneLayout=i,Wn.cloneLayoutItem=l,Wn.collides=h,Wn.compact=f,Wn.compactItem=x,Wn.compactType=G,Wn.correctBounds=y,Wn.fastPositionEqual=d,Wn.fastRGLPropsEqual=void 0,Wn.getAllCollisions=b,Wn.getFirstCollision=v,Wn.getLayoutItem=p,Wn.getStatics=P,Wn.modifyLayout=o,Wn.moveElement=k,Wn.moveElementAwayFromCollision=C,Wn.noop=void 0,Wn.perc=S,Wn.resizeItemInDirection=z,Wn.setTopLeft=X,Wn.setTransform=q,Wn.sortLayoutItems=H,Wn.sortLayoutItemsByColRow=ee,Wn.sortLayoutItemsByRowCol=K,Wn.synchronizeLayoutWithChildren=ge,Wn.validateLayout=oe,Wn.withLayoutItem=s;var e=z1(),t=n(ei());function n(U){return U&&U.__esModule?U:{default:U}}function r(U){let V=0,ae;for(let ne=0,me=U.length;ne<me;ne++)ae=U[ne].y+U[ne].h,ae>V&&(V=ae);return V}function i(U){const V=Array(U.length);for(let ae=0,ne=U.length;ae<ne;ae++)V[ae]=l(U[ae]);return V}function o(U,V){const ae=Array(U.length);for(let ne=0,me=U.length;ne<me;ne++)V.i===U[ne].i?ae[ne]=V:ae[ne]=U[ne];return ae}function s(U,V,ae){let ne=p(U,V);return ne?(ne=ae(l(ne)),U=o(U,ne),[U,ne]):[U,null]}function l(U){return{w:U.w,h:U.h,x:U.x,y:U.y,i:U.i,minW:U.minW,maxW:U.maxW,minH:U.minH,maxH:U.maxH,moved:!!U.moved,static:!!U.static,isDraggable:U.isDraggable,isResizable:U.isResizable,resizeHandles:U.resizeHandles,isBounded:U.isBounded}}function c(U,V){return(0,e.deepEqual)(t.default.Children.map(U,ae=>ae==null?void 0:ae.key),t.default.Children.map(V,ae=>ae==null?void 0:ae.key))&&(0,e.deepEqual)(t.default.Children.map(U,ae=>ae==null?void 0:ae.props["data-grid"]),t.default.Children.map(V,ae=>ae==null?void 0:ae.props["data-grid"]))}Wn.fastRGLPropsEqual=$H();function d(U,V){return U.left===V.left&&U.top===V.top&&U.width===V.width&&U.height===V.height}function h(U,V){return!(U.i===V.i||U.x+U.w<=V.x||U.x>=V.x+V.w||U.y+U.h<=V.y||U.y>=V.y+V.h)}function f(U,V,ae,ne){const me=P(U),ue=H(U,V),Ae=Array(U.length);for(let we=0,ce=ue.length;we<ce;we++){let De=l(ue[we]);De.static||(De=x(me,De,V,ae,ue,ne),me.push(De)),Ae[U.indexOf(ue[we])]=De,De.moved=!1}return Ae}const g={x:"w",y:"h"};function w(U,V,ae,ne){const me=g[ne];V[ne]+=1;const ue=U.map(Ae=>Ae.i).indexOf(V.i);for(let Ae=ue+1;Ae<U.length;Ae++){const we=U[Ae];if(!we.static){if(we.y>V.y+V.h)break;h(V,we)&&w(U,we,ae+V[me],ne)}}V[ne]=ae}function x(U,V,ae,ne,me,ue){const Ae=ae==="vertical",we=ae==="horizontal";if(Ae)for(V.y=Math.min(r(U),V.y);V.y>0&&!v(U,V);)V.y--;else if(we)for(;V.x>0&&!v(U,V);)V.x--;let ce;for(;(ce=v(U,V))&&!(ae===null&&ue);)if(we?w(me,V,ce.x+ce.w,"x"):w(me,V,ce.y+ce.h,"y"),we&&V.x+V.w>ne)for(V.x=ne-V.w,V.y++;V.x>0&&!v(U,V);)V.x--;return V.y=Math.max(V.y,0),V.x=Math.max(V.x,0),V}function y(U,V){const ae=P(U);for(let ne=0,me=U.length;ne<me;ne++){const ue=U[ne];if(ue.x+ue.w>V.cols&&(ue.x=V.cols-ue.w),ue.x<0&&(ue.x=0,ue.w=V.cols),!ue.static)ae.push(ue);else for(;v(ae,ue);)ue.y++}return U}function p(U,V){for(let ae=0,ne=U.length;ae<ne;ae++)if(U[ae].i===V)return U[ae]}function v(U,V){for(let ae=0,ne=U.length;ae<ne;ae++)if(h(U[ae],V))return U[ae]}function b(U,V){return U.filter(ae=>h(ae,V))}function P(U){return U.filter(V=>V.static)}function k(U,V,ae,ne,me,ue,Ae,we,ce){if(V.static&&V.isDraggable!==!0||V.y===ne&&V.x===ae)return U;`${V.i}${String(ae)}${String(ne)}${V.x}${V.y}`;const De=V.x,le=V.y;typeof ae=="number"&&(V.x=ae),typeof ne=="number"&&(V.y=ne),V.moved=!0;let se=H(U,Ae);(Ae==="vertical"&&typeof ne=="number"?le>=ne:Ae==="horizontal"&&typeof ae=="number"?De>=ae:!1)&&(se=se.reverse());const Z=b(se,V),ie=Z.length>0;if(ie&&ce)return i(U);if(ie&&ue)return`${V.i}`,V.x=De,V.y=le,V.moved=!1,U;for(let _e=0,Re=Z.length;_e<Re;_e++){const He=Z[_e];`${V.i}${V.x}${V.y}${He.i}${He.x}${He.y}`,!He.moved&&(He.static?U=C(U,He,V,me,Ae):U=C(U,V,He,me,Ae))}return U}function C(U,V,ae,ne,me,ue){const Ae=me==="horizontal",we=me==="vertical",ce=V.static;if(ne){ne=!1;const se={x:Ae?Math.max(V.x-ae.w,0):ae.x,y:we?Math.max(V.y-ae.h,0):ae.y,w:ae.w,h:ae.h,i:"-1"},J=v(U,se),Z=J&&J.y+J.h>V.y,ie=J&&V.x+V.w>J.x;if(J){if(Z&&we)return k(U,ae,void 0,V.y+1,ne,ce,me);if(Z&&me==null)return V.y=ae.y,ae.y=ae.y+ae.h,U;if(ie&&Ae)return k(U,V,ae.x,void 0,ne,ce,me)}else return`${ae.i}${se.x}${se.y}`,k(U,ae,Ae?se.x:void 0,we?se.y:void 0,ne,ce,me)}const De=Ae?ae.x+1:void 0,le=we?ae.y+1:void 0;return De==null&&le==null?U:k(U,ae,Ae?ae.x+1:void 0,we?ae.y+1:void 0,ne,ce,me)}function S(U){return U*100+"%"}const _=(U,V,ae,ne)=>U+ae>ne?V:ae,T=(U,V,ae)=>U<0?V:ae,I=U=>Math.max(0,U),L=U=>Math.max(0,U),A=(U,V,ae)=>{let{left:ne,height:me,width:ue}=V;const Ae=U.top-(me-U.height);return{left:ne,width:ue,height:T(Ae,U.height,me),top:L(Ae)}},D=(U,V,ae)=>{let{top:ne,left:me,height:ue,width:Ae}=V;return{top:ne,height:ue,width:_(U.left,U.width,Ae,ae),left:I(me)}},B=(U,V,ae)=>{let{top:ne,height:me,width:ue}=V;const Ae=U.left-(ue-U.width);return{height:me,width:Ae<0?U.width:_(U.left,U.width,ue,ae),top:L(ne),left:I(Ae)}},$=(U,V,ae)=>{let{top:ne,left:me,height:ue,width:Ae}=V;return{width:Ae,left:me,height:T(ne,U.height,ue),top:L(ne)}},E={n:A,ne:function(){return A(arguments.length<=0?void 0:arguments[0],D(...arguments))},e:D,se:function(){return $(arguments.length<=0?void 0:arguments[0],D(...arguments))},s:$,sw:function(){return $(arguments.length<=0?void 0:arguments[0],B(...arguments))},w:B,nw:function(){return A(arguments.length<=0?void 0:arguments[0],B(...arguments))}};function z(U,V,ae,ne){const me=E[U];return me?me(V,{...V,...ae},ne):ae}function q(U){let{top:V,left:ae,width:ne,height:me}=U;const ue=`translate(${ae}px,${V}px)`;return{transform:ue,WebkitTransform:ue,MozTransform:ue,msTransform:ue,OTransform:ue,width:`${ne}px`,height:`${me}px`,position:"absolute"}}function X(U){let{top:V,left:ae,width:ne,height:me}=U;return{top:`${V}px`,left:`${ae}px`,width:`${ne}px`,height:`${me}px`,position:"absolute"}}function H(U,V){return V==="horizontal"?ee(U):V==="vertical"?K(U):U}function K(U){return U.slice(0).sort(function(V,ae){return V.y>ae.y||V.y===ae.y&&V.x>ae.x?1:V.y===ae.y&&V.x===ae.x?0:-1})}function ee(U){return U.slice(0).sort(function(V,ae){return V.x>ae.x||V.x===ae.x&&V.y>ae.y?1:-1})}function ge(U,V,ae,ne,me){U=U||[];const ue=[];t.default.Children.forEach(V,we=>{if((we==null?void 0:we.key)==null)return;const ce=p(U,String(we.key)),De=we.props["data-grid"];ce&&De==null?ue.push(l(ce)):De?ue.push(l({...De,i:we.key})):ue.push(l({w:1,h:1,x:0,y:r(ue),i:String(we.key)}))});const Ae=y(ue,{cols:ae});return me?Ae:f(Ae,ne,ae)}function oe(U){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const ae=["x","y","w","h"];if(!Array.isArray(U))throw new Error(V+" must be an array!");for(let ne=0,me=U.length;ne<me;ne++){const ue=U[ne];for(let Ae=0;Ae<ae.length;Ae++){const we=ae[Ae],ce=ue[we];if(typeof ce!="number"||Number.isNaN(ce))throw new Error(`ReactGridLayout: ${V}[${ne}].${we} must be a number! Received: ${ce} (${typeof ce})`)}if(typeof ue.i<"u"&&typeof ue.i!="string")throw new Error(`ReactGridLayout: ${V}[${ne}].i must be a string! Received: ${ue.i} (${typeof ue.i})`)}}function G(U){const{verticalCompact:V,compactType:ae}=U||{};return V===!1?null:ae}function Q(){}const te=()=>{};return Wn.noop=te,Wn}var qi={},kP;function N1(){if(kP)return qi;kP=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.calcGridColWidth=e,qi.calcGridItemPosition=n,qi.calcGridItemWHPx=t,qi.calcWH=i,qi.calcXY=r,qi.clamp=o;function e(s){const{margin:l,containerPadding:c,containerWidth:d,cols:h}=s;return(d-l[0]*(h-1)-c[0]*2)/h}function t(s,l,c){return Number.isFinite(s)?Math.round(l*s+Math.max(0,s-1)*c):s}function n(s,l,c,d,h,f){const{margin:g,containerPadding:w,rowHeight:x}=s,y=e(s),p={};return f&&f.resizing?(p.width=Math.round(f.resizing.width),p.height=Math.round(f.resizing.height)):(p.width=t(d,y,g[0]),p.height=t(h,x,g[1])),f&&f.dragging?(p.top=Math.round(f.dragging.top),p.left=Math.round(f.dragging.left)):f&&f.resizing&&typeof f.resizing.top=="number"&&typeof f.resizing.left=="number"?(p.top=Math.round(f.resizing.top),p.left=Math.round(f.resizing.left)):(p.top=Math.round((x+g[1])*c+w[1]),p.left=Math.round((y+g[0])*l+w[0])),p}function r(s,l,c,d,h){const{margin:f,containerPadding:g,cols:w,rowHeight:x,maxRows:y}=s,p=e(s);let v=Math.round((c-g[0])/(p+f[0])),b=Math.round((l-g[1])/(x+f[1]));return v=o(v,0,w-d),b=o(b,0,y-h),{x:v,y:b}}function i(s,l,c,d,h,f){const{margin:g,maxRows:w,cols:x,rowHeight:y}=s,p=e(s);let v=Math.round((l+g[0])/(p+g[0])),b=Math.round((c+g[1])/(y+g[1])),P=o(v,0,x-d),k=o(b,0,w-h);return["sw","w","nw"].indexOf(f)!==-1&&(P=o(v,0,x)),["nw","n","ne"].indexOf(f)!==-1&&(k=o(b,0,w)),{w:P,h:k}}function o(s,l,c){return Math.max(Math.min(s,c),l)}return qi}var bc={},vc={exports:{}},zm={},Rr={},Po={},_P;function vg(){if(_P)return Po;_P=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.dontSetMe=i,Po.findInArray=e,Po.int=r,Po.isFunction=t,Po.isNum=n;function e(o,s){for(let l=0,c=o.length;l<c;l++)if(s.apply(s,[o[l],l,o]))return o[l]}function t(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function n(o){return typeof o=="number"&&!isNaN(o)}function r(o){return parseInt(o,10)}function i(o,s,l){if(o[s])return new Error(`Invalid prop ${s} passed to ${l} - do not set this, set it on the child.`)}return Po}var ko={},TP;function jH(){if(TP)return ko;TP=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.browserPrefixToKey=n,ko.browserPrefixToStyle=r,ko.default=void 0,ko.getPrefix=t;const e=["Moz","Webkit","O","ms"];function t(){var l,c;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const s=(c=(l=window.document)==null?void 0:l.documentElement)==null?void 0:c.style;if(!s||o in s)return"";for(let d=0;d<e.length;d++)if(n(o,e[d])in s)return e[d];return""}function n(o,s){return s?`${s}${i(o)}`:o}function r(o,s){return s?`-${s.toLowerCase()}-${o}`:o}function i(o){let s="",l=!0;for(let c=0;c<o.length;c++)l?(s+=o[c].toUpperCase(),l=!1):o[c]==="-"?l=!0:s+=o[c];return s}return ko.default=t(),ko}var IP;function B1(){if(IP)return Rr;IP=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.addClassName=C,Rr.addEvent=s,Rr.addUserSelectStyles=b,Rr.createCSSTransform=w,Rr.createSVGTransform=x,Rr.getTouch=p,Rr.getTouchIdentifier=v,Rr.getTranslation=y,Rr.innerHeight=h,Rr.innerWidth=f,Rr.matchesSelector=i,Rr.matchesSelectorAndParentsTo=o,Rr.offsetXYFromParent=g,Rr.outerHeight=c,Rr.outerWidth=d,Rr.removeClassName=S,Rr.removeEvent=l,Rr.scheduleRemoveUserSelectStyles=P;var e=vg(),t=n(jH());function n(_,T){if(typeof WeakMap=="function")var I=new WeakMap,L=new WeakMap;return(n=function(A,D){if(!D&&A&&A.__esModule)return A;var B,$,N={__proto__:null,default:A};if(A===null||typeof A!="object"&&typeof A!="function")return N;if(B=D?L:I){if(B.has(A))return B.get(A);B.set(A,N)}for(const F in A)F!=="default"&&{}.hasOwnProperty.call(A,F)&&(($=(B=Object.defineProperty)&&Object.getOwnPropertyDescriptor(A,F))&&($.get||$.set)?B(N,F,$):N[F]=A[F]);return N})(_,T)}let r="";function i(_,T){return r||(r=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(I){return(0,e.isFunction)(_[I])})),(0,e.isFunction)(_[r])?_[r](T):!1}function o(_,T,I){let L=_;do{if(i(L,T))return!0;if(L===I)return!1;L=L.parentNode}while(L);return!1}function s(_,T,I,L){if(!_)return;const A={capture:!0,...L};_.addEventListener?_.addEventListener(T,I,A):_.attachEvent?_.attachEvent("on"+T,I):_["on"+T]=I}function l(_,T,I,L){if(!_)return;const A={capture:!0,...L};_.removeEventListener?_.removeEventListener(T,I,A):_.detachEvent?_.detachEvent("on"+T,I):_["on"+T]=null}function c(_){let T=_.clientHeight;const I=_.ownerDocument.defaultView.getComputedStyle(_);return T+=(0,e.int)(I.borderTopWidth),T+=(0,e.int)(I.borderBottomWidth),T}function d(_){let T=_.clientWidth;const I=_.ownerDocument.defaultView.getComputedStyle(_);return T+=(0,e.int)(I.borderLeftWidth),T+=(0,e.int)(I.borderRightWidth),T}function h(_){let T=_.clientHeight;const I=_.ownerDocument.defaultView.getComputedStyle(_);return T-=(0,e.int)(I.paddingTop),T-=(0,e.int)(I.paddingBottom),T}function f(_){let T=_.clientWidth;const I=_.ownerDocument.defaultView.getComputedStyle(_);return T-=(0,e.int)(I.paddingLeft),T-=(0,e.int)(I.paddingRight),T}function g(_,T,I){const A=T===T.ownerDocument.body?{left:0,top:0}:T.getBoundingClientRect(),D=(_.clientX+T.scrollLeft-A.left)/I,B=(_.clientY+T.scrollTop-A.top)/I;return{x:D,y:B}}function w(_,T){const I=y(_,T,"px");return{[(0,t.browserPrefixToKey)("transform",t.default)]:I}}function x(_,T){return y(_,T,"")}function y(_,T,I){let{x:L,y:A}=_,D=`translate(${L}${I},${A}${I})`;if(T){const B=`${typeof T.x=="string"?T.x:T.x+I}`,$=`${typeof T.y=="string"?T.y:T.y+I}`;D=`translate(${B}, ${$})`+D}return D}function p(_,T){return _.targetTouches&&(0,e.findInArray)(_.targetTouches,I=>T===I.identifier)||_.changedTouches&&(0,e.findInArray)(_.changedTouches,I=>T===I.identifier)}function v(_){if(_.targetTouches&&_.targetTouches[0])return _.targetTouches[0].identifier;if(_.changedTouches&&_.changedTouches[0])return _.changedTouches[0].identifier}function b(_){if(!_)return;let T=_.getElementById("react-draggable-style-el");T||(T=_.createElement("style"),T.type="text/css",T.id="react-draggable-style-el",T.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,T.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,_.getElementsByTagName("head")[0].appendChild(T)),_.body&&C(_.body,"react-draggable-transparent-selection")}function P(_){window.requestAnimationFrame?window.requestAnimationFrame(()=>{k(_)}):k(_)}function k(_){if(_)try{if(_.body&&S(_.body,"react-draggable-transparent-selection"),_.selection)_.selection.empty();else{const T=(_.defaultView||window).getSelection();T&&T.type!=="Caret"&&T.removeAllRanges()}}catch{}}function C(_,T){_.classList?_.classList.add(T):_.className.match(new RegExp(`(?:^|\\s)${T}(?!\\S)`))||(_.className+=` ${T}`)}function S(_,T){_.classList?_.classList.remove(T):_.className=_.className.replace(new RegExp(`(?:^|\\s)${T}(?!\\S)`,"g"),"")}return Rr}var Pi={},OP;function M5(){if(OP)return Pi;OP=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.canDragX=i,Pi.canDragY=o,Pi.createCoreData=l,Pi.createDraggableData=c,Pi.getBoundPosition=n,Pi.getControlPosition=s,Pi.snapToGrid=r;var e=vg(),t=B1();function n(f,g,w){if(!f.props.bounds)return[g,w];let{bounds:x}=f.props;x=typeof x=="string"?x:d(x);const y=h(f);if(typeof x=="string"){const{ownerDocument:p}=y,v=p.defaultView;let b;if(x==="parent"?b=y.parentNode:b=y.getRootNode().querySelector(x),!(b instanceof v.HTMLElement))throw new Error('Bounds selector "'+x+'" could not find an element.');const P=b,k=v.getComputedStyle(y),C=v.getComputedStyle(P);x={left:-y.offsetLeft+(0,e.int)(C.paddingLeft)+(0,e.int)(k.marginLeft),top:-y.offsetTop+(0,e.int)(C.paddingTop)+(0,e.int)(k.marginTop),right:(0,t.innerWidth)(P)-(0,t.outerWidth)(y)-y.offsetLeft+(0,e.int)(C.paddingRight)-(0,e.int)(k.marginRight),bottom:(0,t.innerHeight)(P)-(0,t.outerHeight)(y)-y.offsetTop+(0,e.int)(C.paddingBottom)-(0,e.int)(k.marginBottom)}}return(0,e.isNum)(x.right)&&(g=Math.min(g,x.right)),(0,e.isNum)(x.bottom)&&(w=Math.min(w,x.bottom)),(0,e.isNum)(x.left)&&(g=Math.max(g,x.left)),(0,e.isNum)(x.top)&&(w=Math.max(w,x.top)),[g,w]}function r(f,g,w){const x=Math.round(g/f[0])*f[0],y=Math.round(w/f[1])*f[1];return[x,y]}function i(f){return f.props.axis==="both"||f.props.axis==="x"}function o(f){return f.props.axis==="both"||f.props.axis==="y"}function s(f,g,w){const x=typeof g=="number"?(0,t.getTouch)(f,g):null;if(typeof g=="number"&&!x)return null;const y=h(w),p=w.props.offsetParent||y.offsetParent||y.ownerDocument.body;return(0,t.offsetXYFromParent)(x||f,p,w.props.scale)}function l(f,g,w){const x=!(0,e.isNum)(f.lastX),y=h(f);return x?{node:y,deltaX:0,deltaY:0,lastX:g,lastY:w,x:g,y:w}:{node:y,deltaX:g-f.lastX,deltaY:w-f.lastY,lastX:f.lastX,lastY:f.lastY,x:g,y:w}}function c(f,g){const w=f.props.scale;return{node:g.node,x:f.state.x+g.deltaX/w,y:f.state.y+g.deltaY/w,deltaX:g.deltaX/w,deltaY:g.deltaY/w,lastX:f.state.x,lastY:f.state.y}}function d(f){return{left:f.left,top:f.top,right:f.right,bottom:f.bottom}}function h(f){const g=f.findDOMNode();if(!g)throw new Error("<DraggableCore>: Unmounted during event!");return g}return Pi}var xc={},Vh={},AP;function L5(){if(AP)return Vh;AP=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.default=e;function e(){}return Vh}var DP;function FH(){if(DP)return xc;DP=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.default=void 0;var e=c(ei()),t=l(Yo()),n=l(sg()),r=B1(),i=M5(),o=vg(),s=l(L5());function l(y){return y&&y.__esModule?y:{default:y}}function c(y,p){if(typeof WeakMap=="function")var v=new WeakMap,b=new WeakMap;return(c=function(P,k){if(!k&&P&&P.__esModule)return P;var C,S,_={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return _;if(C=k?b:v){if(C.has(P))return C.get(P);C.set(P,_)}for(const T in P)T!=="default"&&{}.hasOwnProperty.call(P,T)&&((S=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,T))&&(S.get||S.set)?C(_,T,S):_[T]=P[T]);return _})(y,p)}function d(y,p,v){return(p=h(p))in y?Object.defineProperty(y,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[p]=v,y}function h(y){var p=f(y,"string");return typeof p=="symbol"?p:p+""}function f(y,p){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var b=v.call(y,p);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(y)}const g={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let w=g.mouse,x=class extends e.Component{constructor(){super(...arguments),d(this,"dragging",!1),d(this,"lastX",NaN),d(this,"lastY",NaN),d(this,"touchIdentifier",null),d(this,"mounted",!1),d(this,"handleDragStart",p=>{if(this.props.onMouseDown(p),!this.props.allowAnyClick&&typeof p.button=="number"&&p.button!==0)return!1;const v=this.findDOMNode();if(!v||!v.ownerDocument||!v.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:b}=v;if(this.props.disabled||!(p.target instanceof b.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(p.target,this.props.handle,v)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(p.target,this.props.cancel,v))return;p.type==="touchstart"&&!this.props.allowMobileScroll&&p.preventDefault();const P=(0,r.getTouchIdentifier)(p);this.touchIdentifier=P;const k=(0,i.getControlPosition)(p,P,this);if(k==null)return;const{x:C,y:S}=k,_=(0,i.createCoreData)(this,C,S);(0,s.default)("DraggableCore: handleDragStart: %j",_),(0,s.default)("calling",this.props.onStart),!(this.props.onStart(p,_)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(b),this.dragging=!0,this.lastX=C,this.lastY=S,(0,r.addEvent)(b,w.move,this.handleDrag),(0,r.addEvent)(b,w.stop,this.handleDragStop))}),d(this,"handleDrag",p=>{const v=(0,i.getControlPosition)(p,this.touchIdentifier,this);if(v==null)return;let{x:b,y:P}=v;if(Array.isArray(this.props.grid)){let S=b-this.lastX,_=P-this.lastY;if([S,_]=(0,i.snapToGrid)(this.props.grid,S,_),!S&&!_)return;b=this.lastX+S,P=this.lastY+_}const k=(0,i.createCoreData)(this,b,P);if((0,s.default)("DraggableCore: handleDrag: %j",k),this.props.onDrag(p,k)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const _=document.createEvent("MouseEvents");_.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(_)}return}this.lastX=b,this.lastY=P}),d(this,"handleDragStop",p=>{if(!this.dragging)return;const v=(0,i.getControlPosition)(p,this.touchIdentifier,this);if(v==null)return;let{x:b,y:P}=v;if(Array.isArray(this.props.grid)){let _=b-this.lastX||0,T=P-this.lastY||0;[_,T]=(0,i.snapToGrid)(this.props.grid,_,T),b=this.lastX+_,P=this.lastY+T}const k=(0,i.createCoreData)(this,b,P);if(this.props.onStop(p,k)===!1||this.mounted===!1)return!1;const S=this.findDOMNode();S&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(S.ownerDocument),(0,s.default)("DraggableCore: handleDragStop: %j",k),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,S&&((0,s.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(S.ownerDocument,w.move,this.handleDrag),(0,r.removeEvent)(S.ownerDocument,w.stop,this.handleDragStop))}),d(this,"onMouseDown",p=>(w=g.mouse,this.handleDragStart(p))),d(this,"onMouseUp",p=>(w=g.mouse,this.handleDragStop(p))),d(this,"onTouchStart",p=>(w=g.touch,this.handleDragStart(p))),d(this,"onTouchEnd",p=>(w=g.touch,this.handleDragStop(p)))}componentDidMount(){this.mounted=!0;const p=this.findDOMNode();p&&(0,r.addEvent)(p,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const p=this.findDOMNode();if(p){const{ownerDocument:v}=p;(0,r.removeEvent)(v,g.mouse.move,this.handleDrag),(0,r.removeEvent)(v,g.touch.move,this.handleDrag),(0,r.removeEvent)(v,g.mouse.stop,this.handleDragStop),(0,r.removeEvent)(v,g.touch.stop,this.handleDragStop),(0,r.removeEvent)(p,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(v)}}findDOMNode(){var p,v,b;return(p=this.props)!=null&&p.nodeRef?(b=(v=this.props)==null?void 0:v.nodeRef)==null?void 0:b.current:n.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return xc.default=x,d(x,"displayName","DraggableCore"),d(x,"propTypes",{allowAnyClick:t.default.bool,allowMobileScroll:t.default.bool,children:t.default.node.isRequired,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:function(y,p){if(y[p]&&y[p].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:t.default.arrayOf(t.default.number),handle:t.default.string,cancel:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),d(x,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),xc}var RP;function zH(){return RP||(RP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=f(ei()),n=h(Yo()),r=h(sg()),i=bg(),o=B1(),s=M5(),l=vg(),c=h(FH()),d=h(L5());function h(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(typeof WeakMap=="function")var P=new WeakMap,k=new WeakMap;return(f=function(C,S){if(!S&&C&&C.__esModule)return C;var _,T,I={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return I;if(_=S?k:P){if(_.has(C))return _.get(C);_.set(C,I)}for(const L in C)L!=="default"&&{}.hasOwnProperty.call(C,L)&&((T=(_=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,L))&&(T.get||T.set)?_(I,L,T):I[L]=C[L]);return I})(v,b)}function g(){return g=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var P=arguments[b];for(var k in P)({}).hasOwnProperty.call(P,k)&&(v[k]=P[k])}return v},g.apply(null,arguments)}function w(v,b,P){return(b=x(b))in v?Object.defineProperty(v,b,{value:P,enumerable:!0,configurable:!0,writable:!0}):v[b]=P,v}function x(v){var b=y(v,"string");return typeof b=="symbol"?b:b+""}function y(v,b){if(typeof v!="object"||!v)return v;var P=v[Symbol.toPrimitive];if(P!==void 0){var k=P.call(v,b);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}class p extends t.Component{static getDerivedStateFromProps(b,P){let{position:k}=b,{prevPropsPosition:C}=P;return k&&(!C||k.x!==C.x||k.y!==C.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:C}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(b){super(b),w(this,"onDragStart",(P,k)=>{if((0,d.default)("Draggable: onDragStart: %j",k),this.props.onStart(P,(0,s.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),w(this,"onDrag",(P,k)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",k);const C=(0,s.createDraggableData)(this,k),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[L,A]=(0,s.getBoundPosition)(this,S.x,S.y);S.x=L,S.y=A,S.slackX=this.state.slackX+(T-S.x),S.slackY=this.state.slackY+(I-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(P,C)===!1)return!1;this.setState(S)}),w(this,"onDragStop",(P,k)=>{if(!this.state.dragging||this.props.onStop(P,(0,s.createDraggableData)(this,k))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",k);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:I}=this.props.position;S.x=T,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,P;return((P=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:P.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:P,children:k,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:_,defaultClassNameDragged:T,position:I,positionOffset:L,scale:A,...D}=this.props;let B={},$=null;const F=!!!I||this.state.dragging,O=I||C,R={x:(0,s.canDragX)(this)&&F?this.state.x:O.x,y:(0,s.canDragY)(this)&&F?this.state.y:O.y};this.state.isElementSVG?$=(0,o.createSVGTransform)(R,L):B=(0,o.createCSSTransform)(R,L);const E=(0,i.clsx)(k.props.className||"",S,{[_]:this.state.dragging,[T]:this.state.dragged});return t.createElement(c.default,g({},D,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(k),{className:E,style:{...k.props.style,...B},transform:$}))}}e.default=p,w(p,"displayName","Draggable"),w(p,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),w(p,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(zm)),zm}var EP;function H1(){if(EP)return vc.exports;EP=1;const{default:e,DraggableCore:t}=zH();return vc.exports=e,vc.exports.default=e,vc.exports.DraggableCore=t,vc.exports}var wc={exports:{}},Cc={},Gh={},MP;function NH(){if(MP)return Gh;MP=1,Gh.__esModule=!0,Gh.cloneElement=l;var e=t(ei());function t(c){return c&&c.__esModule?c:{default:c}}function n(c,d){var h=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);d&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})),h.push.apply(h,f)}return h}function r(c){for(var d=1;d<arguments.length;d++){var h=arguments[d]!=null?arguments[d]:{};d%2?n(Object(h),!0).forEach(function(f){i(c,f,h[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):n(Object(h)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(h,f))})}return c}function i(c,d,h){return d=o(d),d in c?Object.defineProperty(c,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[d]=h,c}function o(c){var d=s(c,"string");return typeof d=="symbol"?d:String(d)}function s(c,d){if(typeof c!="object"||c===null)return c;var h=c[Symbol.toPrimitive];if(h!==void 0){var f=h.call(c,d);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(c)}function l(c,d){return d.style&&c.props.style&&(d.style=r(r({},c.props.style),d.style)),d.className&&c.props.className&&(d.className=c.props.className+" "+d.className),e.default.cloneElement(c,d)}return Gh}var Sc={},LP;function $5(){if(LP)return Sc;LP=1,Sc.__esModule=!0,Sc.resizableProps=void 0;var e=t(Yo());H1();function t(r){return r&&r.__esModule?r:{default:r}}var n={axis:e.default.oneOf(["both","x","y","none"]),className:e.default.string,children:e.default.element.isRequired,draggableOpts:e.default.shape({allowAnyClick:e.default.bool,cancel:e.default.string,children:e.default.node,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:e.default.node,grid:e.default.arrayOf(e.default.number),handle:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number}),height:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=o[0];if(l.axis==="both"||l.axis==="y"){var c;return(c=e.default.number).isRequired.apply(c,o)}return e.default.number.apply(e.default,o)},handle:e.default.oneOfType([e.default.node,e.default.func]),handleSize:e.default.arrayOf(e.default.number),lockAspectRatio:e.default.bool,maxConstraints:e.default.arrayOf(e.default.number),minConstraints:e.default.arrayOf(e.default.number),onResizeStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,resizeHandles:e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:e.default.number,width:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=o[0];if(l.axis==="both"||l.axis==="x"){var c;return(c=e.default.number).isRequired.apply(c,o)}return e.default.number.apply(e.default,o)}};return Sc.resizableProps=n,Sc}var $P;function j5(){if($P)return Cc;$P=1,Cc.__esModule=!0,Cc.default=void 0;var e=s(ei()),t=H1(),n=NH(),r=$5(),i=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,P=new WeakMap;return(o=function(C){return C?P:b})(v)}function s(v,b){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var P=o(b);if(P&&P.has(v))return P.get(v);var k={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in v)if(S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)){var _=C?Object.getOwnPropertyDescriptor(v,S):null;_&&(_.get||_.set)?Object.defineProperty(k,S,_):k[S]=v[S]}return k.default=v,P&&P.set(v,k),k}function l(){return l=Object.assign?Object.assign.bind():function(v){for(var b=1;b<arguments.length;b++){var P=arguments[b];for(var k in P)Object.prototype.hasOwnProperty.call(P,k)&&(v[k]=P[k])}return v},l.apply(this,arguments)}function c(v,b){if(v==null)return{};var P={},k=Object.keys(v),C,S;for(S=0;S<k.length;S++)C=k[S],!(b.indexOf(C)>=0)&&(P[C]=v[C]);return P}function d(v,b){var P=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);b&&(k=k.filter(function(C){return Object.getOwnPropertyDescriptor(v,C).enumerable})),P.push.apply(P,k)}return P}function h(v){for(var b=1;b<arguments.length;b++){var P=arguments[b]!=null?arguments[b]:{};b%2?d(Object(P),!0).forEach(function(k){f(v,k,P[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(P)):d(Object(P)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(P,k))})}return v}function f(v,b,P){return b=g(b),b in v?Object.defineProperty(v,b,{value:P,enumerable:!0,configurable:!0,writable:!0}):v[b]=P,v}function g(v){var b=w(v,"string");return typeof b=="symbol"?b:String(b)}function w(v,b){if(typeof v!="object"||v===null)return v;var P=v[Symbol.toPrimitive];if(P!==void 0){var k=P.call(v,b);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(v)}function x(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,y(v,b)}function y(v,b){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,C){return k.__proto__=C,k},y(v,b)}var p=function(v){x(b,v);function b(){for(var k,C=arguments.length,S=new Array(C),_=0;_<C;_++)S[_]=arguments[_];return k=v.call.apply(v,[this].concat(S))||this,k.handleRefs={},k.lastHandleRect=null,k.slack=null,k}var P=b.prototype;return P.componentWillUnmount=function(){this.resetData()},P.resetData=function(){this.lastHandleRect=this.slack=null},P.runConstraints=function(C,S){var _=this.props,T=_.minConstraints,I=_.maxConstraints,L=_.lockAspectRatio;if(!T&&!I&&!L)return[C,S];if(L){var A=this.props.width/this.props.height,D=C-this.props.width,B=S-this.props.height;Math.abs(D)>Math.abs(B*A)?S=C/A:C=S*A}var $=C,N=S,F=this.slack||[0,0],O=F[0],R=F[1];return C+=O,S+=R,T&&(C=Math.max(T[0],C),S=Math.max(T[1],S)),I&&(C=Math.min(I[0],C),S=Math.min(I[1],S)),this.slack=[O+($-C),R+(N-S)],[C,S]},P.resizeHandler=function(C,S){var _=this;return function(T,I){var L=I.node,A=I.deltaX,D=I.deltaY;C==="onResizeStart"&&_.resetData();var B=(_.props.axis==="both"||_.props.axis==="x")&&S!=="n"&&S!=="s",$=(_.props.axis==="both"||_.props.axis==="y")&&S!=="e"&&S!=="w";if(!(!B&&!$)){var N=S[0],F=S[S.length-1],O=L.getBoundingClientRect();if(_.lastHandleRect!=null){if(F==="w"){var R=O.left-_.lastHandleRect.left;A+=R}if(N==="n"){var E=O.top-_.lastHandleRect.top;D+=E}}_.lastHandleRect=O,F==="w"&&(A=-A),N==="n"&&(D=-D);var z=_.props.width+(B?A/_.props.transformScale:0),q=_.props.height+($?D/_.props.transformScale:0),X=_.runConstraints(z,q);z=X[0],q=X[1];var H=z!==_.props.width||q!==_.props.height,K=typeof _.props[C]=="function"?_.props[C]:null,ee=C==="onResize"&&!H;K&&!ee&&(T.persist==null||T.persist(),K(T,{node:L,size:{width:z,height:q},handle:S})),C==="onResizeStop"&&_.resetData()}}},P.renderResizeHandle=function(C,S){var _=this.props.handle;if(!_)return e.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+C,ref:S});if(typeof _=="function")return _(C,S);var T=typeof _.type=="string",I=h({ref:S},T?{}:{handleAxis:C});return e.cloneElement(_,I)},P.render=function(){var C=this,S=this.props,_=S.children,T=S.className,I=S.draggableOpts;S.width,S.height,S.handle,S.handleSize,S.lockAspectRatio,S.axis,S.minConstraints,S.maxConstraints,S.onResize,S.onResizeStop,S.onResizeStart;var L=S.resizeHandles;S.transformScale;var A=c(S,i);return(0,n.cloneElement)(_,h(h({},A),{},{className:(T?T+" ":"")+"react-resizable",children:[].concat(_.props.children,L.map(function(D){var B,$=(B=C.handleRefs[D])!=null?B:C.handleRefs[D]=e.createRef();return e.createElement(t.DraggableCore,l({},I,{nodeRef:$,key:"resizableHandle-"+D,onStop:C.resizeHandler("onResizeStop",D),onStart:C.resizeHandler("onResizeStart",D),onDrag:C.resizeHandler("onResize",D)}),C.renderResizeHandle(D,$))}))}))},b}(e.Component);return Cc.default=p,p.propTypes=r.resizableProps,p.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},Cc}var Pc={},jP;function BH(){if(jP)return Pc;jP=1,Pc.__esModule=!0,Pc.default=void 0;var e=l(ei()),t=o(Yo()),n=o(j5()),r=$5(),i=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(b){return b&&b.__esModule?b:{default:b}}function s(b){if(typeof WeakMap!="function")return null;var P=new WeakMap,k=new WeakMap;return(s=function(S){return S?k:P})(b)}function l(b,P){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var k=s(P);if(k&&k.has(b))return k.get(b);var C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in b)if(_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)){var T=S?Object.getOwnPropertyDescriptor(b,_):null;T&&(T.get||T.set)?Object.defineProperty(C,_,T):C[_]=b[_]}return C.default=b,k&&k.set(b,C),C}function c(){return c=Object.assign?Object.assign.bind():function(b){for(var P=1;P<arguments.length;P++){var k=arguments[P];for(var C in k)Object.prototype.hasOwnProperty.call(k,C)&&(b[C]=k[C])}return b},c.apply(this,arguments)}function d(b,P){var k=Object.keys(b);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(b);P&&(C=C.filter(function(S){return Object.getOwnPropertyDescriptor(b,S).enumerable})),k.push.apply(k,C)}return k}function h(b){for(var P=1;P<arguments.length;P++){var k=arguments[P]!=null?arguments[P]:{};P%2?d(Object(k),!0).forEach(function(C){f(b,C,k[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(k)):d(Object(k)).forEach(function(C){Object.defineProperty(b,C,Object.getOwnPropertyDescriptor(k,C))})}return b}function f(b,P,k){return P=g(P),P in b?Object.defineProperty(b,P,{value:k,enumerable:!0,configurable:!0,writable:!0}):b[P]=k,b}function g(b){var P=w(b,"string");return typeof P=="symbol"?P:String(P)}function w(b,P){if(typeof b!="object"||b===null)return b;var k=b[Symbol.toPrimitive];if(k!==void 0){var C=k.call(b,P);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(b)}function x(b,P){if(b==null)return{};var k={},C=Object.keys(b),S,_;for(_=0;_<C.length;_++)S=C[_],!(P.indexOf(S)>=0)&&(k[S]=b[S]);return k}function y(b,P){b.prototype=Object.create(P.prototype),b.prototype.constructor=b,p(b,P)}function p(b,P){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,S){return C.__proto__=S,C},p(b,P)}var v=function(b){y(P,b);function P(){for(var C,S=arguments.length,_=new Array(S),T=0;T<S;T++)_[T]=arguments[T];return C=b.call.apply(b,[this].concat(_))||this,C.state={width:C.props.width,height:C.props.height,propsWidth:C.props.width,propsHeight:C.props.height},C.onResize=function(I,L){var A=L.size;C.props.onResize?(I.persist==null||I.persist(),C.setState(A,function(){return C.props.onResize&&C.props.onResize(I,L)})):C.setState(A)},C}P.getDerivedStateFromProps=function(S,_){return _.propsWidth!==S.width||_.propsHeight!==S.height?{width:S.width,height:S.height,propsWidth:S.width,propsHeight:S.height}:null};var k=P.prototype;return k.render=function(){var S=this.props,_=S.handle,T=S.handleSize;S.onResize;var I=S.onResizeStart,L=S.onResizeStop,A=S.draggableOpts,D=S.minConstraints,B=S.maxConstraints,$=S.lockAspectRatio,N=S.axis;S.width,S.height;var F=S.resizeHandles,O=S.style,R=S.transformScale,E=x(S,i);return e.createElement(n.default,{axis:N,draggableOpts:A,handle:_,handleSize:T,height:this.state.height,lockAspectRatio:$,maxConstraints:B,minConstraints:D,onResizeStart:I,onResize:this.onResize,onResizeStop:L,resizeHandles:F,transformScale:R,width:this.state.width},e.createElement("div",c({},E,{style:h(h({},O),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},P}(e.Component);return Pc.default=v,v.propTypes=h(h({},r.resizableProps),{},{children:t.default.element}),Pc}var FP;function HH(){return FP||(FP=1,wc.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},wc.exports.Resizable=j5().default,wc.exports.ResizableBox=BH().default),wc.exports}var Ui={},zP;function F5(){if(zP)return Ui;zP=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.resizeHandleType=Ui.resizeHandleAxesType=Ui.default=void 0;var e=n(Yo()),t=n(ei());function n(o){return o&&o.__esModule?o:{default:o}}const r=Ui.resizeHandleAxesType=e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),i=Ui.resizeHandleType=e.default.oneOfType([e.default.node,e.default.func]);return Ui.default={className:e.default.string,style:e.default.object,width:e.default.number,autoSize:e.default.bool,cols:e.default.number,draggableCancel:e.default.string,draggableHandle:e.default.string,verticalCompact:function(o){o.verticalCompact},compactType:e.default.oneOf(["vertical","horizontal"]),layout:function(o){var s=o.layout;s!==void 0&&Ql().validateLayout(s,"layout")},margin:e.default.arrayOf(e.default.number),containerPadding:e.default.arrayOf(e.default.number),rowHeight:e.default.number,maxRows:e.default.number,isBounded:e.default.bool,isDraggable:e.default.bool,isResizable:e.default.bool,allowOverlap:e.default.bool,preventCollision:e.default.bool,useCSSTransforms:e.default.bool,transformScale:e.default.number,isDroppable:e.default.bool,resizeHandles:r,resizeHandle:i,onLayoutChange:e.default.func,onDragStart:e.default.func,onDrag:e.default.func,onDragStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,onResizeStop:e.default.func,onDrop:e.default.func,droppingItem:e.default.shape({i:e.default.string.isRequired,w:e.default.number.isRequired,h:e.default.number.isRequired}),children:function(o,s){const l=o[s],c={};t.default.Children.forEach(l,function(d){if((d==null?void 0:d.key)!=null){if(c[d.key])throw new Error('Duplicate child key "'+d.key+'" found! This will cause problems in ReactGridLayout.');c[d.key]=!0}})},innerRef:e.default.any},Ui}var NP;function WH(){if(NP)return bc;NP=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=void 0;var e=d(ei()),t=sg(),n=d(Yo()),r=H1(),i=HH(),o=Ql(),s=N1(),l=F5(),c=d(bg());function d(x){return x&&x.__esModule?x:{default:x}}function h(x,y,p){return(y=f(y))in x?Object.defineProperty(x,y,{value:p,enumerable:!0,configurable:!0,writable:!0}):x[y]=p,x}function f(x){var y=g(x,"string");return typeof y=="symbol"?y:y+""}function g(x,y){if(typeof x!="object"||!x)return x;var p=x[Symbol.toPrimitive];if(p!==void 0){var v=p.call(x,y);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(x)}let w=class extends e.default.Component{constructor(){super(...arguments),h(this,"state",{resizing:null,dragging:null,className:""}),h(this,"elementRef",e.default.createRef()),h(this,"onDragStart",(y,p)=>{let{node:v}=p;const{onDragStart:b,transformScale:P}=this.props;if(!b)return;const k={top:0,left:0},{offsetParent:C}=v;if(!C)return;const S=C.getBoundingClientRect(),_=v.getBoundingClientRect(),T=_.left/P,I=S.left/P,L=_.top/P,A=S.top/P;k.left=T-I+C.scrollLeft,k.top=L-A+C.scrollTop,this.setState({dragging:k});const{x:D,y:B}=(0,s.calcXY)(this.getPositionParams(),k.top,k.left,this.props.w,this.props.h);return b.call(this,this.props.i,D,B,{e:y,node:v,newPosition:k})}),h(this,"onDrag",(y,p,v)=>{let{node:b,deltaX:P,deltaY:k}=p;const{onDrag:C}=this.props;if(!C)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let S=this.state.dragging.top+k,_=this.state.dragging.left+P;const{isBounded:T,i:I,w:L,h:A,containerWidth:D}=this.props,B=this.getPositionParams();if(T){const{offsetParent:O}=b;if(O){const{margin:R,rowHeight:E}=this.props,z=O.clientHeight-(0,s.calcGridItemWHPx)(A,E,R[1]);S=(0,s.clamp)(S,0,z);const q=(0,s.calcGridColWidth)(B),X=D-(0,s.calcGridItemWHPx)(L,q,R[0]);_=(0,s.clamp)(_,0,X)}}const $={top:S,left:_};v?this.setState({dragging:$}):(0,t.flushSync)(()=>{this.setState({dragging:$})});const{x:N,y:F}=(0,s.calcXY)(B,S,_,L,A);return C.call(this,I,N,F,{e:y,node:b,newPosition:$})}),h(this,"onDragStop",(y,p)=>{let{node:v}=p;const{onDragStop:b}=this.props;if(!b)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:P,h:k,i:C}=this.props,{left:S,top:_}=this.state.dragging,T={top:_,left:S};this.setState({dragging:null});const{x:I,y:L}=(0,s.calcXY)(this.getPositionParams(),_,S,P,k);return b.call(this,C,I,L,{e:y,node:v,newPosition:T})}),h(this,"onResizeStop",(y,p,v)=>this.onResizeHandler(y,p,v,"onResizeStop")),h(this,"onResizeStart",(y,p,v)=>this.onResizeHandler(y,p,v,"onResizeStart")),h(this,"onResize",(y,p,v)=>this.onResizeHandler(y,p,v,"onResize"))}shouldComponentUpdate(y,p){if(this.props.children!==y.children||this.props.droppingPosition!==y.droppingPosition)return!0;const v=(0,s.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),b=(0,s.calcGridItemPosition)(this.getPositionParams(y),y.x,y.y,y.w,y.h,p);return!(0,o.fastPositionEqual)(v,b)||this.props.useCSSTransforms!==y.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(y){this.moveDroppingItem(y)}moveDroppingItem(y){const{droppingPosition:p}=this.props;if(!p)return;const v=this.elementRef.current;if(!v)return;const b=y.droppingPosition||{left:0,top:0},{dragging:P}=this.state,k=P&&p.left!==b.left||p.top!==b.top;if(!P)this.onDragStart(p.e,{node:v,deltaX:p.left,deltaY:p.top});else if(k){const C=p.left-P.left,S=p.top-P.top;this.onDrag(p.e,{node:v,deltaX:C,deltaY:S},!0)}}getPositionParams(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:y.cols,containerPadding:y.containerPadding,containerWidth:y.containerWidth,margin:y.margin,maxRows:y.maxRows,rowHeight:y.rowHeight}}createStyle(y){const{usePercentages:p,containerWidth:v,useCSSTransforms:b}=this.props;let P;return b?P=(0,o.setTransform)(y):(P=(0,o.setTopLeft)(y),p&&(P.left=(0,o.perc)(y.left/v),P.width=(0,o.perc)(y.width/v))),P}mixinDraggable(y,p){return e.default.createElement(r.DraggableCore,{disabled:!p,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},y)}curryResizeHandler(y,p){return(v,b)=>p(v,b,y)}mixinResizable(y,p,v){const{cols:b,minW:P,minH:k,maxW:C,maxH:S,transformScale:_,resizeHandles:T,resizeHandle:I}=this.props,L=this.getPositionParams(),A=(0,s.calcGridItemPosition)(L,0,0,b,0).width,D=(0,s.calcGridItemPosition)(L,0,0,P,k),B=(0,s.calcGridItemPosition)(L,0,0,C,S),$=[D.width,D.height],N=[Math.min(B.width,A),Math.min(B.height,1/0)];return e.default.createElement(i.Resizable,{draggableOpts:{disabled:!v},className:v?void 0:"react-resizable-hide",width:p.width,height:p.height,minConstraints:$,maxConstraints:N,onResizeStop:this.curryResizeHandler(p,this.onResizeStop),onResizeStart:this.curryResizeHandler(p,this.onResizeStart),onResize:this.curryResizeHandler(p,this.onResize),transformScale:_,resizeHandles:T,handle:I},y)}onResizeHandler(y,p,v,b){let{node:P,size:k,handle:C}=p;const S=this.props[b];if(!S)return;const{x:_,y:T,i:I,maxH:L,minH:A,containerWidth:D}=this.props,{minW:B,maxW:$}=this.props;let N=k;P&&(N=(0,o.resizeItemInDirection)(C,v,k,D),(0,t.flushSync)(()=>{this.setState({resizing:b==="onResizeStop"?null:N})}));let{w:F,h:O}=(0,s.calcWH)(this.getPositionParams(),N.width,N.height,_,T,C);F=(0,s.clamp)(F,Math.max(B,1),$),O=(0,s.clamp)(O,A,L),S.call(this,I,F,O,{e:y,node:P,size:N,handle:C})}render(){const{x:y,y:p,w:v,h:b,isDraggable:P,isResizable:k,droppingPosition:C,useCSSTransforms:S}=this.props,_=(0,s.calcGridItemPosition)(this.getPositionParams(),y,p,v,b,this.state),T=e.default.Children.only(this.props.children);let I=e.default.cloneElement(T,{ref:this.elementRef,className:(0,c.default)("react-grid-item",T.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":P,"react-draggable-dragging":!!this.state.dragging,dropping:!!C,cssTransforms:S}),style:{...this.props.style,...T.props.style,...this.createStyle(_)}});return I=this.mixinResizable(I,_,k),I=this.mixinDraggable(I,P),I}};return bc.default=w,h(w,"propTypes",{children:n.default.element,cols:n.default.number.isRequired,containerWidth:n.default.number.isRequired,rowHeight:n.default.number.isRequired,margin:n.default.array.isRequired,maxRows:n.default.number.isRequired,containerPadding:n.default.array.isRequired,x:n.default.number.isRequired,y:n.default.number.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired,minW:function(x,y){const p=x[y];if(typeof p!="number")return new Error("minWidth not Number");if(p>x.w||p>x.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(x,y){const p=x[y];if(typeof p!="number")return new Error("maxWidth not Number");if(p<x.w||p<x.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(x,y){const p=x[y];if(typeof p!="number")return new Error("minHeight not Number");if(p>x.h||p>x.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(x,y){const p=x[y];if(typeof p!="number")return new Error("maxHeight not Number");if(p<x.h||p<x.minH)return new Error("maxHeight smaller than item height/minHeight")},i:n.default.string.isRequired,resizeHandles:l.resizeHandleAxesType,resizeHandle:l.resizeHandleType,onDragStop:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onResizeStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,isDraggable:n.default.bool.isRequired,isResizable:n.default.bool.isRequired,isBounded:n.default.bool.isRequired,static:n.default.bool,useCSSTransforms:n.default.bool.isRequired,transformScale:n.default.number,className:n.default.string,handle:n.default.string,cancel:n.default.string,droppingPosition:n.default.shape({e:n.default.object.isRequired,left:n.default.number.isRequired,top:n.default.number.isRequired})}),h(w,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),bc}var BP;function z5(){if(BP)return yc;BP=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.default=void 0;var e=c(ei()),t=z1(),n=l(bg()),r=Ql(),i=N1(),o=l(WH()),s=l(F5());function l(y){return y&&y.__esModule?y:{default:y}}function c(y,p){if(typeof WeakMap=="function")var v=new WeakMap,b=new WeakMap;return(c=function(P,k){if(!k&&P&&P.__esModule)return P;var C,S,_={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return _;if(C=k?b:v){if(C.has(P))return C.get(P);C.set(P,_)}for(const T in P)T!=="default"&&{}.hasOwnProperty.call(P,T)&&((S=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,T))&&(S.get||S.set)?C(_,T,S):_[T]=P[T]);return _})(y,p)}function d(y,p,v){return(p=h(p))in y?Object.defineProperty(y,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[p]=v,y}function h(y){var p=f(y,"string");return typeof p=="symbol"?p:p+""}function f(y,p){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var b=v.call(y,p);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(y)}const g="react-grid-layout";let w=!1;try{w=/firefox/i.test(navigator.userAgent)}catch{}let x=class extends e.Component{constructor(){super(...arguments),d(this,"state",{activeDrag:null,layout:(0,r.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,r.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),d(this,"dragEnterCounter",0),d(this,"onDragStart",(p,v,b,P)=>{let{e:k,node:C}=P;const{layout:S}=this.state,_=(0,r.getLayoutItem)(S,p);if(!_)return;const T={w:_.w,h:_.h,x:_.x,y:_.y,placeholder:!0,i:p};return this.setState({oldDragItem:(0,r.cloneLayoutItem)(_),oldLayout:S,activeDrag:T}),this.props.onDragStart(S,_,_,null,k,C)}),d(this,"onDrag",(p,v,b,P)=>{let{e:k,node:C}=P;const{oldDragItem:S}=this.state;let{layout:_}=this.state;const{cols:T,allowOverlap:I,preventCollision:L}=this.props,A=(0,r.getLayoutItem)(_,p);if(!A)return;const D={w:A.w,h:A.h,x:A.x,y:A.y,placeholder:!0,i:p};_=(0,r.moveElement)(_,A,v,b,!0,L,(0,r.compactType)(this.props),T,I),this.props.onDrag(_,S,A,D,k,C),this.setState({layout:I?_:(0,r.compact)(_,(0,r.compactType)(this.props),T),activeDrag:D})}),d(this,"onDragStop",(p,v,b,P)=>{let{e:k,node:C}=P;if(!this.state.activeDrag)return;const{oldDragItem:S}=this.state;let{layout:_}=this.state;const{cols:T,preventCollision:I,allowOverlap:L}=this.props,A=(0,r.getLayoutItem)(_,p);if(!A)return;_=(0,r.moveElement)(_,A,v,b,!0,I,(0,r.compactType)(this.props),T,L);const B=L?_:(0,r.compact)(_,(0,r.compactType)(this.props),T);this.props.onDragStop(B,S,A,null,k,C);const{oldLayout:$}=this.state;this.setState({activeDrag:null,layout:B,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(B,$)}),d(this,"onResizeStart",(p,v,b,P)=>{let{e:k,node:C}=P;const{layout:S}=this.state,_=(0,r.getLayoutItem)(S,p);_&&(this.setState({oldResizeItem:(0,r.cloneLayoutItem)(_),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(S,_,_,null,k,C))}),d(this,"onResize",(p,v,b,P)=>{let{e:k,node:C,size:S,handle:_}=P;const{oldResizeItem:T}=this.state,{layout:I}=this.state,{cols:L,preventCollision:A,allowOverlap:D}=this.props;let B=!1,$,N,F;const[O,R]=(0,r.withLayoutItem)(I,p,z=>{let q;return N=z.x,F=z.y,["sw","w","nw","n","ne"].indexOf(_)!==-1&&(["sw","nw","w"].indexOf(_)!==-1&&(N=z.x+(z.w-v),v=z.x!==N&&N<0?z.w:v,N=N<0?0:N),["ne","n","nw"].indexOf(_)!==-1&&(F=z.y+(z.h-b),b=z.y!==F&&F<0?z.h:b,F=F<0?0:F),B=!0),A&&!D&&(q=(0,r.getAllCollisions)(I,{...z,w:v,h:b,x:N,y:F}).filter(H=>H.i!==z.i).length>0,q&&(F=z.y,b=z.h,N=z.x,v=z.w,B=!1)),z.w=v,z.h=b,z});if(!R)return;$=O,B&&($=(0,r.moveElement)(O,R,N,F,!0,this.props.preventCollision,(0,r.compactType)(this.props),L,D));const E={w:R.w,h:R.h,x:R.x,y:R.y,static:!0,i:p};this.props.onResize($,T,R,E,k,C),this.setState({layout:D?$:(0,r.compact)($,(0,r.compactType)(this.props),L),activeDrag:E})}),d(this,"onResizeStop",(p,v,b,P)=>{let{e:k,node:C}=P;const{layout:S,oldResizeItem:_}=this.state,{cols:T,allowOverlap:I}=this.props,L=(0,r.getLayoutItem)(S,p),A=I?S:(0,r.compact)(S,(0,r.compactType)(this.props),T);this.props.onResizeStop(A,_,L,null,k,C);const{oldLayout:D}=this.state;this.setState({activeDrag:null,layout:A,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(A,D)}),d(this,"onDragOver",p=>{var O;if(p.preventDefault(),p.stopPropagation(),w&&!((O=p.nativeEvent.target)!=null&&O.classList.contains(g)))return!1;const{droppingItem:v,onDropDragOver:b,margin:P,cols:k,rowHeight:C,maxRows:S,width:_,containerPadding:T,transformScale:I}=this.props,L=b==null?void 0:b(p);if(L===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const A={...v,...L},{layout:D}=this.state,B=p.currentTarget.getBoundingClientRect(),$=p.clientX-B.left,N=p.clientY-B.top,F={left:$/I,top:N/I,e:p};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:R,top:E}=this.state.droppingPosition;(R!=$||E!=N)&&this.setState({droppingPosition:F})}}else{const R={cols:k,margin:P,maxRows:S,rowHeight:C,containerWidth:_,containerPadding:T||P},E=(0,i.calcXY)(R,N,$,A.w,A.h);this.setState({droppingDOMNode:e.createElement("div",{key:A.i}),droppingPosition:F,layout:[...D,{...A,x:E.x,y:E.y,static:!1,isDraggable:!0}]})}}),d(this,"removeDroppingPlaceholder",()=>{const{droppingItem:p,cols:v}=this.props,{layout:b}=this.state,P=(0,r.compact)(b.filter(k=>k.i!==p.i),(0,r.compactType)(this.props),v,this.props.allowOverlap);this.setState({layout:P,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),d(this,"onDragLeave",p=>{p.preventDefault(),p.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),d(this,"onDragEnter",p=>{p.preventDefault(),p.stopPropagation(),this.dragEnterCounter++}),d(this,"onDrop",p=>{p.preventDefault(),p.stopPropagation();const{droppingItem:v}=this.props,{layout:b}=this.state,P=b.find(k=>k.i===v.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(b,P,p)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(p,v){let b;return v.activeDrag?null:(!(0,t.deepEqual)(p.layout,v.propsLayout)||p.compactType!==v.compactType?b=p.layout:(0,r.childrenEqual)(p.children,v.children)||(b=v.layout),b?{layout:(0,r.synchronizeLayoutWithChildren)(b,p.children,p.cols,(0,r.compactType)(p),p.allowOverlap),compactType:p.compactType,children:p.children,propsLayout:p.layout}:null)}shouldComponentUpdate(p,v){return this.props.children!==p.children||!(0,r.fastRGLPropsEqual)(this.props,p,t.deepEqual)||this.state.activeDrag!==v.activeDrag||this.state.mounted!==v.mounted||this.state.droppingPosition!==v.droppingPosition}componentDidUpdate(p,v){if(!this.state.activeDrag){const b=this.state.layout,P=v.layout;this.onLayoutMaybeChanged(b,P)}}containerHeight(){if(!this.props.autoSize)return;const p=(0,r.bottom)(this.state.layout),v=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return p*this.props.rowHeight+(p-1)*this.props.margin[1]+v*2+"px"}onLayoutMaybeChanged(p,v){v||(v=this.state.layout),(0,t.deepEqual)(v,p)||this.props.onLayoutChange(p)}placeholder(){const{activeDrag:p}=this.state;if(!p)return null;const{width:v,cols:b,margin:P,containerPadding:k,rowHeight:C,maxRows:S,useCSSTransforms:_,transformScale:T}=this.props;return e.createElement(o.default,{w:p.w,h:p.h,x:p.x,y:p.y,i:p.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:v,cols:b,margin:P,containerPadding:k||P,maxRows:S,rowHeight:C,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:_,transformScale:T},e.createElement("div",null))}processGridItem(p,v){if(!p||!p.key)return;const b=(0,r.getLayoutItem)(this.state.layout,String(p.key));if(!b)return null;const{width:P,cols:k,margin:C,containerPadding:S,rowHeight:_,maxRows:T,isDraggable:I,isResizable:L,isBounded:A,useCSSTransforms:D,transformScale:B,draggableCancel:$,draggableHandle:N,resizeHandles:F,resizeHandle:O}=this.props,{mounted:R,droppingPosition:E}=this.state,z=typeof b.isDraggable=="boolean"?b.isDraggable:!b.static&&I,q=typeof b.isResizable=="boolean"?b.isResizable:!b.static&&L,X=b.resizeHandles||F,H=z&&A&&b.isBounded!==!1;return e.createElement(o.default,{containerWidth:P,cols:k,margin:C,containerPadding:S||C,maxRows:T,rowHeight:_,cancel:$,handle:N,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:z,isResizable:q,isBounded:H,useCSSTransforms:D&&R,usePercentages:!R,transformScale:B,w:b.w,h:b.h,x:b.x,y:b.y,i:b.i,minH:b.minH,minW:b.minW,maxH:b.maxH,maxW:b.maxW,static:b.static,droppingPosition:v?E:void 0,resizeHandles:X,resizeHandle:O},p)}render(){const{className:p,style:v,isDroppable:b,innerRef:P}=this.props,k=(0,n.default)(g,p),C={height:this.containerHeight(),...v};return e.createElement("div",{ref:P,className:k,style:C,onDrop:b?this.onDrop:r.noop,onDragLeave:b?this.onDragLeave:r.noop,onDragEnter:b?this.onDragEnter:r.noop,onDragOver:b?this.onDragOver:r.noop},e.Children.map(this.props.children,S=>this.processGridItem(S)),b&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}};return yc.default=x,d(x,"displayName","ReactGridLayout"),d(x,"propTypes",s.default),d(x,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:r.noop,onDragStart:r.noop,onDrag:r.noop,onDragStop:r.noop,onResizeStart:r.noop,onResize:r.noop,onResizeStop:r.noop,onDrop:r.noop,onDropDragOver:r.noop}),yc}var kc={},rs={},HP;function N5(){if(HP)return rs;HP=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.findOrGenerateResponsiveLayout=r,rs.getBreakpointFromWidth=t,rs.getColsFromBreakpoint=n,rs.sortBreakpoints=i;var e=Ql();function t(o,s){const l=i(o);let c=l[0];for(let d=1,h=l.length;d<h;d++){const f=l[d];s>o[f]&&(c=f)}return c}function n(o,s){if(!s[o])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+o+" is missing!");return s[o]}function r(o,s,l,c,d,h){if(o[l])return(0,e.cloneLayout)(o[l]);let f=o[c];const g=i(s),w=g.slice(g.indexOf(l));for(let x=0,y=w.length;x<y;x++){const p=w[x];if(o[p]){f=o[p];break}}return f=(0,e.cloneLayout)(f||[]),(0,e.compact)((0,e.correctBounds)(f,{cols:d}),h,d)}function i(o){return Object.keys(o).sort(function(l,c){return o[l]-o[c]})}return rs}var WP;function qH(){if(WP)return kc;WP=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.default=void 0;var e=l(ei()),t=s(Yo()),n=z1(),r=Ql(),i=N5(),o=s(z5());function s(y){return y&&y.__esModule?y:{default:y}}function l(y,p){if(typeof WeakMap=="function")var v=new WeakMap,b=new WeakMap;return(l=function(P,k){if(!k&&P&&P.__esModule)return P;var C,S,_={__proto__:null,default:P};if(P===null||typeof P!="object"&&typeof P!="function")return _;if(C=k?b:v){if(C.has(P))return C.get(P);C.set(P,_)}for(const T in P)T!=="default"&&{}.hasOwnProperty.call(P,T)&&((S=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(P,T))&&(S.get||S.set)?C(_,T,S):_[T]=P[T]);return _})(y,p)}function c(){return c=Object.assign?Object.assign.bind():function(y){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var b in v)({}).hasOwnProperty.call(v,b)&&(y[b]=v[b])}return y},c.apply(null,arguments)}function d(y,p,v){return(p=h(p))in y?Object.defineProperty(y,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[p]=v,y}function h(y){var p=f(y,"string");return typeof p=="symbol"?p:p+""}function f(y,p){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var b=v.call(y,p);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(y)}const g=y=>Object.prototype.toString.call(y);function w(y,p){return y==null?null:Array.isArray(y)?y:y[p]}let x=class extends e.Component{constructor(){super(...arguments),d(this,"state",this.generateInitialState()),d(this,"onLayoutChange",p=>{this.props.onLayoutChange(p,{...this.props.layouts,[this.state.breakpoint]:p})})}generateInitialState(){const{width:p,breakpoints:v,layouts:b,cols:P}=this.props,k=(0,i.getBreakpointFromWidth)(v,p),C=(0,i.getColsFromBreakpoint)(k,P),S=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,i.findOrGenerateResponsiveLayout)(b,v,k,k,C,S),breakpoint:k,cols:C}}static getDerivedStateFromProps(p,v){if(!(0,n.deepEqual)(p.layouts,v.layouts)){const{breakpoint:b,cols:P}=v;return{layout:(0,i.findOrGenerateResponsiveLayout)(p.layouts,p.breakpoints,b,b,P,p.compactType),layouts:p.layouts}}return null}componentDidUpdate(p){(this.props.width!=p.width||this.props.breakpoint!==p.breakpoint||!(0,n.deepEqual)(this.props.breakpoints,p.breakpoints)||!(0,n.deepEqual)(this.props.cols,p.cols))&&this.onWidthChange(p)}onWidthChange(p){const{breakpoints:v,cols:b,layouts:P,compactType:k}=this.props,C=this.props.breakpoint||(0,i.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),S=this.state.breakpoint,_=(0,i.getColsFromBreakpoint)(C,b),T={...P};if(S!==C||p.breakpoints!==v||p.cols!==b){S in T||(T[S]=(0,r.cloneLayout)(this.state.layout));let A=(0,i.findOrGenerateResponsiveLayout)(T,v,C,S,_,k);A=(0,r.synchronizeLayoutWithChildren)(A,this.props.children,_,k,this.props.allowOverlap),T[C]=A,this.props.onBreakpointChange(C,_),this.props.onLayoutChange(A,T),this.setState({breakpoint:C,layout:A,cols:_})}const I=w(this.props.margin,C),L=w(this.props.containerPadding,C);this.props.onWidthChange(this.props.width,I,_,L)}render(){const{breakpoint:p,breakpoints:v,cols:b,layouts:P,margin:k,containerPadding:C,onBreakpointChange:S,onLayoutChange:_,onWidthChange:T,...I}=this.props;return e.createElement(o.default,c({},I,{margin:w(k,this.state.breakpoint),containerPadding:w(C,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}};return kc.default=x,d(x,"propTypes",{breakpoint:t.default.string,breakpoints:t.default.object,allowOverlap:t.default.bool,cols:t.default.object,margin:t.default.oneOfType([t.default.array,t.default.object]),containerPadding:t.default.oneOfType([t.default.array,t.default.object]),layouts(y,p){if(g(y[p])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+g(y[p]));Object.keys(y[p]).forEach(v=>{if(!(v in y.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,r.validateLayout)(y.layouts[v],"layouts."+v)})},width:t.default.number.isRequired,onBreakpointChange:t.default.func,onLayoutChange:t.default.func,onWidthChange:t.default.func}),d(x,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:r.noop,onLayoutChange:r.noop,onWidthChange:r.noop}),kc}var Kh={},B5=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var s=o[i];n.call(r,s[1],s[0])}},t}()}(),Ox=typeof window<"u"&&typeof document<"u"&&window.document===document,rp=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),UH=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(rp):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),VH=2;function GH(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function s(){UH(o)}function l(){var c=Date.now();if(n){if(c-i<VH)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=c}return l}var KH=20,YH=["top","right","bottom","left","width","height","size","weight"],XH=typeof MutationObserver<"u",JH=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=GH(this.refresh.bind(this),KH)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Ox||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),XH?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Ox||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=YH.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),H5=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},kl=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||rp},W5=xg(0,0,0,0);function ap(e){return parseFloat(e)||0}function qP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var o=e["border-"+i+"-width"];return r+ap(o)},0)}function QH(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],s=e["padding-"+o];n[o]=ap(s)}return n}function ZH(e){var t=e.getBBox();return xg(0,0,t.width,t.height)}function eW(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return W5;var r=kl(e).getComputedStyle(e),i=QH(r),o=i.left+i.right,s=i.top+i.bottom,l=ap(r.width),c=ap(r.height);if(r.boxSizing==="border-box"&&(Math.round(l+o)!==t&&(l-=qP(r,"left","right")+o),Math.round(c+s)!==n&&(c-=qP(r,"top","bottom")+s)),!nW(e)){var d=Math.round(l+o)-t,h=Math.round(c+s)-n;Math.abs(d)!==1&&(l-=d),Math.abs(h)!==1&&(c-=h)}return xg(i.left,i.top,l,c)}var tW=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof kl(e).SVGGraphicsElement}:function(e){return e instanceof kl(e).SVGElement&&typeof e.getBBox=="function"}}();function nW(e){return e===kl(e).document.documentElement}function rW(e){return Ox?tW(e)?ZH(e):eW(e):W5}function aW(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return H5(s,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),s}function xg(e,t,n,r){return{x:e,y:t,width:n,height:r}}var iW=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=xg(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=rW(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),oW=function(){function e(t,n){var r=aW(n);H5(this,{target:t,contentRect:r})}return e}(),sW=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new B5,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof kl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new iW(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof kl(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new oW(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),q5=typeof WeakMap<"u"?new WeakMap:new B5,U5=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=JH.getInstance(),r=new sW(t,n,this);q5.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){U5.prototype[e]=function(){var t;return(t=q5.get(this))[e].apply(t,arguments)}});var lW=function(){return typeof rp.ResizeObserver<"u"?rp.ResizeObserver:U5}();const cW=Object.freeze(Object.defineProperty({__proto__:null,default:lW},Symbol.toStringTag,{value:"Module"})),uW=yE(cW);var UP;function dW(){if(UP)return Kh;UP=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.default=f;var e=o(ei()),t=i(Yo()),n=i(uW),r=i(bg());function i(g){return g&&g.__esModule?g:{default:g}}function o(g,w){if(typeof WeakMap=="function")var x=new WeakMap,y=new WeakMap;return(o=function(p,v){if(!v&&p&&p.__esModule)return p;var b,P,k={__proto__:null,default:p};if(p===null||typeof p!="object"&&typeof p!="function")return k;if(b=v?y:x){if(b.has(p))return b.get(p);b.set(p,k)}for(const C in p)C!=="default"&&{}.hasOwnProperty.call(p,C)&&((P=(b=Object.defineProperty)&&Object.getOwnPropertyDescriptor(p,C))&&(P.get||P.set)?b(k,C,P):k[C]=p[C]);return k})(g,w)}function s(){return s=Object.assign?Object.assign.bind():function(g){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var y in x)({}).hasOwnProperty.call(x,y)&&(g[y]=x[y])}return g},s.apply(null,arguments)}function l(g,w,x){return(w=c(w))in g?Object.defineProperty(g,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[w]=x,g}function c(g){var w=d(g,"string");return typeof w=="symbol"?w:w+""}function d(g,w){if(typeof g!="object"||!g)return g;var x=g[Symbol.toPrimitive];if(x!==void 0){var y=x.call(g,w);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(g)}const h="react-grid-layout";function f(g){var w;return w=class extends e.Component{constructor(){super(...arguments),l(this,"state",{width:1280}),l(this,"elementRef",e.createRef()),l(this,"mounted",!1),l(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new n.default(p=>{if(this.elementRef.current instanceof HTMLElement){const b=p[0].contentRect.width;this.setState({width:b})}});const y=this.elementRef.current;y instanceof HTMLElement&&this.resizeObserver.observe(y)}componentWillUnmount(){this.mounted=!1;const y=this.elementRef.current;y instanceof HTMLElement&&this.resizeObserver.unobserve(y),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:y,...p}=this.props;return y&&!this.mounted?e.createElement("div",{className:(0,r.default)(this.props.className,h),style:this.props.style,ref:this.elementRef}):e.createElement(g,s({innerRef:this.elementRef},p,this.state))}},l(w,"defaultProps",{measureBeforeMount:!1}),l(w,"propTypes",{measureBeforeMount:t.default.bool}),w}return Kh}var VP;function hW(){return VP||(VP=1,function(e){e.exports=z5().default,e.exports.utils=Ql(),e.exports.calculateUtils=N1(),e.exports.Responsive=qH().default,e.exports.Responsive.utils=N5(),e.exports.WidthProvider=dW().default}(jm)),jm.exports}var ip=hW(),_c={},Nm={};const fW=yE(fF);var GP;function un(){return GP||(GP=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=fW}(Nm)),Nm}var KP;function pW(){if(KP)return _c;KP=1;var e=ln();Object.defineProperty(_c,"__esModule",{value:!0}),_c.default=void 0;var t=e(un()),n=cn();return _c.default=(0,t.default)((0,n.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),_c}var gW=pW();const If=vt(gW);var Tc={},YP;function mW(){if(YP)return Tc;YP=1;var e=ln();Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.default=void 0;var t=e(un()),n=cn();return Tc.default=(0,t.default)((0,n.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),Tc}var yW=mW();const Of=vt(yW);var Ic={},XP;function bW(){if(XP)return Ic;XP=1;var e=ln();Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.default=void 0;var t=e(un()),n=cn();return Ic.default=(0,t.default)((0,n.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator"),Ic}var vW=bW();const Yh=vt(vW);var Oc={},JP;function xW(){if(JP)return Oc;JP=1;var e=ln();Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.default=void 0;var t=e(un()),n=cn();return Oc.default=(0,t.default)((0,n.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined"),Oc}var wW=xW();const CW=vt(wW),SW={MoneyIcon:dd,PaidIcon:SF,TrendingUpIcon:nx,CallReceivedIcon:CF,CallMadeIcon:wF,AccountBalanceWalletIcon:xF,AutorenewIcon:vF,ShowChartIcon:bF,PercentIcon:yF,AccountBalanceIcon:so,PeopleIcon:p1,PersonAddIcon:JR,ShoppingCartIcon:mF,InventoryIcon:gF,CreditCardIcon:ig,LocalAtmIcon:pF},QP={blue:{light:"#E1F0FF",main:"#3699FF",dark:"#187DE4",contrastText:"#FFFFFF"},green:{light:"#E8FFF3",main:"#50CD89",dark:"#47BE7D",contrastText:"#FFFFFF"},red:{light:"#FFF5F8",main:"#F1416C",dark:"#D9214E",contrastText:"#FFFFFF"},amber:{light:"#FFF8DD",main:"#FFC700",dark:"#F1BC00",contrastText:"#FFFFFF"},purple:{light:"#F8F5FF",main:"#7239EA",dark:"#5014D0",contrastText:"#FFFFFF"},orange:{light:"#FFF5F3",main:"#FF6B35",dark:"#E94913",contrastText:"#FFFFFF"},teal:{light:"#E6FFFA",main:"#20D9AC",dark:"#0BB69F",contrastText:"#FFFFFF"},indigo:{light:"#EEF6FF",main:"#5014D0",dark:"#4610C0",contrastText:"#FFFFFF"}},PW=({id:e,title:t,value:n,previousValue:r,icon:i,color:o,type:s,userType:l,info:c,loading:d=!1,className:h="",draggableProps:f={},dragHandleProps:g={}})=>{const x=(()=>{if(!r||r===0||!n)return{value:0,isIncrease:!0};const S=n-r,_=S/Math.abs(r)*100;return{value:Math.abs(_).toFixed(1),isIncrease:S>=0}})(),y=S=>S==null?"0":S.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),p=()=>{const S=SW[i]||dd;return a(S,{})},b=QP[o]||QP.blue,P=On(),k=Di("(min-width:700px)"),C=Di(P.breakpoints.down("sm"));return m(j,{className:`stats-card-root ${h} stats-card-${o} stats-card-${s||l||"default"}`,sx:{position:"relative"},...f,children:[m(j,{className:"stats-card-header stats-card-drag-handle",sx:{display:"flex",flexDirection:"column",width:"100%",mb:0,padding:"16px",overflow:"hidden",cursor:k?"move":"default","&:active":{cursor:k?"grabbing":"default"}},...g,children:[m(j,{sx:{display:"flex",alignItems:"center",width:"100%",mb:1.5},children:[a(j,{className:"stats-card-icon",sx:{width:C?"28px":"32px",height:C?"28px":"32px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:b.light,color:b.main,borderRadius:"8px"},children:p()}),m(j,{sx:{ml:1.5,display:"flex",alignItems:"center"},children:[a(M,{variant:"body2",className:"stats-card-title",sx:{color:"#a1a5b7",fontSize:C?"11px":"12px",fontWeight:500,lineHeight:1.3},children:t}),c&&a(Fn,{title:c,arrow:!0,placement:"top",children:a(CW,{sx:{ml:.5,fontSize:C?"10px":"12px",color:"#a1a5b7"}})})]})]}),m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[a(M,{variant:"h5",className:"stats-card-value",sx:{fontSize:C?"16px":"20px",fontWeight:600,color:"#000000",lineHeight:1.2,marginTop:1,marginBottom:.5,paddingRight:1,paddingLeft:1},children:d?a(ud,{width:"80px"}):y(n)}),!d&&r!==void 0&&m(j,{sx:{display:"flex",alignItems:"center",backgroundColor:x.isIncrease?"rgba(80, 205, 137, 0.1)":"rgba(241, 65, 108, 0.1)",borderRadius:"4px",py:.3,px:.8,height:"fit-content"},children:[x.isIncrease?a(If,{sx:{fontSize:"14px",mr:.3}}):a(Of,{sx:{fontSize:"14px",mr:.3}}),m(M,{variant:"caption",sx:{fontWeight:600,fontSize:"11px",color:x.isIncrease?"#50cd89":"#f1416c"},children:[x.value,"%"]})]})]})]}),d&&a(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"40px",mt:1},children:a(ir,{size:24})})]})},yo=({autoInitialize:e=!1,enableRealtime:t=!0}={})=>{const{agentLevelService:n,isInitialized:r,isConnecting:i,agentLevels:o,types:s,typeHierarchy:l}=ni(),[c,d]=u.useState(!r),[h,f]=u.useState(null);return u.useEffect(()=>{d(!r||i),r&&(o==null?void 0:o.length)>0&&f(null)},[r,i,o]),n&&!n.getRawData&&(n.getRawData=()=>o||[]),{isLoading:c,error:h,isInitialized:r,rawData:o||[],agentLevels:o||[],types:s||{},typeHierarchy:l||{},isServiceInitialized:r,isServiceConnecting:i,getAgentLevelByTypeId:g=>{const w=s==null?void 0:s[g];return w&&(o==null?void 0:o.find(x=>x.id===w.id))||null},refresh:()=>{n&&n.requestInitialData()},getTypeById:g=>{var w;return((w=Object.entries(s||{}).find(([,x])=>x.id===g))==null?void 0:w[1])||null}}},kW=({buttonVariant:e="icon",containerRef:t})=>{const n=Kr(),r=zn(ZE),i=zn(e5),[o,s]=u.useState(0),[l,c]=u.useState("100%"),{agentLevels:d,isLoading:h}=yo(),[f,g]=u.useState(null),w=!!f;u.useEffect(()=>{if(t&&t.current&&w){const S=t.current.offsetWidth;c(`${S}px`)}},[t,w]);const x=S=>{const{name:_,checked:T}=S.target;n(_B({cardId:_,visible:T}))},y=S=>{const{name:_,checked:T}=S.target;n(TB({itemId:_,visible:T}))},p=S=>{if(g(S.currentTarget),t&&t.current){const _=t.current.offsetWidth;c(`${_}px`)}},v=()=>{g(null)},b=()=>{for(let S=0;S<localStorage.length;S++){const _=localStorage.key(S);_&&(_.startsWith("rgl-")||_.includes("Layout"))&&localStorage.removeItem(_)}n(JE()),n(QE()),v(),window.location.reload()};u.useMemo(()=>!d||d.length===0?[]:d.sort((S,_)=>S.level-_.level).map(S=>({id:S.id,typeKey:`level_${S.id}`,name:S.name,displayName:S.name.replace(/[0-9]+$/,"")||S.name})),[d]);const P=u.useMemo(()=>{const S={};return d&&d.length>0&&d.forEach(_=>{const T=`agent_level_${_.id}`;S[T]=r.filter(I=>I.type===T)}),S},[r,d]);Ce.useMemo(()=>{const S=r.filter(T=>!T.visible).length,_=i.filter(T=>!T.visible).length;return S+_},[r,i]);const k=u.useMemo(()=>{const S=[];return d&&d.length>0?d.sort((_,T)=>_.level-T.level).forEach(_=>{const T=`agent_level_${_.id}`;S.push({type:T,label:_.name||_.levelType,cards:P[T]||[]})}):h?S.push({type:"loading",label:"로딩 중...",cards:[]}):S.push({type:"empty",label:"데이터 없음",cards:[]}),S.push({type:"dashboard",label:"대시보드",cards:i}),S},[d,h,P,i]);return m(j,{children:[e==="icon"?a(Fn,{title:"표시 옵션",children:a(Ct,{onClick:p,size:"small",color:"primary",sx:{ml:1,zIndex:20},children:a(fS,{})})}):a(Se,{variant:"outlined",color:"primary",startIcon:a(fS,{}),onClick:p,sx:{borderRadius:"6px",whiteSpace:"nowrap",minWidth:{xs:"100px",sm:"auto"},flex:{xs:"1 1 auto",sm:"0 0 auto"}},children:"표시 옵션"}),a(vi,{anchorEl:f,open:w,onClose:v,PaperProps:{sx:{width:l,maxWidth:l,maxHeight:"80vh",zIndex:1400}},sx:{zIndex:1400},MenuListProps:{sx:{width:"100%"}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:a(Me,{sx:{display:"block",p:0},children:m(j,{sx:{p:2},children:[a(M,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"표시 옵션"}),a(yn,{sx:{mb:2}}),a(La,{value:o,onChange:(S,_)=>{s(_)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",sx:{minHeight:40,mb:2},children:k.map((S,_)=>a(_n,{label:h?"로딩 중...":S.label,sx:{minHeight:40,py:0},disabled:h},S.type))}),a(j,{sx:{mb:2,minHeight:"200px"},children:k.map((S,_)=>{if(o!==_)return null;const T=S.type==="dashboard"?y:x;return m(W,{container:!0,spacing:1,children:[S.cards.map(I=>a(W,{item:!0,xs:6,children:a(Lt,{control:a(gr,{checked:I.visible,onChange:T,name:I.id,size:"small"}),label:I.title})},I.id)),S.cards.length===0&&a(W,{item:!0,xs:12,children:a(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:h?"데이터를 불러오는 중...":"표시할 항목이 없습니다."})})]},S.type)})}),a(yn,{sx:{mb:2}}),a(j,{sx:{display:"flex",justifyContent:"flex-end"},children:a(Se,{variant:"outlined",size:"small",startIcon:a(ah,{}),onClick:b,sx:{fontWeight:500},children:"레이아웃 초기화"})})]})})})]})};var Ac={},ZP;function _W(){if(ZP)return Ac;ZP=1;var e=ln();Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.default=void 0;var t=e(un()),n=cn();return Ac.default=(0,t.default)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Ac}var TW=_W();const Ax=vt(TW),IW=ip.WidthProvider(ip.Responsive),OW=({loading:e,onRefresh:t,onResetLayout:n,apiData:r,refreshInterval:i,onIntervalChange:o,autoRefreshEnabled:s,remainingTime:l,isRefreshing:c,hasAutoRefreshPermission:d=!0})=>{const h=Kr();u.useEffect(()=>{},[r]);const f=On(),g=zn(ZE),w=zn(OB),x=zn(t5),y=u.useRef(null),[p,v]=u.useState(!1),b=Di(f.breakpoints.down("sm")),P=Di("(max-width:800px)");Di(f.breakpoints.between("md","lg"));const k=Di("(min-width:700px)"),C=u.useMemo(()=>g.filter(F=>F.visible),[g]),S=u.useMemo(()=>C.map(F=>F.id).join(","),[C]),_=()=>C.map((F,O)=>({i:F.id,x:O%2*6,y:Math.floor(O/2),w:6,h:1})),T=u.useMemo(()=>({lg:C.map((F,O)=>({i:F.id,x:O%6*2,y:Math.floor(O/6),w:2,h:1,minW:2,maxW:4,minH:1,maxH:1})),md:C.map((F,O)=>({i:F.id,x:O%4*3,y:Math.floor(O/4),w:3,h:1,minW:2,maxW:4,minH:1,maxH:1})),sm:C.map((F,O)=>({i:F.id,x:O%4*3,y:Math.floor(O/4),w:3,h:1,minW:2,maxW:6,minH:1,maxH:1})),xs:_()}),[C]);u.useEffect(()=>{C.length>0&&(!w||Object.keys(w).length===0||w.lg&&w.lg.length!==C.length)&&h(rP(T))},[S,h]),u.useEffect(()=>{localStorage.removeItem("statsLayouts")},[]);const I=(F,O)=>{O&&Object.keys(O).length>0&&Object.entries(O).every(([E,z])=>z&&z.length>0&&z.every(q=>q.i&&typeof q.x=="number"&&q.x>=0&&typeof q.y=="number"&&q.y>=0&&typeof q.w=="number"&&q.w>0&&typeof q.h=="number"&&q.h>0))&&h(rP(O))},L=F=>{h(XE(F.target.value))},A=()=>{v(!0)},D=()=>{v(!1)},B=(F,O="value")=>{if(F.cardKey||F.key||F.id,r){const R=$(F,r,O);if(R!=null)return R}return F[O]},$=(F,O,R)=>{const E=F.cardKey||F.key||F.id;if(O.overview){const z=O.overview;switch(E){case"betting":if(R==="value"){if(z.betting&&Array.isArray(z.betting))return z.betting.reduce((X,H)=>X+parseFloat(H.total_bet||0),0);if(z.totals&&z.totals.total_bet!==void 0)return parseFloat(z.totals.total_bet)}break;case"winning":if(R==="value"){if(z.betting&&Array.isArray(z.betting))return z.betting.reduce((X,H)=>X+parseFloat(H.total_win||0),0);if(z.totals&&z.totals.total_win!==void 0)return parseFloat(z.totals.total_win)}break;case"deposit":if(R==="value"&&z.totals)return parseFloat(z.totals.total_deposit||0);break;case"withdrawal":if(R==="value"&&z.totals)return parseFloat(z.totals.total_withdrawal||0);break;case"bettingProfit":if(R==="value"){const q=z.betting?z.betting.reduce((K,ee)=>K+parseFloat(ee.total_bet||0),0):0,X=z.betting?z.betting.reduce((K,ee)=>K+parseFloat(ee.total_win||0),0):0;return q-X}break;case"depositWithdrawalProfit":if(R==="value"&&z.totals){const q=parseFloat(z.totals.total_deposit||0),X=parseFloat(z.totals.total_withdrawal||0);return q-X}break;case"rolling":if(R==="value"&&z.totals)return parseFloat(z.totals.total_rolling||0);break;case"settlement":if(R==="value")return 0;break;case"totalProfit":if(R==="value"){const q=z.betting?z.betting.reduce((G,Q)=>G+parseFloat(Q.total_bet||0),0):0,X=z.betting?z.betting.reduce((G,Q)=>G+parseFloat(Q.total_win||0),0):0,H=q-X,K=z.totals?parseFloat(z.totals.total_deposit||0):0,ee=z.totals?parseFloat(z.totals.total_withdrawal||0):0,ge=K-ee;return H+ge}break;case"rtp":if(R==="value"){const q=z.betting?z.betting.reduce((K,ee)=>K+parseFloat(ee.total_bet||0),0):0,X=z.betting?z.betting.reduce((K,ee)=>K+parseFloat(ee.total_win||0),0):0;return(q>0?X/q*100:0).toFixed(2)}break}}if(O.userMetrics){const z=O.userMetrics;switch(E){case"activeUsers":if(R==="value"&&z.statistics)return z.statistics.online||0;break;case"totalUsers":if(R==="value"&&z.statistics)return z.statistics.total||0;break}}return null},N=u.useMemo(()=>{if(w&&Object.keys(w).length>0&&Object.values(w).every(R=>R.length===C.length)){const R={};return Object.keys(w).forEach(E=>{R[E]=w[E].map(z=>({i:z.i,x:z.x,y:z.y,w:z.w,h:z.h,static:z.static||!1}))}),R}const F={};return Object.keys(T).forEach(O=>{F[O]=T[O].map(R=>({i:R.i,x:R.x,y:R.y,w:R.w,h:R.h,static:R.static||!1}))}),F},[w,T,C.length]);return m(j,{className:"stats-grid-container",sx:{mb:3,padding:b||P?0:void 0},ref:y,children:[m(j,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:3,gap:{xs:2,sm:0},px:b||P?1:2},children:[m(M,{variant:"h5",color:"text.primary",fontWeight:600,sx:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:["현황판",a(Fn,{title:"현황판에서는 주요 통계 지표를 카드 형태로 확인할 수 있습니다. 각 카드는 선택한 기간에 따라 데이터가 업데이트됩니다. 기본은 데이터는 당일이며 24시간 00시 이후 리셋됩니다.",arrow:!0,placement:"right",children:a(Ct,{size:"small",sx:{ml:.5,color:"#5E6278",padding:"2px"},children:a(hd,{fontSize:"small"})})})]}),m(j,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},flexWrap:{xs:"wrap",sm:"nowrap"},width:{xs:"100%",sm:"auto"}},children:[m(Zt,{size:"small",sx:{minWidth:{xs:"60px",sm:"100px"},flex:{xs:"1 1 auto",sm:"0 0 auto"}},children:[a(hn,{id:"period-select-label",children:"기간"}),m(an,{labelId:"period-select-label",id:"period-select",value:x,label:"기간",onChange:L,children:[a(Me,{value:"daily",children:"일별"}),a(Me,{value:"weekly",children:"주별"}),a(Me,{value:"monthly",children:"월별"})]})]}),d&&m(bn,{children:[a(Zt,{size:"small",sx:{minWidth:{xs:"120px",sm:"150px"},flex:{xs:"0 0 auto",sm:"0 0 auto"}},children:m(an,{value:i||3e4,onChange:o,displayEmpty:!0,startAdornment:i>0?a(QR,{sx:{mr:.5,fontSize:18,color:"#5E6278"}}):a(PF,{sx:{mr:.5,fontSize:18,color:"#5E6278"}}),sx:{"& .MuiSelect-select":{display:"flex",alignItems:"center",fontSize:{xs:"0.75rem",sm:"0.875rem"}}},children:[a(Me,{value:0,children:"끄기"}),a(Me,{value:1e4,children:"10초"}),a(Me,{value:3e4,children:"30초"}),a(Me,{value:6e4,children:"1분"}),a(Me,{value:3e5,children:"5분"})]})}),s&&i>0&&!b&&a(ut,{icon:a(Ax,{sx:{fontSize:14}}),label:c?"새로고침 중...":`${l}초`,size:"small",color:c?"primary":"default",variant:c?"filled":"outlined",sx:{minWidth:80,"& .MuiChip-label":{fontSize:"0.75rem"},display:{xs:"none",sm:"flex"}}})]}),t&&a(Fn,{title:e||c?"새로고침 중...":"즉시 새로고침",children:a("span",{children:a(Ct,{color:"primary",onClick:t,disabled:e||c,size:"small",sx:{border:"1px solid",borderColor:"primary.main",borderRadius:"8px","&:hover":{backgroundColor:"primary.light",borderColor:"primary.dark"},"&:disabled":{borderColor:"action.disabled"}},children:a(Ax,{fontSize:"small"})})})}),a(kW,{buttonVariant:"text",containerRef:y})]})]}),m(j,{className:"stats-card-grid-container",sx:{width:"100%",position:"relative"},children:[e&&a(j,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.7)",zIndex:10},children:a(ir,{})}),a(IW,{className:"layout",layouts:N,breakpoints:{lg:1200,md:996,sm:768,xs:480},cols:{lg:12,md:12,sm:12,xs:12},rowHeight:130,margin:{xs:[10,10],sm:[15,15],md:[20,20],lg:[20,20]},containerPadding:{xs:[5,5],sm:[8,8],md:[10,10],lg:[10,10]},onLayoutChange:I,onDragStart:A,onDragStop:D,isDraggable:k&&!e,isResizable:!1,useCSSTransforms:!0,draggableHandle:".stats-card-drag-handle",draggableCancel:"",isBounded:!1,compactType:null,preventCollision:!1,children:C.map((F,O)=>{const R=B(F,"value"),E=B(F,"previousValue");return a(j,{className:"stats-card",sx:{backgroundColor:"#ffffff",border:"1px solid #E4E6EF",borderRadius:"12px",boxShadow:"0 0 20px 0 rgba(76, 87, 125, 0.05)","&:hover":{boxShadow:"0 2px 30px 0 rgba(76, 87, 125, 0.08)",borderColor:"#D7DAE3"}},children:a(PW,{id:F.id,title:F.title,value:R,previousValue:E,suffix:F.suffix,loading:e,icon:F.icon,color:F.color,type:F.type,info:F.info||"지난 30일 대비",draggableProps:{className:"stats-card-header"},dragHandleProps:{}})},F.id)})})]})]})};var Bm,ek;function Pa(){if(ek)return Bm;ek=1;var e=Array.isArray;return Bm=e,Bm}var Hm,tk;function V5(){if(tk)return Hm;tk=1;var e=typeof Ah=="object"&&Ah&&Ah.Object===Object&&Ah;return Hm=e,Hm}var Wm,nk;function Ni(){if(nk)return Wm;nk=1;var e=V5(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Wm=n,Wm}var qm,rk;function ch(){if(rk)return qm;rk=1;var e=Ni(),t=e.Symbol;return qm=t,qm}var Um,ak;function AW(){if(ak)return Um;ak=1;var e=ch(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var l=n.call(s,i),c=s[i];try{s[i]=void 0;var d=!0}catch{}var h=r.call(s);return d&&(l?s[i]=c:delete s[i]),h}return Um=o,Um}var Vm,ik;function DW(){if(ik)return Vm;ik=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Vm=n,Vm}var Gm,ok;function bo(){if(ok)return Gm;ok=1;var e=ch(),t=AW(),n=DW(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(l){return l==null?l===void 0?i:r:o&&o in Object(l)?t(l):n(l)}return Gm=s,Gm}var Km,sk;function vo(){if(sk)return Km;sk=1;function e(t){return t!=null&&typeof t=="object"}return Km=e,Km}var Ym,lk;function Zl(){if(lk)return Ym;lk=1;var e=bo(),t=vo(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ym=r,Ym}var Xm,ck;function W1(){if(ck)return Xm;ck=1;var e=Pa(),t=Zl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){if(e(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||s!=null&&o in Object(s)}return Xm=i,Xm}var Jm,uk;function Jo(){if(uk)return Jm;uk=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Jm=e,Jm}var Qm,dk;function q1(){if(dk)return Qm;dk=1;var e=bo(),t=Jo(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(l){if(!t(l))return!1;var c=e(l);return c==r||c==i||c==n||c==o}return Qm=s,Qm}var Zm,hk;function RW(){if(hk)return Zm;hk=1;var e=Ni(),t=e["__core-js_shared__"];return Zm=t,Zm}var ey,fk;function EW(){if(fk)return ey;fk=1;var e=RW(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return ey=n,ey}var ty,pk;function G5(){if(pk)return ty;pk=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return ty=n,ty}var ny,gk;function MW(){if(gk)return ny;gk=1;var e=q1(),t=EW(),n=Jo(),r=G5(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,d=l.hasOwnProperty,h=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(g){if(!n(g)||t(g))return!1;var w=e(g)?h:o;return w.test(r(g))}return ny=f,ny}var ry,mk;function LW(){if(mk)return ry;mk=1;function e(t,n){return t==null?void 0:t[n]}return ry=e,ry}var ay,yk;function Ns(){if(yk)return ay;yk=1;var e=MW(),t=LW();function n(r,i){var o=t(r,i);return e(o)?o:void 0}return ay=n,ay}var iy,bk;function wg(){if(bk)return iy;bk=1;var e=Ns(),t=e(Object,"create");return iy=t,iy}var oy,vk;function $W(){if(vk)return oy;vk=1;var e=wg();function t(){this.__data__=e?e(null):{},this.size=0}return oy=t,oy}var sy,xk;function jW(){if(xk)return sy;xk=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return sy=e,sy}var ly,wk;function FW(){if(wk)return ly;wk=1;var e=wg(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var s=this.__data__;if(e){var l=s[o];return l===t?void 0:l}return r.call(s,o)?s[o]:void 0}return ly=i,ly}var cy,Ck;function zW(){if(Ck)return cy;Ck=1;var e=wg(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var o=this.__data__;return e?o[i]!==void 0:n.call(o,i)}return cy=r,cy}var uy,Sk;function NW(){if(Sk)return uy;Sk=1;var e=wg(),t="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=e&&i===void 0?t:i,this}return uy=n,uy}var dy,Pk;function BW(){if(Pk)return dy;Pk=1;var e=$W(),t=jW(),n=FW(),r=zW(),i=NW();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,dy=o,dy}var hy,kk;function HW(){if(kk)return hy;kk=1;function e(){this.__data__=[],this.size=0}return hy=e,hy}var fy,_k;function U1(){if(_k)return fy;_k=1;function e(t,n){return t===n||t!==t&&n!==n}return fy=e,fy}var py,Tk;function Cg(){if(Tk)return py;Tk=1;var e=U1();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return py=t,py}var gy,Ik;function WW(){if(Ik)return gy;Ik=1;var e=Cg(),t=Array.prototype,n=t.splice;function r(i){var o=this.__data__,s=e(o,i);if(s<0)return!1;var l=o.length-1;return s==l?o.pop():n.call(o,s,1),--this.size,!0}return gy=r,gy}var my,Ok;function qW(){if(Ok)return my;Ok=1;var e=Cg();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return my=t,my}var yy,Ak;function UW(){if(Ak)return yy;Ak=1;var e=Cg();function t(n){return e(this.__data__,n)>-1}return yy=t,yy}var by,Dk;function VW(){if(Dk)return by;Dk=1;var e=Cg();function t(n,r){var i=this.__data__,o=e(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return by=t,by}var vy,Rk;function Sg(){if(Rk)return vy;Rk=1;var e=HW(),t=WW(),n=qW(),r=UW(),i=VW();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,vy=o,vy}var xy,Ek;function V1(){if(Ek)return xy;Ek=1;var e=Ns(),t=Ni(),n=e(t,"Map");return xy=n,xy}var wy,Mk;function GW(){if(Mk)return wy;Mk=1;var e=BW(),t=Sg(),n=V1();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return wy=r,wy}var Cy,Lk;function KW(){if(Lk)return Cy;Lk=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Cy=e,Cy}var Sy,$k;function Pg(){if($k)return Sy;$k=1;var e=KW();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Sy=t,Sy}var Py,jk;function YW(){if(jk)return Py;jk=1;var e=Pg();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Py=t,Py}var ky,Fk;function XW(){if(Fk)return ky;Fk=1;var e=Pg();function t(n){return e(this,n).get(n)}return ky=t,ky}var _y,zk;function JW(){if(zk)return _y;zk=1;var e=Pg();function t(n){return e(this,n).has(n)}return _y=t,_y}var Ty,Nk;function QW(){if(Nk)return Ty;Nk=1;var e=Pg();function t(n,r){var i=e(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return Ty=t,Ty}var Iy,Bk;function G1(){if(Bk)return Iy;Bk=1;var e=GW(),t=YW(),n=XW(),r=JW(),i=QW();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Iy=o,Iy}var Oy,Hk;function K5(){if(Hk)return Oy;Hk=1;var e=G1(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var s=arguments,l=i?i.apply(this,s):s[0],c=o.cache;if(c.has(l))return c.get(l);var d=r.apply(this,s);return o.cache=c.set(l,d)||c,d};return o.cache=new(n.Cache||e),o}return n.Cache=e,Oy=n,Oy}var Ay,Wk;function ZW(){if(Wk)return Ay;Wk=1;var e=K5(),t=500;function n(r){var i=e(r,function(s){return o.size===t&&o.clear(),s}),o=i.cache;return i}return Ay=n,Ay}var Dy,qk;function eq(){if(qk)return Dy;qk=1;var e=ZW(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(s,l,c,d){o.push(c?d.replace(n,"$1"):l||s)}),o});return Dy=r,Dy}var Ry,Uk;function K1(){if(Uk)return Ry;Uk=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return Ry=e,Ry}var Ey,Vk;function tq(){if(Vk)return Ey;Vk=1;var e=ch(),t=K1(),n=Pa(),r=Zl(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function s(l){if(typeof l=="string")return l;if(n(l))return t(l,s)+"";if(r(l))return o?o.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Ey=s,Ey}var My,Gk;function Y5(){if(Gk)return My;Gk=1;var e=tq();function t(n){return n==null?"":e(n)}return My=t,My}var Ly,Kk;function X5(){if(Kk)return Ly;Kk=1;var e=Pa(),t=W1(),n=eq(),r=Y5();function i(o,s){return e(o)?o:t(o,s)?[o]:n(r(o))}return Ly=i,Ly}var $y,Yk;function kg(){if(Yk)return $y;Yk=1;var e=Zl();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return $y=t,$y}var jy,Xk;function Y1(){if(Xk)return jy;Xk=1;var e=X5(),t=kg();function n(r,i){i=e(i,r);for(var o=0,s=i.length;r!=null&&o<s;)r=r[t(i[o++])];return o&&o==s?r:void 0}return jy=n,jy}var Fy,Jk;function J5(){if(Jk)return Fy;Jk=1;var e=Y1();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return Fy=t,Fy}var nq=J5();const Ya=vt(nq);var zy,Qk;function rq(){if(Qk)return zy;Qk=1;function e(t){return t==null}return zy=e,zy}var aq=rq();const jn=vt(aq);var Ny,Zk;function iq(){if(Zk)return Ny;Zk=1;var e=bo(),t=Pa(),n=vo(),r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return Ny=i,Ny}var oq=iq();const Rs=vt(oq);var sq=q1();const Dn=vt(sq);var lq=Jo();const ec=vt(lq);var By={exports:{}},ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function cq(){if(e2)return ar;e2=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(p){if(typeof p=="object"&&p!==null){var v=p.$$typeof;switch(v){case e:switch(p=p.type,p){case n:case i:case r:case d:case h:return p;default:switch(p=p&&p.$$typeof,p){case l:case s:case c:case g:case f:case o:return p;default:return v}}case t:return v}}}return ar.ContextConsumer=s,ar.ContextProvider=o,ar.Element=e,ar.ForwardRef=c,ar.Fragment=n,ar.Lazy=g,ar.Memo=f,ar.Portal=t,ar.Profiler=i,ar.StrictMode=r,ar.Suspense=d,ar.SuspenseList=h,ar.isAsyncMode=function(){return!1},ar.isConcurrentMode=function(){return!1},ar.isContextConsumer=function(p){return y(p)===s},ar.isContextProvider=function(p){return y(p)===o},ar.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===e},ar.isForwardRef=function(p){return y(p)===c},ar.isFragment=function(p){return y(p)===n},ar.isLazy=function(p){return y(p)===g},ar.isMemo=function(p){return y(p)===f},ar.isPortal=function(p){return y(p)===t},ar.isProfiler=function(p){return y(p)===i},ar.isStrictMode=function(p){return y(p)===r},ar.isSuspense=function(p){return y(p)===d},ar.isSuspenseList=function(p){return y(p)===h},ar.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===n||p===i||p===r||p===d||p===h||p===w||typeof p=="object"&&p!==null&&(p.$$typeof===g||p.$$typeof===f||p.$$typeof===o||p.$$typeof===s||p.$$typeof===c||p.$$typeof===x||p.getModuleId!==void 0)},ar.typeOf=y,ar}var t2;function uq(){return t2||(t2=1,By.exports=cq()),By.exports}var dq=uq(),Hy,n2;function Q5(){if(n2)return Hy;n2=1;var e=bo(),t=vo(),n="[object Number]";function r(i){return typeof i=="number"||t(i)&&e(i)==n}return Hy=r,Hy}var Wy,r2;function hq(){if(r2)return Wy;r2=1;var e=Q5();function t(n){return e(n)&&n!=+n}return Wy=t,Wy}var fq=hq();const uh=vt(fq);var pq=Q5();const gq=vt(pq);var bi=function(t){return t===0?0:t>0?1:-1},hs=function(t){return Rs(t)&&t.indexOf("%")===t.length-1},_t=function(t){return gq(t)&&!uh(t)},mq=function(t){return jn(t)},qr=function(t){return _t(t)||Rs(t)},yq=0,dh=function(t){var n=++yq;return"".concat(t||"").concat(n)},Es=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_t(t)&&!Rs(t))return r;var o;if(hs(t)){var s=t.indexOf("%");o=n*parseFloat(t.slice(0,s))/100}else o=+t;return uh(o)&&(o=r),i&&o>n&&(o=n),o},Ao=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},bq=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},pi=function(t,n){return _t(t)&&_t(n)?function(r){return t+r*(n-t)}:function(){return n}};function op(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Ya(r,t))===n})}var vq=function(t,n){return _t(t)&&_t(n)?t-n:Rs(t)&&Rs(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function dl(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}var xq=["viewBox","children"],wq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],a2=["points","pathLength"],qy={svg:xq,polygon:a2,polyline:a2},X1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sp=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(u.isValidElement(t)&&(r=t.props),!ec(r))return null;var i={};return Object.keys(r).forEach(function(o){X1.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},Cq=function(t,n,r){return function(i){return t(n,r,i),null}},lp=function(t,n,r){if(!ec(t)||Dx(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(o){var s=t[o];X1.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=Cq(s,n,r))}),i},Sq=["children"],Pq=["children"];function i2(e,t){if(e==null)return{};var n=kq(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}var o2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ao=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},s2=null,Uy=null,J1=function e(t){if(t===s2&&Array.isArray(Uy))return Uy;var n=[];return u.Children.forEach(t,function(r){jn(r)||(dq.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Uy=n,s2=t,n};function Xa(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return ao(i)}):r=[ao(t)],J1(e).forEach(function(i){var o=Ya(i,"type.displayName")||Ya(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Ia(e,t){var n=Xa(e,t);return n&&n[0]}var l2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!_t(r)||r<=0||!_t(i)||i<=0)},_q=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Tq=function(t){return t&&t.type&&Rs(t.type)&&_q.indexOf(t.type)>=0},Iq=function(t){return t&&Rx(t)==="object"&&"clipDot"in t},Oq=function(t,n,r,i){var o,s=(o=qy==null?void 0:qy[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!Dn(t)&&(i&&s.includes(n)||wq.includes(n))||r&&X1.includes(n)},Hn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(u.isValidElement(t)&&(i=t.props),!ec(i))return null;var o={};return Object.keys(i).forEach(function(s){var l;Oq((l=i)===null||l===void 0?void 0:l[s],s,n,r)&&(o[s]=i[s])}),o},Ex=function e(t,n){if(t===n)return!0;var r=u.Children.count(t);if(r!==u.Children.count(n))return!1;if(r===0)return!0;if(r===1)return c2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!e(o,s))return!1}else if(!c2(o,s))return!1}return!0},c2=function(t,n){if(jn(t)&&jn(n))return!0;if(!jn(t)&&!jn(n)){var r=t.props||{},i=r.children,o=i2(r,Sq),s=n.props||{},l=s.children,c=i2(s,Pq);return i&&l?dl(o,c)&&Ex(i,l):!i&&!l?dl(o,c):!1}return!1},u2=function(t,n){var r=[],i={};return J1(t).forEach(function(o,s){if(Tq(o))r.push(o);else if(o){var l=ao(o.type),c=n[l]||{},d=c.handler,h=c.once;if(d&&(!h||!i[l])){var f=d(o,l,s);r.push(f),i[l]=!0}}}),r},Aq=function(t){var n=t&&t.type;return n&&o2[n]?o2[n]:null},Dq=function(t,n){return J1(n).indexOf(t)},Rq=["children","width","height","viewBox","className","style","title","desc"];function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(this,arguments)}function Eq(e,t){if(e==null)return{};var n=Mq(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Mq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Lx(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,s=e.style,l=e.title,c=e.desc,d=Eq(e,Rq),h=i||{width:n,height:r,x:0,y:0},f=wn("recharts-surface",o);return Ce.createElement("svg",Mx({},Hn(d,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Ce.createElement("title",null,l),Ce.createElement("desc",null,c),t)}var Lq=["children","className"];function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(this,arguments)}function $q(e,t){if(e==null)return{};var n=jq(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jq(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Er=Ce.forwardRef(function(e,t){var n=e.children,r=e.className,i=$q(e,Lq),o=wn("recharts-layer",r);return Ce.createElement("g",$x({className:o},Hn(i,!0),{ref:t}),n)}),io=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]},Vy,d2;function Fq(){if(d2)return Vy;d2=1;function e(t,n,r){var i=-1,o=t.length;n<0&&(n=-n>o?0:o+n),r=r>o?o:r,r<0&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(o);++i<o;)s[i]=t[i+n];return s}return Vy=e,Vy}var Gy,h2;function zq(){if(h2)return Gy;h2=1;var e=Fq();function t(n,r,i){var o=n.length;return i=i===void 0?o:i,!r&&i>=o?n:e(n,r,i)}return Gy=t,Gy}var Ky,f2;function Z5(){if(f2)return Ky;f2=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",s="\\u200d",l=RegExp("["+s+e+i+o+"]");function c(d){return l.test(d)}return Ky=c,Ky}var Yy,p2;function Nq(){if(p2)return Yy;p2=1;function e(t){return t.split("")}return Yy=e,Yy}var Xy,g2;function Bq(){if(g2)return Xy;g2=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",s="["+e+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",h="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",w="\\u200d",x=d+"?",y="["+o+"]?",p="(?:"+w+"(?:"+[h,f,g].join("|")+")"+y+x+")*",v=y+x+p,b="(?:"+[h+l+"?",l,f,g,s].join("|")+")",P=RegExp(c+"(?="+c+")|"+b+v,"g");function k(C){return C.match(P)||[]}return Xy=k,Xy}var Jy,m2;function Hq(){if(m2)return Jy;m2=1;var e=Nq(),t=Z5(),n=Bq();function r(i){return t(i)?n(i):e(i)}return Jy=r,Jy}var Qy,y2;function Wq(){if(y2)return Qy;y2=1;var e=zq(),t=Z5(),n=Hq(),r=Y5();function i(o){return function(s){s=r(s);var l=t(s)?n(s):void 0,c=l?l[0]:s.charAt(0),d=l?e(l,1).join(""):s.slice(1);return c[o]()+d}}return Qy=i,Qy}var Zy,b2;function qq(){if(b2)return Zy;b2=1;var e=Wq(),t=e("toUpperCase");return Zy=t,Zy}var Uq=qq();const _g=vt(Uq);function xr(e){return function(){return e}}const eM=Math.cos,cp=Math.sin,Ci=Math.sqrt,up=Math.PI,Tg=2*up,jx=Math.PI,Fx=2*jx,os=1e-6,Vq=Fx-os;function tM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Gq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tM;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Kq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tM:Gq(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=r-t,d=i-n,h=s-t,f=l-n,g=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>os)if(!(Math.abs(f*c-d*h)>os)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let w=r-s,x=i-l,y=c*c+d*d,p=w*w+x*x,v=Math.sqrt(y),b=Math.sqrt(g),P=o*Math.tan((jx-Math.acos((y+g-p)/(2*v*b)))/2),k=P/b,C=P/v;Math.abs(k-1)>os&&this._append`L${t+k*h},${n+k*f}`,this._append`A${o},${o},0,0,${+(f*w>h*x)},${this._x1=t+C*c},${this._y1=n+C*d}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),d=t+l,h=n+c,f=1^s,g=s?i-o:o-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>os||Math.abs(this._y1-h)>os)&&this._append`L${d},${h}`,r&&(g<0&&(g=g%Fx+Fx),g>Vq?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=d},${this._y1=h}`:g>os&&this._append`A${r},${r},0,${+(g>=jx)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Q1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Kq(t)}function Z1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nM(e){this._context=e}nM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ig(e){return new nM(e)}function rM(e){return e[0]}function aM(e){return e[1]}function iM(e,t){var n=xr(!0),r=null,i=Ig,o=null,s=Q1(l);e=typeof e=="function"?e:e===void 0?rM:xr(e),t=typeof t=="function"?t:t===void 0?aM:xr(t);function l(c){var d,h=(c=Z1(c)).length,f,g=!1,w;for(r==null&&(o=i(w=s())),d=0;d<=h;++d)!(d<h&&n(f=c[d],d,c))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+e(f,d,c),+t(f,d,c));if(w)return o=null,w+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:xr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:xr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:xr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),l):r},l}function Xh(e,t,n){var r=null,i=xr(!0),o=null,s=Ig,l=null,c=Q1(d);e=typeof e=="function"?e:e===void 0?rM:xr(+e),t=typeof t=="function"?t:xr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aM:xr(+n);function d(f){var g,w,x,y=(f=Z1(f)).length,p,v=!1,b,P=new Array(y),k=new Array(y);for(o==null&&(l=s(b=c())),g=0;g<=y;++g){if(!(g<y&&i(p=f[g],g,f))===v)if(v=!v)w=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=g-1;x>=w;--x)l.point(P[x],k[x]);l.lineEnd(),l.areaEnd()}v&&(P[g]=+e(p,g,f),k[g]=+t(p,g,f),l.point(r?+r(p,g,f):P[g],n?+n(p,g,f):k[g]))}if(b)return l=null,b+""||null}function h(){return iM().defined(i).curve(s).context(o)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:xr(+f),r=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xr(+f),d):e},d.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xr(+f),d):r},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:xr(+f),n=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xr(+f),d):t},d.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xr(+f),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(f){return arguments.length?(i=typeof f=="function"?f:xr(!!f),d):i},d.curve=function(f){return arguments.length?(s=f,o!=null&&(l=s(o)),d):s},d.context=function(f){return arguments.length?(f==null?o=l=null:l=s(o=f),d):o},d}class oM{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Yq(e){return new oM(e,!0)}function Xq(e){return new oM(e,!1)}const eC={draw(e,t){const n=Ci(t/up);e.moveTo(n,0),e.arc(0,0,n,0,Tg)}},Jq={draw(e,t){const n=Ci(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},sM=Ci(1/3),Qq=sM*2,Zq={draw(e,t){const n=Ci(t/Qq),r=n*sM;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},e4={draw(e,t){const n=Ci(t),r=-n/2;e.rect(r,r,n,n)}},t4=.8908130915292852,lM=cp(up/10)/cp(7*up/10),n4=cp(Tg/10)*lM,r4=-eM(Tg/10)*lM,a4={draw(e,t){const n=Ci(t*t4),r=n4*n,i=r4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const s=Tg*o/5,l=eM(s),c=cp(s);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*i,c*r+l*i)}e.closePath()}},eb=Ci(3),i4={draw(e,t){const n=-Ci(t/(eb*3));e.moveTo(0,n*2),e.lineTo(-eb*n,-n),e.lineTo(eb*n,-n),e.closePath()}},Na=-.5,Ba=Ci(3)/2,zx=1/Ci(12),o4=(zx/2+1)*3,s4={draw(e,t){const n=Ci(t/o4),r=n/2,i=n*zx,o=r,s=n*zx+n,l=-o,c=s;e.moveTo(r,i),e.lineTo(o,s),e.lineTo(l,c),e.lineTo(Na*r-Ba*i,Ba*r+Na*i),e.lineTo(Na*o-Ba*s,Ba*o+Na*s),e.lineTo(Na*l-Ba*c,Ba*l+Na*c),e.lineTo(Na*r+Ba*i,Na*i-Ba*r),e.lineTo(Na*o+Ba*s,Na*s-Ba*o),e.lineTo(Na*l+Ba*c,Na*c-Ba*l),e.closePath()}};function l4(e,t){let n=null,r=Q1(i);e=typeof e=="function"?e:xr(e||eC),t=typeof t=="function"?t:xr(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:xr(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:xr(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function dp(){}function hp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cM(e){this._context=e}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c4(e){return new cM(e)}function uM(e){this._context=e}uM.prototype={areaStart:dp,areaEnd:dp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u4(e){return new uM(e)}function dM(e){this._context=e}dM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d4(e){return new dM(e)}function hM(e){this._context=e}hM.prototype={areaStart:dp,areaEnd:dp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function h4(e){return new hM(e)}function v2(e){return e<0?-1:1}function x2(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),l=(o*i+s*r)/(r+i);return(v2(o)+v2(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function w2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tb(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,l=(o-r)/3;e._context.bezierCurveTo(r+l,i+l*t,o-l,s-l*n,o,s)}function fp(e){this._context=e}fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tb(this,this._t0,w2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tb(this,w2(this,n=x2(this,e,t)),n);break;default:tb(this,this._t0,n=x2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fM(e){this._context=new pM(e)}(fM.prototype=Object.create(fp.prototype)).point=function(e,t){fp.prototype.point.call(this,t,e)};function pM(e){this._context=e}pM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function f4(e){return new fp(e)}function p4(e){return new fM(e)}function gM(e){this._context=e}gM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=C2(e),i=C2(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function C2(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function g4(e){return new gM(e)}function Og(e,t){this._context=e,this._t=t}Og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function m4(e){return new Og(e,.5)}function y4(e){return new Og(e,0)}function b4(e){return new Og(e,1)}function _l(e,t){if((s=e.length)>1)for(var n=1,r,i,o=e[t[0]],s,l=o.length;n<s;++n)for(i=o,o=e[t[n]],r=0;r<l;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Nx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function v4(e,t){return e[t]}function x4(e){const t=[];return t.key=e,t}function w4(){var e=xr([]),t=Nx,n=_l,r=v4;function i(o){var s=Array.from(e.apply(this,arguments),x4),l,c=s.length,d=-1,h;for(const f of o)for(l=0,++d;l<c;++l)(s[l][d]=[0,+r(f,s[l].key,d,o)]).data=f;for(l=0,h=Z1(t(s));l<c;++l)s[h[l]].index=l;return n(s,h),s}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:xr(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:xr(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Nx:typeof o=="function"?o:xr(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??_l,i):n},i}function C4(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<r;++n)e[n][i][1]/=s}_l(e,t)}}function S4(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var s=0,l=0;s<i;++s)l+=e[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}_l(e,t)}}function P4(e,t){if(!(!((s=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var l=0,c=0,d=0;l<s;++l){for(var h=e[t[l]],f=h[r][1]||0,g=h[r-1][1]||0,w=(f-g)/2,x=0;x<l;++x){var y=e[t[x]],p=y[r][1]||0,v=y[r-1][1]||0;w+=p-v}c+=f,d+=w*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,_l(e,t)}}function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}var k4=["type","size","sizeType"];function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bx.apply(this,arguments)}function S2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(n),!0).forEach(function(r){_4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _4(e,t,n){return t=T4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T4(e){var t=I4(e,"string");return bd(t)=="symbol"?t:t+""}function I4(e,t){if(bd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O4(e,t){if(e==null)return{};var n=A4(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function A4(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var mM={symbolCircle:eC,symbolCross:Jq,symbolDiamond:Zq,symbolSquare:e4,symbolStar:a4,symbolTriangle:i4,symbolWye:s4},D4=Math.PI/180,R4=function(t){var n="symbol".concat(_g(t));return mM[n]||eC},E4=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*D4;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},M4=function(t,n){mM["symbol".concat(_g(t))]=n},tC=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,o=i===void 0?64:i,s=t.sizeType,l=s===void 0?"area":s,c=O4(t,k4),d=P2(P2({},c),{},{type:r,size:o,sizeType:l}),h=function(){var p=R4(r),v=l4().type(p).size(E4(o,l,r));return v()},f=d.className,g=d.cx,w=d.cy,x=Hn(d,!0);return g===+g&&w===+w&&o===+o?Ce.createElement("path",Bx({},x,{className:wn("recharts-symbols",f),transform:"translate(".concat(g,", ").concat(w,")"),d:h()})):null};tC.registerSymbol=M4;function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hx.apply(this,arguments)}function k2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function L4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k2(Object(n),!0).forEach(function(r){vd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bM(r.key),r)}}function F4(e,t,n){return t&&j4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z4(e,t,n){return t=pp(t),N4(e,yM()?Reflect.construct(t,n||[],pp(e).constructor):t.apply(e,n))}function N4(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B4(e)}function B4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yM=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pp(e)}function H4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wx(e,t)}function Wx(e,t){return Wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Wx(e,t)}function vd(e,t,n){return t=bM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bM(e){var t=W4(e,"string");return Tl(t)=="symbol"?t:t+""}function W4(e,t){if(Tl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ha=32,nC=function(e){function t(){return $4(this,t),z4(this,t,arguments)}return H4(t,e),F4(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Ha/2,s=Ha/6,l=Ha/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Ha,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return Ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(Ha,"M").concat(2*l,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return Ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ha/8,"h").concat(Ha,"v").concat(Ha*3/4,"h").concat(-Ha,"z"),className:"recharts-legend-icon"});if(Ce.isValidElement(r.legendIcon)){var d=L4({},r);return delete d.legendIcon,Ce.cloneElement(r.legendIcon,d)}return Ce.createElement(tC,{fill:c,cx:o,cy:o,size:Ha,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,h={x:0,y:0,width:Ha,height:Ha},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(w,x){var y=w.formatter||c,p=wn(vd(vd({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",w.inactive));if(w.type==="none")return null;var v=Dn(w.value)?null:w.value;io(!Dn(w.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=w.inactive?d:w.color;return Ce.createElement("li",Hx({className:p,style:f,key:"legend-item-".concat(x)},lp(r.props,w,x)),Ce.createElement(Lx,{width:s,height:s,viewBox:h,style:g},r.renderIcon(w)),Ce.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,w,x):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return Ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(u.PureComponent);vd(nC,"displayName","Legend");vd(nC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nb,_2;function q4(){if(_2)return nb;_2=1;var e=Sg();function t(){this.__data__=new e,this.size=0}return nb=t,nb}var rb,T2;function U4(){if(T2)return rb;T2=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return rb=e,rb}var ab,I2;function V4(){if(I2)return ab;I2=1;function e(t){return this.__data__.get(t)}return ab=e,ab}var ib,O2;function G4(){if(O2)return ib;O2=1;function e(t){return this.__data__.has(t)}return ib=e,ib}var ob,A2;function K4(){if(A2)return ob;A2=1;var e=Sg(),t=V1(),n=G1(),r=200;function i(o,s){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<r-1)return c.push([o,s]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(o,s),this.size=l.size,this}return ob=i,ob}var sb,D2;function vM(){if(D2)return sb;D2=1;var e=Sg(),t=q4(),n=U4(),r=V4(),i=G4(),o=K4();function s(l){var c=this.__data__=new e(l);this.size=c.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,sb=s,sb}var lb,R2;function Y4(){if(R2)return lb;R2=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return lb=t,lb}var cb,E2;function X4(){if(E2)return cb;E2=1;function e(t){return this.__data__.has(t)}return cb=e,cb}var ub,M2;function xM(){if(M2)return ub;M2=1;var e=G1(),t=Y4(),n=X4();function r(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new e;++o<s;)this.add(i[o])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ub=r,ub}var db,L2;function wM(){if(L2)return db;L2=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return db=e,db}var hb,$2;function CM(){if($2)return hb;$2=1;function e(t,n){return t.has(n)}return hb=e,hb}var fb,j2;function SM(){if(j2)return fb;j2=1;var e=xM(),t=wM(),n=CM(),r=1,i=2;function o(s,l,c,d,h,f){var g=c&r,w=s.length,x=l.length;if(w!=x&&!(g&&x>w))return!1;var y=f.get(s),p=f.get(l);if(y&&p)return y==l&&p==s;var v=-1,b=!0,P=c&i?new e:void 0;for(f.set(s,l),f.set(l,s);++v<w;){var k=s[v],C=l[v];if(d)var S=g?d(C,k,v,l,s,f):d(k,C,v,s,l,f);if(S!==void 0){if(S)continue;b=!1;break}if(P){if(!t(l,function(_,T){if(!n(P,T)&&(k===_||h(k,_,c,d,f)))return P.push(T)})){b=!1;break}}else if(!(k===C||h(k,C,c,d,f))){b=!1;break}}return f.delete(s),f.delete(l),b}return fb=o,fb}var pb,F2;function J4(){if(F2)return pb;F2=1;var e=Ni(),t=e.Uint8Array;return pb=t,pb}var gb,z2;function Q4(){if(z2)return gb;z2=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,o){r[++n]=[o,i]}),r}return gb=e,gb}var mb,N2;function rC(){if(N2)return mb;N2=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return mb=e,mb}var yb,B2;function Z4(){if(B2)return yb;B2=1;var e=ch(),t=J4(),n=U1(),r=SM(),i=Q4(),o=rC(),s=1,l=2,c="[object Boolean]",d="[object Date]",h="[object Error]",f="[object Map]",g="[object Number]",w="[object RegExp]",x="[object Set]",y="[object String]",p="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",P=e?e.prototype:void 0,k=P?P.valueOf:void 0;function C(S,_,T,I,L,A,D){switch(T){case b:if(S.byteLength!=_.byteLength||S.byteOffset!=_.byteOffset)return!1;S=S.buffer,_=_.buffer;case v:return!(S.byteLength!=_.byteLength||!A(new t(S),new t(_)));case c:case d:case g:return n(+S,+_);case h:return S.name==_.name&&S.message==_.message;case w:case y:return S==_+"";case f:var B=i;case x:var $=I&s;if(B||(B=o),S.size!=_.size&&!$)return!1;var N=D.get(S);if(N)return N==_;I|=l,D.set(S,_);var F=r(B(S),B(_),I,L,A,D);return D.delete(S),F;case p:if(k)return k.call(S)==k.call(_)}return!1}return yb=C,yb}var bb,H2;function PM(){if(H2)return bb;H2=1;function e(t,n){for(var r=-1,i=n.length,o=t.length;++r<i;)t[o+r]=n[r];return t}return bb=e,bb}var vb,W2;function e8(){if(W2)return vb;W2=1;var e=PM(),t=Pa();function n(r,i,o){var s=i(r);return t(r)?s:e(s,o(r))}return vb=n,vb}var xb,q2;function t8(){if(q2)return xb;q2=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=0,s=[];++r<i;){var l=t[r];n(l,r,t)&&(s[o++]=l)}return s}return xb=e,xb}var wb,U2;function n8(){if(U2)return wb;U2=1;function e(){return[]}return wb=e,wb}var Cb,V2;function r8(){if(V2)return Cb;V2=1;var e=t8(),t=n8(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(l){return r.call(s,l)}))}:t;return Cb=o,Cb}var Sb,G2;function a8(){if(G2)return Sb;G2=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Sb=e,Sb}var Pb,K2;function i8(){if(K2)return Pb;K2=1;var e=bo(),t=vo(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Pb=r,Pb}var kb,Y2;function aC(){if(Y2)return kb;Y2=1;var e=i8(),t=vo(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return kb=o,kb}var Vu={exports:{}},_b,X2;function o8(){if(X2)return _b;X2=1;function e(){return!1}return _b=e,_b}Vu.exports;var J2;function kM(){return J2||(J2=1,function(e,t){var n=Ni(),r=o8(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,s=o&&o.exports===i,l=s?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||r;e.exports=d}(Vu,Vu.exports)),Vu.exports}var Tb,Q2;function iC(){if(Q2)return Tb;Q2=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Tb=n,Tb}var Ib,Z2;function oC(){if(Z2)return Ib;Z2=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Ib=t,Ib}var Ob,e_;function s8(){if(e_)return Ob;e_=1;var e=bo(),t=oC(),n=vo(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",h="[object Number]",f="[object Object]",g="[object RegExp]",w="[object Set]",x="[object String]",y="[object WeakMap]",p="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",P="[object Float64Array]",k="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",A={};A[b]=A[P]=A[k]=A[C]=A[S]=A[_]=A[T]=A[I]=A[L]=!0,A[r]=A[i]=A[p]=A[o]=A[v]=A[s]=A[l]=A[c]=A[d]=A[h]=A[f]=A[g]=A[w]=A[x]=A[y]=!1;function D(B){return n(B)&&t(B.length)&&!!A[e(B)]}return Ob=D,Ob}var Ab,t_;function _M(){if(t_)return Ab;t_=1;function e(t){return function(n){return t(n)}}return Ab=e,Ab}var Gu={exports:{}};Gu.exports;var n_;function l8(){return n_||(n_=1,function(e,t){var n=V5(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,s=o&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l}(Gu,Gu.exports)),Gu.exports}var Db,r_;function TM(){if(r_)return Db;r_=1;var e=s8(),t=_M(),n=l8(),r=n&&n.isTypedArray,i=r?t(r):e;return Db=i,Db}var Rb,a_;function c8(){if(a_)return Rb;a_=1;var e=a8(),t=aC(),n=Pa(),r=kM(),i=iC(),o=TM(),s=Object.prototype,l=s.hasOwnProperty;function c(d,h){var f=n(d),g=!f&&t(d),w=!f&&!g&&r(d),x=!f&&!g&&!w&&o(d),y=f||g||w||x,p=y?e(d.length,String):[],v=p.length;for(var b in d)(h||l.call(d,b))&&!(y&&(b=="length"||w&&(b=="offset"||b=="parent")||x&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,v)))&&p.push(b);return p}return Rb=c,Rb}var Eb,i_;function u8(){if(i_)return Eb;i_=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Eb=t,Eb}var Mb,o_;function IM(){if(o_)return Mb;o_=1;function e(t,n){return function(r){return t(n(r))}}return Mb=e,Mb}var Lb,s_;function d8(){if(s_)return Lb;s_=1;var e=IM(),t=e(Object.keys,Object);return Lb=t,Lb}var $b,l_;function h8(){if(l_)return $b;l_=1;var e=u8(),t=d8(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!e(o))return t(o);var s=[];for(var l in Object(o))r.call(o,l)&&l!="constructor"&&s.push(l);return s}return $b=i,$b}var jb,c_;function hh(){if(c_)return jb;c_=1;var e=q1(),t=oC();function n(r){return r!=null&&t(r.length)&&!e(r)}return jb=n,jb}var Fb,u_;function Ag(){if(u_)return Fb;u_=1;var e=c8(),t=h8(),n=hh();function r(i){return n(i)?e(i):t(i)}return Fb=r,Fb}var zb,d_;function f8(){if(d_)return zb;d_=1;var e=e8(),t=r8(),n=Ag();function r(i){return e(i,n,t)}return zb=r,zb}var Nb,h_;function p8(){if(h_)return Nb;h_=1;var e=f8(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,s,l,c,d,h){var f=l&t,g=e(o),w=g.length,x=e(s),y=x.length;if(w!=y&&!f)return!1;for(var p=w;p--;){var v=g[p];if(!(f?v in s:r.call(s,v)))return!1}var b=h.get(o),P=h.get(s);if(b&&P)return b==s&&P==o;var k=!0;h.set(o,s),h.set(s,o);for(var C=f;++p<w;){v=g[p];var S=o[v],_=s[v];if(c)var T=f?c(_,S,v,s,o,h):c(S,_,v,o,s,h);if(!(T===void 0?S===_||d(S,_,l,c,h):T)){k=!1;break}C||(C=v=="constructor")}if(k&&!C){var I=o.constructor,L=s.constructor;I!=L&&"constructor"in o&&"constructor"in s&&!(typeof I=="function"&&I instanceof I&&typeof L=="function"&&L instanceof L)&&(k=!1)}return h.delete(o),h.delete(s),k}return Nb=i,Nb}var Bb,f_;function g8(){if(f_)return Bb;f_=1;var e=Ns(),t=Ni(),n=e(t,"DataView");return Bb=n,Bb}var Hb,p_;function m8(){if(p_)return Hb;p_=1;var e=Ns(),t=Ni(),n=e(t,"Promise");return Hb=n,Hb}var Wb,g_;function OM(){if(g_)return Wb;g_=1;var e=Ns(),t=Ni(),n=e(t,"Set");return Wb=n,Wb}var qb,m_;function y8(){if(m_)return qb;m_=1;var e=Ns(),t=Ni(),n=e(t,"WeakMap");return qb=n,qb}var Ub,y_;function b8(){if(y_)return Ub;y_=1;var e=g8(),t=V1(),n=m8(),r=OM(),i=y8(),o=bo(),s=G5(),l="[object Map]",c="[object Object]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",g="[object DataView]",w=s(e),x=s(t),y=s(n),p=s(r),v=s(i),b=o;return(e&&b(new e(new ArrayBuffer(1)))!=g||t&&b(new t)!=l||n&&b(n.resolve())!=d||r&&b(new r)!=h||i&&b(new i)!=f)&&(b=function(P){var k=o(P),C=k==c?P.constructor:void 0,S=C?s(C):"";if(S)switch(S){case w:return g;case x:return l;case y:return d;case p:return h;case v:return f}return k}),Ub=b,Ub}var Vb,b_;function v8(){if(b_)return Vb;b_=1;var e=vM(),t=SM(),n=Z4(),r=p8(),i=b8(),o=Pa(),s=kM(),l=TM(),c=1,d="[object Arguments]",h="[object Array]",f="[object Object]",g=Object.prototype,w=g.hasOwnProperty;function x(y,p,v,b,P,k){var C=o(y),S=o(p),_=C?h:i(y),T=S?h:i(p);_=_==d?f:_,T=T==d?f:T;var I=_==f,L=T==f,A=_==T;if(A&&s(y)){if(!s(p))return!1;C=!0,I=!1}if(A&&!I)return k||(k=new e),C||l(y)?t(y,p,v,b,P,k):n(y,p,_,v,b,P,k);if(!(v&c)){var D=I&&w.call(y,"__wrapped__"),B=L&&w.call(p,"__wrapped__");if(D||B){var $=D?y.value():y,N=B?p.value():p;return k||(k=new e),P($,N,v,b,k)}}return A?(k||(k=new e),r(y,p,v,b,P,k)):!1}return Vb=x,Vb}var Gb,v_;function sC(){if(v_)return Gb;v_=1;var e=v8(),t=vo();function n(r,i,o,s,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,o,s,n,l)}return Gb=n,Gb}var Kb,x_;function x8(){if(x_)return Kb;x_=1;var e=vM(),t=sC(),n=1,r=2;function i(o,s,l,c){var d=l.length,h=d,f=!c;if(o==null)return!h;for(o=Object(o);d--;){var g=l[d];if(f&&g[2]?g[1]!==o[g[0]]:!(g[0]in o))return!1}for(;++d<h;){g=l[d];var w=g[0],x=o[w],y=g[1];if(f&&g[2]){if(x===void 0&&!(w in o))return!1}else{var p=new e;if(c)var v=c(x,y,w,o,s,p);if(!(v===void 0?t(y,x,n|r,c,p):v))return!1}}return!0}return Kb=i,Kb}var Yb,w_;function AM(){if(w_)return Yb;w_=1;var e=Jo();function t(n){return n===n&&!e(n)}return Yb=t,Yb}var Xb,C_;function w8(){if(C_)return Xb;C_=1;var e=AM(),t=Ag();function n(r){for(var i=t(r),o=i.length;o--;){var s=i[o],l=r[s];i[o]=[s,l,e(l)]}return i}return Xb=n,Xb}var Jb,S_;function DM(){if(S_)return Jb;S_=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Jb=e,Jb}var Qb,P_;function C8(){if(P_)return Qb;P_=1;var e=x8(),t=w8(),n=DM();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(s){return s===i||e(s,i,o)}}return Qb=r,Qb}var Zb,k_;function S8(){if(k_)return Zb;k_=1;function e(t,n){return t!=null&&n in Object(t)}return Zb=e,Zb}var ev,__;function P8(){if(__)return ev;__=1;var e=X5(),t=aC(),n=Pa(),r=iC(),i=oC(),o=kg();function s(l,c,d){c=e(c,l);for(var h=-1,f=c.length,g=!1;++h<f;){var w=o(c[h]);if(!(g=l!=null&&d(l,w)))break;l=l[w]}return g||++h!=f?g:(f=l==null?0:l.length,!!f&&i(f)&&r(w,f)&&(n(l)||t(l)))}return ev=s,ev}var tv,T_;function k8(){if(T_)return tv;T_=1;var e=S8(),t=P8();function n(r,i){return r!=null&&t(r,i,e)}return tv=n,tv}var nv,I_;function _8(){if(I_)return nv;I_=1;var e=sC(),t=J5(),n=k8(),r=W1(),i=AM(),o=DM(),s=kg(),l=1,c=2;function d(h,f){return r(h)&&i(f)?o(s(h),f):function(g){var w=t(g,h);return w===void 0&&w===f?n(g,h):e(f,w,l|c)}}return nv=d,nv}var rv,O_;function tc(){if(O_)return rv;O_=1;function e(t){return t}return rv=e,rv}var av,A_;function T8(){if(A_)return av;A_=1;function e(t){return function(n){return n==null?void 0:n[t]}}return av=e,av}var iv,D_;function I8(){if(D_)return iv;D_=1;var e=Y1();function t(n){return function(r){return e(r,n)}}return iv=t,iv}var ov,R_;function O8(){if(R_)return ov;R_=1;var e=T8(),t=I8(),n=W1(),r=kg();function i(o){return n(o)?e(r(o)):t(o)}return ov=i,ov}var sv,E_;function Qo(){if(E_)return sv;E_=1;var e=C8(),t=_8(),n=tc(),r=Pa(),i=O8();function o(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return sv=o,sv}var lv,M_;function RM(){if(M_)return lv;M_=1;function e(t,n,r,i){for(var o=t.length,s=r+(i?1:-1);i?s--:++s<o;)if(n(t[s],s,t))return s;return-1}return lv=e,lv}var cv,L_;function A8(){if(L_)return cv;L_=1;function e(t){return t!==t}return cv=e,cv}var uv,$_;function D8(){if($_)return uv;$_=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return uv=e,uv}var dv,j_;function R8(){if(j_)return dv;j_=1;var e=RM(),t=A8(),n=D8();function r(i,o,s){return o===o?n(i,o,s):e(i,t,s)}return dv=r,dv}var hv,F_;function E8(){if(F_)return hv;F_=1;var e=R8();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return hv=t,hv}var fv,z_;function M8(){if(z_)return fv;z_=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return fv=e,fv}var pv,N_;function L8(){if(N_)return pv;N_=1;function e(){}return pv=e,pv}var gv,B_;function $8(){if(B_)return gv;B_=1;var e=OM(),t=L8(),n=rC(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return gv=i,gv}var mv,H_;function j8(){if(H_)return mv;H_=1;var e=xM(),t=E8(),n=M8(),r=CM(),i=$8(),o=rC(),s=200;function l(c,d,h){var f=-1,g=t,w=c.length,x=!0,y=[],p=y;if(h)x=!1,g=n;else if(w>=s){var v=d?null:i(c);if(v)return o(v);x=!1,g=r,p=new e}else p=d?[]:y;e:for(;++f<w;){var b=c[f],P=d?d(b):b;if(b=h||b!==0?b:0,x&&P===P){for(var k=p.length;k--;)if(p[k]===P)continue e;d&&p.push(P),y.push(b)}else g(p,P,h)||(p!==y&&p.push(P),y.push(b))}return y}return mv=l,mv}var yv,W_;function F8(){if(W_)return yv;W_=1;var e=Qo(),t=j8();function n(r,i){return r&&r.length?t(r,e(i,2)):[]}return yv=n,yv}var z8=F8();const q_=vt(z8);function EM(e,t,n){return t===!0?q_(e,n):Dn(t)?q_(e,t):e}function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}var N8=["ref"];function U_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U_(Object(n),!0).forEach(function(r){Dg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LM(r.key),r)}}function H8(e,t,n){return t&&V_(e.prototype,t),n&&V_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function W8(e,t,n){return t=gp(t),q8(e,MM()?Reflect.construct(t,n||[],gp(e).constructor):t.apply(e,n))}function q8(e,t){if(t&&(Il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U8(e)}function U8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MM=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gp(e)}function V8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qx(e,t)}function qx(e,t){return qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qx(e,t)}function Dg(e,t,n){return t=LM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LM(e){var t=G8(e,"string");return Il(t)=="symbol"?t:t+""}function G8(e,t){if(Il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K8(e,t){if(e==null)return{};var n=Y8(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Y8(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function X8(e){return e.value}function J8(e,t){if(Ce.isValidElement(e))return Ce.cloneElement(e,t);if(typeof e=="function")return Ce.createElement(e,t);t.ref;var n=K8(t,N8);return Ce.createElement(nC,n)}var G_=1,Fo=function(e){function t(){var n;B8(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=W8(this,t,[].concat(i)),Dg(n,"lastBoundingBox",{width:-1,height:-1}),n}return V8(t,e),H8(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>G_||Math.abs(i.height-this.lastBoundingBox.height)>G_)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,h=i.chartHeight,f,g;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var w=this.getBBoxSnapshot();f={left:((d||0)-w.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();g={top:((h||0)-x.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Vi(Vi({},f),g)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,h=i.payload,f=Vi(Vi({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ce.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(w){r.wrapperNode=w}},J8(o,Vi(Vi({},this.props),{},{payload:EM(h,d,X8)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Vi(Vi({},this.defaultProps),r.props),s=o.layout;return s==="vertical"&&_t(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(u.PureComponent);Dg(Fo,"displayName","Legend");Dg(Fo,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bv,K_;function Q8(){if(K_)return bv;K_=1;var e=ch(),t=aC(),n=Pa(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return bv=i,bv}var vv,Y_;function $M(){if(Y_)return vv;Y_=1;var e=PM(),t=Q8();function n(r,i,o,s,l){var c=-1,d=r.length;for(o||(o=t),l||(l=[]);++c<d;){var h=r[c];i>0&&o(h)?i>1?n(h,i-1,o,s,l):e(l,h):s||(l[l.length]=h)}return l}return vv=n,vv}var xv,X_;function Z8(){if(X_)return xv;X_=1;function e(t){return function(n,r,i){for(var o=-1,s=Object(n),l=i(n),c=l.length;c--;){var d=l[t?c:++o];if(r(s[d],d,s)===!1)break}return n}}return xv=e,xv}var wv,J_;function e9(){if(J_)return wv;J_=1;var e=Z8(),t=e();return wv=t,wv}var Cv,Q_;function jM(){if(Q_)return Cv;Q_=1;var e=e9(),t=Ag();function n(r,i){return r&&e(r,i,t)}return Cv=n,Cv}var Sv,Z_;function t9(){if(Z_)return Sv;Z_=1;var e=hh();function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var s=i.length,l=r?s:-1,c=Object(i);(r?l--:++l<s)&&o(c[l],l,c)!==!1;);return i}}return Sv=t,Sv}var Pv,eT;function lC(){if(eT)return Pv;eT=1;var e=jM(),t=t9(),n=t(e);return Pv=n,Pv}var kv,tT;function FM(){if(tT)return kv;tT=1;var e=lC(),t=hh();function n(r,i){var o=-1,s=t(r)?Array(r.length):[];return e(r,function(l,c,d){s[++o]=i(l,c,d)}),s}return kv=n,kv}var _v,nT;function n9(){if(nT)return _v;nT=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return _v=e,_v}var Tv,rT;function r9(){if(rT)return Tv;rT=1;var e=Zl();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,s=n===n,l=e(n),c=r!==void 0,d=r===null,h=r===r,f=e(r);if(!d&&!f&&!l&&n>r||l&&c&&h&&!d&&!f||o&&c&&h||!i&&h||!s)return 1;if(!o&&!l&&!f&&n<r||f&&i&&s&&!o&&!l||d&&i&&s||!c&&s||!h)return-1}return 0}return Tv=t,Tv}var Iv,aT;function a9(){if(aT)return Iv;aT=1;var e=r9();function t(n,r,i){for(var o=-1,s=n.criteria,l=r.criteria,c=s.length,d=i.length;++o<c;){var h=e(s[o],l[o]);if(h){if(o>=d)return h;var f=i[o];return h*(f=="desc"?-1:1)}}return n.index-r.index}return Iv=t,Iv}var Ov,iT;function i9(){if(iT)return Ov;iT=1;var e=K1(),t=Y1(),n=Qo(),r=FM(),i=n9(),o=_M(),s=a9(),l=tc(),c=Pa();function d(h,f,g){f.length?f=e(f,function(y){return c(y)?function(p){return t(p,y.length===1?y[0]:y)}:y}):f=[l];var w=-1;f=e(f,o(n));var x=r(h,function(y,p,v){var b=e(f,function(P){return P(y)});return{criteria:b,index:++w,value:y}});return i(x,function(y,p){return s(y,p,g)})}return Ov=d,Ov}var Av,oT;function o9(){if(oT)return Av;oT=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return Av=e,Av}var Dv,sT;function s9(){if(sT)return Dv;sT=1;var e=o9(),t=Math.max;function n(r,i,o){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,l=-1,c=t(s.length-i,0),d=Array(c);++l<c;)d[l]=s[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=s[l];return h[i]=o(d),e(r,this,h)}}return Dv=n,Dv}var Rv,lT;function l9(){if(lT)return Rv;lT=1;function e(t){return function(){return t}}return Rv=e,Rv}var Ev,cT;function zM(){if(cT)return Ev;cT=1;var e=Ns(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Ev=t,Ev}var Mv,uT;function c9(){if(uT)return Mv;uT=1;var e=l9(),t=zM(),n=tc(),r=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:n;return Mv=r,Mv}var Lv,dT;function u9(){if(dT)return Lv;dT=1;var e=800,t=16,n=Date.now;function r(i){var o=0,s=0;return function(){var l=n(),c=t-(l-s);if(s=l,c>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return Lv=r,Lv}var $v,hT;function d9(){if(hT)return $v;hT=1;var e=c9(),t=u9(),n=t(e);return $v=n,$v}var jv,fT;function h9(){if(fT)return jv;fT=1;var e=tc(),t=s9(),n=d9();function r(i,o){return n(t(i,o,e),i+"")}return jv=r,jv}var Fv,pT;function Rg(){if(pT)return Fv;pT=1;var e=U1(),t=hh(),n=iC(),r=Jo();function i(o,s,l){if(!r(l))return!1;var c=typeof s;return(c=="number"?t(l)&&n(s,l.length):c=="string"&&s in l)?e(l[s],o):!1}return Fv=i,Fv}var zv,gT;function f9(){if(gT)return zv;gT=1;var e=$M(),t=i9(),n=h9(),r=Rg(),i=n(function(o,s){if(o==null)return[];var l=s.length;return l>1&&r(o,s[0],s[1])?s=[]:l>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(o,e(s,1),[])});return zv=i,zv}var p9=f9();const cC=vt(p9);function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(this,arguments)}function g9(e,t){return v9(e)||b9(e,t)||y9(e,t)||m9()}function m9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y9(e,t){if(e){if(typeof e=="string")return mT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mT(e,t)}}function mT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b9(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function v9(e){if(Array.isArray(e))return e}function yT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(n),!0).forEach(function(r){x9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x9(e,t,n){return t=w9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w9(e){var t=C9(e,"string");return xd(t)=="symbol"?t:t+""}function C9(e,t){if(xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(e){return Array.isArray(e)&&qr(e[0])&&qr(e[1])?e.join(" ~ "):e}var P9=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,o=i===void 0?{}:i,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,d=c===void 0?{}:c,h=t.payload,f=t.formatter,g=t.itemSorter,w=t.wrapperClassName,x=t.labelClassName,y=t.label,p=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,P=function(){if(h&&h.length){var D={padding:0,margin:0},B=(g?cC(h,g):h).map(function($,N){if($.type==="none")return null;var F=Nv({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),O=$.formatter||f||S9,R=$.value,E=$.name,z=R,q=E;if(O&&z!=null&&q!=null){var X=O(R,E,$,N,h);if(Array.isArray(X)){var H=g9(X,2);z=H[0],q=H[1]}else z=X}return Ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:F},qr(q)?Ce.createElement("span",{className:"recharts-tooltip-item-name"},q):null,qr(q)?Ce.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ce.createElement("span",{className:"recharts-tooltip-item-value"},z),Ce.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return Ce.createElement("ul",{className:"recharts-tooltip-item-list",style:D},B)}return null},k=Nv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),C=Nv({margin:0},d),S=!jn(y),_=S?y:"",T=wn("recharts-default-tooltip",w),I=wn("recharts-tooltip-label",x);S&&p&&h!==void 0&&h!==null&&(_=p(y,h));var L=b?{role:"status","aria-live":"assertive"}:{};return Ce.createElement("div",Ux({className:T,style:k},L),Ce.createElement("p",{className:I,style:C},Ce.isValidElement(_)?_:"".concat(_)),P())};function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function Jh(e,t,n){return t=k9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k9(e){var t=_9(e,"string");return wd(t)=="symbol"?t:t+""}function _9(e,t){if(wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dc="recharts-tooltip-wrapper",T9={visibility:"hidden"};function I9(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return wn(Dc,Jh(Jh(Jh(Jh({},"".concat(Dc,"-right"),_t(n)&&t&&_t(t.x)&&n>=t.x),"".concat(Dc,"-left"),_t(n)&&t&&_t(t.x)&&n<t.x),"".concat(Dc,"-bottom"),_t(r)&&t&&_t(t.y)&&r>=t.y),"".concat(Dc,"-top"),_t(r)&&t&&_t(t.y)&&r<t.y))}function bT(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(o&&_t(o[r]))return o[r];var h=n[r]-l-i,f=n[r]+i;if(t[r])return s[r]?h:f;if(s[r]){var g=h,w=c[r];return g<w?Math.max(f,c[r]):Math.max(h,c[r])}var x=f+l,y=c[r]+d;return x>y?Math.max(h,c[r]):Math.max(f,c[r])}function O9(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function A9(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,h,f;return s.height>0&&s.width>0&&n?(h=bT({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=bT({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),d=O9({translateX:h,translateY:f,useTranslate3d:l})):d=T9,{cssProperties:d,cssClasses:I9({translateX:h,translateY:f,coordinate:n})}}function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){Gx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BM(r.key),r)}}function E9(e,t,n){return t&&R9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function M9(e,t,n){return t=mp(t),L9(e,NM()?Reflect.construct(t,n||[],mp(e).constructor):t.apply(e,n))}function L9(e,t){if(t&&(Ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $9(e)}function $9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NM=function(){return!!e})()}function mp(e){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mp(e)}function j9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vx(e,t)}function Vx(e,t){return Vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vx(e,t)}function Gx(e,t,n){return t=BM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BM(e){var t=F9(e,"string");return Ol(t)=="symbol"?t:t+""}function F9(e,t){if(Ol(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wT=1,z9=function(e){function t(){var n;D9(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=M9(this,t,[].concat(i)),Gx(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Gx(n,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,d,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&d!==void 0?d:0}})}}),n}return j9(t,e),E9(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wT||Math.abs(r.height-this.state.lastBoundingBox.height)>wT)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,h=i.coordinate,f=i.hasPayload,g=i.isAnimationActive,w=i.offset,x=i.position,y=i.reverseDirection,p=i.useTranslate3d,v=i.viewBox,b=i.wrapperStyle,P=A9({allowEscapeViewBox:s,coordinate:h,offsetTopLeft:w,position:x,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),k=P.cssClasses,C=P.cssProperties,S=xT(xT({transition:g&&o?"transform ".concat(l,"ms ").concat(c):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return Ce.createElement("div",{tabIndex:-1,className:k,style:S,ref:function(T){r.wrapperNode=T}},d)}}])}(u.PureComponent),N9=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},nc={isSsr:N9()};function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ST(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){uC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WM(r.key),r)}}function W9(e,t,n){return t&&H9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q9(e,t,n){return t=yp(t),U9(e,HM()?Reflect.construct(t,n||[],yp(e).constructor):t.apply(e,n))}function U9(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V9(e)}function V9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HM=function(){return!!e})()}function yp(e){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yp(e)}function G9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kx(e,t)}function Kx(e,t){return Kx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kx(e,t)}function uC(e,t,n){return t=WM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WM(e){var t=K9(e,"string");return Al(t)=="symbol"?t:t+""}function K9(e,t){if(Al(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Y9(e){return e.dataKey}function X9(e,t){return Ce.isValidElement(e)?Ce.cloneElement(e,t):typeof e=="function"?Ce.createElement(e,t):Ce.createElement(P9,t)}var ui=function(e){function t(){return B9(this,t),q9(this,t,arguments)}return G9(t,e),W9(t,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,h=i.coordinate,f=i.filterNull,g=i.isAnimationActive,w=i.offset,x=i.payload,y=i.payloadUniqBy,p=i.position,v=i.reverseDirection,b=i.useTranslate3d,P=i.viewBox,k=i.wrapperStyle,C=x??[];f&&C.length&&(C=EM(x.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),y,Y9));var S=C.length>0;return Ce.createElement(z9,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:g,active:o,coordinate:h,hasPayload:S,offset:w,position:p,reverseDirection:v,useTranslate3d:b,viewBox:P,wrapperStyle:k},X9(d,ST(ST({},this.props),{},{payload:C})))}}])}(u.PureComponent);uC(ui,"displayName","Tooltip");uC(ui,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Bv,PT;function J9(){if(PT)return Bv;PT=1;var e=Ni(),t=function(){return e.Date.now()};return Bv=t,Bv}var Hv,kT;function Q9(){if(kT)return Hv;kT=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Hv=t,Hv}var Wv,_T;function Z9(){if(_T)return Wv;_T=1;var e=Q9(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Wv=n,Wv}var qv,TT;function qM(){if(TT)return qv;TT=1;var e=Z9(),t=Jo(),n=Zl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=o.test(d);return f||s.test(d)?l(d.slice(2),f?2:8):i.test(d)?r:+d}return qv=c,qv}var Uv,IT;function e7(){if(IT)return Uv;IT=1;var e=Jo(),t=J9(),n=qM(),r="Expected a function",i=Math.max,o=Math.min;function s(l,c,d){var h,f,g,w,x,y,p=0,v=!1,b=!1,P=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,e(d)&&(v=!!d.leading,b="maxWait"in d,g=b?i(n(d.maxWait)||0,c):g,P="trailing"in d?!!d.trailing:P);function k(B){var $=h,N=f;return h=f=void 0,p=B,w=l.apply(N,$),w}function C(B){return p=B,x=setTimeout(T,c),v?k(B):w}function S(B){var $=B-y,N=B-p,F=c-$;return b?o(F,g-N):F}function _(B){var $=B-y,N=B-p;return y===void 0||$>=c||$<0||b&&N>=g}function T(){var B=t();if(_(B))return I(B);x=setTimeout(T,S(B))}function I(B){return x=void 0,P&&h?k(B):(h=f=void 0,w)}function L(){x!==void 0&&clearTimeout(x),p=0,h=y=f=x=void 0}function A(){return x===void 0?w:I(t())}function D(){var B=t(),$=_(B);if(h=arguments,f=this,y=B,$){if(x===void 0)return C(y);if(b)return clearTimeout(x),x=setTimeout(T,c),k(y)}return x===void 0&&(x=setTimeout(T,c)),w}return D.cancel=L,D.flush=A,D}return Uv=s,Uv}var Vv,OT;function t7(){if(OT)return Vv;OT=1;var e=e7(),t=Jo(),n="Expected a function";function r(i,o,s){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(l="leading"in s?!!s.leading:l,c="trailing"in s?!!s.trailing:c),e(i,o,{leading:l,maxWait:o,trailing:c})}return Vv=r,Vv}var n7=t7();const UM=vt(n7);function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(r){r7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r7(e,t,n){return t=a7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a7(e){var t=i7(e,"string");return Cd(t)=="symbol"?t:t+""}function i7(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o7(e,t){return u7(e)||c7(e,t)||l7(e,t)||s7()}function s7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(e,t){if(e){if(typeof e=="string")return DT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DT(e,t)}}function DT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c7(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function u7(e){if(Array.isArray(e))return e}var VM=u.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=e.width,s=o===void 0?"100%":o,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,h=d===void 0?0:d,f=e.minHeight,g=e.maxHeight,w=e.children,x=e.debounce,y=x===void 0?0:x,p=e.id,v=e.className,b=e.onResize,P=e.style,k=P===void 0?{}:P,C=u.useRef(null),S=u.useRef();S.current=b,u.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var _=u.useState({containerWidth:i.width,containerHeight:i.height}),T=o7(_,2),I=T[0],L=T[1],A=u.useCallback(function(B,$){L(function(N){var F=Math.round(B),O=Math.round($);return N.containerWidth===F&&N.containerHeight===O?N:{containerWidth:F,containerHeight:O}})},[]);u.useEffect(function(){var B=function(E){var z,q=E[0].contentRect,X=q.width,H=q.height;A(X,H),(z=S.current)===null||z===void 0||z.call(S,X,H)};y>0&&(B=UM(B,y,{trailing:!0,leading:!1}));var $=new ResizeObserver(B),N=C.current.getBoundingClientRect(),F=N.width,O=N.height;return A(F,O),$.observe(C.current),function(){$.disconnect()}},[A,y]);var D=u.useMemo(function(){var B=I.containerWidth,$=I.containerHeight;if(B<0||$<0)return null;io(hs(s)||hs(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),io(!n||n>0,"The aspect(%s) must be greater than zero.",n);var N=hs(s)?B:s,F=hs(c)?$:c;n&&n>0&&(N?F=N/n:F&&(N=F*n),g&&F>g&&(F=g)),io(N>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,F,s,c,h,f,n);var O=!Array.isArray(w)&&ao(w.type).endsWith("Chart");return Ce.Children.map(w,function(R){return Ce.isValidElement(R)?u.cloneElement(R,Qh({width:N,height:F},O?{style:Qh({height:"100%",width:"100%",maxHeight:F,maxWidth:N},R.props.style)}:{})):R})},[n,w,c,g,f,h,I,s]);return Ce.createElement("div",{id:p?"".concat(p):void 0,className:wn("recharts-responsive-container",v),style:Qh(Qh({},k),{},{width:s,height:c,minWidth:h,minHeight:f,maxHeight:g}),ref:C},D)}),GM=function(t){return null};GM.displayName="Cell";function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(n),!0).forEach(function(r){d7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d7(e,t,n){return t=h7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7(e){var t=f7(e,"string");return Sd(t)=="symbol"?t:t+""}function f7(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ys={widthCache:{},cacheCount:0},p7=2e3,g7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ET="recharts_measurement_span";function m7(e){var t=Yx({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Zu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||nc.isSsr)return{width:0,height:0};var r=m7(n),i=JSON.stringify({text:t,copyStyle:r});if(Ys.widthCache[i])return Ys.widthCache[i];try{var o=document.getElementById(ET);o||(o=document.createElement("span"),o.setAttribute("id",ET),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=Yx(Yx({},g7),r);Object.assign(o.style,s),o.textContent="".concat(t);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return Ys.widthCache[i]=c,++Ys.cacheCount>p7&&(Ys.cacheCount=0,Ys.widthCache={}),c}catch{return{width:0,height:0}}},y7=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function bp(e,t){return w7(e)||x7(e,t)||v7(e,t)||b7()}function b7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v7(e,t){if(e){if(typeof e=="string")return MT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MT(e,t)}}function MT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x7(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function w7(e){if(Array.isArray(e))return e}function C7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P7(r.key),r)}}function S7(e,t,n){return t&&LT(e.prototype,t),n&&LT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P7(e){var t=k7(e,"string");return Pd(t)=="symbol"?t:t+""}function k7(e,t){if(Pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $T=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,T7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},I7=Object.keys(KM),ol="NaN";function O7(e,t){return e*KM[t]}var Zh=function(){function e(t,n){C7(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!_7.test(n)&&(this.num=NaN,this.unit=""),I7.includes(n)&&(this.num=O7(t,n),this.unit="px")}return S7(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=T7.exec(n))!==null&&r!==void 0?r:[],o=bp(i,3),s=o[1],l=o[2];return new e(parseFloat(s),l??"")}}])}();function YM(e){if(e.includes(ol))return ol;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=$T.exec(t))!==null&&n!==void 0?n:[],i=bp(r,4),o=i[1],s=i[2],l=i[3],c=Zh.parse(o??""),d=Zh.parse(l??""),h=s==="*"?c.multiply(d):c.divide(d);if(h.isNaN())return ol;t=t.replace($T,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,g=(f=jT.exec(t))!==null&&f!==void 0?f:[],w=bp(g,4),x=w[1],y=w[2],p=w[3],v=Zh.parse(x??""),b=Zh.parse(p??""),P=y==="+"?v.add(b):v.subtract(b);if(P.isNaN())return ol;t=t.replace(jT,P.toString())}return t}var FT=/\(([^()]*)\)/;function A7(e){for(var t=e;t.includes("(");){var n=FT.exec(t),r=bp(n,2),i=r[1];t=t.replace(FT,YM(i))}return t}function D7(e){var t=e.replace(/\s+/g,"");return t=A7(t),t=YM(t),t}function R7(e){try{return D7(e)}catch{return ol}}function Gv(e){var t=R7(e.slice(5,-1));return t===ol?"":t}var E7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],M7=["dx","dy","angle","className","breakAll"];function Xx(){return Xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xx.apply(this,arguments)}function zT(e,t){if(e==null)return{};var n=L7(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L7(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function NT(e,t){return z7(e)||F7(e,t)||j7(e,t)||$7()}function $7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j7(e,t){if(e){if(typeof e=="string")return BT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BT(e,t)}}function BT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F7(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function z7(e){if(Array.isArray(e))return e}var XM=/[ \f\n\r\t\v\u2028\u2029]+/,JM=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var o=[];jn(n)||(r?o=n.toString().split(""):o=n.toString().split(XM));var s=o.map(function(c){return{word:c,width:Zu(c,i).width}}),l=r?0:Zu(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},N7=function(t,n,r,i,o){var s=t.maxLines,l=t.children,c=t.style,d=t.breakAll,h=_t(s),f=l,g=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return N.reduce(function(F,O){var R=O.word,E=O.width,z=F[F.length-1];if(z&&(i==null||o||z.width+E+r<Number(i)))z.words.push(R),z.width+=E+r;else{var q={words:[R],width:E};F.push(q)}return F},[])},w=g(n),x=function(N){return N.reduce(function(F,O){return F.width>O.width?F:O})};if(!h)return w;for(var y="…",p=function(N){var F=f.slice(0,N),O=JM({breakAll:d,style:c,children:F+y}).wordsWithComputedWidth,R=g(O),E=R.length>s||x(R).width>Number(i);return[E,R]},v=0,b=f.length-1,P=0,k;v<=b&&P<=f.length-1;){var C=Math.floor((v+b)/2),S=C-1,_=p(S),T=NT(_,2),I=T[0],L=T[1],A=p(C),D=NT(A,1),B=D[0];if(!I&&!B&&(v=C+1),I&&B&&(b=C-1),!I&&B){k=L;break}P++}return k||w},HT=function(t){var n=jn(t)?[]:t.toString().split(XM);return[{words:n}]},B7=function(t){var n=t.width,r=t.scaleToFit,i=t.children,o=t.style,s=t.breakAll,l=t.maxLines;if((n||r)&&!nc.isSsr){var c,d,h=JM({breakAll:s,children:i,style:o});if(h){var f=h.wordsWithComputedWidth,g=h.spaceWidth;c=f,d=g}else return HT(i);return N7({breakAll:s,children:i,maxLines:l,style:o},c,d,n,r)}return HT(i)},WT="#808080",vp=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,o=i===void 0?0:i,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,d=c===void 0?"0.71em":c,h=t.scaleToFit,f=h===void 0?!1:h,g=t.textAnchor,w=g===void 0?"start":g,x=t.verticalAnchor,y=x===void 0?"end":x,p=t.fill,v=p===void 0?WT:p,b=zT(t,E7),P=u.useMemo(function(){return B7({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),k=b.dx,C=b.dy,S=b.angle,_=b.className,T=b.breakAll,I=zT(b,M7);if(!qr(r)||!qr(o))return null;var L=r+(_t(k)?k:0),A=o+(_t(C)?C:0),D;switch(y){case"start":D=Gv("calc(".concat(d,")"));break;case"middle":D=Gv("calc(".concat((P.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:D=Gv("calc(".concat(P.length-1," * -").concat(l,")"));break}var B=[];if(f){var $=P[0].width,N=b.width;B.push("scale(".concat((_t(N)?N/$:1)/$,")"))}return S&&B.push("rotate(".concat(S,", ").concat(L,", ").concat(A,")")),B.length&&(I.transform=B.join(" ")),Ce.createElement("text",Xx({},Hn(I,!0),{x:L,y:A,className:wn("recharts-text",_),textAnchor:w,fill:v.includes("url")?WT:v}),P.map(function(F,O){var R=F.words.join(T?"":" ");return Ce.createElement("tspan",{x:L,dy:O===0?D:l,key:"".concat(R,"-").concat(O)},R)}))};function zo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dC(e){let t,n,r;e.length!==2?(t=zo,n=(l,c)=>zo(e(l),c),r=(l,c)=>e(l)-c):(t=e===zo||e===H7?e:W7,n=e,r=e);function i(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;n(l[f],c)<0?d=f+1:h=f}while(d<h)}return d}function o(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;n(l[f],c)<=0?d=f+1:h=f}while(d<h)}return d}function s(l,c,d=0,h=l.length){const f=i(l,c,d,h-1);return f>d&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:s,right:o}}function W7(){return 0}function QM(e){return e===null?NaN:+e}function*q7(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const U7=dC(zo),fh=U7.right;dC(QM).center;class qT extends Map{constructor(t,n=K7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(UT(this,t))}has(t){return super.has(UT(this,t))}set(t,n){return super.set(V7(this,t),n)}delete(t){return super.delete(G7(this,t))}}function UT({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function V7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function G7({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function K7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Y7(e=zo){if(e===zo)return ZM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function ZM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const X7=Math.sqrt(50),J7=Math.sqrt(10),Q7=Math.sqrt(2);function xp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=X7?10:o>=J7?5:o>=Q7?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/s,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*s,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?xp(e,t,n*2):[l,c,d]}function Jx(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?xp(t,e,n):xp(e,t,n);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(r)if(s<0)for(let d=0;d<l;++d)c[d]=(o-d)/-s;else for(let d=0;d<l;++d)c[d]=(o-d)*s;else if(s<0)for(let d=0;d<l;++d)c[d]=(i+d)/-s;else for(let d=0;d<l;++d)c[d]=(i+d)*s;return c}function Qx(e,t,n){return t=+t,e=+e,n=+n,xp(e,t,n)[2]}function Zx(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Qx(t,e,n):Qx(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function VT(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function GT(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function eL(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?ZM:Y7(i);r>n;){if(r-n>600){const c=r-n+1,d=t-n+1,h=Math.log(c),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(c-f)/c)*(d-c/2<0?-1:1),w=Math.max(n,Math.floor(t-d*f/c+g)),x=Math.min(r,Math.floor(t+(c-d)*f/c+g));eL(e,t,w,x,i)}const o=e[t];let s=n,l=r;for(Rc(e,n,t),i(e[r],o)>0&&Rc(e,n,r);s<l;){for(Rc(e,s,l),++s,--l;i(e[s],o)<0;)++s;for(;i(e[l],o)>0;)--l}i(e[n],o)===0?Rc(e,n,l):(++l,Rc(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Rc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Z7(e,t,n){if(e=Float64Array.from(q7(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return GT(e);if(t>=1)return VT(e);var r,i=(r-1)*t,o=Math.floor(i),s=VT(eL(e,o).subarray(0,o+1)),l=GT(e.subarray(o+1));return s+(l-s)*(i-o)}}function eU(e,t,n=QM){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),l=+n(e[o+1],o+1,e);return s+(l-s)*(i-o)}}function tU(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ew=Symbol("implicit");function hC(){var e=new qT,t=[],n=[],r=ew;function i(o){let s=e.get(o);if(s===void 0){if(r!==ew)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new qT;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return hC(t,n).unknown(r)},ri.apply(i,arguments),i}function kd(){var e=hC().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,s,l=!1,c=0,d=0,h=.5;delete e.unknown;function f(){var g=t().length,w=i<r,x=w?i:r,y=w?r:i;o=(y-x)/Math.max(1,g-c+d*2),l&&(o=Math.floor(o)),x+=(y-x-o*(g-c))*h,s=o*(1-c),l&&(x=Math.round(x),s=Math.round(s));var p=tU(g).map(function(v){return x+o*v});return n(w?p.reverse():p)}return e.domain=function(g){return arguments.length?(t(g),f()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(g){return arguments.length?(l=!!g,f()):l},e.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),f()):c},e.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),f()):c},e.paddingOuter=function(g){return arguments.length?(d=+g,f()):d},e.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),f()):h},e.copy=function(){return kd(t(),[r,i]).round(l).paddingInner(c).paddingOuter(d).align(h)},ri.apply(f(),arguments)}function tL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return tL(t())},e}function ed(){return tL(kd.apply(null,arguments).paddingInner(1))}function fC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nL(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ph(){}var _d=.7,wp=1/_d,hl="\\s*([+-]?\\d+)\\s*",Td="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nU=/^#([0-9a-f]{3,8})$/,rU=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),aU=new RegExp(`^rgb\\(${Mi},${Mi},${Mi}\\)$`),iU=new RegExp(`^rgba\\(${hl},${hl},${hl},${Td}\\)$`),oU=new RegExp(`^rgba\\(${Mi},${Mi},${Mi},${Td}\\)$`),sU=new RegExp(`^hsl\\(${Td},${Mi},${Mi}\\)$`),lU=new RegExp(`^hsla\\(${Td},${Mi},${Mi},${Td}\\)$`),KT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fC(ph,Id,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YT,formatHex:YT,formatHex8:cU,formatHsl:uU,formatRgb:XT,toString:XT});function YT(){return this.rgb().formatHex()}function cU(){return this.rgb().formatHex8()}function uU(){return rL(this).formatHsl()}function XT(){return this.rgb().formatRgb()}function Id(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?JT(t):n===3?new Ca(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ef(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ef(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rU.exec(e))?new Ca(t[1],t[2],t[3],1):(t=aU.exec(e))?new Ca(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iU.exec(e))?ef(t[1],t[2],t[3],t[4]):(t=oU.exec(e))?ef(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sU.exec(e))?eI(t[1],t[2]/100,t[3]/100,1):(t=lU.exec(e))?eI(t[1],t[2]/100,t[3]/100,t[4]):KT.hasOwnProperty(e)?JT(KT[e]):e==="transparent"?new Ca(NaN,NaN,NaN,0):null}function JT(e){return new Ca(e>>16&255,e>>8&255,e&255,1)}function ef(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ca(e,t,n,r)}function dU(e){return e instanceof ph||(e=Id(e)),e?(e=e.rgb(),new Ca(e.r,e.g,e.b,e.opacity)):new Ca}function tw(e,t,n,r){return arguments.length===1?dU(e):new Ca(e,t,n,r??1)}function Ca(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}fC(Ca,tw,nL(ph,{brighter(e){return e=e==null?wp:Math.pow(wp,e),new Ca(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_d:Math.pow(_d,e),new Ca(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ca(ks(this.r),ks(this.g),ks(this.b),Cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QT,formatHex:QT,formatHex8:hU,formatRgb:ZT,toString:ZT}));function QT(){return`#${fs(this.r)}${fs(this.g)}${fs(this.b)}`}function hU(){return`#${fs(this.r)}${fs(this.g)}${fs(this.b)}${fs((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZT(){const e=Cp(this.opacity);return`${e===1?"rgb(":"rgba("}${ks(this.r)}, ${ks(this.g)}, ${ks(this.b)}${e===1?")":`, ${e})`}`}function Cp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ks(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fs(e){return e=ks(e),(e<16?"0":"")+e.toString(16)}function eI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mi(e,t,n,r)}function rL(e){if(e instanceof mi)return new mi(e.h,e.s,e.l,e.opacity);if(e instanceof ph||(e=Id(e)),!e)return new mi;if(e instanceof mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,l=o-i,c=(o+i)/2;return l?(t===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-t)/l+2:s=(t-n)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new mi(s,l,c,e.opacity)}function fU(e,t,n,r){return arguments.length===1?rL(e):new mi(e,t,n,r??1)}function mi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}fC(mi,fU,nL(ph,{brighter(e){return e=e==null?wp:Math.pow(wp,e),new mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_d:Math.pow(_d,e),new mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ca(Kv(e>=240?e-240:e+120,i,r),Kv(e,i,r),Kv(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mi(tI(this.h),tf(this.s),tf(this.l),Cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cp(this.opacity);return`${e===1?"hsl(":"hsla("}${tI(this.h)}, ${tf(this.s)*100}%, ${tf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tI(e){return e=(e||0)%360,e<0?e+360:e}function tf(e){return Math.max(0,Math.min(1,e||0))}function Kv(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pC=e=>()=>e;function pU(e,t){return function(n){return e+n*t}}function gU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mU(e){return(e=+e)==1?aL:function(t,n){return n-t?gU(t,n,e):pC(isNaN(t)?n:t)}}function aL(e,t){var n=t-e;return n?pU(e,n):pC(isNaN(e)?t:e)}const nI=function e(t){var n=mU(t);function r(i,o){var s=n((i=tw(i)).r,(o=tw(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),d=aL(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=c(h),i.opacity=d(h),i+""}}return r.gamma=e,r}(1);function yU(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function bU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vU(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=rc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function xU(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Sp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wU(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=rc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var nw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yv=new RegExp(nw.source,"g");function CU(e){return function(){return e}}function SU(e){return function(t){return e(t)+""}}function PU(e,t){var n=nw.lastIndex=Yv.lastIndex=0,r,i,o,s=-1,l=[],c=[];for(e=e+"",t=t+"";(r=nw.exec(e))&&(i=Yv.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:Sp(r,i)})),n=Yv.lastIndex;return n<t.length&&(o=t.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?SU(c[0].x):CU(t):(t=c.length,function(d){for(var h=0,f;h<t;++h)l[(f=c[h]).i]=f.x(d);return l.join("")})}function rc(e,t){var n=typeof t,r;return t==null||n==="boolean"?pC(t):(n==="number"?Sp:n==="string"?(r=Id(t))?(t=r,nI):PU:t instanceof Id?nI:t instanceof Date?xU:bU(t)?yU:Array.isArray(t)?vU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wU:Sp)(e,t)}function gC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function kU(e,t){t===void 0&&(t=e,e=rc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[l](s-l)}}function _U(e){return function(){return e}}function Pp(e){return+e}var rI=[0,1];function ga(e){return e}function rw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_U(isNaN(t)?NaN:.5)}function TU(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function IU(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=rw(i,r),o=n(s,o)):(r=rw(r,i),o=n(o,s)),function(l){return o(r(l))}}function OU(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=rw(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(l){var c=fh(e,l,1,r)-1;return o[c](i[c](l))}}function gh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Eg(){var e=rI,t=rI,n=rc,r,i,o,s=ga,l,c,d;function h(){var g=Math.min(e.length,t.length);return s!==ga&&(s=TU(e[0],e[g-1])),l=g>2?OU:IU,c=d=null,f}function f(g){return g==null||isNaN(g=+g)?o:(c||(c=l(e.map(r),t,n)))(r(s(g)))}return f.invert=function(g){return s(i((d||(d=l(t,e.map(r),Sp)))(g)))},f.domain=function(g){return arguments.length?(e=Array.from(g,Pp),h()):e.slice()},f.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},f.rangeRound=function(g){return t=Array.from(g),n=gC,h()},f.clamp=function(g){return arguments.length?(s=g?!0:ga,h()):s!==ga},f.interpolate=function(g){return arguments.length?(n=g,h()):n},f.unknown=function(g){return arguments.length?(o=g,f):o},function(g,w){return r=g,i=w,h()}}function mC(){return Eg()(ga,ga)}function AU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Dl(e){return e=kp(Math.abs(e)),e?e[1]:NaN}function DU(e,t){return function(n,r){for(var i=n.length,o=[],s=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),o.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[s=(s+1)%e.length];return o.reverse().join(t)}}function RU(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var EU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Od(e){if(!(t=EU.exec(e)))throw new Error("invalid format: "+e);var t;return new yC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Od.prototype=yC.prototype;function yC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MU(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var iL;function LU(e,t){var n=kp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(iL=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+kp(e,Math.max(0,t+o-1))[0]}function aI(e,t){var n=kp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const iI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>aI(e*100,t),r:aI,s:LU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oI(e){return e}var sI=Array.prototype.map,lI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $U(e){var t=e.grouping===void 0||e.thousands===void 0?oI:DU(sI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?oI:RU(sI.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=Od(f);var g=f.fill,w=f.align,x=f.sign,y=f.symbol,p=f.zero,v=f.width,b=f.comma,P=f.precision,k=f.trim,C=f.type;C==="n"?(b=!0,C="g"):iI[C]||(P===void 0&&(P=12),k=!0,C="g"),(p||g==="0"&&w==="=")&&(p=!0,g="0",w="=");var S=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",_=y==="$"?r:/[%p]/.test(C)?s:"",T=iI[C],I=/[defgprs%]/.test(C);P=P===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function L(A){var D=S,B=_,$,N,F;if(C==="c")B=T(A)+B,A="";else{A=+A;var O=A<0||1/A<0;if(A=isNaN(A)?c:T(Math.abs(A),P),k&&(A=MU(A)),O&&+A==0&&x!=="+"&&(O=!1),D=(O?x==="("?x:l:x==="-"||x==="("?"":x)+D,B=(C==="s"?lI[8+iL/3]:"")+B+(O&&x==="("?")":""),I){for($=-1,N=A.length;++$<N;)if(F=A.charCodeAt($),48>F||F>57){B=(F===46?i+A.slice($+1):A.slice($))+B,A=A.slice(0,$);break}}}b&&!p&&(A=t(A,1/0));var R=D.length+A.length+B.length,E=R<v?new Array(v-R+1).join(g):"";switch(b&&p&&(A=t(E+A,E.length?v-B.length:1/0),E=""),w){case"<":A=D+A+B+E;break;case"=":A=D+E+A+B;break;case"^":A=E.slice(0,R=E.length>>1)+D+A+B+E.slice(R);break;default:A=E+D+A+B;break}return o(A)}return L.toString=function(){return f+""},L}function h(f,g){var w=d((f=Od(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Dl(g)/3)))*3,y=Math.pow(10,-x),p=lI[8+x/3];return function(v){return w(y*v)+p}}return{format:d,formatPrefix:h}}var nf,bC,oL;jU({thousands:",",grouping:[3],currency:["$",""]});function jU(e){return nf=$U(e),bC=nf.format,oL=nf.formatPrefix,nf}function FU(e){return Math.max(0,-Dl(Math.abs(e)))}function zU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dl(t)/3)))*3-Dl(Math.abs(e)))}function NU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dl(t)-Dl(e))+1}function sL(e,t,n,r){var i=Zx(e,t,n),o;switch(r=Od(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=zU(i,s))&&(r.precision=o),oL(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=NU(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=FU(i))&&(r.precision=o-(r.type==="%")*2);break}}return bC(r)}function Zo(e){var t=e.domain;return e.ticks=function(n){var r=t();return Jx(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return sL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],l=r[o],c,d,h=10;for(l<s&&(d=s,s=l,l=d,d=i,i=o,o=d);h-- >0;){if(d=Qx(s,l,n),d===c)return r[i]=s,r[o]=l,t(r);if(d>0)s=Math.floor(s/d)*d,l=Math.ceil(l/d)*d;else if(d<0)s=Math.ceil(s*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function _p(){var e=mC();return e.copy=function(){return gh(e,_p())},ri.apply(e,arguments),Zo(e)}function lL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Pp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return lL(e).unknown(t)},e=arguments.length?Array.from(e,Pp):[0,1],Zo(n)}function cL(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function cI(e){return Math.log(e)}function uI(e){return Math.exp(e)}function BU(e){return-Math.log(-e)}function HU(e){return-Math.exp(-e)}function WU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qU(e){return e===10?WU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function UU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dI(e){return(t,n)=>-e(-t,n)}function vC(e){const t=e(cI,uI),n=t.domain;let r=10,i,o;function s(){return i=UU(r),o=qU(r),n()[0]<0?(i=dI(i),o=dI(o),e(BU,HU)):e(cI,uI),t}return t.base=function(l){return arguments.length?(r=+l,s()):r},t.domain=function(l){return arguments.length?(n(l),s()):n()},t.ticks=l=>{const c=n();let d=c[0],h=c[c.length-1];const f=h<d;f&&([d,h]=[h,d]);let g=i(d),w=i(h),x,y;const p=l==null?10:+l;let v=[];if(!(r%1)&&w-g<p){if(g=Math.floor(g),w=Math.ceil(w),d>0){for(;g<=w;++g)for(x=1;x<r;++x)if(y=g<0?x/o(-g):x*o(g),!(y<d)){if(y>h)break;v.push(y)}}else for(;g<=w;++g)for(x=r-1;x>=1;--x)if(y=g>0?x/o(-g):x*o(g),!(y<d)){if(y>h)break;v.push(y)}v.length*2<p&&(v=Jx(d,h,p))}else v=Jx(g,w,Math.min(w-g,p)).map(o);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Od(c)).precision==null&&(c.trim=!0),c=bC(c)),l===1/0)return c;const d=Math.max(1,r*l/t.ticks().length);return h=>{let f=h/o(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=d?c(h):""}},t.nice=()=>n(cL(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),t}function uL(){const e=vC(Eg()).domain([1,10]);return e.copy=()=>gh(e,uL()).base(e.base()),ri.apply(e,arguments),e}function hI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function fI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xC(e){var t=1,n=e(hI(t),fI(t));return n.constant=function(r){return arguments.length?e(hI(t=+r),fI(t)):t},Zo(n)}function dL(){var e=xC(Eg());return e.copy=function(){return gh(e,dL()).constant(e.constant())},ri.apply(e,arguments)}function pI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GU(e){return e<0?-e*e:e*e}function wC(e){var t=e(ga,ga),n=1;function r(){return n===1?e(ga,ga):n===.5?e(VU,GU):e(pI(n),pI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zo(t)}function CC(){var e=wC(Eg());return e.copy=function(){return gh(e,CC()).exponent(e.exponent())},ri.apply(e,arguments),e}function KU(){return CC.apply(null,arguments).exponent(.5)}function gI(e){return Math.sign(e)*e*e}function YU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hL(){var e=mC(),t=[0,1],n=!1,r;function i(o){var s=YU(e(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return e.invert(gI(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,Pp)).map(gI)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return hL(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ri.apply(i,arguments),Zo(i)}function fL(){var e=[],t=[],n=[],r;function i(){var s=0,l=Math.max(1,t.length);for(n=new Array(l-1);++s<l;)n[s-1]=eU(e,s/l);return o}function o(s){return s==null||isNaN(s=+s)?r:t[fh(n,s)]}return o.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(zo),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return fL().domain(e).range(t).unknown(r)},ri.apply(o,arguments)}function pL(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[fh(r,c,0,n)]:o}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return pL().domain([e,t]).range(i).unknown(o)},ri.apply(Zo(s),arguments)}function gL(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[fh(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return gL().domain(e).range(t).unknown(n)},ri.apply(i,arguments)}const Xv=new Date,Jv=new Date;function Ur(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let d;do c.push(d=new Date(+o)),t(o,l),e(o);while(d<o&&o<s);return c},i.filter=o=>Ur(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!o(s););else for(;--l>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(Xv.setTime(+o),Jv.setTime(+s),e(Xv),e(Jv),Math.floor(n(Xv,Jv))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Tp=Ur(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ur(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Tp);Tp.range;const eo=1e3,Ga=eo*60,to=Ga*60,ho=to*24,SC=ho*7,mI=ho*30,Qv=ho*365,ps=Ur(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCSeconds());ps.range;const PC=Ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo)},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getMinutes());PC.range;const kC=Ur(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getUTCMinutes());kC.range;const _C=Ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo-e.getMinutes()*Ga)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getHours());_C.range;const TC=Ur(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getUTCHours());TC.range;const mh=Ur(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ga)/ho,e=>e.getDate()-1);mh.range;const Mg=Ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ho,e=>e.getUTCDate()-1);Mg.range;const mL=Ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ho,e=>Math.floor(e/ho));mL.range;function Bs(e){return Ur(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ga)/SC)}const Lg=Bs(0),Ip=Bs(1),XU=Bs(2),JU=Bs(3),Rl=Bs(4),QU=Bs(5),ZU=Bs(6);Lg.range;Ip.range;XU.range;JU.range;Rl.range;QU.range;ZU.range;function Hs(e){return Ur(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/SC)}const $g=Hs(0),Op=Hs(1),eV=Hs(2),tV=Hs(3),El=Hs(4),nV=Hs(5),rV=Hs(6);$g.range;Op.range;eV.range;tV.range;El.range;nV.range;rV.range;const IC=Ur(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IC.range;const OC=Ur(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());OC.range;const fo=Ur(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ur(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});fo.range;const po=Ur(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ur(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});po.range;function yL(e,t,n,r,i,o){const s=[[ps,1,eo],[ps,5,5*eo],[ps,15,15*eo],[ps,30,30*eo],[o,1,Ga],[o,5,5*Ga],[o,15,15*Ga],[o,30,30*Ga],[i,1,to],[i,3,3*to],[i,6,6*to],[i,12,12*to],[r,1,ho],[r,2,2*ho],[n,1,SC],[t,1,mI],[t,3,3*mI],[e,1,Qv]];function l(d,h,f){const g=h<d;g&&([d,h]=[h,d]);const w=f&&typeof f.range=="function"?f:c(d,h,f),x=w?w.range(d,+h+1):[];return g?x.reverse():x}function c(d,h,f){const g=Math.abs(h-d)/f,w=dC(([,,p])=>p).right(s,g);if(w===s.length)return e.every(Zx(d/Qv,h/Qv,f));if(w===0)return Tp.every(Math.max(Zx(d,h,f),1));const[x,y]=s[g/s[w-1][2]<s[w][2]/g?w-1:w];return x.every(y)}return[l,c]}const[aV,iV]=yL(po,OC,$g,mL,TC,kC),[oV,sV]=yL(fo,IC,Lg,mh,_C,PC);function Zv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function e0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ec(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lV(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,d=Mc(i),h=Lc(i),f=Mc(o),g=Lc(o),w=Mc(s),x=Lc(s),y=Mc(l),p=Lc(l),v=Mc(c),b=Lc(c),P={a:O,A:R,b:E,B:z,c:null,d:CI,e:CI,f:DV,g:BV,G:WV,H:IV,I:OV,j:AV,L:bL,m:RV,M:EV,p:q,q:X,Q:kI,s:_I,S:MV,u:LV,U:$V,V:jV,w:FV,W:zV,x:null,X:null,y:NV,Y:HV,Z:qV,"%":PI},k={a:H,A:K,b:ee,B:ge,c:null,d:SI,e:SI,f:KV,g:aG,G:oG,H:UV,I:VV,j:GV,L:xL,m:YV,M:XV,p:oe,q:G,Q:kI,s:_I,S:JV,u:QV,U:ZV,V:eG,w:tG,W:nG,x:null,X:null,y:rG,Y:iG,Z:sG,"%":PI},C={a:L,A,b:D,B,c:$,d:xI,e:xI,f:PV,g:vI,G:bI,H:wI,I:wI,j:xV,L:SV,m:vV,M:wV,p:I,q:bV,Q:_V,s:TV,S:CV,u:fV,U:pV,V:gV,w:hV,W:mV,x:N,X:F,y:vI,Y:bI,Z:yV,"%":kV};P.x=S(n,P),P.X=S(r,P),P.c=S(t,P),k.x=S(n,k),k.X=S(r,k),k.c=S(t,k);function S(Q,te){return function(U){var V=[],ae=-1,ne=0,me=Q.length,ue,Ae,we;for(U instanceof Date||(U=new Date(+U));++ae<me;)Q.charCodeAt(ae)===37&&(V.push(Q.slice(ne,ae)),(Ae=yI[ue=Q.charAt(++ae)])!=null?ue=Q.charAt(++ae):Ae=ue==="e"?" ":"0",(we=te[ue])&&(ue=we(U,Ae)),V.push(ue),ne=ae+1);return V.push(Q.slice(ne,ae)),V.join("")}}function _(Q,te){return function(U){var V=Ec(1900,void 0,1),ae=T(V,Q,U+="",0),ne,me;if(ae!=U.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(te&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ne=e0(Ec(V.y,0,1)),me=ne.getUTCDay(),ne=me>4||me===0?Op.ceil(ne):Op(ne),ne=Mg.offset(ne,(V.V-1)*7),V.y=ne.getUTCFullYear(),V.m=ne.getUTCMonth(),V.d=ne.getUTCDate()+(V.w+6)%7):(ne=Zv(Ec(V.y,0,1)),me=ne.getDay(),ne=me>4||me===0?Ip.ceil(ne):Ip(ne),ne=mh.offset(ne,(V.V-1)*7),V.y=ne.getFullYear(),V.m=ne.getMonth(),V.d=ne.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),me="Z"in V?e0(Ec(V.y,0,1)).getUTCDay():Zv(Ec(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(me+5)%7:V.w+V.U*7-(me+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,e0(V)):Zv(V)}}function T(Q,te,U,V){for(var ae=0,ne=te.length,me=U.length,ue,Ae;ae<ne;){if(V>=me)return-1;if(ue=te.charCodeAt(ae++),ue===37){if(ue=te.charAt(ae++),Ae=C[ue in yI?te.charAt(ae++):ue],!Ae||(V=Ae(Q,U,V))<0)return-1}else if(ue!=U.charCodeAt(V++))return-1}return V}function I(Q,te,U){var V=d.exec(te.slice(U));return V?(Q.p=h.get(V[0].toLowerCase()),U+V[0].length):-1}function L(Q,te,U){var V=w.exec(te.slice(U));return V?(Q.w=x.get(V[0].toLowerCase()),U+V[0].length):-1}function A(Q,te,U){var V=f.exec(te.slice(U));return V?(Q.w=g.get(V[0].toLowerCase()),U+V[0].length):-1}function D(Q,te,U){var V=v.exec(te.slice(U));return V?(Q.m=b.get(V[0].toLowerCase()),U+V[0].length):-1}function B(Q,te,U){var V=y.exec(te.slice(U));return V?(Q.m=p.get(V[0].toLowerCase()),U+V[0].length):-1}function $(Q,te,U){return T(Q,t,te,U)}function N(Q,te,U){return T(Q,n,te,U)}function F(Q,te,U){return T(Q,r,te,U)}function O(Q){return s[Q.getDay()]}function R(Q){return o[Q.getDay()]}function E(Q){return c[Q.getMonth()]}function z(Q){return l[Q.getMonth()]}function q(Q){return i[+(Q.getHours()>=12)]}function X(Q){return 1+~~(Q.getMonth()/3)}function H(Q){return s[Q.getUTCDay()]}function K(Q){return o[Q.getUTCDay()]}function ee(Q){return c[Q.getUTCMonth()]}function ge(Q){return l[Q.getUTCMonth()]}function oe(Q){return i[+(Q.getUTCHours()>=12)]}function G(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var te=S(Q+="",P);return te.toString=function(){return Q},te},parse:function(Q){var te=_(Q+="",!1);return te.toString=function(){return Q},te},utcFormat:function(Q){var te=S(Q+="",k);return te.toString=function(){return Q},te},utcParse:function(Q){var te=_(Q+="",!0);return te.toString=function(){return Q},te}}}var yI={"-":"",_:" ",0:"0"},Yr=/^\s*\d+/,cV=/^%/,uV=/[\\^$*+?|[\]().{}]/g;function er(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function dV(e){return e.replace(uV,"\\$&")}function Mc(e){return new RegExp("^(?:"+e.map(dV).join("|")+")","i")}function Lc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function hV(e,t,n){var r=Yr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fV(e,t,n){var r=Yr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function mV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function bI(e,t,n){var r=Yr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vI(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yV(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bV(e,t,n){var r=Yr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function vV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xI(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xV(e,t,n){var r=Yr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function wI(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function CV(e,t,n){var r=Yr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function SV(e,t,n){var r=Yr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function PV(e,t,n){var r=Yr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kV(e,t,n){var r=cV.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function _V(e,t,n){var r=Yr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function TV(e,t,n){var r=Yr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function CI(e,t){return er(e.getDate(),t,2)}function IV(e,t){return er(e.getHours(),t,2)}function OV(e,t){return er(e.getHours()%12||12,t,2)}function AV(e,t){return er(1+mh.count(fo(e),e),t,3)}function bL(e,t){return er(e.getMilliseconds(),t,3)}function DV(e,t){return bL(e,t)+"000"}function RV(e,t){return er(e.getMonth()+1,t,2)}function EV(e,t){return er(e.getMinutes(),t,2)}function MV(e,t){return er(e.getSeconds(),t,2)}function LV(e){var t=e.getDay();return t===0?7:t}function $V(e,t){return er(Lg.count(fo(e)-1,e),t,2)}function vL(e){var t=e.getDay();return t>=4||t===0?Rl(e):Rl.ceil(e)}function jV(e,t){return e=vL(e),er(Rl.count(fo(e),e)+(fo(e).getDay()===4),t,2)}function FV(e){return e.getDay()}function zV(e,t){return er(Ip.count(fo(e)-1,e),t,2)}function NV(e,t){return er(e.getFullYear()%100,t,2)}function BV(e,t){return e=vL(e),er(e.getFullYear()%100,t,2)}function HV(e,t){return er(e.getFullYear()%1e4,t,4)}function WV(e,t){var n=e.getDay();return e=n>=4||n===0?Rl(e):Rl.ceil(e),er(e.getFullYear()%1e4,t,4)}function qV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+er(t/60|0,"0",2)+er(t%60,"0",2)}function SI(e,t){return er(e.getUTCDate(),t,2)}function UV(e,t){return er(e.getUTCHours(),t,2)}function VV(e,t){return er(e.getUTCHours()%12||12,t,2)}function GV(e,t){return er(1+Mg.count(po(e),e),t,3)}function xL(e,t){return er(e.getUTCMilliseconds(),t,3)}function KV(e,t){return xL(e,t)+"000"}function YV(e,t){return er(e.getUTCMonth()+1,t,2)}function XV(e,t){return er(e.getUTCMinutes(),t,2)}function JV(e,t){return er(e.getUTCSeconds(),t,2)}function QV(e){var t=e.getUTCDay();return t===0?7:t}function ZV(e,t){return er($g.count(po(e)-1,e),t,2)}function wL(e){var t=e.getUTCDay();return t>=4||t===0?El(e):El.ceil(e)}function eG(e,t){return e=wL(e),er(El.count(po(e),e)+(po(e).getUTCDay()===4),t,2)}function tG(e){return e.getUTCDay()}function nG(e,t){return er(Op.count(po(e)-1,e),t,2)}function rG(e,t){return er(e.getUTCFullYear()%100,t,2)}function aG(e,t){return e=wL(e),er(e.getUTCFullYear()%100,t,2)}function iG(e,t){return er(e.getUTCFullYear()%1e4,t,4)}function oG(e,t){var n=e.getUTCDay();return e=n>=4||n===0?El(e):El.ceil(e),er(e.getUTCFullYear()%1e4,t,4)}function sG(){return"+0000"}function PI(){return"%"}function kI(e){return+e}function _I(e){return Math.floor(+e/1e3)}var Xs,CL,SL;lG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lG(e){return Xs=lV(e),CL=Xs.format,Xs.parse,SL=Xs.utcFormat,Xs.utcParse,Xs}function cG(e){return new Date(e)}function uG(e){return e instanceof Date?+e:+new Date(+e)}function AC(e,t,n,r,i,o,s,l,c,d){var h=mC(),f=h.invert,g=h.domain,w=d(".%L"),x=d(":%S"),y=d("%I:%M"),p=d("%I %p"),v=d("%a %d"),b=d("%b %d"),P=d("%B"),k=d("%Y");function C(S){return(c(S)<S?w:l(S)<S?x:s(S)<S?y:o(S)<S?p:r(S)<S?i(S)<S?v:b:n(S)<S?P:k)(S)}return h.invert=function(S){return new Date(f(S))},h.domain=function(S){return arguments.length?g(Array.from(S,uG)):g().map(cG)},h.ticks=function(S){var _=g();return e(_[0],_[_.length-1],S??10)},h.tickFormat=function(S,_){return _==null?C:d(_)},h.nice=function(S){var _=g();return(!S||typeof S.range!="function")&&(S=t(_[0],_[_.length-1],S??10)),S?g(cL(_,S)):h},h.copy=function(){return gh(h,AC(e,t,n,r,i,o,s,l,c,d))},h}function dG(){return ri.apply(AC(oV,sV,fo,IC,Lg,mh,_C,PC,ps,CL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hG(){return ri.apply(AC(aV,iV,po,OC,$g,Mg,TC,kC,ps,SL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jg(){var e=0,t=1,n,r,i,o,s=ga,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(o(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(s=f,d):s};function h(f){return function(g){var w,x;return arguments.length?([w,x]=g,s=f(w,x),d):[s(0),s(1)]}}return d.range=h(rc),d.rangeRound=h(gC),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),d}}function es(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PL(){var e=Zo(jg()(ga));return e.copy=function(){return es(e,PL())},xo.apply(e,arguments)}function kL(){var e=vC(jg()).domain([1,10]);return e.copy=function(){return es(e,kL()).base(e.base())},xo.apply(e,arguments)}function _L(){var e=xC(jg());return e.copy=function(){return es(e,_L()).constant(e.constant())},xo.apply(e,arguments)}function DC(){var e=wC(jg());return e.copy=function(){return es(e,DC()).exponent(e.exponent())},xo.apply(e,arguments)}function fG(){return DC.apply(null,arguments).exponent(.5)}function TL(){var e=[],t=ga;function n(r){if(r!=null&&!isNaN(r=+r))return t((fh(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(zo),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Z7(e,o/r))},n.copy=function(){return TL(t).domain(e)},xo.apply(n,arguments)}function Fg(){var e=0,t=.5,n=1,r=1,i,o,s,l,c,d=ga,h,f=!1,g;function w(y){return isNaN(y=+y)?g:(y=.5+((y=+h(y))-o)*(r*y<r*o?l:c),d(f?Math.max(0,Math.min(1,y)):y))}w.domain=function(y){return arguments.length?([e,t,n]=y,i=h(e=+e),o=h(t=+t),s=h(n=+n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,w):[e,t,n]},w.clamp=function(y){return arguments.length?(f=!!y,w):f},w.interpolator=function(y){return arguments.length?(d=y,w):d};function x(y){return function(p){var v,b,P;return arguments.length?([v,b,P]=p,d=kU(y,[v,b,P]),w):[d(0),d(.5),d(1)]}}return w.range=x(rc),w.rangeRound=x(gC),w.unknown=function(y){return arguments.length?(g=y,w):g},function(y){return h=y,i=y(e),o=y(t),s=y(n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,w}}function IL(){var e=Zo(Fg()(ga));return e.copy=function(){return es(e,IL())},xo.apply(e,arguments)}function OL(){var e=vC(Fg()).domain([.1,1,10]);return e.copy=function(){return es(e,OL()).base(e.base())},xo.apply(e,arguments)}function AL(){var e=xC(Fg());return e.copy=function(){return es(e,AL()).constant(e.constant())},xo.apply(e,arguments)}function RC(){var e=wC(Fg());return e.copy=function(){return es(e,RC()).exponent(e.exponent())},xo.apply(e,arguments)}function pG(){return RC.apply(null,arguments).exponent(.5)}const TI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kd,scaleDiverging:IL,scaleDivergingLog:OL,scaleDivergingPow:RC,scaleDivergingSqrt:pG,scaleDivergingSymlog:AL,scaleIdentity:lL,scaleImplicit:ew,scaleLinear:_p,scaleLog:uL,scaleOrdinal:hC,scalePoint:ed,scalePow:CC,scaleQuantile:fL,scaleQuantize:pL,scaleRadial:hL,scaleSequential:PL,scaleSequentialLog:kL,scaleSequentialPow:DC,scaleSequentialQuantile:TL,scaleSequentialSqrt:fG,scaleSequentialSymlog:_L,scaleSqrt:KU,scaleSymlog:dL,scaleThreshold:gL,scaleTime:dG,scaleUtc:hG,tickFormat:sL},Symbol.toStringTag,{value:"Module"}));var t0,II;function DL(){if(II)return t0;II=1;var e=Zl();function t(n,r,i){for(var o=-1,s=n.length;++o<s;){var l=n[o],c=r(l);if(c!=null&&(d===void 0?c===c&&!e(c):i(c,d)))var d=c,h=l}return h}return t0=t,t0}var n0,OI;function gG(){if(OI)return n0;OI=1;function e(t,n){return t>n}return n0=e,n0}var r0,AI;function mG(){if(AI)return r0;AI=1;var e=DL(),t=gG(),n=tc();function r(i){return i&&i.length?e(i,n,t):void 0}return r0=r,r0}var yG=mG();const zg=vt(yG);var a0,DI;function bG(){if(DI)return a0;DI=1;function e(t,n){return t<n}return a0=e,a0}var i0,RI;function vG(){if(RI)return i0;RI=1;var e=DL(),t=bG(),n=tc();function r(i){return i&&i.length?e(i,n,t):void 0}return i0=r,i0}var xG=vG();const Ng=vt(xG);var o0,EI;function wG(){if(EI)return o0;EI=1;var e=K1(),t=Qo(),n=FM(),r=Pa();function i(o,s){var l=r(o)?e:n;return l(o,t(s,3))}return o0=i,o0}var s0,MI;function CG(){if(MI)return s0;MI=1;var e=$M(),t=wG();function n(r,i){return e(t(r,i),1)}return s0=n,s0}var SG=CG();const PG=vt(SG);var l0,LI;function kG(){if(LI)return l0;LI=1;var e=sC();function t(n,r){return e(n,r)}return l0=t,l0}var _G=kG();const Bg=vt(_G);var ac=1e9,TG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MC,Cr=!0,Qa="[DecimalError] ",_s=Qa+"Invalid argument: ",EC=Qa+"Exponent out of range: ",ic=Math.floor,ss=Math.pow,IG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Da,Vr=1e7,wr=7,RL=9007199254740991,Ap=ic(RL/wr),Gt={};Gt.absoluteValue=Gt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Gt.comparedTo=Gt.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Gt.decimalPlaces=Gt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*wr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Gt.dividedBy=Gt.div=function(e){return oo(this,new this.constructor(e))};Gt.dividedToIntegerBy=Gt.idiv=function(e){var t=this,n=t.constructor;return mr(oo(t,new n(e),0,1),n.precision)};Gt.equals=Gt.eq=function(e){return!this.cmp(e)};Gt.exponent=function(){return zr(this)};Gt.greaterThan=Gt.gt=function(e){return this.cmp(e)>0};Gt.greaterThanOrEqualTo=Gt.gte=function(e){return this.cmp(e)>=0};Gt.isInteger=Gt.isint=function(){return this.e>this.d.length-2};Gt.isNegative=Gt.isneg=function(){return this.s<0};Gt.isPositive=Gt.ispos=function(){return this.s>0};Gt.isZero=function(){return this.s===0};Gt.lessThan=Gt.lt=function(e){return this.cmp(e)<0};Gt.lessThanOrEqualTo=Gt.lte=function(e){return this.cmp(e)<1};Gt.logarithm=Gt.log=function(e){var t,n=this,r=n.constructor,i=r.precision,o=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Da))throw Error(Qa+"NaN");if(n.s<1)throw Error(Qa+(n.s?"NaN":"-Infinity"));return n.eq(Da)?new r(0):(Cr=!1,t=oo(Ad(n,o),Ad(e,o),o),Cr=!0,mr(t,i))};Gt.minus=Gt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LL(t,e):EL(t,(e.s=-e.s,e))};Gt.modulo=Gt.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Qa+"NaN");return n.s?(Cr=!1,t=oo(n,e,0,1).times(e),Cr=!0,n.minus(t)):mr(new r(n),i)};Gt.naturalExponential=Gt.exp=function(){return ML(this)};Gt.naturalLogarithm=Gt.ln=function(){return Ad(this)};Gt.negated=Gt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Gt.plus=Gt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EL(t,e):LL(t,(e.s=-e.s,e))};Gt.precision=Gt.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(_s+e);if(t=zr(i)+1,r=i.d.length-1,n=r*wr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Gt.squareRoot=Gt.sqrt=function(){var e,t,n,r,i,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Qa+"NaN")}for(e=zr(l),Cr=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Ri(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ic((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(oo(l,o,s+2)).times(.5),Ri(o.d).slice(0,s)===(t=Ri(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(mr(o,n+1,0),o.times(o).eq(l)){r=o;break}}else if(t!="9999")break;s+=4}return Cr=!0,mr(r,n)};Gt.times=Gt.mul=function(e){var t,n,r,i,o,s,l,c,d,h=this,f=h.constructor,g=h.d,w=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,n=h.e+e.e,c=g.length,d=w.length,c<d&&(o=g,g=w,w=o,s=c,c=d,d=s),o=[],s=c+d,r=s;r--;)o.push(0);for(r=d;--r>=0;){for(t=0,i=c+r;i>r;)l=o[i]+w[r]*g[i-r-1]+t,o[i--]=l%Vr|0,t=l/Vr|0;o[i]=(o[i]+t)%Vr|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Cr?mr(e,f.precision):e};Gt.toDecimalPlaces=Gt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ji(e,0,ac),t===void 0?t=r.rounding:ji(t,0,8),mr(n,e+zr(n)+1,t))};Gt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Ms(r,!0):(ji(e,0,ac),t===void 0?t=i.rounding:ji(t,0,8),r=mr(new i(r),e+1,t),n=Ms(r,!0,e+1)),n};Gt.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?Ms(i):(ji(e,0,ac),t===void 0?t=o.rounding:ji(t,0,8),r=mr(new o(i),e+zr(i)+1,t),n=Ms(r.abs(),!1,e+zr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Gt.toInteger=Gt.toint=function(){var e=this,t=e.constructor;return mr(new t(e),zr(e)+1,t.rounding)};Gt.toNumber=function(){return+this};Gt.toPower=Gt.pow=function(e){var t,n,r,i,o,s,l=this,c=l.constructor,d=12,h=+(e=new c(e));if(!e.s)return new c(Da);if(l=new c(l),!l.s){if(e.s<1)throw Error(Qa+"Infinity");return l}if(l.eq(Da))return l;if(r=c.precision,e.eq(Da))return mr(l,r);if(t=e.e,n=e.d.length-1,s=t>=n,o=l.s,s){if((n=h<0?-h:h)<=RL){for(i=new c(Da),t=Math.ceil(r/wr+4),Cr=!1;n%2&&(i=i.times(l),jI(i.d,t)),n=ic(n/2),n!==0;)l=l.times(l),jI(l.d,t);return Cr=!0,e.s<0?new c(Da).div(i):mr(i,r)}}else if(o<0)throw Error(Qa+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Cr=!1,i=e.times(Ad(l,r+d)),Cr=!0,i=ML(i),i.s=o,i};Gt.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?(n=zr(i),r=Ms(i,n<=o.toExpNeg||n>=o.toExpPos)):(ji(e,1,ac),t===void 0?t=o.rounding:ji(t,0,8),i=mr(new o(i),e,t),n=zr(i),r=Ms(i,e<=n||n<=o.toExpNeg,e)),r};Gt.toSignificantDigits=Gt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ji(e,1,ac),t===void 0?t=r.rounding:ji(t,0,8)),mr(new r(n),e,t)};Gt.toString=Gt.valueOf=Gt.val=Gt.toJSON=Gt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=zr(e),n=e.constructor;return Ms(e,t<=n.toExpNeg||t>=n.toExpPos)};function EL(e,t){var n,r,i,o,s,l,c,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Cr?mr(t,f):t;if(c=e.d,d=t.d,s=e.e,i=t.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,l=d.length):(r=d,i=s,l=c.length),s=Math.ceil(f/wr),l=s>l?s+1:l+1,o>l&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(l=c.length,o=d.length,l-o<0&&(o=l,r=d,d=c,c=r),n=0;o;)n=(c[--o]=c[o]+d[o]+n)/Vr|0,c[o]%=Vr;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Cr?mr(t,f):t}function ji(e,t,n){if(e!==~~e||e<t||e>n)throw Error(_s+e)}function Ri(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=wr-r.length,n&&(o+=To(n)),o+=r;s=e[t],r=s+"",n=wr-r.length,n&&(o+=To(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var oo=function(){function e(r,i){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%Vr|0,s=o/Vr|0;return s&&r.unshift(s),r}function t(r,i,o,s){var l,c;if(o!=s)c=o>s?1:-1;else for(l=c=0;l<o;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Vr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var l,c,d,h,f,g,w,x,y,p,v,b,P,k,C,S,_,T,I=r.constructor,L=r.s==i.s?1:-1,A=r.d,D=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(Qa+"Division by zero");for(c=r.e-i.e,_=D.length,C=A.length,w=new I(L),x=w.d=[],d=0;D[d]==(A[d]||0);)++d;if(D[d]>(A[d]||0)&&--c,o==null?b=o=I.precision:s?b=o+(zr(r)-zr(i))+1:b=o,b<0)return new I(0);if(b=b/wr+2|0,d=0,_==1)for(h=0,D=D[0],b++;(d<C||h)&&b--;d++)P=h*Vr+(A[d]||0),x[d]=P/D|0,h=P%D|0;else{for(h=Vr/(D[0]+1)|0,h>1&&(D=e(D,h),A=e(A,h),_=D.length,C=A.length),k=_,y=A.slice(0,_),p=y.length;p<_;)y[p++]=0;T=D.slice(),T.unshift(0),S=D[0],D[1]>=Vr/2&&++S;do h=0,l=t(D,y,_,p),l<0?(v=y[0],_!=p&&(v=v*Vr+(y[1]||0)),h=v/S|0,h>1?(h>=Vr&&(h=Vr-1),f=e(D,h),g=f.length,p=y.length,l=t(f,y,g,p),l==1&&(h--,n(f,_<g?T:D,g))):(h==0&&(l=h=1),f=D.slice()),g=f.length,g<p&&f.unshift(0),n(y,f,p),l==-1&&(p=y.length,l=t(D,y,_,p),l<1&&(h++,n(y,_<p?T:D,p))),p=y.length):l===0&&(h++,y=[0]),x[d++]=h,l&&y[0]?y[p++]=A[k]||0:(y=[A[k]],p=1);while((k++<C||y[0]!==void 0)&&b--)}return x[0]||x.shift(),w.e=c,mr(w,s?o+zr(w)+1:o)}}();function ML(e,t){var n,r,i,o,s,l,c=0,d=0,h=e.constructor,f=h.precision;if(zr(e)>16)throw Error(EC+zr(e));if(!e.s)return new h(Da);for(Cr=!1,l=f,s=new h(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(r=Math.log(ss(2,d))/Math.LN10*2+5|0,l+=r,n=i=o=new h(Da),h.precision=l;;){if(i=mr(i.times(e),l),n=n.times(++c),s=o.plus(oo(i,n,l)),Ri(s.d).slice(0,l)===Ri(o.d).slice(0,l)){for(;d--;)o=mr(o.times(o),l);return h.precision=f,t==null?(Cr=!0,mr(o,f)):o}o=s}}function zr(e){for(var t=e.e*wr,n=e.d[0];n>=10;n/=10)t++;return t}function c0(e,t,n){if(t>e.LN10.sd())throw Cr=!0,n&&(e.precision=n),Error(Qa+"LN10 precision limit exceeded");return mr(new e(e.LN10),t)}function To(e){for(var t="";e--;)t+="0";return t}function Ad(e,t){var n,r,i,o,s,l,c,d,h,f=1,g=10,w=e,x=w.d,y=w.constructor,p=y.precision;if(w.s<1)throw Error(Qa+(w.s?"NaN":"-Infinity"));if(w.eq(Da))return new y(0);if(t==null?(Cr=!1,d=p):d=t,w.eq(10))return t==null&&(Cr=!0),c0(y,d);if(d+=g,y.precision=d,n=Ri(x),r=n.charAt(0),o=zr(w),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(e),n=Ri(w.d),r=n.charAt(0),f++;o=zr(w),r>1?(w=new y("0."+n),o++):w=new y(r+"."+n.slice(1))}else return c=c0(y,d+2,p).times(o+""),w=Ad(new y(r+"."+n.slice(1)),d-g).plus(c),y.precision=p,t==null?(Cr=!0,mr(w,p)):w;for(l=s=w=oo(w.minus(Da),w.plus(Da),d),h=mr(w.times(w),d),i=3;;){if(s=mr(s.times(h),d),c=l.plus(oo(s,new y(i),d)),Ri(c.d).slice(0,d)===Ri(l.d).slice(0,d))return l=l.times(2),o!==0&&(l=l.plus(c0(y,d+2,p).times(o+""))),l=oo(l,new y(f),d),y.precision=p,t==null?(Cr=!0,mr(l,p)):l;l=c,i+=2}}function $I(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ic(n/wr),e.d=[],r=(n+1)%wr,n<0&&(r+=wr),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=wr;r<i;)e.d.push(+t.slice(r,r+=wr));t=t.slice(r),r=wr-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Cr&&(e.e>Ap||e.e<-Ap))throw Error(EC+n)}else e.s=0,e.e=0,e.d=[0];return e}function mr(e,t,n){var r,i,o,s,l,c,d,h,f=e.d;for(s=1,o=f[0];o>=10;o/=10)s++;if(r=t-s,r<0)r+=wr,i=t,d=f[h=0];else{if(h=Math.ceil((r+1)/wr),o=f.length,h>=o)return e;for(d=o=f[h],s=1;o>=10;o/=10)s++;r%=wr,i=r-wr+s}if(n!==void 0&&(o=ss(10,s-i-1),l=d/o%10|0,c=t<0||f[h+1]!==void 0||d%o,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?d/ss(10,s-i):0:f[h-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(o=zr(e),f.length=1,t=t-o-1,f[0]=ss(10,(wr-t%wr)%wr),e.e=ic(-t/wr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=h,o=1,h--):(f.length=h+1,o=ss(10,wr-r),f[h]=i>0?(d/ss(10,s-i)%ss(10,i)|0)*o:0),c)for(;;)if(h==0){(f[0]+=o)==Vr&&(f[0]=1,++e.e);break}else{if(f[h]+=o,f[h]!=Vr)break;f[h--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(Cr&&(e.e>Ap||e.e<-Ap))throw Error(EC+zr(e));return e}function LL(e,t){var n,r,i,o,s,l,c,d,h,f,g=e.constructor,w=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Cr?mr(t,w):t;if(c=e.d,f=t.d,r=t.e,d=e.e,c=c.slice(),s=d-r,s){for(h=s<0,h?(n=c,s=-s,l=f.length):(n=f,r=d,l=c.length),i=Math.max(Math.ceil(w/wr),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){h=c[i]<f[i];break}s=0}for(h&&(n=c,c=f,f=n,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>s;){if(c[--i]<f[i]){for(o=i;o&&c[--o]===0;)c[o]=Vr-1;--c[o],c[i]+=Vr}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Cr?mr(t,w):t):new g(0)}function Ms(e,t,n){var r,i=zr(e),o=Ri(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+To(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+To(-i-1)+o,n&&(r=n-s)>0&&(o+=To(r))):i>=s?(o+=To(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+To(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=To(r))),e.s<0?"-"+o:o}function jI(e,t){if(e.length>t)return e.length=t,!0}function $L(e){var t,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(_s+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return $I(s,o.toString())}else if(typeof o!="string")throw Error(_s+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,IG.test(o))$I(s,o);else throw Error(_s+o)}if(i.prototype=Gt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=$L,i.config=i.set=OG,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function OG(e){if(!e||typeof e!="object")throw Error(Qa+"Object expected");var t,n,r,i=["precision",1,ac,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ic(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(_s+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(_s+n+": "+r);return this}var MC=$L(TG);Da=new MC(1);const hr=MC;function AG(e){return MG(e)||EG(e)||RG(e)||DG()}function DG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RG(e,t){if(e){if(typeof e=="string")return aw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aw(e,t)}}function EG(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function MG(e){if(Array.isArray(e))return aw(e)}function aw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var LG=function(t){return t},jL={},FL=function(t){return t===jL},FI=function(t){return function n(){return arguments.length===0||arguments.length===1&&FL(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},$G=function e(t,n){return t===1?n:FI(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(l){return l!==jL}).length;return s>=t?n.apply(void 0,i):e(t-s,FI(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=i.map(function(f){return FL(f)?c.shift():f});return n.apply(void 0,AG(h).concat(c))}))})},Hg=function(t){return $G(t.length,t)},iw=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},jG=Hg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),FG=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return LG;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(l,c){return c(l)},o.apply(void 0,arguments))}},ow=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},zL=function(t){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(l,c){return l===n[c]})||(n=o,r=t.apply(void 0,o)),r}};function zG(e){var t;return e===0?t=1:t=Math.floor(new hr(e).abs().log(10).toNumber())+1,t}function NG(e,t,n){for(var r=new hr(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var BG=Hg(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),HG=Hg(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),WG=Hg(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Wg={rangeStep:NG,getDigitCount:zG,interpolateNumber:BG,uninterpolateNumber:HG,uninterpolateTruncation:WG};function sw(e){return VG(e)||UG(e)||NL(e)||qG()}function qG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function VG(e){if(Array.isArray(e))return lw(e)}function Dd(e,t){return YG(e)||KG(e,t)||NL(e,t)||GG()}function GG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NL(e,t){if(e){if(typeof e=="string")return lw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lw(e,t)}}function lw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KG(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function YG(e){if(Array.isArray(e))return e}function BL(e){var t=Dd(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function HL(e,t,n){if(e.lte(0))return new hr(0);var r=Wg.getDigitCount(e.toNumber()),i=new hr(10).pow(r),o=e.div(i),s=r!==1?.05:.1,l=new hr(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return t?c:new hr(Math.ceil(c))}function XG(e,t,n){var r=1,i=new hr(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new hr(10).pow(Wg.getDigitCount(e)-1),i=new hr(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new hr(Math.floor(e)))}else e===0?i=new hr(Math.floor((t-1)/2)):n||(i=new hr(Math.floor(e)));var s=Math.floor((t-1)/2),l=FG(jG(function(c){return i.add(new hr(c-s).mul(r)).toNumber()}),iw);return l(0,t)}function WL(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new hr(0),tickMin:new hr(0),tickMax:new hr(0)};var o=HL(new hr(t).sub(e).div(n-1),r,i),s;e<=0&&t>=0?s=new hr(0):(s=new hr(e).add(t).div(2),s=s.sub(new hr(s).mod(o)));var l=Math.ceil(s.sub(e).div(o).toNumber()),c=Math.ceil(new hr(t).sub(s).div(o).toNumber()),d=l+c+1;return d>n?WL(e,t,n,r,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:o,tickMin:s.sub(new hr(l).mul(o)),tickMax:s.add(new hr(c).mul(o))})}function JG(e){var t=Dd(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),l=BL([n,r]),c=Dd(l,2),d=c[0],h=c[1];if(d===-1/0||h===1/0){var f=h===1/0?[d].concat(sw(iw(0,i-1).map(function(){return 1/0}))):[].concat(sw(iw(0,i-1).map(function(){return-1/0})),[h]);return n>r?ow(f):f}if(d===h)return XG(d,i,o);var g=WL(d,h,s,o),w=g.step,x=g.tickMin,y=g.tickMax,p=Wg.rangeStep(x,y.add(new hr(.1).mul(w)),w);return n>r?ow(p):p}function QG(e,t){var n=Dd(e,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=BL([r,i]),l=Dd(s,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[r,i];if(c===d)return[c];var h=Math.max(t,2),f=HL(new hr(d).sub(c).div(h-1),o,0),g=[].concat(sw(Wg.rangeStep(new hr(c),new hr(d).sub(new hr(.99).mul(f)),f)),[d]);return r>i?ow(g):g}var ZG=zL(JG),eK=zL(QG),tK="Invariant failed";function Ls(e,t){throw new Error(tK)}var nK=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dp.apply(this,arguments)}function rK(e,t){return sK(e)||oK(e,t)||iK(e,t)||aK()}function aK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iK(e,t){if(e){if(typeof e=="string")return zI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zI(e,t)}}function zI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function sK(e){if(Array.isArray(e))return e}function lK(e,t){if(e==null)return{};var n=cK(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cK(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function uK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VL(r.key),r)}}function hK(e,t,n){return t&&dK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fK(e,t,n){return t=Rp(t),pK(e,qL()?Reflect.construct(t,n||[],Rp(e).constructor):t.apply(e,n))}function pK(e,t){if(t&&(Ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gK(e)}function gK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qL=function(){return!!e})()}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rp(e)}function mK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cw(e,t)}function cw(e,t){return cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cw(e,t)}function UL(e,t,n){return t=VL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=yK(e,"string");return Ml(t)=="symbol"?t:t+""}function yK(e,t){if(Ml(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yh=function(e){function t(){return uK(this,t),fK(this,t,arguments)}return mK(t,e),hK(t,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,s=r.width,l=r.dataKey,c=r.data,d=r.dataPointFormatter,h=r.xAxis,f=r.yAxis,g=lK(r,nK),w=Hn(g,!1);this.props.direction==="x"&&h.type!=="number"&&Ls();var x=c.map(function(y){var p=d(y,l),v=p.x,b=p.y,P=p.value,k=p.errorVal;if(!k)return null;var C=[],S,_;if(Array.isArray(k)){var T=rK(k,2);S=T[0],_=T[1]}else S=_=k;if(o==="vertical"){var I=h.scale,L=b+i,A=L+s,D=L-s,B=I(P-S),$=I(P+_);C.push({x1:$,y1:A,x2:$,y2:D}),C.push({x1:B,y1:L,x2:$,y2:L}),C.push({x1:B,y1:A,x2:B,y2:D})}else if(o==="horizontal"){var N=f.scale,F=v+i,O=F-s,R=F+s,E=N(P-S),z=N(P+_);C.push({x1:O,y1:z,x2:R,y2:z}),C.push({x1:F,y1:E,x2:F,y2:z}),C.push({x1:O,y1:E,x2:R,y2:E})}return Ce.createElement(Er,Dp({className:"recharts-errorBar",key:"bar-".concat(C.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},w),C.map(function(q){return Ce.createElement("line",Dp({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return Ce.createElement(Er,{className:"recharts-errorBars"},x)}}])}(Ce.Component);UL(yh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});UL(yh,"displayName","ErrorBar");function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function NI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(n),!0).forEach(function(r){bK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bK(e,t,n){return t=vK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vK(e){var t=xK(e,"string");return Rd(t)=="symbol"?t:t+""}function xK(e,t){if(Rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GL=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,s=Ia(n,Fo);if(!s)return null;var l=Fo.defaultProps,c=l!==void 0?as(as({},l),s.props):{},d;return s.props&&s.props.payload?d=s.props&&s.props.payload:o==="children"?d=(r||[]).reduce(function(h,f){var g=f.item,w=f.props,x=w.sectors||w.data||[];return h.concat(x.map(function(y){return{type:s.props.iconType||g.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(r||[]).map(function(h){var f=h.item,g=f.type.defaultProps,w=g!==void 0?as(as({},g),f.props):{},x=w.dataKey,y=w.name,p=w.legendType,v=w.hide;return{inactive:v,dataKey:x,type:c.iconType||p||"square",color:LC(f),value:y||x,payload:w}}),as(as(as({},c),Fo.getWithHeight(s,i)),{},{payload:d,item:s})};function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function BI(e){return PK(e)||SK(e)||CK(e)||wK()}function wK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CK(e,t){if(e){if(typeof e=="string")return uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uw(e,t)}}function SK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PK(e){if(Array.isArray(e))return uw(e)}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(n),!0).forEach(function(r){fl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fl(e,t,n){return t=kK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kK(e){var t=_K(e,"string");return Ed(t)=="symbol"?t:t+""}function _K(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ma(e,t,n){return jn(e)||jn(t)?n:qr(t)?Ya(e,t,n):Dn(t)?t(e):n}function td(e,t,n,r){var i=PG(e,function(l){return Ma(l,t)});if(n==="number"){var o=i.filter(function(l){return _t(l)||parseFloat(l)});return o.length?[Ng(o),zg(o)]:[1/0,-1/0]}var s=r?i.filter(function(l){return!jn(l)}):i;return s.map(function(l){return qr(l)||l instanceof Date?l:""})}var TK=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,d=0;d<l;d++){var h=d>0?i[d-1].coordinate:i[l-1].coordinate,f=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,w=void 0;if(bi(f-h)!==bi(g-f)){var x=[];if(bi(g-f)===bi(c[1]-c[0])){w=g;var y=f+c[1]-c[0];x[0]=Math.min(y,(y+h)/2),x[1]=Math.max(y,(y+h)/2)}else{w=h;var p=g+c[1]-c[0];x[0]=Math.min(f,(p+f)/2),x[1]=Math.max(f,(p+f)/2)}var v=[Math.min(f,(w+f)/2),Math.max(f,(w+f)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){s=i[d].index;break}}else{var b=Math.min(h,g),P=Math.max(h,g);if(t>(b+f)/2&&t<=(P+f)/2){s=i[d].index;break}}}else for(var k=0;k<l;k++)if(k===0&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k===l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2){s=r[k].index;break}return s},LC=function(t){var n,r=t,i=r.type.displayName,o=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Or(Or({},t.type.defaultProps),t.props):t.props,s=o.stroke,l=o.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},IK=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},l=Object.keys(o),c=0,d=l.length;c<d;c++)for(var h=o[l[c]].stackGroups,f=Object.keys(h),g=0,w=f.length;g<w;g++){var x=h[f[g]],y=x.items,p=x.cateAxisId,v=y.filter(function(_){return ao(_.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,P=b!==void 0?Or(Or({},b),v[0].props):v[0].props,k=P.barSize,C=P[p];s[C]||(s[C]=[]);var S=jn(k)?n:k;s[C].push({item:v[0],stackList:v.slice(1),barSize:jn(S)?void 0:Es(S,r,0)})}}return s},OK=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,o=t.sizeList,s=o===void 0?[]:o,l=t.maxBarSize,c=s.length;if(c<1)return null;var d=Es(n,i,0,!0),h,f=[];if(s[0].barSize===+s[0].barSize){var g=!1,w=i/c,x=s.reduce(function(k,C){return k+C.barSize||0},0);x+=(c-1)*d,x>=i&&(x-=(c-1)*d,d=0),x>=i&&w>0&&(g=!0,w*=.9,x=c*w);var y=(i-x)/2>>0,p={offset:y-d,size:0};h=s.reduce(function(k,C){var S={item:C.item,position:{offset:p.offset+p.size+d,size:g?w:C.barSize}},_=[].concat(BI(k),[S]);return p=_[_.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(T){_.push({item:T,position:p})}),_},f)}else{var v=Es(r,i,0,!0);i-2*v-(c-1)*d<=0&&(d=0);var b=(i-2*v-(c-1)*d)/c;b>1&&(b>>=0);var P=l===+l?Math.min(b,l):b;h=s.reduce(function(k,C,S){var _=[].concat(BI(k),[{item:C.item,position:{offset:v+(b+d)*S+(b-P)/2,size:P}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(T){_.push({item:T,position:_[_.length-1].position})}),_},f)}return h},AK=function(t,n,r,i){var o=r.children,s=r.width,l=r.margin,c=s-(l.left||0)-(l.right||0),d=GL({children:o,legendWidth:c});if(d){var h=i||{},f=h.width,g=h.height,w=d.align,x=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&x==="middle")&&w!=="center"&&_t(t[w]))return Or(Or({},t),{},fl({},w,t[w]+(f||0)));if((y==="horizontal"||y==="vertical"&&w==="center")&&x!=="middle"&&_t(t[x]))return Or(Or({},t),{},fl({},x,t[x]+(g||0)))}return t},DK=function(t,n,r){return jn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},KL=function(t,n,r,i,o){var s=n.props.children,l=Xa(s,yh).filter(function(d){return DK(i,o,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,h){var f=Ma(h,r);if(jn(f))return d;var g=Array.isArray(f)?[Ng(f),zg(f)]:[f,f],w=c.reduce(function(x,y){var p=Ma(h,y,0),v=g[0]-Math.abs(Array.isArray(p)?p[0]:p),b=g[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,x[0]),Math.max(b,x[1])]},[1/0,-1/0]);return[Math.min(w[0],d[0]),Math.max(w[1],d[1])]},[1/0,-1/0])}return null},RK=function(t,n,r,i,o){var s=n.map(function(l){return KL(t,l,r,o,i)}).filter(function(l){return!jn(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},YL=function(t,n,r,i,o){var s=n.map(function(c){var d=c.props.dataKey;return r==="number"&&d&&KL(t,c,d,i)||td(t,d,r,o)});if(r==="number")return s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,d){for(var h=0,f=d.length;h<f;h++)l[d[h]]||(l[d[h]]=!0,c.push(d[h]));return c},[])},XL=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},JL=function(t,n,r,i){if(i)return t.map(function(c){return c.coordinate});var o,s,l=t.map(function(c){return c.coordinate===n&&(o=!0),c.coordinate===r&&(s=!0),c.coordinate});return o||l.push(n),s||l.push(r),l},no=function(t,n,r){if(!t)return null;var i=t.scale,o=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?bi(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(f){var g=o?o.indexOf(f):f;return{coordinate:i(g)+d,value:f,offset:d}});return h.filter(function(f){return!uh(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,g){return{coordinate:i(f)+d,value:f,index:g,offset:d}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+d,value:f,offset:d}}):i.domain().map(function(f,g){return{coordinate:i(f)+d,value:o?o[f]:f,index:g,offset:d}})},u0=new WeakMap,rf=function(t,n){if(typeof n!="function")return t;u0.has(t)||u0.set(t,new WeakMap);var r=u0.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},EK=function(t,n,r){var i=t.scale,o=t.type,s=t.layout,l=t.axisType;if(i==="auto")return s==="radial"&&l==="radiusAxis"?{scale:kd(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:_p(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ed(),realScaleType:"point"}:o==="category"?{scale:kd(),realScaleType:"band"}:{scale:_p(),realScaleType:"linear"};if(Rs(i)){var c="scale".concat(_g(i));return{scale:(TI[c]||ed)(),realScaleType:TI[c]?c:"point"}}return Dn(i)?{scale:i}:{scale:ed(),realScaleType:"point"}},WI=1e-4,MK=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),o=Math.min(i[0],i[1])-WI,s=Math.max(i[0],i[1])+WI,l=t(n[0]),c=t(n[r-1]);(l<o||l>s||c<o||c>s)&&t.domain([n[0],n[r-1]])}},LK=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},$K=function(t,n){if(!n||n.length!==2||!_t(n[0])||!_t(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[t[0],t[1]];return(!_t(t[0])||t[0]<r)&&(o[0]=r),(!_t(t[1])||t[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},jK=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var o=0,s=0,l=0;l<n;++l){var c=uh(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1]):(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1])}},FK=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var l=uh(t[s][r][1])?t[s][r][0]:t[s][r][1];l>=0?(t[s][r][0]=o,t[s][r][1]=o+l,o=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},zK={sign:jK,expand:C4,none:_l,silhouette:S4,wiggle:P4,positive:FK},NK=function(t,n,r){var i=n.map(function(l){return l.props.dataKey}),o=zK[r],s=w4().keys(i).value(function(l,c){return+Ma(l,c,0)}).order(Nx).offset(o);return s(t)},BK=function(t,n,r,i,o,s){if(!t)return null;var l=s?n.reverse():n,c={},d=l.reduce(function(f,g){var w,x=(w=g.type)!==null&&w!==void 0&&w.defaultProps?Or(Or({},g.type.defaultProps),g.props):g.props,y=x.stackId,p=x.hide;if(p)return f;var v=x[r],b=f[v]||{hasStack:!1,stackGroups:{}};if(qr(y)){var P=b.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};P.items.push(g),b.hasStack=!0,b.stackGroups[y]=P}else b.stackGroups[dh("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[g]};return Or(Or({},f),{},fl({},v,b))},c),h={};return Object.keys(d).reduce(function(f,g){var w=d[g];if(w.hasStack){var x={};w.stackGroups=Object.keys(w.stackGroups).reduce(function(y,p){var v=w.stackGroups[p];return Or(Or({},y),{},fl({},p,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:NK(t,v.items,o)}))},x)}return Or(Or({},f),{},fl({},g,w))},h)},HK=function(t,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var d=t.domain();if(!d.length)return null;var h=ZG(d,o,l);return t.domain([Ng(h),zg(h)]),{niceTicks:h}}if(o&&i==="number"){var f=t.domain(),g=eK(f,o,l);return{niceTicks:g}}return null};function qI(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,o=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!jn(i[t.dataKey])){var l=op(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var c=Ma(i,jn(s)?t.dataKey:s);return jn(c)?null:t.scale(c)}var UI=function(t){var n=t.axis,r=t.ticks,i=t.offset,o=t.bandSize,s=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=Ma(s,n.dataKey,n.domain[l]);return jn(c)?null:n.scale(c)-o/2+i},WK=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},qK=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Or(Or({},t.type.defaultProps),t.props):t.props,o=i.stackId;if(qr(o)){var s=n[o];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},UK=function(t){return t.reduce(function(n,r){return[Ng(r.concat([n[0]]).filter(_t)),zg(r.concat([n[1]]).filter(_t))]},[1/0,-1/0])},QL=function(t,n,r){return Object.keys(t).reduce(function(i,o){var s=t[o],l=s.stackedData,c=l.reduce(function(d,h){var f=UK(h.slice(n,r+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},VI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dw=function(t,n,r){if(Dn(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(_t(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(VI.test(t[0])){var o=+VI.exec(t[0])[1];i[0]=n[0]-o}else Dn(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(_t(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(GI.test(t[1])){var s=+GI.exec(t[1])[1];i[1]=n[1]+s}else Dn(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Ep=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var o=cC(n,function(f){return f.coordinate}),s=1/0,l=1,c=o.length;l<c;l++){var d=o[l],h=o[l-1];s=Math.min((d.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},KI=function(t,n,r){return!t||!t.length||Bg(t,Ya(r,"type.defaultProps.domain"))?n:t},ZL=function(t,n){var r=t.type.defaultProps?Or(Or({},t.type.defaultProps),t.props):t.props,i=r.dataKey,o=r.name,s=r.unit,l=r.formatter,c=r.tooltipType,d=r.chartType,h=r.hide;return Or(Or({},Hn(t,!1)),{},{dataKey:i,unit:s,formatter:l,name:o||i,color:LC(t),value:Ma(n,i),type:c,payload:n,chartType:d,hide:h})};function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function XI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){VK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VK(e,t,n){return t=GK(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GK(e){var t=KK(e,"string");return Md(t)=="symbol"?t:t+""}function KK(e,t){if(Md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mp=Math.PI/180,YK=function(t){return t*180/Math.PI},ta=function(t,n,r,i){return{x:t+Math.cos(-Mp*i)*r,y:n+Math.sin(-Mp*i)*r}},XK=function(t,n){var r=t.x,i=t.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},JK=function(t,n){var r=t.x,i=t.y,o=n.cx,s=n.cy,l=XK({x:r,y:i},{x:o,y:s});if(l<=0)return{radius:l};var c=(r-o)/l,d=Math.acos(c);return i>s&&(d=2*Math.PI-d),{radius:l,angle:YK(d),angleInRadian:d}},QK=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},ZK=function(t,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),l=Math.min(o,s);return t+l*360},JI=function(t,n){var r=t.x,i=t.y,o=JK({x:r,y:i},n),s=o.radius,l=o.angle,c=n.innerRadius,d=n.outerRadius;if(s<c||s>d)return!1;if(s===0)return!0;var h=QK(n),f=h.startAngle,g=h.endAngle,w=l,x;if(f<=g){for(;w>g;)w-=360;for(;w<f;)w+=360;x=w>=f&&w<=g}else{for(;w>f;)w-=360;for(;w<g;)w+=360;x=w>=g&&w<=f}return x?XI(XI({},n),{},{radius:s,angle:ZK(w,n)}):null};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}var eY=["offset"];function tY(e){return iY(e)||aY(e)||rY(e)||nY()}function nY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rY(e,t){if(e){if(typeof e=="string")return hw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hw(e,t)}}function aY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iY(e){if(Array.isArray(e))return hw(e)}function hw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oY(e,t){if(e==null)return{};var n=sY(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sY(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function QI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(n),!0).forEach(function(r){lY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lY(e,t,n){return t=cY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cY(e){var t=uY(e,"string");return Ld(t)=="symbol"?t:t+""}function uY(e,t){if(Ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $d(){return $d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$d.apply(this,arguments)}var dY=function(t){var n=t.value,r=t.formatter,i=jn(t.children)?n:t.children;return Dn(r)?r(i):i},hY=function(t,n){var r=bi(n-t),i=Math.min(Math.abs(n-t),360);return r*i},fY=function(t,n,r){var i=t.position,o=t.viewBox,s=t.offset,l=t.className,c=o,d=c.cx,h=c.cy,f=c.innerRadius,g=c.outerRadius,w=c.startAngle,x=c.endAngle,y=c.clockWise,p=(f+g)/2,v=hY(w,x),b=v>=0?1:-1,P,k;i==="insideStart"?(P=w+b*s,k=y):i==="insideEnd"?(P=x-b*s,k=!y):i==="end"&&(P=x+b*s,k=y),k=v<=0?k:!k;var C=ta(d,h,p,P),S=ta(d,h,p,P+(k?1:-1)*359),_="M".concat(C.x,",").concat(C.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(k?0:1,`,
    `).concat(S.x,",").concat(S.y),T=jn(t.id)?dh("recharts-radial-line-"):t.id;return Ce.createElement("text",$d({},r,{dominantBaseline:"central",className:wn("recharts-radial-bar-label",l)}),Ce.createElement("defs",null,Ce.createElement("path",{id:T,d:_})),Ce.createElement("textPath",{xlinkHref:"#".concat(T)},n))},pY=function(t){var n=t.viewBox,r=t.offset,i=t.position,o=n,s=o.cx,l=o.cy,c=o.innerRadius,d=o.outerRadius,h=o.startAngle,f=o.endAngle,g=(h+f)/2;if(i==="outside"){var w=ta(s,l,d+r,g),x=w.x,y=w.y;return{x,y,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+d)/2,v=ta(s,l,p,g),b=v.x,P=v.y;return{x:b,y:P,textAnchor:"middle",verticalAnchor:"middle"}},gY=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,o=t.position,s=n,l=s.x,c=s.y,d=s.width,h=s.height,f=h>=0?1:-1,g=f*i,w=f>0?"end":"start",x=f>0?"start":"end",y=d>=0?1:-1,p=y*i,v=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var P={x:l+d/2,y:c-f*i,textAnchor:"middle",verticalAnchor:w};return Br(Br({},P),r?{height:Math.max(c-r.y,0),width:d}:{})}if(o==="bottom"){var k={x:l+d/2,y:c+h+g,textAnchor:"middle",verticalAnchor:x};return Br(Br({},k),r?{height:Math.max(r.y+r.height-(c+h),0),width:d}:{})}if(o==="left"){var C={x:l-p,y:c+h/2,textAnchor:v,verticalAnchor:"middle"};return Br(Br({},C),r?{width:Math.max(C.x-r.x,0),height:h}:{})}if(o==="right"){var S={x:l+d+p,y:c+h/2,textAnchor:b,verticalAnchor:"middle"};return Br(Br({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:h}:{})}var _=r?{width:d,height:h}:{};return o==="insideLeft"?Br({x:l+p,y:c+h/2,textAnchor:b,verticalAnchor:"middle"},_):o==="insideRight"?Br({x:l+d-p,y:c+h/2,textAnchor:v,verticalAnchor:"middle"},_):o==="insideTop"?Br({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:x},_):o==="insideBottom"?Br({x:l+d/2,y:c+h-g,textAnchor:"middle",verticalAnchor:w},_):o==="insideTopLeft"?Br({x:l+p,y:c+g,textAnchor:b,verticalAnchor:x},_):o==="insideTopRight"?Br({x:l+d-p,y:c+g,textAnchor:v,verticalAnchor:x},_):o==="insideBottomLeft"?Br({x:l+p,y:c+h-g,textAnchor:b,verticalAnchor:w},_):o==="insideBottomRight"?Br({x:l+d-p,y:c+h-g,textAnchor:v,verticalAnchor:w},_):ec(o)&&(_t(o.x)||hs(o.x))&&(_t(o.y)||hs(o.y))?Br({x:l+Es(o.x,d),y:c+Es(o.y,h),textAnchor:"end",verticalAnchor:"end"},_):Br({x:l+d/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},_)},mY=function(t){return"cx"in t&&_t(t.cx)};function sa(e){var t=e.offset,n=t===void 0?5:t,r=oY(e,eY),i=Br({offset:n},r),o=i.viewBox,s=i.position,l=i.value,c=i.children,d=i.content,h=i.className,f=h===void 0?"":h,g=i.textBreakAll;if(!o||jn(l)&&jn(c)&&!u.isValidElement(d)&&!Dn(d))return null;if(u.isValidElement(d))return u.cloneElement(d,i);var w;if(Dn(d)){if(w=u.createElement(d,i),u.isValidElement(w))return w}else w=dY(i);var x=mY(o),y=Hn(i,!0);if(x&&(s==="insideStart"||s==="insideEnd"||s==="end"))return fY(i,w,y);var p=x?pY(i):gY(i);return Ce.createElement(vp,$d({className:wn("recharts-label",f)},y,p,{breakAll:g}),w)}sa.displayName="Label";var e$=function(t){var n=t.cx,r=t.cy,i=t.angle,o=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,h=t.outerRadius,f=t.x,g=t.y,w=t.top,x=t.left,y=t.width,p=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(_t(y)&&_t(p)){if(_t(f)&&_t(g))return{x:f,y:g,width:y,height:p};if(_t(w)&&_t(x))return{x:w,y:x,width:y,height:p}}return _t(f)&&_t(g)?{x:f,y:g,width:0,height:0}:_t(n)&&_t(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:d||0,outerRadius:h||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},yY=function(t,n){return t?t===!0?Ce.createElement(sa,{key:"label-implicit",viewBox:n}):qr(t)?Ce.createElement(sa,{key:"label-implicit",viewBox:n,value:t}):u.isValidElement(t)?t.type===sa?u.cloneElement(t,{key:"label-implicit",viewBox:n}):Ce.createElement(sa,{key:"label-implicit",content:t,viewBox:n}):Dn(t)?Ce.createElement(sa,{key:"label-implicit",content:t,viewBox:n}):ec(t)?Ce.createElement(sa,$d({viewBox:n},t,{key:"label-implicit"})):null:null},bY=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,o=e$(t),s=Xa(i,sa).map(function(c,d){return u.cloneElement(c,{viewBox:n||o,key:"label-".concat(d)})});if(!r)return s;var l=yY(t.label,n||o);return[l].concat(tY(s))};sa.parseViewBox=e$;sa.renderCallByParent=bY;var d0,ZI;function vY(){if(ZI)return d0;ZI=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return d0=e,d0}var xY=vY();const wY=vt(xY);function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}var CY=["valueAccessor"],SY=["data","dataKey","clockWise","id","textBreakAll"];function PY(e){return IY(e)||TY(e)||_Y(e)||kY()}function kY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Y(e,t){if(e){if(typeof e=="string")return fw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fw(e,t)}}function TY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IY(e){if(Array.isArray(e))return fw(e)}function fw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lp.apply(this,arguments)}function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(n),!0).forEach(function(r){OY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OY(e,t,n){return t=AY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AY(e){var t=DY(e,"string");return jd(t)=="symbol"?t:t+""}function DY(e,t){if(jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nO(e,t){if(e==null)return{};var n=RY(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RY(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var EY=function(t){return Array.isArray(t.value)?wY(t.value):t.value};function No(e){var t=e.valueAccessor,n=t===void 0?EY:t,r=nO(e,CY),i=r.data,o=r.dataKey,s=r.clockWise,l=r.id,c=r.textBreakAll,d=nO(r,SY);return!i||!i.length?null:Ce.createElement(Er,{className:"recharts-label-list"},i.map(function(h,f){var g=jn(o)?n(h,f):Ma(h&&h.payload,o),w=jn(l)?{}:{id:"".concat(l,"-").concat(f)};return Ce.createElement(sa,Lp({},Hn(h,!0),d,w,{parentViewBox:h.parentViewBox,value:g,textBreakAll:c,viewBox:sa.parseViewBox(jn(s)?h:tO(tO({},h),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}No.displayName="LabelList";function MY(e,t){return e?e===!0?Ce.createElement(No,{key:"labelList-implicit",data:t}):Ce.isValidElement(e)||Dn(e)?Ce.createElement(No,{key:"labelList-implicit",data:t,content:e}):ec(e)?Ce.createElement(No,Lp({data:t},e,{key:"labelList-implicit"})):null:null}function LY(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Xa(r,No).map(function(s,l){return u.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var o=MY(e.label,t);return[o].concat(PY(i))}No.renderCallByParent=LY;function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pw.apply(this,arguments)}function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(n),!0).forEach(function(r){$Y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Y(e,t,n){return t=jY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jY(e){var t=FY(e,"string");return Fd(t)=="symbol"?t:t+""}function FY(e,t){if(Fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zY=function(t,n){var r=bi(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},af=function(t){var n=t.cx,r=t.cy,i=t.radius,o=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,h=c*(l?1:-1)+i,f=Math.asin(c/h)/Mp,g=d?o:o+s*f,w=ta(n,r,h,g),x=ta(n,r,i,g),y=d?o-s*f:o,p=ta(n,r,h*Math.cos(f*Mp),y);return{center:w,circleTangency:x,lineTangency:p,theta:f}},t$=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,s=t.startAngle,l=t.endAngle,c=zY(s,l),d=s+c,h=ta(n,r,o,s),f=ta(n,r,o,d),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var w=ta(n,r,i,s),x=ta(n,r,i,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=d),`,
            `).concat(w.x,",").concat(w.y," Z")}else g+="L ".concat(n,",").concat(r," Z");return g},NY=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,f=bi(h-d),g=af({cx:n,cy:r,radius:o,angle:d,sign:f,cornerRadius:s,cornerIsExternal:c}),w=g.circleTangency,x=g.lineTangency,y=g.theta,p=af({cx:n,cy:r,radius:o,angle:h,sign:-f,cornerRadius:s,cornerIsExternal:c}),v=p.circleTangency,b=p.lineTangency,P=p.theta,k=c?Math.abs(d-h):Math.abs(d-h)-y-P;if(k<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):t$({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h});var C="M ".concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(k>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var S=af({cx:n,cy:r,radius:i,angle:d,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),_=S.circleTangency,T=S.lineTangency,I=S.theta,L=af({cx:n,cy:r,radius:i,angle:h,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),A=L.circleTangency,D=L.lineTangency,B=L.theta,$=c?Math.abs(d-h):Math.abs(d-h)-I-B;if($<0&&s===0)return"".concat(C,"L").concat(n,",").concat(r,"Z");C+="L".concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else C+="L".concat(n,",").concat(r,"Z");return C},BY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},n$=function(t){var n=aO(aO({},BY),t),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,h=n.startAngle,f=n.endAngle,g=n.className;if(s<o||h===f)return null;var w=wn("recharts-sector",g),x=s-o,y=Es(l,x,0,!0),p;return y>0&&Math.abs(h-f)<360?p=NY({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(y,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:f}):p=t$({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:h,endAngle:f}),Ce.createElement("path",pw({},Hn(n,!0),{className:w,d:p,role:"img"}))};function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gw.apply(this,arguments)}function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(n),!0).forEach(function(r){HY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HY(e,t,n){return t=WY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WY(e){var t=qY(e,"string");return zd(t)=="symbol"?t:t+""}function qY(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sO={curveBasisClosed:u4,curveBasisOpen:d4,curveBasis:c4,curveBumpX:Yq,curveBumpY:Xq,curveLinearClosed:h4,curveLinear:Ig,curveMonotoneX:f4,curveMonotoneY:p4,curveNatural:g4,curveStep:m4,curveStepAfter:b4,curveStepBefore:y4},of=function(t){return t.x===+t.x&&t.y===+t.y},$c=function(t){return t.x},jc=function(t){return t.y},UY=function(t,n){if(Dn(t))return t;var r="curve".concat(_g(t));return(r==="curveMonotone"||r==="curveBump")&&n?sO["".concat(r).concat(n==="vertical"?"Y":"X")]:sO[r]||Ig},VY=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,o=i===void 0?[]:i,s=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,h=UY(r,l),f=d?o.filter(function(y){return of(y)}):o,g;if(Array.isArray(s)){var w=d?s.filter(function(y){return of(y)}):s,x=f.map(function(y,p){return oO(oO({},y),{},{base:w[p]})});return l==="vertical"?g=Xh().y(jc).x1($c).x0(function(y){return y.base.x}):g=Xh().x($c).y1(jc).y0(function(y){return y.base.y}),g.defined(of).curve(h),g(x)}return l==="vertical"&&_t(s)?g=Xh().y(jc).x1($c).x0(s):_t(s)?g=Xh().x($c).y1(jc).y0(s):g=iM().x($c).y(jc),g.defined(of).curve(h),g(f)},mw=function(t){var n=t.className,r=t.points,i=t.path,o=t.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?VY(t):i;return u.createElement("path",gw({},Hn(t,!1),sp(t),{className:wn("recharts-curve",n),d:s,ref:o}))},GY=Object.getOwnPropertyNames,KY=Object.getOwnPropertySymbols,YY=Object.prototype.hasOwnProperty;function lO(e,t){return function(r,i,o){return e(r,i,o)&&t(r,i,o)}}function sf(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var o=i.cache,s=o.get(n),l=o.get(r);if(s&&l)return s===r&&l===n;o.set(n,r),o.set(r,n);var c=e(n,r,i);return o.delete(n),o.delete(r),c}}function cO(e){return GY(e).concat(KY(e))}var XY=Object.hasOwn||function(e,t){return YY.call(e,t)};function Ws(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var JY="__v",QY="__o",ZY="_owner",uO=Object.getOwnPropertyDescriptor,dO=Object.keys;function eX(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function tX(e,t){return Ws(e.getTime(),t.getTime())}function nX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function rX(e,t){return e===t}function hO(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.entries(),s,l,c=0;(s=o.next())&&!s.done;){for(var d=t.entries(),h=!1,f=0;(l=d.next())&&!l.done;){if(i[f]){f++;continue}var g=s.value,w=l.value;if(n.equals(g[0],w[0],c,f,e,t,n)&&n.equals(g[1],w[1],g[0],w[0],e,t,n)){h=i[f]=!0;break}f++}if(!h)return!1;c++}return!0}var aX=Ws;function iX(e,t,n){var r=dO(e),i=r.length;if(dO(t).length!==i)return!1;for(;i-- >0;)if(!r$(e,t,n,r[i]))return!1;return!0}function Fc(e,t,n){var r=cO(e),i=r.length;if(cO(t).length!==i)return!1;for(var o,s,l;i-- >0;)if(o=r[i],!r$(e,t,n,o)||(s=uO(e,o),l=uO(t,o),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function oX(e,t){return Ws(e.valueOf(),t.valueOf())}function sX(e,t){return e.source===t.source&&e.flags===t.flags}function fO(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),o=e.values(),s,l;(s=o.next())&&!s.done;){for(var c=t.values(),d=!1,h=0;(l=c.next())&&!l.done;){if(!i[h]&&n.equals(s.value,l.value,s.value,l.value,e,t,n)){d=i[h]=!0;break}h++}if(!d)return!1}return!0}function lX(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function cX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function r$(e,t,n,r){return(r===ZY||r===QY||r===JY)&&(e.$$typeof||t.$$typeof)?!0:XY(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var uX="[object Arguments]",dX="[object Boolean]",hX="[object Date]",fX="[object Error]",pX="[object Map]",gX="[object Number]",mX="[object Object]",yX="[object RegExp]",bX="[object Set]",vX="[object String]",xX="[object URL]",wX=Array.isArray,pO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gO=Object.assign,CX=Object.prototype.toString.call.bind(Object.prototype.toString);function SX(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,h=e.areSetsEqual,f=e.areTypedArraysEqual,g=e.areUrlsEqual;return function(x,y,p){if(x===y)return!0;if(x==null||y==null)return!1;var v=typeof x;if(v!==typeof y)return!1;if(v!=="object")return v==="number"?s(x,y,p):v==="function"?i(x,y,p):!1;var b=x.constructor;if(b!==y.constructor)return!1;if(b===Object)return l(x,y,p);if(wX(x))return t(x,y,p);if(pO!=null&&pO(x))return f(x,y,p);if(b===Date)return n(x,y,p);if(b===RegExp)return d(x,y,p);if(b===Map)return o(x,y,p);if(b===Set)return h(x,y,p);var P=CX(x);return P===hX?n(x,y,p):P===yX?d(x,y,p):P===pX?o(x,y,p):P===bX?h(x,y,p):P===mX?typeof x.then!="function"&&typeof y.then!="function"&&l(x,y,p):P===xX?g(x,y,p):P===fX?r(x,y,p):P===uX?l(x,y,p):P===dX||P===gX||P===vX?c(x,y,p):!1}}function PX(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?Fc:eX,areDatesEqual:tX,areErrorsEqual:nX,areFunctionsEqual:rX,areMapsEqual:r?lO(hO,Fc):hO,areNumbersEqual:aX,areObjectsEqual:r?Fc:iX,arePrimitiveWrappersEqual:oX,areRegExpsEqual:sX,areSetsEqual:r?lO(fO,Fc):fO,areTypedArraysEqual:r?Fc:lX,areUrlsEqual:cX};if(n&&(i=gO({},i,n(i))),t){var o=sf(i.areArraysEqual),s=sf(i.areMapsEqual),l=sf(i.areObjectsEqual),c=sf(i.areSetsEqual);i=gO({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:c})}return i}function kX(e){return function(t,n,r,i,o,s,l){return e(t,n,l)}}function _X(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(c,d){var h=r(),f=h.cache,g=f===void 0?t?new WeakMap:void 0:f,w=h.meta;return n(c,d,{cache:g,equals:i,meta:w,strict:o})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(c,d){return n(c,d,s)}}var TX=ts();ts({strict:!0});ts({circular:!0});ts({circular:!0,strict:!0});ts({createInternalComparator:function(){return Ws}});ts({strict:!0,createInternalComparator:function(){return Ws}});ts({circular:!0,createInternalComparator:function(){return Ws}});ts({circular:!0,createInternalComparator:function(){return Ws},strict:!0});function ts(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,o=e.strict,s=o===void 0?!1:o,l=PX(e),c=SX(l),d=r?r(c):kX(c);return _X({circular:n,comparator:c,createState:i,equals:d,strict:s})}function IX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function mO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>t?(e(o),n=-1):IX(i)};requestAnimationFrame(r)}function yw(e){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(e)}function OX(e){return EX(e)||RX(e)||DX(e)||AX()}function AX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DX(e,t){if(e){if(typeof e=="string")return yO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yO(e,t)}}function yO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EX(e){if(Array.isArray(e))return e}function MX(){var e={},t=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,l=OX(s),c=l[0],d=l.slice(1);if(typeof c=="number"){mO(i.bind(null,d),c);return}i(c),mO(i.bind(null,d));return}yw(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function bO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(n),!0).forEach(function(r){a$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a$(e,t,n){return t=LX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LX(e){var t=$X(e,"string");return Nd(t)==="symbol"?t:String(t)}function $X(e,t){if(Nd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jX=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},FX=function(t){return t},zX=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},nd=function(t,n){return Object.keys(n).reduce(function(r,i){return vO(vO({},r),{},a$({},i,t(i,n[i])))},{})},xO=function(t,n,r){return t.map(function(i){return"".concat(zX(i)," ").concat(n,"ms ").concat(r)}).join(",")};function NX(e,t){return WX(e)||HX(e,t)||i$(e,t)||BX()}function BX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HX(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function WX(e){if(Array.isArray(e))return e}function qX(e){return GX(e)||VX(e)||i$(e)||UX()}function UX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i$(e,t){if(e){if(typeof e=="string")return bw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bw(e,t)}}function VX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GX(e){if(Array.isArray(e))return bw(e)}function bw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $p=1e-4,o$=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},s$=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},wO=function(t,n){return function(r){var i=o$(t,n);return s$(i,r)}},KX=function(t,n){return function(r){var i=o$(t,n),o=[].concat(qX(i.map(function(s,l){return s*l}).slice(1)),[0]);return s$(o,r)}},CO=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,l=1;break;case"ease":i=.25,o=.1,s=.25,l=1;break;case"ease-in":i=.42,o=0,s=1,l=1;break;case"ease-out":i=.42,o=0,s=.58,l=1;break;case"ease-in-out":i=0,o=0,s=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),h=NX(d,4);i=h[0],o=h[1],s=h[2],l=h[3]}}}var f=wO(i,s),g=wO(o,l),w=KX(i,s),x=function(v){return v>1?1:v<0?0:v},y=function(v){for(var b=v>1?1:v,P=b,k=0;k<8;++k){var C=f(P)-b,S=w(P);if(Math.abs(C-b)<$p||S<$p)return g(P);P=x(P-C/S)}return g(P)};return y.isStepper=!1,y},YX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,o=i===void 0?8:i,s=t.dt,l=s===void 0?17:s,c=function(h,f,g){var w=-(h-f)*r,x=g*o,y=g+(w-x)*l/1e3,p=g*l/1e3+h;return Math.abs(p-f)<$p&&Math.abs(y)<$p?[f,0]:[p,y]};return c.isStepper=!0,c.dt=l,c},XX=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CO(i);case"spring":return YX();default:if(i.split("(")[0]==="cubic-bezier")return CO(i)}return typeof i=="function"?i:null};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function SO(e){return ZX(e)||QX(e)||l$(e)||JX()}function JX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZX(e){if(Array.isArray(e))return xw(e)}function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(n),!0).forEach(function(r){vw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vw(e,t,n){return t=eJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eJ(e){var t=tJ(e,"string");return Bd(t)==="symbol"?t:String(t)}function tJ(e,t){if(Bd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nJ(e,t){return iJ(e)||aJ(e,t)||l$(e,t)||rJ()}function rJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l$(e,t){if(e){if(typeof e=="string")return xw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xw(e,t)}}function xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function iJ(e){if(Array.isArray(e))return e}var jp=function(t,n,r){return t+(n-t)*r},ww=function(t){var n=t.from,r=t.to;return n!==r},oJ=function e(t,n,r){var i=nd(function(o,s){if(ww(s)){var l=t(s.from,s.to,s.velocity),c=nJ(l,2),d=c[0],h=c[1];return ea(ea({},s),{},{from:d,velocity:h})}return s},n);return r<1?nd(function(o,s){return ww(s)?ea(ea({},s),{},{velocity:jp(s.velocity,i[o].velocity,r),from:jp(s.from,i[o].from,r)}):s},n):e(t,i,r-1)};const sJ=function(e,t,n,r,i){var o=jX(e,t),s=o.reduce(function(p,v){return ea(ea({},p),{},vw({},v,[e[v],t[v]]))},{}),l=o.reduce(function(p,v){return ea(ea({},p),{},vw({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,h,f=function(){return null},g=function(){return nd(function(v,b){return b.from},l)},w=function(){return!Object.values(l).filter(ww).length},x=function(v){d||(d=v);var b=v-d,P=b/n.dt;l=oJ(n,l,P),i(ea(ea(ea({},e),t),g())),d=v,w()||(c=requestAnimationFrame(f))},y=function(v){h||(h=v);var b=(v-h)/r,P=nd(function(C,S){return jp.apply(void 0,SO(S).concat([n(b)]))},s);if(i(ea(ea(ea({},e),t),P)),b<1)c=requestAnimationFrame(f);else{var k=nd(function(C,S){return jp.apply(void 0,SO(S).concat([n(1)]))},s);i(ea(ea(ea({},e),t),k))}};return f=n.isStepper?x:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}var lJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function cJ(e,t){if(e==null)return{};var n=uJ(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function h0(e){return pJ(e)||fJ(e)||hJ(e)||dJ()}function dJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(e,t){if(e){if(typeof e=="string")return Cw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cw(e,t)}}function fJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pJ(e){if(Array.isArray(e))return Cw(e)}function Cw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(r){Ku(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ku(e,t,n){return t=c$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c$(r.key),r)}}function yJ(e,t,n){return t&&mJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c$(e){var t=bJ(e,"string");return Ll(t)==="symbol"?t:String(t)}function bJ(e,t){if(Ll(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ll(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sw(e,t)}function Sw(e,t){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sw(e,t)}function xJ(e){var t=wJ();return function(){var r=Fp(e),i;if(t){var o=Fp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Pw(this,i)}}function Pw(e,t){if(t&&(Ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kw(e)}function kw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fp(e)}var go=function(e){vJ(n,e);var t=xJ(n);function n(r,i){var o;gJ(this,n),o=t.call(this,r,i);var s=o.props,l=s.isActive,c=s.attributeName,d=s.from,h=s.to,f=s.steps,g=s.children,w=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(kw(o)),o.changeStyle=o.changeStyle.bind(kw(o)),!l||w<=0)return o.state={style:{}},typeof g=="function"&&(o.state={style:h}),Pw(o);if(f&&f.length)o.state={style:f[0].style};else if(d){if(typeof g=="function")return o.state={style:d},Pw(o);o.state={style:c?Ku({},c,d):d}}else o.state={style:{}};return o}return yJ(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,l=o.canBegin,c=o.attributeName,d=o.shouldReAnimate,h=o.to,f=o.from,g=this.state.style;if(l){if(!s){var w={style:c?Ku({},c,h):h};this.state&&g&&(c&&g[c]!==h||!c&&g!==h)&&this.setState(w);return}if(!(TX(i.to,h)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=x||d?f:i.to;if(this.state&&g){var p={style:c?Ku({},c,y):y};(c&&g[c]!==y||!c&&g!==y)&&this.setState(p)}this.runAnimation(ii(ii({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,l=i.to,c=i.duration,d=i.easing,h=i.begin,f=i.onAnimationEnd,g=i.onAnimationStart,w=sJ(s,l,XX(d),c,this.changeStyle),x=function(){o.stopJSAnimation=w()};this.manager.start([g,h,x,c,f])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,l=i.begin,c=i.onAnimationStart,d=s[0],h=d.style,f=d.duration,g=f===void 0?0:f,w=function(y,p,v){if(v===0)return y;var b=p.duration,P=p.easing,k=P===void 0?"ease":P,C=p.style,S=p.properties,_=p.onAnimationEnd,T=v>0?s[v-1]:p,I=S||Object.keys(C);if(typeof k=="function"||k==="spring")return[].concat(h0(y),[o.runJSAnimation.bind(o,{from:T.style,to:C,duration:b,easing:k}),b]);var L=xO(I,b,k),A=ii(ii(ii({},T.style),C),{},{transition:L});return[].concat(h0(y),[A,b,_]).filter(FX)};return this.manager.start([c].concat(h0(s.reduce(w,[h,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=MX());var o=i.begin,s=i.duration,l=i.attributeName,c=i.to,d=i.easing,h=i.onAnimationStart,f=i.onAnimationEnd,g=i.steps,w=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof w=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var y=l?Ku({},l,c):c,p=xO(Object.keys(y),s,d);x.start([h,o,ii(ii({},y),{},{transition:p}),s,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=cJ(i,lJ),d=u.Children.count(o),h=this.state.style;if(typeof o=="function")return o(h);if(!l||d===0||s<=0)return o;var f=function(w){var x=w.props,y=x.style,p=y===void 0?{}:y,v=x.className,b=u.cloneElement(w,ii(ii({},c),{},{style:ii(ii({},p),h),className:v}));return b};return d===1?f(u.Children.only(o)):Ce.createElement("div",null,u.Children.map(o,function(g){return f(g)}))}}]),n}(u.PureComponent);go.displayName="Animate";go.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};go.propTypes={from:re.oneOfType([re.object,re.string]),to:re.oneOfType([re.object,re.string]),attributeName:re.string,duration:re.number,begin:re.number,easing:re.oneOfType([re.string,re.func]),steps:re.arrayOf(re.shape({duration:re.number.isRequired,style:re.object.isRequired,easing:re.oneOfType([re.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),re.func]),properties:re.arrayOf("string"),onAnimationEnd:re.func})),children:re.oneOfType([re.node,re.func]),isActive:re.bool,canBegin:re.bool,onAnimationEnd:re.func,shouldReAnimate:re.bool,onAnimationStart:re.func,onAnimationReStart:re.func};function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zp.apply(this,arguments)}function CJ(e,t){return _J(e)||kJ(e,t)||PJ(e,t)||SJ()}function SJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PJ(e,t){if(e){if(typeof e=="string")return _O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _O(e,t)}}function _O(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function _J(e){if(Array.isArray(e))return e}function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(n),!0).forEach(function(r){TJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TJ(e,t,n){return t=IJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IJ(e){var t=OJ(e,"string");return Hd(t)=="symbol"?t:t+""}function OJ(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OO=function(t,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,h;if(s>0&&o instanceof Array){for(var f=[0,0,0,0],g=0,w=4;g<w;g++)f[g]=o[g]>s?s:o[g];h="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(h+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(n)),h+="L ".concat(t+r-c*f[1],",").concat(n),f[1]>0&&(h+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+r,",").concat(n+l*f[1])),h+="L ".concat(t+r,",").concat(n+i-l*f[2]),f[2]>0&&(h+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+r-c*f[2],",").concat(n+i)),h+="L ".concat(t+c*f[3],",").concat(n+i),f[3]>0&&(h+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*f[3])),h+="Z"}else if(s>0&&o===+o&&o>0){var x=Math.min(s,o);h="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+r-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+r,",").concat(n+l*x,`
            L `).concat(t+r,",").concat(n+i-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+r-c*x,",").concat(n+i,`
            L `).concat(t+c*x,",").concat(n+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*x," Z")}else h="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},AJ=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,o=n.x,s=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(o,o+l),h=Math.max(o,o+l),f=Math.min(s,s+c),g=Math.max(s,s+c);return r>=d&&r<=h&&i>=f&&i<=g}return!1},DJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$C=function(t){var n=IO(IO({},DJ),t),r=u.useRef(),i=u.useState(-1),o=CJ(i,2),s=o[0],l=o[1];u.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&l(k)}catch{}},[]);var c=n.x,d=n.y,h=n.width,f=n.height,g=n.radius,w=n.className,x=n.animationEasing,y=n.animationDuration,p=n.animationBegin,v=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||f!==+f||h===0||f===0)return null;var P=wn("recharts-rectangle",w);return b?Ce.createElement(go,{canBegin:s>0,from:{width:h,height:f,x:c,y:d},to:{width:h,height:f,x:c,y:d},duration:y,animationEasing:x,isActive:b},function(k){var C=k.width,S=k.height,_=k.x,T=k.y;return Ce.createElement(go,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:y,isActive:v,easing:x},Ce.createElement("path",zp({},Hn(n,!0),{className:P,d:OO(_,T,C,S,g),ref:r})))}):Ce.createElement("path",zp({},Hn(n,!0),{className:P,d:OO(c,d,h,f,g)}))};function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_w.apply(this,arguments)}var jC=function(t){var n=t.cx,r=t.cy,i=t.r,o=t.className,s=wn("recharts-dot",o);return n===+n&&r===+r&&i===+i?u.createElement("circle",_w({},Hn(t,!1),sp(t),{className:s,cx:n,cy:r,r:i})):null};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}var RJ=["x","y","top","left","width","height","className"];function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tw.apply(this,arguments)}function AO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(n),!0).forEach(function(r){MJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MJ(e,t,n){return t=LJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LJ(e){var t=$J(e,"string");return Wd(t)=="symbol"?t:t+""}function $J(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jJ(e,t){if(e==null)return{};var n=FJ(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FJ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var zJ=function(t,n,r,i,o,s){return"M".concat(t,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},NJ=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,o=i===void 0?0:i,s=t.top,l=s===void 0?0:s,c=t.left,d=c===void 0?0:c,h=t.width,f=h===void 0?0:h,g=t.height,w=g===void 0?0:g,x=t.className,y=jJ(t,RJ),p=EJ({x:r,y:o,top:l,left:d,width:f,height:w},y);return!_t(r)||!_t(o)||!_t(f)||!_t(w)||!_t(l)||!_t(d)?null:Ce.createElement("path",Tw({},Hn(p,!0),{className:wn("recharts-cross",x),d:zJ(r,o,f,w,l,d)}))},f0,DO;function BJ(){if(DO)return f0;DO=1;var e=IM(),t=e(Object.getPrototypeOf,Object);return f0=t,f0}var p0,RO;function HJ(){if(RO)return p0;RO=1;var e=bo(),t=BJ(),n=vo(),r="[object Object]",i=Function.prototype,o=Object.prototype,s=i.toString,l=o.hasOwnProperty,c=s.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var f=t(h);if(f===null)return!0;var g=l.call(f,"constructor")&&f.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==c}return p0=d,p0}var WJ=HJ();const qJ=vt(WJ);var g0,EO;function UJ(){if(EO)return g0;EO=1;var e=bo(),t=vo(),n="[object Boolean]";function r(i){return i===!0||i===!1||t(i)&&e(i)==n}return g0=r,g0}var VJ=UJ();const GJ=vt(VJ);function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(this,arguments)}function KJ(e,t){return QJ(e)||JJ(e,t)||XJ(e,t)||YJ()}function YJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XJ(e,t){if(e){if(typeof e=="string")return MO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MO(e,t)}}function MO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function QJ(e){if(Array.isArray(e))return e}function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(r){ZJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZJ(e,t,n){return t=eQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eQ(e){var t=tQ(e,"string");return qd(t)=="symbol"?t:t+""}function tQ(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jO=function(t,n,r,i,o){var s=r-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-s/2,",").concat(n+o),l+="L ".concat(t+r-s/2-i,",").concat(n+o),l+="L ".concat(t,",").concat(n," Z"),l},nQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rQ=function(t){var n=$O($O({},nQ),t),r=u.useRef(),i=u.useState(-1),o=KJ(i,2),s=o[0],l=o[1];u.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&l(P)}catch{}},[]);var c=n.x,d=n.y,h=n.upperWidth,f=n.lowerWidth,g=n.height,w=n.className,x=n.animationEasing,y=n.animationDuration,p=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||f!==+f||g!==+g||h===0&&f===0||g===0)return null;var b=wn("recharts-trapezoid",w);return v?Ce.createElement(go,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:h,lowerWidth:f,height:g,x:c,y:d},duration:y,animationEasing:x,isActive:v},function(P){var k=P.upperWidth,C=P.lowerWidth,S=P.height,_=P.x,T=P.y;return Ce.createElement(go,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:y,easing:x},Ce.createElement("path",Np({},Hn(n,!0),{className:b,d:jO(_,T,k,C,S),ref:r})))}):Ce.createElement("g",null,Ce.createElement("path",Np({},Hn(n,!0),{className:b,d:jO(c,d,h,f,g)})))},aQ=["option","shapeType","propTransformer","activeClassName","isActive"];function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function iQ(e,t){if(e==null)return{};var n=oQ(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oQ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function FO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(n),!0).forEach(function(r){sQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sQ(e,t,n){return t=lQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lQ(e){var t=cQ(e,"string");return Ud(t)=="symbol"?t:t+""}function cQ(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uQ(e,t){return Bp(Bp({},t),e)}function dQ(e,t){return e==="symbols"}function zO(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Ce.createElement($C,n);case"trapezoid":return Ce.createElement(rQ,n);case"sector":return Ce.createElement(n$,n);case"symbols":if(dQ(t))return Ce.createElement(tC,n);break;default:return null}}function hQ(e){return u.isValidElement(e)?e.props:e}function fQ(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?uQ:r,o=e.activeClassName,s=o===void 0?"recharts-active-shape":o,l=e.isActive,c=iQ(e,aQ),d;if(u.isValidElement(t))d=u.cloneElement(t,Bp(Bp({},c),hQ(t)));else if(Dn(t))d=t(c);else if(qJ(t)&&!GJ(t)){var h=i(t,c);d=Ce.createElement(zO,{shapeType:n,elementProps:h})}else{var f=c;d=Ce.createElement(zO,{shapeType:n,elementProps:f})}return l?Ce.createElement(Er,{className:s},d):d}function qg(e,t){return t!=null&&"trapezoids"in e.props}function Ug(e,t){return t!=null&&"sectors"in e.props}function Vd(e,t){return t!=null&&"points"in e.props}function pQ(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,o=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&o}function gQ(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function mQ(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function yQ(e,t){var n;return qg(e,t)?n=pQ:Ug(e,t)?n=gQ:Vd(e,t)&&(n=mQ),n}function bQ(e,t){var n;return qg(e,t)?n="trapezoids":Ug(e,t)?n="sectors":Vd(e,t)&&(n="points"),n}function vQ(e,t){if(qg(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ug(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Vd(e,t)?t.payload:{}}function xQ(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=bQ(n,t),o=vQ(n,t),s=r.filter(function(c,d){var h=Bg(o,c),f=n.props[i].filter(function(x){var y=yQ(n,t);return y(x,t)}),g=n.props[i].indexOf(f[f.length-1]),w=d===g;return h&&w}),l=r.indexOf(s[s.length-1]);return l}var m0,NO;function wQ(){if(NO)return m0;NO=1;var e=Math.ceil,t=Math.max;function n(r,i,o,s){for(var l=-1,c=t(e((i-r)/(o||1)),0),d=Array(c);c--;)d[s?c:++l]=r,r+=o;return d}return m0=n,m0}var y0,BO;function u$(){if(BO)return y0;BO=1;var e=qM(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return y0=r,y0}var b0,HO;function CQ(){if(HO)return b0;HO=1;var e=wQ(),t=Rg(),n=u$();function r(i){return function(o,s,l){return l&&typeof l!="number"&&t(o,s,l)&&(s=l=void 0),o=n(o),s===void 0?(s=o,o=0):s=n(s),l=l===void 0?o<s?1:-1:n(l),e(o,s,l,i)}}return b0=r,b0}var v0,WO;function SQ(){if(WO)return v0;WO=1;var e=CQ(),t=e();return v0=t,v0}var PQ=SQ();const Hp=vt(PQ);function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(n),!0).forEach(function(r){d$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d$(e,t,n){return t=kQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kQ(e){var t=_Q(e,"string");return Gd(t)=="symbol"?t:t+""}function _Q(e,t){if(Gd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TQ=["Webkit","Moz","O","ms"],IQ=function(t,n){var r=t.replace(/(\w)/,function(o){return o.toUpperCase()}),i=TQ.reduce(function(o,s){return UO(UO({},o),{},d$({},s+r,n))},{});return i[t]=n,i};function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wp.apply(this,arguments)}function VO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function x0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(n),!0).forEach(function(r){Ta(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f$(r.key),r)}}function AQ(e,t,n){return t&&GO(e.prototype,t),n&&GO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function DQ(e,t,n){return t=qp(t),RQ(e,h$()?Reflect.construct(t,n||[],qp(e).constructor):t.apply(e,n))}function RQ(e,t){if(t&&($l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EQ(e)}function EQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h$=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qp(e)}function MQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}function Iw(e,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Iw(e,t)}function Ta(e,t,n){return t=f$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f$(e){var t=LQ(e,"string");return $l(t)=="symbol"?t:t+""}function LQ(e,t){if($l(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $Q=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,o=t.x,s=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=ed().domain(Hp(0,c)).range([o,o+s-l]),h=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:h}},KO=function(t){return t.changedTouches&&!!t.changedTouches.length},jl=function(e){function t(n){var r;return OQ(this,t),r=DQ(this,t,[n]),Ta(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ta(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ta(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,l=i.startIndex;s==null||s({endIndex:o,startIndex:l})}),r.detachDragEndListener()}),Ta(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ta(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ta(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ta(r,"handleSlideDragStart",function(i){var o=KO(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return MQ(t,e),AQ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,h=d.length-1,f=Math.min(i,o),g=Math.max(i,o),w=t.getIndexInRange(s,f),x=t.getIndexInRange(s,g);return{startIndex:w-w%c,endIndex:x===h?h:x-x%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,l=i.dataKey,c=Ma(o[r],l,r);return Dn(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,l=i.endX,c=this.props,d=c.x,h=c.width,f=c.travellerWidth,g=c.startIndex,w=c.endIndex,x=c.onChange,y=r.pageX-o;y>0?y=Math.min(y,d+h-f-l,d+h-f-s):y<0&&(y=Math.max(y,d-s,d-l));var p=this.getIndex({startX:s+y,endX:l+y});(p.startIndex!==g||p.endIndex!==w)&&x&&x(p),this.setState({startX:s+y,endX:l+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=KO(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[s],h=this.props,f=h.x,g=h.width,w=h.travellerWidth,x=h.onChange,y=h.gap,p=h.data,v={startX:this.state.startX,endX:this.state.endX},b=r.pageX-o;b>0?b=Math.min(b,f+g-w-d):b<0&&(b=Math.max(b,f-d)),v[s]=d+b;var P=this.getIndex(v),k=P.startIndex,C=P.endIndex,S=function(){var T=p.length-1;return s==="startX"&&(l>c?k%y===0:C%y===0)||l<c&&C===T||s==="endX"&&(l>c?C%y===0:k%y===0)||l>c&&C===T};this.setState(Ta(Ta({},s,d+b),"brushMoveStartX",r.pageX),function(){x&&S()&&x(P)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,l=s.scaleValues,c=s.startX,d=s.endX,h=this.state[i],f=l.indexOf(h);if(f!==-1){var g=f+r;if(!(g===-1||g>=l.length)){var w=l[g];i==="startX"&&w>=d||i==="endX"&&w<=c||this.setState(Ta({},i,w),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,l=r.height,c=r.fill,d=r.stroke;return Ce.createElement("rect",{stroke:d,fill:c,x:i,y:o,width:s,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,l=r.height,c=r.data,d=r.children,h=r.padding,f=u.Children.only(d);return f?Ce.cloneElement(f,{x:i,y:o,width:s,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,l=this,c=this.props,d=c.y,h=c.travellerWidth,f=c.height,g=c.traveller,w=c.ariaLabel,x=c.data,y=c.startIndex,p=c.endIndex,v=Math.max(r,this.props.x),b=x0(x0({},Hn(this.props,!1)),{},{x:v,y:d,width:h,height:f}),P=w||"Min value: ".concat((o=x[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=x[p])===null||s===void 0?void 0:s.name);return Ce.createElement(Er,{tabIndex:0,role:"slider","aria-label":P,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,b))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,l=o.height,c=o.stroke,d=o.travellerWidth,h=Math.min(r,i)+d,f=Math.max(Math.abs(i-r)-d,0);return Ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:s,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,l=r.height,c=r.travellerWidth,d=r.stroke,h=this.state,f=h.startX,g=h.endX,w=5,x={pointerEvents:"none",fill:d};return Ce.createElement(Er,{className:"recharts-brush-texts"},Ce.createElement(vp,Wp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,g)-w,y:s+l/2},x),this.getTextOfTick(i)),Ce.createElement(vp,Wp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,g)+c+w,y:s+l/2},x),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,l=r.x,c=r.y,d=r.width,h=r.height,f=r.alwaysShowText,g=this.state,w=g.startX,x=g.endX,y=g.isTextActive,p=g.isSlideMoving,v=g.isTravellerMoving,b=g.isTravellerFocused;if(!i||!i.length||!_t(l)||!_t(c)||!_t(d)||!_t(h)||d<=0||h<=0)return null;var P=wn("recharts-brush",o),k=Ce.Children.count(s)===1,C=IQ("userSelect","none");return Ce.createElement(Er,{className:P,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(w,x),this.renderTravellerLayer(w,"startX"),this.renderTravellerLayer(x,"endX"),(y||p||v||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,l=r.height,c=r.stroke,d=Math.floor(o+l/2)-1;return Ce.createElement(Ce.Fragment,null,Ce.createElement("rect",{x:i,y:o,width:s,height:l,fill:c,stroke:"none"}),Ce.createElement("line",{x1:i+1,y1:d,x2:i+s-1,y2:d,fill:"none",stroke:"#fff"}),Ce.createElement("line",{x1:i+1,y1:d+2,x2:i+s-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return Ce.isValidElement(r)?o=Ce.cloneElement(r,i):Dn(r)?o=r(i):o=t.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,l=r.x,c=r.travellerWidth,d=r.updateId,h=r.startIndex,f=r.endIndex;if(o!==i.prevData||d!==i.prevUpdateId)return x0({prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:s},o&&o.length?$Q({data:o,width:s,x:l,travellerWidth:c,startIndex:h,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+s-c]);var g=i.scale.domain().map(function(w){return i.scale(w)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,l=o-1;l-s>1;){var c=Math.floor((s+l)/2);r[c]>i?l=c:s=c}return i>=r[l]?l:s}}])}(u.PureComponent);Ta(jl,"displayName","Brush");Ta(jl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var w0,YO;function jQ(){if(YO)return w0;YO=1;var e=lC();function t(n,r){var i;return e(n,function(o,s,l){return i=r(o,s,l),!i}),!!i}return w0=t,w0}var C0,XO;function FQ(){if(XO)return C0;XO=1;var e=wM(),t=Qo(),n=jQ(),r=Pa(),i=Rg();function o(s,l,c){var d=r(s)?e:n;return c&&i(s,l,c)&&(l=void 0),d(s,t(l,3))}return C0=o,C0}var zQ=FQ();const NQ=vt(zQ);var Li=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},S0,JO;function BQ(){if(JO)return S0;JO=1;var e=zM();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return S0=t,S0}var P0,QO;function HQ(){if(QO)return P0;QO=1;var e=BQ(),t=jM(),n=Qo();function r(i,o){var s={};return o=n(o,3),t(i,function(l,c,d){e(s,c,o(l,c,d))}),s}return P0=r,P0}var WQ=HQ();const qQ=vt(WQ);var k0,ZO;function UQ(){if(ZO)return k0;ZO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(!n(t[r],r,t))return!1;return!0}return k0=e,k0}var _0,eA;function VQ(){if(eA)return _0;eA=1;var e=lC();function t(n,r){var i=!0;return e(n,function(o,s,l){return i=!!r(o,s,l),i}),i}return _0=t,_0}var T0,tA;function GQ(){if(tA)return T0;tA=1;var e=UQ(),t=VQ(),n=Qo(),r=Pa(),i=Rg();function o(s,l,c){var d=r(s)?e:t;return c&&i(s,l,c)&&(l=void 0),d(s,n(l,3))}return T0=o,T0}var KQ=GQ();const p$=vt(KQ);var YQ=["x","y"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ow.apply(this,arguments)}function nA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nA(Object(n),!0).forEach(function(r){XQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XQ(e,t,n){return t=JQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JQ(e){var t=QQ(e,"string");return Kd(t)=="symbol"?t:t+""}function QQ(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZQ(e,t){if(e==null)return{};var n=eZ(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eZ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function tZ(e,t){var n=e.x,r=e.y,i=ZQ(e,YQ),o="".concat(n),s=parseInt(o,10),l="".concat(r),c=parseInt(l,10),d="".concat(t.height||i.height),h=parseInt(d,10),f="".concat(t.width||i.width),g=parseInt(f,10);return zc(zc(zc(zc(zc({},t),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:g,name:t.name,radius:t.radius})}function rA(e){return Ce.createElement(fQ,Ow({shapeType:"rectangle",propTransformer:tZ,activeClassName:"recharts-active-bar"},e))}var nZ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var o=_t(r)||mq(r);return o?t(r,i):(o||Ls(),n)}},rZ=["value","background"],g$;function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function aZ(e,t){if(e==null)return{};var n=iZ(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iZ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Up.apply(this,arguments)}function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(n),!0).forEach(function(r){$o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y$(r.key),r)}}function sZ(e,t,n){return t&&iA(e.prototype,t),n&&iA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lZ(e,t,n){return t=Vp(t),cZ(e,m$()?Reflect.construct(t,n||[],Vp(e).constructor):t.apply(e,n))}function cZ(e,t){if(t&&(Fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uZ(e)}function uZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m$=function(){return!!e})()}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vp(e)}function dZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aw(e,t)}function Aw(e,t){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Aw(e,t)}function $o(e,t,n){return t=y$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y$(e){var t=hZ(e,"string");return Fl(t)=="symbol"?t:t+""}function hZ(e,t){if(Fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bh=function(e){function t(){var n;oZ(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=lZ(this,t,[].concat(i)),$o(n,"state",{isAnimationFinished:!1}),$o(n,"id",dh("recharts-bar-")),$o(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),$o(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return dZ(t,e),sZ(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,l=o.dataKey,c=o.activeIndex,d=o.activeBar,h=Hn(this.props,!1);return r&&r.map(function(f,g){var w=g===c,x=w?d:s,y=$r($r($r({},h),f),{},{isActive:w,option:x,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ce.createElement(Er,Up({className:"recharts-bar-rectangle"},lp(i.props,f,g),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(g)}),Ce.createElement(rA,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,f=i.animationId,g=this.state.prevData;return Ce.createElement(go,{begin:c,duration:d,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var x=w.t,y=o.map(function(p,v){var b=g&&g[v];if(b){var P=pi(b.x,p.x),k=pi(b.y,p.y),C=pi(b.width,p.width),S=pi(b.height,p.height);return $r($r({},p),{},{x:P(x),y:k(x),width:C(x),height:S(x)})}if(s==="horizontal"){var _=pi(0,p.height),T=_(x);return $r($r({},p),{},{y:p.y+p.height-T,height:T})}var I=pi(0,p.width),L=I(x);return $r($r({},p),{},{width:L})});return Ce.createElement(Er,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!Bg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,l=i.activeIndex,c=Hn(this.props.background,!1);return o.map(function(d,h){d.value;var f=d.background,g=aZ(d,rZ);if(!f)return null;var w=$r($r($r($r($r({},g),{},{fill:"#eee"},f),c),lp(r.props,d,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:h,className:"recharts-bar-background-rectangle"});return Ce.createElement(rA,Up({key:"background-bar-".concat(h),option:r.props.background,isActive:h===l},w))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,l=o.xAxis,c=o.yAxis,d=o.layout,h=o.children,f=Xa(h,yh);if(!f)return null;var g=d==="vertical"?s[0].height/2:s[0].width/2,w=function(p,v){var b=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:b,errorVal:Ma(p,v)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(Er,x,f.map(function(y){return Ce.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:s,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:w})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,l=r.xAxis,c=r.yAxis,d=r.left,h=r.top,f=r.width,g=r.height,w=r.isAnimationActive,x=r.background,y=r.id;if(i||!o||!o.length)return null;var p=this.state.isAnimationFinished,v=wn("recharts-bar",s),b=l&&l.allowDataOverflow,P=c&&c.allowDataOverflow,k=b||P,C=jn(y)?this.id:y;return Ce.createElement(Er,{className:v},b||P?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(C)},Ce.createElement("rect",{x:b?d:d-f/2,y:P?h:h-g/2,width:b?f:f*2,height:P?g:g*2}))):null,Ce.createElement(Er,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(C,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,C),(!w||p)&&No.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(u.PureComponent);g$=bh;$o(bh,"displayName","Bar");$o(bh,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$o(bh,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,o=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,h=e.dataStartIndex,f=e.displayedData,g=e.offset,w=LK(r,n);if(!w)return null;var x=t.layout,y=n.type.defaultProps,p=y!==void 0?$r($r({},y),n.props):n.props,v=p.dataKey,b=p.children,P=p.minPointSize,k=x==="horizontal"?s:o,C=d?k.scale.domain():null,S=WK({numericAxis:k}),_=Xa(b,GM),T=f.map(function(I,L){var A,D,B,$,N,F;d?A=$K(d[h+L],C):(A=Ma(I,v),Array.isArray(A)||(A=[S,A]));var O=nZ(P,g$.defaultProps.minPointSize)(A[1],L);if(x==="horizontal"){var R,E=[s.scale(A[0]),s.scale(A[1])],z=E[0],q=E[1];D=UI({axis:o,ticks:l,bandSize:i,offset:w.offset,entry:I,index:L}),B=(R=q??z)!==null&&R!==void 0?R:void 0,$=w.size;var X=z-q;if(N=Number.isNaN(X)?0:X,F={x:D,y:s.y,width:$,height:s.height},Math.abs(O)>0&&Math.abs(N)<Math.abs(O)){var H=bi(N||O)*(Math.abs(O)-Math.abs(N));B-=H,N+=H}}else{var K=[o.scale(A[0]),o.scale(A[1])],ee=K[0],ge=K[1];if(D=ee,B=UI({axis:s,ticks:c,bandSize:i,offset:w.offset,entry:I,index:L}),$=ge-ee,N=w.size,F={x:o.x,y:B,width:o.width,height:N},Math.abs(O)>0&&Math.abs($)<Math.abs(O)){var oe=bi($||O)*(Math.abs(O)-Math.abs($));$+=oe}}return $r($r($r({},I),{},{x:D,y:B,width:$,height:N,value:d?A:A[1],payload:I,background:F},_&&_[L]&&_[L].props),{},{tooltipPayload:[ZL(n,I)],tooltipPosition:{x:D+$/2,y:B+N/2}})});return $r({data:T,layout:x},g)});function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function fZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b$(r.key),r)}}function pZ(e,t,n){return t&&oA(e.prototype,t),n&&oA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(r){Vg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vg(e,t,n){return t=b$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b$(e){var t=gZ(e,"string");return Yd(t)=="symbol"?t:t+""}function gZ(e,t){if(Yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mZ=function(t,n,r,i,o){var s=t.width,l=t.height,c=t.layout,d=t.children,h=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},g=!!Ia(d,bh);return h.reduce(function(w,x){var y=n[x],p=y.orientation,v=y.domain,b=y.padding,P=b===void 0?{}:b,k=y.mirror,C=y.reversed,S="".concat(p).concat(k?"Mirror":""),_,T,I,L,A;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var D=v[1]-v[0],B=1/0,$=y.categoricalDomain.sort(vq);if($.forEach(function(K,ee){ee>0&&(B=Math.min((K||0)-($[ee-1]||0),B))}),Number.isFinite(B)){var N=B/D,F=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(_=N*F/2),y.padding==="no-gap"){var O=Es(t.barCategoryGap,N*F),R=N*F/2;_=R-O-(R-O)/F*O}}}i==="xAxis"?T=[r.left+(P.left||0)+(_||0),r.left+r.width-(P.right||0)-(_||0)]:i==="yAxis"?T=c==="horizontal"?[r.top+r.height-(P.bottom||0),r.top+(P.top||0)]:[r.top+(P.top||0)+(_||0),r.top+r.height-(P.bottom||0)-(_||0)]:T=y.range,C&&(T=[T[1],T[0]]);var E=EK(y,o,g),z=E.scale,q=E.realScaleType;z.domain(v).range(T),MK(z);var X=HK(z,di(di({},y),{},{realScaleType:q}));i==="xAxis"?(A=p==="top"&&!k||p==="bottom"&&k,I=r.left,L=f[S]-A*y.height):i==="yAxis"&&(A=p==="left"&&!k||p==="right"&&k,I=f[S]-A*y.width,L=r.top);var H=di(di(di({},y),X),{},{realScaleType:q,x:I,y:L,scale:z,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return H.bandSize=Ep(H,X),!y.hide&&i==="xAxis"?f[S]+=(A?-1:1)*H.height:y.hide||(f[S]+=(A?-1:1)*H.width),di(di({},w),{},Vg({},x,H))},{})},v$=function(t,n){var r=t.x,i=t.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},yZ=function(t){var n=t.x1,r=t.y1,i=t.x2,o=t.y2;return v$({x:n,y:r},{x:i,y:o})},x$=function(){function e(t){fZ(this,e),this.scale=t}return pZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();Vg(x$,"EPS",1e-4);var FC=function(t){var n=Object.keys(t).reduce(function(r,i){return di(di({},r),{},Vg({},i,x$.create(t[i])))},{});return di(di({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,l=o.position;return qQ(i,function(c,d){return n[d].apply(c,{bandAware:s,position:l})})},isInRange:function(i){return p$(i,function(o,s){return n[s].isInRange(o)})}})};function bZ(e){return(e%180+180)%180}var vZ=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=bZ(i),s=o*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},I0,lA;function xZ(){if(lA)return I0;lA=1;var e=Qo(),t=hh(),n=Ag();function r(i){return function(o,s,l){var c=Object(o);if(!t(o)){var d=e(s,3);o=n(o),s=function(f){return d(c[f],f,c)}}var h=i(o,s,l);return h>-1?c[d?o[h]:h]:void 0}}return I0=r,I0}var O0,cA;function wZ(){if(cA)return O0;cA=1;var e=u$();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return O0=t,O0}var A0,uA;function CZ(){if(uA)return A0;uA=1;var e=RM(),t=Qo(),n=wZ(),r=Math.max;function i(o,s,l){var c=o==null?0:o.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=r(c+d,0)),e(o,t(s,3),d)}return A0=i,A0}var D0,dA;function SZ(){if(dA)return D0;dA=1;var e=xZ(),t=CZ(),n=e(t);return D0=n,D0}var PZ=SZ();const kZ=vt(PZ);var _Z=K5();const TZ=vt(_Z);var IZ=TZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),zC=u.createContext(void 0),NC=u.createContext(void 0),w$=u.createContext(void 0),C$=u.createContext({}),S$=u.createContext(void 0),P$=u.createContext(0),k$=u.createContext(0),hA=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=t.clipPathId,l=t.children,c=t.width,d=t.height,h=IZ(o);return Ce.createElement(zC.Provider,{value:r},Ce.createElement(NC.Provider,{value:i},Ce.createElement(C$.Provider,{value:o},Ce.createElement(w$.Provider,{value:h},Ce.createElement(S$.Provider,{value:s},Ce.createElement(P$.Provider,{value:d},Ce.createElement(k$.Provider,{value:c},l)))))))},OZ=function(){return u.useContext(S$)},_$=function(t){var n=u.useContext(zC);n==null&&Ls();var r=n[t];return r==null&&Ls(),r},AZ=function(){var t=u.useContext(zC);return Ao(t)},DZ=function(){var t=u.useContext(NC),n=kZ(t,function(r){return p$(r.domain,Number.isFinite)});return n||Ao(t)},T$=function(t){var n=u.useContext(NC);n==null&&Ls();var r=n[t];return r==null&&Ls(),r},RZ=function(){var t=u.useContext(w$);return t},EZ=function(){return u.useContext(C$)},BC=function(){return u.useContext(k$)},HC=function(){return u.useContext(P$)};function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function MZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O$(r.key),r)}}function $Z(e,t,n){return t&&LZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jZ(e,t,n){return t=Gp(t),FZ(e,I$()?Reflect.construct(t,n||[],Gp(e).constructor):t.apply(e,n))}function FZ(e,t){if(t&&(zl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zZ(e)}function zZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I$=function(){return!!e})()}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gp(e)}function NZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dw(e,t)}function Dw(e,t){return Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dw(e,t)}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(r){WC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WC(e,t,n){return t=O$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O$(e){var t=BZ(e,"string");return zl(t)=="symbol"?t:t+""}function BZ(e,t){if(zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function HZ(e,t){return VZ(e)||UZ(e,t)||qZ(e,t)||WZ()}function WZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qZ(e,t){if(e){if(typeof e=="string")return gA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gA(e,t)}}function gA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function VZ(e){if(Array.isArray(e))return e}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rw.apply(this,arguments)}var GZ=function(t,n){var r;return Ce.isValidElement(t)?r=Ce.cloneElement(t,n):Dn(t)?r=t(n):r=Ce.createElement("line",Rw({},n,{className:"recharts-reference-line-line"})),r},KZ=function(t,n,r,i,o,s,l,c,d){var h=o.x,f=o.y,g=o.width,w=o.height;if(r){var x=d.y,y=t.y.apply(x,{position:s});if(Li(d,"discard")&&!t.y.isInRange(y))return null;var p=[{x:h+g,y},{x:h,y}];return c==="left"?p.reverse():p}if(n){var v=d.x,b=t.x.apply(v,{position:s});if(Li(d,"discard")&&!t.x.isInRange(b))return null;var P=[{x:b,y:f+w},{x:b,y:f}];return l==="top"?P.reverse():P}if(i){var k=d.segment,C=k.map(function(S){return t.apply(S,{position:s})});return Li(d,"discard")&&NQ(C,function(S){return!t.isInRange(S)})?null:C}return null};function YZ(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,o=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,d=OZ(),h=_$(i),f=T$(o),g=RZ();if(!d||!g)return null;io(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var w=FC({x:h.scale,y:f.scale}),x=qr(t),y=qr(n),p=r&&r.length===2,v=KZ(w,x,y,p,g,e.position,h.orientation,f.orientation,e);if(!v)return null;var b=HZ(v,2),P=b[0],k=P.x,C=P.y,S=b[1],_=S.x,T=S.y,I=Li(e,"hidden")?"url(#".concat(d,")"):void 0,L=pA(pA({clipPath:I},Hn(e,!0)),{},{x1:k,y1:C,x2:_,y2:T});return Ce.createElement(Er,{className:wn("recharts-reference-line",l)},GZ(s,L),sa.renderCallByParent(e,yZ({x1:k,y1:C,x2:_,y2:T})))}var vh=function(e){function t(){return MZ(this,t),jZ(this,t,arguments)}return NZ(t,e),$Z(t,[{key:"render",value:function(){return Ce.createElement(YZ,this.props)}}])}(Ce.Component);WC(vh,"displayName","ReferenceLine");WC(vh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(n),!0).forEach(function(r){Gg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D$(r.key),r)}}function QZ(e,t,n){return t&&JZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZZ(e,t,n){return t=Kp(t),eee(e,A$()?Reflect.construct(t,n||[],Kp(e).constructor):t.apply(e,n))}function eee(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tee(e)}function tee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A$=function(){return!!e})()}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kp(e)}function nee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mw(e,t)}function Mw(e,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mw(e,t)}function Gg(e,t,n){return t=D$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D$(e){var t=ree(e,"string");return Nl(t)=="symbol"?t:t+""}function ree(e,t){if(Nl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var aee=function(t){var n=t.x,r=t.y,i=t.xAxis,o=t.yAxis,s=FC({x:i.scale,y:o.scale}),l=s.apply({x:n,y:r},{bandAware:!0});return Li(t,"discard")&&!s.isInRange(l)?null:l},Kg=function(e){function t(){return XZ(this,t),ZZ(this,t,arguments)}return nee(t,e),QZ(t,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,s=r.r,l=r.alwaysShow,c=r.clipPathId,d=qr(i),h=qr(o);if(io(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!h)return null;var f=aee(this.props);if(!f)return null;var g=f.x,w=f.y,x=this.props,y=x.shape,p=x.className,v=Li(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=yA(yA({clipPath:v},Hn(this.props,!0)),{},{cx:g,cy:w});return Ce.createElement(Er,{className:wn("recharts-reference-dot",p)},t.renderDot(y,b),sa.renderCallByParent(this.props,{x:g-s,y:w-s,width:2*s,height:2*s}))}}])}(Ce.Component);Gg(Kg,"displayName","ReferenceDot");Gg(Kg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Gg(Kg,"renderDot",function(e,t){var n;return Ce.isValidElement(e)?n=Ce.cloneElement(e,t):Dn(e)?n=e(t):n=Ce.createElement(jC,Ew({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Lw(){return Lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lw.apply(this,arguments)}function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function bA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(n),!0).forEach(function(r){Yg(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E$(r.key),r)}}function see(e,t,n){return t&&oee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lee(e,t,n){return t=Yp(t),cee(e,R$()?Reflect.construct(t,n||[],Yp(e).constructor):t.apply(e,n))}function cee(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uee(e)}function uee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R$=function(){return!!e})()}function Yp(e){return Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yp(e)}function dee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$w(e,t)}function Yg(e,t,n){return t=E$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E$(e){var t=hee(e,"string");return Bl(t)=="symbol"?t:t+""}function hee(e,t){if(Bl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fee=function(t,n,r,i,o){var s=o.x1,l=o.x2,c=o.y1,d=o.y2,h=o.xAxis,f=o.yAxis;if(!h||!f)return null;var g=FC({x:h.scale,y:f.scale}),w={x:t?g.x.apply(s,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(c,{position:"start"}):g.y.rangeMin},x={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Li(o,"discard")&&(!g.isInRange(w)||!g.isInRange(x))?null:v$(w,x)},Xg=function(e){function t(){return iee(this,t),lee(this,t,arguments)}return dee(t,e),see(t,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,s=r.y1,l=r.y2,c=r.className,d=r.alwaysShow,h=r.clipPathId;io(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=qr(i),g=qr(o),w=qr(s),x=qr(l),y=this.props.shape;if(!f&&!g&&!w&&!x&&!y)return null;var p=fee(f,g,w,x,this.props);if(!p&&!y)return null;var v=Li(this.props,"hidden")?"url(#".concat(h,")"):void 0;return Ce.createElement(Er,{className:wn("recharts-reference-area",c)},t.renderRect(y,vA(vA({clipPath:v},Hn(this.props,!0)),p)),sa.renderCallByParent(this.props,p))}}])}(Ce.Component);Yg(Xg,"displayName","ReferenceArea");Yg(Xg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Yg(Xg,"renderRect",function(e,t){var n;return Ce.isValidElement(e)?n=Ce.cloneElement(e,t):Dn(e)?n=e(t):n=Ce.createElement($C,Lw({},t,{className:"recharts-reference-area-rect"})),n});function M$(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function pee(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return vZ(r,n)}function gee(e,t,n){var r=n==="width",i=e.x,o=e.y,s=e.width,l=e.height;return t===1?{start:r?i:o,end:r?i+s:o+l}:{start:r?i+s:o+l,end:r?i:o}}function Xp(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function mee(e,t){return M$(e,t+1)}function yee(e,t,n,r,i){for(var o=(r||[]).slice(),s=t.start,l=t.end,c=0,d=1,h=s,f=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:M$(r,d)};var y=c,p,v=function(){return p===void 0&&(p=n(x,y)),p},b=x.coordinate,P=c===0||Xp(e,b,v,h,l);P||(c=0,h=s,d+=1),P&&(h=b+e*(v()/2+i),c+=d)},g;d<=o.length;)if(g=f(),g)return g.v;return[]}function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(r){bee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bee(e,t,n){return t=vee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vee(e){var t=xee(e,"string");return Xd(t)=="symbol"?t:t+""}function xee(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wee(e,t,n,r,i){for(var o=(r||[]).slice(),s=o.length,l=t.start,c=t.end,d=function(g){var w=o[g],x,y=function(){return x===void 0&&(x=n(w,g)),x};if(g===s-1){var p=e*(w.coordinate+e*y()/2-c);o[g]=w=oa(oa({},w),{},{tickCoord:p>0?w.coordinate-p*e:w.coordinate})}else o[g]=w=oa(oa({},w),{},{tickCoord:w.coordinate});var v=Xp(e,w.tickCoord,y,l,c);v&&(c=w.tickCoord-e*(y()/2+i),o[g]=oa(oa({},w),{},{isShow:!0}))},h=s-1;h>=0;h--)d(h);return o}function Cee(e,t,n,r,i,o){var s=(r||[]).slice(),l=s.length,c=t.start,d=t.end;if(o){var h=r[l-1],f=n(h,l-1),g=e*(h.coordinate+e*f/2-d);s[l-1]=h=oa(oa({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate});var w=Xp(e,h.tickCoord,function(){return f},c,d);w&&(d=h.tickCoord-e*(f/2+i),s[l-1]=oa(oa({},h),{},{isShow:!0}))}for(var x=o?l-1:l,y=function(b){var P=s[b],k,C=function(){return k===void 0&&(k=n(P,b)),k};if(b===0){var S=e*(P.coordinate-e*C()/2-c);s[b]=P=oa(oa({},P),{},{tickCoord:S<0?P.coordinate-S*e:P.coordinate})}else s[b]=P=oa(oa({},P),{},{tickCoord:P.coordinate});var _=Xp(e,P.tickCoord,C,c,d);_&&(c=P.tickCoord+e*(C()/2+i),s[b]=oa(oa({},P),{},{isShow:!0}))},p=0;p<x;p++)y(p);return s}function qC(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,h=e.unit,f=e.angle;if(!i||!i.length||!r)return[];if(_t(c)||nc.isSsr)return mee(i,typeof c=="number"&&_t(c)?c:0);var g=[],w=l==="top"||l==="bottom"?"width":"height",x=h&&w==="width"?Zu(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},y=function(P,k){var C=Dn(d)?d(P.value,k):P.value;return w==="width"?pee(Zu(C,{fontSize:t,letterSpacing:n}),x,f):Zu(C,{fontSize:t,letterSpacing:n})[w]},p=i.length>=2?bi(i[1].coordinate-i[0].coordinate):1,v=gee(o,p,w);return c==="equidistantPreserveStart"?yee(p,v,y,i,s):(c==="preserveStart"||c==="preserveStartEnd"?g=Cee(p,v,y,i,s,c==="preserveStartEnd"):g=wee(p,v,y,i,s),g.filter(function(b){return b.isShow}))}var See=["viewBox"],Pee=["viewBox"],kee=["ticks"];function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sl.apply(this,arguments)}function wA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(n),!0).forEach(function(r){UC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R0(e,t){if(e==null)return{};var n=_ee(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _ee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Tee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$$(r.key),r)}}function Iee(e,t,n){return t&&CA(e.prototype,t),n&&CA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oee(e,t,n){return t=Jp(t),Aee(e,L$()?Reflect.construct(t,n||[],Jp(e).constructor):t.apply(e,n))}function Aee(e,t){if(t&&(Hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dee(e)}function Dee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L$=function(){return!!e})()}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jp(e)}function Ree(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jw(e,t)}function jw(e,t){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jw(e,t)}function UC(e,t,n){return t=$$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $$(e){var t=Eee(e,"string");return Hl(t)=="symbol"?t:t+""}function Eee(e,t){if(Hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Hl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oc=function(e){function t(n){var r;return Tee(this,t),r=Oee(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ree(t,e),Iee(t,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=R0(r,See),l=this.props,c=l.viewBox,d=R0(l,Pee);return!dl(o,c)||!dl(s,d)||!dl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,l=i.width,c=i.height,d=i.orientation,h=i.tickSize,f=i.mirror,g=i.tickMargin,w,x,y,p,v,b,P=f?-1:1,k=r.tickSize||h,C=_t(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":w=x=r.coordinate,p=s+ +!f*c,y=p-P*k,b=y-P*g,v=C;break;case"left":y=p=r.coordinate,x=o+ +!f*l,w=x-P*k,v=w-P*g,b=C;break;case"right":y=p=r.coordinate,x=o+ +f*l,w=x+P*k,v=w+P*g,b=C;break;default:w=x=r.coordinate,p=s+ +f*c,y=p+P*k,b=y+P*g,v=C;break}return{line:{x1:w,y1:y,x2:x,y2:p},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,l=r.height,c=r.orientation,d=r.mirror,h=r.axisLine,f=Nr(Nr(Nr({},Hn(this.props,!1)),Hn(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);f=Nr(Nr({},f),{},{x1:i,y1:o+g*l,x2:i+s,y2:o+g*l})}else{var w=+(c==="left"&&!d||c==="right"&&d);f=Nr(Nr({},f),{},{x1:i+w*s,y1:o,x2:i+w*s,y2:o+l})}return Ce.createElement("line",sl({},f,{className:wn("recharts-cartesian-axis-line",Ya(h,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,l=this.props,c=l.tickLine,d=l.stroke,h=l.tick,f=l.tickFormatter,g=l.unit,w=qC(Nr(Nr({},this.props),{},{ticks:r}),i,o),x=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),p=Hn(this.props,!1),v=Hn(h,!1),b=Nr(Nr({},p),{},{fill:"none"},Hn(c,!1)),P=w.map(function(k,C){var S=s.getTickLineCoord(k),_=S.line,T=S.tick,I=Nr(Nr(Nr(Nr({textAnchor:x,verticalAnchor:y},p),{},{stroke:"none",fill:d},v),T),{},{index:C,payload:k,visibleTicksCount:w.length,tickFormatter:f});return Ce.createElement(Er,sl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},lp(s.props,k,C)),c&&Ce.createElement("line",sl({},b,_,{className:wn("recharts-cartesian-axis-tick-line",Ya(c,"className"))})),h&&t.renderTickItem(h,I,"".concat(Dn(f)?f(k.value,C):k.value).concat(g||"")))});return Ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},P)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,l=i.height,c=i.ticksGenerator,d=i.className,h=i.hide;if(h)return null;var f=this.props,g=f.ticks,w=R0(f,kee),x=g;return Dn(c)&&(x=g&&g.length>0?c(this.props):c(w)),s<=0||l<=0||!x||!x.length?null:Ce.createElement(Er,{className:wn("recharts-cartesian-axis",d),ref:function(p){r.layerReference=p}},o&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),sa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s,l=wn(i.className,"recharts-cartesian-axis-tick-value");return Ce.isValidElement(r)?s=Ce.cloneElement(r,Nr(Nr({},i),{},{className:l})):Dn(r)?s=r(Nr(Nr({},i),{},{className:l})):s=Ce.createElement(vp,sl({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}(u.Component);UC(oc,"displayName","CartesianAxis");UC(oc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Mee=["x1","y1","x2","y2","key"],Lee=["offset"];function $s(e){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}function SA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(n),!0).forEach(function(r){$ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $ee(e,t,n){return t=jee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jee(e){var t=Fee(e,"string");return $s(t)=="symbol"?t:t+""}function Fee(e,t){if($s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gs.apply(this,arguments)}function PA(e,t){if(e==null)return{};var n=zee(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Nee=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,o=t.y,s=t.width,l=t.height,c=t.ry;return Ce.createElement("rect",{x:i,y:o,ry:c,width:s,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function j$(e,t){var n;if(Ce.isValidElement(e))n=Ce.cloneElement(e,t);else if(Dn(e))n=e(t);else{var r=t.x1,i=t.y1,o=t.x2,s=t.y2,l=t.key,c=PA(t,Mee),d=Hn(c,!1);d.offset;var h=PA(d,Lee);n=Ce.createElement("line",gs({},h,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:l}))}return n}function Bee(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(l,c){var d=la(la({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return j$(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Hee(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,o=e.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(l,c){var d=la(la({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return j$(i,d)});return Ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Wee(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,o=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var h=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,w){return g-w});i!==h[0]&&h.unshift(0);var f=h.map(function(g,w){var x=!h[w+1],y=x?i+s-g:h[w+1]-g;if(y<=0)return null;var p=w%t.length;return Ce.createElement("rect",{key:"react-".concat(w),y:g,x:r,height:y,width:o,stroke:"none",fill:t[p],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function qee(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,o=e.x,s=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!r||!r.length)return null;var h=d.map(function(g){return Math.round(g+o-o)}).sort(function(g,w){return g-w});o!==h[0]&&h.unshift(0);var f=h.map(function(g,w){var x=!h[w+1],y=x?o+l-g:h[w+1]-g;if(y<=0)return null;var p=w%r.length;return Ce.createElement("rect",{key:"react-".concat(w),x:g,y:s,width:y,height:c,stroke:"none",fill:r[p],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Uee=function(t,n){var r=t.xAxis,i=t.width,o=t.height,s=t.offset;return JL(qC(la(la(la({},oc.defaultProps),r),{},{ticks:no(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},Vee=function(t,n){var r=t.yAxis,i=t.width,o=t.height,s=t.offset;return JL(qC(la(la(la({},oc.defaultProps),r),{},{ticks:no(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},Js={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function VC(e){var t,n,r,i,o,s,l=BC(),c=HC(),d=EZ(),h=la(la({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Js.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Js.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Js.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Js.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:Js.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Js.verticalFill,x:_t(e.x)?e.x:d.left,y:_t(e.y)?e.y:d.top,width:_t(e.width)?e.width:d.width,height:_t(e.height)?e.height:d.height}),f=h.x,g=h.y,w=h.width,x=h.height,y=h.syncWithTicks,p=h.horizontalValues,v=h.verticalValues,b=AZ(),P=DZ();if(!_t(w)||w<=0||!_t(x)||x<=0||!_t(f)||f!==+f||!_t(g)||g!==+g)return null;var k=h.verticalCoordinatesGenerator||Uee,C=h.horizontalCoordinatesGenerator||Vee,S=h.horizontalPoints,_=h.verticalPoints;if((!S||!S.length)&&Dn(C)){var T=p&&p.length,I=C({yAxis:P?la(la({},P),{},{ticks:T?p:P.ticks}):void 0,width:l,height:c,offset:d},T?!0:y);io(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($s(I),"]")),Array.isArray(I)&&(S=I)}if((!_||!_.length)&&Dn(k)){var L=v&&v.length,A=k({xAxis:b?la(la({},b),{},{ticks:L?v:b.ticks}):void 0,width:l,height:c,offset:d},L?!0:y);io(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($s(A),"]")),Array.isArray(A)&&(_=A)}return Ce.createElement("g",{className:"recharts-cartesian-grid"},Ce.createElement(Nee,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Ce.createElement(Bee,gs({},h,{offset:d,horizontalPoints:S,xAxis:b,yAxis:P})),Ce.createElement(Hee,gs({},h,{offset:d,verticalPoints:_,xAxis:b,yAxis:P})),Ce.createElement(Wee,gs({},h,{horizontalPoints:S})),Ce.createElement(qee,gs({},h,{verticalPoints:_})))}VC.displayName="CartesianGrid";var Gee=["type","layout","connectNulls","ref"],Kee=["key"];function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function kA(e,t){if(e==null)return{};var n=Yee(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Yee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rd(){return rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rd.apply(this,arguments)}function _A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(n),!0).forEach(function(r){hi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qs(e){return Zee(e)||Qee(e)||Jee(e)||Xee()}function Xee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jee(e,t){if(e){if(typeof e=="string")return Fw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fw(e,t)}}function Qee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zee(e){if(Array.isArray(e))return Fw(e)}function Fw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ete(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z$(r.key),r)}}function tte(e,t,n){return t&&TA(e.prototype,t),n&&TA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nte(e,t,n){return t=Qp(t),rte(e,F$()?Reflect.construct(t,n||[],Qp(e).constructor):t.apply(e,n))}function rte(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ate(e)}function ate(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F$=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qp(e)}function ite(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zw(e,t)}function zw(e,t){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zw(e,t)}function hi(e,t,n){return t=z$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z$(e){var t=ote(e,"string");return Wl(t)=="symbol"?t:t+""}function ote(e,t){if(Wl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vo=function(e){function t(){var n;ete(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=nte(this,t,[].concat(i)),hi(n,"state",{isAnimationFinished:!0,totalLength:0}),hi(n,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),hi(n,"getStrokeDasharray",function(s,l,c){var d=c.reduce(function(v,b){return v+b});if(!d)return n.generateSimpleStrokeDasharray(l,s);for(var h=Math.floor(s/d),f=s%d,g=l-s,w=[],x=0,y=0;x<c.length;y+=c[x],++x)if(y+c[x]>f){w=[].concat(Qs(c.slice(0,x)),[f-y]);break}var p=w.length%2===0?[0,g]:[g];return[].concat(Qs(t.repeat(c,h)),Qs(w),p).map(function(v){return"".concat(v,"px")}).join(", ")}),hi(n,"id",dh("recharts-line-")),hi(n,"pathRef",function(s){n.mainCurve=s}),hi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),hi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return ite(t,e),tte(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,l=o.xAxis,c=o.yAxis,d=o.layout,h=o.children,f=Xa(h,yh);if(!f)return null;var g=function(y,p){return{x:y.x,y:y.y,value:y.value,errorVal:Ma(y.payload,p)}},w={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ce.createElement(Er,w,f.map(function(x){return Ce.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:s,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,h=l.dataKey,f=Hn(this.props,!1),g=Hn(c,!0),w=d.map(function(y,p){var v=_a(_a(_a({key:"dot-".concat(p),r:3},f),g),{},{index:p,cx:y.x,cy:y.y,value:y.value,dataKey:h,payload:y.payload,points:d});return t.renderDotItem(c,v)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return Ce.createElement(Er,rd({className:"recharts-line-dots",key:"dots"},x),w)}},{key:"renderCurveStatically",value:function(r,i,o,s){var l=this.props,c=l.type,d=l.layout,h=l.connectNulls;l.ref;var f=kA(l,Gee),g=_a(_a(_a({},Hn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:c,layout:d,connectNulls:h});return Ce.createElement(mw,rd({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,l=s.points,c=s.strokeDasharray,d=s.isAnimationActive,h=s.animationBegin,f=s.animationDuration,g=s.animationEasing,w=s.animationId,x=s.animateNewValues,y=s.width,p=s.height,v=this.state,b=v.prevPoints,P=v.totalLength;return Ce.createElement(go,{begin:h,duration:f,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(w),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var C=k.t;if(b){var S=b.length/l.length,_=l.map(function(D,B){var $=Math.floor(B*S);if(b[$]){var N=b[$],F=pi(N.x,D.x),O=pi(N.y,D.y);return _a(_a({},D),{},{x:F(C),y:O(C)})}if(x){var R=pi(y*2,D.x),E=pi(p/2,D.y);return _a(_a({},D),{},{x:R(C),y:E(C)})}return _a(_a({},D),{},{x:D.x,y:D.y})});return o.renderCurveStatically(_,r,i)}var T=pi(0,P),I=T(C),L;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});L=o.getStrokeDasharray(I,P,A)}else L=o.generateSimpleStrokeDasharray(P,I);return o.renderCurveStatically(l,r,i,{strokeDasharray:L})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,l=o.isAnimationActive,c=this.state,d=c.prevPoints,h=c.totalLength;return l&&s&&s.length&&(!d&&h>0||!Bg(d,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,l=i.points,c=i.className,d=i.xAxis,h=i.yAxis,f=i.top,g=i.left,w=i.width,x=i.height,y=i.isAnimationActive,p=i.id;if(o||!l||!l.length)return null;var v=this.state.isAnimationFinished,b=l.length===1,P=wn("recharts-line",c),k=d&&d.allowDataOverflow,C=h&&h.allowDataOverflow,S=k||C,_=jn(p)?this.id:p,T=(r=Hn(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=T.r,L=I===void 0?3:I,A=T.strokeWidth,D=A===void 0?2:A,B=Iq(s)?s:{},$=B.clipDot,N=$===void 0?!0:$,F=L*2+D;return Ce.createElement(Er,{className:P},k||C?Ce.createElement("defs",null,Ce.createElement("clipPath",{id:"clipPath-".concat(_)},Ce.createElement("rect",{x:k?g:g-w/2,y:C?f:f-x/2,width:k?w:w*2,height:C?x:x*2})),!N&&Ce.createElement("clipPath",{id:"clipPath-dots-".concat(_)},Ce.createElement("rect",{x:g-F/2,y:f-F/2,width:w+F,height:x+F}))):null,!b&&this.renderCurve(S,_),this.renderErrorBar(S,_),(b||s)&&this.renderDots(S,N,_),(!y||v)&&No.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(Qs(r),[0]):r,s=[],l=0;l<i;++l)s=[].concat(Qs(s),Qs(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(Ce.isValidElement(r))o=Ce.cloneElement(r,i);else if(Dn(r))o=r(i);else{var s=i.key,l=kA(i,Kee),c=wn("recharts-line-dot",typeof r!="boolean"?r.className:"");o=Ce.createElement(jC,rd({key:s},l,{className:c}))}return o}}])}(u.PureComponent);hi(Vo,"displayName","Line");hi(Vo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!nc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});hi(Vo,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,h=t.layout,f=c.map(function(g,w){var x=Ma(g,s);return h==="horizontal"?{x:qI({axis:n,ticks:i,bandSize:l,entry:g,index:w}),y:jn(x)?null:r.scale(x),value:x,payload:g}:{x:jn(x)?null:n.scale(x),y:qI({axis:r,ticks:o,bandSize:l,entry:g,index:w}),value:x,payload:g}});return _a({points:f,layout:h},d)});function ql(e){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}function ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H$(r.key),r)}}function cte(e,t,n){return t&&lte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ute(e,t,n){return t=Zp(t),dte(e,N$()?Reflect.construct(t,n||[],Zp(e).constructor):t.apply(e,n))}function dte(e,t){if(t&&(ql(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hte(e)}function hte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N$=function(){return!!e})()}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zp(e)}function fte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nw(e,t)}function Nw(e,t){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Nw(e,t)}function B$(e,t,n){return t=H$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H$(e){var t=pte(e,"string");return ql(t)=="symbol"?t:t+""}function pte(e,t){if(ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(this,arguments)}function gte(e){var t=e.xAxisId,n=BC(),r=HC(),i=_$(t);return i==null?null:u.createElement(oc,Bw({},i,{className:wn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return no(s,!0)}}))}var xh=function(e){function t(){return ste(this,t),ute(this,t,arguments)}return fte(t,e),cte(t,[{key:"render",value:function(){return u.createElement(gte,this.props)}}])}(u.Component);B$(xh,"displayName","XAxis");B$(xh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function mte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U$(r.key),r)}}function bte(e,t,n){return t&&yte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vte(e,t,n){return t=eg(t),xte(e,W$()?Reflect.construct(t,n||[],eg(e).constructor):t.apply(e,n))}function xte(e,t){if(t&&(Ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wte(e)}function wte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W$=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eg(e)}function Cte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hw(e,t)}function Hw(e,t){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hw(e,t)}function q$(e,t,n){return t=U$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U$(e){var t=Ste(e,"string");return Ul(t)=="symbol"?t:t+""}function Ste(e,t){if(Ul(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ww(){return Ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ww.apply(this,arguments)}var Pte=function(t){var n=t.yAxisId,r=BC(),i=HC(),o=T$(n);return o==null?null:u.createElement(oc,Ww({},o,{className:wn("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return no(l,!0)}}))},wh=function(e){function t(){return mte(this,t),vte(this,t,arguments)}return Cte(t,e),bte(t,[{key:"render",value:function(){return u.createElement(Pte,this.props)}}])}(u.Component);q$(wh,"displayName","YAxis");q$(wh,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function IA(e){return Ite(e)||Tte(e)||_te(e)||kte()}function kte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _te(e,t){if(e){if(typeof e=="string")return qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qw(e,t)}}function Tte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ite(e){if(Array.isArray(e))return qw(e)}function qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uw=function(t,n,r,i,o){var s=Xa(t,vh),l=Xa(t,Kg),c=[].concat(IA(s),IA(l)),d=Xa(t,Xg),h="".concat(i,"Id"),f=i[0],g=n;if(c.length&&(g=c.reduce(function(y,p){if(p.props[h]===r&&Li(p.props,"extendDomain")&&_t(p.props[f])){var v=p.props[f];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},g)),d.length){var w="".concat(f,"1"),x="".concat(f,"2");g=d.reduce(function(y,p){if(p.props[h]===r&&Li(p.props,"extendDomain")&&_t(p.props[w])&&_t(p.props[x])){var v=p.props[w],b=p.props[x];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},g)}return o&&o.length&&(g=o.reduce(function(y,p){return _t(p)?[Math.min(y[0],p),Math.max(y[1],p)]:y},g)),g},E0={exports:{}},OA;function Ote(){return OA||(OA=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function o(c,d,h,f,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var w=new i(h,f||c,g),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],w]:c._events[x].push(w):(c._events[x]=w,c._eventsCount++),c}function s(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)t.call(h,f)&&d.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var g=0,w=f.length,x=new Array(w);g<w;g++)x[g]=f[g].fn;return x},l.prototype.listenerCount=function(d){var h=n?n+d:d,f=this._events[h];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,h,f,g,w,x){var y=n?n+d:d;if(!this._events[y])return!1;var p=this._events[y],v=arguments.length,b,P;if(p.fn){switch(p.once&&this.removeListener(d,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,f),!0;case 4:return p.fn.call(p.context,h,f,g),!0;case 5:return p.fn.call(p.context,h,f,g,w),!0;case 6:return p.fn.call(p.context,h,f,g,w,x),!0}for(P=1,b=new Array(v-1);P<v;P++)b[P-1]=arguments[P];p.fn.apply(p.context,b)}else{var k=p.length,C;for(P=0;P<k;P++)switch(p[P].once&&this.removeListener(d,p[P].fn,void 0,!0),v){case 1:p[P].fn.call(p[P].context);break;case 2:p[P].fn.call(p[P].context,h);break;case 3:p[P].fn.call(p[P].context,h,f);break;case 4:p[P].fn.call(p[P].context,h,f,g);break;default:if(!b)for(C=1,b=new Array(v-1);C<v;C++)b[C-1]=arguments[C];p[P].fn.apply(p[P].context,b)}}return!0},l.prototype.on=function(d,h,f){return o(this,d,h,f,!1)},l.prototype.once=function(d,h,f){return o(this,d,h,f,!0)},l.prototype.removeListener=function(d,h,f,g){var w=n?n+d:d;if(!this._events[w])return this;if(!h)return s(this,w),this;var x=this._events[w];if(x.fn)x.fn===h&&(!g||x.once)&&(!f||x.context===f)&&s(this,w);else{for(var y=0,p=[],v=x.length;y<v;y++)(x[y].fn!==h||g&&!x[y].once||f&&x[y].context!==f)&&p.push(x[y]);p.length?this._events[w]=p.length===1?p[0]:p:s(this,w)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(E0)),E0.exports}var Ate=Ote();const Dte=vt(Ate);var M0=new Dte,L0="recharts.syncMouseEvents";function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Rte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ete(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V$(r.key),r)}}function Mte(e,t,n){return t&&Ete(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $0(e,t,n){return t=V$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V$(e){var t=Lte(e,"string");return Jd(t)=="symbol"?t:t+""}function Lte(e,t){if(Jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $te=function(){function e(){Rte(this,e),$0(this,"activeIndex",0),$0(this,"coordinateList",[]),$0(this,"layout","horizontal")}return Mte(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,l=s===void 0?null:s,c=n.layout,d=c===void 0?null:c,h=n.offset,f=h===void 0?null:h,g=n.mouseHandlerCallback,w=g===void 0?null:g;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=w??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+c+d,g=s+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:f,pageY:g})}}}])}();function jte(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&_t(r)&&_t(i))return!0}return!1}function Fte(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function G$(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle,s=ta(t,n,r,i),l=ta(t,n,r,o);return{points:[s,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function zte(e,t,n){var r,i,o,s;if(e==="horizontal")r=t.x,o=r,i=n.top,s=n.top+n.height;else if(e==="vertical")i=t.y,s=i,r=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,h=t.outerRadius,f=t.angle,g=ta(l,c,d,f),w=ta(l,c,h,f);r=g.x,i=g.y,o=w.x,s=w.y}else return G$(t);return[{x:r,y:i},{x:o,y:s}]}function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function AA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(n),!0).forEach(function(r){Nte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nte(e,t,n){return t=Bte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bte(e){var t=Hte(e,"string");return Qd(t)=="symbol"?t:t+""}function Hte(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wte(e){var t,n,r=e.element,i=e.tooltipEventType,o=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,g=e.chartName,w=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!w||!o||!s||g!=="ScatterChart"&&i!=="axis")return null;var x,y=mw;if(g==="ScatterChart")x=s,y=NJ;else if(g==="BarChart")x=Fte(f,s,c,h),y=$C;else if(f==="radial"){var p=G$(s),v=p.cx,b=p.cy,P=p.radius,k=p.startAngle,C=p.endAngle;x={cx:v,cy:b,startAngle:k,endAngle:C,innerRadius:P,outerRadius:P},y=n$}else x={points:zte(f,s,c)},y=mw;var S=lf(lf(lf(lf({stroke:"#ccc",pointerEvents:"none"},c),x),Hn(w,!1)),{},{payload:l,payloadIndex:d,className:wn("recharts-tooltip-cursor",w.className)});return u.isValidElement(w)?u.cloneElement(w,S):u.createElement(y,S)}var qte=["item"],Ute=["children","className","width","height","style","compact","title","desc"];function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}function DA(e,t){return Kte(e)||Gte(e,t)||Y$(e,t)||Vte()}function Vte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,l=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(h){d=!0,i=h}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Kte(e){if(Array.isArray(e))return e}function RA(e,t){if(e==null)return{};var n=Yte(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Yte(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Xte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X$(r.key),r)}}function Qte(e,t,n){return t&&Jte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zte(e,t,n){return t=tg(t),ene(e,K$()?Reflect.construct(t,n||[],tg(e).constructor):t.apply(e,n))}function ene(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tne(e)}function tne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K$=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tg(e)}function nne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vw(e,t)}function Vw(e,t){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vw(e,t)}function Gl(e){return ine(e)||ane(e)||Y$(e)||rne()}function rne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y$(e,t){if(e){if(typeof e=="string")return Gw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(e,t)}}function ane(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ine(e){if(Array.isArray(e))return Gw(e)}function Gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(n),!0).forEach(function(r){pn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pn(e,t,n){return t=X$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X$(e){var t=one(e,"string");return Vl(t)=="symbol"?t:t+""}function one(e,t){if(Vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sne={xAxis:["bottom","top"],yAxis:["left","right"]},lne={width:"100%",height:"100%"},J$={x:0,y:0};function cf(e){return e}var cne=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},une=function(t,n,r,i){var o=n.find(function(h){return h&&h.index===r});if(o){if(t==="horizontal")return{x:o.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:o.coordinate};if(t==="centric"){var s=o.coordinate,l=i.radius;return ot(ot(ot({},i),ta(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var c=o.coordinate,d=i.angle;return ot(ot(ot({},i),ta(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return J$},Jg=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Gl(l),Gl(d)):l},[]);return s.length>0?s:t&&t.length&&_t(i)&&_t(o)?t.slice(i,o+1):[]};function Q$(e){return e==="number"?[0,"auto"]:void 0}var Kw=function(t,n,r,i){var o=t.graphicalItems,s=t.tooltipAxis,l=Jg(n,t);return r<0||!o||!o.length||r>=l.length?null:o.reduce(function(c,d){var h,f=(h=d.props.data)!==null&&h!==void 0?h:n;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(s.dataKey&&!s.allowDuplicatedCategory){var w=f===void 0?l:f;g=op(w,s.dataKey,i)}else g=f&&f[r]||l[r];return g?[].concat(Gl(c),[ZL(d,g)]):c},[])},MA=function(t,n,r,i){var o=i||{x:t.chartX,y:t.chartY},s=cne(o,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,h=TK(s,l,d,c);if(h>=0&&d){var f=d[h]&&d[h].value,g=Kw(t,n,h,f),w=une(r,l,h,o);return{activeTooltipIndex:h,activeLabel:f,activePayload:g,activeCoordinate:w}}return null},dne=function(t,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,f=t.children,g=t.stackOffset,w=XL(h,o);return r.reduce(function(x,y){var p,v=y.type.defaultProps!==void 0?ot(ot({},y.type.defaultProps),y.props):y.props,b=v.type,P=v.dataKey,k=v.allowDataOverflow,C=v.allowDuplicatedCategory,S=v.scale,_=v.ticks,T=v.includeHidden,I=v[s];if(x[I])return x;var L=Jg(t.data,{graphicalItems:i.filter(function(X){var H,K=s in X.props?X.props[s]:(H=X.type.defaultProps)===null||H===void 0?void 0:H[s];return K===I}),dataStartIndex:c,dataEndIndex:d}),A=L.length,D,B,$;jte(v.domain,k,b)&&(D=dw(v.domain,null,k),w&&(b==="number"||S!=="auto")&&($=td(L,P,"category")));var N=Q$(b);if(!D||D.length===0){var F,O=(F=v.domain)!==null&&F!==void 0?F:N;if(P){if(D=td(L,P,b),b==="category"&&w){var R=bq(D);C&&R?(B=D,D=Hp(0,A)):C||(D=KI(O,D,y).reduce(function(X,H){return X.indexOf(H)>=0?X:[].concat(Gl(X),[H])},[]))}else if(b==="category")C?D=D.filter(function(X){return X!==""&&!jn(X)}):D=KI(O,D,y).reduce(function(X,H){return X.indexOf(H)>=0||H===""||jn(H)?X:[].concat(Gl(X),[H])},[]);else if(b==="number"){var E=RK(L,i.filter(function(X){var H,K,ee=s in X.props?X.props[s]:(H=X.type.defaultProps)===null||H===void 0?void 0:H[s],ge="hide"in X.props?X.props.hide:(K=X.type.defaultProps)===null||K===void 0?void 0:K.hide;return ee===I&&(T||!ge)}),P,o,h);E&&(D=E)}w&&(b==="number"||S!=="auto")&&($=td(L,P,"category"))}else w?D=Hp(0,A):l&&l[I]&&l[I].hasStack&&b==="number"?D=g==="expand"?[0,1]:QL(l[I].stackGroups,c,d):D=YL(L,i.filter(function(X){var H=s in X.props?X.props[s]:X.type.defaultProps[s],K="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return H===I&&(T||!K)}),b,h,!0);if(b==="number")D=Uw(f,D,I,o,_),O&&(D=dw(O,D,k));else if(b==="category"&&O){var z=O,q=D.every(function(X){return z.indexOf(X)>=0});q&&(D=z)}}return ot(ot({},x),{},pn({},I,ot(ot({},v),{},{axisType:o,domain:D,categoricalDomain:$,duplicateDomain:B,originalDomain:(p=v.domain)!==null&&p!==void 0?p:N,isCategorical:w,layout:h})))},{})},hne=function(t,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.layout,f=t.children,g=Jg(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:d}),w=g.length,x=XL(h,o),y=-1;return r.reduce(function(p,v){var b=v.type.defaultProps!==void 0?ot(ot({},v.type.defaultProps),v.props):v.props,P=b[s],k=Q$("number");if(!p[P]){y++;var C;return x?C=Hp(0,w):l&&l[P]&&l[P].hasStack?(C=QL(l[P].stackGroups,c,d),C=Uw(f,C,P,o)):(C=dw(k,YL(g,r.filter(function(S){var _,T,I=s in S.props?S.props[s]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[s],L="hide"in S.props?S.props.hide:(T=S.type.defaultProps)===null||T===void 0?void 0:T.hide;return I===P&&!L}),"number",h),i.defaultProps.allowDataOverflow),C=Uw(f,C,P,o)),ot(ot({},p),{},pn({},P,ot(ot({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ya(sne,"".concat(o,".").concat(y%2),null),domain:C,originalDomain:k,isCategorical:x,layout:h})))}return p},{})},fne=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,h=t.children,f="".concat(i,"Id"),g=Xa(h,o),w={};return g&&g.length?w=dne(t,{axes:g,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):s&&s.length&&(w=hne(t,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),w},pne=function(t){var n=Ao(t),r=no(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:cC(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ep(n,r)}},LA=function(t){var n=t.children,r=t.defaultShowTooltip,i=Ia(n,jl),o=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},gne=function(t){return!t||!t.length?!1:t.some(function(n){var r=ao(n&&n.type);return r&&r.indexOf("Bar")>=0})},$A=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mne=function(t,n){var r=t.props,i=t.graphicalItems,o=t.xAxisMap,s=o===void 0?{}:o,l=t.yAxisMap,c=l===void 0?{}:l,d=r.width,h=r.height,f=r.children,g=r.margin||{},w=Ia(f,jl),x=Ia(f,Fo),y=Object.keys(c).reduce(function(C,S){var _=c[S],T=_.orientation;return!_.mirror&&!_.hide?ot(ot({},C),{},pn({},T,C[T]+_.width)):C},{left:g.left||0,right:g.right||0}),p=Object.keys(s).reduce(function(C,S){var _=s[S],T=_.orientation;return!_.mirror&&!_.hide?ot(ot({},C),{},pn({},T,Ya(C,"".concat(T))+_.height)):C},{top:g.top||0,bottom:g.bottom||0}),v=ot(ot({},p),y),b=v.bottom;w&&(v.bottom+=w.props.height||jl.defaultProps.height),x&&n&&(v=AK(v,i,r,n));var P=d-v.left-v.right,k=h-v.top-v.bottom;return ot(ot({brushBottom:b},v),{},{width:Math.max(P,0),height:Math.max(k,0)})},yne=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},bne=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,o=i===void 0?"axis":i,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,d=t.legendContent,h=t.formatAxisMap,f=t.defaultProps,g=function(v,b){var P=b.graphicalItems,k=b.stackGroups,C=b.offset,S=b.updateId,_=b.dataStartIndex,T=b.dataEndIndex,I=v.barSize,L=v.layout,A=v.barGap,D=v.barCategoryGap,B=v.maxBarSize,$=$A(L),N=$.numericAxisName,F=$.cateAxisName,O=gne(P),R=[];return P.forEach(function(E,z){var q=Jg(v.data,{graphicalItems:[E],dataStartIndex:_,dataEndIndex:T}),X=E.type.defaultProps!==void 0?ot(ot({},E.type.defaultProps),E.props):E.props,H=X.dataKey,K=X.maxBarSize,ee=X["".concat(N,"Id")],ge=X["".concat(F,"Id")],oe={},G=c.reduce(function(le,se){var J=b["".concat(se.axisType,"Map")],Z=X["".concat(se.axisType,"Id")];J&&J[Z]||se.axisType==="zAxis"||Ls();var ie=J[Z];return ot(ot({},le),{},pn(pn({},se.axisType,ie),"".concat(se.axisType,"Ticks"),no(ie)))},oe),Q=G[F],te=G["".concat(F,"Ticks")],U=k&&k[ee]&&k[ee].hasStack&&qK(E,k[ee].stackGroups),V=ao(E.type).indexOf("Bar")>=0,ae=Ep(Q,te),ne=[],me=O&&IK({barSize:I,stackGroups:k,totalSize:yne(G,F)});if(V){var ue,Ae,we=jn(K)?B:K,ce=(ue=(Ae=Ep(Q,te,!0))!==null&&Ae!==void 0?Ae:we)!==null&&ue!==void 0?ue:0;ne=OK({barGap:A,barCategoryGap:D,bandSize:ce!==ae?ce:ae,sizeList:me[ge],maxBarSize:we}),ce!==ae&&(ne=ne.map(function(le){return ot(ot({},le),{},{position:ot(ot({},le.position),{},{offset:le.position.offset-ce/2})})}))}var De=E&&E.type&&E.type.getComposedData;De&&R.push({props:ot(ot({},De(ot(ot({},G),{},{displayedData:q,props:v,dataKey:H,item:E,bandSize:ae,barPosition:ne,offset:C,stackedData:U,layout:L,dataStartIndex:_,dataEndIndex:T}))),{},pn(pn(pn({key:E.key||"item-".concat(z)},N,G[N]),F,G[F]),"animationId",S)),childIndex:Dq(E,v.children),item:E})}),R},w=function(v,b){var P=v.props,k=v.dataStartIndex,C=v.dataEndIndex,S=v.updateId;if(!l2({props:P}))return null;var _=P.children,T=P.layout,I=P.stackOffset,L=P.data,A=P.reverseStackOrder,D=$A(T),B=D.numericAxisName,$=D.cateAxisName,N=Xa(_,r),F=BK(L,N,"".concat(B,"Id"),"".concat($,"Id"),I,A),O=c.reduce(function(X,H){var K="".concat(H.axisType,"Map");return ot(ot({},X),{},pn({},K,fne(P,ot(ot({},H),{},{graphicalItems:N,stackGroups:H.axisType===B&&F,dataStartIndex:k,dataEndIndex:C}))))},{}),R=mne(ot(ot({},O),{},{props:P,graphicalItems:N}),b==null?void 0:b.legendBBox);Object.keys(O).forEach(function(X){O[X]=h(P,O[X],R,X.replace("Map",""),n)});var E=O["".concat($,"Map")],z=pne(E),q=g(P,ot(ot({},O),{},{dataStartIndex:k,dataEndIndex:C,updateId:S,graphicalItems:N,stackGroups:F,offset:R}));return ot(ot({formattedGraphicalItems:q,graphicalItems:N,offset:R,stackGroups:F},z),O)},x=function(p){function v(b){var P,k,C;return Xte(this,v),C=Zte(this,v,[b]),pn(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pn(C,"accessibilityManager",new $te),pn(C,"handleLegendBBoxUpdate",function(S){if(S){var _=C.state,T=_.dataStartIndex,I=_.dataEndIndex,L=_.updateId;C.setState(ot({legendBBox:S},w({props:C.props,dataStartIndex:T,dataEndIndex:I,updateId:L},ot(ot({},C.state),{},{legendBBox:S}))))}}),pn(C,"handleReceiveSyncEvent",function(S,_,T){if(C.props.syncId===S){if(T===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(_)}}),pn(C,"handleBrushChange",function(S){var _=S.startIndex,T=S.endIndex;if(_!==C.state.dataStartIndex||T!==C.state.dataEndIndex){var I=C.state.updateId;C.setState(function(){return ot({dataStartIndex:_,dataEndIndex:T},w({props:C.props,dataStartIndex:_,dataEndIndex:T,updateId:I},C.state))}),C.triggerSyncEvent({dataStartIndex:_,dataEndIndex:T})}}),pn(C,"handleMouseEnter",function(S){var _=C.getMouseInfo(S);if(_){var T=ot(ot({},_),{},{isTooltipActive:!0});C.setState(T),C.triggerSyncEvent(T);var I=C.props.onMouseEnter;Dn(I)&&I(T,S)}}),pn(C,"triggeredAfterMouseMove",function(S){var _=C.getMouseInfo(S),T=_?ot(ot({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(T),C.triggerSyncEvent(T);var I=C.props.onMouseMove;Dn(I)&&I(T,S)}),pn(C,"handleItemMouseEnter",function(S){C.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),pn(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),pn(C,"handleMouseMove",function(S){S.persist(),C.throttleTriggeredAfterMouseMove(S)}),pn(C,"handleMouseLeave",function(S){C.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};C.setState(_),C.triggerSyncEvent(_);var T=C.props.onMouseLeave;Dn(T)&&T(_,S)}),pn(C,"handleOuterEvent",function(S){var _=Aq(S),T=Ya(C.props,"".concat(_));if(_&&Dn(T)){var I,L;/.*touch.*/i.test(_)?L=C.getMouseInfo(S.changedTouches[0]):L=C.getMouseInfo(S),T((I=L)!==null&&I!==void 0?I:{},S)}}),pn(C,"handleClick",function(S){var _=C.getMouseInfo(S);if(_){var T=ot(ot({},_),{},{isTooltipActive:!0});C.setState(T),C.triggerSyncEvent(T);var I=C.props.onClick;Dn(I)&&I(T,S)}}),pn(C,"handleMouseDown",function(S){var _=C.props.onMouseDown;if(Dn(_)){var T=C.getMouseInfo(S);_(T,S)}}),pn(C,"handleMouseUp",function(S){var _=C.props.onMouseUp;if(Dn(_)){var T=C.getMouseInfo(S);_(T,S)}}),pn(C,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),pn(C,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&C.handleMouseDown(S.changedTouches[0])}),pn(C,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&C.handleMouseUp(S.changedTouches[0])}),pn(C,"handleDoubleClick",function(S){var _=C.props.onDoubleClick;if(Dn(_)){var T=C.getMouseInfo(S);_(T,S)}}),pn(C,"handleContextMenu",function(S){var _=C.props.onContextMenu;if(Dn(_)){var T=C.getMouseInfo(S);_(T,S)}}),pn(C,"triggerSyncEvent",function(S){C.props.syncId!==void 0&&M0.emit(L0,C.props.syncId,S,C.eventEmitterSymbol)}),pn(C,"applySyncEvent",function(S){var _=C.props,T=_.layout,I=_.syncMethod,L=C.state.updateId,A=S.dataStartIndex,D=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)C.setState(ot({dataStartIndex:A,dataEndIndex:D},w({props:C.props,dataStartIndex:A,dataEndIndex:D,updateId:L},C.state)));else if(S.activeTooltipIndex!==void 0){var B=S.chartX,$=S.chartY,N=S.activeTooltipIndex,F=C.state,O=F.offset,R=F.tooltipTicks;if(!O)return;if(typeof I=="function")N=I(R,S);else if(I==="value"){N=-1;for(var E=0;E<R.length;E++)if(R[E].value===S.activeLabel){N=E;break}}var z=ot(ot({},O),{},{x:O.left,y:O.top}),q=Math.min(B,z.x+z.width),X=Math.min($,z.y+z.height),H=R[N]&&R[N].value,K=Kw(C.state,C.props.data,N),ee=R[N]?{x:T==="horizontal"?R[N].coordinate:q,y:T==="horizontal"?X:R[N].coordinate}:J$;C.setState(ot(ot({},S),{},{activeLabel:H,activeCoordinate:ee,activePayload:K,activeTooltipIndex:N}))}else C.setState(S)}),pn(C,"renderCursor",function(S){var _,T=C.state,I=T.isTooltipActive,L=T.activeCoordinate,A=T.activePayload,D=T.offset,B=T.activeTooltipIndex,$=T.tooltipAxisBandSize,N=C.getTooltipEventType(),F=(_=S.props.active)!==null&&_!==void 0?_:I,O=C.props.layout,R=S.key||"_recharts-cursor";return Ce.createElement(Wte,{key:R,activeCoordinate:L,activePayload:A,activeTooltipIndex:B,chartName:n,element:S,isActive:F,layout:O,offset:D,tooltipAxisBandSize:$,tooltipEventType:N})}),pn(C,"renderPolarAxis",function(S,_,T){var I=Ya(S,"type.axisType"),L=Ya(C.state,"".concat(I,"Map")),A=S.type.defaultProps,D=A!==void 0?ot(ot({},A),S.props):S.props,B=L&&L[D["".concat(I,"Id")]];return u.cloneElement(S,ot(ot({},B),{},{className:wn(I,B.className),key:S.key||"".concat(_,"-").concat(T),ticks:no(B,!0)}))}),pn(C,"renderPolarGrid",function(S){var _=S.props,T=_.radialLines,I=_.polarAngles,L=_.polarRadius,A=C.state,D=A.radiusAxisMap,B=A.angleAxisMap,$=Ao(D),N=Ao(B),F=N.cx,O=N.cy,R=N.innerRadius,E=N.outerRadius;return u.cloneElement(S,{polarAngles:Array.isArray(I)?I:no(N,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(L)?L:no($,!0).map(function(z){return z.coordinate}),cx:F,cy:O,innerRadius:R,outerRadius:E,key:S.key||"polar-grid",radialLines:T})}),pn(C,"renderLegend",function(){var S=C.state.formattedGraphicalItems,_=C.props,T=_.children,I=_.width,L=_.height,A=C.props.margin||{},D=I-(A.left||0)-(A.right||0),B=GL({children:T,formattedGraphicalItems:S,legendWidth:D,legendContent:d});if(!B)return null;var $=B.item,N=RA(B,qte);return u.cloneElement($,ot(ot({},N),{},{chartWidth:I,chartHeight:L,margin:A,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),pn(C,"renderTooltip",function(){var S,_=C.props,T=_.children,I=_.accessibilityLayer,L=Ia(T,ui);if(!L)return null;var A=C.state,D=A.isTooltipActive,B=A.activeCoordinate,$=A.activePayload,N=A.activeLabel,F=A.offset,O=(S=L.props.active)!==null&&S!==void 0?S:D;return u.cloneElement(L,{viewBox:ot(ot({},F),{},{x:F.left,y:F.top}),active:O,label:N,payload:O?$:[],coordinate:B,accessibilityLayer:I})}),pn(C,"renderBrush",function(S){var _=C.props,T=_.margin,I=_.data,L=C.state,A=L.offset,D=L.dataStartIndex,B=L.dataEndIndex,$=L.updateId;return u.cloneElement(S,{key:S.key||"_recharts-brush",onChange:rf(C.handleBrushChange,S.props.onChange),data:I,x:_t(S.props.x)?S.props.x:A.left,y:_t(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(T.bottom||0),width:_t(S.props.width)?S.props.width:A.width,startIndex:D,endIndex:B,updateId:"brush-".concat($)})}),pn(C,"renderReferenceElement",function(S,_,T){if(!S)return null;var I=C,L=I.clipPathId,A=C.state,D=A.xAxisMap,B=A.yAxisMap,$=A.offset,N=S.type.defaultProps||{},F=S.props,O=F.xAxisId,R=O===void 0?N.xAxisId:O,E=F.yAxisId,z=E===void 0?N.yAxisId:E;return u.cloneElement(S,{key:S.key||"".concat(_,"-").concat(T),xAxis:D[R],yAxis:B[z],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:L})}),pn(C,"renderActivePoints",function(S){var _=S.item,T=S.activePoint,I=S.basePoint,L=S.childIndex,A=S.isRange,D=[],B=_.props.key,$=_.item.type.defaultProps!==void 0?ot(ot({},_.item.type.defaultProps),_.item.props):_.item.props,N=$.activeDot,F=$.dataKey,O=ot(ot({index:L,dataKey:F,cx:T.x,cy:T.y,r:4,fill:LC(_.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Hn(N,!1)),sp(N));return D.push(v.renderActiveDot(N,O,"".concat(B,"-activePoint-").concat(L))),I?D.push(v.renderActiveDot(N,ot(ot({},O),{},{cx:I.x,cy:I.y}),"".concat(B,"-basePoint-").concat(L))):A&&D.push(null),D}),pn(C,"renderGraphicChild",function(S,_,T){var I=C.filterFormatItem(S,_,T);if(!I)return null;var L=C.getTooltipEventType(),A=C.state,D=A.isTooltipActive,B=A.tooltipAxis,$=A.activeTooltipIndex,N=A.activeLabel,F=C.props.children,O=Ia(F,ui),R=I.props,E=R.points,z=R.isRange,q=R.baseLine,X=I.item.type.defaultProps!==void 0?ot(ot({},I.item.type.defaultProps),I.item.props):I.item.props,H=X.activeDot,K=X.hide,ee=X.activeBar,ge=X.activeShape,oe=!!(!K&&D&&O&&(H||ee||ge)),G={};L!=="axis"&&O&&O.props.trigger==="click"?G={onClick:rf(C.handleItemMouseEnter,S.props.onClick)}:L!=="axis"&&(G={onMouseLeave:rf(C.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:rf(C.handleItemMouseEnter,S.props.onMouseEnter)});var Q=u.cloneElement(S,ot(ot({},I.props),G));function te(se){return typeof B.dataKey=="function"?B.dataKey(se.payload):null}if(oe)if($>=0){var U,V;if(B.dataKey&&!B.allowDuplicatedCategory){var ae=typeof B.dataKey=="function"?te:"payload.".concat(B.dataKey.toString());U=op(E,ae,N),V=z&&q&&op(q,ae,N)}else U=E==null?void 0:E[$],V=z&&q&&q[$];if(ge||ee){var ne=S.props.activeIndex!==void 0?S.props.activeIndex:$;return[u.cloneElement(S,ot(ot(ot({},I.props),G),{},{activeIndex:ne})),null,null]}if(!jn(U))return[Q].concat(Gl(C.renderActivePoints({item:I,activePoint:U,basePoint:V,childIndex:$,isRange:z})))}else{var me,ue=(me=C.getItemByXY(C.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:Q},Ae=ue.graphicalItem,we=Ae.item,ce=we===void 0?S:we,De=Ae.childIndex,le=ot(ot(ot({},I.props),G),{},{activeIndex:De});return[u.cloneElement(ce,le),null,null]}return z?[Q,null,null]:[Q,null]}),pn(C,"renderCustomized",function(S,_,T){return u.cloneElement(S,ot(ot({key:"recharts-customized-".concat(T)},C.props),C.state))}),pn(C,"renderMap",{CartesianGrid:{handler:cf,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:cf},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:cf},YAxis:{handler:cf},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((P=b.id)!==null&&P!==void 0?P:dh("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=UM(C.triggeredAfterMouseMove,(k=b.throttleDelay)!==null&&k!==void 0?k:1e3/60),C.state={},C}return nne(v,p),Qte(v,[{key:"componentDidMount",value:function(){var P,k;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var P=this.props,k=P.children,C=P.data,S=P.height,_=P.layout,T=Ia(k,ui);if(T){var I=T.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,A=Kw(this.state,C,I,L),D=this.state.tooltipTicks[I].coordinate,B=(this.state.offset.top+S)/2,$=_==="horizontal",N=$?{x:D,y:B}:{y:D,x:B},F=this.state.formattedGraphicalItems.find(function(R){var E=R.item;return E.type.name==="Scatter"});F&&(N=ot(ot({},N),F.props.points[I].tooltipPosition),A=F.props.points[I].tooltipPayload);var O={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:L,activePayload:A,activeCoordinate:N};this.setState(O),this.renderCursor(T),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(P,k){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==k.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==P.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==P.margin){var C,S;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(P){Ex([Ia(P.children,ui)],[Ia(this.props.children,ui)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var P=Ia(this.props.children,ui);if(P&&typeof P.props.shared=="boolean"){var k=P.props.shared?"axis":"item";return l.indexOf(k)>=0?k:o}return o}},{key:"getMouseInfo",value:function(P){if(!this.container)return null;var k=this.container,C=k.getBoundingClientRect(),S=y7(C),_={chartX:Math.round(P.pageX-S.left),chartY:Math.round(P.pageY-S.top)},T=C.width/k.offsetWidth||1,I=this.inRange(_.chartX,_.chartY,T);if(!I)return null;var L=this.state,A=L.xAxisMap,D=L.yAxisMap,B=this.getTooltipEventType(),$=MA(this.state,this.props.data,this.props.layout,I);if(B!=="axis"&&A&&D){var N=Ao(A).scale,F=Ao(D).scale,O=N&&N.invert?N.invert(_.chartX):null,R=F&&F.invert?F.invert(_.chartY):null;return ot(ot({},_),{},{xValue:O,yValue:R},$)}return $?ot(ot({},_),$):null}},{key:"inRange",value:function(P,k){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=P/C,T=k/C;if(S==="horizontal"||S==="vertical"){var I=this.state.offset,L=_>=I.left&&_<=I.left+I.width&&T>=I.top&&T<=I.top+I.height;return L?{x:_,y:T}:null}var A=this.state,D=A.angleAxisMap,B=A.radiusAxisMap;if(D&&B){var $=Ao(D);return JI({x:_,y:T},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var P=this.props.children,k=this.getTooltipEventType(),C=Ia(P,ui),S={};C&&k==="axis"&&(C.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=sp(this.props,this.handleOuterEvent);return ot(ot({},_),S)}},{key:"addListener",value:function(){M0.on(L0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){M0.removeListener(L0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(P,k,C){for(var S=this.state.formattedGraphicalItems,_=0,T=S.length;_<T;_++){var I=S[_];if(I.item===P||I.props.key===P.key||k===ao(I.item.type)&&C===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var P=this.clipPathId,k=this.state.offset,C=k.left,S=k.top,_=k.height,T=k.width;return Ce.createElement("defs",null,Ce.createElement("clipPath",{id:P},Ce.createElement("rect",{x:C,y:S,height:_,width:T})))}},{key:"getXScales",value:function(){var P=this.state.xAxisMap;return P?Object.entries(P).reduce(function(k,C){var S=DA(C,2),_=S[0],T=S[1];return ot(ot({},k),{},pn({},_,T.scale))},{}):null}},{key:"getYScales",value:function(){var P=this.state.yAxisMap;return P?Object.entries(P).reduce(function(k,C){var S=DA(C,2),_=S[0],T=S[1];return ot(ot({},k),{},pn({},_,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(P){var k;return(k=this.state.xAxisMap)===null||k===void 0||(k=k[P])===null||k===void 0?void 0:k.scale}},{key:"getYScaleByAxisId",value:function(P){var k;return(k=this.state.yAxisMap)===null||k===void 0||(k=k[P])===null||k===void 0?void 0:k.scale}},{key:"getItemByXY",value:function(P){var k=this.state,C=k.formattedGraphicalItems,S=k.activeItem;if(C&&C.length)for(var _=0,T=C.length;_<T;_++){var I=C[_],L=I.props,A=I.item,D=A.type.defaultProps!==void 0?ot(ot({},A.type.defaultProps),A.props):A.props,B=ao(A.type);if(B==="Bar"){var $=(L.data||[]).find(function(R){return AJ(P,R)});if($)return{graphicalItem:I,payload:$}}else if(B==="RadialBar"){var N=(L.data||[]).find(function(R){return JI(P,R)});if(N)return{graphicalItem:I,payload:N}}else if(qg(I,S)||Ug(I,S)||Vd(I,S)){var F=xQ({graphicalItem:I,activeTooltipItem:S,itemData:D.data}),O=D.activeIndex===void 0?F:D.activeIndex;return{graphicalItem:ot(ot({},I),{},{childIndex:O}),payload:Vd(I,S)?D.data[F]:I.props.data[F]}}}return null}},{key:"render",value:function(){var P=this;if(!l2(this))return null;var k=this.props,C=k.children,S=k.className,_=k.width,T=k.height,I=k.style,L=k.compact,A=k.title,D=k.desc,B=RA(k,Ute),$=Hn(B,!1);if(L)return Ce.createElement(hA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement(Lx,ll({},$,{width:_,height:T,title:A,desc:D}),this.renderClipPath(),u2(C,this.renderMap)));if(this.props.accessibilityLayer){var N,F;$.tabIndex=(N=this.props.tabIndex)!==null&&N!==void 0?N:0,$.role=(F=this.props.role)!==null&&F!==void 0?F:"application",$.onKeyDown=function(R){P.accessibilityManager.keyboardEvent(R)},$.onFocus=function(){P.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return Ce.createElement(hA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ce.createElement("div",ll({className:wn("recharts-wrapper",S),style:ot({position:"relative",cursor:"default",width:_,height:T},I)},O,{ref:function(E){P.container=E}}),Ce.createElement(Lx,ll({},$,{width:_,height:T,title:A,desc:D,style:lne}),this.renderClipPath(),u2(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(u.Component);pn(x,"displayName",n),pn(x,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),pn(x,"getDerivedStateFromProps",function(p,v){var b=p.dataKey,P=p.data,k=p.children,C=p.width,S=p.height,_=p.layout,T=p.stackOffset,I=p.margin,L=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var D=LA(p);return ot(ot(ot({},D),{},{updateId:0},w(ot(ot({props:p},D),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:P,prevWidth:C,prevHeight:S,prevLayout:_,prevStackOffset:T,prevMargin:I,prevChildren:k})}if(b!==v.prevDataKey||P!==v.prevData||C!==v.prevWidth||S!==v.prevHeight||_!==v.prevLayout||T!==v.prevStackOffset||!dl(I,v.prevMargin)){var B=LA(p),$={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},N=ot(ot({},MA(v,P,_)),{},{updateId:v.updateId+1}),F=ot(ot(ot({},B),$),N);return ot(ot(ot({},F),w(ot({props:p},F),v)),{},{prevDataKey:b,prevData:P,prevWidth:C,prevHeight:S,prevLayout:_,prevStackOffset:T,prevMargin:I,prevChildren:k})}if(!Ex(k,v.prevChildren)){var O,R,E,z,q=Ia(k,jl),X=q&&(O=(R=q.props)===null||R===void 0?void 0:R.startIndex)!==null&&O!==void 0?O:L,H=q&&(E=(z=q.props)===null||z===void 0?void 0:z.endIndex)!==null&&E!==void 0?E:A,K=X!==L||H!==A,ee=!jn(P),ge=ee&&!K?v.updateId:v.updateId+1;return ot(ot({updateId:ge},w(ot(ot({props:p},v),{},{updateId:ge,dataStartIndex:X,dataEndIndex:H}),v)),{},{prevChildren:k,dataStartIndex:X,dataEndIndex:H})}return null}),pn(x,"renderActiveDot",function(p,v,b){var P;return u.isValidElement(p)?P=u.cloneElement(p,v):Dn(p)?P=p(v):P=Ce.createElement(jC,v),Ce.createElement(Er,{className:"recharts-active-dot",key:b},P)});var y=u.forwardRef(function(v,b){return Ce.createElement(x,ll({},v,{ref:b}))});return y.displayName=x.displayName,y},Z$=bne({chartName:"LineChart",GraphicalChild:Vo,axisComponents:[{axisType:"xAxis",AxisComp:xh},{axisType:"yAxis",AxisComp:wh}],formatAxisMap:mZ});const jA=[{id:"user1001",nickname:"강백호",level:"VIP",loginTime:"2023-05-20 14:30:25",isOnline:!0,rollingAmount:185e5,convertedRollingAmount:125e5,totalRollingAmount:31e6,totalTransactions:87,lastTransaction:"2023-05-20 15:42:18"},{id:"user1002",nickname:"서태웅",level:"골드",loginTime:"2023-05-20 12:15:40",isOnline:!0,rollingAmount:765e4,convertedRollingAmount:52e5,totalRollingAmount:1285e4,totalTransactions:42,lastTransaction:"2023-05-20 14:30:52"},{id:"user1003",nickname:"채치수",level:"골드",loginTime:"2023-05-20 10:08:33",isOnline:!1,rollingAmount:523e4,convertedRollingAmount:38e5,totalRollingAmount:903e4,totalTransactions:31,lastTransaction:"2023-05-20 11:42:05"},{id:"user1004",nickname:"정대만",level:"실버",loginTime:"2023-05-20 16:45:12",isOnline:!0,rollingAmount:318e4,convertedRollingAmount:21e5,totalRollingAmount:528e4,totalTransactions:24,lastTransaction:"2023-05-20 17:20:11"},{id:"user1005",nickname:"송태섭",level:"실버",loginTime:"2023-05-20 11:30:15",isOnline:!1,rollingAmount:195e4,convertedRollingAmount:12e5,totalRollingAmount:315e4,totalTransactions:18,lastTransaction:"2023-05-20 13:15:40"},{id:"user1006",nickname:"이정환",level:"VIP",loginTime:"2023-05-20 09:22:18",isOnline:!0,rollingAmount:1245e4,convertedRollingAmount:83e5,totalRollingAmount:2075e4,totalTransactions:56,lastTransaction:"2023-05-20 12:34:27"},{id:"user1007",nickname:"김민재",level:"골드",loginTime:"2023-05-20 10:45:33",isOnline:!0,rollingAmount:873e4,convertedRollingAmount:61e5,totalRollingAmount:1483e4,totalTransactions:47,lastTransaction:"2023-05-20 15:18:09"},{id:"user1008",nickname:"이승우",level:"실버",loginTime:"2023-05-20 13:12:54",isOnline:!1,rollingAmount:285e4,convertedRollingAmount:19e5,totalRollingAmount:475e4,totalTransactions:21,lastTransaction:"2023-05-20 14:05:32"},{id:"user1009",nickname:"김연아",level:"VIP",loginTime:"2023-05-20 09:15:22",isOnline:!0,rollingAmount:158e5,convertedRollingAmount:105e5,totalRollingAmount:263e5,totalTransactions:64,lastTransaction:"2023-05-20 11:45:38"},{id:"user1010",nickname:"박지성",level:"골드",loginTime:"2023-05-20 10:33:17",isOnline:!1,rollingAmount:642e4,convertedRollingAmount:43e5,totalRollingAmount:1072e4,totalTransactions:39,lastTransaction:"2023-05-20 13:27:41"},{id:"user1011",nickname:"손흥민",level:"VIP",loginTime:"2023-05-20 11:45:08",isOnline:!0,rollingAmount:1935e4,convertedRollingAmount:132e5,totalRollingAmount:3255e4,totalTransactions:92,lastTransaction:"2023-05-20 14:52:19"},{id:"user1012",nickname:"이강인",level:"실버",loginTime:"2023-05-20 13:24:56",isOnline:!0,rollingAmount:321e4,convertedRollingAmount:21e5,totalRollingAmount:531e4,totalTransactions:24,lastTransaction:"2023-05-20 15:37:02"}],Gi=e=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e).replace("₩","₩ "),vne=()=>{const[e,t]=u.useState(1),[n,r]=u.useState(""),[i,o]=u.useState(jA),[s,l]=u.useState(null),[c,d]=u.useState(!1),[h,f]=u.useState("rollingAmount"),[g,w]=u.useState("desc"),[x,y]=u.useState("total"),[p,v]=u.useState(null),[b,P]=u.useState({}),k=Di("(max-width:1000px)"),C=Di("(max-width:700px)"),S=5;u.useEffect(()=>{let z=jA;n&&(z=z.filter(q=>q.nickname.toLowerCase().includes(n.toLowerCase())||q.id.toLowerCase().includes(n.toLowerCase()))),x==="today"?z=z.map(q=>({...q,rollingAmount:Math.round(q.rollingAmount*.3),convertedRollingAmount:Math.round(q.convertedRollingAmount*.3),totalRollingAmount:Math.round(q.totalRollingAmount*.3)})):x==="month"&&(z=z.map(q=>({...q,rollingAmount:Math.round(q.rollingAmount*.7),convertedRollingAmount:Math.round(q.convertedRollingAmount*.7),totalRollingAmount:Math.round(q.totalRollingAmount*.7)}))),z=[...z].sort((q,X)=>g==="asc"?q[h]>X[h]?1:-1:q[h]<X[h]?1:-1),o(z)},[n,h,g,x]);const _=(z,q)=>{t(q)},T=z=>{r(z.target.value),t(1)},I=z=>{h===z?w(g==="asc"?"desc":"asc"):(f(z),w("desc"))},L=z=>{l(z),d(!0)},A=()=>{d(!1)},D=z=>{`${z.nickname}${z.id}`,alert(`${z.nickname} 회원의 롤링 금액 ${Gi(z.rollingAmount)}이 전환되었습니다.`)},B=z=>{`${z.nickname}${z.id}`,alert(`${z.nickname} 회원의 롤링 상태가 리셋되었습니다.`)},$=z=>{v(z.currentTarget)},N=()=>{v(null)},F=z=>{y(z),N(),t(1)},O=i.slice((e-1)*S,e*S),R=z=>h!==z?a(nE,{fontSize:"small",sx:{opacity:.3,ml:.5}}):g==="asc"?a(rE,{fontSize:"small",sx:{color:"#009ef7",ml:.5}}):a(aE,{fontSize:"small",sx:{color:"#009ef7",ml:.5}}),E=(z,q)=>{q.stopPropagation(),P(X=>({...X,[z]:!X[z]}))};return m(j,{className:"table-root-container",sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[m(j,{className:"table-controls",sx:{borderBottom:"none",paddingBottom:0},children:[m(j,{sx:{display:"flex",gap:1,alignItems:"center"},children:[a(M,{variant:"h6",sx:{color:"#181c32",fontWeight:600,fontSize:"1.075rem"},children:"회원 롤링 상태"}),a(ut,{label:`${i.length}명`,size:"small",sx:{backgroundColor:"#f1faff",color:"#009ef7",height:"22px",fontSize:"11px",fontWeight:600}})]}),m(j,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[a($e,{className:"search-field",placeholder:"회원 검색...",variant:"outlined",size:"small",value:n,onChange:T,InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small",sx:{color:"#a1a5b7"}})})}}),a(Se,{variant:"outlined",className:"filter-button",onClick:$,startIcon:a(ZR,{fontSize:"small"}),endIcon:a(ut,{label:x==="today"?"당일":x==="month"?"당월":"누적",size:"small",sx:{backgroundColor:"#f1faff",color:"#009ef7",height:"18px",fontSize:"10px",fontWeight:600,"& .MuiChip-label":{padding:"0 8px",fontSize:"10px"}}}),sx:{borderColor:"#e4e6ef",color:"#7e8299",fontSize:"13px","&:hover":{backgroundColor:"#f5f8fa",borderColor:"#d6d6e0"}},children:"기간"}),m(vi,{anchorEl:p,open:!!p,onClose:N,PaperProps:{elevation:0,sx:{borderRadius:"8px",boxShadow:"0 0 50px 0 rgba(82, 63, 105, 0.15)",mt:1.5,"& .MuiMenuItem-root":{fontSize:"13px",py:1}}},children:[a(Me,{onClick:()=>F("today"),children:"당일"}),a(Me,{onClick:()=>F("month"),children:"당월"}),a(Me,{onClick:()=>F("total"),children:"누적"})]})]})]}),a(wa,{className:"table-container",sx:{flexGrow:1,overflow:"auto"},children:m(va,{className:"table-wrapper",size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{className:"table-header-cell",onClick:()=>I("nickname"),sx:{width:C?"50%":k?"30%":"25%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"회원"}),R("nickname")]})}),!C&&a(ye,{className:"table-header-cell",onClick:()=>I("isOnline"),sx:{width:"15%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"접속 상태"}),R("isOnline")]})}),a(ye,{className:"table-header-cell",onClick:()=>I("rollingAmount"),sx:{width:C?"40%":k?"30%":"15%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"롤링 금액"}),R("rollingAmount")]})}),!C&&a(ye,{className:"table-header-cell",onClick:()=>I("convertedRollingAmount"),sx:{width:"15%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"전환롤링금"}),R("convertedRollingAmount")]})}),!C&&a(ye,{className:"table-header-cell",onClick:()=>I("totalRollingAmount"),sx:{width:"15%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"총롤링금"}),R("totalRollingAmount")]})}),!k&&a(ye,{className:"table-header-cell actions",sx:{width:"15%"},children:a(M,{sx:{fontSize:"15px",fontWeight:600},children:"액션"})}),(k||C)&&a(ye,{className:"table-header-cell",sx:{width:"10%"},children:a(M,{sx:{fontSize:"15px",fontWeight:600},children:"비고"})})]})}),a(xa,{children:O.length>0?O.map(z=>m(Ce.Fragment,{children:[m(mn,{className:"table-row",sx:{cursor:"pointer"},children:[a(ye,{className:"table-cell",sx:{width:C?"50%":k?"30%":"25%",textAlign:"center"},children:m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",fontSize:"14px",color:"#181c32",lineHeight:1.2},children:z.id}),m(M,{variant:"caption",sx:{color:"#9e9e9e",fontSize:"12px",lineHeight:1.2},children:["(",z.nickname,")"]})]})}),!C&&a(ye,{className:"table-cell",sx:{width:"15%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:m(j,{className:"online-status",children:[a(j,{className:`online-status-indicator ${z.isOnline?"online":""}`}),a(M,{variant:"body2",className:`online-status-text ${z.isOnline?"online":""}`,children:z.isOnline?"온라인":"오프라인"})]})})}),a(ye,{className:"table-cell",sx:{width:C?"40%":k?"30%":"15%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(M,{variant:"body2",className:"rolling-amount",children:Gi(z.rollingAmount)})})}),!C&&a(ye,{className:"table-cell",sx:{width:"15%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(M,{variant:"body2",className:"converted-rolling-amount",children:Gi(z.convertedRollingAmount)})})}),!C&&a(ye,{className:"table-cell",sx:{width:"15%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(M,{variant:"body2",className:"total-rolling-amount",children:Gi(z.totalRollingAmount)})})}),!k&&a(ye,{className:"table-cell actions",sx:{width:"15%"},children:a(j,{sx:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center"},children:a(Se,{className:"table-action-button view",size:"small",variant:"outlined",sx:{fontSize:"10px",padding:"1px 6px",minWidth:"36px",height:"22px",borderColor:"#e4e6ef",color:"#7e8299","&:hover":{backgroundColor:"#f5f8fa",borderColor:"#d6d6e0"}},onClick:q=>{q.stopPropagation(),L(z)},children:"상세보기"})})}),(k||C)&&a(ye,{className:"table-cell",sx:{width:"10%"},children:a(Ct,{size:"small",onClick:q=>E(z.id,q),sx:{padding:"4px"},children:b[z.id]?a(eE,{fontSize:"small"}):a(lo,{fontSize:"small"})})})]}),(k||C)&&a(mn,{children:a(ye,{colSpan:C?3:4,sx:{padding:0,border:"none"},children:a(Is,{in:b[z.id],timeout:"auto",unmountOnExit:!0,children:m(j,{sx:{py:2,px:3,backgroundColor:"#f9f9f9"},children:[C&&m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,color:"#5e6278"},children:"접속 상태:"}),m(j,{sx:{display:"flex",alignItems:"center"},children:[a(j,{className:`online-status-indicator ${z.isOnline?"online":""}`,sx:{marginRight:"4px"}}),a(M,{variant:"body2",className:`online-status-text ${z.isOnline?"online":""}`,children:z.isOnline?"온라인":"오프라인"})]})]}),C&&m(bn,{children:[m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,color:"#5e6278"},children:"전환롤링금:"}),a(M,{variant:"body2",children:Gi(z.convertedRollingAmount)})]}),m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,color:"#5e6278"},children:"총롤링금:"}),a(M,{variant:"body2",children:Gi(z.totalRollingAmount)})]})]}),a(j,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:a(Se,{className:"table-action-button view",size:"small",variant:"outlined",sx:{fontSize:"11px",padding:"2px 8px",minWidth:"60px",height:"26px",borderColor:"#e4e6ef",color:"#7e8299"},onClick:q=>{q.stopPropagation(),L(z)},children:"상세보기"})})]})})})})]},z.id)):a(mn,{children:a(ye,{colSpan:C?3:k?4:6,className:"table-empty-state",children:"검색 결과가 없습니다."})})})]})}),m(j,{className:"table-footer",sx:{borderTop:"1px solid #E4E6EF",backgroundColor:"#F5F8FA",mt:"auto"},children:[a(j,{sx:{display:"flex",alignItems:"center",gap:1},children:m(M,{variant:"body2",sx:{color:"#a1a5b7",fontSize:"13px"},children:["페이지당 행: ",S]})}),a(tE,{count:Math.max(1,Math.ceil(i.length/S)),page:e,onChange:_,color:"primary",shape:"rounded",size:"small",showFirstButton:!0,showLastButton:!0,className:"table-pagination"})]}),a(Yn,{open:c,onClose:A,maxWidth:"sm",fullWidth:!0,className:"user-detail-dialog",children:s&&m(bn,{children:[a(Zn,{children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m(j,{children:[m(M,{variant:"h6",sx:{fontWeight:600,fontSize:"1.25rem"},children:[s.nickname," 회원 상세 정보"]}),m(M,{variant:"caption",sx:{color:"#a1a5b7"},children:[x==="today"?"당일":x==="month"?"당월":"누적"," 롤링 정보"]})]}),a(Ct,{onClick:A,size:"small",children:a(Sa,{fontSize:"small"})})]})}),a(Kn,{children:m(W,{container:!0,spacing:3,children:[m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"회원 ID"}),a(M,{className:"detail-field-value",children:s.id})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"회원 등급"}),a(M,{className:"detail-field-value",children:a(ut,{label:s.level,size:"small",className:`level-${s.level.toLowerCase()}`,sx:{height:"22px",fontSize:"11px"}})})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"접속 상태"}),a(M,{className:"detail-field-value",children:m(j,{className:"online-status",children:[a(j,{className:`online-status-indicator ${s.isOnline?"online":""}`}),a(M,{variant:"body2",className:`online-status-text ${s.isOnline?"online":""}`,children:s.isOnline?"온라인":"오프라인"})]})})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"로그인 시간"}),a(M,{className:"detail-field-value",children:s.loginTime})]}),m(W,{item:!0,xs:12,sm:4,children:[a(M,{className:"detail-field-label",children:"롤링 금액"}),a(M,{className:"detail-field-value rolling-amount",children:Gi(s.rollingAmount)})]}),m(W,{item:!0,xs:12,sm:4,children:[a(M,{className:"detail-field-label",children:"전환롤링금"}),a(M,{className:"detail-field-value rolling-amount",children:Gi(s.convertedRollingAmount)})]}),m(W,{item:!0,xs:12,sm:4,children:[a(M,{className:"detail-field-label",children:"총롤링금"}),a(M,{className:"detail-field-value rolling-amount",children:Gi(s.totalRollingAmount)})]})]})}),m(nr,{children:[a(Se,{onClick:A,variant:"outlined",sx:{borderColor:"#eff2f5",color:"#7e8299",fontWeight:500,textTransform:"none",fontSize:"13px"},children:"닫기"}),a(Se,{className:"table-action-button transition",variant:"contained",sx:{fontWeight:500,textTransform:"none",fontSize:"13px"},onClick:()=>{D(s),A()},children:"전환"}),a(Se,{className:"table-action-button reset",variant:"contained",color:"error",sx:{fontWeight:500,textTransform:"none",fontSize:"13px"},onClick:()=>{B(s),A()},children:"리셋"})]})]})})]})},xne=[{id:"user2001",nickname:"김태희",level:"VIP",loginTime:"2023-05-20 14:30:25",loginLocation:"서울시 강남구",deviceType:"mobile",isOnline:!0,sessionTime:3600},{id:"user2002",nickname:"이민호",level:"VIP",loginTime:"2023-05-20 12:15:40",loginLocation:"부산시 해운대구",deviceType:"desktop",isOnline:!0,sessionTime:2750},{id:"user2003",nickname:"전지현",level:"골드",loginTime:"2023-05-20 10:08:33",loginLocation:"인천시 남동구",deviceType:"tablet",isOnline:!1,sessionTime:1820},{id:"user2004",nickname:"송중기",level:"골드",loginTime:"2023-05-20 16:45:12",loginLocation:"대전시 유성구",deviceType:"mobile",isOnline:!0,sessionTime:4250},{id:"user2005",nickname:"현빈",level:"VIP",loginTime:"2023-05-20 11:30:15",loginLocation:"광주시 서구",deviceType:"desktop",isOnline:!1,sessionTime:1450},{id:"user2006",nickname:"손예진",level:"실버",loginTime:"2023-05-20 09:22:18",loginLocation:"서울시 용산구",deviceType:"mobile",isOnline:!0,sessionTime:5100},{id:"user2007",nickname:"박서준",level:"골드",loginTime:"2023-05-20 10:45:33",loginLocation:"대구시 중구",deviceType:"desktop",isOnline:!0,sessionTime:3200},{id:"user2008",nickname:"이종석",level:"실버",loginTime:"2023-05-20 13:12:54",loginLocation:"울산시 남구",deviceType:"tablet",isOnline:!1,sessionTime:950},{id:"user2009",nickname:"공유",level:"VIP",loginTime:"2023-05-20 08:45:32",loginLocation:"서울시 마포구",deviceType:"desktop",isOnline:!0,sessionTime:5880},{id:"user2010",nickname:"이병헌",level:"골드",loginTime:"2023-05-20 11:27:14",loginLocation:"서울시 강북구",deviceType:"mobile",isOnline:!1,sessionTime:2320},{id:"user2011",nickname:"김수현",level:"VIP",loginTime:"2023-05-20 13:37:52",loginLocation:"부산시 수영구",deviceType:"tablet",isOnline:!0,sessionTime:3780},{id:"user2012",nickname:"한효주",level:"실버",loginTime:"2023-05-20 15:12:28",loginLocation:"대구시 수성구",deviceType:"mobile",isOnline:!1,sessionTime:1560}],j0=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;let i="";return t>0&&(i+=`${t}시간 `),(n>0||t>0)&&(i+=`${n}분 `),i+=`${r}초`,i},F0=e=>{switch(e){case"mobile":return a(oE,{fontSize:"small",sx:{color:"#3699ff"}});case"tablet":return a(sE,{fontSize:"small",sx:{color:"#8950fc"}});case"desktop":default:return a(iE,{fontSize:"small",sx:{color:"#1bc5bd"}})}},wne=()=>xne,Cne=()=>{const[e,t]=u.useState(1),[n,r]=u.useState(""),[i,o]=u.useState(wne()),[s,l]=u.useState(null),[c,d]=u.useState(!1),[h,f]=u.useState("sessionTime"),[g,w]=u.useState("desc"),[x,y]=u.useState(null),[p,v]=u.useState("online"),[b,P]=u.useState("all"),[k,C]=u.useState(0),[S,_]=u.useState({}),T=Di("(max-width:1000px)"),I=Di("(max-width:700px)"),L=5;u.useEffect(()=>{let K=i;if(n&&(K=K.filter(ee=>ee.nickname.toLowerCase().includes(n.toLowerCase())||ee.id.toLowerCase().includes(n.toLowerCase()))),p!=="all"){const ee=p==="online";K=K.filter(ge=>ge.isOnline===ee)}b!=="all"&&(K=K.filter(ee=>ee.deviceType===b)),K=[...K].sort((ee,ge)=>g==="asc"?ee[h]>ge[h]?1:-1:ee[h]<ge[h]?1:-1),o(K)},[n,p,b,h,g]);const A=(K,ee)=>{t(ee)},D=K=>{r(K.target.value),t(1)},B=K=>{h===K?w(g==="asc"?"desc":"asc"):(f(K),w("desc"))},$=K=>{y(K.currentTarget)},N=()=>{y(null)},F=K=>{v(K),N(),t(1)},O=K=>{P(K),N(),t(1)},R=K=>{l(K),d(!0)},E=()=>{d(!1)},z=(K,ee)=>{C(ee)},q=(K,ee)=>{ee.stopPropagation(),_(ge=>({...ge,[K]:!ge[K]}))},X=i.slice((e-1)*L,e*L),H=K=>h!==K?a(nE,{fontSize:"small",sx:{opacity:.3,ml:.5}}):g==="asc"?a(rE,{fontSize:"small",sx:{color:"#009ef7",ml:.5}}):a(aE,{fontSize:"small",sx:{color:"#009ef7",ml:.5}});return m(j,{className:"table-root-container",sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[m(j,{className:"table-controls",sx:{borderBottom:"none",paddingBottom:0},children:[m(j,{sx:{display:"flex",gap:1,alignItems:"center"},children:[a(M,{variant:"h6",sx:{color:"#181c32",fontWeight:600,fontSize:"1.075rem"},children:"활동 중인 사용자"}),a(ut,{label:`${i.length}명`,size:"small",sx:{backgroundColor:"#f1faff",color:"#009ef7",height:"22px",fontSize:"11px",fontWeight:600}})]}),m(j,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[a($e,{className:"search-field",placeholder:"사용자 검색...",variant:"outlined",size:"small",value:n,onChange:D,InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small",sx:{color:"#a1a5b7"}})})}}),a(Se,{variant:"outlined",className:"filter-button",onClick:$,startIcon:a(ZR,{fontSize:"small"}),endIcon:a(ut,{label:`${p==="online"?"온라인":""}${p==="online"&&b!=="all"?" + ":""}${b!=="all"?b==="desktop"?"데스크톱":b==="mobile"?"모바일":"태블릿":""}`,size:"small",className:"filter-chip",sx:{backgroundColor:"#f1faff",color:"#009ef7",height:"18px",fontSize:"10px",fontWeight:600,"& .MuiChip-label":{padding:"0 8px",fontSize:"10px"}}}),sx:{borderColor:"#e4e6ef",color:"#7e8299",fontSize:"13px","&:hover":{backgroundColor:"#f5f8fa",borderColor:"#d6d6e0"}},children:"필터"}),m(vi,{anchorEl:x,open:!!x,onClose:N,PaperProps:{elevation:0,sx:{borderRadius:"8px",boxShadow:"0 0 50px 0 rgba(82, 63, 105, 0.15)",mt:1.5,"& .MuiMenuItem-root":{fontSize:"13px",py:1}}},children:[m(La,{value:k,onChange:z,sx:{minHeight:"36px","& .MuiTab-root":{fontSize:"12px",minHeight:"36px",fontWeight:500,textTransform:"none",color:"#5e6278"},"& .Mui-selected":{color:"#009ef7 !important"}},children:[a(_n,{label:"상태"}),a(_n,{label:"디바이스"})]}),a(yn,{sx:{my:1}}),k===0&&[a(Me,{onClick:()=>F("online"),children:"온라인"},"online")],k===1&&[a(Me,{onClick:()=>O("all"),children:"모든 디바이스"},"all"),m(Me,{onClick:()=>O("desktop"),children:[a(iE,{fontSize:"small",sx:{mr:1,color:"#1bc5bd"}}),"데스크톱"]},"desktop"),m(Me,{onClick:()=>O("mobile"),children:[a(oE,{fontSize:"small",sx:{mr:1,color:"#3699ff"}}),"모바일"]},"mobile"),m(Me,{onClick:()=>O("tablet"),children:[a(sE,{fontSize:"small",sx:{mr:1,color:"#8950fc"}}),"태블릿"]},"tablet")]]})]})]}),a(wa,{className:"table-container",sx:{flexGrow:1},children:m(va,{className:"table-wrapper",size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{className:"table-header-cell",onClick:()=>B("nickname"),sx:{width:I?"45%":T?"35%":"25%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"회원"}),H("nickname")]})}),a(ye,{className:"table-header-cell",onClick:()=>B("loginTime"),sx:{width:I?"45%":T?"25%":"15%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"로그인 시간"}),H("loginTime")]})}),!I&&a(ye,{className:"table-header-cell",onClick:()=>B("isOnline"),sx:{width:T?"25%":"12%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"접속 상태"}),H("isOnline")]})}),!I&&a(ye,{className:"table-header-cell",onClick:()=>B("loginLocation"),sx:{width:"12%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"로그인 위치"}),H("loginLocation")]})}),!T&&a(ye,{className:"table-header-cell",onClick:()=>B("deviceType"),sx:{width:"12%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"디바이스"}),H("deviceType")]})}),!I&&a(ye,{className:"table-header-cell",onClick:()=>B("sessionTime"),sx:{width:"12%"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[a(M,{sx:{fontSize:"15px",fontWeight:600},children:"세션 시간"}),H("sessionTime")]})}),!T&&a(ye,{className:"table-header-cell actions",sx:{width:"12%"},children:a(M,{sx:{fontSize:"15px",fontWeight:600},children:"액션"})}),(T||I)&&a(ye,{className:"table-header-cell",sx:{width:"10%"},children:a(M,{sx:{fontSize:"15px",fontWeight:600},children:"비고"})})]})}),a(xa,{children:X.length>0?X.map(K=>m(Ce.Fragment,{children:[m(mn,{className:"table-row",sx:{cursor:"pointer"},children:[a(ye,{className:"table-cell",sx:{width:I?"45%":T?"35%":"25%",textAlign:"center"},children:m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",fontSize:"14px",color:"#181c32",lineHeight:1.2},children:K.id}),m(M,{variant:"caption",sx:{color:"#9e9e9e",fontSize:"12px",lineHeight:1.2},children:["(",K.nickname||"닉네임없음",")"]})]})}),a(ye,{className:"table-cell",sx:{width:I?"45%":T?"25%":"15%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:K.loginTime})}),!I&&a(ye,{className:"table-cell",sx:{width:T?"25%":"12%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:m(j,{className:"online-status",children:[a(j,{className:`online-status-indicator ${K.isOnline?"online":""}`}),a(M,{variant:"body2",className:`online-status-text ${K.isOnline?"online":""}`,children:K.isOnline?"온라인":"오프라인"})]})})}),!I&&a(ye,{className:"table-cell",sx:{width:"12%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(M,{variant:"body2",className:"location-text",children:K.loginLocation})})}),!T&&a(ye,{className:"table-cell",sx:{width:"12%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(Fn,{title:K.deviceType,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[F0(K.deviceType),a(M,{variant:"body2",sx:{ml:1},children:K.deviceType})]})})})}),!I&&a(ye,{className:"table-cell",sx:{width:"12%"},children:a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a(M,{variant:"body2",className:"session-time",children:j0(K.sessionTime)})})}),!T&&a(ye,{className:"table-cell actions",sx:{width:"12%"},children:a(j,{sx:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center"},children:a(Se,{className:"table-action-button view",size:"small",variant:"outlined",sx:{fontSize:"10px",padding:"1px 6px",minWidth:"36px",height:"22px",borderColor:"#e4e6ef",color:"#7e8299","&:hover":{backgroundColor:"#f5f8fa",borderColor:"#d6d6e0"}},onClick:ee=>{ee.stopPropagation(),R(K)},children:"상세보기"})})}),(T||I)&&a(ye,{className:"table-cell",sx:{width:"10%"},children:a(Ct,{size:"small",onClick:ee=>{ee.stopPropagation(),q(K.id,ee)},children:S[K.id]?a(eE,{fontSize:"small"}):a(lo,{fontSize:"small"})})})]}),(T||I)&&S[K.id]&&a(mn,{children:a(ye,{colSpan:I?3:4,sx:{padding:0,border:0},children:a(Is,{in:S[K.id],timeout:"auto",unmountOnExit:!0,children:m(j,{sx:{margin:2},children:[I&&m(bn,{children:[m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:"bold"},children:"접속 상태:"}),m(j,{sx:{display:"flex",alignItems:"center"},children:[a(j,{className:`online-status-indicator ${K.isOnline?"online":""}`,sx:{mr:1}}),a(M,{variant:"body2",children:K.isOnline?"온라인":"오프라인"})]})]}),m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:"bold"},children:"로그인 위치:"}),a(M,{variant:"body2",children:K.loginLocation})]}),m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:"bold"},children:"세션 시간:"}),a(M,{variant:"body2",children:j0(K.sessionTime)})]})]}),(T||I)&&m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,color:"#5e6278"},children:"디바이스:"}),m(j,{sx:{display:"flex",alignItems:"center"},children:[F0(K.deviceType),a(M,{variant:"body2",sx:{ml:1},children:K.deviceType})]})]}),a(j,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:a(Se,{className:"table-action-button view",size:"small",variant:"outlined",sx:{fontSize:"11px",padding:"2px 8px",minWidth:"60px",height:"26px",borderColor:"#e4e6ef",color:"#7e8299"},onClick:ee=>{ee.stopPropagation(),R(K)},children:"상세보기"})})]})})})})]},K.id)):a(mn,{children:a(ye,{colSpan:I?3:T?4:7,className:"table-empty-state",children:"검색 결과가 없습니다."})})})]})}),m(j,{className:"table-footer",sx:{borderTop:"1px solid #E4E6EF",backgroundColor:"#F5F8FA",mt:"auto"},children:[a(j,{sx:{display:"flex",alignItems:"center",gap:1},children:m(M,{variant:"body2",sx:{color:"#a1a5b7",fontSize:"13px"},children:["페이지당 행: ",L]})}),a(tE,{count:Math.max(1,Math.ceil(i.length/L)),page:e,onChange:A,color:"primary",shape:"rounded",size:"small",showFirstButton:!0,showLastButton:!0,className:"table-pagination"})]}),a(Yn,{open:c,onClose:E,maxWidth:"sm",fullWidth:!0,className:"user-detail-dialog",children:s&&m(bn,{children:[a(Zn,{children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m(M,{variant:"h6",sx:{fontWeight:600,fontSize:"1.25rem"},children:[s.nickname," 사용자 상세 정보"]}),a(Ct,{onClick:E,size:"small",children:a(Sa,{fontSize:"small"})})]})}),a(Kn,{children:m(W,{container:!0,spacing:3,children:[m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"사용자 ID"}),a(M,{className:"detail-field-value",children:s.id})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"사용자 등급"}),a(M,{className:"detail-field-value",children:a(ut,{label:s.level,size:"small",className:`level-${s.level.toLowerCase()}`,sx:{height:"22px",fontSize:"11px"}})})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"접속 상태"}),a(M,{className:"detail-field-value",children:m(j,{className:"online-status",children:[a(j,{className:`online-status-indicator ${s.isOnline?"online":""}`}),a(M,{variant:"body2",className:`online-status-text ${s.isOnline?"online":""}`,children:s.isOnline?"온라인":"오프라인"})]})})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"로그인 시간"}),a(M,{className:"detail-field-value",children:s.loginTime})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"로그인 위치"}),a(M,{className:"detail-field-value",children:s.loginLocation})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{className:"detail-field-label",children:"디바이스"}),a(M,{className:"detail-field-value",children:m(j,{sx:{display:"flex",alignItems:"center"},children:[F0(s.deviceType),a(M,{variant:"body2",sx:{ml:1},children:s.deviceType==="mobile"?"모바일":s.deviceType==="tablet"?"태블릿":"데스크톱"})]})})]}),m(W,{item:!0,xs:12,children:[a(M,{className:"detail-field-label",children:"세션 시간"}),a(M,{className:"detail-field-value",children:j0(s.sessionTime)})]})]})}),m(nr,{children:[a(Se,{onClick:E,variant:"outlined",sx:{borderColor:"#eff2f5",color:"#7e8299",fontWeight:500,textTransform:"none",fontSize:"13px"},children:"닫기"}),a(Se,{className:"table-action-button transition",variant:"contained",sx:{fontWeight:500,textTransform:"none",fontSize:"13px"},children:"메세지 보내기"}),a(Se,{className:"table-action-button reset",variant:"contained",color:"error",sx:{fontWeight:500,textTransform:"none",fontSize:"13px"},children:"계정 잠금"})]})]})})]})},z0=[{name:"1일",입금액:4e6,출금액:24e5},{name:"2일",입금액:3e6,출금액:1398e3},{name:"3일",입금액:2e6,출금액:98e5},{name:"4일",입금액:278e4,출금액:3908e3},{name:"5일",입금액:189e4,출금액:48e5},{name:"6일",입금액:239e4,출금액:38e5},{name:"7일",입금액:349e4,출금액:43e5},{name:"8일",입금액:249e4,출금액:33e5},{name:"9일",입금액:229e4,출금액:23e5},{name:"10일",입금액:349e4,출금액:43e5},{name:"11일",입금액:319e4,출금액:23e5},{name:"12일",입금액:289e4,출금액:21e5},{name:"13일",입금액:349e4,출금액:31e5},{name:"14일",입금액:249e4,출금액:23e5}],Sne=({height:e=350})=>{const t=On(),n=i=>i>=1e8?`${(i/1e8).toFixed(1)}억`:i>=1e4?`${(i/1e4).toFixed(0)}만`:i,r=()=>{const i=Math.min(...z0.map(s=>Math.min(s.입금액,s.출금액))),o=Math.max(...z0.map(s=>Math.max(s.입금액,s.출금액)));return[i*.9,o*1.1]};return a(j,{sx:{width:"100%",height:e,display:"flex",flexDirection:"column"},children:a(VM,{width:"100%",height:"100%",children:m(Z$,{data:z0,margin:{top:20,right:30,left:20,bottom:20},children:[a(VC,{strokeDasharray:"3 3",stroke:t.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}),a(xh,{dataKey:"name",tick:{fontSize:11},stroke:t.palette.text.secondary,tickLine:!1,axisLine:{stroke:t.palette.divider}}),a(wh,{tickFormatter:n,tick:{fontSize:11},stroke:t.palette.text.secondary,tickLine:!1,axisLine:!1,domain:r()}),a(ui,{formatter:i=>[`${i.toLocaleString()}원`,""],labelFormatter:i=>`${i}`,contentStyle:{borderRadius:8,border:"none",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:12}}),a(Fo,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:12}}),a(vh,{y:0,stroke:t.palette.divider}),a(Vo,{type:"monotone",dataKey:"입금액",stroke:"#3699FF",strokeWidth:2.5,activeDot:{r:6,stroke:"#fff",strokeWidth:2},dot:{r:3,stroke:"#3699FF",strokeWidth:2,fill:"#fff"}}),a(Vo,{type:"monotone",dataKey:"출금액",stroke:"#F64E60",strokeWidth:2.5,activeDot:{r:6,stroke:"#fff",strokeWidth:2},dot:{r:3,stroke:"#F64E60",strokeWidth:2,fill:"#fff"}})]})})})},N0=[{name:"1일",베팅금액:8e6,당첨금액:74e5},{name:"2일",베팅금액:7e6,당첨금액:6398e3},{name:"3일",베팅금액:9e6,당첨금액:88e5},{name:"4일",베팅금액:878e4,당첨금액:7908e3},{name:"5일",베팅금액:789e4,당첨금액:68e5},{name:"6일",베팅금액:839e4,당첨금액:78e5},{name:"7일",베팅금액:949e4,당첨금액:83e5},{name:"8일",베팅금액:849e4,당첨금액:73e5},{name:"9일",베팅금액:729e4,당첨금액:63e5},{name:"10일",베팅금액:949e4,당첨금액:83e5},{name:"11일",베팅금액:819e4,당첨금액:73e5},{name:"12일",베팅금액:789e4,당첨금액:61e5},{name:"13일",베팅금액:949e4,당첨금액:81e5},{name:"14일",베팅금액:849e4,당첨금액:73e5}],Pne=({height:e=350})=>{const t=On(),n=i=>i>=1e8?`${(i/1e8).toFixed(1)}억`:i>=1e4?`${(i/1e4).toFixed(0)}만`:i,r=()=>{const i=Math.min(...N0.map(s=>Math.min(s.베팅금액,s.당첨금액))),o=Math.max(...N0.map(s=>Math.max(s.베팅금액,s.당첨금액)));return[i*.9,o*1.1]};return a(j,{sx:{width:"100%",height:e,display:"flex",flexDirection:"column"},children:a(VM,{width:"100%",height:"100%",children:m(Z$,{data:N0,margin:{top:20,right:30,left:20,bottom:20},children:[a(VC,{strokeDasharray:"3 3",stroke:t.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}),a(xh,{dataKey:"name",tick:{fontSize:11},stroke:t.palette.text.secondary,tickLine:!1,axisLine:{stroke:t.palette.divider}}),a(wh,{tickFormatter:n,tick:{fontSize:11},stroke:t.palette.text.secondary,tickLine:!1,axisLine:!1,domain:r()}),a(ui,{formatter:i=>[`${i.toLocaleString()}원`,""],labelFormatter:i=>`${i}`,contentStyle:{borderRadius:8,border:"none",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontSize:12}}),a(Fo,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:12}}),a(vh,{y:0,stroke:t.palette.divider}),a(Vo,{type:"monotone",dataKey:"베팅금액",stroke:"#8950FC",strokeWidth:2.5,activeDot:{r:6,stroke:"#fff",strokeWidth:2},dot:{r:3,stroke:"#8950FC",strokeWidth:2,fill:"#fff"}}),a(Vo,{type:"monotone",dataKey:"당첨금액",stroke:"#1BC5BD",strokeWidth:2.5,activeDot:{r:6,stroke:"#fff",strokeWidth:2},dot:{r:3,stroke:"#1BC5BD",strokeWidth:2,fill:"#fff"}})]})})})},kne=ip.WidthProvider(ip.Responsive),_ne=({loading:e})=>{const t=Kr();On();const n=zn(e5),r=zn(AB),i=u.useRef(null),o=u.useMemo(()=>n.filter(p=>p.visible),[n]),s=u.useMemo(()=>o.map(p=>p.id),[o]),l=u.useMemo(()=>s.includes("rolling-status"),[s]),c=u.useMemo(()=>s.includes("active-users"),[s]),d=u.useMemo(()=>s.includes("deposit-withdrawal-graph"),[s]),h=u.useMemo(()=>s.includes("betting-winning-graph"),[s]);u.useLayoutEffect(()=>{localStorage.removeItem("dashboardLayouts"),localStorage.removeItem("rgl-8");for(let p=0;p<localStorage.length;p++){const v=localStorage.key(p);v&&v.startsWith("rgl-")&&localStorage.removeItem(v)}},[]),u.useEffect(()=>{r&&(i.current=r)},[r]);const f=[{id:"bettingWinningComparison",title:"베팅/당첨금 금액 비교",items:[{id:"betting",title:"베팅금액",currentValue:975e5,previousValue:853e5},{id:"winning",title:"당첨금액",currentValue:9025e4,previousValue:7845e4}]},{id:"depositWithdrawalComparison",title:"입금/출금 금액 비교",items:[{id:"deposit",title:"입금액",currentValue:243e5,previousValue:2175e4},{id:"withdraw",title:"출금액",currentValue:185e5,previousValue:162e5}]},{id:"rollingAmountComparison",title:"롤링금 비교",items:[{id:"rolling",title:"롤링금액",currentValue:132e5,previousValue:121e5},{id:"rollingConversion",title:"롤링전환액",currentValue:865e4,previousValue:798e4}]}],g={lg:[{i:"bettingWinningComparison",x:0,y:0,w:4,h:2,static:!1},{i:"depositWithdrawalComparison",x:4,y:0,w:4,h:2,static:!1},{i:"rollingAmountComparison",x:8,y:0,w:4,h:2,static:!1},{i:"rolling-status",x:0,y:2,w:12,h:3.1,static:!1},{i:"active-users",x:0,y:5.1,w:12,h:3.1,static:!1},{i:"deposit-withdrawal-graph",x:0,y:8.2,w:12,h:3,static:!1},{i:"betting-winning-graph",x:0,y:11.2,w:12,h:3,static:!1}],md:[{i:"bettingWinningComparison",x:0,y:0,w:4,h:2.5,static:!1},{i:"depositWithdrawalComparison",x:4,y:0,w:4,h:2.5,static:!1},{i:"rollingAmountComparison",x:8,y:0,w:4,h:2.5,static:!1},{i:"rolling-status",x:0,y:3,w:12,h:3.1,static:!1},{i:"active-users",x:0,y:6.1,w:12,h:3.1,static:!1},{i:"deposit-withdrawal-graph",x:0,y:9.2,w:12,h:3,static:!1},{i:"betting-winning-graph",x:0,y:12.2,w:12,h:3,static:!1}],sm:[{i:"bettingWinningComparison",x:0,y:0,w:6,h:2.5,static:!1},{i:"depositWithdrawalComparison",x:6,y:0,w:6,h:2.5,static:!1},{i:"rollingAmountComparison",x:0,y:2,w:6,h:2.5,static:!1},{i:"rolling-status",x:0,y:8,w:12,h:3.1,static:!1},{i:"active-users",x:0,y:8,w:12,h:3.1,static:!1},{i:"deposit-withdrawal-graph",x:0,y:12,w:12,h:3,static:!1},{i:"betting-winning-graph",x:0,y:15,w:12,h:3,static:!1}],xs:[{i:"bettingWinningComparison",x:0,y:0,w:12,h:2.5,static:!1},{i:"depositWithdrawalComparison",x:0,y:2,w:12,h:2.5,static:!1},{i:"rollingAmountComparison",x:0,y:4,w:12,h:2.5,static:!1},{i:"rolling-status",x:0,y:6,w:12,h:3.1,static:!1},{i:"active-users",x:0,y:6,w:12,h:3.1,static:!1},{i:"deposit-withdrawal-graph",x:0,y:14,w:12,h:3,static:!1},{i:"betting-winning-graph",x:0,y:17,w:12,h:3,static:!1}]};u.useMemo(()=>{const p={lg:[],md:[],sm:[],xs:[]};return Object.keys(g).forEach(v=>{s.forEach(b=>{let P=null;r&&r[v]&&(P=r[v].find(k=>k.i===b)),P||(P=g[v].find(k=>k.i===b)),P&&p[v].push({i:P.i,x:P.x,y:P.y,w:P.w,h:P.h,static:P.static||!1})})}),p},[s,r]);const w=(p,v)=>{v&&(t(IB(v)),localStorage.setItem("dashboardLayouts",JSON.stringify(v)),i.current=v)},x=({title:p,items:v})=>a(Sn,{className:"comparison-card",sx:{height:"100%",width:"100%"},children:m(In,{sx:{p:0,height:"100%"},children:[a(j,{className:"comparison-card-header",children:a(M,{variant:"subtitle1",fontWeight:500,children:p})}),a(j,{className:"comparison-card-content",children:v.map((b,P)=>m(j,{className:"comparison-item",children:[a(M,{variant:"body2",className:"comparison-item-title",children:b.title}),m(j,{className:"comparison-values",children:[m(j,{className:"comparison-value-item",children:[a(M,{variant:"caption",className:"comparison-value-label",children:"당월"}),m(M,{variant:"subtitle2",className:"comparison-value current",children:["₩",b.currentValue.toLocaleString()]})]}),m(j,{className:"comparison-value-item",children:[a(M,{variant:"caption",className:"comparison-value-label",children:"전월"}),m(M,{variant:"subtitle2",className:"comparison-value previous",children:["₩",b.previousValue.toLocaleString()]})]})]})]},P))})]})});return a(j,{className:"dashboard-charts-container",sx:{width:"100%",maxWidth:"100%"},children:e?a(j,{className:"loading-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:a(ir,{})}):a(kne,{className:"dashboard-layout",layouts:g,breakpoints:{lg:1200,md:996,sm:768,xs:480},cols:{lg:12,md:12,sm:12,xs:12},rowHeight:150,containerPadding:[0,0],margin:[16,16],onLayoutChange:w,isDraggable:!0,isResizable:!0,useCSSTransforms:!0,draggableHandle:".comparison-card-header, .panel-header",style:{width:"100%"},compactType:null,preventCollision:!1,autoSize:!1,children:(()=>{const p=[];return f.filter(v=>s.includes(v.id)).forEach(v=>{p.push(a("div",{style:{height:"100%",width:"100%"},children:a(x,{title:v.title,items:v.items})},v.id))}),l&&p.push(a("div",{style:{height:"100%",width:"100%"},children:m(rt,{elevation:0,className:"dashboard-panel",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a(j,{className:"panel-header",children:a(M,{variant:"subtitle1",fontWeight:500,children:"롤링금 상태"})}),a(j,{sx:{height:"calc(100% - 40px)",width:"100%",overflow:"hidden"},children:a(vne,{})})]})},"rolling-status")),c&&p.push(a("div",{style:{height:"100%",width:"100%"},children:m(rt,{elevation:0,className:"dashboard-panel",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a(j,{className:"panel-header",children:a(M,{variant:"subtitle1",fontWeight:500,children:"접속자 현황"})}),a(j,{sx:{height:"calc(100% - 40px)",width:"100%",overflow:"hidden"},children:a(Cne,{})})]})},"active-users")),d&&p.push(a("div",{style:{height:"100%",width:"100%"},children:m(rt,{elevation:0,className:"dashboard-panel",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a(j,{className:"panel-header",children:a(M,{variant:"subtitle1",fontWeight:500,children:"입금/출금 그래프"})}),a(j,{className:"panel-content",sx:{height:"calc(100% - 40px)",width:"100%",overflow:"hidden"},children:a(Sne,{height:"100%"})})]})},"deposit-withdrawal-graph")),h&&p.push(a("div",{style:{height:"100%",width:"100%"},children:m(rt,{elevation:0,className:"dashboard-panel",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[a(j,{className:"panel-header",children:a(M,{variant:"subtitle1",fontWeight:500,children:"베팅/당첨금 그래프"})}),a(j,{className:"panel-content",sx:{height:"calc(100% - 40px)",width:"100%",overflow:"hidden"},children:a(Pne,{height:"100%"})})]})},"betting-winning-graph")),p})()})})},Tne=(e,t=3e4,n=!1)=>{const[r,i]=u.useState(t/1e3),[o,s]=u.useState(!1),l=u.useRef(null),c=u.useRef(null),d=u.useRef(Date.now()),h=u.useCallback(()=>{d.current=Date.now(),i(t/1e3)},[t]);return u.useEffect(()=>{if(l.current&&(clearInterval(l.current),l.current=null),c.current&&(clearInterval(c.current),c.current=null),!n||!t||t<=0){i(0);return}return i(Math.ceil(t/1e3)),c.current=setInterval(()=>{const f=Date.now()-d.current,g=Math.max(0,Math.ceil((t-f)/1e3));i(g)},1e3),l.current=setInterval(async()=>{if(!document.hidden){s(!0);try{await e(),d.current=Date.now(),i(Math.ceil(t/1e3))}catch{}finally{s(!1)}}},t),()=>{l.current&&(clearInterval(l.current),l.current=null),c.current&&(clearInterval(c.current),c.current=null)}},[e,t,n]),u.useEffect(()=>{const f=()=>{!document.hidden&&n&&t>0&&Date.now()-d.current>=t&&(e(),d.current=Date.now(),i(Math.ceil(t/1e3)))};return document.addEventListener("visibilitychange",f),()=>{document.removeEventListener("visibilitychange",f)}},[e,t,n]),{remainingTime:r,resetTimer:h,isRefreshing:o}},uf=(e,t=!0)=>{if(!e)return"-";try{let n;if(typeof e=="string")if(e.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)){const[s,l]=e.split(" ");n=new Date(`${s}T${l}`)}else e.includes("T")&&e.includes("Z")?n=new Date(e):n=new Date(e);else n=new Date(e);if(isNaN(n.getTime()))return"-";const r=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0");if(t){const s=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0"),c=String(n.getSeconds()).padStart(2,"0");return`${r}-${i}-${o} ${s}:${l}:${c}`}else return`${r}-${i}-${o}`}catch(n){return console.error("Date formatting error:",n),"-"}},Ine=()=>new Date().toISOString().split("T")[0],One=()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0]},Ane=()=>{const e=new Date,t=e.getDay(),n=t===0?-6:1-t,r=new Date(e);r.setDate(e.getDate()+n);const i=new Date(e.getFullYear(),e.getMonth(),1);return r<i?i.toISOString().split("T")[0]:r.toISOString().split("T")[0]},ej=e=>{const t=Ine();switch(e){case"daily":return{startDate:t,endDate:t};case"weekly":return{startDate:Ane(),endDate:t};case"monthly":return{startDate:One(),endDate:t};default:return{startDate:t,endDate:t}}};async function Dne(e="daily"){try{const{startDate:t,endDate:n}=ej(e);`${e}${t}${n}`;const r=await Pe.settlement.getDashboard({startDate:t,endDate:n});return r.data,r.data&&r.data.success&&r.data.data?r.data.data:r.data}catch(t){return console.error("❌ Dashboard Service: Error fetching settlement dashboard:",t.message),null}}async function Rne(){try{const e=await Pe.userStatus.getAll();return e.data,e.data&&e.data.success&&e.data.data?e.data.data:e.data}catch(e){return console.error("❌ Dashboard Service: Error fetching user status:",e.message),null}}async function Ene(e="daily"){try{if(e==="daily"){const t=await Pe.settlement.getTodaySettlement();return t.data,t.data&&t.data.success&&t.data.data?t.data.data:t.data}else{const{startDate:t,endDate:n}=ej(e);`${e}${t}${n}`;const r=await Pe.settlement.getDaily({startDate:t,endDate:n});return r.data,r.data&&r.data.success&&r.data.data?r.data.data:r.data}}catch(t){return console.error("❌ Dashboard Service: Error fetching system metrics:",t.message),null}}async function Mne(e="daily"){return await Dne(e)}async function Lne(){return await Rne()}async function $ne(e="daily"){return await Ene(e)}async function jne(e="daily"){try{const[t,n,r]=await Promise.all([Mne(e),Lne(),$ne(e)]),i={overview:t,userMetrics:n,systemStatus:r,period:e,timestamp:new Date().toISOString(),hasData:!!(t||n||r)};return i}catch(t){return console.error("❌ Dashboard Service: Error fetching all data:",t.message),{overview:null,userMetrics:null,systemStatus:null,period:e,timestamp:new Date().toISOString(),hasData:!1,error:t.message}}}new Date().toISOString();const Fne=()=>{const e=Kr(),t=zn(t5),n=zn(DB),i=(()=>{const I=sessionStorage.getItem("userInfo");if(I){const A=JSON.parse(I);return A.roleId||A.role_id||1}const L=localStorage.getItem("userInfo");if(L){const A=JSON.parse(L);return A.roleId||A.role_id||1}return 1})(),o=zn(I=>BB(I,i)),s=o&&o.includes(103),{agentLevels:l}=yo(),[c,d]=u.useState(!1),[h,f]=u.useState(null),[g,w]=u.useState(s?3e4:0),[x,y]=u.useState(s);u.useLayoutEffect(()=>{for(let I=0;I<localStorage.length;I++){const L=localStorage.key(I);L&&(L.startsWith("rgl-")||L.includes("Layout"))&&localStorage.removeItem(L)}},[]);const p=I=>{e(XE(I)),e(Gs(!0)),setTimeout(()=>{e(Gs(!1))},800)},v=()=>{for(let I=0;I<localStorage.length;I++){const L=localStorage.key(I);L&&(L.startsWith("rgl-")||L.includes("Layout"))&&localStorage.removeItem(L)}e(JE()),e(QE()),window.location.reload()},b=u.useCallback(async()=>{try{const I=await jne(t);f(I),I&&I.hasData}catch(I){console.error("❌ Dashboard: Error fetching API data:",I),f(null)}},[t]),P=async()=>{e(Gs(!0)),await b(),e(Gs(!1)),C&&C()},{remainingTime:k,resetTimer:C,isRefreshing:S}=Tne(b,g,x),_=I=>{if(!s){console.warn("자동 새로고침 권한이 없습니다.");return}const L=I.target.value;w(L),y(L!==0),localStorage.setItem("dashboardRefreshInterval",L)};u.useEffect(()=>{i&&e(Sf(i))},[i,e]),u.useEffect(()=>{if(s){const I=localStorage.getItem("dashboardRefreshInterval");if(I!==null){const L=parseInt(I,10);w(L),y(L>0)}else w(3e4),y(!0)}else w(0),y(!1)},[s]),u.useEffect(()=>{if(l&&l.length>0&&!c){const I=bB(l);e(kB({cards:I})),d(!0)}},[l,c,e]),u.useEffect(()=>{b()},[b]),u.useEffect(()=>{(async()=>{e(Gs(!0));try{await new Promise(L=>setTimeout(L,1e3))}catch(L){console.error("데이터 로드 오류:",L)}finally{e(Gs(!1))}})()},[e]);const T=u.useRef(null);return u.useEffect(()=>{const I=()=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{window.dispatchEvent(new Event("resize")),T.current=null},300)};return window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),T.current&&clearTimeout(T.current)}},[]),m(j,{className:"dashboard-container",sx:{width:"100%",maxWidth:"100%",overflowX:"hidden",p:3,position:"relative"},children:[a(rt,{className:"dashboard-header",elevation:1,sx:{width:"100%",mb:3,position:"relative",zIndex:10,p:2,borderRadius:"8px",boxShadow:"0px 0px 20px rgba(76, 87, 125, 0.05)",border:"1px solid #E4E6EF"},children:m(j,{className:"dashboard-title",sx:{display:"flex",flexDirection:"column"},children:[m(M,{variant:"h5",fontWeight:600,color:"#181C32",sx:{display:"flex",alignItems:"center"},children:["대시보드",a(Fn,{title:"대시보드에서는 사이트의 전반적인 통계와 현황을 확인할 수 있습니다. 각 카드는 드래그하여 위치를 변경할 수 있으며, 크기도 조절 가능합니다.",arrow:!0,placement:"right",children:a(Ct,{size:"small",sx:{ml:.5,color:"#5E6278",padding:"2px"},children:a(hd,{fontSize:"small"})})})]}),a(M,{variant:"body2",color:"#5E6278",mt:.5,children:"사이트 통계 및 현황을 한 눈에 확인하세요"})]})}),a(j,{className:"stats-cards-container",sx:{width:"100%",mb:2},children:a(OW,{loading:n,onRefresh:P,onResetLayout:v,apiData:h,refreshInterval:g,onIntervalChange:_,autoRefreshEnabled:x,remainingTime:k,isRefreshing:S,hasAutoRefreshPermission:s})}),a(yn,{sx:{my:3,borderColor:"#E4E6EF",borderWidth:"1px",width:"100%","&::before, &::after":{borderColor:"#E4E6EF"}}}),m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:4,mb:3,px:1},children:[m(M,{variant:"h5",fontWeight:600,color:"#181C32",sx:{display:"flex",alignItems:"center",position:"relative",paddingBottom:"8px","&::after":{content:'""',position:"absolute",bottom:0,left:0,width:"40px",height:"3px",backgroundColor:"#3699FF",borderRadius:"2px"}},children:["대시보드",a(Fn,{title:"다양한 통계 데이터를 차트로 시각화하여 보여줍니다. 각 차트는 사이트의 주요 지표와 추세를 파악하는데 도움이 됩니다. 기본 월별로 표기되며, 롤링금은 기본 누적된 금액으로 표시됩니다.",arrow:!0,placement:"right",children:a(Ct,{size:"small",sx:{ml:.5,color:"#5E6278",padding:"2px"},children:a(hd,{fontSize:"small"})})})]}),m(j,{sx:{display:"flex",alignItems:"center"},children:[m(ih,{size:"small",variant:"outlined",sx:{mr:2},children:[a(Se,{onClick:()=>p("daily"),variant:t==="daily"?"contained":"outlined",children:"일별"}),a(Se,{onClick:()=>p("weekly"),variant:t==="weekly"?"contained":"outlined",children:"주별"}),a(Se,{onClick:()=>p("monthly"),variant:t==="monthly"?"contained":"outlined",children:"월별"})]}),a(Fn,{title:"레이아웃 초기화",children:a(Ct,{onClick:v,size:"small",sx:{color:"#3699FF","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.04)"}},children:a(ah,{fontSize:"small"})})})]})]}),a(j,{className:"dashboard-charts-container",sx:{width:"100%"},children:a(_ne,{loading:n})})]})};var Nc={},FA;function zne(){if(FA)return Nc;FA=1;var e=ln();Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.default=void 0;var t=e(un()),n=cn();return Nc.default=(0,t.default)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),Nc}var Nne=zne();const Bne=vt(Nne);var Bc={},zA;function Hne(){if(zA)return Bc;zA=1;var e=ln();Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.default=void 0;var t=e(un()),n=cn();return Bc.default=(0,t.default)((0,n.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),Bc}var Wne=Hne();const qne=vt(Wne),Cn=({title:e,subtitle:t,onAddClick:n,onDisplayOptionsClick:r,onRefreshClick:i,showAddButton:o=!0,showDisplayOptionsButton:s=!0,showRefreshButton:l=!0,addButtonText:c="회원 추가",customActions:d,titleTabs:h,sx:f={}})=>{const[,g]=u.useState({}),{canUseButton:w}=zi();u.useEffect(()=>{const y=()=>{g({})};return window.addEventListener("permissionsUpdated",y),()=>{window.removeEventListener("permissionsUpdated",y)}},[]);const x=y=>{r&&r(y.currentTarget)};return m(rt,{elevation:0,className:"page-header",sx:{marginTop:"15px",marginBottom:"15px",paddingLeft:"20px",paddingRight:"20px",paddingTop:"15px",paddingBottom:"15px",display:"flex",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#fff",borderRadius:"8px !important",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.05) !important",...f},children:[m(j,{sx:{display:"flex",flexDirection:"column",flex:1},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[a(M,{variant:"h5",className:"page-title",sx:{fontWeight:600,fontSize:"20px",color:"#333"},children:e}),h&&a(j,{sx:{display:"flex",alignItems:"center"},children:h})]}),t&&a(M,{variant:"body2",sx:{color:"#666",fontSize:"14px",mt:.5},children:t})]}),m(j,{sx:{display:"flex",gap:"8px",alignItems:"center"},children:[o&&w("add-button")&&a(Se,{variant:"contained",color:"primary",startIcon:a(Bne,{}),onClick:n,size:"small",children:c}),d,s&&a(Se,{variant:"outlined",color:"primary",startIcon:a(qne,{}),onClick:x,size:"small",children:"표시 옵션"}),l&&a(Se,{variant:"outlined",color:"primary",startIcon:a(Ax,{}),onClick:i,size:"small",children:"새로고침"})]})]})};Cn.propTypes={title:re.string.isRequired,subtitle:re.string,onAddClick:re.func,onDisplayOptionsClick:re.func,onRefreshClick:re.func,showAddButton:re.bool,showDisplayOptionsButton:re.bool,showRefreshButton:re.bool,addButtonText:re.string,customActions:re.node,titleTabs:re.node,sx:re.object};const vn=({children:e,maxWidth:t="xl",spacing:n=3,sx:r={},...i})=>a(Xl,{maxWidth:t,className:"no-grid-padding",sx:{py:3,px:0,...r},...i,children:a(W,{container:!0,spacing:n,children:a(W,{item:!0,xs:12,children:e})})});var Hc={},NA;function Une(){if(NA)return Hc;NA=1;var e=ln();Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.default=void 0;var t=e(un()),n=cn();return Hc.default=(0,t.default)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),Hc}var Vne=Une();const Bo=vt(Vne);var Wc={},BA;function Gne(){if(BA)return Wc;BA=1;var e=ln();Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.default=void 0;var t=e(un()),n=cn();return Wc.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),Wc}var Kne=Gne();const Af=vt(Kne);var qc={},HA;function Yne(){if(HA)return qc;HA=1;var e=ln();Object.defineProperty(qc,"__esModule",{value:!0}),qc.default=void 0;var t=e(un()),n=cn();return qc.default=(0,t.default)((0,n.jsx)("path",{d:"M3 21h18v-2H3zM3 8v8l4-4zm8 9h10v-2H11zM3 3v2h18V3zm8 6h10V7H11zm0 4h10v-2H11z"}),"FormatIndentIncrease"),qc}var Xne=Yne();const Jne=vt(Xne);var Uc={},WA;function Qne(){if(WA)return Uc;WA=1;var e=ln();Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.default=void 0;var t=e(un()),n=cn();return Uc.default=(0,t.default)((0,n.jsx)("path",{d:"M11 17h10v-2H11zm-8-5 4 4V8zm0 9h18v-2H3zM3 3v2h18V3zm8 6h10V7H11zm0 4h10v-2H11z"}),"FormatIndentDecrease"),Uc}var Zne=Qne();const ere=vt(Zne),gn=({title:e="테이블",indentMode:t=!0,toggleIndentMode:n=()=>{},sequentialPageNumbers:r=!1,togglePageNumberMode:i=()=>{},hasPinnedColumns:o=!1,isGridReady:s=!1,toggleColumnPin:l=()=>{},searchText:c="",handleSearchChange:d=()=>{},handleClearSearch:h=()=>{},showIndentToggle:f=!1,showPageNumberToggle:g=!0,showColumnPinToggle:w=!0,showSearch:x=!0,searchPlaceholder:y="검색...",sx:p={}})=>m(j,{className:"table-header",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2.5,backgroundColor:"#f5f7fa",borderRadius:1.5,p:2.5,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)",...p},children:[m(j,{className:"table-title",sx:{display:"flex",alignItems:"center"},children:[a(M,{variant:"h6",sx:{mr:1,fontWeight:600,color:"#2c3e50",fontSize:"1.1rem"},children:e}),f&&a(Fn,{title:t?"들여쓰기 해제":"들여쓰기 적용",children:a(Ct,{size:"small",onClick:n,sx:{mr:1.5,padding:"4px",color:t?"primary.main":"text.secondary"},children:t?a(Jne,{fontSize:"small"}):a(ere,{fontSize:"small"})})}),g&&a(Fn,{title:"페이지 번호 표시 방식",children:a(Se,{variant:"outlined",size:"small",onClick:v=>{i&&i()},sx:{ml:2,fontSize:"0.75rem",textTransform:"none"},children:r?"연속 번호":"페이지별 번호"})}),w&&a(Fn,{title:o?"고정된 모든 컬럼을 해제합니다":"현재 선택한 컬럼을 좌측에 고정합니다",children:a("span",{style:{marginLeft:"8px"},children:a(Se,{variant:"outlined",size:"small",onClick:s?l:void 0,disabled:!s,sx:{fontSize:"0.75rem",textTransform:"none"},children:o?"컬럼고정해제":"컬럼고정"})})})]}),x&&a(j,{className:"table-actions",sx:{display:"flex",alignItems:"center",gap:1.5},children:a($e,{size:"small",placeholder:y,value:c,onChange:d,InputProps:{startAdornment:a(Dt,{position:"start",children:a(Bo,{fontSize:"small"})}),endAdornment:c?a(Dt,{position:"end",children:a(Ct,{"aria-label":"clear search",onClick:h,edge:"end",size:"small",children:a(Af,{fontSize:"small"})})}):null,sx:{bgcolor:"#ffffff",borderRadius:"25px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0",borderRadius:"25px"}}},sx:{width:"240px","& .MuiInputBase-root":{height:"36px",fontSize:"0.875rem",borderRadius:"25px"}}})})]});gn.propTypes={title:re.string,totalItems:re.number,countLabel:re.string,indentMode:re.bool,toggleIndentMode:re.func,sequentialPageNumbers:re.bool,togglePageNumberMode:re.func,hasPinnedColumns:re.bool,isGridReady:re.bool,toggleColumnPin:re.func,searchText:re.string,handleSearchChange:re.func,handleClearSearch:re.func,showIndentToggle:re.bool,showPageNumberToggle:re.bool,showColumnPinToggle:re.bool,showSearch:re.bool,searchPlaceholder:re.string,sx:re.object};var Vc={},qA;function tre(){if(qA)return Vc;qA=1;var e=ln();Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.default=void 0;var t=e(un()),n=cn();return Vc.default=(0,t.default)((0,n.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),Vc}var nre=tre();const rre=vt(nre),tj=({activeFilters:e={},handleFilterChange:t,filterOptions:n=[],showDateFilter:r=!0,handleOpenDateFilter:i,isDateFilterActive:o=!1,sx:s={}})=>{const l={backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e0e0e0"},c={"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-root":{height:"32px"},"& .MuiSelect-select":{minWidth:"auto",paddingLeft:"4px",paddingRight:"24px"}};return m(kr,{direction:"row",spacing:1,className:"table-filter-container",flexWrap:"wrap",alignItems:"center",sx:{mb:0,mr:2,gap:"8px",...s},children:[n&&n.length>0&&n.map(d=>!d.items||!Array.isArray(d.items)?null:a(j,{sx:l,children:a($e,{select:!0,size:"small",value:e[d.id]||"",onChange:h=>t(d.id,h.target.value),InputProps:{startAdornment:a(Dt,{position:"start",sx:{fontSize:"0.75rem",color:"#757575"},children:d.label}),sx:{fontSize:"0.75rem"}},SelectProps:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{maxHeight:300,zIndex:1400}},disablePortal:!0}},sx:c,children:d.items.map(h=>a(Me,{value:h.value,children:h.label},h.value))})},d.id)),r&&a(Se,{variant:o?"contained":"outlined",size:"small",startIcon:a(rre,{sx:{fontSize:"1rem"}}),onClick:d=>i&&i(d),sx:{height:"32px",minWidth:"auto",fontSize:"0.75rem",backgroundColor:o?"#1976d2":"#fff",color:o?"#fff":"#757575",borderColor:o?"#1976d2":"#e0e0e0","&:hover":{backgroundColor:o?"#1565c0":"#f5f5f5",borderColor:o?"#1565c0":"#ccc"}},children:"날짜 필터"})]})};tj.propTypes={activeFilters:re.object,handleFilterChange:re.func.isRequired,filterOptions:re.arrayOf(re.shape({id:re.string.isRequired,label:re.string.isRequired,items:re.arrayOf(re.shape({value:re.string.isRequired,label:re.string.isRequired})).isRequired})),showDateFilter:re.bool,handleOpenDateFilter:re.func,isDateFilterActive:re.bool,sx:re.object};const are=Gr(j)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"36px",borderRadius:"18px",padding:"0 4px",backgroundColor:e.palette.background.paper,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"})),df=Gr(Ct)(({theme:e})=>({padding:4,margin:"0 2px",color:e.palette.primary.main,"&.Mui-disabled":{color:e.palette.action.disabled},"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.04)"},width:"32px",height:"32px"})),B0=Gr(j,{shouldForwardProp:e=>e!=="active"})(({theme:e,active:t})=>({minWidth:"32px",width:"32px",height:"32px",margin:"0 2px",padding:0,borderRadius:"16px",fontSize:"0.875rem",fontWeight:t?"bold":"normal",color:t?e.palette.common.white:e.palette.primary.main,backgroundColor:t?e.palette.primary.main:"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:t?"default":"pointer","&:hover":{backgroundColor:t?e.palette.primary.dark:"rgba(25, 118, 210, 0.04)"}})),UA=Gr(M)(({theme:e})=>({padding:"0 4px",margin:"0 2px",minWidth:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:e.palette.text.secondary})),VA=Gr(Ct)(({theme:e})=>({padding:4,margin:"0 4px",color:e.palette.primary.main,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.04)"},width:"32px",height:"32px"})),ire=Gr(Zt)(({theme:e})=>({minWidth:80,marginRight:8,"& .MuiSelect-select":{padding:"4px 8px",fontSize:"0.875rem",backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:e.shape.borderRadius},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-root":{"& .MuiSelect-select":{backgroundColor:e.palette.action.hover}}})),ore=Gr(M)(({theme:e})=>({fontSize:"0.875rem",marginRight:8,color:e.palette.text.secondary})),nj=({count:e,page:t,rowsPerPage:n,onPageChange:r,onRowsPerPageChange:i,rowsPerPageOptions:o=[10,25,50,100],labelRowsPerPage:s="페이지당 행:",onExcelDownload:l,onPrint:c,showActionButtons:d=!0,showRowsPerPage:h=!0,sx:f={}})=>{const[,g]=u.useState({}),{canUseButton:w}=zi();u.useEffect(()=>{const D=()=>{g({})};return window.addEventListener("permissionsUpdated",D),()=>{window.removeEventListener("permissionsUpdated",D)}},[]);const[x,y]=u.useState(t),[p,v]=u.useState(Math.floor(t/5));u.useEffect(()=>{y(t),v(Math.floor(t/5))},[t]);const b=Math.max(1,Math.ceil(e/n)),P=p*5,k=Math.min(P+4,b-1),C=D=>{D!==x&&(r&&r(D),y(D))},S=()=>{x!==0&&(r&&r(0),y(0))},_=()=>{const D=b-1;x!==D&&(r&&r(D),y(D))},T=()=>{if(x===0)return;const D=x-1;r&&r(D),y(D)},I=()=>{const D=b-1;if(x===D)return;const B=x+1;r&&r(B),y(B)},L=D=>{const B=parseInt(D.target.value,10);i&&(i({target:{value:B}}),y(0),r&&r(0))},A=()=>{const D=[];P>0&&(D.push(a(B0,{active:x===0,onClick:()=>C(0),children:"1"},"page-0")),P>1&&D.push(a(UA,{children:"..."},"more-start")));for(let B=P;B<=k;B++){const $=B+1;D.push(a(B0,{active:x===B,onClick:()=>C(B),children:$},`page-${B}`))}return k<b-1&&(k<b-2&&D.push(a(UA,{children:"..."},"more-end")),D.push(a(B0,{active:x===b-1,onClick:()=>C(b-1),children:b},`page-${b-1}`))),D};return m(j,{className:"table-pagination-container",sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",gap:2,...f},children:[h&&m(j,{sx:{display:"flex",alignItems:"center"},children:[a(ore,{children:s}),a(ire,{size:"small",children:a(an,{value:n,onChange:L,size:"small",variant:"outlined",MenuProps:{PaperProps:{sx:{mt:.5,boxShadow:"0 2px 10px rgba(0, 0, 0, 0.15)"}}},sx:{"& .MuiSelect-select":{px:2,py:.5,minHeight:"32px"}},children:o.map(D=>a(Me,{value:D,sx:{fontSize:"0.875rem",py:.75,minHeight:"auto"},children:D},D))})}),a(M,{variant:"body2",sx:{color:"text.secondary",ml:1,minWidth:"120px"},children:e>0?`${t*n+1}-${Math.min(e,(t+1)*n)} / ${e}`:"0-0 / 0"})]}),m(are,{children:[a(df,{onClick:S,disabled:x===0,size:"small",children:a(kF,{fontSize:"small"})}),a(df,{onClick:T,disabled:x===0,size:"small",children:a(_F,{fontSize:"small"})}),A(),a(df,{onClick:I,disabled:x===b-1,size:"small",children:a(TF,{fontSize:"small"})}),a(df,{onClick:_,disabled:x===b-1,size:"small",children:a(IF,{fontSize:"small"})})]}),d&&m(j,{sx:{display:"flex",alignItems:"center"},children:[l&&w("export-excel")&&a(Fn,{title:"엑셀 다운로드",children:a(VA,{onClick:l,size:"small",children:a(OF,{fontSize:"small"})})}),c&&w("print-button")&&a(Fn,{title:"인쇄하기",children:a(VA,{onClick:c,size:"small",children:a(AF,{fontSize:"small"})})})]})]})};nj.propTypes={count:re.number.isRequired,page:re.number.isRequired,rowsPerPage:re.number.isRequired,onPageChange:re.func.isRequired,onRowsPerPageChange:re.func,rowsPerPageOptions:re.array,labelRowsPerPage:re.string,onExcelDownload:re.func,onPrint:re.func,showActionButtons:re.bool,showRowsPerPage:re.bool,sx:re.object};var Df={exports:{}},sre=Df.exports,GA;function lre(){return GA||(GA=1,function(e,t){(function(n,r){e.exports=r()})(sre,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",l="minute",c="hour",d="day",h="week",f="month",g="quarter",w="year",x="date",y="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var N=["th","st","nd","rd"],F=$%100;return"["+$+(N[(F-20)%10]||N[F]||N[0])+"]"}},P=function($,N,F){var O=String($);return!O||O.length>=N?$:""+Array(N+1-O.length).join(F)+$},k={s:P,z:function($){var N=-$.utcOffset(),F=Math.abs(N),O=Math.floor(F/60),R=F%60;return(N<=0?"+":"-")+P(O,2,"0")+":"+P(R,2,"0")},m:function $(N,F){if(N.date()<F.date())return-$(F,N);var O=12*(F.year()-N.year())+(F.month()-N.month()),R=N.clone().add(O,f),E=F-R<0,z=N.clone().add(O+(E?-1:1),f);return+(-(O+(F-R)/(E?R-z:z-R))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:w,w:h,d,D:x,h:c,m:l,s,ms:o,Q:g}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},C="en",S={};S[C]=b;var _="$isDayjsObject",T=function($){return $ instanceof D||!(!$||!$[_])},I=function $(N,F,O){var R;if(!N)return C;if(typeof N=="string"){var E=N.toLowerCase();S[E]&&(R=E),F&&(S[E]=F,R=E);var z=N.split("-");if(!R&&z.length>1)return $(z[0])}else{var q=N.name;S[q]=N,R=q}return!O&&R&&(C=R),R||!O&&C},L=function($,N){if(T($))return $.clone();var F=typeof N=="object"?N:{};return F.date=$,F.args=arguments,new D(F)},A=k;A.l=I,A.i=T,A.w=function($,N){return L($,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var D=function(){function $(F){this.$L=I(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[_]=!0}var N=$.prototype;return N.parse=function(F){this.$d=function(O){var R=O.date,E=O.utc;if(R===null)return new Date(NaN);if(A.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var z=R.match(p);if(z){var q=z[2]-1||0,X=(z[7]||"0").substring(0,3);return E?new Date(Date.UTC(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,X)):new Date(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,X)}}return new Date(R)}(F),this.init()},N.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},N.$utils=function(){return A},N.isValid=function(){return this.$d.toString()!==y},N.isSame=function(F,O){var R=L(F);return this.startOf(O)<=R&&R<=this.endOf(O)},N.isAfter=function(F,O){return L(F)<this.startOf(O)},N.isBefore=function(F,O){return this.endOf(O)<L(F)},N.$g=function(F,O,R){return A.u(F)?this[O]:this.set(R,F)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(F,O){var R=this,E=!!A.u(O)||O,z=A.p(F),q=function(Q,te){var U=A.w(R.$u?Date.UTC(R.$y,te,Q):new Date(R.$y,te,Q),R);return E?U:U.endOf(d)},X=function(Q,te){return A.w(R.toDate()[Q].apply(R.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(te)),R)},H=this.$W,K=this.$M,ee=this.$D,ge="set"+(this.$u?"UTC":"");switch(z){case w:return E?q(1,0):q(31,11);case f:return E?q(1,K):q(0,K+1);case h:var oe=this.$locale().weekStart||0,G=(H<oe?H+7:H)-oe;return q(E?ee-G:ee+(6-G),K);case d:case x:return X(ge+"Hours",0);case c:return X(ge+"Minutes",1);case l:return X(ge+"Seconds",2);case s:return X(ge+"Milliseconds",3);default:return this.clone()}},N.endOf=function(F){return this.startOf(F,!1)},N.$set=function(F,O){var R,E=A.p(F),z="set"+(this.$u?"UTC":""),q=(R={},R[d]=z+"Date",R[x]=z+"Date",R[f]=z+"Month",R[w]=z+"FullYear",R[c]=z+"Hours",R[l]=z+"Minutes",R[s]=z+"Seconds",R[o]=z+"Milliseconds",R)[E],X=E===d?this.$D+(O-this.$W):O;if(E===f||E===w){var H=this.clone().set(x,1);H.$d[q](X),H.init(),this.$d=H.set(x,Math.min(this.$D,H.daysInMonth())).$d}else q&&this.$d[q](X);return this.init(),this},N.set=function(F,O){return this.clone().$set(F,O)},N.get=function(F){return this[A.p(F)]()},N.add=function(F,O){var R,E=this;F=Number(F);var z=A.p(O),q=function(K){var ee=L(E);return A.w(ee.date(ee.date()+Math.round(K*F)),E)};if(z===f)return this.set(f,this.$M+F);if(z===w)return this.set(w,this.$y+F);if(z===d)return q(1);if(z===h)return q(7);var X=(R={},R[l]=r,R[c]=i,R[s]=n,R)[z]||1,H=this.$d.getTime()+F*X;return A.w(H,this)},N.subtract=function(F,O){return this.add(-1*F,O)},N.format=function(F){var O=this,R=this.$locale();if(!this.isValid())return R.invalidDate||y;var E=F||"YYYY-MM-DDTHH:mm:ssZ",z=A.z(this),q=this.$H,X=this.$m,H=this.$M,K=R.weekdays,ee=R.months,ge=R.meridiem,oe=function(te,U,V,ae){return te&&(te[U]||te(O,E))||V[U].slice(0,ae)},G=function(te){return A.s(q%12||12,te,"0")},Q=ge||function(te,U,V){var ae=te<12?"AM":"PM";return V?ae.toLowerCase():ae};return E.replace(v,function(te,U){return U||function(V){switch(V){case"YY":return String(O.$y).slice(-2);case"YYYY":return A.s(O.$y,4,"0");case"M":return H+1;case"MM":return A.s(H+1,2,"0");case"MMM":return oe(R.monthsShort,H,ee,3);case"MMMM":return oe(ee,H);case"D":return O.$D;case"DD":return A.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return oe(R.weekdaysMin,O.$W,K,2);case"ddd":return oe(R.weekdaysShort,O.$W,K,3);case"dddd":return K[O.$W];case"H":return String(q);case"HH":return A.s(q,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return Q(q,X,!0);case"A":return Q(q,X,!1);case"m":return String(X);case"mm":return A.s(X,2,"0");case"s":return String(O.$s);case"ss":return A.s(O.$s,2,"0");case"SSS":return A.s(O.$ms,3,"0");case"Z":return z}return null}(te)||z.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(F,O,R){var E,z=this,q=A.p(O),X=L(F),H=(X.utcOffset()-this.utcOffset())*r,K=this-X,ee=function(){return A.m(z,X)};switch(q){case w:E=ee()/12;break;case f:E=ee();break;case g:E=ee()/3;break;case h:E=(K-H)/6048e5;break;case d:E=(K-H)/864e5;break;case c:E=K/i;break;case l:E=K/r;break;case s:E=K/n;break;default:E=K}return R?E:A.a(E)},N.daysInMonth=function(){return this.endOf(f).$D},N.$locale=function(){return S[this.$L]},N.locale=function(F,O){if(!F)return this.$L;var R=this.clone(),E=I(F,O,!0);return E&&(R.$L=E),R},N.clone=function(){return A.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},$}(),B=D.prototype;return L.prototype=B,[["$ms",o],["$s",s],["$m",l],["$H",c],["$W",d],["$M",f],["$y",w],["$D",x]].forEach(function($){B[$[1]]=function(N){return this.$g(N,$[0],$[1])}}),L.extend=function($,N){return $.$i||($(N,D,L),$.$i=!0),L},L.locale=I,L.isDayjs=T,L.unix=function($){return L(1e3*$)},L.en=S[C],L.Ls=S,L.p={},L})}(Df)),Df.exports}var cre=lre();const Hr=vt(cre);var Rf={exports:{}},ure=Rf.exports,KA;function dre(){return KA||(KA=1,function(e,t){(function(n,r){e.exports=r()})(ure,function(){var n="week",r="year";return function(i,o,s){var l=o.prototype;l.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var d=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var h=s(this).startOf(r).add(1,r).date(d),f=s(this).endOf(n);if(h.isBefore(f))return 1}var g=s(this).startOf(r).date(d).startOf(n).subtract(1,"millisecond"),w=this.diff(g,n,!0);return w<0?s(this).startOf("week").week():Math.ceil(w)},l.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})}(Rf)),Rf.exports}var hre=dre();const fre=vt(hre);var Ef={exports:{}},pre=Ef.exports,YA;function gre(){return YA||(YA=1,function(e,t){(function(n,r){e.exports=r()})(pre,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,o=/\d\d/,s=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,c={},d=function(p){return(p=+p)+(p>68?1900:2e3)},h=function(p){return function(v){this[p]=+v}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var b=v.match(/([+-]|\d\d)/g),P=60*b[1]+(+b[2]||0);return P===0?0:b[0]==="+"?-P:P}(p)}],g=function(p){var v=c[p];return v&&(v.indexOf?v:v.s.concat(v.f))},w=function(p,v){var b,P=c.meridiem;if(P){for(var k=1;k<=24;k+=1)if(p.indexOf(P(k,0,v))>-1){b=k>12;break}}else b=p===(v?"pm":"PM");return b},x={A:[l,function(p){this.afternoon=w(p,!1)}],a:[l,function(p){this.afternoon=w(p,!0)}],Q:[i,function(p){this.month=3*(p-1)+1}],S:[i,function(p){this.milliseconds=100*+p}],SS:[o,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[s,h("seconds")],ss:[s,h("seconds")],m:[s,h("minutes")],mm:[s,h("minutes")],H:[s,h("hours")],h:[s,h("hours")],HH:[s,h("hours")],hh:[s,h("hours")],D:[s,h("day")],DD:[o,h("day")],Do:[l,function(p){var v=c.ordinal,b=p.match(/\d+/);if(this.day=b[0],v)for(var P=1;P<=31;P+=1)v(P).replace(/\[|\]/g,"")===p&&(this.day=P)}],w:[s,h("week")],ww:[o,h("week")],M:[s,h("month")],MM:[o,h("month")],MMM:[l,function(p){var v=g("months"),b=(g("monthsShort")||v.map(function(P){return P.slice(0,3)})).indexOf(p)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[l,function(p){var v=g("months").indexOf(p)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,h("year")],YY:[o,function(p){this.year=d(p)}],YYYY:[/\d{4}/,h("year")],Z:f,ZZ:f};function y(p){var v,b;v=p,b=c&&c.formats;for(var P=(p=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(L,A,D){var B=D&&D.toUpperCase();return A||b[D]||n[D]||b[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function($,N,F){return N||F.slice(1)})})).match(r),k=P.length,C=0;C<k;C+=1){var S=P[C],_=x[S],T=_&&_[0],I=_&&_[1];P[C]=I?{regex:T,parser:I}:S.replace(/^\[|\]$/g,"")}return function(L){for(var A={},D=0,B=0;D<k;D+=1){var $=P[D];if(typeof $=="string")B+=$.length;else{var N=$.regex,F=$.parser,O=L.slice(B),R=N.exec(O)[0];F.call(A,R),L=L.replace(R,"")}}return function(E){var z=E.afternoon;if(z!==void 0){var q=E.hours;z?q<12&&(E.hours+=12):q===12&&(E.hours=0),delete E.afternoon}}(A),A}}return function(p,v,b){b.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(d=p.parseTwoDigitYear);var P=v.prototype,k=P.parse;P.parse=function(C){var S=C.date,_=C.utc,T=C.args;this.$u=_;var I=T[1];if(typeof I=="string"){var L=T[2]===!0,A=T[3]===!0,D=L||A,B=T[2];A&&(B=T[2]),c=this.$locale(),!L&&B&&(c=b.Ls[B]),this.$d=function(O,R,E,z){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*O);var q=y(R)(O),X=q.year,H=q.month,K=q.day,ee=q.hours,ge=q.minutes,oe=q.seconds,G=q.milliseconds,Q=q.zone,te=q.week,U=new Date,V=K||(X||H?1:U.getDate()),ae=X||U.getFullYear(),ne=0;X&&!H||(ne=H>0?H-1:U.getMonth());var me,ue=ee||0,Ae=ge||0,we=oe||0,ce=G||0;return Q?new Date(Date.UTC(ae,ne,V,ue,Ae,we,ce+60*Q.offset*1e3)):E?new Date(Date.UTC(ae,ne,V,ue,Ae,we,ce)):(me=new Date(ae,ne,V,ue,Ae,we,ce),te&&(me=z(me).week(te).toDate()),me)}catch{return new Date("")}}(S,I,_,b),this.init(),B&&B!==!0&&(this.$L=this.locale(B).$L),D&&S!=this.format(I)&&(this.$d=new Date("")),c={}}else if(I instanceof Array)for(var $=I.length,N=1;N<=$;N+=1){T[1]=I[N-1];var F=b.apply(this,T);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}N===$&&(this.$d=new Date(""))}else k.call(this,C)}}})}(Ef)),Ef.exports}var mre=gre();const yre=vt(mre);var Mf={exports:{}},bre=Mf.exports,XA;function vre(){return XA||(XA=1,function(e,t){(function(n,r){e.exports=r()})(bre,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,o){var s=i.prototype,l=s.format;o.en.formats=n,s.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,h=function(f,g){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(w,x,y){var p=y&&y.toUpperCase();return x||g[y]||n[y]||g[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,b,P){return b||P.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,h)}}})}(Mf)),Mf.exports}var xre=vre();const wre=vt(xre);var Lf={exports:{}},Cre=Lf.exports,JA;function Sre(){return JA||(JA=1,function(e,t){(function(n,r){e.exports=r()})(Cre,function(){return function(n,r,i){r.prototype.isBetween=function(o,s,l,c){var d=i(o),h=i(s),f=(c=c||"()")[0]==="(",g=c[1]===")";return(f?this.isAfter(d,l):!this.isBefore(d,l))&&(g?this.isBefore(h,l):!this.isAfter(h,l))||(f?this.isBefore(d,l):!this.isAfter(d,l))&&(g?this.isAfter(h,l):!this.isBefore(h,l))}}})}(Lf)),Lf.exports}var Pre=Sre();const kre=vt(Pre);Hr.extend(yre);Hr.extend(wre);Hr.extend(kre);const _re=DF(["Your locale has not been found.","Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale","Or you forget to import the locale from 'dayjs/locale/{localeUsed}'","fallback on English locale"]),Tre={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Ire={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",fullDateWithWeekday:"dddd, LL",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",monthAndYear:"MMMM YYYY",monthAndDate:"MMMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",fullDateTime:"lll",fullDateTime12h:"ll hh:mm A",fullDateTime24h:"ll HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},H0=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),QA=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),Ore=(e,t)=>t?(...n)=>e(...n).locale(t):e;class Are{constructor({locale:t,formats:n,instance:r}={}){var i;this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.rawDayJsInstance=void 0,this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=Tre,this.setLocaleToValue=o=>{const s=this.getCurrentLocaleCode();return s===o.locale()?o:o.locale(s)},this.hasUTCPlugin=()=>typeof Hr.utc<"u",this.hasTimezonePlugin=()=>typeof Hr.tz<"u",this.isSame=(o,s,l)=>{const c=this.setTimezone(s,this.getTimezone(o));return o.format(l)===c.format(l)},this.cleanTimezone=o=>{switch(o){case"default":return;case"system":return Hr.tz.guess();default:return o}},this.createSystemDate=o=>{if(this.rawDayJsInstance)return this.rawDayJsInstance(o);if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const s=Hr.tz.guess();return s!=="UTC"?Hr.tz(o,s):Hr(o)}return Hr(o)},this.createUTCDate=o=>{if(!this.hasUTCPlugin())throw new Error(H0);return Hr.utc(o)},this.createTZDate=(o,s)=>{if(!this.hasUTCPlugin())throw new Error(H0);if(!this.hasTimezonePlugin())throw new Error(QA);const l=o!==void 0&&!o.endsWith("Z");return Hr(o).tz(this.cleanTimezone(s),l)},this.getLocaleFormats=()=>{const o=Hr.Ls,s=this.locale||"en";let l=o[s];return l===void 0&&(_re(),l=o.en),l.formats},this.adjustOffset=o=>{if(!this.hasTimezonePlugin())return o;const s=this.getTimezone(o);if(s!=="UTC"){var l,c;const d=o.tz(this.cleanTimezone(s),!0);if(((l=d.$offset)!=null?l:0)===((c=o.$offset)!=null?c:0))return o;o.$offset=d.$offset}return o},this.date=o=>o===null?null:this.dayjs(o),this.dateWithTimezone=(o,s)=>{if(o===null)return null;let l;return s==="UTC"?l=this.createUTCDate(o):s==="system"||s==="default"&&!this.hasTimezonePlugin()?l=this.createSystemDate(o):l=this.createTZDate(o,s),this.locale===void 0?l:l.locale(this.locale)},this.getTimezone=o=>{if(this.hasTimezonePlugin()){var s;const l=(s=o.$x)==null?void 0:s.$timezone;if(l)return l}return this.hasUTCPlugin()&&o.isUTC()?"UTC":"system"},this.setTimezone=(o,s)=>{if(this.getTimezone(o)===s)return o;if(s==="UTC"){if(!this.hasUTCPlugin())throw new Error(H0);return o.utc()}if(s==="system")return o.local();if(!this.hasTimezonePlugin()){if(s==="default")return o;throw new Error(QA)}return Hr.tz(o,this.cleanTimezone(s))},this.toJsDate=o=>o.toDate(),this.parseISO=o=>this.dayjs(o),this.toISO=o=>o.toISOString(),this.parse=(o,s)=>o===""?null:this.dayjs(o,s,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=o=>{const s=this.getLocaleFormats(),l=c=>c.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(d,h,f)=>h||f.slice(1));return o.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(c,d,h)=>{const f=h&&h.toUpperCase();return d||s[h]||l(s[f])})},this.getFormatHelperText=o=>this.expandFormat(o).replace(/a/gi,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.isValid=o=>this.dayjs(o).isValid(),this.format=(o,s)=>this.formatByString(o,this.formats[s]),this.formatByString=(o,s)=>this.dayjs(o).format(s),this.formatNumber=o=>o,this.getDiff=(o,s,l)=>o.diff(s,l),this.isEqual=(o,s)=>o===null&&s===null?!0:this.dayjs(o).toDate().getTime()===this.dayjs(s).toDate().getTime(),this.isSameYear=(o,s)=>this.isSame(o,s,"YYYY"),this.isSameMonth=(o,s)=>this.isSame(o,s,"YYYY-MM"),this.isSameDay=(o,s)=>this.isSame(o,s,"YYYY-MM-DD"),this.isSameHour=(o,s)=>o.isSame(s,"hour"),this.isAfter=(o,s)=>o>s,this.isAfterYear=(o,s)=>this.hasUTCPlugin()?!this.isSameYear(o,s)&&o.utc()>s.utc():o.isAfter(s,"year"),this.isAfterDay=(o,s)=>this.hasUTCPlugin()?!this.isSameDay(o,s)&&o.utc()>s.utc():o.isAfter(s,"day"),this.isBefore=(o,s)=>o<s,this.isBeforeYear=(o,s)=>this.hasUTCPlugin()?!this.isSameYear(o,s)&&o.utc()<s.utc():o.isBefore(s,"year"),this.isBeforeDay=(o,s)=>this.hasUTCPlugin()?!this.isSameDay(o,s)&&o.utc()<s.utc():o.isBefore(s,"day"),this.isWithinRange=(o,[s,l])=>o>=s&&o<=l,this.startOfYear=o=>this.adjustOffset(o.startOf("year")),this.startOfMonth=o=>this.adjustOffset(o.startOf("month")),this.startOfWeek=o=>this.adjustOffset(o.startOf("week")),this.startOfDay=o=>this.adjustOffset(o.startOf("day")),this.endOfYear=o=>this.adjustOffset(o.endOf("year")),this.endOfMonth=o=>this.adjustOffset(o.endOf("month")),this.endOfWeek=o=>this.adjustOffset(o.endOf("week")),this.endOfDay=o=>this.adjustOffset(o.endOf("day")),this.addYears=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"year"):o.add(s,"year")),this.addMonths=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"month"):o.add(s,"month")),this.addWeeks=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"week"):o.add(s,"week")),this.addDays=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"day"):o.add(s,"day")),this.addHours=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"hour"):o.add(s,"hour")),this.addMinutes=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"minute"):o.add(s,"minute")),this.addSeconds=(o,s)=>this.adjustOffset(s<0?o.subtract(Math.abs(s),"second"):o.add(s,"second")),this.getYear=o=>o.year(),this.getMonth=o=>o.month(),this.getDate=o=>o.date(),this.getHours=o=>o.hour(),this.getMinutes=o=>o.minute(),this.getSeconds=o=>o.second(),this.getMilliseconds=o=>o.millisecond(),this.setYear=(o,s)=>this.adjustOffset(o.set("year",s)),this.setMonth=(o,s)=>this.adjustOffset(o.set("month",s)),this.setDate=(o,s)=>this.adjustOffset(o.set("date",s)),this.setHours=(o,s)=>this.adjustOffset(o.set("hour",s)),this.setMinutes=(o,s)=>this.adjustOffset(o.set("minute",s)),this.setSeconds=(o,s)=>this.adjustOffset(o.set("second",s)),this.setMilliseconds=(o,s)=>this.adjustOffset(o.set("millisecond",s)),this.getDaysInMonth=o=>o.daysInMonth(),this.getNextMonth=o=>this.addMonths(o,1),this.getPreviousMonth=o=>this.addMonths(o,-1),this.getMonthArray=o=>{const l=[o.startOf("year")];for(;l.length<12;){const c=l[l.length-1];l.push(this.addMonths(c,1))}return l},this.mergeDateAndTime=(o,s)=>o.hour(s.hour()).minute(s.minute()).second(s.second()),this.getWeekdays=()=>{const o=this.dayjs().startOf("week");return[0,1,2,3,4,5,6].map(s=>this.formatByString(this.addDays(o,s),"dd"))},this.getWeekArray=o=>{const s=this.setLocaleToValue(o),l=s.startOf("month").startOf("week"),c=s.endOf("month").endOf("week");let d=0,h=l;const f=[];for(;h<c;){const g=Math.floor(d/7);f[g]=f[g]||[],f[g].push(h),h=this.addDays(h,1),d+=1}return f},this.getWeekNumber=o=>o.week(),this.getYearRange=(o,s)=>{const l=o.startOf("year"),c=s.endOf("year"),d=[];let h=l;for(;h<c;)d.push(h),h=this.addYears(h,1);return d},this.getMeridiemText=o=>o==="am"?"AM":"PM",this.rawDayJsInstance=r,this.dayjs=Ore((i=this.rawDayJsInstance)!=null?i:Hr,t),this.locale=t,this.formats=pt({},Ire,n),Hr.extend(fre)}}var Gc={},ZA;function Dre(){if(ZA)return Gc;ZA=1;var e=ln();Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.default=void 0;var t=e(un()),n=cn();return Gc.default=(0,t.default)([(0,n.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,n.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),Gc}var Rre=Dre();const Ere=vt(Rre),GC=({anchorEl:e,onClose:t,startDate:n,handleStartDateChange:r,endDate:i,handleEndDateChange:o,handleQuickDateSelect:s,applyDateFilter:l,resetDateFilter:c,quickSelectOptions:d=[{label:"오늘",value:"today"},{label:"어제",value:"yesterday"},{label:"이번 주",value:"thisWeek"},{label:"지난 주",value:"lastWeek"},{label:"이번 달",value:"thisMonth"}],sx:h={}})=>a(qf,{open:!!e,anchorEl:e,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{elevation:3,sx:{p:2,width:"380px",mt:.5,borderRadius:"8px",...h}},children:a(co,{dateAdapter:Are,children:m(kr,{spacing:2,children:[a(M,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"날짜 필터링"}),a(j,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:d.map(f=>a(ut,{label:f.label,onClick:()=>s(f.value),variant:"outlined",size:"small",sx:{borderRadius:"4px",cursor:"pointer","&:hover":{backgroundColor:"#f0f7ff",borderColor:"#90caf9"}}},f.value))}),m(kr,{direction:"row",spacing:2,alignItems:"center",children:[a(Wf,{slotProps:{textField:{size:"small",label:"시작일"}},value:n,onChange:r,format:"YYYY-MM-DD HH:mm"}),a(M,{variant:"body2",sx:{color:"#757575"},children:"~"}),a(Wf,{slotProps:{textField:{size:"small",label:"종료일"}},value:i,onChange:o,format:"YYYY-MM-DD HH:mm"})]}),n&&i&&m(j,{sx:{display:"flex",alignItems:"center",backgroundColor:"#f5f5f5",p:1.5,borderRadius:"4px",gap:1},children:[a(Ere,{color:"action",fontSize:"small"}),m(M,{variant:"body2",sx:{flex:1},children:[n.format("YYYY-MM-DD HH:mm")," ~ ",i.format("YYYY-MM-DD HH:mm")]})]}),m(kr,{direction:"row",spacing:1,justifyContent:"flex-end",children:[a(Se,{variant:"outlined",size:"small",onClick:c,sx:{minWidth:"80px"},children:"초기화"}),a(Se,{variant:"contained",size:"small",onClick:l,sx:{minWidth:"80px"},children:"적용"})]})]})})});GC.propTypes={anchorEl:re.object,onClose:re.func.isRequired,startDate:re.object,handleStartDateChange:re.func.isRequired,endDate:re.object,handleEndDateChange:re.func.isRequired,handleQuickDateSelect:re.func.isRequired,applyDateFilter:re.func.isRequired,resetDateFilter:re.func.isRequired,quickSelectOptions:re.arrayOf(re.shape({label:re.string.isRequired,value:re.string.isRequired})),sx:re.object};const Vn=({filterProps:e={},paginationProps:t={},showDivider:n=!0,sx:r={}})=>{const[i,o]=u.useState(null),[s,l]=u.useState(null),[c,d]=u.useState(null),h=u.useCallback(v=>{o(v.currentTarget)},[]),f=u.useCallback(()=>{o(null)},[]),g=u.useCallback(v=>{l(v)},[]),w=u.useCallback(v=>{d(v)},[]),x=u.useCallback(v=>{const b=Hr();let P,k;switch(v){case"today":P=b.startOf("day"),k=b.endOf("day");break;case"yesterday":P=b.subtract(1,"day").startOf("day"),k=b.subtract(1,"day").endOf("day");break;case"thisWeek":P=b.startOf("week"),k=b.endOf("week");break;case"lastWeek":P=b.subtract(1,"week").startOf("week"),k=b.subtract(1,"week").endOf("week");break;case"thisMonth":P=b.startOf("month"),k=b.endOf("month");break;default:return}l(P),d(k)},[]),y=u.useCallback(()=>{e.handleDateRangeChange&&e.handleDateRangeChange({startDate:s,endDate:c}),f()},[s,c,e,f]),p=u.useCallback(()=>{l(null),d(null),e.resetDateFilter&&e.resetDateFilter(),f()},[e,f]);return m(bn,{children:[a(rt,{elevation:1,sx:{p:1.5,borderRadius:2,mb:2,...r},children:m(j,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},gap:{xs:2,md:0}},children:[a(tj,{...e,handleOpenDateFilter:h,isDateFilterActive:!!(s||c)}),a(nj,{...t})]})}),n&&a(yn,{sx:{mb:2}}),a(GC,{anchorEl:i,onClose:f,startDate:s,handleStartDateChange:g,endDate:c,handleEndDateChange:w,handleQuickDateSelect:x,applyDateFilter:y,resetDateFilter:p})]})};Vn.propTypes={filterProps:re.object,paginationProps:re.object,showDivider:re.bool,sx:re.object};var Kc={},eD;function Mre(){if(eD)return Kc;eD=1;var e=ln();Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.default=void 0;var t=e(un()),n=cn();return Kc.default=(0,t.default)((0,n.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Kc}var Lre=Mre();const tD=vt(Lre);var Yc={},nD;function $re(){if(nD)return Yc;nD=1;var e=ln();Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.default=void 0;var t=e(un()),n=cn();return Yc.default=(0,t.default)((0,n.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Yc}var jre=$re();const rD=vt(jre);var Xc={},aD;function Fre(){if(aD)return Xc;aD=1;var e=ln();Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.default=void 0;var t=e(un()),n=cn();return Xc.default=(0,t.default)((0,n.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight"),Xc}var zre=Fre();const Yw=vt(zre);var Jc={},iD;function Nre(){if(iD)return Jc;iD=1;var e=ln();Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.default=void 0;var t=e(un()),n=cn();return Jc.default=(0,t.default)((0,n.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown"),Jc}var Bre=Nre();const Xw=vt(Bre),rj=({types:e={},typeHierarchy:t={},expandedTypes:n={},onTypeToggle:r,onExpandAll:i,direction:o="horizontal",sx:s={}})=>{const l=Object.keys(e).length>0&&Object.keys(e).every(x=>n[x]),c=Object.keys(t).filter(x=>!Object.values(t).some(y=>y.includes(x))),d=(x,y=[])=>{const p=[...y,x],v=t[x]||[];return v.length===0?[p]:v.flatMap(b=>d(b,p))},h=c.flatMap(x=>d(x)),f=()=>m(kr,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap",gap:.5,py:1,...s},children:[i&&a(Fn,{title:l?"모든 유형 접기":"모든 유형 펼치기",children:a(Ct,{size:"small",onClick:()=>i(!l),sx:{mr:1},children:l?a(rD,{}):a(tD,{})})}),h.map((x,y)=>a(kr,{direction:"row",alignItems:"center",spacing:.5,sx:{flexWrap:"nowrap",mb:.5,mr:1,borderRadius:1,px:1,py:.5,bgcolor:"background.default",border:"1px solid",borderColor:"divider"},children:x.map((p,v)=>{var b,P,k,C,S,_,T,I,L,A;return m(Ce.Fragment,{children:[a(ut,{label:((b=e[p])==null?void 0:b.label)||p,color:((P=e[p])==null?void 0:P.color)||"default",size:"small",variant:n[p]?"filled":"outlined",onClick:()=>r&&r(p),icon:((k=t[p])==null?void 0:k.length)>0?n[p]?a(Xw,{}):a(Yw,{}):void 0,sx:{minWidth:80,backgroundColor:((C=e[p])==null?void 0:C.backgroundColor)||void 0,borderColor:((S=e[p])==null?void 0:S.borderColor)||void 0,color:((_=e[p])==null?void 0:_.borderColor)||void 0,border:(T=e[p])!=null&&T.borderColor?`1px solid ${(I=e[p])==null?void 0:I.borderColor}`:void 0,"& .MuiChip-label":{color:((L=e[p])==null?void 0:L.borderColor)||void 0},"& .MuiChip-icon":{color:((A=e[p])==null?void 0:A.borderColor)||void 0}}}),v<x.length-1&&a(M,{variant:"body2",color:"text.secondary",children:">"})]},p)})},`path-${y}`))]}),g=(x,y=0)=>{const p=e[x]||{label:x,color:"default"},v=t[x]||[],b=n[x];return m(j,{sx:{ml:y*2},children:[a(j,{sx:{display:"flex",alignItems:"center",mb:.5},children:a(ut,{label:p.label,color:p.color,size:"small",variant:b?"filled":"outlined",onClick:()=>r&&r(x),icon:v.length>0?b?a(Xw,{}):a(Yw,{}):void 0,sx:{minWidth:80,backgroundColor:p.backgroundColor||void 0,borderColor:p.borderColor||void 0,color:p.borderColor||void 0,border:p.borderColor?`1px solid ${p.borderColor}`:void 0,"& .MuiChip-label":{color:p.borderColor||void 0},"& .MuiChip-icon":{color:p.borderColor||void 0}}})}),b&&v.length>0&&a(j,{sx:{ml:2},children:v.map(P=>g(P,y+1))})]},x)};return o==="horizontal"?f():m(j,{sx:{display:"flex",flexDirection:"column",p:1,...s},children:[i&&m(j,{sx:{mb:1},children:[a(Fn,{title:l?"모든 유형 접기":"모든 유형 펼치기",children:a(Ct,{size:"small",onClick:()=>i(!l),children:l?a(rD,{}):a(tD,{})})}),a(M,{variant:"caption",sx:{ml:1},children:l?"모든 유형 접기":"모든 유형 펼치기"})]}),c.map(x=>g(x))]})};rj.propTypes={types:re.object,typeHierarchy:re.object,expandedTypes:re.object,onTypeToggle:re.func,onExpandAll:re.func,direction:re.oneOf(["horizontal","vertical"]),sx:re.object};const Fi=({tableHeight:e,autoHeight:t,toggleAutoHeight:n,setManualHeight:r,minHeight:i=200,maxHeight:o=800,step:s=50,showAutoHeightToggle:l=!0,sx:c={}})=>{const d=parseInt(e);return m(j,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,px:1,py:.5,borderRadius:1,bgcolor:"rgba(0, 0, 0, 0.02)",...c},children:[m(M,{variant:"body2",children:["테이블 높이: ",t?"자동 조정":e]}),l&&m("label",{style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"0.875rem"},children:[a("input",{type:"checkbox",checked:t,onChange:()=>n(),style:{marginRight:"4px"}}),"자동 높이 조정"]}),!t&&a("input",{type:"range",min:i,max:o,step:s,value:d,onChange:h=>r(parseInt(h.target.value)),style:{width:"150px"}})]})};Fi.propTypes={tableHeight:re.string.isRequired,autoHeight:re.bool.isRequired,toggleAutoHeight:re.func.isRequired,setManualHeight:re.func.isRequired,minHeight:re.number,maxHeight:re.number,step:re.number,showAutoHeightToggle:re.bool,sx:re.object};const rr=({resizeHandleProps:e,showIcon:t=!0,isDragging:n=!1,sx:r={}})=>a(j,{...e,sx:{width:"100%",minHeight:"8px",position:"relative",mt:1,opacity:n?1:.7,backgroundColor:n?"rgba(25, 118, 210, 0.08)":"transparent","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.04)",opacity:1},transition:"opacity 0.2s, background-color 0.2s",...r},children:t&&a(j,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30px",height:"3px",borderRadius:"2px",backgroundColor:n?"rgba(25, 118, 210, 0.7)":"rgba(0, 0, 0, 0.3)",transition:"background-color 0.2s"}})});rr.propTypes={resizeHandleProps:re.object.isRequired,showIcon:re.bool,isDragging:re.bool,sx:re.object};re.node.isRequired,re.shape({handleResizeStart:re.func,isResizing:re.bool,resizeHandleRef:re.object}),re.string,re.bool,re.object,re.object;const Qg=({currentPage:e=0,currentRowsPerPage:t=10,dataLength:n=0,filteredDataLength:r=0,totalFlattenedItems:i=0,searchText:o="",sequentialPageNumbers:s=!1,isDragging:l=!1,tableHeight:c="400px",maxHeight:d="Infinity",pinnedColumns:h=[],visibleColumnsCount:f=0,totalColumnsCount:g=0,hiddenColumnsCount:w=0,columnVisibility:x={},autoHeight:y=!0,calculateMaxHeight:p=null,show:v=!0,sx:b={}})=>{if(!v)return null;const P=Math.ceil(i/t),k=Object.keys(x).filter(_=>!x[_]),C=parseFloat(c),S=p?p():d;return a(j,{sx:{mt:1,p:1,border:"1px dashed #ccc",borderRadius:1,bgcolor:"#f5f5f5",...b},children:m(M,{variant:"caption",component:"div",children:[a("strong",{children:"디버그 정보:"}),a("br",{}),"- 현재 페이지: ",e+1," (인덱스: ",e,")",a("br",{}),"- 페이지당 행 수: ",t,a("br",{}),"- 원본 데이터 수: ",n,a("br",{}),"- 필터링된 데이터 수: ",r,a("br",{}),"- 총 항목 수(계층 포함): ",i,a("br",{}),"- 페이지 수: ",P,a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:o?"blue":"inherit"},children:["현재 검색어: ",o?`"${o}"`:"없음"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:s?"green":"inherit"},children:["페이지 번호 모드: ",s?"연속 번호":"페이지별 번호"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:l?"red":"inherit"},children:["리사이즈 상태: ",l?"드래그 중":"대기 중"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"purple"},children:["현재 테이블 높이: ",c]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"orange"},children:["리사이즈 최대 높이: ",S===1/0||S==="Infinity"?"제한 없음":`${S}px`]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"blue"},children:["parseFloat(tableHeight): ",C]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"green"},children:["자동 높이 모드: ",y?"ON":"OFF"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"teal"},children:["고정 컬럼: ",h.length>0?h.join(", "):"없음"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:"indigo"},children:["표시 컬럼: ",f,"/",g,"개"]}),a("br",{}),"- ",m("span",{style:{fontWeight:"bold",color:w>0?"red":"green"},children:["숨김 컬럼: ",w,"개 ",w>0?`(${k.join(", ")})`:""]})]})})};Qg.propTypes={currentPage:re.number,currentRowsPerPage:re.number,dataLength:re.number,filteredDataLength:re.number,totalFlattenedItems:re.number,searchText:re.string,sequentialPageNumbers:re.bool,isDragging:re.bool,tableHeight:re.string,maxHeight:re.oneOfType([re.number,re.string]),pinnedColumns:re.array,visibleColumnsCount:re.number,totalColumnsCount:re.number,hiddenColumnsCount:re.number,columnVisibility:re.object,autoHeight:re.bool,calculateMaxHeight:re.func,show:re.bool,sx:re.object};const or=({anchorEl:e,open:t,onClose:n,toggleableColumns:r=[],columnVisibility:i={},onToggleColumn:o,onShowAll:s,onReset:l,hiddenColumnsCount:c=0,menuWidth:d="300px"})=>{const h=(w,x)=>{var p;const y=w.currentTarget.dataset.columnId||((p=w.currentTarget.closest("[data-column-id]"))==null?void 0:p.dataset.columnId);y&&o&&o(y)},f=()=>{s&&s()},g=()=>{l&&l()};return a(vi,{anchorEl:e,open:t,onClose:n,PaperProps:{sx:{width:d,maxWidth:d,maxHeight:"70vh",zIndex:1400}},sx:{zIndex:1400},MenuListProps:{sx:{width:"100%"}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:a(Me,{sx:{display:"block",p:0},children:m(j,{sx:{p:2},children:[m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"subtitle1",sx:{fontWeight:600},children:"컬럼 표시 옵션"}),c>0&&a(ut,{icon:a(Bu,{}),label:`${c}개 숨김`,size:"small",color:"warning",variant:"outlined"})]}),a(yn,{sx:{mb:2}}),a(j,{sx:{mb:2,maxHeight:"300px",overflowY:"auto"},children:r.length>0?a(W,{container:!0,spacing:1,children:r.map(w=>w.type==="group"&&w.children&&w.children.length>0?m(Ce.Fragment,{children:[a(W,{item:!0,xs:12,children:a(cl,{value:i[w.id]!==!1?[w.id]:[],onChange:h,sx:{width:"100%","& .MuiToggleButton-root":{width:"100%",justifyContent:"flex-start",textTransform:"none",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"8px",padding:"8px 12px","&.Mui-selected":{backgroundColor:y=>`${Sr(y.palette.primary.main,.8)} !important`,color:"white !important","&:hover":{backgroundColor:y=>`${Sr(y.palette.primary.dark,.9)} !important`}},"&:not(.Mui-selected)":{backgroundColor:"rgba(245, 245, 245, 0.7) !important",color:"text.secondary","&:hover":{backgroundColor:"rgba(238, 238, 238, 0.8) !important"}}}},children:a(_i,{value:w.id,"data-column-id":w.id,children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[a(M,{variant:"body2",sx:{fontWeight:600},children:w.header||w.label||w.id}),i[w.id]!==!1?a(ds,{fontSize:"small",sx:{color:"inherit"}}):a(Bu,{fontSize:"small",sx:{color:"inherit"}})]})})})}),w.children.map(y=>a(W,{item:!0,xs:12,children:a(j,{sx:{ml:3},children:a(cl,{value:i[y.id]!==!1?[y.id]:[],onChange:h,sx:{width:"100%","& .MuiToggleButton-root":{width:"100%",justifyContent:"flex-start",textTransform:"none",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"6px",padding:"6px 10px","&.Mui-selected":{backgroundColor:p=>`${Sr(p.palette.success.main,.8)} !important`,color:"white !important","&:hover":{backgroundColor:p=>`${Sr(p.palette.success.dark,.9)} !important`}},"&:not(.Mui-selected)":{backgroundColor:"rgba(245, 245, 245, 0.7) !important",color:"text.secondary","&:hover":{backgroundColor:"rgba(238, 238, 238, 0.8) !important"}}}},children:a(_i,{value:y.id,"data-column-id":y.id,children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[a(M,{variant:"body2",children:y.header||y.label||y.id}),i[y.id]!==!1?a(ds,{fontSize:"small",sx:{color:"inherit"}}):a(Bu,{fontSize:"small",sx:{color:"inherit"}})]})})})})},y.id))]},w.id):a(W,{item:!0,xs:12,children:a(cl,{value:i[w.id]!==!1?[w.id]:[],onChange:h,sx:{width:"100%","& .MuiToggleButton-root":{width:"100%",justifyContent:"flex-start",textTransform:"none",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"6px",padding:"6px 10px","&.Mui-selected":{backgroundColor:y=>`${Sr(y.palette.info.main,.8)} !important`,color:"white !important","&:hover":{backgroundColor:y=>`${Sr(y.palette.info.dark,.9)} !important`}},"&:not(.Mui-selected)":{backgroundColor:"rgba(245, 245, 245, 0.7) !important",color:"text.secondary","&:hover":{backgroundColor:"rgba(238, 238, 238, 0.8) !important"}}}},children:a(_i,{value:w.id,"data-column-id":w.id,children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[a(M,{variant:"body2",children:w.header||w.label||w.id}),i[w.id]!==!1?a(ds,{fontSize:"small",sx:{color:"inherit"}}):a(Bu,{fontSize:"small",sx:{color:"inherit"}})]})})})},w.id))}):a(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"표시 옵션을 변경할 수 있는 컬럼이 없습니다."})}),a(yn,{sx:{mb:2}}),m(j,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[a(Se,{variant:"outlined",size:"small",startIcon:a(ds,{}),onClick:f,sx:{fontWeight:500},children:"모두 표시"}),a(Se,{variant:"outlined",size:"small",startIcon:a(ah,{}),onClick:g,sx:{fontWeight:500},children:"초기화"})]}),a(j,{sx:{mt:2,p:1,bgcolor:"grey.50",borderRadius:1},children:m(M,{variant:"caption",color:"text.secondary",sx:{display:"block",whiteSpace:"normal",wordWrap:"break-word",lineHeight:1.4},children:["💡 토글버튼을 클릭하면 해당 컬럼이 테이블에서 표시/숨김 됩니다.",a("br",{}),"💡 그룹 버튼을 클릭하면 해당 그룹의 모든 컬럼이 함께 토글됩니다."]})})]})})})};or.propTypes={anchorEl:re.object,open:re.bool.isRequired,onClose:re.func.isRequired,toggleableColumns:re.arrayOf(re.object),columnVisibility:re.object,onToggleColumn:re.func,onShowAll:re.func,onReset:re.func,hiddenColumnsCount:re.number,menuWidth:re.string};const ng=({parentTypes:e=[],direction:t="row",maxChips:n=10,sx:r={}})=>!e||e.length===0?a(j,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",minHeight:"32px",color:"text.secondary",fontSize:"0.875rem",...r},children:"-"}):a(j,{sx:{display:"flex",flexDirection:t,flexWrap:"nowrap",gap:.5,alignItems:"center",justifyContent:"flex-start",minHeight:"32px",width:"100%",overflow:"hidden",position:"relative",...r},children:e.map((i,o)=>m(Ce.Fragment,{children:[o>0&&a(M,{variant:"body2",sx:{mx:.5,color:"text.secondary",fontSize:"0.875rem",fontWeight:500,flexShrink:0,whiteSpace:"nowrap"},children:">"}),m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.25,flexShrink:0},children:[a(ut,{label:typeof i=="object"?i.label||"유형":i||"유형",variant:"outlined",size:"small",sx:{fontSize:"0.75rem",height:"24px",minWidth:"auto",maxWidth:"150px",backgroundColor:i.backgroundColor||"#e0e0e0",borderColor:i.borderColor||"#757575",color:i.borderColor||"#757575",border:i.borderColor?`1px solid ${i.borderColor}`:void 0,"& .MuiChip-label":{px:1,py:.25,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:i.borderColor||"#757575"}}}),i.nickname&&a(M,{variant:"caption",sx:{fontSize:"0.65rem",color:"text.secondary",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"150px",lineHeight:1.2},children:i.nickname})]})]},`${typeof i=="object"?i.id||i.label:i}-${o}`))});re.string.isRequired,re.string.isRequired,re.bool,re.bool,re.func,re.object;const Hre=({selectedCount:e=0,actions:t=[],onAction:n,onClear:r,isProcessing:i=!1,position:o="bottom",sx:s={}})=>{if(e===0)return null;const l={activate:a(ul,{}),suspend:a(EF,{}),delete:a(Wo,{})},c={activate:"success",suspend:"warning",delete:"error"};return a(RF,{in:e>0,timeout:300,children:a(rt,{elevation:3,sx:{position:o==="fixed"?"fixed":"relative",bottom:o==="fixed"?16:"auto",left:o==="fixed"?"50%":"auto",transform:o==="fixed"?"translateX(-50%)":"none",zIndex:1200,p:2,borderRadius:2,backgroundColor:"background.paper",...s},children:m(kr,{direction:"row",spacing:2,alignItems:"center",children:[a(j,{sx:{minWidth:120},children:m(M,{variant:"body2",color:"text.secondary",children:[e,"개 선택됨"]})}),a(yn,{orientation:"vertical",flexItem:!0}),a(kr,{direction:"row",spacing:1,children:t.map(d=>a(Se,{variant:d.variant||"outlined",color:d.color||c[d.type]||"primary",size:"small",startIcon:i&&d.type===i?a(ir,{size:16}):d.icon||l[d.type],onClick:()=>n(d.type),disabled:i||d.disabled&&d.disabled(e),sx:{minWidth:100},children:d.label},d.type))}),a(yn,{orientation:"vertical",flexItem:!0}),a(Se,{variant:"text",size:"small",startIcon:a(Sa,{}),onClick:r,disabled:i,sx:{ml:1},children:"선택 해제"})]})})})},aj=u.forwardRef(({columns:e,hasGroupHeaders:t,onSort:n,sortConfig:r,checkable:i,onToggleAll:o,allChecked:s,draggable:l=!1,dragHandlers:c={},dragInfo:d={dragging:!1,columnId:null},style:h={},pinnedColumns:f=[],tableKey:g=0},w)=>{const x=On(),[y,p]=u.useState(null),[v,b]=u.useState({}),P=u.useRef(null),k=u.useCallback(()=>{if(!P.current)return;const O={};P.current.querySelectorAll("[data-column-id]").forEach(E=>{const z=E.getAttribute("data-column-id");z&&(O[z]=E.offsetWidth)}),b(O)},[]);u.useEffect(()=>{const O=setTimeout(()=>{k()},100);return()=>clearTimeout(O)},[g,k]),u.useEffect(()=>{const O=()=>{k()};return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[k]);const C=(O,R)=>{R&&n&&n(O)},S=O=>{o&&o(O.target.checked)},_=()=>{const O=[];return e.forEach(R=>{R.type==="group"&&Array.isArray(R.children)?R.children.forEach(E=>{O.push(E)}):O.push(R)}),O},{handleDragStart:T,handleDragEnd:I,handleDragOver:L,handleDrop:A}=c,D=(O,R=!1,E=null)=>l?{draggable:!0,onDragStart:z=>{z.currentTarget.style.opacity="0.6",z.currentTarget.style.transform="scale(1.05)",T(z,O,R,E)},onDragEnd:z=>{z.currentTarget.style.opacity="1",z.currentTarget.style.transform="scale(1)",I(z),p(null)},onDragOver:z=>{z.preventDefault(),z.stopPropagation(),L(z),p(O),z.currentTarget.style.transition="all 0.2s ease"},onDragEnter:z=>{z.preventDefault(),p(O)},onDragLeave:z=>{z.preventDefault(),y===O&&p(null)},onDrop:z=>{z.preventDefault(),A(z,O,R,E),p(null)}}:{},B=(O,R=!1)=>{if(!l)return{};const E=d.dragging&&d.columnId===O;return{cursor:"grab",opacity:E?.6:1,transform:E?"scale(1.05)":"scale(1)",transition:"all 0.2s ease",position:"relative",zIndex:E?10:1,...y===O&&{boxShadow:"0 0 0 2px "+x.palette.primary.main,"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"4px",backgroundColor:x.palette.primary.main,animation:"pulse 1s infinite"},"&::after":{content:'""',position:"absolute",right:0,top:0,bottom:0,width:"4px",backgroundColor:x.palette.primary.main,animation:"pulse 1s infinite"},"@keyframes pulse":{"0%":{opacity:.6},"50%":{opacity:1},"100%":{opacity:.6}}}}},$=()=>{const O=[];return e.forEach(R=>{if(R.type==="checkbox"&&i)O.push(a(ye,{rowSpan:2,padding:"checkbox",align:"center","data-column-id":"checkbox",sx:{backgroundColor:x.palette.grey[100],width:"48px",minWidth:"48px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",zIndex:f.includes("checkbox")?30:15,...F("checkbox")},children:a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},...D("checkbox"),children:a(gr,{indeterminate:s===null,checked:s===!0,onChange:S,inputProps:{"aria-label":"전체 선택"}})})},"checkbox-group-spacer"));else if(R.type==="group"&&Array.isArray(R.children)){const E=R.children.length;O.push(a(ye,{colSpan:E,align:"center","data-column-id":R.id,sx:{fontWeight:600,backgroundColor:x.palette.grey[100],borderBottom:`1px solid ${x.palette.grey[300]}`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",zIndex:1,...B(R.id,!0)},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},...D(R.id,!0),children:[l&&a(Yh,{fontSize:"small",sx:{mr:1,cursor:"grab",color:x.palette.grey[500],animation:d.dragging&&d.columnId===R.id?"shake 0.3s infinite":"none","@keyframes shake":{"0%, 100%":{transform:"translateX(0)"},"25%":{transform:"translateX(-2px)"},"75%":{transform:"translateX(2px)"}}}}),R.header||R.label]})},`group-${R.id}`))}else R.type!=="checkbox"&&O.push(a(ye,{rowSpan:2,"data-column-id":R.id,sx:{fontWeight:600,backgroundColor:x.palette.grey[100],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",...B(R.id),...F(R.id)},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},onClick:()=>C(R.id,R.sortable),...D(R.id),children:[l&&a(Yh,{fontSize:"small",sx:{mr:1,cursor:"grab",color:x.palette.grey[500],animation:d.dragging&&d.columnId===R.id?"shake 0.3s infinite":"none","@keyframes shake":{"0%, 100%":{transform:"translateX(0)"},"25%":{transform:"translateX(-2px)"},"75%":{transform:"translateX(2px)"}}}}),a(M,{variant:"subtitle2",sx:{textAlign:"center"},children:R.header||R.label}),R.sortable&&r.key===R.id&&r.direction&&a(j,{sx:{ml:.5,display:"flex",alignItems:"center"},children:r.direction==="asc"?a(If,{fontSize:"small"}):a(Of,{fontSize:"small"})})]})},`spacer-${R.id}`))}),a(mn,{children:O})},N=()=>{const O=[];return i&&!t&&O.push(a(ye,{padding:"checkbox",align:"center","data-column-id":"checkbox",sx:{fontWeight:600,backgroundColor:x.palette.grey[100],width:"48px",minWidth:"48px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",zIndex:f.includes("checkbox")?30:15,...B("checkbox"),...F("checkbox")},children:a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},...D("checkbox"),children:a(gr,{indeterminate:!1,checked:s,onChange:S,color:"primary",size:"small",sx:{"&.Mui-checked":{color:x.palette.primary.main},"&.MuiCheckbox-indeterminate":{color:x.palette.primary.main}}})})},"checkbox")),t?e.forEach(R=>{R.type==="group"&&Array.isArray(R.children)&&R.children.forEach(E=>{O.push(a(ye,{align:E.align||"center","data-column-id":E.id,sx:{fontWeight:600,backgroundColor:x.palette.grey[100],width:E.width||"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",zIndex:f.includes(E.id)?30:15,...B(E.id,!1,R.id),...F(E.id)},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},onClick:()=>C(E.id,E.sortable),...D(E.id,!1,R.id),children:[l&&a(Yh,{fontSize:"small",sx:{mr:1,cursor:"grab",color:x.palette.grey[500],animation:d.dragging&&d.columnId===E.id?"shake 0.3s infinite":"none","@keyframes shake":{"0%, 100%":{transform:"translateX(0)"},"25%":{transform:"translateX(-2px)"},"75%":{transform:"translateX(2px)"}}}}),a(M,{variant:"subtitle2",sx:{textAlign:"center"},children:E.header||E.label}),E.sortable&&r.key===E.id&&r.direction&&a(j,{sx:{ml:.5,display:"flex",alignItems:"center"},children:r.direction==="asc"?a(If,{fontSize:"small"}):a(Of,{fontSize:"small"})})]})},E.id))})}):e.forEach(R=>{R.type!=="checkbox"&&O.push(a(ye,{align:R.type==="horizontal"?"left":R.align||"center","data-column-id":R.id,sx:{fontWeight:600,backgroundColor:x.palette.grey[100],width:R.width||"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",zIndex:f.includes(R.id)?30:15,...B(R.id),...F(R.id)},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",cursor:l?"grab":"pointer"},onClick:()=>C(R.id,R.sortable),...D(R.id),children:[l&&a(Yh,{fontSize:"small",sx:{mr:1,cursor:"grab",color:x.palette.grey[500],animation:d.dragging&&d.columnId===R.id?"shake 0.3s infinite":"none","@keyframes shake":{"0%, 100%":{transform:"translateX(0)"},"25%":{transform:"translateX(-2px)"},"75%":{transform:"translateX(2px)"}}}}),a(M,{variant:"subtitle2",sx:{textAlign:"center"},children:R.header||R.label}),R.sortable&&r.key===R.id&&r.direction&&a(j,{sx:{ml:.5,display:"flex",alignItems:"center"},children:r.direction==="asc"?a(If,{fontSize:"small"}):a(Of,{fontSize:"small"})})]})},R.id))}),O},F=O=>{if(!f.includes(O))return{};const E=_().filter(ee=>ee.type!=="checkbox"),q=(i?["checkbox",...E.map(ee=>ee.id)]:E.map(ee=>ee.id)).filter(ee=>f.includes(ee)),X=O===q[q.length-1];let H=0;const K=q.indexOf(O);for(let ee=0;ee<K;ee++){const ge=q[ee];let oe=v[ge];if(!oe){const G=document.querySelector(`[data-column-id="${ge}"]`);G?oe=G.offsetWidth:oe=ge==="checkbox"?48:120}H+=oe}return{position:"sticky",left:`${H}px`,top:0,zIndex:O==="checkbox"?35:O==="no"?34:30,backgroundColor:x.palette.grey[100],borderRight:X?`2px solid ${x.palette.primary.main}`:"none",boxShadow:X?"2px 0 5px rgba(0, 0, 0, 0.1)":"none","&::after":X?{content:'""',position:"absolute",right:0,top:0,bottom:0,width:"2px",backgroundColor:x.palette.primary.main,opacity:.3}:{}}};return m(pa,{ref:w,style:h,children:[t&&$(),a(mn,{ref:P,children:N()})]})});aj.propTypes={columns:re.arrayOf(re.object).isRequired,hasGroupHeaders:re.bool,onSort:re.func,sortConfig:re.object,checkable:re.bool,onToggleAll:re.func,allChecked:re.bool,draggable:re.bool,dragHandlers:re.shape({handleDragStart:re.func,handleDragEnd:re.func,handleDragOver:re.func,handleDrop:re.func}),dragInfo:re.object,style:re.object,pinnedColumns:re.array,tableKey:re.number};const KC=({item:e,level:t=0,expanded:n=!1,onToggle:r,hasChildren:i=!1,typeInfo:o={label:"",color:"default"},indentMode:s=!0,indentSize:l=20,showToggleIcon:c=!0,sx:d={}})=>{const h=s?t*l:0,f=n?Xw:Yw,g=w=>{w.stopPropagation(),r&&(e==null?void 0:e.id)!==void 0&&r(e.id)};return m(j,{sx:{display:"flex",alignItems:"center",pl:h/8,position:"relative",width:"100%",...d},children:[c&&(i||t>0)&&a(Ct,{size:"small",onClick:g,sx:{p:.5,mr:.5},children:a(f,{fontSize:"small"})}),a(ut,{label:o.label||"",size:"small",variant:"outlined",sx:{height:24,backgroundColor:o.backgroundColor,borderColor:o.borderColor,color:o.borderColor,border:o.borderColor?`1px solid ${o.borderColor}`:void 0,"& .MuiChip-label":{px:1,fontSize:"0.75rem",color:o.borderColor}}})]})};KC.propTypes={item:re.object.isRequired,level:re.number,expanded:re.bool,onToggle:re.func,hasChildren:re.bool,typeInfo:re.shape({label:re.string,color:re.string,backgroundColor:re.string,borderColor:re.string}),indentMode:re.bool,indentSize:re.number,showToggleIcon:re.bool,sx:re.object};var Qc={},oD;function Wre(){if(oD)return Qc;oD=1;var e=ln();Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.default=void 0;var t=e(un()),n=cn();return Qc.default=(0,t.default)((0,n.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18m0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9"}),"Casino"),Qc}var qre=Wre();const YC=vt(qre);var Zc={},sD;function Ure(){if(sD)return Zc;sD=1;var e=ln();Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.default=void 0;var t=e(un()),n=cn();return Zc.default=(0,t.default)((0,n.jsx)("path",{d:"m21.58 16.09-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91M11 11H9v2H8v-2H6v-1h2V8h1v2h2zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"SportsEsports"),Zc}var Vre=Ure();const XC=vt(Vre);var eu={},lD;function Gre(){if(lD)return eu;lD=1;var e=ln();Object.defineProperty(eu,"__esModule",{value:!0}),eu.default=void 0;var t=e(un()),n=cn();return eu.default=(0,t.default)((0,n.jsx)("path",{d:"M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L12 10.66 10.48 12h.01L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l2.83-2.5.01.01L13.52 12h-.01l2.69-2.39c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37"}),"AllInclusive"),eu}var Kre=Gre();const ij=vt(Kre),oj=({column:e,row:t,value:n,sequentialPageNumbers:r=!1,page:i=0,rowsPerPage:o=10,rowIndex:s=0})=>{var c,d;On();const l=h=>{e.clickable&&e.onClick&&(h.stopPropagation(),e.onClick(t))};if(e.id==="rollingPercent"){const h=parseFloat(t.rolling_slot_percent||0),f=parseFloat(t.rolling_casino_percent||0),g=t.rollingValidity&&!t.rollingValidity.isValid,w=((c=t.rollingValidity)==null?void 0:c.reason)||"",x=((d=t.rollingValidity)==null?void 0:d.parentInvalid)||!1;let y="";return g&&(x?y="상위 회원의 롤링%가 유효하지 않아 적용할 수 없습니다":y=w),m(j,{sx:{textAlign:"center",lineHeight:1.2},children:[m(M,{variant:"caption",sx:{display:"block",color:g?"error.main":"primary.main",fontSize:"11px",fontWeight:g?"bold":"normal",textDecoration:g?"line-through":"none"},title:y,children:["슬롯 ",h.toFixed(2),"%"]}),m(M,{variant:"caption",sx:{display:"block",color:g?"error.main":"secondary.main",fontSize:"11px",fontWeight:g?"bold":"normal",textDecoration:g?"line-through":"none"},title:y,children:["카지노 ",f.toFixed(2),"%"]})]})}if(e.id==="index"){const h=r?i*o+s+1:s+1;return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:h})}switch(e.type){case"index":const h=r?i*o+s+1:s+1;return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:h});case"image":const f=e.id==="vendorLogo",g=e.id==="gameImage",w=f?120:g?210:40,x=f?50:g?210:40,y=f||g?1:"50%";if(!n)return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(j,{sx:{width:w,height:x,borderRadius:y,backgroundColor:"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:g?"24px":"18px",fontWeight:"bold",border:"1px solid #e0e0e0"},children:f?"NO LOGO":g?"NO IMAGE":"?"})});if(typeof n=="string")return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(j,{component:"img",src:n,alt:"",sx:{width:w,height:x,borderRadius:y,objectFit:"contain",border:"1px solid #e0e0e0",backgroundColor:"white"},onError:E=>{E.target.style.display="none";const z=f?"NO LOGO":g?"NO IMAGE":"?",q=g?"24px":"18px";E.target.parentElement.innerHTML=`
                  <div style="
                    width: ${w}px;
                    height: ${x}px;
                    border-radius: ${typeof y=="number"?y+"px":y};
                    background-color: #e0e0e0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: #757575;
                    font-size: ${q};
                    font-weight: bold;
                    border: 1px solid #e0e0e0;
                  ">${z}</div>
                `}})});if(typeof n=="object"){if(n.src)return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(j,{component:"img",src:n.src,alt:"",sx:{width:w,height:x,borderRadius:y,objectFit:"contain",border:"1px solid #e0e0e0",backgroundColor:"white"},onError:E=>{if(n.fallback){if(typeof n.fallback=="object"&&n.fallback.bg&&n.fallback.text){E.target.style.display="none";const z=g?"24px":f?"14px":"16px";E.target.parentElement.innerHTML=`
                        <div style="
                          width: ${w}px;
                          height: ${x}px;
                          border-radius: ${typeof y=="number"?y+"px":y};
                          background-color: ${n.fallback.bg};
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          color: white;
                          font-size: ${z};
                          font-weight: bold;
                          border: 1px solid #e0e0e0;
                        ">${n.fallback.text}</div>
                      `}}else{E.target.style.display="none";const z=f?"NO LOGO":g?"NO IMAGE":"?",q=g?"24px":"18px";E.target.parentElement.innerHTML=`
                      <div style="
                        width: ${w}px;
                        height: ${x}px;
                        border-radius: ${typeof y=="number"?y+"px":y};
                        background-color: #e0e0e0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: #757575;
                        font-size: ${q};
                        font-weight: bold;
                        border: 1px solid #e0e0e0;
                      ">${z}</div>
                    `}}})});if(n.bg&&n.text){const E=g?"24px":f?"14px":"16px";return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(j,{sx:{width:w,height:x,borderRadius:y,backgroundColor:n.bg,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:E,fontWeight:"bold",border:"1px solid #e0e0e0"},children:n.text})})}}return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(j,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",color:"#757575",fontSize:"18px",fontWeight:"bold"},children:"?"})});case"number":let p;return r?p=i*o+s+1:p=s+1,a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:p||"-"});case"boolean":return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:n?"활성":"비활성",size:"small",color:n?"success":"default",variant:"filled",sx:{maxWidth:"100%"}})});case"toggle":return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(sn,{checked:n===1||n===!0||n==="true",size:"small",color:"primary",onChange:E=>{e.onToggle&&e.onToggle(t,E.target.checked)}})});case"multiline":if(e.format==="bankInfo"&&typeof n=="object"&&n!==null)return n.bankName&&n.accountNumber&&n.accountHolder?m(j,{sx:{textAlign:"center",width:"100%"},children:[m(M,{variant:"body2",sx:{fontSize:"13px",fontWeight:"bold"},children:[n.bankName," ",n.accountNumber]}),m(M,{variant:"body2",sx:{fontSize:"12px",color:"text.secondary"},children:["(",n.accountHolder,")"]})]}):a(M,{variant:"body2",sx:{textAlign:"center",width:"100%",color:"text.secondary"},children:"-"});if(n&&typeof n=="object"&&!Array.isArray(n)){if(n.label)return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n.label});if(e.id==="userId"||e.id==="memberInfo"){if(n.id&&n.nickname)return m(j,{onClick:e.clickable?l:void 0,sx:{cursor:e.clickable?"pointer":"default","&:hover":e.clickable?{backgroundColor:"action.hover",borderRadius:1}:{},width:"100%",padding:"4px"},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",fontSize:"14px",lineHeight:1.2},children:n.id}),m(M,{variant:"body2",sx:{fontSize:"12px",color:"#9e9e9e",fontWeight:"normal",lineHeight:1.2},children:["(",n.nickname,")"]})]});{const E=JSON.stringify(n);return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:E})}}else try{const E=n.toString&&typeof n.toString=="function"&&n.toString()!=="[object Object]"?n.toString():JSON.stringify(n);return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:E})}catch{return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:"[객체]"})}}if(Array.isArray(n))return e.id==="userId"||e.id==="memberInfo"?n.length>1?m(j,{onClick:e.clickable?l:void 0,sx:{cursor:e.clickable?"pointer":"default","&:hover":e.clickable?{backgroundColor:"action.hover",borderRadius:1}:{},width:"100%",padding:"4px"},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",fontSize:"14px",lineHeight:1.2},children:n[0]}),m(M,{variant:"body2",sx:{fontSize:"12px",color:"#9e9e9e",fontWeight:"normal",lineHeight:1.2},children:["(",n[1],")"]})]}):a(M,{variant:"body2",sx:{textAlign:"center",width:"100%",fontWeight:"bold",fontSize:"14px"},children:n[0]||""}):a(kr,{spacing:.5,alignItems:"center",children:n.map((E,z)=>a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:E},`${e.id}-${t.id||s}-${z}`))});if(typeof n=="string"&&n.includes(`
`)){const E=n.split(`
`);return e.id==="memberInfo"||e.id==="writer"||e.id==="created_by"?m(j,{onClick:e.clickable?l:void 0,sx:{cursor:e.clickable?"pointer":"default","&:hover":e.clickable?{backgroundColor:"action.hover",borderRadius:1}:{},width:"100%",padding:"4px"},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",fontSize:"14px",lineHeight:1.2},children:E[0]}),E[1]&&a(M,{variant:"body2",sx:{fontSize:"12px",color:"#9e9e9e",fontWeight:"normal",lineHeight:1.2},children:E[1]})]}):a(kr,{spacing:.5,alignItems:"center",children:E.map((z,q)=>a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",fontWeight:q===0?"bold":"normal",fontSize:q===0?"16px":"14px",color:q===0?"inherit":"#9e9e9e"},children:z},`${e.id}-${t.id||s}-line-${q}`))})}const k=a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n||"-"});return e.clickable?a(j,{onClick:l,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover",borderRadius:1},width:"100%",padding:"4px"},children:k}):k;case"currency":if(n==null)return"-";if(typeof n!="number")return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",fontWeight:500},children:n});const C=n.toLocaleString("ko-KR");return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",fontWeight:500,color:n<0?"error.main":"inherit"},children:C});case"percent":return n==null?"-":typeof n=="string"?m(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",fontWeight:500},children:[n,"%"]}):typeof n=="number"?m(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",fontWeight:500},children:[n.toFixed(2),"%"]}):"-";case"chip":if(e.render&&typeof e.render=="function"){const E=e.render(t);E&&(n=E)}if(!n)return"-";if(e.id==="connectionStatus"){let E="default",z="outlined",q="오프라인",X="#e0e0e0",H="#757575";switch(n){case"online":case"온라인":q="온라인",E="success",X="#e8f5e9",H="#2e7d32";break;case"gaming":case"게임중":q="게임중",E="primary",X="#e3f2fd",H="#1976d2";break;case"offline":case"오프라인":default:q="오프라인",E="default",X="#f5f5f5",H="#9e9e9e";break}return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:q,size:"small",color:E,variant:z,sx:{maxWidth:"100%",backgroundColor:X,borderColor:H,color:H,fontWeight:"medium","&:hover":{backgroundColor:X}}})})}if(Array.isArray(n))return a(kr,{direction:"row",spacing:.5,flexWrap:"wrap",justifyContent:"center",children:n.map((E,z)=>{const q=typeof E=="object"&&E!==null,X=q?E.label||"":E,H=q&&E.color||"primary",K=q&&E.variant||"filled",ee=q?E.backgroundColor:void 0,ge=q?E.borderColor:void 0;return a(ut,{label:X,size:"small",color:H,variant:K,sx:{margin:"2px",maxWidth:"100%",backgroundColor:ee||void 0,borderColor:ge||void 0,color:ge||void 0,border:ge?`1px solid ${ge}`:void 0,"& .MuiChip-label":{color:ge||void 0}}},`${e.id}-${t.id||s}-chip-${z}`)})});const S=typeof n=="object"&&n!==null,_=S?n.label||"":n,T=S&&n.color||"primary",I=S&&n.variant||"filled",L=S&&(n.backgroundColor||n.borderColor);return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:_,size:"small",color:L?"default":T,variant:I,sx:L?{maxWidth:"100%",backgroundColor:n.backgroundColor,borderColor:n.borderColor,color:n.borderColor,border:n.borderColor?`1px solid ${n.borderColor}`:void 0,"& .MuiChip-label":{color:n.borderColor},"&.MuiChip-filled":{backgroundColor:`${n.backgroundColor} !important`,color:`${n.borderColor} !important`,border:n.borderColor?`1px solid ${n.borderColor} !important`:void 0},"&:hover":{backgroundColor:`${n.backgroundColor} !important`}}:{maxWidth:"100%",fontWeight:"medium"}})});case"button":return!e.buttons&&(e.buttonText||e.onClick)?a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(Se,{variant:"outlined",color:"primary",size:"small",onClick:E=>{E.stopPropagation(),e.onClick&&e.onClick(t)},children:e.buttonText||"버튼"})}):!e.buttons||!e.buttons.length?null:a(kr,{direction:e.buttonDirection||"row",spacing:1,justifyContent:"center",children:e.buttons.map((E,z)=>E.show&&typeof E.show=="function"&&!E.show(t)?null:a(Se,{variant:E.variant||"outlined",color:E.color||"primary",size:"small",onClick:q=>{q.stopPropagation(),E.onClick?E.onClick(t):e.onActionClick&&e.onActionClick(E.type,t)},children:E.label},`${e.id}-${t.id||s}-btn-${z}`))});case"actions":return!e.actions||!e.actions.length?null:a(kr,{direction:"row",spacing:.5,justifyContent:"center",children:e.actions.map((E,z)=>E.type==="button"?a(Se,{variant:E.variant||"outlined",color:E.color||"primary",size:"small",onClick:q=>{q.stopPropagation(),E.onClick&&E.onClick(t)},sx:{minWidth:"auto",px:1},children:E.buttonText||E.label||"액션"},`${e.id}-${t.id||s}-action-${z}`):null)});case"dropdown":if(e.dropdownType==="hierarchy")return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:n||1,size:"small",sx:{fontWeight:"medium",backgroundColor:"action.hover",cursor:"not-allowed","&:hover":{backgroundColor:"action.hover"}}})});if(e.id==="api"){const E=e.dropdownOptions||[{value:"Honor API",label:"Honor API"},{value:"disabled",label:"비활성"}],z=t.api||n||"Honor API",q=E.some(X=>X.value===z)?z:"Honor API";return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(Zt,{size:"small",sx:{minWidth:100},children:a(an,{value:q,onChange:X=>{X.stopPropagation();const H=X.target.value;e.onApiChange&&e.onApiChange(t,H)},sx:{"& .MuiSelect-select":{padding:"4px 8px",textAlign:"center"}},children:E.map(X=>a(Me,{value:X.value,children:X.label},X.value))})})})}return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n||"-"});case"hierarchical":if(e.cellRenderer==="chip"&&n){const E=t.level||0,z=t.children&&t.children.length>0,q=t.expanded!==void 0?t.expanded:!0;let X={};return typeof n=="object"?X={label:n.label||n.id||"",color:n.color||"primary",backgroundColor:n.backgroundColor,borderColor:n.borderColor}:X={label:n,color:"primary"},a(KC,{item:t,level:E,expanded:q,onToggle:H=>{e.onToggle&&e.onToggle(H)},hasChildren:z,typeInfo:X,indentMode:!0,showToggleIcon:!0})}return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n||"-"});case"horizontal":return n?e.id==="parentType"||e.id==="parentTypes"||e.id==="superAgent"?a(ng,{parentTypes:n,direction:"row",maxChips:8,sx:{justifyContent:"flex-start"}}):Array.isArray(n)?a(kr,{direction:"row",spacing:.5,flexWrap:"wrap",justifyContent:"center",children:n.map((E,z)=>e.cellRenderer==="chip"?a(ut,{label:E.label||E,size:"small",color:E.color||"primary",variant:E.variant||"filled",sx:{margin:"2px",backgroundColor:E.backgroundColor||void 0,borderColor:E.borderColor||void 0,color:E.borderColor||void 0,border:E.borderColor?`1px solid ${E.borderColor}`:void 0,"& .MuiChip-label":{color:E.borderColor||void 0}}},z):m(Ce.Fragment,{children:[z>0&&a(M,{variant:"body2",sx:{mx:.5,textAlign:"center !important"},children:"•"}),a(M,{variant:"body2",sx:{textAlign:"center !important"},children:E.label||E})]},`${e.id}-${t.id||s}-frag-${z}`))}):a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n}):"-";case"custom":if(e.customRenderer==="gameMoneyWithButton")return m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[a(M,{variant:"body2",children:`${Number(n||0).toLocaleString()}원`}),n>0&&a(Se,{size:"small",variant:"contained",sx:{padding:"2px 6px",fontSize:"10px",backgroundColor:"#1976d2",minWidth:"30px","&:hover":{backgroundColor:"#1565c0"}},onClick:E=>{E.stopPropagation(),window.handleGameMoneyTransfer&&window.handleGameMoneyTransfer(t.username,n)},title:"보유금으로 전환",children:"전환"})]});if(e.customRenderer==="rollingAmountWithButton"){const E=parseFloat(t.rolling_slot_amount||0),z=parseFloat(t.rolling_casino_amount||0),q=E+z,[X,H]=Ce.useState(null),K=!!X,ee=G=>{G.stopPropagation(),H(G.currentTarget)},ge=()=>{H(null)},oe=G=>{ge(),window.handleRollingTransfer&&window.handleRollingTransfer(t.id,G)};return m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[m(j,{sx:{textAlign:"right"},children:[m(M,{variant:"caption",sx:{display:"block",fontSize:"11px",color:"primary.main"},children:["슬롯: ",E.toLocaleString(),"원"]}),m(M,{variant:"caption",sx:{display:"block",fontSize:"11px",color:"secondary.main"},children:["카지노: ",z.toLocaleString(),"원"]})]}),q>0&&m(bn,{children:[a(Se,{size:"small",variant:"contained",sx:{padding:"2px 6px",fontSize:"10px",backgroundColor:"#9c27b0",minWidth:"30px","&:hover":{backgroundColor:"#7b1fa2"}},onClick:ee,title:"보유금으로 전환",children:"전환"}),m(vi,{anchorEl:X,open:K,onClose:ge,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[E>0&&m(Me,{onClick:()=>oe("slot"),children:[a(ur,{children:a(XC,{fontSize:"small",color:"primary"})}),a(_r,{primary:"슬롯 전환",secondary:`${E.toLocaleString()}원`})]}),z>0&&m(Me,{onClick:()=>oe("casino"),children:[a(ur,{children:a(YC,{fontSize:"small",color:"secondary"})}),a(_r,{primary:"카지노 전환",secondary:`${z.toLocaleString()}원`})]}),E>0&&z>0&&m(Me,{onClick:()=>oe("all"),children:[a(ur,{children:a(ij,{fontSize:"small",sx:{color:"#9c27b0"}})}),a(_r,{primary:"모두 전환",secondary:`${q.toLocaleString()}원`})]})]})]})]})}if(e.cellRenderer==="parentChips")return a(ng,{parentTypes:n,direction:"row",maxChips:8,sx:{justifyContent:"flex-start"}});if(e.render&&typeof e.render=="function"){const E=e.render(t);if(Ce.isValidElement(E))return E;n=E}if(e.customRenderer==="levelTypeChip")return n?a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:n,size:"small",sx:{backgroundColor:`${t.backgroundColor||"#e8f5e9"} !important`,color:`${t.borderColor||"#2e7d32"} !important`,border:`1px solid ${t.borderColor||"#2e7d32"} !important`,fontWeight:400,borderRadius:"50px",padding:"0 8px",height:"28px",fontSize:"0.8rem",maxWidth:"100%","&:hover":{backgroundColor:`${t.backgroundColor||"#e8f5e9"} !important`}}})}):"-";if(e.customRenderer==="rollingPercent"){const E=t.rolling_slot_percent||t.rollingPercent||0,z=t.rolling_casino_percent||t.rollingPercent||0;return m(j,{sx:{textAlign:"center",lineHeight:1.2},children:[m(M,{variant:"caption",sx:{display:"block",color:"primary.main"},children:["슬롯 ",E,"%"]}),m(M,{variant:"caption",sx:{display:"block",color:"secondary.main"},children:["카지노 ",z,"%"]})]})}return Ce.isValidElement(n)?n:typeof n=="string"||typeof n=="number"?a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:n||"-"}):a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:"-"});case"betting_date":if(!n||typeof n!="object")return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:"-"});const A=E=>uf(E,!0);return m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1,width:"100%"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ut,{label:"베팅",size:"small",sx:{backgroundColor:"info.light",color:"info.contrastText",fontWeight:"bold",fontSize:"11px",height:"22px",minWidth:"40px","& .MuiChip-label":{px:1,fontSize:"11px",fontWeight:"bold"}}}),a(M,{variant:"body2",sx:{fontSize:"16px",fontWeight:"medium",whiteSpace:"nowrap"},children:A(n.betting)})]}),n.process&&m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ut,{label:"처리",size:"small",sx:{backgroundColor:"success.light",color:"success.contrastText",fontWeight:"bold",fontSize:"11px",height:"22px",minWidth:"40px","& .MuiChip-label":{px:1,fontSize:"11px",fontWeight:"bold"}}}),a(M,{variant:"body2",sx:{fontSize:"16px",fontWeight:"medium",whiteSpace:"nowrap"},children:A(n.process)})]})]});case"betting_info":if(!n||typeof n!="object")return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:"-"});const D=E=>E==null?"정보없음":typeof E=="number"?E.toLocaleString():"-";return m(j,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:1,width:"100%",padding:"4px"},children:[a(ut,{label:`베팅전 ${D(n.before)}`,size:"small",sx:{backgroundColor:"rgba(255, 152, 0, 0.15)",color:"#e65100",border:"1px solid rgba(255, 152, 0, 0.4)",fontSize:"13px",fontWeight:"medium",height:"32px","& .MuiChip-label":{fontSize:"13px",fontWeight:"medium"}}}),a(ut,{label:`베팅금 ${D(n.betAmount)}`,size:"small",sx:{backgroundColor:"rgba(33, 150, 243, 0.15)",color:"#1565c0",border:"1px solid rgba(33, 150, 243, 0.4)",fontSize:"13px",fontWeight:"medium",height:"32px","& .MuiChip-label":{fontSize:"13px",fontWeight:"medium"}}}),a(ut,{label:`당첨금 ${D(n.winAmount)}`,size:"small",sx:{backgroundColor:n.winAmount>0?"rgba(76, 175, 80, 0.15)":"rgba(158, 158, 158, 0.15)",color:n.winAmount>0?"#2e7d32":"#616161",border:n.winAmount>0?"1px solid rgba(76, 175, 80, 0.4)":"1px solid rgba(158, 158, 158, 0.4)",fontSize:"13px",fontWeight:"medium",height:"32px","& .MuiChip-label":{fontSize:"13px",fontWeight:"medium"}}}),a(ut,{label:`베팅후 ${D(n.after)}`,size:"small",sx:{backgroundColor:"rgba(156, 39, 176, 0.15)",color:"#7b1fa2",border:"1px solid rgba(156, 39, 176, 0.4)",fontSize:"13px",fontWeight:"medium",height:"32px","& .MuiChip-label":{fontSize:"13px",fontWeight:"medium"}}})]});case"betting_action":return n?n==="applied"?a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(Se,{variant:"outlined",size:"small",color:"error",onClick:E=>{E.stopPropagation(),e.onVoidCancel&&e.onVoidCancel(t)},children:"공베팅취소"})}):n==="cancelled"?a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(Se,{variant:"outlined",size:"small",color:"primary",onClick:E=>{E.stopPropagation(),e.onVoidApply&&e.onVoidApply(t)},children:"공베팅적용"})}):a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(Se,{variant:"outlined",size:"small",color:"primary",onClick:E=>{E.stopPropagation(),e.onVoidApply&&e.onVoidApply(t)},children:"공베팅적용"})}):a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",color:"text.disabled"},children:"-"});case"date":return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:uf(n,!1)});case"datetime":return e.id==="created_at"||e.id==="updated_at"||e.id==="start_date"||e.id,a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%"},children:uf(n,!0)});case"status":const B={pending:{backgroundColor:"#FFE2E5",color:"#F64E60"},waiting:{backgroundColor:"#FFF4DE",color:"#FFA800"},rejected:{backgroundColor:"#EEE5FF",color:"#8950FC"}},$={pending:"요청 중",waiting:"대기",rejected:"비승인"},N=B[n]||{backgroundColor:"#f5f5f5",color:"#666"},F=$[n]||n||"-";return a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(ut,{label:F,size:"small",sx:{backgroundColor:N.backgroundColor,color:N.color,fontWeight:600,fontSize:"12px",height:"24px","& .MuiChip-label":{px:1.5}}})});default:if(e.buttons&&Array.isArray(e.buttons))return a(kr,{direction:"row",spacing:.5,justifyContent:"center",children:e.buttons.map((E,z)=>E.show&&typeof E.show=="function"&&!E.show(t)?null:a(Se,{variant:E.variant||"outlined",color:E.color||"primary",size:E.size||"small",onClick:q=>{q.stopPropagation(),E.onClick?E.onClick(t):e.onActionClick&&e.onActionClick(E.type,t)},sx:{minWidth:"auto",px:1},children:E.label},`${e.id}-${t.id||s}-btn-${z}`))});if(e.customRenderer==="rollingPercent"){const E=t.rolling_slot_percent||t.rollingPercent||0,z=t.rolling_casino_percent||t.rollingPercent||0;return m(j,{sx:{textAlign:"center",lineHeight:1.2},children:[m(M,{variant:"caption",sx:{display:"block",color:"primary.main"},children:["슬롯 ",E,"%"]}),m(M,{variant:"caption",sx:{display:"block",color:"secondary.main"},children:["카지노 ",z,"%"]})]})}if(e.format==="bankInfo"&&typeof n=="object"&&n!==null)return n.bankName&&n.accountNumber&&n.accountHolder?m(j,{sx:{textAlign:"center",width:"100%"},children:[m(M,{variant:"body2",sx:{fontSize:"13px",fontWeight:"bold"},children:[n.bankName," ",n.accountNumber]}),m(M,{variant:"body2",sx:{fontSize:"12px",color:"text.secondary"},children:["(",n.accountHolder,")"]})]}):a(M,{variant:"body2",sx:{textAlign:"center",width:"100%",color:"text.secondary"},children:"-"});let O=n;if(n!=null)if(typeof n=="object")if(e.id==="userId")Array.isArray(n)?O=n.length>1?`${n[0]} (${n[1]})`:n[0]||"":n.id&&n.nickname?O=`${n.id} (${n.nickname})`:O=JSON.stringify(n);else if(e.id&&e.id.includes(".")){const E=e.id.split(".");let z=t;for(const q of E)z=z==null?void 0:z[q];if(z!=null)if(typeof z=="number"){if(O=z.toLocaleString(),z<0)return a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",color:"error.main",fontWeight:500},children:O})}else O=String(z);else O="-"}else try{n.toString&&typeof n.toString=="function"&&n.toString()!=="[object Object]"?O=n.toString():O=JSON.stringify(n)}catch{O="[객체]"}else typeof n=="number"?O=n.toLocaleString():typeof n=="string"?n.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/)?O=uf(n,!0):O=n:O=String(n);else O="-";const R=a(M,{variant:"body2",sx:{textAlign:"center !important",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:O});return e.clickable?a(j,{onClick:l,sx:{cursor:"pointer","&:hover":{backgroundColor:"action.hover",borderRadius:1},width:"100%",padding:"4px"},children:R}):R}};oj.propTypes={column:re.object.isRequired,row:re.object.isRequired,value:re.any,sequentialPageNumbers:re.bool,page:re.number,rowsPerPage:re.number,rowIndex:re.number};const cD=Ce.memo(oj),sj=({columns:e,data:t,checkable:n,hierarchical:r,checkedItems:i,expandedRows:o,onCheck:s,onRowClick:l,onToggleExpand:c,sequentialPageNumbers:d=!1,page:h=0,rowsPerPage:f=10,indentMode:g=!0,pinnedColumns:w=[],tableKey:x=0,draggableRows:y=!1,rowDragHandlers:p={}})=>{const v=On(),[b,P]=u.useState({}),k=u.useCallback(()=>{const $={};document.querySelectorAll("thead [data-column-id]").forEach(F=>{const O=F.getAttribute("data-column-id");O&&($[O]=F.offsetWidth)}),P($)},[]);u.useEffect(()=>{const $=setTimeout(()=>{k()},150);return()=>clearTimeout($)},[x,k]);const C=u.useCallback(($,N=v.palette.background.paper)=>{if(!w.includes($))return{};const O=I().filter(H=>H.type!=="checkbox"),E=(n?["checkbox",...O.map(H=>H.id)]:O.map(H=>H.id)).filter(H=>w.includes(H)),z=$===E[E.length-1];let q=0;const X=E.indexOf($);for(let H=0;H<X;H++){const K=E[H];let ee=b[K];ee||(ee=K==="checkbox"?48:120),q+=ee}return{position:"sticky",left:`${q}px`,zIndex:$==="no"?15:$==="checkbox"?14:10,backgroundColor:N,boxShadow:z?"2px 0 5px rgba(0, 0, 0, 0.1)":"none","&::after":z?{content:'""',position:"absolute",right:0,top:0,bottom:0,width:"2px",backgroundColor:v.palette.primary.main,opacity:.3}:{}}},[w,b,n,v,e]),S=u.useCallback(($,N)=>{$.stopPropagation(),s&&s(N,$.target.checked)},[s]),_=u.useCallback(($,N)=>{l&&l(N)},[l]);u.useCallback(($,N)=>{$.stopPropagation(),c&&c(N)},[c]);const T=($,N)=>{if(!N)return;const F=N.split(".");let O=$;for(const R of F){if(O==null)return;O=O[R]}return O},I=u.useCallback(()=>{const $=[];return e.forEach(N=>{N.type==="group"&&Array.isArray(N.children)?N.children.forEach(F=>{$.push(F)}):$.push(N)}),$},[e]),L=u.useMemo(()=>I(),[I]),A=u.useMemo(()=>{if(!t||t.length===0)return[];if(r){const O=[],R=(X,H=0,K=!0)=>{if(!(!X||!X.length))for(const ee of X){if(!K)continue;O.push({...ee,_displayLevel:H,_originalIndex:O.length}),(o[ee.id]!==void 0?o[ee.id]:!0)&&ee.children&&ee.children.length>0&&R(ee.children,H+1,!0)}};if(R(t),O.length===0)return[];const E=Math.max(0,Math.min(h*f,O.length)),z=Math.min(E+f,O.length);return O.length>0&&E>=O.length?[]:O.slice(E,z)}const $=h*f,N=$+f;return t.length>0&&$>=t.length?[]:t.slice($,N)},[t,r,o,h,f]);return a(xa,{children:r?(($,N=0,F=!0,O={count:0})=>!$||!$.length?null:$.map((R,E)=>{const z=R._displayLevel!==void 0?R._displayLevel:N,q=F&&(!R.parentId||o[R.parentId]),X=R.children&&R.children.length>0,H=o[R.id]!==void 0?o[R.id]:!0;if(!q)return null;const K=O.count++,ee=i[R.id]?v.palette.action.selected:K%2===0?v.palette.background.paper:v.palette.grey[100],ge=`row-${R.id}-level-${z}-idx-${E}`;return a(Ce.Fragment,{children:m(mn,{hover:!0,onClick:oe=>_(oe,R),sx:{cursor:l?"pointer":"default","&:hover":{backgroundColor:v.palette.action.hover},backgroundColor:ee},children:[n&&a(ye,{padding:"checkbox",align:"center",sx:{borderBottom:`1px solid ${v.palette.grey[200]}`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",...C("checkbox",ee),"tr:hover &":{backgroundColor:v.palette.grey[100],zIndex:6}},children:a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(gr,{checked:!!i[R.id],onChange:oe=>S(oe,R.id),onClick:oe=>oe.stopPropagation(),color:"primary"})})}),L.map((oe,G)=>oe.type==="checkbox"?null:a(ye,{"data-column-id":oe.id,align:oe.type==="horizontal"?"left":oe.align||"center",onClick:oe.clickable&&oe.onClick?Q=>{Q.stopPropagation(),oe.onClick(R)}:void 0,sx:{borderBottom:`1px solid ${v.palette.grey[200]}`,whiteSpace:(oe.type==="horizontal","nowrap"),overflow:"visible",textOverflow:"ellipsis",cursor:oe.clickable?"pointer":"default","&:hover":oe.clickable?{backgroundColor:"action.hover"}:{},...C(oe.id,ee),"tr:hover &":{backgroundColor:v.palette.grey[100],zIndex:6}},children:oe.type==="hierarchical"?a(KC,{item:R,level:z,expanded:H,onToggle:c,hasChildren:X,typeInfo:R[oe.id]||{},indentMode:g,showToggleIcon:r}):a(cD,{column:oe,row:R,value:T(R,oe.id),sequentialPageNumbers:d,page:h,rowsPerPage:f,rowIndex:K})},`${R.id}-${oe.id}`))]})},ge)}))(A):!A||A.length===0?null:A.map(($,N)=>{const F=i[$.id]?v.palette.action.selected:N%2===0?v.palette.background.paper:v.palette.grey[50],O=y&&p.getDragHandleProps?p.getDragHandleProps($):{};return m(mn,{hover:!0,onClick:R=>_(R,$),...O,sx:{cursor:y?"grab":l?"pointer":"default","&:hover":{backgroundColor:v.palette.action.hover},backgroundColor:F,...O.style},children:[n&&a(ye,{padding:"checkbox",align:"center",sx:{borderBottom:`1px solid ${v.palette.grey[200]}`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",...C("checkbox",F),"tr:hover &":{backgroundColor:v.palette.grey[100],zIndex:6}},children:a(j,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:a(gr,{checked:!!i[$.id],onChange:R=>S(R,$.id),onClick:R=>R.stopPropagation(),color:"primary"})})}),L.map(R=>R.type==="checkbox"?null:a(ye,{"data-column-id":R.id,align:R.type==="horizontal"?"left":R.align||"center",onClick:R.clickable&&R.onClick?E=>{E.stopPropagation(),R.onClick($)}:void 0,sx:{borderBottom:`1px solid ${v.palette.grey[200]}`,whiteSpace:(R.type==="horizontal","nowrap"),overflow:"visible",textOverflow:"ellipsis",cursor:R.clickable?"pointer":"default","&:hover":R.clickable?{backgroundColor:"action.hover"}:{},...C(R.id,F),"tr:hover &":{backgroundColor:v.palette.grey[100],zIndex:6}},children:a(cD,{column:R,row:$,value:T($,R.id),sequentialPageNumbers:d,page:h,rowsPerPage:f,rowIndex:N})},`${$.id}-${R.id}`))]},$.id)})})};sj.propTypes={columns:re.arrayOf(re.object).isRequired,data:re.arrayOf(re.object).isRequired,checkable:re.bool,hierarchical:re.bool,checkedItems:re.object,expandedRows:re.object,onCheck:re.func,onRowClick:re.func,onToggleExpand:re.func,sequentialPageNumbers:re.bool,page:re.number,rowsPerPage:re.number,indentMode:re.bool,pinnedColumns:re.array,tableKey:re.number,draggableRows:re.bool,rowDragHandlers:re.object};const Yre=Ce.memo(sj),Jw=({columns:e,summaryData:t=null,summaryConfig:n=null,checkable:r=!1,pinnedColumns:i=[],showCurrentPageOnly:o=!1,onToggle:s,tableKey:l=0,fixedFooter:c=!1})=>{var P,k,C,S,_,T,I,L,A,D;const d=On(),[h,f]=u.useState({});u.useMemo(()=>e.some(B=>B.type==="group"),[e]);const g=u.useCallback(()=>{const B=[];return e.forEach($=>{$.type==="group"&&Array.isArray($.children)?$.children.forEach(N=>{B.push(N)}):B.push($)}),B},[e]),w=u.useMemo(()=>g(),[g]),x=u.useCallback(()=>{let B=0,$=0;const N=150,F=w.filter(O=>O.type!=="checkbox");for(const O of F){let R=O.width;if(typeof R=="string"&&(R=parseInt(R.replace("px",""),10)),R=R||100,B+=R,$++,B>=N)break}return Math.max(1,$)},[w]),y=u.useMemo(()=>x(),[x]),p=u.useCallback(()=>{const B={};document.querySelectorAll("thead [data-column-id]").forEach(N=>{const F=N.getAttribute("data-column-id");F&&(B[F]=N.offsetWidth)}),f(B)},[]);u.useEffect(()=>{const B=setTimeout(()=>{p()},150);return()=>clearTimeout(B)},[l,p]);const v=u.useCallback((B,$)=>{var F;const N=(F=n==null?void 0:n.columns)==null?void 0:F[B];if(!N||$===null||$===void 0)return"-";switch(N.format){case"currency":return`${N.prefix||""}${Number($).toLocaleString()}${N.suffix||"원"}`;case"percent":return`${Number($).toFixed(N.precision||2)}%`;case"number":return Number($).toLocaleString();default:return $}},[n]),b=u.useCallback((B,$=(F=>(F=(N=>(N=n==null?void 0:n.ui)==null?void 0:N.styling)())==null?void 0:F.backgroundColor)()||d.palette.grey[100])=>{if(!i.includes(B))return{};const O=w.filter(H=>H.type!=="checkbox"),E=(r?["checkbox",...O.map(H=>H.id)]:O.map(H=>H.id)).filter(H=>i.includes(H)),z=B===E[E.length-1];let q=0;const X=E.indexOf(B);for(let H=0;H<X;H++){const K=E[H];let ee=h[K];ee||(ee=K==="checkbox"?48:120),q+=ee}return{position:"sticky",left:`${q}px`,zIndex:B==="no"?15:B==="checkbox"?14:10,backgroundColor:$,boxShadow:z?"2px 0 5px rgba(0, 0, 0, 0.1)":"none","&::after":z?{content:'""',position:"absolute",right:0,top:0,bottom:0,width:"2px",backgroundColor:d.palette.primary.main,opacity:.3}:{}}},[i,h,r,d,n,w]);return!(n!=null&&n.enabled)||!t?null:m(mn,{sx:{backgroundColor:((k=(P=n==null?void 0:n.ui)==null?void 0:P.styling)==null?void 0:k.backgroundColor)||"#f5f5f5",fontWeight:((S=(C=n==null?void 0:n.ui)==null?void 0:C.styling)==null?void 0:S.fontWeight)||600,"& td":{borderTop:`2px solid ${((T=(_=n==null?void 0:n.ui)==null?void 0:_.styling)==null?void 0:T.borderColor)||d.palette.primary.main}`,borderBottom:"none"},"&:hover":{backgroundColor:((L=(I=n==null?void 0:n.ui)==null?void 0:I.styling)==null?void 0:L.backgroundColor)||"#f5f5f5"},...c&&{position:"sticky",bottom:0,zIndex:20,boxShadow:"0 -2px 5px rgba(0, 0, 0, 0.1)",backgroundColor:((D=(A=n==null?void 0:n.ui)==null?void 0:A.styling)==null?void 0:D.backgroundColor)||"#f5f5f5"}},children:[r&&a(ye,{padding:"checkbox",sx:b("checkbox")}),w.map((B,$)=>{var R,E,z;if(B.type==="checkbox")return null;const N=w.filter((q,X)=>X<$&&q.type!=="checkbox").length,F=N===0;if(!F&&N<y)return null;const O=t[B.id];return a(ye,{"data-column-id":B.id,align:B.align||"center",colSpan:F?y:1,sx:{...b(B.id),whiteSpace:"nowrap"},children:F?m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(M,{variant:"subtitle2",sx:{fontWeight:700},children:((R=n==null?void 0:n.ui)==null?void 0:R.label)||"합계"}),((E=n==null?void 0:n.ui)==null?void 0:E.toggleable)&&a(Lt,{control:a(gr,{size:"small",checked:o,onChange:q=>s==null?void 0:s(q.target.checked)}),label:a(M,{variant:"caption",children:((z=n==null?void 0:n.ui)==null?void 0:z.toggleLabel)||"현재 페이지만"}),sx:{ml:2,mb:0}})]}):O!==void 0?a(M,{variant:"body2",sx:{fontWeight:600},children:v(B.id,O)}):null},`${B.id}-${l}`)})]})};Jw.propTypes={columns:re.arrayOf(re.object).isRequired,summaryData:re.object,summaryConfig:re.object,checkable:re.bool,pinnedColumns:re.arrayOf(re.string),showCurrentPageOnly:re.bool,onToggle:re.func,tableKey:re.number,fixedFooter:re.bool};const An=({columns:e=[],data:t=[],checkable:n=!1,hierarchical:r=!1,onRowClick:i,onSort:o,onCheck:s,onToggleExpand:l,page:c=0,rowsPerPage:d=10,totalCount:h=0,sequentialPageNumbers:f=!1,draggableColumns:g=!1,onColumnOrderChange:w,dragHandlers:x={},dragInfo:y={dragging:!1,columnId:null},indentMode:p=!0,sx:v={},tableHeaderRef:b=null,headerStyle:P={},fixedHeader:k=!1,maxHeight:C="400px",pinnedColumns:S=[],checkedItems:_={},expandedRows:T={},allChecked:I=!1,onToggleAll:L,sortConfig:A={key:null,direction:null},draggableRows:D=!1,rowDragHandlers:B={},summary:$=null,onSummaryToggle:N,fixedFooter:F=!1})=>{const O=On(),R=u.useRef(null),[E,z]=u.useState(0),[q,X]=u.useState({key:null,direction:null}),[H,K]=u.useState(!1),ee=u.useCallback(()=>{z(we=>we+1)},[]);u.useEffect(()=>{if(r&&t&&t.length>0){const we={},ce=De=>{!De||!De.length||De.forEach(le=>{le.id!==void 0&&(we[le.id]=!0),le.children&&le.children.length>0&&ce(le.children)})};ce(t)}},[r,t]),u.useEffect(()=>{t!=null&&t.length,t==null||t[0],e.map(we=>({id:we.id,type:we.type,label:we.label}))},[c,d,h,t,f,e]),u.useEffect(()=>{if(r&&S.length>0){const we=setTimeout(()=>{ee()},50);return()=>clearTimeout(we)}},[T,r,S.length,ee]);const ge=u.useMemo(()=>e.some(we=>we.type==="group"&&Array.isArray(we.children)),[e]),oe=u.useCallback(we=>{let ce="asc";q.key===we&&(q.direction==="asc"?ce="desc":q.direction==="desc"?ce=null:ce="asc"),X({key:we,direction:ce}),o&&o(we,ce)},[q,o]),G=u.useCallback((we,ce)=>{const De={..._,[we]:ce};s&&s(we,ce,De)},[_,s]),Q=u.useCallback(we=>{const ce={...T,[we]:!T[we]};l&&l(we,ce[we])},[T,l]),te=u.useCallback(we=>{const De=(le=>{const se=_e=>{let Re=[];return _e.forEach(He=>{Re.push(He),He.children&&He.children.length>0&&(Re=[...Re,...se(He.children)])}),Re},J=se(le),Z=c*d,ie=Z+d;return J.slice(Z,ie)})(t);we&&De.forEach(le=>{}),L&&L(we)},[t,L,c,d]),U=u.useMemo(()=>{const we={boxShadow:O.shadows[2],borderRadius:"10px",overflow:"auto",overflowX:"auto",overflowY:"auto",overscrollBehavior:"contain",width:"100%",maxWidth:"100%","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:O.palette.grey[400],borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:O.palette.grey[200]},...v};return k?{...we,maxHeight:C}:we},[O,v,k,C]);u.useMemo(()=>k?{position:"sticky",top:0,zIndex:25,backgroundColor:O.palette.background.paper,boxShadow:`0 1px 2px ${O.palette.grey[300]}`,...P}:{},[k,O,P]);const V=u.useCallback((we,ce)=>{if(!(ce!=null&&ce.columns)||!(we!=null&&we.length))return{};const De={};return Object.entries(ce.columns).forEach(([le,se])=>{if(!se)return;let J=we;se.condition&&(J=we.filter(ie=>se.condition(ie)));const Z=J.map(ie=>{const _e=le.split(".");let Re=ie;for(const He of _e)Re=Re==null?void 0:Re[He];return Re}).filter(ie=>ie!=null&&!isNaN(ie));switch(se.type){case"sum":De[le]=Z.reduce((ie,_e)=>ie+Number(_e),0);break;case"avg":De[le]=Z.length>0?Z.reduce((ie,_e)=>ie+Number(_e),0)/Z.length:0;break;case"count":De[le]=J.length;break;case"min":De[le]=Z.length>0?Math.min(...Z.map(Number)):0;break;case"max":De[le]=Z.length>0?Math.max(...Z.map(Number)):0;break;case"custom":se.customCalculator&&(De[le]=se.customCalculator(Z,J));break;default:De[le]=0}}),De},[]),ae=u.useMemo(()=>{if(!t||t.length===0)return[];const we=se=>{let J=[];return se.forEach(Z=>{J.push(Z),Z.children&&Z.children.length>0&&T[Z.id]&&(J=[...J,...we(Z.children)])}),J},ce=r?we(t):t,De=c*d,le=De+d;return ce.slice(De,le)},[t,c,d,r,T]),ne=u.useMemo(()=>{var ce;if(!((ce=$==null?void 0:$.scope)!=null&&ce.customFilter))return t;const we=De=>De.filter(le=>{const se=$.scope.customFilter(le);return se&&le.children&&le.children.length>0&&(le.children=we(le.children)),se});return we([...t])},[t,$]),me=u.useMemo(()=>{var De,le,se,J,Z;if(!($!=null&&$.enabled)||!(t!=null&&t.length))return null;let we=t;if(((De=$.scope)==null?void 0:De.type)==="page"||H)we=ae,(le=$.scope)!=null&&le.customFilter&&(we=we.filter(ie=>$.scope.customFilter(ie)));else if(((se=$.scope)==null?void 0:se.type)==="filtered")we=ne;else if(((J=$.scope)==null?void 0:J.type)==="all"&&((Z=$.scope)!=null&&Z.customFilter))if(r){const ie=(Re,He=0)=>{let ft=[];return Re.forEach(St=>{ft.push(St),St.children&&St.children.length>0&&(ft=[...ft,...ie(St.children,He+1)])}),ft};we=ie(t).filter(Re=>$.scope.customFilter(Re))}else we=t.filter(ie=>$.scope.customFilter(ie));return V(we,$)},[t,$,H,ae,ne,V,r]),ue=u.useCallback(we=>{K(we),N==null||N(we)},[N]),Ae=u.useMemo(()=>{if(!e||e.length===0)return 800;let we=0;return n&&(we+=48),e.forEach(ce=>{if(ce.type==="group"&&ce.children)ce.children.forEach(De=>{const le=De.width;typeof le=="string"&&le.includes("px")?we+=parseInt(le.replace("px",""),10):typeof le=="number"?we+=le:we+=150});else if(ce.type!=="checkbox"){const De=ce.width;typeof De=="string"&&De.includes("px")?we+=parseInt(De.replace("px",""),10):typeof De=="number"?we+=De:we+=150}}),Math.max(we+50,800)},[e,n]);return a(wa,{component:rt,sx:U,children:m(va,{ref:R,sx:{minWidth:Ae,borderCollapse:"separate",borderSpacing:0,tableLayout:"auto","& thead":k?{position:"sticky",top:0,zIndex:20,backgroundColor:O.palette.background.paper}:{}},children:[($==null?void 0:$.enabled)&&(($==null?void 0:$.position)==="top"||($==null?void 0:$.position)==="both")&&a(pa,{children:a(Jw,{columns:e,summaryData:me,summaryConfig:$,checkable:n,pinnedColumns:S,showCurrentPageOnly:H,onToggle:ue,tableKey:E})}),a(aj,{columns:e,hasGroupHeaders:ge,onSort:oe,sortConfig:q,checkable:n,onToggleAll:te,allChecked:I,draggable:g,dragHandlers:x,dragInfo:y,ref:b,pinnedColumns:S,tableKey:E}),a(Yre,{columns:e,data:t,checkable:n,hierarchical:r,checkedItems:_,expandedRows:T,onCheck:G,onRowClick:i,onToggleExpand:Q,sequentialPageNumbers:f,page:c,rowsPerPage:d,indentMode:p,pinnedColumns:S,tableKey:E,draggableRows:D,rowDragHandlers:B}),($==null?void 0:$.enabled)&&(($==null?void 0:$.position)==="bottom"||($==null?void 0:$.position)==="both")&&a(MF,{children:a(Jw,{columns:e,summaryData:me,summaryConfig:$,checkable:n,pinnedColumns:S,showCurrentPageOnly:H,onToggle:ue,tableKey:E,fixedFooter:F})})]},`table-${E}`)})};An.propTypes={columns:re.arrayOf(re.object),data:re.arrayOf(re.object),checkable:re.bool,hierarchical:re.bool,onRowClick:re.func,onSort:re.func,onCheck:re.func,onToggleExpand:re.func,page:re.number,rowsPerPage:re.number,totalCount:re.number,sequentialPageNumbers:re.bool,draggableColumns:re.bool,onColumnOrderChange:re.func,dragHandlers:re.object,dragInfo:re.object,indentMode:re.bool,sx:re.object,tableHeaderRef:re.oneOfType([re.func,re.shape({current:re.any})]),headerStyle:re.object,fixedHeader:re.bool,maxHeight:re.oneOfType([re.number,re.string]),pinnedColumns:re.arrayOf(re.string),checkedItems:re.object,expandedRows:re.object,allChecked:re.bool,onToggleAll:re.func,sortConfig:re.object,draggableRows:re.bool,rowDragHandlers:re.object,summary:re.shape({enabled:re.bool,position:re.oneOf(["top","bottom","both"]),scope:re.shape({type:re.oneOf(["page","filtered","all"]),customFilter:re.func,excludeFilters:re.arrayOf(re.string)}),columns:re.object,ui:re.shape({label:re.string,toggleable:re.bool,toggleLabel:re.string,styling:re.object})}),onSummaryToggle:re.func,fixedFooter:re.bool};const lj="table_settings_",JC=(e,t=null)=>{try{const n=localStorage.getItem(`${lj}${e}`);return n?JSON.parse(n):t}catch(n){return console.warn(`localStorage에서 ${e} 읽기 실패:`,n),t}},QC=(e,t)=>{try{localStorage.setItem(`${lj}${e}`,JSON.stringify(t))}catch(n){console.warn(`localStorage에 ${e} 저장 실패:`,n)}},Xre=(e,t)=>{QC(`column_visibility_${e}`,t)},uD=(e,t={})=>JC(`column_visibility_${e}`,t),Jre=(e,t)=>{QC(`column_order_${e}`,t)},dD=(e,t=[])=>JC(`column_order_${e}`,t),Qre=(e,t)=>{QC(`pinned_columns_${e}`,t)},hD=(e,t=[])=>JC(`pinned_columns_${e}`,t),Zre=(e={})=>{const{initialFilters:t={},onFilterChange:n,initialDateFilterActive:r=!1,initialDateRange:i={startDate:null,endDate:null}}=e,[o,s]=u.useState(t),[l,c]=u.useState(r),[d,h]=u.useState(i),[f,g]=u.useState(!1),[w,x]=u.useState(null),y=u.useCallback((S,_)=>{const T={...o,[S]:_};s(T),n&&n(T)},[o,n]),p=u.useCallback(S=>{x(S.currentTarget),g(!0)},[]),v=u.useCallback(()=>{x(null),g(!1)},[]),b=u.useCallback(S=>{h(S),c(!0),g(!1),n&&n({...o,dateRange:S})},[o,n]),P=u.useCallback(()=>{if(h({startDate:null,endDate:null}),c(!1),n){const{dateRange:S,..._}=o;n(_)}},[o,n]),k=u.useCallback(()=>{s({}),h({startDate:null,endDate:null}),c(!1),n&&n({})},[n]),C=u.useCallback((S,_)=>{if(!S||S.length===0)return[];const T=I=>{const L=Object.entries(_).every(([D,B])=>{if(!B||B==="")return!0;const $=I[D];return $==null?!1:String($).toLowerCase().includes(String(B).toLowerCase())});let A=[];return I.children&&I.children.length>0&&(A=I.children.map(D=>T(D)).filter(D=>D!==null)),L||A.length>0?{...I,children:A}:null};return S.map(I=>T(I)).filter(I=>I!==null)},[]);return{activeFilters:o,setActiveFilters:s,handleFilterChange:y,isDateFilterActive:l,isDateFilterOpen:f,dateFilterAnchorEl:w,dateRange:d,handleOpenDateFilter:p,handleCloseDateFilter:v,handleDateRangeChange:b,resetDateFilter:P,resetAllFilters:k,filterHierarchicalData:C}},eae=(e={})=>{const{initialPage:t=0,initialRowsPerPage:n=25,rowsPerPageOptions:r=[10,25,50,100],totalItems:i=0,onPageChange:o,onRowsPerPageChange:s,onExcelDownload:l,onPrint:c}=e,[d,h]=u.useState(t),[f,g]=u.useState(n),[w,x]=u.useState(i);u.useEffect(()=>{x(i)},[i]),u.useEffect(()=>{if(i>0){const L=Math.max(0,Math.ceil(i/f)-1);d>L&&(h(L),o==null||o(null,L))}},[i,f,d,o]);const y=Math.max(1,Math.ceil(w/f)),p=d*f+1,v=Math.min((d+1)*f,w),b=u.useCallback((L,A)=>{let D=A;return typeof L=="number"&&A===void 0?D=L:D==null&&(D=d),typeof D!="number"&&(D=0),D=Math.max(0,Math.min(D,Math.ceil(w/f)-1)),D!==d&&(h(D),o&&o(null,D)),D},[o,d,f,w]),P=u.useCallback(()=>{b(null,0)},[b]),k=u.useCallback(()=>{b(null,y-1)},[b,y]),C=u.useCallback(()=>{d>0&&b(null,d-1)},[b,d]),S=u.useCallback(()=>{d<y-1&&b(null,d+1)},[b,d,y]),_=u.useCallback(L=>{let A;return L&&L.target&&L.target.value?A=parseInt(L.target.value,10):typeof L=="number"?A=L:typeof L=="object"&&typeof L.value=="number"?A=L.value:A=r[0],g(A),h(0),s&&s(A),{target:{value:A}}},[s,r]),T=u.useCallback(()=>{l&&l()},[l]),I=u.useCallback(()=>{c&&c()},[c]);return{page:d,setPage:h,rowsPerPage:f,setRowsPerPage:g,totalCount:w,totalPages:y,startItem:p,endItem:v,rowsPerPageOptions:r,handlePageChange:b,handleRowsPerPageChange:_,goToFirstPage:P,goToLastPage:k,goToPreviousPage:C,goToNextPage:S,handleExcelDownload:T,handlePrint:I}},yr=(e={})=>{const{columns:t=[],data:n=[],defaultRowsPerPage:r=25,hierarchical:i=!1,filterOptions:o={},paginationOptions:s={},onStateChange:l,enableSafeFilters:c=!0}=e,d=o.onFilterChange,h=s.onPageChange,f=s.onRowsPerPageChange,g=s.onExcelDownload,w=s.onPrint,x=o.initialFilters||{},y=s.initialPage||0,[p,v]=u.useState(y),[b,P]=u.useState(x),k=u.useRef(p),C=u.useRef(b),S=u.useRef(null);u.useEffect(()=>{k.current=p},[p]),u.useEffect(()=>{C.current=b},[b]);const _=u.useCallback((E,z)=>{l&&S.current&&l({filters:E,pagination:{page:z.page,rowsPerPage:z.rowsPerPage||S.current.rowsPerPage,totalCount:S.current.totalCount}})},[l]),T=u.useCallback(E=>{P(E),d&&d(E),v(0),_(E,{page:0})},[d,_]),I=u.useCallback((E,z)=>{let q=z;typeof E=="number"&&z===void 0?q=E:typeof E=="object"&&E!==null&&z===void 0&&(q=0),q!==void 0&&typeof q=="number"&&(v(q),h&&h(null,q),_(C.current,{page:q}))},[p,h,_,C]),L=u.useCallback(E=>{if(typeof E=="number"){const q=E;v(0),f&&f(q),_(C.current,{page:0,rowsPerPage:q});return}let z;if(E&&E.target&&E.target.value)z=parseInt(E.target.value,10);else if(E&&typeof E.value=="number")z=E.value;else return;v(0),f&&f(z),_(C.current,{page:0,rowsPerPage:z})},[C,f,_,S]),A=Zre({...o,initialFilters:b,onFilterChange:T}),[D,B]=u.useState(0),$=eae({...s,initialPage:p,initialRowsPerPage:s.initialRowsPerPage||r,totalItems:D,onPageChange:I,onRowsPerPageChange:L,onExcelDownload:g,onPrint:w});u.useEffect(()=>{S.current=$,l&&l({filters:b,pagination:{page:p,rowsPerPage:$.rowsPerPage,totalCount:$.totalCount}})},[$,l,b,p]);const N=u.useCallback(()=>{A.resetAllFilters(),$.setPage(0),v(0),P({}),l&&l({filters:{},pagination:{page:0,rowsPerPage:$.rowsPerPage,totalCount:$.totalCount}})},[A,$,l]),F=u.useCallback(E=>{Object.entries(E).forEach(([z,q])=>{A.handleFilterChange(z,q)})},[A]),O=u.useCallback(()=>{A&&A.resetAllFilters&&A.resetAllFilters()},[A]),R=u.useMemo(()=>{if(!c)return A.activeFilters;const E={...A.activeFilters};return Object.keys(E).forEach(z=>{E[z]==="all"&&(E[z]="")}),E},[A.activeFilters,c]);return{...A,safeActiveFilters:R,...$,filteredData:A.filteredData||[],totalCount:$.totalCount||D||0,resetAllFiltersAndPagination:N,setTotalItems:B,currentPage:$.page||0,currentRowsPerPage:$.rowsPerPage||r,pageSize:$.rowsPerPage||r,handlePageChange:$.handlePageChange,handleRowsPerPageChange:$.handleRowsPerPageChange,handleFilterChange:T,handleFilter:F,handleClearFilters:O,resetAllFilters:A.resetAllFilters,isDateFilterActive:A.isDateFilterActive,isDateFilterOpen:A.isDateFilterOpen,dateFilterAnchorEl:A.dateFilterAnchorEl,dateRange:A.dateRange,handleOpenDateFilter:A.handleOpenDateFilter,handleCloseDateFilter:A.handleCloseDateFilter,handleDateRangeChange:A.handleDateRangeChange,resetDateFilter:A.resetDateFilter,sequentialPageNumbers:$.sequentialPageNumbers||!1,togglePageNumberMode:$.togglePageNumberMode}},tae=({data:e=[],types:t={},typeHierarchy:n={},typeField:r="type",expandAll:i=!0}={})=>{const[o,s]=u.useState(i?Object.keys(t).reduce((_,T)=>({..._,[T]:!0}),{}):{}),l=u.useMemo(()=>{const _={},T=(L,A=0)=>{_[L]=A,n[L]&&n[L].forEach(D=>{T(D,A+1)})};return Object.keys(n).filter(L=>!Object.values(n).some(A=>Array.isArray(A)&&A.includes(L))).forEach(L=>{T(L)}),_},[n]),c=u.useCallback(_=>{if(!_||!_[r])return null;if(typeof _[r]=="object"&&_[r].label){const T=_[r].label;return Object.keys(t).find(I=>t[I].label===T)||null}if(typeof _[r]=="object"&&_[r].id)return _[r].id;if(typeof _[r]=="string"){const T=Object.keys(t).find(I=>t[I].label===_[r]);return T||_[r]}return null},[t,r]),d=u.useCallback(_=>{if(_==null)return null;const T=typeof _=="number"?_.toString():_,I=L=>{if(!L||!L.length)return null;for(const A of L){if(!A)continue;if((typeof A.id=="number"?A.id.toString():A.id)===T)return A;if(A.children&&A.children.length){const B=I(A.children);if(B)return B}}return null};return I(e)},[e]),h=u.useMemo(()=>{const _={};Object.keys(t).sort((D,B)=>{var F,O,R,E;const $=((F=t[D])==null?void 0:F.order)??((O=t[D])==null?void 0:O.hierarchyOrder)??999,N=((R=t[B])==null?void 0:R.order)??((E=t[B])==null?void 0:E.hierarchyOrder)??999;return $-N}).forEach(D=>{_[D]=e.filter(B=>c(B)===D)});const I=()=>{const D=[],B=Object.keys(n).filter(N=>!Object.values(n).some(F=>Array.isArray(F)&&F.includes(N)));B.sort((N,F)=>{var E,z,q,X;const O=((E=t[N])==null?void 0:E.order)??((z=t[N])==null?void 0:z.hierarchyOrder)??999,R=((q=t[F])==null?void 0:q.order)??((X=t[F])==null?void 0:X.hierarchyOrder)??999;return O-R});const $=N=>{const F=_[N]||[],O=n[N]||[];return F.map(R=>{const E=O.flatMap(z=>$(z));return{...R,level:l[N]||0,children:E.length>0?E:void 0}})};return B.forEach(N=>{D.push(...$(N))}),D},L=()=>{const D=(B,$=0)=>B?B.map(N=>{const F=c(N),O=F?l[F]||0:$;return{...N,level:O,children:N.children?D(N.children,O+1):void 0}}):[];return D(e)};return e.some(D=>Array.isArray(D.children)&&D.children.length>0)?L():I()},[e,t,n,c,l]),f=u.useMemo(()=>{const _=[],T=(I,L=!0)=>{I&&I.forEach(A=>{const D=c(A),B=D?o[D]:!0;L&&_.push(A),A.children&&B&&T(A.children,L)})};return T(h),_},[h,o,c]),g=u.useCallback((_=h)=>{if(!_||!_.length)return 0;let T=0;return _.forEach(I=>{T++,I.children&&I.children.length>0&&(T+=g(I.children))}),T},[h]),w=u.useCallback((_=h)=>{if(!_||!_.length)return 0;let T=0;return _.forEach(I=>{const L=c(I),A=L?o[L]:!0;T++,I.children&&I.children.length>0&&A&&(T+=w(I.children))}),T},[h,o,c]),x=u.useMemo(()=>g(),[g]),y=u.useMemo(()=>w(),[w]),p=u.useCallback(_=>{_&&s(T=>({...T,[_]:!T[_]}))},[]),v=u.useCallback(_=>{const T=typeof _=="object"&&_!==null?_:d(_);if(!T)return;const I=c(T);I&&p(I)},[c,p,d]),b=u.useCallback(_=>{const T={};Object.keys(t).forEach(I=>{T[I]=_}),s(T)},[t]),P=u.useCallback(_=>!!o[_],[o]),k=u.useCallback(_=>_&&_.children&&_.children.length>0,[]),C=u.useCallback(_=>{if(!n[_])return[];const T=[...n[_]];return n[_].forEach(I=>{T.push(...C(I))}),T},[n]),S=u.useCallback(_=>{if(!t[_])return[];const T=A=>{var D;return(D=Object.entries(n).find(([B,$])=>$.includes(A)))==null?void 0:D[0]},I=[_];let L=_;for(;;){const A=T(L);if(!A)break;I.unshift(A),L=A}return I},[t,n]);return{expandedTypes:o,hierarchicalData:h,flattenedData:f,typeLevelMap:l,getTypeId:c,isTypeExpanded:P,hasChildren:k,findItemById:d,getChildTypes:C,getTypePath:S,toggleTypeExpand:p,toggleRowExpand:v,setAllExpanded:b,setExpandedTypes:s,totalItemCount:x,visibleItemCount:y}},nae=({dataService:e=null,autoInitialize:t=!0,enableRealtime:n=!0,initialTypes:r={},initialTypeHierarchy:i={}}={})=>{const[o,s]=u.useState(r),[l,c]=u.useState(i),[d,h]=u.useState([]),[f,g]=u.useState(!1),[w,x]=u.useState(null),[y,p]=u.useState(!1),v=u.useRef(null),b=u.useRef(e);u.useEffect(()=>{b.current=e},[e]);const P=u.useCallback(F=>{var q;const{type:O,data:R,types:E,typeHierarchy:z}=F;E&&s(E),z&&c(z),(q=b.current)!=null&&q.getRawData&&h(b.current.getRawData()),x(null),g(!1)},[]),k=u.useCallback(async()=>{var F,O,R,E,z,q;if(!(y||!b.current)){g(!0),x(null);try{b.current.initialize&&await b.current.initialize();const X=((O=(F=b.current).getTypes)==null?void 0:O.call(F))||{},H=((E=(R=b.current).getTypeHierarchy)==null?void 0:E.call(R))||{},K=((q=(z=b.current).getRawData)==null?void 0:q.call(z))||[];s(X),c(H),h(K),n&&b.current.addListener&&(v.current=b.current.addListener(P)),p(!0)}catch(X){console.error("=== useDynamicTypes 초기화 실패 ===",X),x(X.message||"초기화 중 오류가 발생했습니다.")}finally{g(!1)}}},[y,n,P]),C=u.useCallback(()=>{var F,O,R,E,z,q;if(b.current){g(!0),x(null);try{if(b.current.requestInitialData)b.current.requestInitialData();else if(b.current.refresh)b.current.refresh();else{const X=((O=(F=b.current).getTypes)==null?void 0:O.call(F))||{},H=((E=(R=b.current).getTypeHierarchy)==null?void 0:E.call(R))||{},K=((q=(z=b.current).getRawData)==null?void 0:q.call(z))||[];s(X),c(H),h(K),g(!1)}}catch(X){console.error("데이터 새로고침 실패:",X),x(X.message||"데이터 새로고침 중 오류가 발생했습니다."),g(!1)}}},[]),S=u.useCallback(F=>o[F]||null,[o]),_=u.useCallback(F=>{const O=o[F];return!O||!d.length?null:d.find(R=>R.id===O.id)||null},[o,d]),T=u.useCallback(F=>{const O=Object.entries(o).find(([R,E])=>E.label===F);return O?O[0]:null},[o]),I=u.useCallback(()=>Object.entries(o).sort(([,F],[,O])=>(F.hierarchyOrder||0)-(O.hierarchyOrder||0)).map(([F,O])=>({typeId:F,...O})),[o]),L=u.useCallback(F=>l[F]||[],[l]),A=u.useCallback(F=>{const O=Object.entries(l).find(([R,E])=>E.includes(F));return O?O[0]:null},[l]),D=u.useCallback(F=>{const O=[F];let R=F;for(;;){const E=A(R);if(!E)break;O.unshift(E),R=E}return O},[A]),B=u.useCallback(F=>{const O=[],R=(E,z=new Set)=>{z.has(E)||(z.add(E),Object.entries(l).forEach(([q,X])=>{if(X.includes(E)&&!z.has(q)){const H=o[q];H&&(O.unshift({id:q,label:H.label||q,color:H.color||"default",backgroundColor:H.backgroundColor,borderColor:H.borderColor}),R(q,z))}}))};return R(F),O},[o,l]),$=u.useCallback((F,O="type")=>!F||!Array.isArray(F)?[]:F.map(R=>{const E=R[O];if(typeof E=="object"&&E.label){const z=T(E.label),q=o[z];if(q)return{...R,[O]:{id:z,label:q.label,color:q.color,backgroundColor:q.backgroundColor,borderColor:q.borderColor}}}return R}),[o,T]),N=u.useCallback(F=>!o||Object.keys(o).length===0?[]:typeof F!="function"?[]:F(o,l,{getParentTypes:B,getChildTypes:L,getTypeInfo:S,getSortedTypes:I}),[o,l,B,L,S,I]);return u.useEffect(()=>{t&&!y&&b.current&&k()},[t,y,k]),u.useEffect(()=>()=>{var F;v.current&&((F=b.current)!=null&&F.removeListener)&&(b.current.removeListener(v.current),v.current=null)},[]),{types:o,typeHierarchy:l,rawData:d,isLoading:f,error:w,isInitialized:y,initializeService:k,refreshData:C,getTypeInfo:S,getRawDataByTypeId:_,getTypeIdByLevelName:T,getSortedTypes:I,getChildTypes:L,getParentType:A,getParentTypes:B,getTypePath:D,convertToHierarchicalData:$,generateDataByTypes:N,hasTypes:Object.keys(o).length>0,hasHierarchy:Object.keys(l).length>0,hasData:d.length>0}},Nn=({data:e=[],initialSort:t={key:null,direction:"asc"},initialCheckedItems:n={},initialExpandedRows:r={},indentMode:i=!0,page:o=0,rowsPerPage:s=10}={})=>{const[l,c]=u.useState(n),[d,h]=u.useState(t),[f,g]=u.useState(r),[w,x]=u.useState(null),[y,p]=u.useState(i),v=u.useCallback(D=>{const B=[],$=new Set,N=F=>{!F||!F.length||F.forEach(O=>{O.id!==void 0&&!$.has(O.id)&&($.add(O.id),B.push(O)),O.children&&O.children.length&&N(O.children)})};return N(D),B},[]),b=u.useCallback(D=>{const B=v(D),$=o*s,N=$+s;return B.slice($,N)},[v,o,s]),P=u.useMemo(()=>{const D=b(e);if(!D.length)return!1;const B=D.filter($=>l[$.id]).length;return B===0?!1:B===D.length?!0:null},[e,l,b]),k=u.useMemo(()=>{if(!d.key)return e;const D=$=>[...$].sort((N,F)=>{const O=N[d.key],R=F[d.key];return O==null?d.direction==="asc"?-1:1:R==null?d.direction==="asc"?1:-1:typeof O=="object"&&O!==null&&typeof R=="object"&&R!==null&&O.label&&R.label?d.direction==="asc"?O.label.localeCompare(R.label):R.label.localeCompare(O.label):typeof O=="string"&&typeof R=="string"?d.direction==="asc"?O.localeCompare(R):R.localeCompare(O):d.direction==="asc"?O-R:R-O}),B=$=>D($).map(F=>F.children&&F.children.length?{...F,children:B(F.children)}:F);return B(e)},[e,d]),C=u.useCallback(D=>{let B="asc";d.key===D&&(B=d.direction==="asc"?"desc":"asc"),h({key:D,direction:B})},[d]),S=u.useCallback((D,B)=>{c($=>({...$,[D]:B}))},[]),_=u.useCallback(D=>{const B=b(e);if(D){const $={...l};B.forEach(N=>{$[N.id]=!0}),c($)}else{const $={...l};B.forEach(N=>{delete $[N.id]}),c($)}},[e,l,b,o,s]),T=u.useCallback(D=>{g(B=>({...B,[D]:!B[D]}))},[]),I=u.useCallback(D=>{if(D){const B=v(e),$={};B.forEach(N=>{N.children&&N.children.length&&($[N.id]=!0)}),g($)}else g({})},[e,v]),L=u.useCallback(D=>{x(D)},[]),A=u.useCallback(()=>{p(D=>!D)},[]);return{checkedItems:l,sortConfig:d,expandedRows:f,selectedRow:w,allChecked:P,sortedData:k,indentMode:y,handleSort:C,handleCheck:S,handleToggleAll:_,handleToggleExpand:T,handleExpandAll:I,handleRowClick:L,toggleIndentMode:A,setCheckedItems:c,setSortConfig:h,setExpandedRows:g,setSelectedRow:x,setUseIndentMode:p}},Rn=({initialSearchText:e="",initialTotalItems:t=0,initialIndentMode:n=!0,initialSequentialPageNumbers:r=!1,initialHasPinnedColumns:i=!1,onSearch:o,onToggleIndentMode:s,onTogglePageNumberMode:l,onToggleColumnPin:c,tableId:d="table"}={})=>{const h=`tableHeader_${d}_pageNumbers`,f=()=>{try{const O=localStorage.getItem(h);return O!==null?JSON.parse(O):r}catch{return r}},[g,w]=u.useState(e),[x,y]=u.useState(t),[p,v]=u.useState(n),[b,P]=u.useState(()=>f()),[k,C]=u.useState(i),[S,_]=u.useState(!1),[T,I]=u.useState(!0),L=u.useCallback(O=>{const R=O.target.value;w(R),o&&o(R)},[o]),A=u.useCallback(()=>{w(""),o&&o("")},[o]),D=u.useCallback(()=>{const O=!p;v(O),s&&s(O)},[p,s]),B=u.useCallback(()=>{const O=!b;P(O);try{localStorage.setItem(h,JSON.stringify(O))}catch{}l&&l(O)},[b,l,h,d]),$=u.useCallback(()=>{const O=!k;C(O),c&&c(O)},[k,c]),N=u.useCallback(O=>{_(O)},[]),F=u.useCallback(O=>{y(O)},[]);return u.useEffect(()=>{T&&I(!1)},[]),u.useEffect(()=>{t!==x&&y(t)},[t,x]),u.useEffect(()=>{T&&e&&w(e)},[e,T]),{searchText:g,totalItems:x,indentMode:p,sequentialPageNumbers:b,hasPinnedColumns:k,isGridReady:S,handleSearchChange:L,handleClearSearch:A,toggleIndentMode:D,togglePageNumberMode:B,toggleColumnPin:$,setGridReady:N,updateTotalItems:F,setHasPinnedColumns:C}},Dr=({data:e=[],activeFilters:t={},searchText:n="",isDateFilterActive:r=!1,dateRange:i={},filterCallback:o=null})=>u.useMemo(()=>{if(!e||e.length===0)return[];let l=[...e];if(t&&Object.entries(t).forEach(([c,d])=>{d&&d!=="all"&&o&&(l=o(l,c,d))}),r&&i&&(i.startDate||i.endDate)&&o&&(l=o(l,"date",i)),n){const c=n.toLowerCase();l=l.filter(d=>{for(const h in d){if(d[h]&&typeof d[h]=="string"&&d[h].toLowerCase().includes(c)||d[h]&&typeof d[h]=="object"&&d[h].label&&typeof d[h].label=="string"&&d[h].label.toLowerCase().includes(c))return!0;if(d[h]&&Array.isArray(d[h])){for(const f of d[h])if(f&&typeof f=="object"&&f.label&&typeof f.label=="string"&&f.label.toLowerCase().includes(c))return!0}}return!1})}return l},[e,t,n,r,i,o]),rae=({onAdd:e,onDisplayOptions:t,onRefresh:n,showNotifications:r=!0}={})=>{const[i,o]=u.useState({open:!1,message:"",severity:"info"}),[s,l]=u.useState(null),c=!!s,d=u.useCallback((y,p="info")=>{r&&o({open:!0,message:y,severity:p})},[r]),h=u.useCallback(()=>{o(y=>({...y,open:!1}))},[]),f=u.useCallback(()=>{e?e():d("추가 기능이 구현되지 않았습니다.","info")},[e,d]),g=u.useCallback(y=>{t?t(y):l(y.currentTarget)},[t]),w=u.useCallback(()=>{n?n():(d("새로고침 중...","info"),setTimeout(()=>{d("새로고침 완료","success")},1e3))},[n,d]),x=u.useCallback(()=>{l(null)},[]);return{notification:i,showNotification:d,closeNotification:h,handleAddClick:f,handleOptionsClick:g,handleRefreshClick:w,optionsMenuAnchor:s,isOptionsMenuOpen:c,handleCloseOptionsMenu:x}},sr=({initialColumns:e=[],onColumnOrderChange:t,initialPinnedColumns:n=["checkbox","number","userId"],tableId:r="default",enableColumnPinning:i=!0,version:o="1.0"}={})=>{const s=u.useRef(!1),l=u.useRef(null),c=u.useRef(null);u.useEffect(()=>{const T=`table_version_${r}`;localStorage.getItem(T)!==o&&(`${r}`,Object.keys(localStorage).forEach(A=>{A.includes(`_${r}`)&&localStorage.removeItem(A)}),localStorage.setItem(T,o))},[r,o]);const[d,h]=u.useState(()=>{const T=dD(r,e);if(T.length===0||T.length!==e.length)return e;const I=new Set(e.map(A=>A.id)),L=new Set(T.map(A=>A.id));return I.size!==L.size||![...I].every(A=>L.has(A))?e:T}),[f,g]=u.useState(()=>hD(r,n)),[w,x]=u.useState({dragging:!1,columnId:null,isGroupColumn:!1,parentGroupId:null});u.useEffect(()=>{if(e.length===0)return;const T=dD(r,e);if(T.length===0||T.length!==e.length){JSON.stringify(d)!==JSON.stringify(e)&&h(e),s.current=!0;return}const I=new Set(e.map(A=>A.id)),L=new Set(T.map(A=>A.id));I.size!==L.size||![...I].every(A=>L.has(A))?JSON.stringify(d)!==JSON.stringify(e)&&h(e):JSON.stringify(d)!==JSON.stringify(T)&&h(T),s.current=!0},[e.length,r]),u.useEffect(()=>{const T=hD(r,n);JSON.stringify(f)!==JSON.stringify(T)&&g(T)},[r]),u.useEffect(()=>{if(s.current)return l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{Jre(r,d)},300),()=>{l.current&&clearTimeout(l.current)}},[d,r]),u.useEffect(()=>{if(s.current)return c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{Qre(r,f)},300),()=>{c.current&&clearTimeout(c.current)}},[f,r]);const y=u.useCallback(T=>f.includes(T),[f]),p=u.useCallback(T=>{g(I=>I.includes(T)?I.filter(L=>L!==T):[...I,T])},[]),v=u.useCallback(()=>{g([])},[]),b=u.useCallback(()=>{g(n)},[n]),P=u.useCallback((T,I,L=!1,A=null)=>{if(T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("columnId",I),T.dataTransfer.setData("isGroupColumn",String(L)),T.dataTransfer.setData("parentGroupId",A||""),x({dragging:!0,columnId:I,isGroupColumn:L,parentGroupId:A}),T.dataTransfer.setDragImage){const D=T.currentTarget;T.dataTransfer.setDragImage(D,10,10)}},[]),k=u.useCallback(()=>{x({dragging:!1,columnId:null,isGroupColumn:!1,parentGroupId:null})},[]),C=u.useCallback(T=>{T.preventDefault(),T.dataTransfer.dropEffect="move"},[]),S=u.useCallback((T,I,L=!1,A=null)=>{T.preventDefault();const D=T.dataTransfer.getData("columnId"),B=T.dataTransfer.getData("isGroupColumn")==="true",$=T.dataTransfer.getData("parentGroupId")||null;if(D===I)return;const N=f.includes(D),F=f.includes(I);let O=!1,R=[],E=[],z=-1,q=-1;if(i){if(d.forEach(K=>{K.type==="group"&&Array.isArray(K.children)?K.children.forEach(ee=>{R.push(ee.id)}):R.push(K.id)}),E=R.filter(K=>f.includes(K)),z=E.length>0?R.indexOf(E[E.length-1]):-1,q=R.indexOf(I),q===-1&&L){const K=d.find(ee=>ee.id===I);if(K&&K.children&&K.children.length>0){const ee=K.children[0].id;q=R.indexOf(ee)}}O=q!==-1&&q<=z}let X=[...d],H=[...f];if(B&&L){const K=X.findIndex(ge=>ge.id===D),ee=X.findIndex(ge=>ge.id===I);if(K!==-1&&ee!==-1){const[ge]=X.splice(K,1),oe=X.findIndex(Q=>Q.id===I),G=K<ee?oe+1:oe;X.splice(G,0,ge),i&&(O&&!N?(H.push(D),`${D}`):!O&&N&&(H=H.filter(Q=>Q!==D),`${D}`))}}else if(!B&&!L&&!$&&!A){const K=X.findIndex(ge=>ge.id===D),ee=X.findIndex(ge=>ge.id===I);if(K!==-1&&ee!==-1){const[ge]=X.splice(K,1),oe=X.findIndex(Q=>Q.id===I),G=K<ee?oe+1:oe;X.splice(G,0,ge),i&&(O&&!N?(H.push(D),`${D}`):!O&&N&&(H=H.filter(Q=>Q!==D),`${D}`))}}else if($&&A&&$===A){const K=X.findIndex(ee=>ee.id===$);if(K!==-1&&X[K].children){let ee=[...X[K].children];const ge=ee.findIndex(G=>G.id===D),oe=ee.findIndex(G=>G.id===I);if(ge!==-1&&oe!==-1){const[G]=ee.splice(ge,1),Q=ee.findIndex(U=>U.id===I),te=ge<oe?Q+1:Q;ee.splice(te,0,G),X[K].children=ee,i&&(O&&!N?(H.push(D),`${D}`):!O&&N&&(H=H.filter(U=>U!==D),`${D}`))}}}else if(B&&!L&&!A||!B&&!$&&L){const K=X.findIndex(ge=>ge.id===D),ee=X.findIndex(ge=>ge.id===I);if(K!==-1&&ee!==-1){const[ge]=X.splice(K,1),oe=X.findIndex(Q=>Q.id===I),G=K<ee?oe+1:oe;X.splice(G,0,ge),i&&(O&&!N?(H.push(D),`${D}`):!O&&N&&(H=H.filter(Q=>Q!==D),`${D}`))}}h(X),i&&JSON.stringify(H)!==JSON.stringify(f)&&g(H),t&&t(X)},[d,f,t,i]),_=u.useCallback(T=>{h(T)},[]);return{columns:d,dragInfo:w,pinnedColumns:f,enableColumnPinning:i,handleDragStart:P,handleDragEnd:k,handleDragOver:C,handleDrop:S,updateColumns:_,isColumnPinned:y,toggleColumnPin:p,clearAllPinnedColumns:v,setDefaultPinnedColumns:b}},qs=(e=!0)=>{const[t,n]=u.useState(e),r=u.useCallback(()=>{n(i=>!i)},[]);return{indentMode:t,toggleIndentMode:r}},fr=({offsetTop:e=0,zIndex:t=10,bgColor:n="white",boxShadow:r="0 2px 5px rgba(0, 0, 0, 0.1)"}={})=>{const i=u.useRef(null),o=u.useCallback(()=>({position:"sticky",top:`${e}px`,zIndex:t,backgroundColor:n,boxShadow:r}),[e,t,n,r]),s=u.useCallback((l={})=>({...l,position:"sticky",top:`${e}px`,zIndex:t-1,backgroundColor:n}),[e,t,n]);return{tableHeaderRef:i,getTableHeaderStyles:o,getHeaderCellStyles:s}},lr=({defaultHeight:e="400px",defaultAutoHeight:t=!0,minHeight:n=300,bottomMargin:r=100}={})=>{const i=typeof e=="string"?e:`${e}px`,o=u.useRef(null),[s,l]=u.useState(i),[c,d]=u.useState(t);return u.useEffect(()=>{if(!c)return;const g=()=>{const v=window.getComputedStyle(document.documentElement).zoom;return v?parseFloat(v):1},w=()=>{if(!o.current)return;const p=window.innerHeight,v=g(),P=o.current.getBoundingClientRect().top,k=r*v,C=p-P-k,S=n*v,_=Math.max(C,S);l(`${_}px`)},x=[];return[{query:"(max-width: 1920px)",handler:null},{query:"(min-width: 1921px) and (max-width: 2559px)",handler:null},{query:"(min-width: 2560px)",handler:null}].forEach(p=>{const v=window.matchMedia(p.query),b=P=>{P.matches&&setTimeout(w,100)};p.handler=b,v.addEventListener?v.addEventListener("change",b):v.addListener&&v.addListener(b),x.push({mql:v,handler:b})}),w(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),x.forEach(({mql:p,handler:v})=>{p.removeEventListener?p.removeEventListener("change",v):p.removeListener&&p.removeListener(v)})}},[c,n,r]),u.useEffect(()=>{if(c){const g=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200);return()=>clearTimeout(g)}},[c]),{containerRef:o,tableHeight:s,autoHeight:c,toggleAutoHeight:g=>{d(g!==void 0?g:!c)},setManualHeight:g=>{const w=typeof g=="number"?`${g}px`:g;l(w)}}},cr=({minHeight:e=200,maxHeight:t=null,useViewportLimit:n=!0,viewportMargin:r=100,onResize:i=null,onResizeEnd:o=null}={})=>{const[s,l]=u.useState(!1),c=u.useRef(null),d=u.useRef({startY:0,startHeight:0}),h=u.useCallback(()=>t!==null?t:n?window.innerHeight-r:1/0,[t,n,r]),f=u.useCallback(y=>{if(!s||!d.current)return;const p=y.clientY-d.current.startY;let v=d.current.startHeight+p;const b=h();v=Math.max(e,Math.min(b,v)),i&&i(v)},[s,e,h,i]),g=u.useCallback(()=>{s&&(l(!1),o&&o())},[s,o]);u.useEffect(()=>{if(s)return document.addEventListener("mousemove",f),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g)}},[s,f,g]);const w=u.useCallback((y,p)=>{y.preventDefault(),y.stopPropagation(),d.current={startY:y.clientY,startHeight:p},l(!0)},[]),x=u.useCallback(y=>({ref:c,onMouseDown:p=>w(p,y),style:{height:"8px",cursor:"ns-resize",backgroundColor:s?"rgba(0, 0, 0, 0.1)":"transparent",borderTop:"1px solid #e0e0e0",borderBottom:"1px solid #e0e0e0",transition:"background-color 0.2s",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),[w,s]);return{isDragging:s,resizeHandleRef:c,getResizeHandleProps:x,calculateMaxHeight:h}},dr=(e=[],t={})=>{const{defaultHiddenColumns:n=[],alwaysVisibleColumns:r=["checkbox"],tableId:i="default"}=t,o=u.useRef(!1),s=u.useRef(null),l=u.useMemo(()=>Array.isArray(e)?e:[],[e]),c=u.useMemo(()=>{const b=[];return l.forEach(P=>{P.type==="group"&&Array.isArray(P.children)?P.children.forEach(k=>{b.push(k)}):P.type!=="checkbox"&&b.push(P)}),b},[l]),d=u.useCallback(()=>{const b={};return c.forEach(P=>{b[P.id]=!n.includes(P.id)}),l.forEach(P=>{if(P.type==="group"&&Array.isArray(P.children)){const k=P.children.every(C=>!n.includes(C.id));b[P.id]=k}}),b},[c,n,l]),[h,f]=u.useState(()=>{const b={};l.forEach(C=>{C.type==="group"&&Array.isArray(C.children)?C.children.forEach(S=>{b[S.id]=!n.includes(S.id)}):C.type!=="checkbox"&&(b[C.id]=!n.includes(C.id))}),l.forEach(C=>{if(C.type==="group"&&Array.isArray(C.children)){const S=C.children.every(_=>!n.includes(_.id));b[C.id]=S}});const P=uD(i,b),k={};return Object.keys(b).forEach(C=>{k[C]=P.hasOwnProperty(C)?P[C]:b[C]}),k});u.useEffect(()=>{if(c.length===0)return;const b=d(),P=uD(i,b),k={};c.forEach(_=>{k[_.id]=P.hasOwnProperty(_.id)?P[_.id]:b[_.id]});const C=Object.keys(h).sort(),S=Object.keys(k).sort();(C.length!==S.length||!C.every(_=>S.includes(_)))&&f(k),o.current=!0},[c.length,i]),u.useEffect(()=>{if(o.current)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{Xre(i,h)},300),()=>{s.current&&clearTimeout(s.current)}},[h,i]);const g=u.useCallback(b=>{if(r.includes(b))return;const P=l.find(k=>k.id===b&&k.type==="group");if(P&&Array.isArray(P.children)){const k=!h[b];f(C=>{const S={...C};return S[b]=k,P.children.forEach(_=>{r.includes(_.id)||(S[_.id]=k)}),S})}else f(k=>({...k,[b]:!k[b]}))},[r,l,h]),w=u.useCallback(()=>{const b={};c.forEach(P=>{b[P.id]=!0}),f(b)},[c]),x=u.useCallback(()=>{f(d())},[d]),y=u.useMemo(()=>l.filter(P=>P.type==="checkbox"?!0:P.type==="group"&&Array.isArray(P.children)?P.children.some(k=>h[k.id]):h[P.id]).map(P=>P.type==="group"&&Array.isArray(P.children)?{...P,children:P.children.filter(k=>h[k.id])}:P),[l,h]),p=u.useMemo(()=>c.filter(b=>!h[b.id]).length,[c,h]),v=u.useMemo(()=>{const b=[];return l.forEach(P=>{P.type!=="checkbox"&&(r.includes(P.id)||(P.type==="group"&&Array.isArray(P.children),b.push(P)))}),b},[l,r]);return{columnVisibility:h,visibleColumns:y,hiddenColumnsCount:p,toggleableColumns:v,toggleColumnVisibility:g,showAllColumns:w,resetToDefault:x,setColumnVisibility:f}},cj=({data:e=[],onDataChange:t,orderField:n="order",idField:r="id",enabled:i=!0}={})=>{const[o,s]=u.useState(null),[l,c]=u.useState(null),[d,h]=u.useState(!1),f=u.useRef({clientY:0}),g=u.useCallback((P,k)=>{i&&(P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/html",P.target.innerHTML),s(k),h(!0),P.target&&(P.target.style.opacity="0.5"))},[i,r]),w=u.useCallback((P,k)=>{!i||!o||(P.preventDefault(),P.dataTransfer.dropEffect="move",f.current.clientY=P.clientY,k[r]!==o[r]&&c(k))},[i,o,r]),x=u.useCallback(P=>{i&&(P.currentTarget.contains(P.relatedTarget)||c(null))},[i]),y=u.useCallback((P,k)=>{if(!i||!o||!t)return;if(P.preventDefault(),P.stopPropagation(),o[r]===k[r]){s(null),c(null),h(!1);return}const C=[...e],S=C.findIndex(L=>L[r]===o[r]),_=C.findIndex(L=>L[r]===k[r]);if(S===-1||_===-1){console.error("행을 찾을 수 없습니다.");return}const[T]=C.splice(S,1);C.splice(_,0,T);const I=C.map((L,A)=>({...L,[n]:A+1}));t(I),s(null),c(null),h(!1)},[i,o,e,t,r,n]),p=u.useCallback(P=>{i&&(P.target&&(P.target.style.opacity=""),s(null),c(null),h(!1))},[i]),v=u.useCallback(P=>{if(!i||!d)return{};const k={};return o&&P[r]===o[r]&&(k.opacity=.5,k.cursor="grabbing"),l&&P[r]===l[r]&&(k.backgroundColor="rgba(25, 118, 210, 0.08)",k.borderTop="2px solid #1976d2"),d||(k.cursor="grab"),k},[i,d,o,l,r]),b=u.useCallback(P=>i?{draggable:!0,onDragStart:k=>g(k,P),onDragOver:k=>w(k,P),onDragLeave:x,onDrop:k=>y(k,P),onDragEnd:p,style:v(P)}:{},[i,g,w,x,y,p,v]);return{isDragging:d,draggedRow:o,dragOverRow:l,handleRowDragStart:g,handleRowDragOver:w,handleRowDragLeave:x,handleRowDrop:y,handleRowDragEnd:p,getRowStyle:v,getDragHandleProps:b}},aae=()=>m(bn,{children:[a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[a(M,{variant:"h5",gutterBottom:!0,children:"PageHeader 컴포넌트 설명"}),a(M,{variant:"body1",children:"PageHeader는 페이지 상단에 위치하여 페이지 제목과 다양한 작업 버튼을 제공합니다. 왼쪽에는 페이지 제목이, 오른쪽에는 추가, 표시 옵션, 새로고침 버튼이 있습니다. 각 버튼은 클릭하면 특정 기능이 실행되고 스낵바 알림이 표시될 수 있습니다."})]})}),a(W,{item:!0,xs:12,md:6,children:m(Sn,{sx:{borderRadius:2,height:"100%"},children:[a(Uf,{title:"PageHeader 컴포넌트 속성"}),a(yn,{}),m(In,{children:[a(M,{variant:"body1",gutterBottom:!0,children:"PageHeader 컴포넌트는 다음과 같은 props를 받습니다:"}),m("ul",{children:[m("li",{children:[a("code",{children:"title"})," - 페이지 제목 (필수)"]}),m("li",{children:[a("code",{children:"onAddClick"})," - 추가 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"onDisplayOptionsClick"})," - 표시 옵션 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"onRefreshClick"})," - 새로고침 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"showAddButton"})," - 추가 버튼 표시 여부 (기본값: true)"]}),m("li",{children:[a("code",{children:"showDisplayOptionsButton"})," - 표시 옵션 버튼 표시 여부 (기본값: true)"]}),m("li",{children:[a("code",{children:"showRefreshButton"})," - 새로고침 버튼 표시 여부 (기본값: true)"]}),m("li",{children:[a("code",{children:"addButtonText"})," - 추가 버튼 텍스트 (기본값: '회원 추가')"]}),m("li",{children:[a("code",{children:"customActions"})," - 추가적인 커스텀 액션"]}),m("li",{children:[a("code",{children:"sx"})," - 추가적인 스타일 오버라이드"]})]})]})]})}),a(W,{item:!0,xs:12,md:6,children:m(Sn,{sx:{borderRadius:2,height:"100%"},children:[a(Uf,{title:"usePageHeader 커스텀 훅"}),a(yn,{}),m(In,{children:[a(M,{variant:"body1",gutterBottom:!0,children:"usePageHeader 훅은 PageHeader 컴포넌트와 함께 사용하기 위한 상태와 핸들러를 제공합니다:"}),m("ul",{children:[m("li",{children:[a("code",{children:"notification"})," - 알림 상태 (open, message, severity)"]}),m("li",{children:[a("code",{children:"showNotification"})," - 알림 표시 함수"]}),m("li",{children:[a("code",{children:"closeNotification"})," - 알림 닫기 함수"]}),m("li",{children:[a("code",{children:"handleAddClick"})," - 추가 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"handleOptionsClick"})," - 표시 옵션 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"handleRefreshClick"})," - 새로고침 버튼 클릭 핸들러"]}),m("li",{children:[a("code",{children:"optionsMenuAnchor"})," - 옵션 메뉴 앵커 엘리먼트"]}),m("li",{children:[a("code",{children:"isOptionsMenuOpen"})," - 옵션 메뉴 열림 상태"]}),m("li",{children:[a("code",{children:"handleCloseOptionsMenu"})," - 옵션 메뉴 닫기 핸들러"]})]})]})]})})]}),iae=()=>m(bn,{children:[a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[a(M,{variant:"h5",gutterBottom:!0,children:"TableHeader 컴포넌트 설명"}),a(M,{variant:"body1",children:"TableHeader는 테이블 상단에 위치하여 테이블 제목, 총 항목 수, 다양한 기능 버튼과 검색 기능을 제공합니다. 테이블 데이터 표시 방식을 사용자가 커스터마이징할 수 있는 옵션들을 제공합니다."})]})}),a(W,{item:!0,xs:12,md:6,sx:{mt:3},children:m(Sn,{sx:{borderRadius:2,height:"100%"},children:[a(Uf,{title:"TableHeader 컴포넌트 속성"}),a(yn,{}),m(In,{children:[a(M,{variant:"body1",gutterBottom:!0,children:"TableHeader 컴포넌트는 다음과 같은 props를 받습니다:"}),m("ul",{children:[m("li",{children:[a("code",{children:"title"})," - 테이블 제목"]}),m("li",{children:[a("code",{children:"totalItems"})," - 총 항목 수"]}),m("li",{children:[a("code",{children:"countLabel"}),' - 항목 수 표시 형식 (예: "총 ##count##명")']}),m("li",{children:[a("code",{children:"indentMode"})," - 들여쓰기 모드 상태"]}),m("li",{children:[a("code",{children:"toggleIndentMode"})," - 들여쓰기 모드 토글 함수"]}),m("li",{children:[a("code",{children:"sequentialPageNumbers"})," - 연속 페이지 번호 모드 상태"]}),m("li",{children:[a("code",{children:"togglePageNumberMode"})," - 페이지 번호 모드 토글 함수"]}),m("li",{children:[a("code",{children:"hasPinnedColumns"})," - 고정된 컬럼 존재 여부"]}),m("li",{children:[a("code",{children:"toggleColumnPin"})," - 컬럼 고정 토글 함수"]}),m("li",{children:[a("code",{children:"searchText"})," - 검색어"]}),m("li",{children:[a("code",{children:"handleSearchChange"})," - 검색어 변경 핸들러"]}),m("li",{children:[a("code",{children:"handleClearSearch"})," - 검색어 초기화 핸들러"]})]})]})]})}),a(W,{item:!0,xs:12,md:6,sx:{mt:3},children:m(Sn,{sx:{borderRadius:2,height:"100%"},children:[a(Uf,{title:"useTableHeader 커스텀 훅"}),a(yn,{}),m(In,{children:[a(M,{variant:"body1",gutterBottom:!0,children:"useTableHeader 훅은 TableHeader 컴포넌트와 함께 사용하기 위한 상태와 핸들러를 제공합니다:"}),m("ul",{children:[m("li",{children:[a("code",{children:"searchText"})," - 현재 검색어"]}),m("li",{children:[a("code",{children:"totalItems"})," - 총 항목 수"]}),m("li",{children:[a("code",{children:"indentMode"})," - 들여쓰기 모드 상태"]}),m("li",{children:[a("code",{children:"sequentialPageNumbers"})," - 연속 페이지 번호 모드 상태"]}),m("li",{children:[a("code",{children:"hasPinnedColumns"})," - 고정된 컬럼 존재 여부"]}),m("li",{children:[a("code",{children:"isGridReady"})," - 그리드 준비 상태"]}),m("li",{children:[a("code",{children:"handleSearchChange"})," - 검색어 변경 핸들러"]}),m("li",{children:[a("code",{children:"handleClearSearch"})," - 검색어 초기화 핸들러"]}),m("li",{children:[a("code",{children:"toggleIndentMode"})," - 들여쓰기 모드 토글 함수"]}),m("li",{children:[a("code",{children:"togglePageNumberMode"})," - 페이지 번호 모드 토글 함수"]}),m("li",{children:[a("code",{children:"toggleColumnPin"})," - 컬럼 고정 토글 함수"]})]})]})]})})]}),oae=()=>a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:2},children:[a(M,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main"},children:"TableFilterAndPagination 컴포넌트"}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"개요"}),a(M,{variant:"body2",paragraph:!0,children:"TableFilterAndPagination 컴포넌트는 테이블의 필터링과 페이지네이션 기능을 하나의 컴포넌트로 결합한 것입니다. 반응형으로 설계되어 모바일에서는 세로로, 데스크톱에서는 가로로 배치됩니다."}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"사용 방법"}),a(j,{sx:{backgroundColor:"#f5f5f5",p:2,borderRadius:1,mb:2,overflow:"auto"},children:a("pre",{style:{margin:0},children:a("code",{children:`import { TableFilterAndPagination } from '../components/baseTemplate/components';
import { useTableFilterAndPagination } from '../components/baseTemplate/hooks';

// 훅 사용
const {
  activeFilters,
  handleFilterChange,
  page,
  rowsPerPage,
  totalCount,
  handlePageChange,
  handleRowsPerPageChange
} = useTableFilterAndPagination({
  filterOptions: {
    initialFilters: { status: 'all' }
  },
  paginationOptions: {
    totalItems: 100
  }
});

// 컴포넌트 사용
<TableFilterAndPagination
  filterProps={{
    activeFilters: activeFilters,
    handleFilterChange: handleFilterChange,
    filterOptions: [
      {
        id: 'status',
        label: '상태',
        items: [
          { value: 'all', label: '전체' },
          { value: 'active', label: '활성' },
          { value: 'inactive', label: '비활성' }
        ]
      }
    ]
  }}
  paginationProps={{
    page: page,
    count: totalCount,
    rowsPerPage: rowsPerPage,
    onPageChange: handlePageChange,
    onRowsPerPageChange: handleRowsPerPageChange
  }}
  showDivider={true}
/>`})})}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"컴포넌트 Props"}),a(wa,{sx:{mb:2},children:m(va,{size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{children:a("strong",{children:"속성"})}),a(ye,{children:a("strong",{children:"타입"})}),a(ye,{children:a("strong",{children:"설명"})}),a(ye,{children:a("strong",{children:"기본값"})})]})}),m(xa,{children:[m(mn,{children:[a(ye,{children:"filterProps"}),a(ye,{children:"object"}),a(ye,{children:"TableFilter 컴포넌트에 전달할 속성들"}),a(ye,{children:"{}"})]}),m(mn,{children:[a(ye,{children:"paginationProps"}),a(ye,{children:"object"}),a(ye,{children:"TablePagination 컴포넌트에 전달할 속성들"}),a(ye,{children:"{}"})]}),m(mn,{children:[a(ye,{children:"showDivider"}),a(ye,{children:"boolean"}),a(ye,{children:"필터/페이지네이션 하단에 구분선 표시 여부"}),a(ye,{children:"true"})]}),m(mn,{children:[a(ye,{children:"sx"}),a(ye,{children:"object"}),a(ye,{children:"Material-UI의 sx 속성을 통한 추가 스타일링"}),a(ye,{children:"{}"})]})]})]})}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"컴포넌트 특징"}),m("ul",{children:[a(M,{component:"li",variant:"body2",children:"반응형 레이아웃: 모바일에서는 세로로, 데스크톱에서는 가로로 배치"}),a(M,{component:"li",variant:"body2",children:"TableFilter와 TablePagination 컴포넌트를 손쉽게 결합"}),a(M,{component:"li",variant:"body2",children:"테이블 위 또는 아래에 배치 가능"}),a(M,{component:"li",variant:"body2",children:"하단 구분선 표시 옵션으로 테이블 콘텐츠와의 시각적 구분 제공"}),a(M,{component:"li",variant:"body2",children:"Material-UI의 sx 속성을 통한 쉬운 스타일 커스터마이징"})]}),a(yn,{sx:{my:3}}),a(M,{variant:"h5",gutterBottom:!0,sx:{color:"primary.main"},children:"useTableFilterAndPagination 훅"}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"개요"}),a(M,{variant:"body2",paragraph:!0,children:"useTableFilterAndPagination 훅은 테이블의 필터링과 페이지네이션 기능을 통합하여 관리하는 커스텀 훅입니다. useTableFilter와 useTablePagination 훅을 결합하여 데이터 필터링과 페이지 이동을 효율적으로 처리합니다."}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"훅 옵션"}),a(wa,{sx:{mb:2},children:m(va,{size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{children:a("strong",{children:"옵션"})}),a(ye,{children:a("strong",{children:"타입"})}),a(ye,{children:a("strong",{children:"설명"})}),a(ye,{children:a("strong",{children:"기본값"})})]})}),m(xa,{children:[m(mn,{children:[a(ye,{children:"filterOptions"}),a(ye,{children:"object"}),a(ye,{children:"useTableFilter 훅에 전달할 옵션"}),a(ye,{children:"{}"})]}),m(mn,{children:[a(ye,{children:"paginationOptions"}),a(ye,{children:"object"}),a(ye,{children:"useTablePagination 훅에 전달할 옵션"}),a(ye,{children:"{}"})]}),m(mn,{children:[a(ye,{children:"onStateChange"}),a(ye,{children:"function"}),a(ye,{children:"필터 또는 페이지네이션 상태 변경 시 호출될 콜백 함수"}),a(ye,{children:"undefined"})]})]})]})}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"filterOptions 속성"}),a(wa,{sx:{mb:2},children:m(va,{size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{children:a("strong",{children:"속성"})}),a(ye,{children:a("strong",{children:"타입"})}),a(ye,{children:a("strong",{children:"설명"})}),a(ye,{children:a("strong",{children:"기본값"})})]})}),m(xa,{children:[m(mn,{children:[a(ye,{children:"initialFilters"}),a(ye,{children:"object"}),a(ye,{children:"초기 필터 상태"}),a(ye,{children:"{}"})]}),m(mn,{children:[a(ye,{children:"onFilterChange"}),a(ye,{children:"function"}),a(ye,{children:"필터 변경 시 호출될 콜백 함수"}),a(ye,{children:"undefined"})]}),m(mn,{children:[a(ye,{children:"initialDateFilterActive"}),a(ye,{children:"boolean"}),a(ye,{children:"초기 날짜 필터 활성화 상태"}),a(ye,{children:"false"})]}),m(mn,{children:[a(ye,{children:"initialDateRange"}),a(ye,{children:"object"}),a(ye,{children:"초기 날짜 범위"}),a(ye,{children:"{ startDate: null, endDate: null }"})]})]})]})}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"paginationOptions 속성"}),a(wa,{sx:{mb:2},children:m(va,{size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{children:a("strong",{children:"속성"})}),a(ye,{children:a("strong",{children:"타입"})}),a(ye,{children:a("strong",{children:"설명"})}),a(ye,{children:a("strong",{children:"기본값"})})]})}),m(xa,{children:[m(mn,{children:[a(ye,{children:"initialPage"}),a(ye,{children:"number"}),a(ye,{children:"초기 페이지"}),a(ye,{children:"0"})]}),m(mn,{children:[a(ye,{children:"initialRowsPerPage"}),a(ye,{children:"number"}),a(ye,{children:"초기 페이지당 행 수"}),a(ye,{children:"10"})]}),m(mn,{children:[a(ye,{children:"rowsPerPageOptions"}),a(ye,{children:"array"}),a(ye,{children:"페이지당 행 옵션"}),a(ye,{children:"[10, 25, 50, 100]"})]}),m(mn,{children:[a(ye,{children:"totalItems"}),a(ye,{children:"number"}),a(ye,{children:"총 항목 수"}),a(ye,{children:"0"})]}),m(mn,{children:[a(ye,{children:"onPageChange"}),a(ye,{children:"function"}),a(ye,{children:"페이지 변경 시 호출될 콜백 함수"}),a(ye,{children:"undefined"})]}),m(mn,{children:[a(ye,{children:"onRowsPerPageChange"}),a(ye,{children:"function"}),a(ye,{children:"페이지당 행 수 변경 시 호출될 콜백 함수"}),a(ye,{children:"undefined"})]})]})]})}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"훅 반환값"}),a(M,{variant:"body2",paragraph:!0,children:"이 훅은 useTableFilter와 useTablePagination에서 제공하는 모든 상태와 함수를 결합하여 반환합니다. 추가로 resetAllFiltersAndPagination 함수를 제공하여 모든 필터와 페이지네이션을 초기화할 수 있습니다."}),a(M,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"훅 특징"}),m("ul",{children:[a(M,{component:"li",variant:"body2",children:"필터와 페이지네이션 상태를 통합 관리"}),a(M,{component:"li",variant:"body2",children:"필터 변경 시 자동으로 첫 페이지로 이동"}),a(M,{component:"li",variant:"body2",children:"페이지당 행 수 변경 시 자동으로 첫 페이지로 이동"}),a(M,{component:"li",variant:"body2",children:"통합 상태 변경 콜백을 통한 데이터 페칭 관리"}),a(M,{component:"li",variant:"body2",children:"간편한 API로 복잡한 테이블 상태 관리 단순화"})]})]})}),sae={},fD=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,align:"center"},{id:"number",type:"number",header:"No.",width:70,align:"center",sortable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,align:"center"},{id:"type",header:"유형",type:"hierarchical",width:120,cellRenderer:"chip",sortable:!0,align:"center"},{id:"parentType",header:"유형2",type:"horizontal",width:180,cellRenderer:"chip",sortable:!0,align:"center"},{id:"phone",header:"연락처",width:150,sortable:!0,align:"center"},{id:"email",header:"이메일",width:180,sortable:!0,align:"center"},{id:"buttons",header:"컬럼5",type:"button",width:160,align:"center",buttons:[{label:"버튼1",color:"primary",variant:"outlined"},{label:"버튼2",color:"secondary",variant:"outlined"}],buttonDirection:"column"},{id:"groupColumn1",header:"그룹컬럼1",type:"group",align:"center",children:[{id:"childColumn1",header:"자식컬럼1",width:120,align:"center",sortable:!0},{id:"childColumn2",header:"자식컬럼2",width:120,align:"center",sortable:!0}]},{id:"groupColumn2",header:"그룹컬럼2",type:"group",align:"center",children:[{id:"childColumn3",header:"자식컬럼3",width:100,align:"center",sortable:!0},{id:"childColumn4",header:"자식컬럼4",width:100,align:"center",sortable:!0},{id:"childColumn5",header:"자식컬럼5",width:100,align:"center",sortable:!0},{id:"childColumn6",header:"자식컬럼6",width:100,align:"center",sortable:!0}]},{id:"actions",header:"관리",type:"button",width:160,align:"center",buttons:[{label:"수정",color:"primary",variant:"outlined"},{label:"삭제",color:"error",variant:"outlined"}],buttonDirection:"row"}];[...Object.entries(sae).map(([e,t])=>({value:e,label:t.label}))];const lae=()=>{ha.getRawData||(ha.getRawData=()=>ha.getAgentLevels());const{types:e,typeHierarchy:t,isLoading:n,error:r,isInitialized:i,generateDataByTypes:o}=nae({dataService:ha});u.useEffect(()=>{Object.keys(e).length},[i,n,r,e,t]),u.useCallback((Ie,Xe)=>{if(!Ie||Object.keys(Ie).length===0)return[];const ve=Object.keys(Ie),at=[];return ve.forEach((We,xe)=>{const qe=Ie[We],Y=(he=>{const ze=[],de=(Ze,lt=new Set)=>{lt.has(Ze)||(lt.add(Ze),Object.entries(Xe).forEach(([Qt,tr])=>{if(tr.includes(Ze)&&!lt.has(Qt)){const $n=Ie[Qt];ze.unshift({label:($n==null?void 0:$n.label)||Qt,color:($n==null?void 0:$n.color)||"default",backgroundColor:$n==null?void 0:$n.backgroundColor,borderColor:$n==null?void 0:$n.borderColor}),de(Qt,lt)}}))};return de(he),ze})(We);at.push({id:xe+1,index:xe+1,userId:`${We}_user${xe+1}
${qe.label}${xe+1}`,type:{label:qe.label||We,color:qe.color||"default",backgroundColor:qe.backgroundColor,borderColor:qe.borderColor},parentTypes:Y,parentType:Y,description:`${qe.label||We} 계정입니다.`,phone:`010-${String(1e3+xe).slice(-4)}-${String(1e3+xe*2).slice(-4)}`,email:`${We}${xe+1}@example.com`,child1:`A${xe+1}`,child2:`B${xe+1}`,child3:`C${xe+1}`,child4:`D${xe+1}`,child5:`E${xe+1}`,child6:`F${xe+1}`})}),at},[]);const s=u.useMemo(()=>o((Ie,Xe,ve)=>{const at=Object.keys(Ie),We=[];return at.forEach((xe,qe)=>{const Ee=Ie[xe],Y=ve.getParentTypes(xe);We.push({id:qe+1,index:qe+1,userId:`${xe}_user${qe+1}
${Ee.label}${qe+1}`,type:{label:Ee.label||xe,color:Ee.color||"default",backgroundColor:Ee.backgroundColor,borderColor:Ee.borderColor},parentTypes:Y,parentType:Y,description:`${Ee.label||xe} 계정입니다.`,phone:`010-${String(1e3+qe).slice(-4)}-${String(1e3+qe*2).slice(-4)}`,email:`${xe}${qe+1}@example.com`,child1:`A${qe+1}`,child2:`B${qe+1}`,child3:`C${qe+1}`,child4:`D${qe+1}`,child5:`E${qe+1}`,child6:`F${qe+1}`})}),We}),[o]),{containerRef:l,tableHeight:c,autoHeight:d,toggleAutoHeight:h,setManualHeight:f}=lr({defaultHeight:"400px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:g,getResizeHandleProps:w,calculateMaxHeight:x}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ie=>{d&&h(!1),f(`${Ie}px`)}}),{indentMode:y,toggleIndentMode:p}=qs(!0),v=u.useMemo(()=>!i||Object.keys(e).length===0||s.length===0?[]:s,[i,e,s]),{hierarchicalData:b,expandedTypes:P,toggleTypeExpand:k,setAllExpanded:C}=tae({data:v,types:i?e:{},typeHierarchy:i?t:{},expandAll:!0}),{tableHeaderRef:S,getTableHeaderStyles:_}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),T=u.useCallback(()=>{alert("엑셀 다운로드 기능이 호출되었습니다")},[]),I=u.useCallback(()=>{alert("인쇄 기능이 호출되었습니다")},[]),[L,A]=u.useState(0),[D,B]=u.useState(10),{checkedItems:$,sortConfig:N,expandedRows:F,allChecked:O,handleSort:R,handleCheck:E,handleToggleAll:z,handleToggleExpand:q}=Nn({data:b,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!0,page:L,rowsPerPage:D}),{activeFilters:X,handleFilterChange:H,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge,dateRange:oe,page:G,rowsPerPage:Q,totalCount:te,totalPages:U,handlePageChange:V,handleRowsPerPageChange:ae,filteredData:ne,displayData:me,filterValues:ue,handleFilter:Ae,handleClearFilters:we}=yr({columns:fD,data:b,defaultRowsPerPage:10,hierarchical:!0,filterOptions:{initialFilters:{status:"all",category:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:s.length,onExcelDownload:T,onPrint:I}}),{searchText:ce,totalItems:De,sequentialPageNumbers:le,hasPinnedColumns:se,isGridReady:J,handleSearchChange:Z,handleClearSearch:ie,togglePageNumberMode:_e,toggleColumnPin:Re,setGridReady:He}=Rn({initialTotalItems:s.length,onSearch:Ie=>{G!==0&&V(0)},onToggleColumnPin:Ie=>{Ie?$t():jt()}});u.useEffect(()=>{},[ce]),u.useEffect(()=>{He(!0)},[He]);const{columns:ft,dragInfo:St,pinnedColumns:Tt,handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt,updateColumns:ht,clearAllPinnedColumns:jt,setDefaultPinnedColumns:$t}=sr({initialColumns:fD,tableId:"main_table",onColumnOrderChange:Ie=>{}}),{columnVisibility:Ut,visibleColumns:Bt,hiddenColumnsCount:Kt,toggleableColumns:Ft,toggleColumnVisibility:Et,showAllColumns:Ot,resetToDefault:zt}=dr(ft,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"main_table"}),[Wt,kt]=u.useState(null),Mt=!!Wt,Ht=u.useCallback(Ie=>{kt(Ie)},[]),qt=u.useCallback(()=>{kt(null)},[]),Yt=!0,Xt={handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt},tn=u.useCallback(Ie=>{k(Ie),typeof q=="function"&&q(Ie)},[k,q]),Fe=u.useCallback((Ie,Xe,ve)=>{switch(Xe){case"status":return ve==="all"?Ie:Ie.filter(xe=>{const qe=Object.keys(e).find(Ee=>e[Ee].label===(xe.type&&xe.type.label));return qe&&e[qe].category===ve});case"category":if(ve==="all")return Ie;const at=e[ve];return at?Ie.filter(xe=>xe.type&&xe.type.label===at.label):Ie;case"date":let We=[...Ie];return ve.startDate&&(We=We.filter(xe=>xe.id>=10)),ve.endDate&&(We=We.filter(xe=>xe.id<=20)),We;default:return Ie}},[]),je=u.useCallback((Ie,Xe)=>{Ae({[Ie]:Xe})},[Ae]),Oe=[{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"active",label:"활성"},{value:"inactive",label:"비활성"}]},{id:"type",label:"유형",items:[{value:"",label:"전체"},...Object.keys(e).map(Ie=>({value:Ie,label:e[Ie].label}))]}],ke=u.useMemo(()=>{const Ie={...X};return Object.keys(Ie).forEach(Xe=>{Ie[Xe]==="all"&&(Ie[Xe]="")}),Ie},[X]),bt=Dr({data:v,activeFilters:ke,searchText:ce,isDateFilterActive:K,dateRange:oe,filterCallback:Fe}),it=u.useMemo(()=>bt?bt.map(Ie=>Ie.id):[],[bt]),fe=u.useMemo(()=>!b||!it||it.length===0?[]:b.filter(Ie=>it.includes(Ie.id)),[b,it]);u.useEffect(()=>{},[G,Q]);const be=fe||[],Te=u.useMemo(()=>{const Ie=Xe=>{if(!Xe||!Xe.length)return 0;let ve=0;return Xe.forEach(at=>{ve++,at.children&&at.children.length>0&&(ve+=Ie(at.children))}),ve};return Ie(be)},[be]);u.useEffect(()=>{be.length!==De&&`${be.length}${Te}`},[be.length,De,Te]);const Ne=u.useCallback((Ie,Xe)=>{let ve=Xe;if(typeof Ie=="number"&&Xe===void 0&&(ve=Ie),typeof ve!="number"){console.error("유효하지 않은 페이지 번호:",ve);return}A(ve),V(ve)},[L,V]),Ve=u.useCallback(Ie=>{if(!Ie||!Ie.target||!Ie.target.value){console.error("행 수 변경 이벤트 오류:",Ie);return}const Xe=parseInt(Ie.target.value,10);B(Xe),A(0),ae(Ie)},[D,ae]),[Ge,At]=u.useState(Date.now());u.useEffect(()=>{At(Date.now())},[L,D]);const Qe=u.useMemo(()=>!be||be.length===0?[]:be,[be,L,D,Te]);return m(vn,{children:[a(Cn,{title:"테이블 필터링 및 페이지네이션 예제",onDisplayOptionsClick:Ht,showAddButton:!1,showRefreshButton:!1,sx:{mb:2}}),a(or,{anchorEl:Wt,open:Mt,onClose:qt,toggleableColumns:Ft,columnVisibility:Ut,onToggleColumn:Et,onShowAll:Ot,onReset:zt,hiddenColumnsCount:Kt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(M,{variant:"h5",gutterBottom:!0,children:"TableFilterAndPagination 컴포넌트 사용 예시"}),m(M,{variant:"body1",sx:{mb:3},children:["아래는 ",a("code",{children:"TableFilterAndPagination"})," 컴포넌트를 사용한 예시입니다. 테이블 상단에 위치하여 필터링과 페이지 이동 기능을 제공합니다. 하단에는 구분선이 추가되어 테이블 콘텐츠와의 경계를 명확히 합니다.",a("strong",{children:' 상단의 "표시 옵션" 버튼을 클릭하여 컬럼 표시/숨김을 제어할 수 있습니다.'})]}),m(j,{sx:{mb:2},children:[m(M,{variant:"subtitle2",gutterBottom:!0,children:["유형 계층 구조 ",n&&"(로딩 중...)"," ",r&&"(오류 발생)"]}),i&&Object.keys(e).length>0?a(rj,{types:e,typeHierarchy:t,expandedTypes:P,onTypeToggle:k,onExpandAll:C,direction:"horizontal"}):a(M,{variant:"body2",color:"text.secondary",children:n?"동적 유형을 로드하는 중...":r?`오류: ${r}`:"동적 유형이 설정되지 않았습니다."})]}),a(Fi,{tableHeight:c,autoHeight:d,toggleAutoHeight:h,setManualHeight:f,minHeight:200,maxHeight:1200,step:50}),a(gn,{title:"회원 목록",totalItems:Te,countLabel:"총 ##count##명의 회원",indentMode:y,toggleIndentMode:p,sequentialPageNumbers:le,togglePageNumberMode:_e,hasPinnedColumns:se,isGridReady:J,toggleColumnPin:Re,searchText:ce,handleSearchChange:Z,handleClearSearch:ie,showIndentToggle:!0,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"회원 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:ft,filterValues:ue||{},activeFilters:ke||{},filterOptions:Oe,handleFilterChange:je,onFilter:Ae,onClearFilters:we,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge},paginationProps:{count:Te,page:L,rowsPerPage:D,onPageChange:Ne,onRowsPerPageChange:Ve,totalCount:Te,onExcelDownload:T,onPrint:I}})}),m(j,{sx:{width:"100%",mt:2},ref:l,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",L+1," / ",Math.ceil(Te/D)," (페이지당 ",D,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Bt,data:Qe,checkable:!0,hierarchical:!0,indentMode:y,checkedItems:$,expandedRows:F,allChecked:O,onCheck:E,onToggleAll:z,onToggleExpand:tn,onSort:R,sortConfig:N,page:L,rowsPerPage:D,totalCount:Te,sequentialPageNumbers:le,draggableColumns:Yt,onColumnOrderChange:ht,dragHandlers:Xt,dragInfo:St,fixedHeader:!0,maxHeight:c,tableHeaderRef:S,headerStyle:_(),pinnedColumns:Tt},`table-${Ge}`),a(rr,{resizeHandleProps:w(parseFloat(c)),showIcon:!0,isDragging:g,sx:{mt:1,opacity:g?1:.7,"&:hover":{opacity:1}}}),a(Qg,{totalItems:Te,totalPages:Math.ceil(Te/D),currentPage:L,currentRowsPerPage:D,totalCount:Te,searchText:ce,sequentialPageNumbers:le,isDragging:g,tableHeight:c,calculateMaxHeight:x,pinnedColumns:Tt,visibleColumns:Bt,hiddenColumnsCount:Kt,columnVisibility:Ut})]})]})]})},cae=()=>{const{notification:e,closeNotification:t,handleAddClick:n,handleOptionsClick:r,handleRefreshClick:i,optionsMenuAnchor:o,isOptionsMenuOpen:s,handleCloseOptionsMenu:l}=rae({onAdd:()=>{}}),{searchText:c,totalItems:d,indentMode:h,sequentialPageNumbers:f,hasPinnedColumns:g,isGridReady:w,handleSearchChange:x,handleClearSearch:y,toggleIndentMode:p,togglePageNumberMode:v,toggleColumnPin:b,setGridReady:P}=Rn({initialTotalItems:250,onSearch:C=>{}}),k=C=>{l()};return m(Xl,{maxWidth:"lg",children:[a(Cn,{title:"기본 템플릿",onAddClick:n,onDisplayOptionsClick:r,onRefreshClick:i,showAddButton:!0,showDisplayOptionsButton:!0,showRefreshButton:!0,addButtonText:"템플릿 추가",customActions:null}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(M,{variant:"h5",gutterBottom:!0,children:"TableHeader 컴포넌트 사용 예시"}),m(M,{variant:"body1",paragraph:!0,children:["아래는 ",a("code",{children:"TableHeader"})," 컴포넌트를 사용한 예시입니다. 테이블 상단에 위치하는 헤더 영역으로, 타이틀, 항목 수, 페이지 번호 방식, 컬럼 고정 및 검색 기능을 제공합니다."]}),a(gn,{title:"회원 목록",totalItems:d,countLabel:"총 ##count##명의 회원",indentMode:h,toggleIndentMode:p,sequentialPageNumbers:f,togglePageNumberMode:v,hasPinnedColumns:g,isGridReady:w,toggleColumnPin:b,searchText:c,handleSearchChange:x,handleClearSearch:y,showIndentToggle:!0,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"회원 검색..."})]})}),a(lae,{}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[a(M,{variant:"h5",gutterBottom:!0,children:"PageHeader 컴포넌트 사용 예시"}),m(M,{variant:"body1",children:["이 페이지의 상단에 있는 헤더는 ",a("code",{children:"PageHeader"})," 컴포넌트를 사용하여 구현되었습니다. 왼쪽에는 페이지 제목이, 오른쪽에는 추가, 표시 옵션, 새로고침 버튼이 있습니다. 각 버튼은 클릭하면 스낵바 알림이 표시됩니다."]})]})}),a(aae,{}),a(iae,{}),a(oae,{})]}),m(vi,{anchorEl:o,open:s,onClose:l,PaperProps:{elevation:2,sx:{mt:1,borderRadius:2}},children:[m(Me,{onClick:()=>k(),children:[a(ur,{children:a(LF,{fontSize:"small"})}),a(_r,{children:"그리드 뷰"})]}),m(Me,{onClick:()=>k(),children:[a(ur,{children:a($F,{fontSize:"small"})}),a(_r,{children:"모듈 뷰"})]}),m(Me,{onClick:()=>k(),children:[a(ur,{children:a(jF,{fontSize:"small"})}),a(_r,{children:"리스트 뷰"})]})]}),a(ua,{open:e.open,autoHideDuration:4e3,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:t,severity:e.severity,sx:{width:"100%"},children:e.message})})]})},W0=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,align:"center"},{id:"number",type:"number",header:"No.",width:70,align:"center",sortable:!0},{id:"levelType",header:"유형",type:"custom",width:120,sortable:!0,align:"center",customRenderer:"levelTypeChip"},{id:"permissions",header:"권한",type:"text",width:200,sortable:!0,align:"left"},{id:"hierarchyOrder",header:"계층단계",type:"dropdown",width:120,sortable:!0,align:"center",editable:!0,dropdownType:"hierarchy"},{id:"createdAt",header:"생성일",type:"datetime",width:180,sortable:!0,align:"center"},{id:"updatedAt",header:"수정일",type:"datetime",width:180,sortable:!0,align:"center"},{id:"actions",header:"액션",type:"button",width:160,align:"center",buttons:[{label:"수정",color:"primary",variant:"outlined",onClick:null},{label:"삭제",color:"error",variant:"outlined",onClick:null}],buttonDirection:"row"}],uae=[{id:"status",label:"상태별",items:[{value:"all",label:"전체"},{value:"active",label:"활성"},{value:"inactive",label:"비활성"}]},{id:"levelType",label:"유형별",items:[{value:"all",label:"전체"}]}];function Zg(){return(Zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function uj(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Qw(e){var t=u.useRef(e),n=u.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var Zd=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},ad=function(e){return"touches"in e},Zw=function(e){return e&&e.ownerDocument.defaultView||self},pD=function(e,t,n){var r=e.getBoundingClientRect(),i=ad(t)?function(o,s){for(var l=0;l<o.length;l++)if(o[l].identifier===s)return o[l];return o[0]}(t.touches,n):t;return{left:Zd((i.pageX-(r.left+Zw(e).pageXOffset))/r.width),top:Zd((i.pageY-(r.top+Zw(e).pageYOffset))/r.height)}},gD=function(e){!ad(e)&&e.preventDefault()},dj=Ce.memo(function(e){var t=e.onMove,n=e.onKey,r=uj(e,["onMove","onKey"]),i=u.useRef(null),o=Qw(t),s=Qw(n),l=u.useRef(null),c=u.useRef(!1),d=u.useMemo(function(){var w=function(p){gD(p),(ad(p)?p.touches.length>0:p.buttons>0)&&i.current?o(pD(i.current,p,l.current)):y(!1)},x=function(){return y(!1)};function y(p){var v=c.current,b=Zw(i.current),P=p?b.addEventListener:b.removeEventListener;P(v?"touchmove":"mousemove",w),P(v?"touchend":"mouseup",x)}return[function(p){var v=p.nativeEvent,b=i.current;if(b&&(gD(v),!function(k,C){return C&&!ad(k)}(v,c.current)&&b)){if(ad(v)){c.current=!0;var P=v.changedTouches||[];P.length&&(l.current=P[0].identifier)}b.focus(),o(pD(b,v,l.current)),y(!0)}},function(p){var v=p.which||p.keyCode;v<37||v>40||(p.preventDefault(),s({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},y]},[s,o]),h=d[0],f=d[1],g=d[2];return u.useEffect(function(){return g},[g]),Ce.createElement("div",Zg({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),ZC=function(e){return e.filter(Boolean).join(" ")},hj=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,o=ZC(["react-colorful__pointer",e.className]);return Ce.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},Ce.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},na=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},dae=function(e){return mae(e1(e))},e1=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?na(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?na(parseInt(e.substring(6,8),16)/255,2):1}},hae=function(e){return gae(pae(e))},fae=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:na(e.h),s:na(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:na(i/2),a:na(r,2)}},t1=function(e){var t=fae(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},pae=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),s=r*(1-n),l=r*(1-(t-o)*n),c=r*(1-(1-t+o)*n),d=o%6;return{r:na(255*[r,l,s,s,c,r][d]),g:na(255*[c,r,r,l,s,s][d]),b:na(255*[s,s,c,r,r,l][d]),a:na(i,2)}},hf=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},gae=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i<1?hf(na(255*i)):"";return"#"+hf(t)+hf(n)+hf(r)+o},mae=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),s=o-Math.min(t,n,r),l=s?o===t?(n-r)/s:o===n?2+(r-t)/s:4+(t-n)/s:0;return{h:na(60*(l<0?l+6:l)),s:na(o?s/o*100:0),v:na(o/255*100),a:i}},yae=Ce.memo(function(e){var t=e.hue,n=e.onChange,r=ZC(["react-colorful__hue",e.className]);return Ce.createElement("div",{className:r},Ce.createElement(dj,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Zd(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":na(t),"aria-valuemax":"360","aria-valuemin":"0"},Ce.createElement(hj,{className:"react-colorful__hue-pointer",left:t/360,color:t1({h:t,s:100,v:100,a:1})})))}),bae=Ce.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:t1({h:t.h,s:100,v:100,a:1})};return Ce.createElement("div",{className:"react-colorful__saturation",style:r},Ce.createElement(dj,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Zd(t.s+100*i.left,0,100),v:Zd(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+na(t.s)+"%, Brightness "+na(t.v)+"%"},Ce.createElement(hj,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:t1(t)})))}),fj=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},vae=function(e,t){return e.toLowerCase()===t.toLowerCase()||fj(e1(e),e1(t))};function xae(e,t,n){var r=Qw(n),i=u.useState(function(){return e.toHsva(t)}),o=i[0],s=i[1],l=u.useRef({color:t,hsva:o});u.useEffect(function(){if(!e.equal(t,l.current.color)){var d=e.toHsva(t);l.current={hsva:d,color:t},s(d)}},[t,e]),u.useEffect(function(){var d;fj(o,l.current.hsva)||e.equal(d=e.fromHsva(o),l.current.color)||(l.current={hsva:o,color:d},r(d))},[o,e,r]);var c=u.useCallback(function(d){s(function(h){return Object.assign({},h,d)})},[]);return[o,c]}var wae=typeof window<"u"?u.useLayoutEffect:u.useEffect,Cae=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},mD=new Map,Sae=function(e){wae(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!mD.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,mD.set(t,n);var r=Cae();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},Pae=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,o=e.onChange,s=uj(e,["className","colorModel","color","onChange"]),l=u.useRef(null);Sae(l);var c=xae(n,i,o),d=c[0],h=c[1],f=ZC(["react-colorful",t]);return Ce.createElement("div",Zg({},s,{ref:l,className:f}),Ce.createElement(bae,{hsva:d,onChange:h}),Ce.createElement(yae,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},kae={defaultColor:"000",toHsva:dae,fromHsva:function(e){return hae({h:e.h,s:e.s,v:e.v,a:1})},equal:vae},_ae=function(e){return Ce.createElement(Pae,Zg({},e,{colorModel:kae}))};const pj=({open:e,editMode:t,currentLevel:n,onClose:r,onSave:i,onInputChange:o,availablePermissions:s=[],totalCount:l=5})=>{s.length;const[c,d]=u.useState(!1),[h,f]=u.useState("#e8f5e9"),[g,w]=u.useState(""),x=[{name:"기본 색상",colors:[{name:"녹색",backgroundColor:"#e8f5e9",borderColor:"#2e7d32"},{name:"파란색",backgroundColor:"#e3f2fd",borderColor:"#1565c0"},{name:"주황색",backgroundColor:"#fff3e0",borderColor:"#e65100"},{name:"보라색",backgroundColor:"#f3e5f5",borderColor:"#7b1fa2"},{name:"빨간색",backgroundColor:"#ffebee",borderColor:"#c62828"},{name:"노란색",backgroundColor:"#fffde7",borderColor:"#f57f17"},{name:"청록색",backgroundColor:"#e0f2f1",borderColor:"#00695c"},{name:"분홍색",backgroundColor:"#fce4ec",borderColor:"#ad1457"},{name:"갈색",backgroundColor:"#efebe9",borderColor:"#5d4037"},{name:"회색",backgroundColor:"#f5f5f5",borderColor:"#424242"},{name:"남색",backgroundColor:"#e8eaf6",borderColor:"#303f9f"},{name:"라임",backgroundColor:"#f9fbe7",borderColor:"#827717"},{name:"시안",backgroundColor:"#e0f7fa",borderColor:"#00838f"},{name:"자주색",backgroundColor:"#f1f8e9",borderColor:"#558b2f"},{name:"연두색",backgroundColor:"#e8f4fd",borderColor:"#1976d2"},{name:"살구색",backgroundColor:"#fef7e0",borderColor:"#f57c00"},{name:"라벤더",backgroundColor:"#f8e5f8",borderColor:"#8e24aa"},{name:"코랄",backgroundColor:"#fdeaea",borderColor:"#d32f2f"},{name:"민트",backgroundColor:"#fffef0",borderColor:"#fbc02d"},{name:"스카이블루",backgroundColor:"#e1f5fe",borderColor:"#0277bd"}]}],y=u.useCallback((k,C)=>{o({target:{name:"backgroundColor",value:k}}),o({target:{name:"borderColor",value:C}}),f(k)},[o]),p=u.useCallback(k=>{f(k);const C=v(k);o({target:{name:"backgroundColor",value:k}}),o({target:{name:"borderColor",value:C}})},[o]),v=k=>{const C=k.replace("#",""),S=parseInt(C.substr(0,2),16),_=parseInt(C.substr(2,2),16),T=parseInt(C.substr(4,2),16),I=Math.floor(S*.6),L=Math.floor(_*.6),A=Math.floor(T*.6);return`#${I.toString(16).padStart(2,"0")}${L.toString(16).padStart(2,"0")}${A.toString(16).padStart(2,"0")}`},b=()=>g?x.map(k=>({...k,colors:k.colors.filter(C=>C.name.toLowerCase().includes(g.toLowerCase()))})).filter(k=>k.colors.length>0):x,P=()=>{d(!1),w(""),r()};return m(Yn,{open:e,onClose:P,maxWidth:"sm",fullWidth:!0,disablePortal:!1,keepMounted:!1,children:[a(Zn,{children:t?"단계 수정":"단계 추가"}),m(Jt,{severity:"warning",sx:{mx:3,mb:2,backgroundColor:"#fff3e0",border:"1px solid #ff9800"},children:[a(M,{variant:"body2",sx:{fontWeight:600,mb:.5,fontSize:"14px",color:"#e65100"},children:"* 단계는 영업에 들어가기 앞서 초기에 설정해주세요!"}),a(M,{variant:"body2",sx:{fontWeight:600,fontSize:"14px",color:"#e65100"},children:"* 단계 삭제 및 수정 시 일부 데이터가 변형되거나 삭제가 될 수 있으니 신중해 주세요!"})]}),a(Kn,{children:m(j,{sx:{pt:1},children:[a($e,{autoFocus:!0,margin:"dense",name:"levelType",label:"단계 이름",type:"text",fullWidth:!0,value:n.levelType||"",onChange:o}),m(Zt,{fullWidth:!0,margin:"dense",children:[a(hn,{children:"권한 템플릿"}),m(an,{name:"permissionId",value:n.permissionId||"",label:"권한 템플릿",onChange:o,children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),s.map(k=>a(Me,{value:k.id,children:k.permissionName||k.permission_name},k.id))]})]}),m(Zt,{fullWidth:!0,margin:"dense",children:[a(hn,{children:"계층 순서"}),a(an,{name:"hierarchyOrder",value:n.hierarchyOrder||1,label:"계층 순서",onChange:o,children:Array.from({length:l+1},(k,C)=>C+1).map(k=>a(Me,{value:k,children:k},k))})]}),m(j,{sx:{mt:3},children:[a(M,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold"},children:"색상 선택"}),a($e,{fullWidth:!0,size:"small",placeholder:"색상 검색...",value:g,onChange:k=>w(k.target.value),sx:{mb:2}}),m(j,{sx:{mb:2},children:[a(Se,{variant:"outlined",onClick:()=>d(!c),sx:{mb:1},children:"커스텀 색상 선택"}),c&&a(j,{sx:{mt:1},children:a(_ae,{color:h,onChange:p})})]}),m(j,{sx:{maxHeight:300,overflow:"auto"},children:[b().map((k,C)=>m(j,{sx:{mb:2},children:[a(M,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:k.name}),a(j,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:k.colors.map((S,_)=>a(Fn,{title:S.name,arrow:!0,children:a(j,{onClick:()=>y(S.backgroundColor,S.borderColor),sx:{width:40,height:40,borderRadius:"50%",backgroundColor:S.backgroundColor,border:`2px solid ${S.borderColor}`,cursor:"pointer",boxShadow:n.backgroundColor===S.backgroundColor?"0 0 0 3px rgba(0,0,0,0.3)":"none",display:"flex",alignItems:"center",justifyContent:"center",color:S.borderColor,fontSize:"14px",fontWeight:400,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"scale(1.1)",boxShadow:"0 0 0 2px rgba(0,0,0,0.2)"}},children:n.backgroundColor===S.backgroundColor&&"✓"})},_))})]},C)),b().length===0&&a(M,{variant:"body2",sx:{textAlign:"center",py:2,color:"text.secondary"},children:"검색 결과가 없습니다."})]}),m(j,{sx:{mt:2,display:"flex",alignItems:"center"},children:[a(M,{variant:"subtitle2",sx:{mr:2},children:"미리보기:"}),a(ut,{label:n.levelType||"단계 이름",sx:{backgroundColor:n.backgroundColor||"#e8f5e9",color:n.borderColor||"#2e7d32",border:`1px solid ${n.borderColor||"#2e7d32"}`,fontWeight:400,borderRadius:"50px",padding:"0 8px",height:"28px",fontSize:"0.8rem"}})]})]})]})}),m(nr,{children:[a(Se,{onClick:P,color:"inherit",children:"취소"}),a(Se,{onClick:i,color:"primary",variant:"contained",children:"저장"})]})]})};pj.propTypes={open:re.bool.isRequired,editMode:re.bool.isRequired,currentLevel:re.object.isRequired,onClose:re.func.isRequired,onSave:re.func.isRequired,onInputChange:re.func.isRequired,availablePermissions:re.array,totalCount:re.number};const eS=({open:e,title:t="삭제 확인",itemName:n,itemType:r="항목",onConfirm:i,onCancel:o})=>{const[s,l]=u.useState(1);Ce.useEffect(()=>{e&&l(1)},[e]);const c=()=>{l(2)},d=()=>{l(1),i()},h=()=>{l(1),o()};return m(Yn,{open:e,onClose:h,maxWidth:"sm",fullWidth:!0,children:[a(Zn,{children:s===1?t:"최종 삭제 확인"}),a(Kn,{children:s===1?m(j,{children:[m(Jt,{severity:"error",sx:{mb:3,backgroundColor:"#ffebee",border:"1px solid #f44336"},children:[a(M,{variant:"body2",sx:{fontWeight:600,mb:.5,fontSize:"14px",color:"#d32f2f"},children:"* 단계 삭제 및 수정 시 일부 데이터가 변형되거나 삭제가 될 수 있으니 신중해 주세요."}),a(M,{variant:"body2",sx:{fontWeight:600,fontSize:"14px",color:"#d32f2f"},children:"* 절대 되돌릴 수 없습니다."})]}),m(M,{children:['정말로 "',a("strong",{children:n}),'" ',r,"을(를) 삭제하시겠습니까?"]}),m(M,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["삭제된 ",r,"은(는) 복구할 수 없습니다."]})]}):m(j,{children:[m(Jt,{severity:"warning",sx:{mb:3,backgroundColor:"#fff3e0",border:"1px solid #ff9800"},children:[a(M,{variant:"h6",sx:{fontWeight:700,mb:1,color:"#e65100"},children:"⚠️ 마지막 확인"}),a(M,{variant:"body2",sx:{fontWeight:600,fontSize:"14px",color:"#e65100"},children:"이 작업은 되돌릴 수 없습니다!"})]}),m(M,{variant:"h6",sx:{mb:2,fontWeight:600},children:['정말로 "',a("strong",{style:{color:"#d32f2f"},children:n}),'" ',r,"을(를)",a("span",{style:{color:"#d32f2f"},children:" 영구적으로 삭제"}),"하시겠습니까?"]}),m(M,{variant:"body2",color:"error",sx:{mt:2,fontWeight:500},children:["✓ 관련된 모든 데이터가 삭제됩니다",a("br",{}),"✓ 이 작업은 취소할 수 없습니다",a("br",{}),"✓ 백업이 없다면 복구가 불가능합니다"]})]})}),m(nr,{children:[a(Se,{onClick:h,color:"inherit",children:"취소"}),s===1?a(Se,{onClick:c,color:"warning",variant:"contained",children:"계속 진행"}):a(Se,{onClick:d,color:"error",variant:"contained",children:"최종 삭제"})]})]})};eS.propTypes={open:re.bool.isRequired,title:re.string,itemName:re.string.isRequired,itemType:re.string,onConfirm:re.func.isRequired,onCancel:re.func.isRequired};const Ji={getAll:async()=>(await Pe.get("/agent-levels")).data.data,getById:async e=>(await Pe.get(`/agent-levels/${e}`)).data.data,create:async e=>(await Pe.post("/agent-levels",e)).data.data,update:async(e,t)=>{var n,r,i,o,s;try{return(await Pe.put(`/agent-levels/${e}`,t)).data.data}catch(l){throw console.error("Agent level update error:",((n=l.response)==null?void 0:n.data)||l),(i=(r=l.response)==null?void 0:r.data)!=null&&i.details&&console.error("Error details:",l.response.data.details),(s=(o=l.response)==null?void 0:o.data)!=null&&s.stack&&console.error("Error stack:",l.response.data.stack),l}},delete:async e=>(await Pe.delete(`/agent-levels/${e}`)).data,updateHierarchyOrder:async(e,t)=>{const n=await Pe.put(`/agent-levels/${e}/hierarchy`,{hierarchyOrder:t});return n.data.data},deleteWithOption:async(e,t)=>(await Pe.delete(`/agent-levels/${e}`,{data:t})).data};var tu={},yD;function Tae(){if(yD)return tu;yD=1;var e=ln();Object.defineProperty(tu,"__esModule",{value:!0}),tu.default=void 0;var t=e(un()),n=cn();return tu.default=(0,t.default)([(0,n.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,n.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber"),tu}var Iae=Tae();const Oae=vt(Iae),Aae=({open:e,onClose:t,levelData:n,onConfirm:r,preventDeleteEnabled:i=!0})=>{const[o,s]=u.useState(""),[l,c]=u.useState(0),[d,h]=u.useState(!1),[f,g]=u.useState(null),[w,x]=u.useState(null);u.useEffect(()=>{e&&n&&(y(),p())},[e,n]);const y=async()=>{var k,C;try{const S=await Pe.members.getByLevel(n.id);c(((C=(k=S.data)==null?void 0:k.data)==null?void 0:C.count)||0)}catch(S){console.error("회원 수 조회 실패:",S),c(0)}},p=async()=>{var k;try{const _=(((k=(await Pe.agentLevels.getAll()).data)==null?void 0:k.data)||[]).sort((I,L)=>I.level-L.level),T=_.findIndex(I=>I.id===n.id);T>0&&g(_[T-1]),T<_.length-1&&x(_[T+1])}catch(C){console.error("인접 레벨 조회 실패:",C)}},v=async()=>{if(l>0&&!o){alert("처리 옵션을 선택해주세요.");return}if(o==="1"&&l>0){alert("회원이 있는 단계는 삭제할 수 없습니다.");return}if(o==="2"){const k=`정말로 "${n==null?void 0:n.name}" 단계의 모든 회원(${l}명)과 그 하위 회원들을 삭제하시겠습니까?

이 작업은 되돌릴 수 없습니다!`;if(!window.confirm(k)||!window.confirm("마지막 확인: 정말로 모든 회원을 삭제하시겠습니까?"))return}h(!0);try{await r(n.id,o,{upperLevelId:f==null?void 0:f.id,lowerLevelId:w==null?void 0:w.id}),b()}catch(k){console.error("삭제 처리 실패:",k),alert("삭제 처리 중 오류가 발생했습니다.")}finally{h(!1)}},b=()=>{s(""),c(0),g(null),x(null),t()},P=k=>{switch(k){case"1":return"삭제 방지 (회원이 있으면 삭제 불가)";case"2":return"하부 회원 모두 삭제 (주의: 되돌릴 수 없음)";default:return""}};return m(Yn,{open:e,onClose:b,maxWidth:"sm",fullWidth:!0,children:[a(Zn,{children:m(j,{display:"flex",alignItems:"center",gap:1,children:[a(Oae,{color:"warning"}),m(M,{variant:"h6",children:[n==null?void 0:n.name," 단계 삭제"]})]})}),m(Kn,{children:[m(Jt,{severity:"info",sx:{mb:2},children:["이 단계에는 ",m("strong",{children:[l,"명"]}),"의 회원이 있습니다."]}),l>0&&m(j,{sx:{mb:2},children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"삭제 처리 옵션을 선택하세요:"}),a(Zt,{component:"fieldset",children:m(rx,{value:o,onChange:k=>s(k.target.value),children:[a(Lt,{value:"1",control:a(Io,{}),label:P("1")}),a(Lt,{value:"2",control:a(Io,{}),label:m(j,{children:[a(M,{color:"error",children:P("2")}),a(M,{variant:"caption",color:"text.secondary",children:"이 단계의 모든 회원과 하위 회원들이 삭제됩니다."})]})})]})})]}),l===0&&a(M,{children:"회원이 없는 단계입니다. 삭제하시겠습니까?"})]}),m(nr,{children:[a(Se,{onClick:b,disabled:d,children:"취소"}),a(Se,{onClick:v,color:"error",variant:"contained",disabled:d||l>0&&!o,startIcon:d&&a(ir,{size:16}),children:d?"처리 중...":"삭제"})]})]})},Dae=({actions:e=[],onAction:t,data:n=[]})=>{const[r,i]=u.useState({}),[o,s]=u.useState(!1),l=u.useMemo(()=>Object.values(r).filter(Boolean).length,[r]),c=u.useMemo(()=>n.length===0?!1:n.every(p=>r[p.id]),[n,r]),d=u.useMemo(()=>{const p=Object.values(r).filter(Boolean).length;return p>0&&p<n.length},[r,n.length]),h=u.useMemo(()=>Object.entries(r).filter(([,p])=>p).map(([p])=>p),[r]),f=u.useCallback(p=>{i(v=>({...v,[p]:!v[p]}))},[]),g=u.useCallback(()=>{if(c)i({});else{const p={};n.forEach(v=>{p[v.id]=!0}),i(p)}},[n,c]),w=u.useCallback(()=>{i({})},[]),x=u.useCallback(async p=>{if(!(!t||l===0))try{s(!0),await t(p,h),w()}catch(v){throw console.error("벌크 액션 실행 중 오류:",v),v}finally{s(!1)}},[t,h,l,w]),y=u.useCallback(p=>{const v=e.find(b=>b.type===p);return!v||v.minSelection&&l<v.minSelection||v.maxSelection&&l>v.maxSelection||v.condition&&!v.condition(h,n)?!1:l>0},[e,l,h,n]);return{selectedItems:r,selectedCount:l,selectedIds:h,isAllSelected:c,isPartiallySelected:d,isProcessing:o,toggleItem:f,toggleAll:g,clearSelection:w,executeAction:x,isActionEnabled:y,isSelected:p=>!!r[p]}},Rae=()=>{const e=mo(),[t,n]=u.useState(0),[r,i]=u.useState(0),[o,s]=u.useState(10),[l,c]=u.useState({}),[d,h]=u.useState({status:"all",levelType:"all"}),[f,g]=u.useState([]),[w,x]=u.useState(!0),[y,p]=u.useState(null),[v,b]=u.useState([]),P=u.useRef([]),[k,C]=u.useState(!1),[S,_]=u.useState([]),T=u.useCallback((be,Te)=>{n(Te),Te===0||Te===1&&e("/site-settings/permission")},[e]),I=u.useCallback(async()=>{try{x(!0),p(null);const[be,Te]=await Promise.all([Ji.getAll(),cs.getAll()]),Ne=be.map(Ge=>{let At="권한 없음";if(Ge.id===6&&(Ge.id,Ge.name,Ge.permission_id,Ge.permission_template_name,Ge.permission),Ge.permission_template_name)At=Ge.permission_template_name;else if(Ge.permission_id&&Te&&Te.length>0){const Qe=Te.find(Ie=>Ie.id===parseInt(Ge.permission_id));Qe&&(At=Qe.permissionName||Qe.permission_name)}return{id:Ge.id,levelType:Ge.name,permissions:At,permissionId:Ge.permission_id,hierarchyOrder:Ge.level,backgroundColor:Ge.background_color,borderColor:Ge.border_color,createdAt:Ge.created_at,updatedAt:Ge.updated_at}});g(Ne);const Ve=Te.filter(Ge=>Ge.isActive);b(Ve),P.current=Ve,Ve.length,Ve.length>0&&Ve[0]}catch(be){console.error("데이터 로드 실패:",be),p("데이터를 불러오는데 실패했습니다. 서버가 실행 중인지 확인해주세요.")}finally{x(!1)}},[]);u.useEffect(()=>{I(),Tn.connect(),Tn.joinRoom("agent-levels");const be=Ge=>{let At="권한 없음";if(Ge.permission_template_name)At=Ge.permission_template_name;else if(Ge.permission_id&&P.current.length>0){const Ie=P.current.find(Xe=>Xe.id===parseInt(Ge.permission_id));Ie&&(At=Ie.permissionName||Ie.permission_name)}else Ge.permission&&(At=Ge.permission);const Qe={id:Ge.id,levelType:Ge.name,permissions:At,permissionId:Ge.permission_id,hierarchyOrder:Ge.level,backgroundColor:Ge.background_color,borderColor:Ge.border_color,createdAt:Ge.created_at,updatedAt:Ge.updated_at};g(Ie=>[...Ie,Qe])},Te=Ge=>{let At="권한 없음";if(Ge.permission_template_name)At=Ge.permission_template_name;else if(Ge.permission_id&&P.current.length>0){const Ie=P.current.find(Xe=>Xe.id===parseInt(Ge.permission_id));Ie&&(At=Ie.permission_name||Ie.permissionName)}else Ge.permission&&(At=Ge.permission);const Qe={id:Ge.id,levelType:Ge.name,permissions:At,permissionId:Ge.permission_id,hierarchyOrder:Ge.level,backgroundColor:Ge.background_color,borderColor:Ge.border_color,createdAt:Ge.created_at,updatedAt:Ge.updated_at};g(Ie=>Ie.map(Xe=>Xe.id===Qe.id?Qe:Xe))},Ne=Ge=>{g(At=>At.filter(Qe=>Qe.id!==Ge.id))},Ve=Ge=>{switch(Ge.action){case"added":be(Ge.data);break;case"updated":case"hierarchy-changed":Te(Ge.data);break;case"deleted":Ne(Ge);break}};return Tn.on("agent-levels-updated",Ve),()=>{Tn.off("agent-levels-updated",Ve),Tn.leaveRoom("agent-levels")}},[]);const[L,A]=u.useState(!1),[D,B]=u.useState(!1),[$,N]=u.useState({levelType:"",permissions:"",permissionId:null,hierarchyOrder:1,backgroundColor:"#e8f5e9",borderColor:"#2e7d32"}),[F,O]=u.useState(!1),[R,E]=u.useState(null),z=u.useMemo(()=>{let be=[...f];return d.levelType&&d.levelType!=="all"&&(be=be.filter(Te=>Te.levelType===d.levelType)),be},[f,d]),q=u.useMemo(()=>z,[z]),X=z.length,H=Dae({data:q,actions:[{type:"delete",label:"삭제",color:"error"}],onAction:async(be,Te)=>{if(be==="delete"){const Ne=q.filter(Ve=>Te.includes(Ve.id));_(Ne),C(!0)}}}),{columnVisibility:K,hiddenColumnsCount:ee,toggleableColumns:ge,toggleColumnVisibility:oe,showAllColumns:G,resetToDefault:Q}=dr(W0,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox","number","levelType"],tableId:"agent_level_table_v2"}),[te,U]=u.useState(null),V=!!te,{containerRef:ae,tableHeight:ne,autoHeight:me,toggleAutoHeight:ue,setManualHeight:Ae}=lr({defaultHeight:"400px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:we,getResizeHandleProps:ce,calculateMaxHeight:De}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:be=>{me&&ue(!1),Ae(`${be}px`)}}),{sortConfig:le,expandedRows:se,handleSort:J,handleToggleExpand:Z}=Nn({data:q,initialSort:{key:null,direction:"asc"},initialCheckedItems:H.selectedItems,initialExpandedRows:{},indentMode:!1,page:r,rowsPerPage:o}),ie=u.useCallback((be=null)=>{be?(N({...be,backgroundColor:be.backgroundColor||"#e8f5e9",borderColor:be.borderColor||"#2e7d32",hierarchyOrder:be.hierarchyOrder||1,permissionId:be.permissionId||null}),B(!0)):(N({levelType:"",permissions:"",permissionId:null,hierarchyOrder:f.length+1,backgroundColor:"#e8f5e9",borderColor:"#2e7d32"}),B(!1)),A(!0)},[f.length]),_e=u.useCallback(()=>{A(!1)},[]),Re=u.useCallback(be=>{const{name:Te,value:Ne}=be.target;if(Te==="permissions"){const Ve=Array.isArray(Ne)?Ne.join(", "):Ne;N(Ge=>({...Ge,[Te]:Ve}))}else if(Te==="permissionId"){const Ve=v.find(Ge=>Ge.id===parseInt(Ne));N(Ge=>({...Ge,permissionId:Ne,permissions:Ve?Ve.permissionName||Ve.permission_name:""}))}else N(Ve=>({...Ve,[Te]:Ne}))},[v]),He=u.useCallback(async()=>{if(!$.levelType.trim()){alert("단계 이름을 입력해주세요.");return}if(!$.permissionId){alert("권한 템플릿을 선택해주세요.");return}try{if(x(!0),D){const be={name:$.levelType.trim(),permission_id:$.permissionId,level:$.hierarchyOrder,background_color:$.backgroundColor,border_color:$.borderColor};(await Ji.update($.id,be)).name}else{const be=await Ji.create({name:$.levelType.trim(),permission_id:$.permissionId,level:$.hierarchyOrder,background_color:$.backgroundColor,border_color:$.borderColor})}await I(),_e()}catch(be){console.error("저장 실패:",be),alert(`저장에 실패했습니다: ${be.message}`)}finally{x(!1)}},[$,D,_e,I]),ft=u.useCallback(be=>{h(be),i(0)},[]);u.useCallback(be=>{c(be)},[]),u.useCallback(()=>{h({status:"all",levelType:"all"}),c({}),i(0)},[]);const St=u.useCallback(be=>{i(be)},[]),Tt=u.useCallback(be=>{s(be),i(0)},[]),gt=u.useCallback(()=>{alert("에이전트 레벨 엑셀 다운로드 기능이 호출되었습니다")},[]),et=u.useCallback(()=>{alert("에이전트 레벨 인쇄 기능이 호출되었습니다")},[]),xt=u.useCallback(be=>{U(be)},[]),Rt=u.useCallback(()=>{U(null)},[]),ht=u.useCallback(async()=>{await I()},[I]);u.useCallback(()=>{alert("데이터 초기화는 API 서버를 재시작하여 수행할 수 있습니다.")},[]);const jt=u.useCallback(()=>{ie()},[ie]),$t=u.useCallback(be=>{try{ie(be)}catch(Te){console.error("handleOpenDialog 호출 중 에러:",Te)}},[ie]),Ut=u.useCallback(be=>{try{E({id:be.id,name:be.levelType,level:be.hierarchyOrder}),O(!0)}catch(Te){console.error("삭제 다이얼로그 설정 중 에러:",Te)}},[]),Bt=u.useCallback(async(be,Te,Ne)=>{try{switch(x(!0),Te){case"1":return;case"2":if(!confirm("정말로 이 단계의 모든 회원을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))return;await Ji.deleteWithOption(be,{option:"delete_all_members"});break;default:await Ji.delete(be);break}g(Ve=>Ve.filter(Ge=>Ge.id!==be)),await I()}catch(Ve){console.error("삭제 실패:",Ve),alert(`삭제에 실패했습니다: ${Ve.message}`)}finally{x(!1)}},[I]),Kt=u.useCallback(()=>{O(!1),E(null)},[]),Ft=u.useCallback(async()=>{if(S.length!==0)try{x(!0);for(const be of S)await Ji.deleteWithOption(be.id,{option:"delete_all_members"});`${S.length}`,await I(),H.clearSelection(),C(!1),_([])}catch(be){console.error("벌크 삭제 실패:",be),alert(`삭제에 실패했습니다: ${be.message}`)}finally{x(!1)}},[S,I,H]),{columns:Et,pinnedColumns:Ot,toggleColumnPin:zt,clearAllPinnedColumns:Wt,isColumnPinned:kt}=sr({initialColumns:W0,initialPinnedColumns:["checkbox","number","levelType"],tableId:"agent_level_table_v2",enableColumnPinning:!0}),Mt=u.useMemo(()=>Et.map(be=>be.id==="actions"&&be.buttons?{...be,buttons:be.buttons.map(Te=>{let Ne=Te.onClick;return Te.label==="수정"?Ne=$t:Te.label==="삭제"&&(Ne=Ut),{...Te,onClick:Ne}})}:be.id==="hierarchyOrder"&&be.type==="dropdown"?{...be,totalCount:f.length}:be),[Et,$t,Ut,f.length]),Ht=u.useMemo(()=>Mt.filter(be=>K[be.id]!==!1),[Mt,K]),{searchText:qt,totalItems:Yt,sequentialPageNumbers:Xt,hasPinnedColumns:tn,isGridReady:Fe,handleSearchChange:je,handleClearSearch:Oe,togglePageNumberMode:ke,toggleColumnPin:bt,setGridReady:it}=Rn({initialTotalItems:X,onSearch:be=>{r!==0&&i(0)},onToggleColumnPin:be=>{Ot.length>0?Wt():(kt("checkbox")||zt("checkbox"),kt("number")||zt("number"),kt("levelType")||zt("levelType"))}}),fe=u.useCallback(be=>{},[]);return u.useEffect(()=>{it(!0)},[it]),m(vn,{children:[a(Cn,{title:"단계/권한설정",onDisplayOptionsClick:xt,onRefreshClick:ht,onAddClick:jt,showAddButton:!0,showRefreshButton:!0,addButtonText:"단계 추가",titleTabs:m(La,{value:t,onChange:T,sx:{minHeight:"auto","& .MuiTabs-indicator":{backgroundColor:"#1976d2"},"& .MuiTab-root":{minHeight:"auto",padding:"6px 16px",fontSize:"14px",fontWeight:500,color:"#666","&.Mui-selected":{color:"#1976d2"}}},children:[a(_n,{label:"단계설정"}),a(_n,{label:"권한설정"})]}),sx:{mb:3}}),m(Jt,{severity:"warning",sx:{mb:3,backgroundColor:"#fff3e0",border:"1px solid #ff9800"},children:[a(M,{variant:"body2",sx:{fontWeight:600,mb:.5,fontSize:"14px",color:"#e65100"},children:"* 단계는 영업에 들어가기 앞서 초기에 설정해주세요!"}),a(M,{variant:"body2",sx:{fontWeight:600,fontSize:"14px",color:"#e65100"},children:"* 단계 삭제 및 수정 시 일부 데이터가 변형되거나 삭제가 될 수 있으니 신중해 주세요!"})]}),a(or,{anchorEl:te,open:V,onClose:Rt,toggleableColumns:ge,columnVisibility:K,onToggleColumn:oe,onShowAll:G,onReset:Q,hiddenColumnsCount:ee,menuWidth:"350px"}),y&&a(Jt,{severity:"error",sx:{mb:2},children:y}),w&&!f.length?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})}):m(rt,{elevation:1,sx:{borderRadius:2,overflow:"hidden",p:2},children:[a(gn,{title:"에이전트 레벨 목록",totalItems:X,countLabel:"총 ##count##개의 레벨",sequentialPageNumbers:Xt,togglePageNumberMode:ke,hasPinnedColumns:Ot.length>0,isGridReady:Fe,toggleColumnPin:bt,searchText:qt,handleSearchChange:je,handleClearSearch:Oe,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"레벨 검색...",sx:{mb:2}}),a(Vn,{filterProps:{activeFilters:d,handleFilterChange:(be,Te)=>{const Ne={...d,[be]:Te};ft(Ne)},filterOptions:uae,showDateFilter:!1},paginationProps:{count:X,page:r,rowsPerPage:o,onPageChange:St,onRowsPerPageChange:be=>{const Te=parseInt(be.target.value,10);Tt(Te)},onExcelDownload:gt,onPrint:et}}),m(j,{ref:ae,sx:{width:"100%",mt:2,pb:2},children:[a(An,{columns:Mt,data:q,checkable:!0,fixedHeader:!0,maxHeight:ne,checkedItems:H.selectedItems,allChecked:H.isAllSelected,expandedRows:se,sortConfig:le,pinnedColumns:Ot,onCheck:be=>H.toggleItem(be),onToggleAll:()=>H.toggleAll(),onSort:J,onToggleExpand:Z,onRowClick:fe,indentMode:!1,sequentialPageNumbers:Xt,page:r,rowsPerPage:o,totalCount:X}),a(Hre,{selectedCount:H.selectedCount,actions:[{type:"delete",label:"삭제",color:"error"}],onAction:H.executeAction,onClear:H.clearSelection,isProcessing:H.isProcessing,position:"bottom",sx:{mt:2,mb:2}}),a(rr,{resizeHandleProps:ce(parseFloat(ne)),showIcon:!0,isDragging:we,sx:{mt:1,opacity:we?1:.7,"&:hover":{opacity:1}}}),a(Qg,{currentPage:r,currentRowsPerPage:o,dataLength:f.length,filteredDataLength:z.length,totalFlattenedItems:X,searchText:qt,sequentialPageNumbers:Xt,isDragging:we,tableHeight:ne,pinnedColumns:Ot,visibleColumnsCount:Ht.length,totalColumnsCount:W0.length,hiddenColumnsCount:ee,columnVisibility:K,autoHeight:me,calculateMaxHeight:De,show:!0})]})]}),a(pj,{open:L,editMode:D,currentLevel:$,onClose:_e,onSave:He,onInputChange:Re,availablePermissions:v,totalCount:f.length}),a(Aae,{open:F,onClose:Kt,levelData:R,onConfirm:Bt,preventDeleteEnabled:!0}),a(eS,{open:k,onCancel:()=>C(!1),onConfirm:Ft,title:"단계 일괄 삭제",itemName:`선택한 ${S.length}개의 단계`,itemType:"단계"})]})},bD=[{id:"checkbox",label:"",type:"checkbox",width:50,minWidth:50,maxWidth:50,sortable:!1,filterable:!1,hideable:!1,pinnable:!0,resizable:!1},{id:"number",label:"No.",type:"number",width:80,minWidth:60,maxWidth:100,sortable:!1,filterable:!1,hideable:!1,pinnable:!0,resizable:!0,align:"center"},{id:"permissionName",label:"권한명",type:"text",width:200,minWidth:150,maxWidth:300,sortable:!0,filterable:!0,hideable:!1,pinnable:!0,resizable:!0,align:"left"},{id:"description",label:"설명",type:"text",width:300,minWidth:200,maxWidth:400,sortable:!0,filterable:!0,hideable:!0,pinnable:!1,resizable:!0,align:"left"},{id:"isActive",label:"활성 상태",type:"toggle",width:120,minWidth:100,maxWidth:150,sortable:!0,filterable:!0,hideable:!0,pinnable:!1,resizable:!0,align:"center"},{id:"createdAt",label:"생성일",type:"date",width:150,minWidth:120,maxWidth:180,sortable:!0,filterable:!0,hideable:!0,pinnable:!1,resizable:!0,align:"center"},{id:"updatedAt",label:"수정일",type:"date",width:150,minWidth:120,maxWidth:180,sortable:!0,filterable:!0,hideable:!0,pinnable:!1,resizable:!0,align:"center"},{id:"actions",label:"액션",type:"button",width:120,minWidth:100,maxWidth:150,sortable:!1,filterable:!1,hideable:!1,pinnable:!1,resizable:!1,align:"center",buttons:[{label:"수정",variant:"outlined",color:"primary",size:"small",onClick:null},{label:"삭제",variant:"outlined",color:"error",size:"small",onClick:null}]}],Eae=[{id:"status",label:"활성 상태",type:"select",items:[{value:"all",label:"전체"},{value:"active",label:"활성"},{value:"inactive",label:"비활성"}],defaultValue:"all"}],vD=[{id:"dashboard",name:"대시보드",path:"/dashboard",category:"main"},{id:"agent-management",name:"에이전트/회원관리",category:"management",children:[{id:"members",name:"회원관리",path:"/agent-management/members"},{id:"rolling-history",name:"롤링금전환내역",path:"/agent-management/rolling-history"},{id:"money-history",name:"머니처리내역",path:"/agent-management/money-history"},{id:"money-transfer",name:"머니이동내역",path:"/agent-management/money-transfer"}]},{id:"betting",name:"배팅상세내역",category:"betting",children:[{id:"slot-casino",name:"슬롯/카지노",path:"/betting/slot-casino"}]},{id:"settlement",name:"정산관리",category:"finance",children:[{id:"today",name:"당일정산",path:"/settlement/today"},{id:"daily",name:"일자별",path:"/settlement/daily"},{id:"third-party",name:"서드파티별",path:"/settlement/third-party"},{id:"member",name:"회원별",path:"/settlement/member"},{id:"deposit-withdrawal",name:"입출금",path:"/settlement/deposit-withdrawal"}]},{id:"transactions",name:"입출금관리",category:"finance",children:[{id:"deposit",name:"입금신청처리",path:"/transactions/deposit"},{id:"withdrawal",name:"출금신청처리",path:"/transactions/withdrawal"},{id:"history",name:"충환내역",path:"/transactions/history"}]},{id:"customer-service",name:"고객센터",category:"service",children:[{id:"messages",name:"문의관리",path:"/customer-service/messages"},{id:"templates",name:"템플릿관리",path:"/customer-service/templates"}]},{id:"board",name:"게시판",category:"content",children:[{id:"notices",name:"공지사항",path:"/board/notices"},{id:"events",name:"이벤트",path:"/board/events"},{id:"popup",name:"팝업 설정",path:"/board/popup"}]},{id:"game-settings",name:"게임설정",category:"game",children:[{id:"slot",name:"슬롯",path:"/game-settings/slot"},{id:"casino",name:"카지노",path:"/game-settings/casino"}]},{id:"site-settings",name:"사이트설정",category:"admin",children:[{id:"admin-info",name:"관리자정보",path:"/site-settings/admin-info"},{id:"design",name:"디자인 설정",path:"/site-settings/design"},{id:"menu",name:"메뉴 설정",path:"/site-settings/menu"},{id:"domain",name:"도메인 설정",path:"/site-settings/domain"},{id:"sms",name:"문자인증 설정",path:"/site-settings/sms"},{id:"notification",name:"알림음 설정",path:"/site-settings/notification"},{id:"bank",name:"계좌/은행 설정",path:"/site-settings/bank"},{id:"agent-level",name:"단계/권한설정",path:"/site-settings/agent-level"},{id:"agent",name:"에이전트 설정",path:"/site-settings/agent"},{id:"api",name:"API 설정",path:"/site-settings/api"},{id:"registration",name:"회원가입 설정",path:"/site-settings/registration"},{id:"events-setting",name:"이벤트 설정",path:"/site-settings/events"},{id:"change-username",name:"아이디바꿔주기",path:"/site-settings/change-username"},{id:"maintenance",name:"점검설정",path:"/site-settings/maintenance"},{id:"other",name:"기타설정",path:"/site-settings/other"}]},{id:"logs",name:"로그관리",category:"system",children:[{id:"auth",name:"인/아웃로그",path:"/logs/auth"},{id:"member-changes",name:"회원변경로그",path:"/logs/member-changes"},{id:"system",name:"시스템로그",path:"/logs/system"}]},{id:"base-template",name:"기본템플릿",path:"/base-template",category:"development"}],Mae=[{id:"add-button",name:"추가 버튼",description:"새 항목 추가 버튼",category:"action"},{id:"edit-button",name:"수정 버튼",description:"항목 수정 버튼",category:"action"},{id:"delete-button",name:"삭제 버튼",description:"항목 삭제 버튼",category:"action"},{id:"save-button",name:"저장 버튼",description:"변경사항 저장 버튼",category:"action"},{id:"cancel-button",name:"취소 버튼",description:"작업 취소 버튼",category:"action"},{id:"export-excel",name:"엑셀 다운로드",description:"데이터 엑셀 내보내기",category:"data"},{id:"print-button",name:"인쇄 버튼",description:"데이터 인쇄",category:"data"},{id:"refresh-button",name:"새로고침 버튼",description:"데이터 새로고침",category:"data"},{id:"search-button",name:"검색 버튼",description:"데이터 검색",category:"data"},{id:"filter-button",name:"필터 버튼",description:"데이터 필터링",category:"data"},{id:"display-options",name:"표시 옵션",description:"컬럼 표시 설정",category:"settings"},{id:"column-settings",name:"컬럼 설정",description:"테이블 컬럼 설정",category:"settings"},{id:"api-sync-settings",name:"API 잔액 연동 설정",description:"API 잔액 연동을 설정할 수 있는 권한",category:"settings"},{id:"dashboard-auto-refresh",name:"대시보드 자동 새로고침",description:"대시보드 자동 새로고침 설정을 사용할 수 있는 권한",category:"settings"},{id:"approve-button",name:"승인 버튼",description:"입출금 승인",category:"finance"},{id:"reject-button",name:"거부 버튼",description:"입출금 거부",category:"finance"},{id:"transfer-button",name:"이체 버튼",description:"머니 이체",category:"finance"},{id:"ban-button",name:"정지 버튼",description:"회원 정지",category:"management"},{id:"unban-button",name:"정지해제 버튼",description:"회원 정지 해제",category:"management"},{id:"reset-password",name:"비밀번호 초기화",description:"회원 비밀번호 초기화",category:"management"},{id:"change_subordinate_password",name:"하위 회원 비밀번호 변경",description:"하위 회원의 비밀번호를 변경할 수 있는 권한",category:"member-data"},{id:"member-phone",name:"전화번호",description:"회원 전화번호 정보 조회/수정",category:"member-data"},{id:"member-account",name:"계좌번호",description:"회원 계좌번호 정보 조회/수정",category:"member-data"},{id:"member-email",name:"이메일",description:"회원 이메일 정보 조회/수정",category:"member-data"},{id:"member-address",name:"주소",description:"회원 주소 정보 조회/수정",category:"member-data"},{id:"member-birth",name:"생년월일",description:"회원 생년월일 정보 조회/수정",category:"member-data"},{id:"member-identity",name:"신분증 정보",description:"회원 신분증 정보 조회/수정",category:"member-data"},{id:"member-bank-info",name:"은행 정보",description:"회원 은행 정보 조회/수정",category:"member-data"},{id:"member-login-history",name:"로그인 기록",description:"회원 로그인 기록 조회",category:"member-activity"},{id:"member-betting-history",name:"배팅 기록",description:"회원 배팅 기록 조회",category:"member-activity"},{id:"member-transaction-history",name:"거래 기록",description:"회원 입출금 거래 기록 조회",category:"member-activity"},{id:"member-point-history",name:"포인트 기록",description:"회원 포인트 적립/사용 기록 조회",category:"member-activity"},{id:"member-bonus-history",name:"보너스 기록",description:"회원 보너스 지급/사용 기록 조회",category:"member-activity"},{id:"member-statistics",name:"회원 통계",description:"개별 회원 통계 정보 조회",category:"member-stats"},{id:"member-revenue",name:"수익 정보",description:"회원별 수익 정보 조회",category:"member-stats"},{id:"member-loss",name:"손실 정보",description:"회원별 손실 정보 조회",category:"member-stats"},{id:"member-profit-rate",name:"수익률",description:"회원별 수익률 정보 조회",category:"member-stats"},{id:"view-api-balance",name:"API 잔액 보기",description:"사이드바에 API 총 잔액 표시",category:"api-balance"},{id:"view-own-balance-only",name:"본인 보유금만 보기",description:"다른 회원의 보유금 숨김",category:"member-data"},{id:"계좌신청",name:"계좌신청 버튼",description:"상위 관리자에게 계좌 정보 요청",category:"agent-request"},{id:"입금신청",name:"입금신청 버튼",description:"상위 관리자에게 입금 요청",category:"agent-request"},{id:"출금신청",name:"출금신청 버튼",description:"상위 관리자에게 출금 요청",category:"agent-request"},{id:"문의하기",name:"문의하기 버튼",description:"상위 관리자에게 문의 전송",category:"agent-request"}],xD=[{id:"admin-only-sections",name:"관리자 전용 섹션",selector:".admin-only",description:"관리자만 볼 수 있는 섹션들"},{id:"advanced-settings",name:"고급 설정",selector:"#advanced-settings",description:"고급 설정 영역"},{id:"debug-info",name:"디버그 정보",selector:".debug-info",description:"개발자용 디버그 정보"},{id:"financial-summary",name:"재정 요약",selector:".financial-summary",description:"재정 관련 요약 정보"},{id:"system-stats",name:"시스템 통계",selector:".system-stats",description:"시스템 통계 정보"},{id:"user-sensitive-info",name:"민감 정보",selector:".sensitive-info",description:"민감한 사용자 정보"}],Lae=[{id:"notification-panel",name:"알림판",selector:".notification-panel",description:"전체 알림판 영역 표시/숨김",category:"notification"},{id:"notification-list",name:"알림 목록",selector:".notification-list",description:"알림 목록 표시/숨김",category:"notification"},{id:"notification-badge",name:"알림 배지",selector:".notification-badge",description:"알림 개수 배지 표시/숨김",category:"notification"},{id:"toolbar-notification-icon",name:"툴바 알림 아이콘",selector:".toolbar-notification-icon",description:"상단 툴바의 알림 아이콘",category:"toolbar"},{id:"toolbar-user-menu",name:"툴바 사용자 메뉴",selector:".toolbar-user-menu",description:"상단 툴바의 사용자 메뉴",category:"toolbar"},{id:"toolbar-settings-icon",name:"툴바 설정 아이콘",selector:".toolbar-settings-icon",description:"상단 툴바의 설정 아이콘",category:"toolbar"},{id:"toolbar-search",name:"툴바 검색",selector:".toolbar-search",description:"상단 툴바의 검색 기능",category:"toolbar"},{id:"sidebar-toggle",name:"사이드바 토글",selector:".sidebar-toggle",description:"사이드바 열기/닫기 버튼",category:"sidebar"},{id:"sidebar-user-info",name:"사이드바 사용자 정보",selector:".sidebar-user-info",description:"사이드바의 사용자 정보 영역",category:"sidebar"},{id:"sidebar-footer",name:"사이드바 하단",selector:".sidebar-footer",description:"사이드바 하단 영역",category:"sidebar"},{id:"dashboard-stats",name:"대시보드 통계",selector:".dashboard-stats",description:"대시보드 통계 위젯",category:"dashboard"},{id:"dashboard-charts",name:"대시보드 차트",selector:".dashboard-charts",description:"대시보드 차트 위젯",category:"dashboard"},{id:"dashboard-recent-activity",name:"최근 활동",selector:".dashboard-recent-activity",description:"대시보드 최근 활동 위젯",category:"dashboard"},{id:"breadcrumb",name:"브레드크럼",selector:".breadcrumb",description:"페이지 경로 표시",category:"navigation"},{id:"page-title",name:"페이지 제목",selector:".page-title",description:"페이지 제목 영역",category:"navigation"},{id:"footer",name:"푸터",selector:".footer",description:"페이지 하단 푸터",category:"navigation"}],q0={menu:{main:"메인",management:"관리",betting:"배팅",finance:"금융",service:"서비스",content:"콘텐츠",game:"게임",admin:"관리자",system:"시스템",development:"개발"},button:{action:"액션",data:"데이터",settings:"설정",finance:"금융",management:"관리","member-data":"회원 정보","member-activity":"회원 활동","agent-request":"에이전트 요청","member-stats":"회원 통계"},layout:{notification:"알림",toolbar:"툴바",sidebar:"사이드바",dashboard:"대시보드",navigation:"네비게이션"}},gj=({restrictions:e={menus:[],buttons:[],layouts:[],cssSelectors:[]},onRestrictionsChange:t})=>{const[n,r]=u.useState(0),[i,o]=u.useState(""),[s,l]=u.useState(""),[c,d]=u.useState(""),[h,f]=u.useState(""),[g,w]=u.useState(""),[x,y]=u.useState(""),p=u.useCallback(($,N)=>{r(N)},[]),v=u.useCallback(($,N)=>{const F=N?[...e.menus,$]:e.menus.filter(O=>O!==$);t({...e,menus:F})},[e,t]),b=u.useCallback(($,N)=>{const F=N?[...e.buttons,$]:e.buttons.filter(O=>O!==$);t({...e,buttons:F})},[e,t]),P=u.useCallback(($,N)=>{const F=N?[...e.cssSelectors,$]:e.cssSelectors.filter(O=>O!==$);t({...e,cssSelectors:F})},[e,t]),k=u.useCallback(($,N)=>{const F=N?[...e.layouts,$]:e.layouts.filter(O=>O!==$);t({...e,layouts:F})},[e,t]),C=$=>{if(!$.trim())return"선택자를 입력해주세요.";const N=/^[.#]?[a-zA-Z][a-zA-Z0-9_-]*$/,F=/^[.#]?[a-zA-Z][a-zA-Z0-9_-]*(\s*[>+~]\s*[.#]?[a-zA-Z][a-zA-Z0-9_-]*)*$/;return!N.test($.trim())&&!F.test($.trim())?"올바른 CSS 선택자 형식이 아닙니다. (예: .class-name, #id-name, div > .child)":e.cssSelectors.includes($.trim())?"이미 추가된 선택자입니다.":""},S=()=>{const $=C(i);if($){l($);return}const N=[...e.cssSelectors,i.trim()];t({...e,cssSelectors:N}),o(""),l("")},_=$=>{const N=e.cssSelectors.filter(F=>F!==$);t({...e,cssSelectors:N})},T=$=>{$.key==="Enter"&&S()},I=($,N,F=["name","description","path","id"])=>{if(!N)return $;const O=N.toLowerCase();return $.filter(R=>F.some(E=>{const z=R[E];return z?z.toLowerCase().includes(O):!1}))},L=()=>{let $=vD;if(c){const F=c.toLowerCase();$=vD.filter(O=>{var z,q,X;const R=O.name.toLowerCase().includes(F)||((z=O.path)==null?void 0:z.toLowerCase().includes(F))||((q=O.id)==null?void 0:q.toLowerCase().includes(F)),E=(X=O.children)==null?void 0:X.some(H=>{var K,ee;return H.name.toLowerCase().includes(F)||((K=H.path)==null?void 0:K.toLowerCase().includes(F))||((ee=H.id)==null?void 0:ee.toLowerCase().includes(F))});return R||E})}const N=$.reduce((F,O)=>{const R=O.category||"other";return F[R]||(F[R]=[]),F[R].push(O),F},{});return m(j,{sx:{mt:2},children:[a($e,{fullWidth:!0,size:"small",placeholder:"메뉴명, 경로 또는 ID로 검색...",value:c,onChange:F=>d(F.target.value),sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small"})}),endAdornment:c&&a(Dt,{position:"end",children:a(Ct,{size:"small",onClick:()=>d(""),edge:"end",children:a(Hu,{fontSize:"small"})})})}}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"체크된 메뉴는 이 권한을 가진 사용자가 접근할 수 없습니다."}),Object.entries(N).map(([F,O])=>m(sc,{defaultExpanded:!0,children:[a(lc,{expandIcon:a(Oo,{}),children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ax,{fontSize:"small"}),a(M,{variant:"subtitle2",sx:{fontWeight:"bold"},children:q0.menu[F]||F}),a(ut,{size:"small",label:O.length,color:"primary",variant:"outlined"})]})}),a(cc,{children:a(Aa,{children:O.map(R=>m(j,{children:[a(Lt,{control:a(gr,{checked:e.menus.includes(R.id),onChange:E=>v(R.id,E.target.checked),size:"small"}),label:m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:500},children:R.name}),R.path&&a(M,{variant:"caption",color:"text.secondary",children:R.path})]})}),R.children&&a(j,{sx:{ml:4,mt:1},children:R.children.filter(E=>{var z,q;return!c||E.name.toLowerCase().includes(c.toLowerCase())||((z=E.path)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||((q=E.id)==null?void 0:q.toLowerCase().includes(c.toLowerCase()))}).map(E=>a(Lt,{control:a(gr,{checked:e.menus.includes(E.id),onChange:z=>v(E.id,z.target.checked),size:"small"}),label:m(j,{children:[a(M,{variant:"body2",children:E.name}),a(M,{variant:"caption",color:"text.secondary",children:E.path})]})},E.id))})]},R.id))})})]},F))]})},A=()=>{const N=I(Mae,h,["name","description","id"]).reduce((F,O)=>{const R=O.category||"other";return F[R]||(F[R]=[]),F[R].push(O),F},{});return m(j,{sx:{mt:2},children:[a($e,{fullWidth:!0,size:"small",placeholder:"버튼명, 설명 또는 ID로 검색...",value:h,onChange:F=>f(F.target.value),sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small"})}),endAdornment:h&&a(Dt,{position:"end",children:a(Ct,{size:"small",onClick:()=>f(""),edge:"end",children:a(Hu,{fontSize:"small"})})})}}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"체크된 버튼 및 데이터는 이 권한을 가진 사용자가 사용하거나 조회할 수 없습니다."}),Object.entries(N).map(([F,O])=>m(sc,{defaultExpanded:!0,children:[a(lc,{expandIcon:a(Oo,{}),children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(gS,{fontSize:"small"}),a(M,{variant:"subtitle2",sx:{fontWeight:"bold"},children:q0.button[F]||F}),a(ut,{size:"small",label:O.length,color:"secondary",variant:"outlined"})]})}),a(cc,{children:a(Aa,{children:O.map(R=>a(Lt,{control:a(gr,{checked:e.buttons.includes(R.id),onChange:E=>b(R.id,E.target.checked),size:"small"}),label:m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:500},children:R.name}),a(M,{variant:"caption",color:"text.secondary",children:R.description})]})},R.id))})})]},F))]})},D=()=>{const $=I(xD,x,["name","description","selector","id"]),N=xD.map(R=>R.id),F=e.cssSelectors.filter(R=>!N.includes(R)),O=x?F.filter(R=>R.toLowerCase().includes(x.toLowerCase())):F;return m(j,{sx:{mt:2},children:[a($e,{fullWidth:!0,size:"small",placeholder:"CSS 선택자명, 설명, 선택자 또는 ID로 검색...",value:x,onChange:R=>y(R.target.value),sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small"})}),endAdornment:x&&a(Dt,{position:"end",children:a(Ct,{size:"small",onClick:()=>y(""),edge:"end",children:a(Hu,{fontSize:"small"})})})}}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"체크된 CSS 선택자에 해당하는 요소들이 화면에서 숨겨집니다."}),m(sc,{defaultExpanded:!0,children:[a(lc,{expandIcon:a(Oo,{}),children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(mS,{fontSize:"small"}),a(M,{variant:"subtitle2",sx:{fontWeight:"bold"},children:"미리 정의된 CSS 선택자"}),a(ut,{size:"small",label:$.length,color:"warning",variant:"outlined"})]})}),a(cc,{children:a(Aa,{children:$.map(R=>a(Lt,{control:a(gr,{checked:e.cssSelectors.includes(R.id),onChange:E=>P(R.id,E.target.checked),size:"small"}),label:m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:500},children:R.name}),a(M,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:R.description}),a(M,{variant:"caption",sx:{fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"2px 4px",borderRadius:"4px",display:"inline-block",mt:.5},children:R.selector})]})},R.id))})})]}),m(sc,{defaultExpanded:!0,sx:{mt:2},children:[a(lc,{expandIcon:a(Oo,{}),children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(lo,{fontSize:"small"}),a(M,{variant:"subtitle2",sx:{fontWeight:"bold"},children:"사용자 정의 CSS 선택자"}),a(ut,{size:"small",label:O.length,color:"success",variant:"outlined"})]})}),m(cc,{children:[m(j,{sx:{mb:2},children:[a(M,{variant:"body2",sx:{mb:1,fontWeight:500},children:"새 CSS 선택자 추가"}),m(j,{sx:{display:"flex",gap:1,alignItems:"flex-start"},children:[a($e,{size:"small",placeholder:"예: .my-class, #my-id, div > .child",value:i,onChange:R=>{o(R.target.value),s&&l("")},onKeyPress:T,error:!!s,helperText:s,sx:{flex:1}}),a(Se,{variant:"contained",size:"small",startIcon:a(lo,{}),onClick:S,disabled:!i.trim(),children:"추가"})]}),a(Jt,{severity:"info",sx:{mt:2},children:m(M,{variant:"caption",children:[a("strong",{children:"사용 예시:"}),a("br",{}),"• 클래스: ",a("code",{children:".my-custom-class"}),a("br",{}),"• ID: ",a("code",{children:"#my-element-id"}),a("br",{}),"• 복합 선택자: ",a("code",{children:"div > .child-class"}),a("br",{}),"• 속성 선택자: ",a("code",{children:'[data-role="admin"]'})]})})]}),O.length>0&&m(j,{sx:{mt:2},children:[a(M,{variant:"body2",sx:{mb:1,fontWeight:500},children:"추가된 선택자 목록"}),a(xi,{dense:!0,children:O.map((R,E)=>m(Oa,{sx:{px:0},children:[a(_r,{primary:a(M,{variant:"body2",sx:{fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:R})}),a(g1,{children:a(Ct,{edge:"end",size:"small",onClick:()=>_(R),color:"error",children:a(Wo,{fontSize:"small"})})})]},E))})]})]})]})]})},B=()=>{const N=I(Lae,g,["name","description","id"]).reduce((F,O)=>{const R=O.category||"other";return F[R]||(F[R]=[]),F[R].push(O),F},{});return m(j,{sx:{mt:2},children:[a($e,{fullWidth:!0,size:"small",placeholder:"레이아웃명, 설명 또는 ID로 검색...",value:g,onChange:F=>w(F.target.value),sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{fontSize:"small"})}),endAdornment:g&&a(Dt,{position:"end",children:a(Ct,{size:"small",onClick:()=>w(""),edge:"end",children:a(Hu,{fontSize:"small"})})})}}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"체크된 레이아웃은 이 권한을 가진 사용자가 사용할 수 없습니다."}),Object.entries(N).map(([F,O])=>m(sc,{defaultExpanded:!0,children:[a(lc,{expandIcon:a(Oo,{}),children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(pS,{fontSize:"small"}),a(M,{variant:"subtitle2",sx:{fontWeight:"bold"},children:q0.layout[F]||F}),a(ut,{size:"small",label:O.length,color:"primary",variant:"outlined"})]})}),a(cc,{children:a(Aa,{children:O.map(R=>a(Lt,{control:a(gr,{checked:e.layouts.includes(R.id),onChange:E=>k(R.id,E.target.checked),size:"small"}),label:m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:500},children:R.name}),a(M,{variant:"caption",color:"text.secondary",children:R.description})]})},R.id))})})]},F))]})};return m(rt,{variant:"outlined",sx:{mt:2},children:[a(j,{sx:{borderBottom:1,borderColor:"divider"},children:m(La,{value:n,onChange:p,variant:"fullWidth",children:[a(_n,{icon:a(ax,{}),label:"메뉴",iconPosition:"start"}),a(_n,{icon:a(pS,{}),label:"레이아웃",iconPosition:"start"}),a(_n,{icon:a(gS,{}),label:"버튼및데이터",iconPosition:"start"}),a(_n,{icon:a(mS,{}),label:"CSS적용",iconPosition:"start"})]})}),m(j,{sx:{p:2,maxHeight:400,overflow:"auto"},children:[n===0&&L(),n===1&&B(),n===2&&A(),n===3&&D()]}),a(yn,{}),m(j,{sx:{p:2,backgroundColor:"#f8f9fa"},children:[a(M,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"선택된 제한사항 요약"}),m(j,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[a(ut,{size:"small",label:`메뉴: ${e.menus.length}개`,color:"primary",variant:"outlined"}),a(ut,{size:"small",label:`레이아웃: ${e.layouts.length}개`,color:"info",variant:"outlined"}),a(ut,{size:"small",label:`버튼및데이터: ${e.buttons.length}개`,color:"secondary",variant:"outlined"}),a(ut,{size:"small",label:`CSS: ${e.cssSelectors.length}개`,color:"warning",variant:"outlined"})]})]})]})};gj.propTypes={restrictions:re.shape({menus:re.array,buttons:re.array,layouts:re.array,cssSelectors:re.array}),onRestrictionsChange:re.func.isRequired};const mj=({open:e,editMode:t,currentPermission:n,onClose:r,onSave:i,onInputChange:o})=>{const s=l=>{o({target:{name:"restrictions",value:l}})};return m(Yn,{open:e,onClose:r,maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:t?"권한 수정":"권한 추가"}),a(Kn,{children:m(j,{sx:{pt:1},children:[a($e,{autoFocus:!0,margin:"dense",name:"permissionName",label:"권한명",type:"text",fullWidth:!0,value:n.permissionName||"",onChange:o}),a($e,{margin:"dense",name:"description",label:"설명",type:"text",fullWidth:!0,multiline:!0,rows:3,value:n.description||"",onChange:o}),m(j,{sx:{mt:2,mb:1},children:[a(M,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"활성 상태"}),a(Lt,{control:a(sn,{name:"isActive",checked:n.isActive===1||n.isActive===!0,onChange:l=>o({target:{name:"isActive",value:l.target.checked}}),color:"primary"}),label:n.isActive===1||n.isActive===!0?"활성":"비활성",sx:{ml:0}})]}),m(j,{sx:{mt:3},children:[a(M,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:"권한 설정"}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"이 권한을 가진 사용자가 접근할 수 없는 메뉴, 버튼, UI 요소를 설정합니다."}),a(gj,{restrictions:n.restrictions||{menus:[],buttons:[],layouts:[],cssSelectors:[]},onRestrictionsChange:s})]})]})}),m(nr,{children:[a(Se,{onClick:r,color:"inherit",children:"취소"}),a(Se,{onClick:i,color:"primary",variant:"contained",children:"저장"})]})]})};mj.propTypes={open:re.bool.isRequired,editMode:re.bool.isRequired,currentPermission:re.object.isRequired,onClose:re.func.isRequired,onSave:re.func.isRequired,onInputChange:re.func.isRequired};const $ae=()=>{const e=mo(),[t,n]=u.useState(1),[r,i]=u.useState(0),[o,s]=u.useState(10),[l,c]=u.useState({}),[d,h]=u.useState({status:"all"}),[f,g]=u.useState([]),[w,x]=u.useState(!0),[y,p]=u.useState(null),v=u.useCallback((fe,be)=>{n(be),be===0&&e("/site-settings/agent-level")},[e]),b=u.useCallback(async()=>{try{x(!0),p(null);const fe=await cs.getAll();g(fe)}catch(fe){console.error("권한 데이터 로드 실패:",fe),p("데이터를 불러오는데 실패했습니다. 서버가 실행 중인지 확인해주세요.")}finally{x(!1)}},[]);u.useEffect(()=>{b()},[b]);const[P,k]=u.useState(!1),[C,S]=u.useState(!1),[_,T]=u.useState({permissionName:"",description:"",isActive:!0}),[I,L]=u.useState(!1),[A,D]=u.useState(null),[B,$]=u.useState(""),N=u.useMemo(()=>{let fe=[...f];return d.status&&d.status!=="all"&&(d.status==="active"?fe=fe.filter(be=>be.isActive===!0):d.status==="inactive"&&(fe=fe.filter(be=>be.isActive===!1))),fe},[f,d]),F=u.useMemo(()=>N,[N]),O=N.length,{checkedItems:R,sortConfig:E,expandedRows:z,allChecked:q,handleSort:X,handleCheck:H,handleToggleAll:K,handleToggleExpand:ee}=Nn({data:F,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:r,rowsPerPage:o}),{columns:ge,pinnedColumns:oe,toggleColumnPin:G,clearAllPinnedColumns:Q,isColumnPinned:te}=sr({initialColumns:bD,initialPinnedColumns:["checkbox","number","permissionName"],tableId:"permission_table_v1",enableColumnPinning:!0}),U=u.useCallback((fe=null)=>{fe?(T({...fe,restrictions:fe.restrictions||{menus:[],buttons:[],layouts:[],cssSelectors:[]}}),S(!0)):(T({permissionName:"",description:"",isActive:!0,restrictions:{menus:[],buttons:[],layouts:[],cssSelectors:[]}}),S(!1)),k(!0)},[]),V=u.useCallback(()=>{k(!1)},[]),ae=u.useCallback(fe=>{const{name:be,value:Te}=fe.target;T(Ne=>({...Ne,[be]:Te}))},[]),ne=u.useCallback(async(fe,be)=>{try{const Ne=(await Ji.getAll()).filter(Ve=>Ve.permission===fe);for(const Ve of Ne)await Ji.update(Ve.id,{...Ve,permission:be});Ne.length>0&&`${Ne.length}`}catch(Te){console.error("단계 설정 권한명 업데이트 실패:",Te),alert("권한은 저장되었지만, 단계 설정의 권한명 업데이트에 실패했습니다.")}},[]),me=u.useCallback(async()=>{if(!_.permissionName.trim()){alert("권한명을 입력해주세요.");return}if(!_.description.trim()){alert("설명을 입력해주세요.");return}try{if(x(!0),C){const fe=f.find(Ne=>Ne.id===_.id),be=fe&&fe.permissionName!==_.permissionName.trim(),Te=await cs.update(_.id,{permissionName:_.permissionName.trim(),description:_.description.trim(),isActive:_.isActive,restrictions:_.restrictions});be&&await ne(fe.permissionName,Te.permissionName),g(Ne=>Ne.map(Ve=>Ve.id===_.id?Te:Ve)),Te.permissionName}else{const fe=await cs.create({permissionName:_.permissionName.trim(),description:_.description.trim(),isActive:_.isActive,restrictions:_.restrictions||{menus:[],buttons:[],layouts:[],cssSelectors:[]}});g(be=>[...be,fe])}V()}catch(fe){console.error("저장 실패:",fe),alert(`저장에 실패했습니다: ${fe.message}`)}finally{x(!1)}},[_,C,V,f,ne]),ue=u.useCallback(fe=>{try{U(fe)}catch(be){console.error("handleOpenDialog 호출 중 에러:",be)}},[U]),Ae=u.useCallback(fe=>{try{D(fe.id),$(fe.permissionName),L(!0)}catch(be){console.error("삭제 다이얼로그 설정 중 에러:",be)}},[]),we=u.useCallback(async()=>{if(A)try{x(!0);const fe=f.find(be=>be.id===A);await cs.delete(A),fe&&await ne(fe.permissionName,""),g(be=>be.filter(Te=>Te.id!==A))}catch(fe){console.error("삭제 실패:",fe),alert(`삭제에 실패했습니다: ${fe.message}`)}finally{x(!1)}L(!1),D(null),$("")},[A,B,f,ne]),ce=u.useCallback(()=>{L(!1),D(null),$("")},[]),De=u.useCallback(async(fe,be)=>{try{fe.id,await cs.update(fe.id,{...fe,isActive:be}),g(Te=>Te.map(Ne=>Ne.id===fe.id?{...Ne,isActive:be}:Ne))}catch(Te){console.error("활성 상태 변경 실패:",Te),b()}},[b]),le=u.useMemo(()=>ge.map(fe=>fe.id==="actions"&&fe.buttons?{...fe,buttons:fe.buttons.map(be=>{let Te=be.onClick;return be.label==="수정"?Te=ue:be.label==="삭제"&&(Te=Ae),{...be,onClick:Te}})}:fe.id==="isActive"&&fe.type==="toggle"?{...fe,onToggle:De}:fe),[ge,ue,Ae,De]),{columnVisibility:se,visibleColumns:J,hiddenColumnsCount:Z,toggleColumnVisibility:ie,showAllColumns:_e,resetToDefault:Re}=dr(le,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox","number","permissionName"],tableId:"permission_table_v1"}),[He,ft]=u.useState(null),St=!!He,{containerRef:Tt,tableHeight:gt,autoHeight:et,toggleAutoHeight:xt,setManualHeight:Rt}=lr({defaultHeight:"400px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:ht,getResizeHandleProps:jt,calculateMaxHeight:$t}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:fe=>{et&&xt(!1),Rt(`${fe}px`)}}),Ut=u.useCallback(fe=>{h(fe),i(0)},[]);u.useCallback(fe=>{c(fe)},[]),u.useCallback(()=>{h({status:"all"}),c({}),i(0)},[]);const Bt=u.useCallback(fe=>{i(fe)},[]),Kt=u.useCallback(fe=>{s(fe),i(0)},[]),Ft=u.useCallback(()=>{alert("권한 엑셀 다운로드 기능이 호출되었습니다")},[]),Et=u.useCallback(()=>{alert("권한 인쇄 기능이 호출되었습니다")},[]),Ot=u.useCallback(fe=>{ft(fe)},[]),zt=u.useCallback(()=>{ft(null)},[]),Wt=u.useCallback(async()=>{await b()},[b]),kt=u.useCallback(()=>{U()},[U]),Mt=u.useMemo(()=>le.filter(fe=>fe.hideable!==!1),[le]),{searchText:Ht,totalItems:qt,sequentialPageNumbers:Yt,hasPinnedColumns:Xt,isGridReady:tn,handleSearchChange:Fe,handleClearSearch:je,togglePageNumberMode:Oe,toggleColumnPin:ke,setGridReady:bt}=Rn({initialTotalItems:O,onSearch:fe=>{r!==0&&i(0)},onToggleColumnPin:fe=>{oe.length>0?Q():(te("checkbox")||G("checkbox"),te("number")||G("number"),te("permissionName")||G("permissionName"))}}),it=u.useCallback(fe=>{},[]);return u.useEffect(()=>{bt(!0)},[bt]),m(vn,{children:[a(Cn,{title:"단계/권한설정",onDisplayOptionsClick:Ot,onRefreshClick:Wt,onAddClick:kt,showAddButton:!0,showRefreshButton:!0,addButtonText:"권한 추가",titleTabs:m(La,{value:t,onChange:v,sx:{minHeight:"auto","& .MuiTabs-indicator":{backgroundColor:"#1976d2"},"& .MuiTab-root":{minHeight:"auto",padding:"6px 16px",fontSize:"14px",fontWeight:500,color:"#666","&.Mui-selected":{color:"#1976d2"}}},children:[a(_n,{label:"단계설정"}),a(_n,{label:"권한설정"})]}),sx:{mb:3}}),a(or,{anchorEl:He,open:St,onClose:zt,toggleableColumns:Mt,columnVisibility:se,onToggleColumn:ie,onShowAll:_e,onReset:Re,hiddenColumnsCount:Z,menuWidth:"350px"}),y&&a(Jt,{severity:"error",sx:{mb:2},children:y}),w&&!f.length?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})}):m(rt,{elevation:1,sx:{borderRadius:2,overflow:"hidden",p:2},children:[a(gn,{title:"권한 목록",totalItems:O,countLabel:"총 ##count##개의 권한",sequentialPageNumbers:Yt,togglePageNumberMode:Oe,hasPinnedColumns:oe.length>0,isGridReady:tn,toggleColumnPin:ke,searchText:Ht,handleSearchChange:Fe,handleClearSearch:je,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"권한 검색...",sx:{mb:2}}),a(Vn,{filterProps:{activeFilters:d,handleFilterChange:(fe,be)=>{const Te={...d,[fe]:be};Ut(Te)},filterOptions:Eae,showDateFilter:!1},paginationProps:{count:O,page:r,rowsPerPage:o,onPageChange:Bt,onRowsPerPageChange:fe=>{const be=parseInt(fe.target.value,10);Kt(be)},onExcelDownload:Ft,onPrint:Et}}),m(j,{ref:Tt,sx:{width:"100%",mt:2,pb:2},children:[a(An,{columns:le,data:F,checkable:!0,fixedHeader:!0,maxHeight:gt,checkedItems:R,allChecked:q,expandedRows:z,sortConfig:E,pinnedColumns:oe,onCheck:H,onToggleAll:K,onSort:X,onToggleExpand:ee,onRowClick:it,indentMode:!1,sequentialPageNumbers:Yt,page:r,rowsPerPage:o,totalCount:O}),a(rr,{resizeHandleProps:jt(parseFloat(gt)),showIcon:!0,isDragging:ht,sx:{mt:1,opacity:ht?1:.7,"&:hover":{opacity:1}}}),a(Qg,{currentPage:r,currentRowsPerPage:o,dataLength:f.length,filteredDataLength:N.length,totalFlattenedItems:O,searchText:Ht,sequentialPageNumbers:Yt,isDragging:ht,tableHeight:gt,pinnedColumns:oe,visibleColumnsCount:J.length,totalColumnsCount:bD.length,hiddenColumnsCount:Z,columnVisibility:se,autoHeight:et,calculateMaxHeight:$t,show:!0})]})]}),a(mj,{open:P,editMode:C,currentPermission:_,onClose:V,onSave:me,onInputChange:ae}),a(eS,{open:I,title:"권한 삭제 확인",itemName:B,itemType:"권한",onConfirm:we,onCancel:ce})]})},jae="modulepreload",Fae=function(e){return"/"+e},wD={},zae=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let s=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=s(n.map(d=>{if(d=Fae(d),d in wD)return;wD[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":jae,h||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),h)return new Promise((w,x)=>{g.addEventListener("load",w),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};var nu={},CD;function Nae(){if(CD)return nu;CD=1;var e=ln();Object.defineProperty(nu,"__esModule",{value:!0}),nu.default=void 0;var t=e(un()),n=cn();return nu.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),nu}var Bae=Nae();const yj=vt(Bae);var ru={},SD;function Hae(){if(SD)return ru;SD=1;var e=ln();Object.defineProperty(ru,"__esModule",{value:!0}),ru.default=void 0;var t=e(un()),n=cn();return ru.default=(0,t.default)((0,n.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet"),ru}var Wae=Hae();const qae=vt(Wae);var au={},PD;function Uae(){if(PD)return au;PD=1;var e=ln();Object.defineProperty(au,"__esModule",{value:!0}),au.default=void 0;var t=e(un()),n=cn();return au.default=(0,t.default)((0,n.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt"),au}var Vae=Uae();const Gae=vt(Vae);var iu={},kD;function Kae(){if(kD)return iu;kD=1;var e=ln();Object.defineProperty(iu,"__esModule",{value:!0}),iu.default=void 0;var t=e(un()),n=cn();return iu.default=(0,t.default)((0,n.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75M9.1 17H7v-2.14l5.96-5.96 2.12 2.12zm7.75-7.73-1.06 1.06-2.12-2.12 1.06-1.06c.2-.2.51-.2.71 0l1.41 1.41c.2.2.2.51 0 .71"}),"NoteAlt"),iu}var Yae=Kae();const Xae=vt(Yae);var ou={},_D;function Jae(){if(_D)return ou;_D=1;var e=ln();Object.defineProperty(ou,"__esModule",{value:!0}),ou.default=void 0;var t=e(un()),n=cn();return ou.default=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz"),ou}var Qae=Jae();const TD=vt(Qae),Zae=({open:e,onClose:t,member:n,action:r,onConfirm:i,formatCurrency:o,onGameMoneyTransfer:s,onRollingTransfer:l})=>{var O,R,E,z,q,X;const[c,d]=u.useState(""),[h,f]=u.useState(""),[g,w]=u.useState("일반"),[x,y]=u.useState(""),[p,v]=u.useState({}),[b,P]=u.useState(null),[k,C]=u.useState(null),S=Ce.useRef(null),_=r==="deposit"?"회원 머니 지급":"회원 머니 회수",T=r==="deposit"?"지급하기":"회수하기",I=r==="deposit"?"primary":"error",A=o||(H=>new Intl.NumberFormat("ko-KR").format(H||0));u.useEffect(()=>{e&&(d(""),f(""),w("일반"),y(""),v({}),setTimeout(()=>{S.current&&S.current.focus()},100))},[e]),u.useEffect(()=>{if(r==="withdraw"&&c&&n){const H=parseInt(c),K=(n==null?void 0:n.balance)||0,ee=(n==null?void 0:n.gameMoney)||0,ge=K+ee;if(H>K&&H<=ge){const oe=H-K;P({needed:!0,fromGameMoney:oe,remainingGameMoney:ee-oe})}else P(null)}else P(null)},[c,r,n]);const D=H=>{const K=H.target.value.replace(/[^\d]/g,"");(K===""||/^\d+$/.test(K))&&(d(K),f(K?Intl.NumberFormat("ko-KR").format(parseInt(K)):""),p.amount&&v(ee=>({...ee,amount:void 0})))},B=H=>{const ee=(c===""?0:parseInt(c))+parseInt(H);d(ee.toString()),f(Intl.NumberFormat("ko-KR").format(ee)),p.amount&&v(ge=>({...ge,amount:void 0}))},$=H=>{H.key==="Enter"&&(H.preventDefault(),F())},N=()=>{const H={};return c?(isNaN(c)||parseFloat(c)<=0)&&(H.amount="유효한 금액을 입력해주세요"):H.amount="금액을 입력해주세요",g||(H.paymentType="지급 유형을 선택해주세요"),v(H),Object.keys(H).length===0},F=async()=>{if(N()){const H=(n==null?void 0:n.id)||(n==null?void 0:n.ID)||(n==null?void 0:n.userId)||(n==null?void 0:n.memberId)||(n==null?void 0:n.username);if(b!=null&&b.needed&&s){const K=await s(n.username,!0);if(!K||!K.success)return}i({memberId:H,action:r,amount:parseFloat(c),paymentType:g,note:x,autoTransferred:b!=null&&b.needed?b.fromGameMoney:0}),t()}};return m(Yn,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"10px",overflow:"hidden"}},children:[m(Zn,{sx:{bgcolor:r==="deposit"?"primary.main":"error.main",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",py:1.5},children:[m(j,{sx:{display:"flex",alignItems:"center"},children:[r==="deposit"?a(qae,{sx:{mr:1}}):a(Gae,{sx:{mr:1}}),_]}),a(Ct,{onClick:t,size:"small",sx:{color:"white"},"aria-label":"close",children:a(yj,{})})]}),m(Kn,{sx:{py:3},children:[m(j,{sx:{mb:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[a(M,{variant:"subtitle2",sx:{color:"text.secondary"},children:"회원 정보"}),a(ut,{label:((O=n==null?void 0:n.type)==null?void 0:O.label)||(n==null?void 0:n.type)||"-",size:"small",color:((R=n==null?void 0:n.type)==null?void 0:R.color)||"default",sx:{height:"24px",fontSize:"0.8125rem",backgroundColor:(E=n==null?void 0:n.type)==null?void 0:E.backgroundColor,borderColor:(z=n==null?void 0:n.type)==null?void 0:z.borderColor,border:(q=n==null?void 0:n.type)!=null&&q.borderColor?`1px solid ${(X=n==null?void 0:n.type)==null?void 0:X.borderColor}`:void 0}})]}),a(j,{sx:{p:2,bgcolor:"grey.50",borderRadius:"8px",border:"1px solid",borderColor:"divider"},children:m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",flexDirection:"column"},children:[a(M,{variant:"caption",color:"text.secondary",children:"아이디"}),a(M,{variant:"body1",sx:{fontWeight:"medium"},children:(n==null?void 0:n.username)||"-"})]})}),a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",flexDirection:"column"},children:[a(M,{variant:"caption",color:"text.secondary",children:"닉네임"}),a(M,{variant:"body1",children:(n==null?void 0:n.nickname)||"-"})]})}),a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",flexDirection:"column"},children:[a(M,{variant:"caption",color:"text.secondary",children:"보유머니"}),m(M,{variant:"body1",sx:{fontWeight:"medium"},children:[A((n==null?void 0:n.balance)||0)," 원"]}),a(M,{variant:"caption",color:"text.secondary",sx:{mt:2.5},children:"롤링금"}),m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[m(M,{variant:"body1",sx:{fontWeight:"medium"},children:[A((n==null?void 0:n.rollingAmount)||0)," 원"]}),(n==null?void 0:n.rollingAmount)>0&&a(Se,{size:"small",variant:"outlined",startIcon:a(TD,{}),onClick:H=>C(H.currentTarget),sx:{padding:"2px 8px",fontSize:"0.7rem",height:"24px"},children:"전환"})]})]})}),a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",flexDirection:"column"},children:[a(M,{variant:"caption",color:"text.secondary",children:"게임머니"}),m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[m(M,{variant:"body1",sx:{fontWeight:"medium"},children:[A((n==null?void 0:n.gameMoney)||0)," 원"]}),(n==null?void 0:n.gameMoney)>0&&a(Se,{size:"small",variant:"outlined",startIcon:a(TD,{}),onClick:()=>{s&&s(n.username)},sx:{padding:"2px 8px",fontSize:"0.7rem",height:"24px"},children:"전환"})]})]})})]})})]}),m(vi,{anchorEl:k,open:!!k,onClose:()=>C(null),children:[m(Me,{onClick:()=>{l&&l(n.username,"slot"),C(null)},children:[a(ur,{children:a(XC,{fontSize:"small"})}),a(_r,{children:"슬롯 롤링금 전환"})]}),m(Me,{onClick:()=>{l&&l(n.username,"casino"),C(null)},children:[a(ur,{children:a(YC,{fontSize:"small"})}),a(_r,{children:"카지노 롤링금 전환"})]}),m(Me,{onClick:()=>{l&&l(n.username,"all"),C(null)},children:[a(ur,{children:a(ij,{fontSize:"small"})}),a(_r,{children:"모든 롤링금 전환"})]})]}),a(yn,{sx:{my:2}}),m(j,{sx:{mb:1},children:[a(M,{variant:"subtitle2",sx:{mb:2,color:"text.secondary"},children:r==="deposit"?"지급 정보":"회수 정보"}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:12,children:[a($e,{fullWidth:!0,label:r==="deposit"?"지급 금액":"회수 금액",variant:"outlined",size:"small",value:h,onChange:D,error:!!p.amount,helperText:p.amount,InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},autoFocus:!0,inputRef:S,onKeyDown:$}),m(j,{sx:{display:"flex",gap:1,mt:1,flexWrap:"wrap"},children:[["10000","50000","100000","500000","1000000","5000000","10000000","100000000"].map(H=>a(Se,{variant:"outlined",size:"small",color:"primary",onClick:()=>B(H),sx:{minWidth:"auto",py:.5,fontSize:"0.75rem"},children:Intl.NumberFormat("ko-KR").format(parseInt(H))},H)),r==="withdraw"&&a(Se,{variant:"contained",size:"small",color:"error",onClick:()=>{const H=(n==null?void 0:n.balance)||0;d(H.toString()),f(Intl.NumberFormat("ko-KR").format(H)),p.amount&&v(K=>({...K,amount:void 0}))},sx:{minWidth:"auto",py:.5,px:2,fontSize:"0.75rem",fontWeight:"bold"},children:"전액"})]})]}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,size:"small",variant:"outlined",error:!!p.paymentType,children:[a(hn,{id:"payment-type-label",children:"지급 유형"}),m(an,{labelId:"payment-type-label",value:g,onChange:H=>w(H.target.value),label:"지급 유형",onKeyDown:$,children:[a(Me,{value:"일반",children:"일반"}),a(Me,{value:"보너스",children:"보너스"}),a(Me,{value:"이벤트",children:"이벤트"}),a(Me,{value:"보너스",children:"기타"})]}),p.paymentType&&a(Xu,{children:p.paymentType})]})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"메모",multiline:!0,rows:2,variant:"outlined",size:"small",value:x,onChange:H=>y(H.target.value),placeholder:"필요시 메모를 입력하세요",onKeyDown:$,InputProps:{startAdornment:a(Dt,{position:"start",sx:{alignSelf:"flex-start",pt:1},children:a(Xae,{fontSize:"small",color:"action"})})}})})]})]}),(b==null?void 0:b.needed)&&m(Jt,{severity:"info",sx:{mt:2,mb:2},children:[m(M,{variant:"caption",children:["회수 금액이 보유금액보다 많습니다. 게임머니에서 ",A(b.fromGameMoney),"원이 자동으로 보유금액으로 전환된 후 회수됩니다."]}),m(M,{variant:"caption",display:"block",sx:{mt:.5},children:["• 현재 보유금액: ",A((n==null?void 0:n.balance)||0),"원 • 필요 금액: ",A(c),"원 • 전환 후 남은 게임머니: ",A(b.remainingGameMoney),"원"]})]}),a(j,{sx:{mt:2,p:1.5,bgcolor:"#fff3e0",borderRadius:"4px",border:"1px solid #ff9800"},children:a(M,{variant:"caption",sx:{color:"#e65100",fontWeight:"medium",fontSize:"0.8rem"},children:r==="deposit"?"회원에게 머니를 지급하면 해당 금액만큼 회원의 보유머니가 증가합니다.":"회원의 머니를 회수하면 해당 금액만큼 회원의 보유머니가 차감됩니다."})})]}),m(nr,{sx:{px:3,py:2,bgcolor:"grey.50"},children:[a(Se,{onClick:t,variant:"outlined",color:"inherit",sx:{borderRadius:"4px",px:2},children:"취소"}),a(Se,{onClick:F,variant:"contained",color:I,sx:{borderRadius:"4px",px:3,fontWeight:"medium"},children:T})]})]})},n1={async getBankAccounts(e=!1){var t;try{let r=(await Pe.settings.getBankAccounts()).data||[];return e&&(r=r.filter(i=>i.is_active)),r.sort((i,o)=>i.display_order-o.display_order),r}catch(n){if(console.error("은행 계좌 목록 조회 실패:",n),((t=n.response)==null?void 0:t.status)===401)return console.warn("은행 계좌 조회 중 인증 오류 - 빈 배열 반환"),[];throw n}},async getActiveBankNames(){try{return(await this.getBankAccounts(!0)).map(t=>t.bank_name)}catch(e){return console.error("활성 은행명 조회 실패:",e),[]}},async addBankAccount(e){return await Pe.settings.addBankAccount(e)},async updateBankAccount(e,t){return await Pe.settings.updateBankAccount(e,t)},async deleteBankAccount(e){return await Pe.settings.deleteBankAccount(e)}};var su={},ID;function eie(){if(ID)return su;ID=1;var e=ln();Object.defineProperty(su,"__esModule",{value:!0}),su.default=void 0;var t=e(un()),n=cn();return su.default=(0,t.default)((0,n.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),su}var tie=eie();const OD=vt(tie),nie=({open:e,onClose:t,member:n,onPermissionUpdate:r})=>{var _,T,I,L,A;const[i,o]=u.useState(!0),[s,l]=u.useState(!1),[c,d]=u.useState(null),[h,f]=u.useState(!1),[g,w]=u.useState(!1),x=["회원관리","머니이동내역","롤링내역","베팅내역","정산","게임설정","사이트설정","시스템설정"],y=["조회","추가","수정","삭제","엑셀다운로드","머니이동","롤링처리","권한변경"],p=["잔액확인","베팅조회","정산조회","게임실행","보고서열람","시스템모니터링"];u.useEffect(()=>{e&&(n!=null&&n.id)&&v()},[e,n==null?void 0:n.id]);const v=async()=>{var D;try{o(!0);const B=await Pe.permissions.getMemberPermissions(n.id);if((D=B.data)!=null&&D.data){const $=B.data.data;d($.effectivePermissions),f($.hasOverride),w($.hasOverride)}}catch(B){console.error("권한 조회 실패:",B)}finally{o(!1)}},b=(D,B,$)=>{d(N=>({...N,[D]:$?[...N[D]||[],B]:(N[D]||[]).filter(F=>F!==B)}))},P=(D,B,$)=>{d(N=>{var F,O;return{...N,restrictions:{...N.restrictions,[D]:$?[...((F=N.restrictions)==null?void 0:F[D])||[],B]:(((O=N.restrictions)==null?void 0:O[D])||[]).filter(R=>R!==B)}}})},k=D=>{w(D.target.checked),D.target.checked||v()},C=async()=>{try{l(!0),g?await Pe.permissions.updateMemberPermissions(n.id,c):await Pe.permissions.updateMemberPermissions(n.id,null),r&&r(),t()}catch(D){console.error("권한 저장 실패:",D),alert("권한 저장에 실패했습니다.")}finally{l(!1)}},S=(D,B)=>{const $=D==="menus"?x:D==="buttons"?y:D==="features"?p:[];d(N=>({...N,[D]:B?[...$]:[]}))};return i?a(Yn,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:a(Kn,{children:a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})})})}):m(Yn,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(m1,{}),a(M,{variant:"h6",children:"권한 설정"}),a(ut,{label:(n==null?void 0:n.userId)||(n==null?void 0:n.username),size:"small",color:"primary",variant:"outlined"})]})}),m(Kn,{dividers:!0,children:[m(j,{sx:{mb:3},children:[a(Lt,{control:a(sn,{checked:g,onChange:k}),label:"개별 권한 설정 사용"}),!g&&m(Jt,{severity:"info",sx:{mt:1},children:["현재 단계(",(n==null?void 0:n.agent_level_name)||(n==null?void 0:n.level_name),")의 기본 권한을 사용합니다."]})]}),g&&c&&m(bn,{children:[m(j,{sx:{mb:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"subtitle1",fontWeight:"bold",children:"메뉴 접근 권한"}),a(Lt,{control:a(gr,{checked:((_=c.menus)==null?void 0:_.length)===x.length,onChange:D=>S("menus",D.target.checked)}),label:"전체 선택"})]}),a(Aa,{row:!0,children:x.map(D=>{var B;return a(Lt,{control:a(gr,{checked:((B=c.menus)==null?void 0:B.includes(D))||!1,onChange:$=>b("menus",D,$.target.checked)}),label:D,sx:{width:"25%"}},D)})})]}),a(yn,{sx:{my:2}}),m(j,{sx:{mb:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"subtitle1",fontWeight:"bold",children:"버튼/기능 권한"}),a(Lt,{control:a(gr,{checked:((T=c.buttons)==null?void 0:T.length)===y.length,onChange:D=>S("buttons",D.target.checked)}),label:"전체 선택"})]}),a(Aa,{row:!0,children:y.map(D=>{var B;return a(Lt,{control:a(gr,{checked:((B=c.buttons)==null?void 0:B.includes(D))||!1,onChange:$=>b("buttons",D,$.target.checked)}),label:D,sx:{width:"25%"}},D)})})]}),a(yn,{sx:{my:2}}),m(j,{sx:{mb:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[a(M,{variant:"subtitle1",fontWeight:"bold",children:"기능 권한"}),a(Lt,{control:a(gr,{checked:((I=c.features)==null?void 0:I.length)===p.length,onChange:D=>S("features",D.target.checked)}),label:"전체 선택"})]}),a(Aa,{row:!0,children:p.map(D=>{var B;return a(Lt,{control:a(gr,{checked:((B=c.features)==null?void 0:B.includes(D))||!1,onChange:$=>b("features",D,$.target.checked)}),label:D,sx:{width:"33%"}},D)})})]}),a(yn,{sx:{my:2}}),m(j,{children:[a(M,{variant:"subtitle1",fontWeight:"bold",sx:{mb:1},children:"추가 제한사항 (체크된 항목은 사용 불가)"}),a(Jt,{severity:"warning",sx:{mb:2},children:"위에서 허용한 권한 중에서 추가로 제한할 항목을 선택하세요."}),a(M,{variant:"subtitle2",sx:{mb:1},children:"메뉴 제한"}),a(Aa,{row:!0,sx:{mb:2},children:(L=c.menus)==null?void 0:L.map(D=>{var B,$;return a(Lt,{control:a(gr,{checked:(($=(B=c.restrictions)==null?void 0:B.menus)==null?void 0:$.includes(D))||!1,onChange:N=>P("menus",D,N.target.checked)}),label:D,sx:{width:"25%"}},D)})}),a(M,{variant:"subtitle2",sx:{mb:1},children:"버튼 제한"}),a(Aa,{row:!0,children:(A=c.buttons)==null?void 0:A.map(D=>{var B,$;return a(Lt,{control:a(gr,{checked:(($=(B=c.restrictions)==null?void 0:B.buttons)==null?void 0:$.includes(D))||!1,onChange:N=>P("buttons",D,N.target.checked)}),label:D,sx:{width:"25%"}},D)})})]})]})]}),m(nr,{children:[a(Se,{onClick:t,children:"취소"}),a(Se,{onClick:C,variant:"contained",disabled:s,children:s?"저장 중...":"저장"})]})]})},rie=({editedMember:e,handleInputChange:t,handleNestedInputChange:n,showPassword:r,toggleShowPassword:i,renderHierarchy:o,formatCurrency:s,getLevelChipStyle:l})=>{var ne,me,ue,Ae,we;const c=Kr(),[d,h]=u.useState(!1),f=zn(ce=>ce.auth.user);f!=null&&f.permissions||(f==null||f.role);const[g,w]=u.useState(!1),[x,y]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,v]=u.useState(""),[b,P]=u.useState([]),[k,C]=u.useState(!0),[S,_]=u.useState({slot:0,casino:0}),[T,I]=u.useState({isValid:!0,reason:"",parentInvalid:!1}),[L,A]=u.useState({slot:"0.00",casino:"0.00"}),[D,B]=u.useState([]),[$,N]=u.useState(!1),[F,O]=u.useState({canGrant:!1,hasPermission:!1,permissionType:"",delegationStep:0,canDelegate:!1,selectedDomain:null}),[R,E]=u.useState([]),[z,q]=u.useState(!0),[X,H]=u.useState([]),[K,ee]=u.useState(!1),[ge,oe]=u.useState(null),[G,Q]=u.useState(!1);u.useEffect(()=>{const ce=new AbortController;return(async()=>{var se,J,Z,ie;if(!e){_({slot:100,casino:100});return}if(e.agent_level_id===1||e.agent_level_id==="1"){_({slot:100,casino:100});return}if(!((e==null?void 0:e.is_top_level)===!0||(e==null?void 0:e.is_top_level)===1||!(e!=null&&e.parentId)&&!(e!=null&&e.parent_id)||(e==null?void 0:e.parentId)===0||(e==null?void 0:e.parent_id)===0)&&(e!=null&&e.parentId||e!=null&&e.parent_id)){const _e=e.parentId||e.parent_id;try{const Re=await Pe.members.getById(_e,{signal:ce.signal});if((se=Re.data)!=null&&se.success&&((J=Re.data)!=null&&J.data)){const He=Re.data.data;_({slot:parseFloat(He.slot_percent||0),casino:parseFloat(He.casino_percent||0)})}}catch(Re){if(Re.name==="AbortError"||Re.code==="ERR_CANCELED")return;((Z=Re.response)==null?void 0:Z.status)===401&&console.warn("상위 회원 정보 조회 중 인증 오류 - 로컬 데이터 사용");const He=(ie=e.hierarchy)==null?void 0:ie.find(ft=>ft.id===_e);_(He?{slot:parseFloat(He.slot_percent||He.rollingPercent||0),casino:parseFloat(He.casino_percent||He.rollingPercent||0)}:{slot:100,casino:100})}}else _({slot:100,casino:100})})(),()=>{ce.abort()}},[e]),u.useEffect(()=>{if(e){const ce=e.slot_percent!==void 0?parseFloat(e.slot_percent):e.rollingPercent!==void 0?parseFloat(e.rollingPercent):0,De=e.casino_percent!==void 0?parseFloat(e.casino_percent):e.rollingPercent!==void 0?parseFloat(e.rollingPercent):0;A({slot:isNaN(ce)?"0.00":ce.toFixed(2),casino:isNaN(De)?"0.00":De.toFixed(2)}),e.rollingValidity&&I(e.rollingValidity)}},[e]),u.useEffect(()=>{const ce=new AbortController;return(async()=>{try{C(!0);const le=await n1.getActiveBankNames({signal:ce.signal});P(le)}catch(le){if(le.name==="AbortError"||le.code==="ERR_CANCELED")return;P([])}finally{C(!1)}})(),()=>{ce.abort()}},[]),u.useEffect(()=>{const ce=new AbortController;return e&&(async()=>{var le;try{N(!0);const se=await Pe.get("/domains/type/user",{signal:ce.signal});se.data.success&&B(se.data.data||[])}catch(se){if(se.name==="AbortError"||se.code==="ERR_CANCELED")return;((le=se.response)==null?void 0:le.status)===401?console.warn("도메인 데이터 조회 중 인증 오류 - 빈 배열 사용"):console.error("도메인 데이터 조회 실패:",se),B([])}finally{N(!1)}})(),()=>{ce.abort()}},[e==null?void 0:e.id]),u.useEffect(()=>{let ce=new AbortController;return(async()=>{var se;if(q(!0),O({canGrant:!1,hasPermission:!1,permissionType:"",delegationStep:0,canDelegate:!1,selectedDomain:null}),E([]),!e||!e.id){q(!1);return}const le=e.id;try{const J=e.agent_level_id===1||e.agent_level_id==="1",Z=await Pe.get(`/user-domain-permissions/member/${e.id}`,{signal:ce.signal});if(Z.data.success&&Z.data.data){const ie=Z.data.data;if(ie.memberId!==le){console.warn("응답 데이터가 현재 회원과 일치하지 않음:",{expected:le,received:ie.memberId}),q(!1);return}const _e=ie.delegation;if(J)O({canGrant:!0,hasPermission:!1,permissionType:"",delegationStep:0,canDelegate:!1,selectedDomain:null});else if(_e&&_e.id){const Re=_e.delegation_step||0,He=_e.delegation_type||"";if(O({canGrant:!1,hasPermission:!0,permissionType:He,delegationStep:Re,canDelegate:_e.can_delegate||!1,selectedDomain:ie.selectedDomain}),ie.grantedToInfo&&_e.can_delegate){const ft=ie.grantedToInfo}}else O({canGrant:!1,hasPermission:!1,permissionType:"",delegationStep:0,canDelegate:!1,selectedDomain:null})}else O({canGrant:J,hasPermission:!1,permissionType:"",delegationStep:0,canDelegate:!1,selectedDomain:null});if(e.agent_level_id){const ie=await Pe.agentLevels.getAll({signal:ce.signal});if(ie.data.success){const _e=ie.data.data.find(Re=>Re.id===e.agent_level_id);if(_e){const Re=ie.data.data.filter(He=>He.level>_e.level);if(e.id)try{E(Re)}catch(He){console.error("하위 구조 조회 실패:",He),E(Re)}else E(Re)}}}}catch(J){if(J.name==="AbortError"||J.code==="ECONNABORTED"||J.code==="ERR_CANCELED"||J.name==="CanceledError")return;((se=J.response)==null?void 0:se.status)===401?console.warn("도메인 권한 정보 조회 중 인증 오류 - 기본값 사용"):console.error("도메인 권한 정보 조회 실패:",J)}finally{ce.signal.aborted||q(!1)}})(),()=>{ce.abort()}},[e==null?void 0:e.id,e==null?void 0:e.agent_level_id]),u.useEffect(()=>{const ce=new AbortController;return e&&(async()=>{try{ee(!0);const le=await Pe.get("/design-templates/templates",{signal:ce.signal});if(le.data.success&&H(le.data.data||[]),e!=null&&e.selectedDomainId){const se=await Pe.get(`/design-templates/domain/${e.selectedDomainId}`,{signal:ce.signal});se.data.success&&se.data.data&&oe(se.data.data.template_id)}}catch(le){if(le.name==="AbortError"||le.code==="ERR_CANCELED")return;console.error("디자인 데이터 조회 실패:",le),H([])}finally{ee(!1)}})(),()=>{ce.abort()}},[e==null?void 0:e.id,e==null?void 0:e.selectedDomainId]);const te=async ce=>{var le,se;const{checked:De}=ce.target;if(De){h(!0);try{const J=await Pe.usernameChange.validateChange(e.username),{canChange:Z,reason:ie}=J.data;if(!Z){alert(ie||"아이디 변경이 불가능합니다."),ce.target.checked=!1,h(!1);return}const _e=e.gameStatus==="게임중",Re=(e.balance||0)>0,He=(e.gameMoney||0)>0,ft=(((le=e.rollingAmount)==null?void 0:le.slot)||0)>0||(((se=e.rollingAmount)==null?void 0:se.casino)||0)>0;if(_e){alert("게임 진행 중에는 아이디 변경을 활성화할 수 없습니다."),ce.target.checked=!1,h(!1);return}if(Re||He||ft){alert("보유머니, 게임머니 또는 롤링금이 있는 경우 아이디 변경을 활성화할 수 없습니다."),ce.target.checked=!1,h(!1);return}}catch{alert("아이디 변경 가능 여부를 확인할 수 없습니다."),ce.target.checked=!1,h(!1);return}}try{const J=await Pe.usernameChange.toggleChangeEnabled(e.username||e.userId,De);J.data.success?(t("usernameChangeEnabled",De),c(GB({userId:e.userId,enabled:De}))):(alert(J.data.message||"아이디 변경 설정을 변경할 수 없습니다."),ce.target.checked=!De)}catch(J){console.error("아이디 변경 토글 오류:",J),alert("아이디 변경 설정 중 오류가 발생했습니다."),ce.target.checked=!De}h(!1)},U=(ce,De)=>{y({...x,[ce]:De}),v("")},V=()=>{if(!x.currentPassword){v("현재 비밀번호를 입력해주세요.");return}if(!x.newPassword){v("새 비밀번호를 입력해주세요.");return}if(x.newPassword.length<6){v("비밀번호는 최소 6자 이상이어야 합니다.");return}if(x.newPassword!==x.confirmPassword){v("새 비밀번호와 비밀번호 확인이 일치하지 않습니다.");return}t&&t("password",x.newPassword),w(!1),y({currentPassword:"",newPassword:"",confirmPassword:""}),v("")},ae=async()=>{if(window.confirm(`모든 도메인 위임 권한을 초기화하시겠습니까?

이 작업은 되돌릴 수 없으며, 모든 하위 회원의 도메인 권한이 제거됩니다.`))try{(await Pe.post("/user-domain-permissions/reset-all")).data.success?(alert("도메인 위임 권한이 초기화되었습니다."),window.location.reload()):alert("도메인 위임 초기화에 실패했습니다.")}catch(ce){console.error("도메인 위임 초기화 오류:",ce),alert("도메인 위임 초기화 중 오류가 발생했습니다.")}};return m(bn,{children:[a(j,{sx:{mb:3},children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(M,{variant:"subtitle1",children:"상위단계"}),o&&o()]}),a(Se,{variant:"outlined",startIcon:a(m1,{}),onClick:()=>Q(!0),size:"small",children:"권한 설정"})]})}),m(W,{container:!0,spacing:3,children:[m(W,{item:!0,xs:12,md:6,children:[m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"계정 정보"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a($e,{label:"아이디",value:(e==null?void 0:e.username)||"",fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,children:a($e,{label:"닉네임",value:(e==null?void 0:e.nickname)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("nickname",ce.target.value)})}),a(W,{item:!0,xs:12,children:g?m(j,{children:[a($e,{label:"현재 비밀번호",type:"password",value:x.currentPassword||"",fullWidth:!0,margin:"normal",onChange:ce=>U("currentPassword",ce.target.value),error:!!p&&!x.currentPassword}),a($e,{label:"새 비밀번호",type:"password",value:x.newPassword||"",fullWidth:!0,margin:"normal",onChange:ce=>U("newPassword",ce.target.value),error:!!p&&(!x.newPassword||x.newPassword.length<6),helperText:"최소 6자 이상"}),a($e,{label:"비밀번호 확인",type:"password",value:x.confirmPassword||"",fullWidth:!0,margin:"normal",onChange:ce=>U("confirmPassword",ce.target.value),error:!!p&&x.newPassword!==x.confirmPassword}),p&&a(Jt,{severity:"error",sx:{mt:1},children:p}),m(j,{sx:{display:"flex",gap:1,mt:2},children:[a(Se,{variant:"contained",size:"small",onClick:V,color:"primary",children:"저장"}),a(Se,{variant:"outlined",size:"small",onClick:()=>{w(!1),y({currentPassword:"",newPassword:"",confirmPassword:""}),v("")},children:"취소"})]})]}):m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a($e,{label:"비밀번호",value:"••••••••",fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}}),a(Se,{variant:"outlined",onClick:()=>w(!0),sx:{whiteSpace:"nowrap",height:"56px",px:2,mb:"8px"},children:"비밀번호 변경"})]})}),a(W,{item:!0,xs:12,children:a($e,{label:"이름",value:(e==null?void 0:e.name)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("name",ce.target.value)})}),a(W,{item:!0,xs:12,children:a($e,{label:"전화번호",value:(e==null?void 0:e.phone)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("phone",ce.target.value)})}),a(W,{item:!0,xs:12,children:a($e,{label:"추천인 코드",value:(e==null?void 0:e.referral_code)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("referral_code",ce.target.value),helperText:"나의 추천인 코드 (영문, 한글, 숫자 조합 가능)"})}),m(W,{item:!0,xs:12,children:[m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,bgcolor:"background.default",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(FF,{color:"primary"}),a(M,{variant:"body1",children:"아이디바꿔주기"})]}),a(Lt,{control:a(sn,{checked:(e==null?void 0:e.usernameChangeEnabled)||!1,onChange:te,disabled:d,color:"primary"}),label:e!=null&&e.usernameChangeEnabled?"활성":"비활성",labelPlacement:"start"})]}),(e==null?void 0:e.usernameChangeEnabled)&&a(Jt,{severity:"info",sx:{mt:1},children:"아이디 변경이 활성화되었습니다. 사이트설정에서 변경 가능합니다."})]})]})]}),m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"상태 정보"}),m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[a(M,{variant:"body1",sx:{mr:2},children:"현재 상태:"}),a(ut,{label:typeof(e==null?void 0:e.status)=="object"?e.status.label||"정상":(e==null?void 0:e.status)||"정상",color:(typeof(e==null?void 0:e.status)=="object"?e.status.label:e==null?void 0:e.status)==="정상"?"success":(typeof(e==null?void 0:e.status)=="object"?e.status.label:e==null?void 0:e.status)==="비활성"?"warning":(typeof(e==null?void 0:e.status)=="object"?e.status.label:e==null?void 0:e.status)==="차단"?"error":(typeof(e==null?void 0:e.status)=="object"?e.status.label:e==null?void 0:e.status)==="삭제"?"default":"primary",sx:{fontWeight:"medium"}})]})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"상태 변경"}),m(an,{value:typeof(e==null?void 0:e.status)=="object"?e.status.label||"정상":(e==null?void 0:e.status)||"정상",label:"상태 변경",onChange:ce=>t&&t("status",ce.target.value),children:[a(Me,{value:"정상",children:"정상"}),a(Me,{value:"비활성",children:"비활성"}),a(Me,{value:"차단",children:"차단"}),a(Me,{value:"삭제",children:"삭제"})]})]})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[m(M,{variant:"body2",sx:{mr:2,color:"text.secondary"},children:["마지막 상태 변경: ",(e==null?void 0:e.statusChangedAt)||"없음"]}),(e==null?void 0:e.statusChangedBy)&&m(M,{variant:"body2",sx:{color:"text.secondary"},children:["변경자: ",e.statusChangedBy]})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"가입일",value:(e==null?void 0:e.createdAt)||(e==null?void 0:e.registrationDate)||"",fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"최근 접속일",value:(e==null?void 0:e.lastLoginAt)||(e==null?void 0:e.connectionDate)||"",fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})})]})]})]}),m(W,{item:!0,xs:12,md:6,children:[m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"보유 금액"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"보유머니",value:s?s(e==null?void 0:e.balance)||"":String((e==null?void 0:e.balance)||0),fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"게임머니",value:s?s(e==null?void 0:e.gameMoney)||"":String((e==null?void 0:e.gameMoney)||0),fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",gutterBottom:!0,children:"롤링 설정"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"슬롯 롤링 %",value:L.slot,fullWidth:!0,margin:"normal",disabled:(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&S.slot===0,placeholder:S.slot>0?`${S.slot.toFixed(2)}% 이하로 입력가능`:"상위 회원의 롤링%가 0%입니다",error:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.slot)>S.slot,onChange:ce=>{const De=ce.target.value;A(le=>({...le,slot:De}))},onBlur:ce=>{const De=ce.target.value,le=parseFloat(De)||0;if((e==null?void 0:e.agent_level_id)===1||(e==null?void 0:e.agent_level_id)==="1"){A(se=>({...se,slot:le.toFixed(2)})),t&&t("slot_percent",le);return}S.slot>0&&le>S.slot?(alert(`상위 회원의 슬롯 롤링%(${S.slot.toFixed(2)}%)를 초과할 수 없습니다.`),A(se=>({...se,slot:S.slot.toFixed(2)})),t&&t("slot_percent",S.slot)):(A(se=>({...se,slot:le.toFixed(2)})),t&&t("slot_percent",le))},InputProps:{endAdornment:a(Dt,{position:"end",children:"%"}),sx:{"& input":{color:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.slot)>S.slot?"error.main":"inherit",fontWeight:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.slot)>S.slot?"bold":"normal",textDecoration:T.isValid?"none":"line-through"}}},helperText:(e==null?void 0:e.agent_level_id)===1||(e==null?void 0:e.agent_level_id)==="1"?"최상위 회원 - 제한 없음":!T.isValid&&T.parentInvalid?"상위 회원의 롤링%가 유효하지 않아 적용할 수 없습니다":parseFloat(L.slot)>S.slot?`상위 회원(${S.slot.toFixed(2)}%)보다 높습니다`:S.slot===0?"상위 회원의 롤링%가 0%이므로 설정할 수 없습니다":`상위 슬롯 롤링: ${parseFloat(S.slot).toFixed(2)}% 이하로 입력가능`})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"카지노 롤링 %",value:L.casino,fullWidth:!0,margin:"normal",disabled:(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&S.casino===0,placeholder:S.casino>0?`${S.casino.toFixed(2)}% 이하로 입력가능`:"상위 회원의 롤링%가 0%입니다",error:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.casino)>S.casino,onChange:ce=>{const De=ce.target.value;A(le=>({...le,casino:De}))},onBlur:ce=>{const De=ce.target.value,le=parseFloat(De)||0;if((e==null?void 0:e.agent_level_id)===1||(e==null?void 0:e.agent_level_id)==="1"){A(se=>({...se,casino:le.toFixed(2)})),t&&t("casino_percent",le);return}S.casino>0&&le>S.casino?(alert(`상위 회원의 카지노 롤링%(${S.casino.toFixed(2)}%)를 초과할 수 없습니다.`),A(se=>({...se,casino:S.casino.toFixed(2)})),t&&t("casino_percent",S.casino)):(A(se=>({...se,casino:le.toFixed(2)})),t&&t("casino_percent",le))},InputProps:{endAdornment:a(Dt,{position:"end",children:"%"}),sx:{"& input":{color:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.casino)>S.casino?"error.main":"inherit",fontWeight:!T.isValid||(e==null?void 0:e.agent_level_id)!==1&&(e==null?void 0:e.agent_level_id)!=="1"&&parseFloat(L.casino)>S.casino?"bold":"normal",textDecoration:T.isValid?"none":"line-through"}}},helperText:(e==null?void 0:e.agent_level_id)===1||(e==null?void 0:e.agent_level_id)==="1"?"최상위 회원 - 제한 없음":!T.isValid&&T.parentInvalid?"상위 회원의 롤링%가 유효하지 않아 적용할 수 없습니다":parseFloat(L.casino)>S.casino?`상위 회원(${S.casino.toFixed(2)}%)보다 높습니다`:S.casino===0?"상위 회원의 롤링%가 0%이므로 설정할 수 없습니다":`상위 카지노 롤링: ${parseFloat(S.casino).toFixed(2)}% 이하로 입력가능`})}),a(W,{item:!0,xs:12,sm:4,children:a($e,{label:"슬롯 롤링금액",value:s?s((e==null?void 0:e.rolling_slot_amount)||((ne=e==null?void 0:e.rollingAmount)==null?void 0:ne.slot)||0)||"":String((e==null?void 0:e.rolling_slot_amount)||((me=e==null?void 0:e.rollingAmount)==null?void 0:me.slot)||0),fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,sm:4,children:a($e,{label:"카지노 롤링금액",value:s?s((e==null?void 0:e.rolling_casino_amount)||((ue=e==null?void 0:e.rollingAmount)==null?void 0:ue.casino)||0)||"":String((e==null?void 0:e.rolling_casino_amount)||((Ae=e==null?void 0:e.rollingAmount)==null?void 0:Ae.casino)||0),fullWidth:!0,margin:"normal",InputProps:{readOnly:!0}})}),a(W,{item:!0,xs:12,sm:4,children:a($e,{label:"총 롤링금액",value:s?s(((e==null?void 0:e.rolling_slot_amount)||0)+((e==null?void 0:e.rolling_casino_amount)||0))||"":String(((e==null?void 0:e.rolling_slot_amount)||0)+((e==null?void 0:e.rolling_casino_amount)||0)),fullWidth:!0,margin:"normal",InputProps:{readOnly:!0},sx:{"& .MuiInputBase-input":{fontWeight:"bold",color:"primary.main"}}})})]})]}),m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"계좌 정보"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"은행"}),m(an,{value:(e==null?void 0:e.bank)||"",label:"은행",onChange:ce=>t&&t("bank",ce.target.value),disabled:k,children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),k?a(Me,{disabled:!0,children:a("em",{children:"은행 목록 로딩 중..."})}):b.length>0?b.map(ce=>a(Me,{value:ce,children:ce},ce)):a(Me,{disabled:!0,children:a("em",{children:"등록된 은행이 없습니다"})})]})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"계좌번호",value:(e==null?void 0:e.accountNumber)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("accountNumber",ce.target.value)})}),a(W,{item:!0,xs:12,children:a($e,{label:"예금주",value:(e==null?void 0:e.accountHolder)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("accountHolder",ce.target.value)})})]})]}),m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"사이트 설정"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a($e,{label:"브라우저 타이틀",value:(e==null?void 0:e.browserTitle)||"",fullWidth:!0,margin:"normal",onChange:ce=>t&&t("browserTitle",ce.target.value)})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"사이트 언어"}),m(an,{value:(e==null?void 0:e.language)||"ko",label:"사이트 언어",onChange:ce=>t&&t("language",ce.target.value),children:[a(Me,{value:"ko",children:"한국어"}),a(Me,{value:"en",children:"English"}),a(Me,{value:"zh",children:"中文"}),a(Me,{value:"ja",children:"日本語"})]})]})}),z?a(W,{item:!0,xs:12,children:a(ud,{variant:"rectangular",height:56,sx:{mt:2}})}):F.canGrant?m(bn,{children:[a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"URL권한주기"}),m(an,{value:(e==null?void 0:e.grantPermissionTo)||"",label:"URL권한주기",onChange:ce=>t&&t("grantPermissionTo",ce.target.value),children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),R.map(ce=>m(Me,{value:ce.id,children:[ce.name," (",ce.level,"단계)"]},ce.id))]})]})}),m(W,{item:!0,xs:12,children:[a(Se,{variant:"outlined",color:"error",startIcon:a(ah,{}),onClick:ae,fullWidth:!0,sx:{mt:1},children:"도메인 위임 초기화"}),a(M,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"* 모든 하위 회원의 도메인 권한이 제거됩니다."})]})]}):null,z?null:F.hasPermission&&!F.canGrant?a(W,{item:!0,xs:12,children:F.delegationStep>=2?m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"회원페이지URL권한"}),a(an,{value:"self",label:"회원페이지URL권한",disabled:!0,children:a(Me,{value:"self",children:"본인위임"})})]}):m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"회원페이지URL권한"}),m(an,{value:(e==null?void 0:e.delegatePermissionType)||F.permissionType||"",label:"회원페이지URL권한",onChange:ce=>t&&t("delegatePermissionType",ce.target.value),children:[a(Me,{value:"self",children:"본인위임"}),R.map(ce=>m(Me,{value:`children_${ce.id}`,children:[ce.name," (",ce.level,"단계)"]},ce.id))]})]})}):null,F.hasPermission&&F.canGrant===!1&&(F.permissionType==="self"||(e==null?void 0:e.delegatePermissionType)==="self"&&(e==null?void 0:e.delegatePermissionType)!==""||F.delegationStep>=2)&&a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"회원페이지URL선택"}),m(an,{value:(e==null?void 0:e.selectedDomainId)!==void 0?String(e.selectedDomainId||""):String(((we=F.selectedDomain)==null?void 0:we.id)||""),label:"회원페이지URL선택",onChange:ce=>t&&t("selectedDomainId",ce.target.value),disabled:$,children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),D.map(ce=>a(Me,{value:ce.id,children:ce.url},ce.id))]})]})}),(e==null?void 0:e.selectedDomainId)&&m(W,{item:!0,xs:12,children:[m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(OD,{sx:{fontSize:20}}),"디자인 템플릿"]})}),m(an,{value:(e==null?void 0:e.designTemplateId)||"",label:"디자인 템플릿",onChange:ce=>t&&t("designTemplateId",ce.target.value),disabled:K,renderValue:ce=>{const De=X.find(le=>le.id===ce);return De?De.design_name:"선택 안함"},children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),X.map(ce=>a(Me,{value:ce.id,children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(OD,{sx:{fontSize:20,color:"action.active"}}),ce.design_name]})},ce.id))]})]}),a(M,{variant:"body2",color:"text.secondary",sx:{mt:1,px:2},children:"* 선택한 도메인에 디자인 템플릿이 적용됩니다."})]})]})]})]}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2,mb:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"메모"}),a($e,{multiline:!0,rows:4,fullWidth:!0,value:(e==null?void 0:e.memo)||"",onChange:ce=>t&&t("memo",ce.target.value),placeholder:"회원에 대한 메모를 입력하세요",sx:{"& .MuiOutlinedInput-root":{padding:"12px"},border:"1px solid #ddd",fontFamily:"inherit",fontSize:"14px"}})]})})]}),a(nie,{open:G,onClose:()=>Q(!1),member:e,onPermissionUpdate:()=>{}})]})};function bj(e,t,n=void 0){const r={};for(const i in e){const o=e[i];let s="",l=!0;for(let c=0;c<o.length;c+=1){const d=o[c];d&&(s+=(l===!0?"":" ")+t(d),l=!1,n&&n[d]&&(s+=" "+n[d]))}r[i]=s}return r}function eh(...e){const t=u.useRef(void 0),n=u.useCallback(r=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const s=o,l=s(r);return typeof l=="function"?l:()=>{s(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o==null?void 0:o())}},e);return u.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function aie(e){return typeof e=="string"}function iie(e,t,n){return e===void 0||aie(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function Wa(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function AD(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function oie(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const w=wn(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),x={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},y={...n,...i,...r};return w.length>0&&(y.className=w),Object.keys(x).length>0&&(y.style=x),{props:y,internalRef:void 0}}const s=Wa({...i,...r}),l=AD(r),c=AD(i),d=t(s),h=wn(d==null?void 0:d.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),f={...d==null?void 0:d.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},g={...d,...n,...c,...l};return h.length>0&&(g.className=h),Object.keys(f).length>0&&(g.style=f),{props:g,internalRef:d.ref}}function r1(e,t,n){return typeof e=="function"?e(t,n):e}function qa(e){var f;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,s=i?{}:r1(n,r),{props:l,internalRef:c}=oie({...o,externalSlotProps:s}),d=eh(c,s==null?void 0:s.ref,(f=e.additionalProps)==null?void 0:f.ref);return iie(t,{...l,ref:d},r)}function vj(e){return zF}const DD=e=>e,sie=()=>{let e=DD;return{configure(t){e=t},generate(t){return e(t)},reset(){e=DD}}},lie=sie(),cie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function tS(e,t,n="Mui"){const r=cie[t];return r?`${n}-${r}`:`${lie.generate(e)}-${t}`}function xj(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=tS(e,i,n)}),r}function uie(e){return tS("MuiSimpleTreeView",e)}xj("MuiSimpleTreeView",["root","item","itemContent","itemGroupTransition","itemIconContainer","itemLabel","itemCheckbox"]);const die=e=>e.isPropagationStopped!==void 0,wj=()=>{const[e]=u.useState(()=>new NF),t=u.useCallback((...r)=>{const[i,o,s={}]=r;s.defaultMuiPrevented=!1,!(die(s)&&s.isPropagationStopped())&&e.emit(i,o,s)},[e]),n=u.useCallback((r,i)=>(e.on(r,i),()=>{e.removeListener(r,i)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:n}}};wj.params={};const Cj=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};Cj.params={};var U0={exports:{}},V0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD;function hie(){if(RD)return V0;RD=1;var e=ei(),t=BF();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,l=e.useMemo,c=e.useDebugValue;return V0.useSyncExternalStoreWithSelector=function(d,h,f,g,w){var x=o(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=l(function(){function v(S){if(!b){if(b=!0,P=S,S=g(S),w!==void 0&&y.hasValue){var _=y.value;if(w(_,S))return k=_}return k=S}if(_=k,r(P,S))return _;var T=g(S);return w!==void 0&&w(_,T)?(P=S,_):(P=S,k=T)}var b=!1,P,k,C=f===void 0?null:f;return[function(){return v(h())},C===null?void 0:function(){return v(C())}]},[h,f,g,w]);var p=i(d,x[0],x[1]);return s(function(){y.hasValue=!0,y.value=p},[p]),c(p),p},V0}var ED;function fie(){return ED||(ED=1,U0.exports=hie()),U0.exports}var pie=fie();const gie=Object.is,Pr=(e,t,n=void 0,r=gie)=>{const i=o=>t(o,n);return pie.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i,r)},mie=HF({memoize:WF,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),MD=new WeakMap,Ln=(...e)=>(n,r)=>{const i=n.cacheKey;let o=MD.get(i);o||(o=new Map,MD.set(i,o));const s=o.get(e);if(s)return s(n,r);const l=mie(...e);return o.set(e,l),l(n,r)},yie=e=>e.id,Ch=Ln(yie,e=>e.treeId);let LD=0;const bie=()=>(LD+=1,`mui-tree-view-${LD}`),em=({id:e,treeId:t="",itemId:n})=>e??`${t}-${n}`,nS=({params:e,store:t})=>{u.useEffect(()=>{t.update(r=>e.id===r.id.providedTreeId&&r.id.treeId!==void 0?r:pt({},r,{id:pt({},r.id,{treeId:e.id??bie()})}))},[t,e.id]);const n=Pr(t,Ch);return{getRootProps:()=>({id:n})}};nS.params={id:!0};nS.getInitialState=({id:e})=>({id:{treeId:void 0,providedTreeId:e}});const vie=[wj,Cj,nS],xie=["apiRef"],wie=e=>{let{props:{apiRef:t},plugins:n}=e,r=og(e.props,xie);const i=u.useMemo(()=>{const l={};return n.forEach(c=>{Object.assign(l,c.params)}),l},[n]),{forwardedProps:o,pluginParams:s}=u.useMemo(()=>{const l={},c={};Object.keys(r).forEach(h=>{const f=r[h];i[h]?l[h]=f:c[h]=f});const d=n.reduce((h,f)=>f.applyDefaultValuesToParams?f.applyDefaultValuesToParams({params:h}):h,l);return{forwardedProps:c,pluginParams:d}},[n,r,i]);return{forwardedProps:o,pluginParams:s,apiRef:t}},Cie=e=>{const{plugins:t,instance:n,publicAPI:r,store:i,rootRef:o}=e,s=u.useCallback(d=>{let h=null,f=null;const g=[],w={};t.forEach(p=>{if(!p.itemPlugin)return;const v=p.itemPlugin({props:d,rootRef:h,contentRef:f});v!=null&&v.rootRef&&(h=v.rootRef),v!=null&&v.contentRef&&(f=v.contentRef),v!=null&&v.propsEnhancers&&(g.push(v.propsEnhancers),Object.keys(v.propsEnhancers).forEach(b=>{w[b]=!0}))});const x=p=>v=>{const b={};return g.forEach(P=>{const k=P[p];k!=null&&Object.assign(b,k(v))}),b},y=Object.fromEntries(Object.keys(w).map(p=>[p,x(p)]));return{contentRef:f,rootRef:h,propsEnhancers:y}},[t]),l=u.useCallback(({itemId:d,children:h,idAttribute:f})=>{let g=h;for(let w=t.length-1;w>=0;w-=1){const x=t[w];x.wrapItem&&(g=x.wrapItem({instance:n,itemId:d,children:g,idAttribute:f}))}return g},[t,n]),c=u.useCallback(({children:d})=>{let h=d;for(let f=t.length-1;f>=0;f-=1){const g=t[f];g.wrapRoot&&(h=g.wrapRoot({children:h}))}return h},[t]);return u.useMemo(()=>({runItemPlugins:s,wrapItem:l,wrapRoot:c,instance:n,publicAPI:r,store:i,rootRef:o}),[s,l,c,n,r,i,o])};class Sie{constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{const r=n(this.value);r!==this.value&&(this.value=r,this.listeners.forEach(i=>i(r)))},this.value=t,this.listeners=new Set}}function Pie(e){return e.current==null&&(e.current={}),e}function kie(e){const t=u.useRef({});return e?Pie(e):t}let $D=0;const _ie=({plugins:e,rootRef:t,props:n})=>{const r=u.useMemo(()=>[...vie,...e],[e]),{pluginParams:i,forwardedProps:o,apiRef:s}=wie({plugins:r,props:n}),c=u.useRef({}).current,d=kie(s),h=u.useRef(null),f=eh(h,t),g=u.useRef(null);if(g.current==null){$D+=1;const v={cacheKey:{id:$D}};r.forEach(b=>{b.getInitialState&&Object.assign(v,b.getInitialState(i))}),g.current=new Sie(v)}const w=Cie({plugins:r,instance:c,publicAPI:d.current,store:g.current,rootRef:h}),x=[],y=v=>{const b=v({instance:c,params:i,rootRef:h,plugins:r,store:g.current});b.getRootProps&&x.push(b.getRootProps),b.publicAPI&&Object.assign(d.current,b.publicAPI),b.instance&&Object.assign(c,b.instance)};return r.forEach(y),{getRootProps:(v={})=>{const b=pt({role:"tree"},o,v,{ref:f});return x.forEach(P=>{Object.assign(b,P(v))}),b},rootRef:f,contextValue:w}},Sj=u.createContext(null),Us=()=>{const e=u.useContext(Sj);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},Pj=u.createContext({classes:{},slots:{},slotProps:{}}),kj=()=>u.useContext(Pj),G0={};function Tie(e){const{contextValue:t,classes:n=G0,slots:r=G0,slotProps:i=G0,children:o}=e,s=u.useMemo(()=>({classes:n,slots:{collapseIcon:r.collapseIcon,expandIcon:r.expandIcon,endIcon:r.endIcon},slotProps:{collapseIcon:i.collapseIcon,expandIcon:i.expandIcon,endIcon:i.endIcon}}),[n,r.collapseIcon,r.expandIcon,r.endIcon,i.collapseIcon,i.expandIcon,i.endIcon]);return Un.jsx(Sj.Provider,{value:t,children:Un.jsx(Pj.Provider,{value:s,children:t.wrapRoot({children:o})})})}const js=typeof window<"u"?u.useLayoutEffect:u.useEffect;function Ka(e){const t=u.useRef(e);return js(()=>{t.current=e}),u.useRef((...n)=>(0,t.current)(...n)).current}const id=(e,t,n)=>{e.$$publishEvent(t,n)},Kl="__TREE_VIEW_ROOT_PARENT_ID__",_j=e=>{const t={};return e.forEach((n,r)=>{t[n]=r}),t},a1=(e,t)=>{if(t==null)return!1;let n=e[t];if(!n)return!1;if(n.disabled)return!0;for(;n.parentId!=null;){if(n=e[n.parentId],!n)return!1;if(n.disabled)return!0}return!1},th=u.createContext(()=>-1),Vs=e=>e.items;Ln(Vs,e=>e.loading);Ln(Vs,e=>e.error);const tm=Ln(Vs,e=>e.itemMetaLookup),Iie=[],Ar=Ln([Vs,(e,t)=>t],(e,t)=>e.itemOrderedChildrenIdsLookup[t??Kl]??Iie),i1=Ln([Vs,(e,t)=>t],(e,t)=>e.itemModelLookup[t]),ca=Ln([tm,(e,t)=>t],(e,t)=>e[t??Kl]??null),Yl=Ln([tm,(e,t)=>t],a1),rS=Ln([Vs,ca],(e,t)=>t==null?-1:e.itemChildrenIndexesLookup[t.parentId??Kl][t.id]),pl=Ln([ca],e=>(e==null?void 0:e.parentId)??null),Oie=Ln([ca],e=>(e==null?void 0:e.depth)??0),Tj=Ln([Vs],e=>e.disabledItemsFocusable),Ts=Ln([Tj,Yl],(e,t)=>e?!0:!t),Aie=(e,t,n)=>{if(e==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(t)].join(`
`));if(n[e]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${e}"`].join(`
`))},o1=({disabledItemsFocusable:e,items:t,isItemDisabled:n,getItemLabel:r,getItemChildren:i,getItemId:o,initialDepth:s=0,initialParentId:l=null,getChildrenCount:c,ignoreChildren:d=!1})=>{const h={},f={},g={[Kl]:[]},w=(y,p,v)=>{const b=o?o(y):y.id;Aie(b,y,h);const P=r?r(y):y.label;if(P==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(y)].join(`
`));const k=i?i(y):y.children;h[b]={id:b,label:P,parentId:v,idAttribute:void 0,expandable:c?c(y)>0:!!(k!=null&&k.length),disabled:n?n(y):!1,depth:p},f[b]=y;const C=v??Kl;g[C]||(g[C]=[]),g[C].push(b),d||k==null||k.forEach(S=>w(S,p+1,b))};t==null||t.forEach(y=>w(y,s,l));const x={};return Object.keys(g).forEach(y=>{x[y]=_j(g[y])}),{disabledItemsFocusable:e,itemMetaLookup:h,itemModelLookup:f,itemOrderedChildrenIdsLookup:g,itemChildrenIndexesLookup:x}},Sh=({instance:e,params:t,store:n})=>{const r=u.useCallback(v=>i1(n.value,v),[n]),i=u.useCallback(v=>{const b=ca(n.value,v);return(b==null?void 0:b.parentId)||null},[n]),o=Ka(v=>{n.update(b=>pt({},b,{items:pt({},b.items,{loading:v})}))}),s=Ka(v=>{n.update(b=>pt({},b,{items:pt({},b.items,{error:v})}))}),l=Ka(({itemId:v,shouldBeDisabled:b})=>{n.update(P=>{if(!P.items.itemMetaLookup[v])return P;const k=pt({},P.items.itemMetaLookup);return k[v]=pt({},k[v],{disabled:b??!k[v].disabled}),pt({},P,{items:pt({},P.items,{itemMetaLookup:k})})})}),c=u.useCallback(()=>{const v=b=>{const P=i1(n.value,b),k=Ar(n.value,b);return k.length>0?P.children=k.map(v):delete P.children,P};return Ar(n.value,null).map(v)},[n]),d=u.useCallback(v=>Ar(n.value,v),[n]),h=v=>{const b=ca(n.value,v);if(b==null)return null;const P=em({treeId:Ch(n.value),itemId:v,id:b.idAttribute});return document.getElementById(P)},f=u.useRef(!1),g=u.useCallback(()=>{f.current=!0},[]),w=u.useCallback(()=>f.current,[]),x=({items:v,parentId:b,depth:P,getChildrenCount:k})=>{if(v){const C=o1({disabledItemsFocusable:t.disabledItemsFocusable,items:v,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel,getItemChildren:t.getItemChildren,getChildrenCount:k,initialDepth:P,initialParentId:b,ignoreChildren:!0});n.update(S=>{let _;return b?_={itemModelLookup:pt({},S.items.itemModelLookup,C.itemModelLookup),itemMetaLookup:pt({},S.items.itemMetaLookup,C.itemMetaLookup),itemOrderedChildrenIdsLookup:pt({},C.itemOrderedChildrenIdsLookup,S.items.itemOrderedChildrenIdsLookup),itemChildrenIndexesLookup:pt({},C.itemChildrenIndexesLookup,S.items.itemChildrenIndexesLookup)}:_={itemModelLookup:C.itemModelLookup,itemMetaLookup:C.itemMetaLookup,itemOrderedChildrenIdsLookup:C.itemOrderedChildrenIdsLookup,itemChildrenIndexesLookup:C.itemChildrenIndexesLookup},Object.values(S.items.itemMetaLookup).forEach(T=>{_.itemMetaLookup[T.id]||id(e,"removeItem",{id:T.id})}),pt({},S,{items:pt({},S.items,_)})})}},y=v=>{n.update(b=>{if(!v)return pt({},b,{items:pt({},b.items,{itemMetaLookup:{},itemOrderedChildrenIdsLookup:{},itemChildrenIndexesLookup:{}})});const P=Object.keys(b.items.itemMetaLookup).reduce((S,_)=>{const T=b.items.itemMetaLookup[_];return T.parentId===v?(id(e,"removeItem",{id:T.id}),S):pt({},S,{[T.id]:T})},{}),k=b.items.itemOrderedChildrenIdsLookup,C=b.items.itemChildrenIndexesLookup;return delete C[v],delete k[v],pt({},b,{items:pt({},b.items,{itemMetaLookup:P,itemOrderedChildrenIdsLookup:k,itemChildrenIndexesLookup:C})})})};u.useEffect(()=>{e.areItemUpdatesPrevented()||n.update(v=>{const b=o1({disabledItemsFocusable:t.disabledItemsFocusable,items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel,getItemChildren:t.getItemChildren});return Object.values(v.items.itemMetaLookup).forEach(P=>{b.itemMetaLookup[P.id]||id(e,"removeItem",{id:P.id})}),pt({},v,{items:pt({},v.items,b)})})},[e,n,t.items,t.disabledItemsFocusable,t.isItemDisabled,t.getItemId,t.getItemLabel,t.getItemChildren]);const p=Ka((v,b)=>{t.onItemClick&&t.onItemClick(v,b)});return{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:r,getItemDOMElement:h,getItemTree:c,getItemOrderedChildrenIds:d,setIsItemDisabled:l,getParentId:i},instance:{getItemDOMElement:h,preventItemUpdates:g,areItemUpdatesPrevented:w,addItems:x,setTreeViewLoading:o,setTreeViewError:s,removeChildren:y,handleItemClick:p}}};Sh.getInitialState=e=>({items:pt({},o1({disabledItemsFocusable:e.disabledItemsFocusable,items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel,getItemChildren:e.getItemChildren}),{loading:!1,error:null})});Sh.applyDefaultValuesToParams=({params:e})=>pt({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});Sh.wrapRoot=({children:e})=>Un.jsx(th.Provider,{value:Oie,children:e});Sh.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemChildren:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const Ij=()=>{},Oj=e=>e.expansion,s1=Ln([Oj],e=>e.expandedItems),Aj=Ln([s1],e=>{const t=new Map;return e.forEach(n=>{t.set(n,!0)}),t}),wi=Ln([Aj,(e,t)=>t],(e,t)=>e.has(t)),nm=Ln([ca],e=>(e==null?void 0:e.expandable)??!1),jD=Ln([Oj],e=>e.expansionTrigger),Dj=({isItemEditable:e,expansionTrigger:t})=>t||(e?"iconContainer":"content"),rm=({instance:e,store:t,params:n})=>{Ij({controlled:n.expandedItems,defaultValue:n.defaultExpandedItems}),js(()=>{t.update(l=>{const c=Dj({isItemEditable:n.isItemEditable,expansionTrigger:n.expansionTrigger});return l.expansion.expansionTrigger===c?l:pt({},l,{expansion:pt({},l.expansion,{expansionTrigger:c})})})},[t,n.isItemEditable,n.expansionTrigger]);const r=(l,c)=>{var d;n.expandedItems===void 0&&t.update(h=>pt({},h,{expansion:pt({},h.expansion,{expandedItems:c})})),(d=n.onExpandedItemsChange)==null||d.call(n,l,c)},i=Ka(({itemId:l,event:c,shouldBeExpanded:d})=>{const h=s1(t.value);let f;d?f=[l].concat(h):f=h.filter(g=>g!==l),n.onItemExpansionToggle&&n.onItemExpansionToggle(c,l,d),r(c,f)}),o=Ka(({itemId:l,event:c=null,shouldBeExpanded:d})=>{const h=wi(t.value,l),f=d??!h;if(h===f)return;const g={isExpansionPrevented:!1,shouldBeExpanded:f,event:c,itemId:l};id(e,"beforeItemToggleExpansion",g),!g.isExpansionPrevented&&e.applyItemExpansion({itemId:l,event:c,shouldBeExpanded:f})}),s=(l,c)=>{const d=ca(t.value,c);if(d==null)return;const f=Ar(t.value,d.parentId).filter(w=>nm(t.value,w)&&!wi(t.value,w)),g=s1(t.value).concat(f);f.length>0&&(n.onItemExpansionToggle&&f.forEach(w=>{n.onItemExpansionToggle(l,w,!0)}),r(l,g))};return js(()=>{const l=n.expandedItems;l!==void 0&&t.update(c=>pt({},c,{expansion:pt({},c.expansion,{expandedItems:l})}))},[t,n.expandedItems]),{publicAPI:{setItemExpansion:o},instance:{setItemExpansion:o,applyItemExpansion:i,expandAllSiblings:s}}},Die=[];rm.applyDefaultValuesToParams=({params:e})=>pt({},e,{defaultExpandedItems:e.defaultExpandedItems??Die});rm.getInitialState=e=>({expansion:{expandedItems:e.expandedItems===void 0?e.defaultExpandedItems:e.expandedItems,expansionTrigger:Dj(e)}});rm.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const l1=(e,t)=>{let n=t.length-1;for(;n>=0&&!Ts(e,t[n]);)n-=1;if(n!==-1)return t[n]},Rj=(e,t)=>{const n=ca(e,t);if(!n)return null;const r=Ar(e,n.parentId),i=rS(e,t);if(i===0)return n.parentId;let o=i-1;for(;!Ts(e,r[o])&&o>=0;)o-=1;if(o===-1)return n.parentId==null?null:Rj(e,n.parentId);let s=r[o],l=l1(e,Ar(e,s));for(;wi(e,s)&&l!=null;)s=l,l=l1(e,Ar(e,s));return s},$f=(e,t)=>{if(wi(e,t)){const r=Ar(e,t).find(i=>Ts(e,i));if(r!=null)return r}let n=ca(e,t);for(;n!=null;){const r=Ar(e,n.parentId),i=rS(e,n.id);if(i<r.length-1){let o=i+1;for(;!Ts(e,r[o])&&o<r.length-1;)o+=1;if(Ts(e,r[o]))return r[o]}n=ca(e,n.parentId)}return null},Ej=e=>{let t=null;for(;t==null||wi(e,t);){const n=Ar(e,t),r=l1(e,n);if(r==null)return t;t=r}return t},rg=e=>Ar(e,null).find(t=>Ts(e,t)),Mj=(e,t,n)=>{if(t===n)return[t,n];const r=ca(e,t),i=ca(e,n);if(!r||!i)return[t,n];if(r.parentId===i.id||i.parentId===r.id)return i.parentId===r.id?[r.id,i.id]:[i.id,r.id];const o=[r.id],s=[i.id];let l=r.parentId,c=i.parentId,d=s.indexOf(l)!==-1,h=o.indexOf(c)!==-1,f=!0,g=!0;for(;!h&&!d;)f&&(o.push(l),d=s.indexOf(l)!==-1,f=l!==null,!d&&f&&(l=pl(e,l))),g&&!d&&(s.push(c),h=o.indexOf(c)!==-1,g=c!==null,!h&&g&&(c=pl(e,c)));const w=d?l:c,x=Ar(e,w),y=o[o.indexOf(w)-1],p=s[s.indexOf(w)-1];return x.indexOf(y)<x.indexOf(p)?[t,n]:[n,t]},Rie=(e,t,n)=>{const r=c=>{if(nm(e,c)&&wi(e,c))return Ar(e,c)[0];let d=ca(e,c);for(;d!=null;){const h=Ar(e,d.parentId),f=rS(e,d.id);if(f<h.length-1)return h[f+1];d=d.parentId?ca(e,d.parentId):null}throw new Error("Invalid range")},[i,o]=Mj(e,t,n),s=[i];let l=i;for(;l!==o;)l=r(l),Yl(e,l)||s.push(l);return s},Eie=e=>{let t=rg(e);const n=[];for(;t!=null;)n.push(t),t=$f(e,t);return n},c1=(e,t)=>t!==e.closest('*[role="treeitem"]'),Ph=e=>e.selection,Lj=Ln([Ph],e=>e.selectedItems),od=Ln([Lj],e=>Array.isArray(e)?e:e!=null?[e]:[]),Mie=Ln([od],e=>{const t=new Map;return e.forEach(n=>{t.set(n,!0)}),t}),Fs=Ln([Mie,(e,t)=>t],(e,t)=>e.has(t)),us=Ln([Ph],e=>e.isEnabled&&e.isMultiSelectEnabled),ag=Ln([Ph],e=>e.isEnabled),$j=Ln([Ph],e=>e.isCheckboxSelectionEnabled),aS=Ln([Yl,ag],(e,t)=>t&&!e),Lie=Ln([Ph],e=>e.selectionPropagation),jf=e=>{const t={};return e.forEach(n=>{t[n]=!0}),t},jj=({store:e,oldModel:t,newModel:n})=>{const r=new Map;return n.forEach(i=>{r.set(i,!0)}),{added:n.filter(i=>!Fs(e.value,i)),removed:t.filter(i=>!r.has(i))}},$ie=({store:e,selectionPropagation:t,newModel:n,oldModel:r,additionalItemsToPropagate:i})=>{if(!t.descendants&&!t.parents)return n;let o=!1;const s=jf(n),l=jj({store:e,newModel:n,oldModel:r});return i==null||i.forEach(c=>{s[c]?l.added.includes(c)||l.added.push(c):l.removed.includes(c)||l.removed.push(c)}),l.added.forEach(c=>{if(t.descendants){const d=h=>{h!==c&&(o=!0,s[h]=!0),Ar(e.value,h).forEach(d)};d(c)}if(t.parents){const d=f=>s[f]?Ar(e.value,f).every(d):!1,h=f=>{const g=pl(e.value,f);if(g==null)return;Ar(e.value,g).every(d)&&(o=!0,s[g]=!0,h(g))};h(c)}}),l.removed.forEach(c=>{if(t.parents){let d=pl(e.value,c);for(;d!=null;)s[d]&&(o=!0,delete s[d]),d=pl(e.value,d)}if(t.descendants){const d=h=>{h!==c&&(o=!0,delete s[h]),Ar(e.value,h).forEach(d)};d(c)}}),o?Object.keys(s):n};function jie(e,t){const n=$j(e),r=aS(e,t);if(Fs(e,t))return{disabled:!r,visible:n,indeterminate:!1,checked:!0};if(Ar(e,t).length===0)return{disabled:!r,visible:n,indeterminate:!1,checked:!1};let o=!1,s=!1;const l=c=>{c!==t&&(Fs(e,c)?o=!0:s=!0),Ar(e,c).forEach(l)};return l(t),{disabled:!r,visible:n,indeterminate:o&&s,checked:Lie(e).parents?o&&!s:!1}}const Fie=({props:e})=>{const{itemId:t}=e,{store:n}=Us(),r=Pr(n,jie,t,qF);return{propsEnhancers:{checkbox:({externalEventHandlers:i,interactions:o})=>pt({tabIndex:-1,onChange:l=>{var c;(c=i.onChange)==null||c.call(i,l),!l.defaultMuiPrevented&&aS(n.value,t)&&o.handleCheckboxSelection(l)}},r)}}},kh=({store:e,params:t})=>{Ij({controlled:t.selectedItems,defaultValue:t.defaultSelectedItems});const n=u.useRef(null),r=u.useRef({}),i=(g,w,x)=>{var b;const y=Lj(e.value);let p;const v=us(e.value);if(v&&(t.selectionPropagation.descendants||t.selectionPropagation.parents)?p=$ie({store:e,selectionPropagation:t.selectionPropagation,newModel:w,oldModel:y,additionalItemsToPropagate:x}):p=w,t.onItemSelectionToggle)if(v){const P=jj({store:e,newModel:p,oldModel:y});t.onItemSelectionToggle&&(P.added.forEach(k=>{t.onItemSelectionToggle(g,k,!0)}),P.removed.forEach(k=>{t.onItemSelectionToggle(g,k,!1)}))}else t.onItemSelectionToggle&&p!==y&&(y!=null&&t.onItemSelectionToggle(g,y,!1),p!=null&&t.onItemSelectionToggle(g,p,!0));t.selectedItems===void 0&&e.update(P=>pt({},P,{selection:pt({},P.selection,{selectedItems:p})})),(b=t.onSelectedItemsChange)==null||b.call(t,g,p)},o=({itemId:g,event:w=null,keepExistingSelection:x=!1,shouldBeSelected:y})=>{if(!ag(e.value))return;let p;const v=us(e.value);if(x){const b=od(e.value),P=Fs(e.value,g);P&&(y===!1||y==null)?p=b.filter(k=>k!==g):!P&&(y===!0||y==null)?p=[g].concat(b):p=b}else y===!1||y==null&&Fs(e.value,g)?p=v?[]:null:p=v?[g]:g;i(w,p,[g]),n.current=g,r.current={}},s=(g,[w,x])=>{if(!us(e.value))return;let p=od(e.value).slice();Object.keys(r.current).length>0&&(p=p.filter(k=>!r.current[k]));const v=jf(p),b=Rie(e.value,w,x),P=b.filter(k=>!v[k]);p=p.concat(P),i(g,p),r.current=jf(b)},l=(g,w)=>{if(n.current!=null){const[x,y]=Mj(e.value,w,n.current);s(g,[x,y])}},c=(g,w)=>{s(g,[rg(e.value),w])},d=(g,w)=>{s(g,[w,Ej(e.value)])},h=g=>{if(!us(e.value))return;const x=Eie(e.value);i(g,x),r.current=jf(x)},f=(g,w,x)=>{if(!us(e.value))return;let p=od(e.value).slice();Object.keys(r.current).length===0?(p.push(x),r.current={[w]:!0,[x]:!0}):(r.current[w]||(r.current={}),r.current[x]?(p=p.filter(v=>v!==w),delete r.current[w]):(p.push(x),r.current[x]=!0)),i(g,p)};return js(()=>{e.update(g=>pt({},g,{selection:{selectedItems:t.selectedItems===void 0?g.selection.selectedItems:t.selectedItems,isEnabled:!t.disableSelection,isMultiSelectEnabled:t.multiSelect,isCheckboxSelectionEnabled:t.checkboxSelection,selectionPropagation:{descendants:t.selectionPropagation.descendants,parents:t.selectionPropagation.parents}}}))},[e,t.selectedItems,t.multiSelect,t.checkboxSelection,t.disableSelection,t.selectionPropagation.descendants,t.selectionPropagation.parents]),{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{setItemSelection:o},instance:{setItemSelection:o,selectAllNavigableItems:h,expandSelectionRange:l,selectRangeFromStartToItem:c,selectRangeFromItemToEnd:d,selectItemFromArrowNavigation:f}}};kh.itemPlugin=Fie;const zie=[],Nie={};kh.applyDefaultValuesToParams=({params:e})=>pt({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?zie:null),selectionPropagation:e.selectionPropagation??Nie});kh.getInitialState=e=>({selection:{selectedItems:e.selectedItems===void 0?e.defaultSelectedItems:e.selectedItems,isEnabled:!e.disableSelection,isMultiSelectEnabled:e.multiSelect,isCheckboxSelectionEnabled:e.checkboxSelection,selectionPropagation:e.selectionPropagation}});kh.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0,selectionPropagation:!0};const FD=1e3;class Bie{constructor(t=FD){this.timeouts=new Map,this.cleanupTimeout=FD,this.cleanupTimeout=t}register(t,n,r){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,i)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Hie{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,r){this.registry.register(t,n,r)}unregister(t){this.registry.unregister(t)}reset(){}}class Wie{}function qie(e){let t=0;return function(r,i,o){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Hie:new Bie);const[s]=u.useState(new Wie),l=u.useRef(null),c=u.useRef(void 0);c.current=o;const d=u.useRef(null);if(!l.current&&c.current){const h=(f,g)=>{var w;g.defaultMuiPrevented||(w=c.current)==null||w.call(c,f,g)};l.current=r.$$subscribeEvent(i,h),t+=1,d.current={cleanupToken:t},e.registry.register(s,()=>{var f;(f=l.current)==null||f.call(l),l.current=null,d.current=null},d.current)}else!c.current&&l.current&&(l.current(),l.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));u.useEffect(()=>{if(!l.current&&c.current){const h=(f,g)=>{var w;g.defaultMuiPrevented||(w=c.current)==null||w.call(c,f,g)};l.current=r.$$subscribeEvent(i,h)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var h;(h=l.current)==null||h.call(l),l.current=null}},[r,i])}}const Uie={registry:null},Vie=qie(Uie),Gie=e=>e.focus,u1=Ln([od,Aj,tm,Tj,e=>Ar(e,null)],(e,t,n,r,i)=>{const o=e.find(l=>{if(!r&&a1(n,l))return!1;const c=n[l];return c&&(c.parentId==null||t.has(c.parentId))});if(o!=null)return o;const s=i.find(l=>r||!a1(n,l));return s??null}),Kie=Ln([u1,(e,t)=>t],(e,t)=>e===t),Ff=Ln(Gie,e=>e.focusedItemId),Yie=Ln([Ff,(e,t)=>t],(e,t)=>e===t),iS=({instance:e,params:t,store:n})=>{const r=Ka(h=>{n.update(f=>Ff(f)===h?f:pt({},f,{focus:pt({},f.focus,{focusedItemId:h})}))}),i=h=>{const f=ca(n.value,h);return f&&(f.parentId==null||wi(n.value,f.parentId))},o=(h,f)=>{const g=e.getItemDOMElement(f);g&&g.focus(),r(f),t.onItemFocus&&t.onItemFocus(h,f)},s=Ka((h,f)=>{i(f)&&o(h,f)}),l=Ka(()=>{const h=Ff(n.value);if(h==null)return;if(ca(n.value,h)){const g=e.getItemDOMElement(h);g&&g.blur()}r(null)});Vie(e,"removeItem",({id:h})=>{const f=Ff(n.value),g=u1(n.value);f===h&&g!=null&&o(null,g)});const c=h=>f=>{var w;if((w=h.onFocus)==null||w.call(h,f),f.defaultMuiPrevented)return;const g=u1(n.value);f.target===f.currentTarget&&g!=null&&o(f,g)},d=h=>f=>{var g;(g=h.onBlur)==null||g.call(h,f),!f.defaultMuiPrevented&&r(null)};return{getRootProps:h=>({onFocus:c(h),onBlur:d(h)}),publicAPI:{focusItem:s},instance:{focusItem:s,removeFocusedItem:l}}};iS.getInitialState=()=>({focus:{focusedItemId:null}});iS.params={onItemFocus:!0};const zf=(e,t)=>e.getAvailablePlugins().has(t),oS=e=>e.label,am=Ln([oS,(e,t)=>i1(e,t)],(e,t)=>!t||!e?!1:typeof e.isItemEditable=="boolean"?e.isItemEditable:e.isItemEditable(t)),sd=Ln([oS,(e,t)=>t],(e,t)=>t?(e==null?void 0:e.editedItemId)===t:!1);Ln(oS,e=>!!(e!=null&&e.editedItemId));const Xie=({props:e})=>{const{store:t}=Us(),{label:n,itemId:r}=e,[i,o]=u.useState(n),s=Pr(t,am,r),l=Pr(t,sd,r);return u.useEffect(()=>{l||o(n)},[l,n]),{propsEnhancers:{label:()=>({editable:s}),labelInput:({externalEventHandlers:c,interactions:d})=>s?{value:i??"","data-element":"labelInput",onChange:w=>{var x;(x=c.onChange)==null||x.call(c,w),o(w.target.value)},onKeyDown:w=>{var y;if((y=c.onKeyDown)==null||y.call(c,w),w.defaultMuiPrevented)return;const x=w.target;w.key==="Enter"&&x.value?d.handleSaveItemLabel(w,x.value):w.key==="Escape"&&d.handleCancelItemLabelEditing(w)},onBlur:w=>{var x;(x=c.onBlur)==null||x.call(c,w),!w.defaultMuiPrevented&&w.target.value&&d.handleSaveItemLabel(w,w.target.value)},autoFocus:!0,type:"text"}:{}}}},Ho=({store:e,params:t})=>{const n=i=>{i!==null&&!am(e.value,i)||e.update(o=>pt({},o,{label:pt({},o.label,{editedItemId:i})}))},r=(i,o)=>{if(!o)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",i].join(`
`));e.update(s=>{const l=s.items.itemMetaLookup[i];return l.label!==o?pt({},s,{items:pt({},s.items,{itemMetaLookup:pt({},s.items.itemMetaLookup,{[i]:pt({},l,{label:o})})})}):s}),t.onItemLabelChange&&t.onItemLabelChange(i,o)};return js(()=>{e.update(i=>pt({},i,{label:pt({},i.label,{isItemEditable:t.isItemEditable})}))},[e,t.isItemEditable]),{instance:{setEditedItem:n,updateItemLabel:r},publicAPI:{setEditedItem:n,updateItemLabel:r}}};Ho.itemPlugin=Xie;Ho.applyDefaultValuesToParams=({params:e})=>pt({},e,{isItemEditable:e.isItemEditable??!1});Ho.getInitialState=e=>({label:{isItemEditable:e.isItemEditable,editedItemId:null}});Ho.params={onItemLabelChange:!0,isItemEditable:!0};function Jie(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Fj=({instance:e,store:t,params:n})=>{const r=UF(),i=u.useRef({}),o=Ka(f=>{i.current=f(i.current)}),s=Pr(t,tm);u.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const f={},g=w=>{f[w.id]=w.label.substring(0,1).toLowerCase()};Object.values(s).forEach(g),i.current=f},[s,n.getItemId,e]);const l=(f,g)=>{const w=g.toLowerCase(),x=b=>{const P=$f(t.value,b);return P===null?rg(t.value):P};let y=null,p=x(f);const v={};for(;y==null&&!v[p];)i.current[p]===w?y=p:(v[p]=!0,p=x(p));return y},c=f=>ag(t.value)&&!Yl(t.value,f),d=f=>!Yl(t.value,f)&&nm(t.value,f);return{instance:{updateFirstCharMap:o,handleItemKeyDown:async(f,g)=>{if(f.defaultMuiPrevented||f.altKey||c1(f.target,f.currentTarget))return;const w=f.ctrlKey||f.metaKey,x=f.key,y=us(t.value);switch(!0){case(x===" "&&c(g)):{f.preventDefault(),y&&f.shiftKey?e.expandSelectionRange(f,g):e.setItemSelection({event:f,itemId:g,keepExistingSelection:y,shouldBeSelected:void 0});break}case x==="Enter":{zf(e,Ho)&&am(t.value,g)&&!sd(t.value,g)?e.setEditedItem(g):d(g)?(e.setItemExpansion({event:f,itemId:g}),f.preventDefault()):c(g)&&(y?(f.preventDefault(),e.setItemSelection({event:f,itemId:g,keepExistingSelection:!0})):Fs(t.value,g)||(e.setItemSelection({event:f,itemId:g}),f.preventDefault()));break}case x==="ArrowDown":{const p=$f(t.value,g);p&&(f.preventDefault(),e.focusItem(f,p),y&&f.shiftKey&&c(p)&&e.selectItemFromArrowNavigation(f,g,p));break}case x==="ArrowUp":{const p=Rj(t.value,g);p&&(f.preventDefault(),e.focusItem(f,p),y&&f.shiftKey&&c(p)&&e.selectItemFromArrowNavigation(f,g,p));break}case(x==="ArrowRight"&&!r||x==="ArrowLeft"&&r):{if(w)return;if(wi(t.value,g)){const p=$f(t.value,g);p&&(e.focusItem(f,p),f.preventDefault())}else d(g)&&(e.setItemExpansion({event:f,itemId:g}),f.preventDefault());break}case(x==="ArrowLeft"&&!r||x==="ArrowRight"&&r):{if(w)return;if(d(g)&&wi(t.value,g))e.setItemExpansion({event:f,itemId:g}),f.preventDefault();else{const p=pl(t.value,g);p&&(e.focusItem(f,p),f.preventDefault())}break}case x==="Home":{c(g)&&y&&w&&f.shiftKey?e.selectRangeFromStartToItem(f,g):e.focusItem(f,rg(t.value)),f.preventDefault();break}case x==="End":{c(g)&&y&&w&&f.shiftKey?e.selectRangeFromItemToEnd(f,g):e.focusItem(f,Ej(t.value)),f.preventDefault();break}case x==="*":{e.expandAllSiblings(f,g),f.preventDefault();break}case(String.fromCharCode(f.keyCode)==="A"&&w&&y&&ag(t.value)):{e.selectAllNavigableItems(f),f.preventDefault();break}case(!w&&!f.shiftKey&&Jie(x)):{const p=l(g,x);p!=null&&(e.focusItem(f,p),f.preventDefault());break}}}}}};Fj.params={};function Qie(e){return e.replace(/["\\]/g,"\\$&")}const zj=u.createContext(null);function Nj(e){const{children:t,itemId:n=null,idAttribute:r}=e,{instance:i,store:o,rootRef:s}=Us(),l=u.useRef(new Map);u.useEffect(()=>{if(!s.current)return;const d=Ar(o.value,n??null)??[],h=Qie(r??s.current.id),f=s.current.querySelectorAll(`${n==null?"":`*[id="${h}"] `}[role="treeitem"]:not(*[id="${h}"] [role="treeitem"] [role="treeitem"])`),g=Array.from(f).map(x=>l.current.get(x.id));(g.length!==d.length||g.some((x,y)=>x!==d[y]))&&i.setJSXItemsOrderedChildrenIds(n??null,g)});const c=u.useMemo(()=>({registerChild:(d,h)=>l.current.set(d,h),unregisterChild:d=>l.current.delete(d),parentId:n}),[n]);return Un.jsx(zj.Provider,{value:c,children:t})}const Zie=e=>e.lazyLoading,eoe=e=>e.lazyLoading,Bj=Ln([Zie],e=>e.dataSource),toe=Ln([eoe],e=>!!(e!=null&&e.enabled)),noe=Ln([Bj,(e,t)=>t],(e,t)=>e.loading[t]||!1),roe=Ln([Bj,(e,t)=>t],(e,t)=>e.errors[t]||null),sS=e=>Array.isArray(e)?e.length>0&&e.some(sS):!!e,aoe=({itemId:e,children:t})=>{const{instance:n,store:r,publicAPI:i}=Us(),o=Pr(r,nm,e),s=Pr(r,toe),l=Pr(r,us),c=Pr(r,I=>s?noe(I,e):!1),d=Pr(r,I=>s?!!roe(I,e):!1),h=sS(t)||o,f=Pr(r,wi,e),g=Pr(r,Yie,e),w=Pr(r,Fs,e),x=Pr(r,Yl,e),y=Pr(r,sd,e),p=Pr(r,am,e),v={expandable:h,expanded:f,focused:g,selected:w,disabled:x,editing:y,editable:p,loading:c,error:d},b=I=>{if(v.disabled)return;v.focused||n.focusItem(I,e);const L=l&&(I.shiftKey||I.ctrlKey||I.metaKey);v.expandable&&!(L&&wi(r.value,e))&&n.setItemExpansion({event:I,itemId:e})},P=I=>{if(v.disabled)return;!v.focused&&!v.editing&&n.focusItem(I,e),l&&(I.shiftKey||I.ctrlKey||I.metaKey)?I.shiftKey?n.expandSelectionRange(I,e):n.setItemSelection({event:I,itemId:e,keepExistingSelection:!0}):n.setItemSelection({event:I,itemId:e,shouldBeSelected:!0})},k=I=>{const L=I.nativeEvent.shiftKey;l&&L?n.expandSelectionRange(I,e):n.setItemSelection({event:I,itemId:e,keepExistingSelection:l,shouldBeSelected:I.target.checked})},C=()=>{zf(n,Ho)&&(y?n.setEditedItem(null):n.setEditedItem(e))};return{interactions:{handleExpansion:b,handleSelection:P,handleCheckboxSelection:k,toggleItemEditing:C,handleSaveItemLabel:(I,L)=>{zf(n,Ho)&&sd(r.value,e)&&(n.updateItemLabel(e,L),C(),n.focusItem(I,e))},handleCancelItemLabelEditing:I=>{zf(n,Ho)&&sd(r.value,e)&&(C(),n.focusItem(I,e))}},status:v,publicAPI:i}},_h=({instance:e,store:t})=>{e.preventItemUpdates();const n=Ka(o=>(t.update(s=>{if(s.items.itemMetaLookup[o.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${o.id}"`].join(`
`));return pt({},s,{items:pt({},s.items,{itemMetaLookup:pt({},s.items.itemMetaLookup,{[o.id]:o}),itemModelLookup:pt({},s.items.itemModelLookup,{[o.id]:{id:o.id,label:o.label??""}})})})}),()=>{t.update(s=>{const l=pt({},s.items.itemMetaLookup),c=pt({},s.items.itemModelLookup);return delete l[o.id],delete c[o.id],pt({},s,{items:pt({},s.items,{itemMetaLookup:l,itemModelLookup:c})})}),id(e,"removeItem",{id:o.id})})),r=(o,s)=>{const l=o??Kl;t.update(c=>pt({},c,{items:pt({},c.items,{itemOrderedChildrenIdsLookup:pt({},c.items.itemOrderedChildrenIdsLookup,{[l]:s}),itemChildrenIndexesLookup:pt({},c.items.itemChildrenIndexesLookup,{[l]:_j(s)})})}))},i=Ka((o,s)=>(e.updateFirstCharMap(l=>(l[o]=s,l)),()=>{e.updateFirstCharMap(l=>{const c=pt({},l);return delete c[o],c})}));return{instance:{insertJSXItem:n,setJSXItemsOrderedChildrenIds:r,mapFirstCharFromJSX:i}}},ioe=({props:e,rootRef:t,contentRef:n})=>{const{instance:r,store:i}=Us(),{children:o,disabled:s=!1,label:l,itemId:c,id:d}=e,h=u.useContext(zj);if(h==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:f,unregisterChild:g,parentId:w}=h,x=sS(o),y=u.useRef(null),p=eh(y,n),v=Pr(i,Ch);return js(()=>{const b=em({itemId:c,treeId:v,id:d});return f(b,c),()=>{g(b),g(b)}},[i,r,f,g,c,d,v]),js(()=>r.insertJSXItem({id:c,idAttribute:d,parentId:w,expandable:x,disabled:s}),[r,w,c,x,s,d]),u.useEffect(()=>{var b;if(l)return r.mapFirstCharFromJSX(c,(((b=y.current)==null?void 0:b.textContent)??"").substring(0,1).toLowerCase())},[r,c,l]),{contentRef:p,rootRef:t}};_h.itemPlugin=ioe;_h.wrapItem=({children:e,itemId:t,idAttribute:n})=>{const r=u.useContext(th);return Un.jsx(Nj,{itemId:t,idAttribute:n,children:Un.jsx(th.Provider,{value:r+1,children:e})})};_h.wrapRoot=({children:e})=>Un.jsx(Nj,{itemId:null,idAttribute:null,children:Un.jsx(th.Provider,{value:0,children:e})});_h.params={};const ooe=[Sh,rm,kh,iS,Fj,_h],soe=["slots","slotProps"],loe=vj(),coe=e=>{const{classes:t}=e;return u.useMemo(()=>bj({root:["root"],item:["item"],itemContent:["itemContent"],itemGroupTransition:["itemGroupTransition"],itemIconContainer:["itemIconContainer"],itemLabel:["itemLabel"],itemCheckbox:["itemCheckbox"]},uie,t),[t])},uoe=Gr("ul",{name:"MuiSimpleTreeView",slot:"Root"})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),doe=[],hoe=u.forwardRef(function(t,n){const r=loe({props:t,name:"MuiSimpleTreeView"}),{slots:i,slotProps:o}=r,s=og(r,soe),{getRootProps:l,contextValue:c}=_ie({plugins:ooe,rootRef:n,props:pt({},s,{items:doe})}),d=coe(r),h=(i==null?void 0:i.root)??uoe,f=qa({elementType:h,externalSlotProps:o==null?void 0:o.root,className:d.root,getSlotProps:l,ownerState:r});return Un.jsx(Tie,{contextValue:c,classes:d,slots:i,slotProps:o,children:Un.jsx(h,pt({},f))})}),foe=e=>{const{runItemPlugins:t,instance:n,publicAPI:r,store:i}=Us(),o=u.useContext(th),s=Pr(i,(...te)=>typeof o=="function"?o(...te):o,e.itemId),{id:l,itemId:c,label:d,children:h,rootRef:f}=e,{rootRef:g,contentRef:w,propsEnhancers:x}=t(e),{interactions:y,status:p}=aoe({itemId:c,children:h}),v=u.useRef(null),b=u.useRef(null),P=eh(f,g,v),k=eh(w,b),C=u.useRef(null),S=Pr(i,Ch),_=Pr(i,aS,c),T=Pr(i,$j),I=em({itemId:c,treeId:S,id:l}),L=Pr(i,Kie,c),A={rootRefObject:v,contentRefObject:b,interactions:y},D=te=>U=>{var V;(V=te.onFocus)==null||V.call(te,U),!U.defaultMuiPrevented&&!p.focused&&Ts(i.value,c)&&U.currentTarget===U.target&&n.focusItem(U,c)},B=te=>U=>{var ae,ne,me,ue,Ae;if((ae=te.onBlur)==null||ae.call(te,U),U.defaultMuiPrevented)return;const V=n.getItemDOMElement(c);p.editing||U.relatedTarget&&c1(U.relatedTarget,V)&&(U.target&&((me=(ne=U.target)==null?void 0:ne.dataset)==null?void 0:me.element)==="labelInput"&&c1(U.target,V)||((Ae=(ue=U.relatedTarget)==null?void 0:ue.dataset)==null?void 0:Ae.element)==="labelInput")||n.removeFocusedItem()},$=te=>U=>{var V,ae,ne;(V=te.onKeyDown)==null||V.call(te,U),!(U.defaultMuiPrevented||((ne=(ae=U.target)==null?void 0:ae.dataset)==null?void 0:ne.element)==="labelInput")&&n.handleItemKeyDown(U,c)},N=te=>U=>{var V;(V=te.onDoubleClick)==null||V.call(te,U),!U.defaultMuiPrevented&&y.toggleItemEditing()},F=te=>U=>{var V,ae;(V=te.onClick)==null||V.call(te,U),n.handleItemClick(U,c),!(U.defaultMuiPrevented||(ae=C.current)!=null&&ae.contains(U.target))&&(jD(i.value)==="content"&&y.handleExpansion(U),T||y.handleSelection(U))},O=te=>U=>{var V;(V=te.onMouseDown)==null||V.call(te,U),!U.defaultMuiPrevented&&(U.shiftKey||U.ctrlKey||U.metaKey||p.disabled)&&U.preventDefault()},R=te=>U=>{var V;(V=te.onClick)==null||V.call(te,U),!U.defaultMuiPrevented&&jD(i.value)==="iconContainer"&&y.handleExpansion(U)};return{getContextProviderProps:()=>({itemId:c,id:l}),getRootProps:(te={})=>{var me;const U=pt({},Wa(e),Wa(te));let V;p.selected?V=!0:_?V=!1:V=void 0;const ae=pt({},U,{ref:P,role:"treeitem",tabIndex:L?0:-1,id:I,"aria-expanded":p.expandable?p.expanded:void 0,"aria-selected":V,"aria-disabled":p.disabled||void 0},te,{style:pt({},te.style??{},{"--TreeView-itemDepth":s}),onFocus:D(U),onBlur:B(U),onKeyDown:$(U)}),ne=((me=x.root)==null?void 0:me.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},ae,ne)},getContentProps:(te={})=>{var ne;const U=Wa(te),V=pt({},U,te,{ref:k,onClick:F(U),onMouseDown:O(U),status:p});["expanded","selected","focused","disabled","editing","editable"].forEach(me=>{p[me]&&(V[`data-${me}`]="")});const ae=((ne=x.content)==null?void 0:ne.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},V,ae)},getGroupTransitionProps:(te={})=>{const U=Wa(te);return pt({},U,{unmountOnExit:!0,component:"ul",role:"group",in:p.expanded,children:h},te)},getIconContainerProps:(te={})=>{const U=Wa(te);return pt({},U,te,{onClick:R(U)})},getCheckboxProps:(te={})=>{var ne;const U=Wa(te),V=pt({},U,{ref:C},te),ae=((ne=x.checkbox)==null?void 0:ne.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},V,ae)},getLabelProps:(te={})=>{var ne;const U=pt({},Wa(te)),V=pt({},U,{children:d},te,{onDoubleClick:N(U)}),ae=((ne=x.label)==null?void 0:ne.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},ae,V)},getLabelInputProps:(te={})=>{var ae;const U=Wa(te),V=((ae=x.labelInput)==null?void 0:ae.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},te,V)},getDragAndDropOverlayProps:(te={})=>{var ae;const U=Wa(te),V=((ae=x.dragAndDropOverlay)==null?void 0:ae.call(x,pt({},A,{externalEventHandlers:U})))??{};return pt({},te,V)},getErrorContainerProps:(te={})=>{const U=Wa(te);return pt({},U,te)},getLoadingContainerProps:(te={})=>{const U=Wa(te);return pt({size:"12px",thickness:6},U,te)},rootRef:P,status:p,publicAPI:r}};function poe(e){return tS("MuiTreeItem",e)}xj("MuiTreeItem",["root","content","groupTransition","iconContainer","label","checkbox","labelInput","dragAndDropOverlay","errorIcon","loadingIcon","expanded","selected","focused","disabled","editable","editing"]);const goe=lE(Un.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),moe=lE(Un.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function yoe(e){const{slots:t,slotProps:n,status:r}=e,{slots:i,slotProps:o}=kj(),s={collapseIcon:(t==null?void 0:t.collapseIcon)??i.collapseIcon??moe,expandIcon:(t==null?void 0:t.expandIcon)??i.expandIcon??goe,endIcon:(t==null?void 0:t.endIcon)??i.endIcon,icon:t==null?void 0:t.icon};let l;s!=null&&s.icon?l="icon":r.expandable?r.expanded?l="collapseIcon":l="expandIcon":l="endIcon";const c=s[l],d=qa({elementType:c,externalSlotProps:h=>pt({},r1(o[l],h),r1(n==null?void 0:n[l],h)),ownerState:{}});return c?Un.jsx(c,pt({},d)):null}const boe=Gr("div",{name:"MuiTreeItemDragAndDropOverlay",slot:"Root",shouldForwardProp:e=>y1.shouldForwardProp(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:Sr(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function voe(e){return e.action==null?null:Un.jsx(boe,pt({},e))}function xoe(e){const{children:t,itemId:n,id:r}=e,{wrapItem:i,instance:o,store:s}=Us(),l=Pr(s,Ch),c=em({itemId:n,treeId:l,id:r});return Un.jsx(u.Fragment,{children:i({children:t,itemId:n,instance:o,idAttribute:c})})}const woe=Gr("input",{name:"MuiTreeItem",slot:"LabelInput"})(({theme:e})=>pt({},e.typography.body1,{width:"100%",backgroundColor:(e.vars||e).palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${(e.vars||e).palette.primary.main}`}})),Coe=["visible"],Soe=["id","itemId","label","disabled","children","slots","slotProps","classes"],Poe=vj(),koe=Gr("li",{name:"MuiTreeItem",slot:"Root"})({listStyle:"none",margin:0,padding:0,outline:0}),_oe=Gr("div",{name:"MuiTreeItem",slot:"Content",shouldForwardProp:e=>y1.shouldForwardProp(e)&&e!=="status"})(({theme:e})=>({padding:e.spacing(.5,1),paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`,borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&[data-disabled]":{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},"&[data-focused]":{backgroundColor:(e.vars||e).palette.action.focus},"&[data-selected]":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Sr(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Sr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Sr(e.palette.primary.main,e.palette.action.selectedOpacity)}}},"&[data-selected][data-focused]":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Sr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}})),Toe=Gr("div",{name:"MuiTreeItem",slot:"Label",shouldForwardProp:e=>y1.shouldForwardProp(e)&&e!=="editable"})(({theme:e})=>pt({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative",overflow:"hidden"},e.typography.body1,{variants:[{props:({editable:t})=>t,style:{paddingLeft:"2px"}}]})),Ioe=Gr("div",{name:"MuiTreeItem",slot:"IconContainer"})({width:16,display:"flex",flexShrink:0,justifyContent:"center",position:"relative","& svg":{fontSize:18}}),Ooe=Gr(Is,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition})({margin:0,padding:0}),Aoe=Gr("div",{name:"MuiTreeItem",slot:"ErrorIcon"})({position:"absolute",right:-3,width:7,height:7,borderRadius:"50%",backgroundColor:"red"}),Doe=Gr(ir,{name:"MuiTreeItem",slot:"LoadingIcon"})({color:"text.primary"}),Roe=Gr(u.forwardRef((e,t)=>{const{visible:n}=e,r=og(e,Coe);return n?Un.jsx(gr,pt({},r,{ref:t})):null}),{name:"MuiTreeItem",slot:"Checkbox"})({padding:0}),Eoe=e=>{const{classes:t}=kj(),n=pt({},e,{root:wn(e==null?void 0:e.root,t.root),content:wn(e==null?void 0:e.content,t.itemContent),iconContainer:wn(e==null?void 0:e.iconContainer,t.itemIconContainer),checkbox:wn(e==null?void 0:e.checkbox,t.itemCheckbox),label:wn(e==null?void 0:e.label,t.itemLabel),groupTransition:wn(e==null?void 0:e.groupTransition,t.itemGroupTransition),labelInput:wn(e==null?void 0:e.labelInput,t.itemLabelInput),dragAndDropOverlay:wn(e==null?void 0:e.dragAndDropOverlay,t.itemDragAndDropOverlay),errorIcon:wn(e==null?void 0:e.errorIcon,t.itemErrorIcon),loadingIcon:wn(e==null?void 0:e.loadingIcon,t.itemLoadingIcon)});return bj({root:["root"],content:["content"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],groupTransition:["groupTransition"],labelInput:["labelInput"],dragAndDropOverlay:["dragAndDropOverlay"],errorIcon:["errorIcon"],loadingIcon:["loadingIcon"],expanded:["expanded"],editing:["editing"],editable:["editable"],selected:["selected"],focused:["focused"],disabled:["disabled"]},poe,n)},Moe=u.forwardRef(function(t,n){const r=Poe({props:t,name:"MuiTreeItem"}),{id:i,itemId:o,label:s,disabled:l,children:c,slots:d={},slotProps:h={},classes:f}=r,g=og(r,Soe),{getContextProviderProps:w,getRootProps:x,getContentProps:y,getIconContainerProps:p,getCheckboxProps:v,getLabelProps:b,getGroupTransitionProps:P,getLabelInputProps:k,getDragAndDropOverlayProps:C,getErrorContainerProps:S,getLoadingContainerProps:_,status:T}=foe({id:i,itemId:o,children:c,label:s,disabled:l}),I=Eoe(f),L=d.root??koe,A=qa({elementType:L,getSlotProps:x,externalForwardedProps:g,externalSlotProps:h.root,additionalProps:{ref:n},ownerState:{},className:I.root}),D=d.content??_oe,B=qa({elementType:D,getSlotProps:y,externalSlotProps:h.content,ownerState:{},className:wn(I.content,T.expanded&&I.expanded,T.selected&&I.selected,T.focused&&I.focused,T.disabled&&I.disabled,T.editing&&I.editing,T.editable&&I.editable)}),$=d.iconContainer??Ioe,N=qa({elementType:$,getSlotProps:p,externalSlotProps:h.iconContainer,ownerState:{},className:I.iconContainer}),F=d.label??Toe,O=qa({elementType:F,getSlotProps:b,externalSlotProps:h.label,ownerState:{},className:I.label}),R=d.checkbox??Roe,E=qa({elementType:R,getSlotProps:v,externalSlotProps:h.checkbox,ownerState:{},className:I.checkbox}),z=d.groupTransition??void 0,q=qa({elementType:z,getSlotProps:P,externalSlotProps:h.groupTransition,ownerState:{},className:I.groupTransition}),X=d.labelInput??woe,H=qa({elementType:X,getSlotProps:k,externalSlotProps:h.labelInput,ownerState:{},className:I.labelInput}),K=d.dragAndDropOverlay??voe,ee=qa({elementType:K,getSlotProps:C,externalSlotProps:h.dragAndDropOverlay,ownerState:{},className:I.dragAndDropOverlay}),ge=d.errorIcon??Aoe,oe=qa({elementType:ge,getSlotProps:S,externalSlotProps:h.errorIcon,ownerState:{},className:I.errorIcon}),G=d.loadingIcon??Doe,Q=qa({elementType:G,getSlotProps:_,externalSlotProps:h.loadingIcon,ownerState:{},className:I.loadingIcon});return Un.jsx(xoe,pt({},w(),{children:Un.jsxs(L,pt({},A,{children:[Un.jsxs(D,pt({},B,{children:[Un.jsxs($,pt({},N,{children:[T.error&&Un.jsx(ge,pt({},oe)),T.loading?Un.jsx(G,pt({},Q)):Un.jsx(yoe,{status:T,slots:d,slotProps:h})]})),Un.jsx(R,pt({},E)),T.editing?Un.jsx(X,pt({},H)):Un.jsx(F,pt({},O)),Un.jsx(K,pt({},ee))]})),c&&Un.jsx(Ooe,pt({as:z},q))]}))}))}),Loe=({selectedAgent:e,formatCurrency:t})=>{const{types:n}=yo(),[r,i]=u.useState(null),[o,s]=u.useState([]),[l,c]=u.useState(null),[d,h]=u.useState(!1),[f,g]=u.useState(null),w=async()=>{var b,P,k,C,S,_,T,I,L;if(!(e!=null&&e.id)){JSON.stringify(e,null,2),g("회원 정보가 올바르지 않습니다."),h(!1);return}h(!0),g(null);try{e.id;const A=await Pe.members.getChildren(e.id),D=((b=A.data)==null?void 0:b.data)||A.data||[],B=O=>{var E;const R={name:O.agent_level_name||"",label:O.agent_level_label||"",backgroundColor:O.agent_level_bg_color||O.backgroundColor||"#f5f5f5",borderColor:O.agent_level_border_color||O.borderColor||"#666"};return{id:String(O.id),name:O.username,nickname:O.nickname,level:O.agent_level_id,typeInfo:R,stats:{totalMembers:O.total_members||O.totalMembers||0,activeMembers:O.active_members||O.activeMembers||0,totalDeposit:O.total_deposit||O.totalDeposit||O.deposit||0,totalWithdraw:O.total_withdraw||O.totalWithdraw||O.withdrawal||0,profit:O.profit||((E=O.profitLoss)==null?void 0:E.total)||0,commission:O.commission||O.rollingAmount||0,balance:O.balance||0,holding_money:O.holding_money||O.gameMoney||0},childrenCount:0,children:[]}},$=B(e),N=async(O,R)=>{var E;try{const z=await Pe.members.getChildren(R.id),q=((E=z.data)==null?void 0:E.data)||z.data||[];for(const X of q){const H=B(X);O.children.push(H),await N(H,X)}}catch(z){`${R.id}`}};$.children=D.map(O=>B(O)),$.childrenCount=D.length;for(let O=0;O<$.children.length;O++){const R=$.children[O],E=D[O];await N(R,E)}const F=O=>{let R=O.children.length;for(const E of O.children)R+=F(E);return O.stats.totalMembers=R,O.childrenCount=O.children.length,R};F($),$.children.length,c($),s([$.id])}catch(A){console.error("Failed to load member hierarchy:",A),console.error("Error details:",{message:A.message,status:(P=A.response)==null?void 0:P.status,statusText:(k=A.response)==null?void 0:k.statusText,data:(C=A.response)==null?void 0:C.data,config:A.config,requestURL:(S=A.config)==null?void 0:S.url,errorResponse:(T=(_=A.response)==null?void 0:_.data)==null?void 0:T.error}),((I=A.response)==null?void 0:I.status)===404?g("회원의 하위 조직 정보를 찾을 수 없습니다."):((L=A.response)==null?void 0:L.status)===401?g("권한이 없습니다. 다시 로그인해주세요."):A.code==="ERR_NETWORK"?g("네트워크 연결 오류가 발생했습니다."):g("회원 계층 정보를 불러오는데 실패했습니다.")}finally{h(!1)}};u.useEffect(()=>{n&&Object.keys(n).length>0&&e&&w()},[e,n]);const x=(b,P)=>{s(P)},y=(b,P)=>{const k=(C,S)=>{if(C.id===S)return C;for(const _ of C.children){const T=k(_,S);if(T)return T}return null};if(l&&P){const C=Array.isArray(P)?P[0]:P,S=k(l,C);i(S)}},p=b=>{const P=b.typeInfo||{label:"일반",color:"#666",backgroundColor:"#f5f5f5",borderColor:"#ccc"};return a(Moe,{itemId:b.id,label:m(j,{sx:{display:"flex",alignItems:"center",py:1},children:[a(Vf,{sx:{width:24,height:24,mr:1,fontSize:"0.75rem"},children:b.name.charAt(0)}),m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:500},children:b.name}),b.nickname&&m(M,{variant:"caption",color:"text.secondary",children:["(",b.nickname,")"]})]}),a(ut,{label:P.name||P.label||"일반",size:"small",sx:{backgroundColor:`${P.backgroundColor||P.bgColor||"#f5f5f5"} !important`,color:`${P.borderColor||P.color||"#666"} !important`,border:`1px solid ${P.borderColor||P.color||"#666"} !important`,fontSize:"0.7rem",height:20,mr:1,fontWeight:400,"& .MuiChip-label":{color:`${P.borderColor||P.color||"#666"} !important`}}}),m(M,{variant:"caption",color:"text.secondary",children:["(하위: ",b.stats.totalMembers,"명)"]})]}),children:b.children.map(k=>p(k))},b.id)},v=b=>{if(!b)return null;const P=b.typeInfo||{label:"일반",color:"#666",backgroundColor:"#f5f5f5",borderColor:"#ccc"};return a(Sn,{elevation:2,children:m(In,{children:[m(j,{sx:{display:"flex",alignItems:"center",mb:2},children:[a(Vf,{sx:{width:40,height:40,mr:2},children:b.name.charAt(0)}),m(j,{children:[m(j,{children:[a(M,{variant:"h6",children:b.name}),b.nickname&&a(M,{variant:"body2",color:"text.secondary",children:b.nickname})]}),a(ut,{label:P.name||P.label||"일반",size:"small",sx:{backgroundColor:`${P.backgroundColor||P.bgColor||"#f5f5f5"} !important`,color:`${P.borderColor||P.color||"#666"} !important`,border:`1px solid ${P.borderColor||P.color||"#666"} !important`,fontSize:"0.8rem",fontWeight:400,"& .MuiChip-label":{color:`${P.borderColor||P.color||"#666"} !important`}}})]})]}),a(yn,{sx:{my:2}}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:m(xi,{dense:!0,children:[m(Oa,{children:[a(ur,{children:a(VF,{fontSize:"small"})}),a(_r,{primary:"하위 회원수",secondary:`${b.stats.totalMembers}명`})]}),m(Oa,{children:[a(ur,{children:a(ba,{fontSize:"small"})}),a(_r,{primary:"직계 자식수",secondary:`${b.childrenCount||b.children.length}명`})]}),m(Oa,{children:[a(ur,{children:a(b1,{fontSize:"small"})}),a(_r,{primary:"하위 조직",secondary:`${b.children.length}개`})]})]})}),a(W,{item:!0,xs:12,sm:6,children:m(xi,{dense:!0,children:[m(Oa,{children:[a(ur,{children:a(nx,{fontSize:"small"})}),a(_r,{primary:"총 입금액",secondary:t?`${t(b.stats.totalDeposit)}원`:`${b.stats.totalDeposit}원`})]}),m(Oa,{children:[a(ur,{children:a(nx,{fontSize:"small"})}),a(_r,{primary:"총 출금액",secondary:t?`${t(b.stats.totalWithdraw)}원`:`${b.stats.totalWithdraw}원`})]}),m(Oa,{children:[a(ur,{children:a(GF,{fontSize:"small"})}),a(_r,{primary:"수익",secondary:m(M,{variant:"body2",color:b.stats.profit>=0?"success.main":"error.main",children:[t?`${t(Math.abs(b.stats.profit))}원`:`${Math.abs(b.stats.profit)}원`,b.stats.profit>=0?" 수익":" 손실"]})})]})]})})]}),a(yn,{sx:{my:2}}),a(j,{sx:{textAlign:"center"},children:m(M,{variant:"body2",color:"text.secondary",children:["커미션: ",t?`${t(b.stats.commission)}원`:`${b.stats.commission}원`]})})]})})};return d?a(j,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center"},children:a(ir,{})}):f?a(j,{sx:{p:3},children:a(Jt,{severity:"error",children:f})}):l?m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"조직 구조"}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:1,sx:{p:2,height:600,overflow:"auto"},children:[a(M,{variant:"subtitle1",gutterBottom:!0,children:"조직 트리"}),a(hoe,{slots:{collapseIcon:Oo,expandIcon:cE},expandedItems:o,selectedItems:r!=null&&r.id?[r.id]:[],onExpandedItemsChange:x,onSelectedItemsChange:y,sx:{flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:p(l)})]})}),a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:1,sx:{p:2,height:600,overflow:"auto"},children:[a(M,{variant:"subtitle1",gutterBottom:!0,children:"선택된 에이전트 정보"}),r?v(r):a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"80%",color:"text.secondary"},children:a(M,{children:"트리에서 에이전트를 선택하세요"})})]})})]})]}):a(j,{sx:{p:3},children:a(Jt,{severity:"info",children:"회원 계층 정보를 불러오는 중입니다..."})})};var ff={exports:{}},zD;function $oe(){return zD||(zD=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(c,d){switch(c){case"P":return d.date({width:"short"});case"PP":return d.date({width:"medium"});case"PPP":return d.date({width:"long"});case"PPPP":default:return d.date({width:"full"})}},r=function(c,d){switch(c){case"p":return d.time({width:"short"});case"pp":return d.time({width:"medium"});case"ppp":return d.time({width:"long"});case"pppp":default:return d.time({width:"full"})}},i=function(c,d){var h=c.match(/(P+)(p+)?/)||[],f=h[1],g=h[2];if(!g)return n(c,d);var w;switch(f){case"P":w=d.dateTime({width:"short"});break;case"PP":w=d.dateTime({width:"medium"});break;case"PPP":w=d.dateTime({width:"long"});break;case"PPPP":default:w=d.dateTime({width:"full"});break}return w.replace("{{date}}",n(f,d)).replace("{{time}}",r(g,d))},o={p:r,P:i},s=o;t.default=s,e.exports=t.default}(ff,ff.exports)),ff.exports}var joe=$oe();const Foe=vt(joe),zoe={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Noe={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Boe{constructor(t){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=zoe,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=o=>typeof o>"u"?new Date:o===null?null:new Date(o),this.dateWithTimezone=o=>this.date(o),this.getTimezone=()=>"default",this.setTimezone=o=>o,this.toJsDate=o=>o,this.getCurrentLocaleCode=()=>{var o;return((o=this.locale)==null?void 0:o.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>this.locale?/a/.test(this.locale.formatLong.time({width:"short"})):!0,this.expandFormat=o=>{const s=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return o.match(s).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.getFormatHelperText=o=>this.expandFormat(o).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=o=>o===null,this.formatNumber=o=>o,this.getMeridiemText=o=>o==="am"?"AM":"PM";const{locale:n,formats:r,longFormatters:i}=t;this.locale=n,this.formats=pt({},Noe,r),this.longFormatters=i}}class Go extends Boe{constructor({locale:t,formats:n}={}){if(typeof dm!="function")throw new Error(["MUI: The `date-fns` package v3.x is not compatible with this adapter.","Please, install v2.x of the package or use the `AdapterDateFnsV3` instead."].join(`
`));super({locale:t??Iz,formats:n,longFormatters:Foe}),this.parseISO=r=>nl(r),this.toISO=r=>Oz(r,{format:"extended"}),this.parse=(r,i)=>r===""?null:Az(r,i,new Date,{locale:this.locale}),this.isValid=r=>Dz(this.date(r)),this.format=(r,i)=>this.formatByString(r,this.formats[i]),this.formatByString=(r,i)=>rl(r,i,{locale:this.locale}),this.getDiff=(r,i,o)=>{switch(o){case"years":return Nz(r,this.date(i));case"quarters":return zz(r,this.date(i));case"months":return Fz(r,this.date(i));case"weeks":return jz(r,this.date(i));case"days":return $z(r,this.date(i));case"hours":return Lz(r,this.date(i));case"minutes":return Mz(r,this.date(i));case"seconds":return Ez(r,this.date(i));default:return Rz(r,this.date(i))}},this.isEqual=(r,i)=>r===null&&i===null?!0:Bz(r,i),this.isSameYear=(r,i)=>Hz(r,i),this.isSameMonth=(r,i)=>Wz(r,i),this.isSameDay=(r,i)=>qz(r,i),this.isSameHour=(r,i)=>Uz(r,i),this.isAfter=(r,i)=>hm(r,i),this.isAfterYear=(r,i)=>hm(r,fm(i)),this.isAfterDay=(r,i)=>hm(r,DS(i)),this.isBefore=(r,i)=>uc(r,i),this.isBeforeYear=(r,i)=>uc(r,Dh(i)),this.isBeforeDay=(r,i)=>uc(r,RS(i)),this.isWithinRange=(r,[i,o])=>Vz(r,{start:i,end:o}),this.startOfYear=r=>Dh(r),this.startOfMonth=r=>ES(r),this.startOfWeek=r=>pm(r,{locale:this.locale}),this.startOfDay=r=>RS(r),this.endOfYear=r=>fm(r),this.endOfMonth=r=>MS(r),this.endOfWeek=r=>gm(r,{locale:this.locale}),this.endOfDay=r=>DS(r),this.addYears=(r,i)=>LS(r,i),this.addMonths=(r,i)=>mm(r,i),this.addWeeks=(r,i)=>Gz(r,i),this.addDays=(r,i)=>dm(r,i),this.addHours=(r,i)=>Kz(r,i),this.addMinutes=(r,i)=>Yz(r,i),this.addSeconds=(r,i)=>Xz(r,i),this.getYear=r=>Jz(r),this.getMonth=r=>Qz(r),this.getDate=r=>Zz(r),this.getHours=r=>e3(r),this.getMinutes=r=>t3(r),this.getSeconds=r=>n3(r),this.getMilliseconds=r=>r3(r),this.setYear=(r,i)=>a3(r,i),this.setMonth=(r,i)=>i3(r,i),this.setDate=(r,i)=>o3(r,i),this.setHours=(r,i)=>s3(r,i),this.setMinutes=(r,i)=>l3(r,i),this.setSeconds=(r,i)=>c3(r,i),this.setMilliseconds=(r,i)=>u3(r,i),this.getDaysInMonth=r=>d3(r),this.getNextMonth=r=>mm(r,1),this.getPreviousMonth=r=>mm(r,-1),this.getMonthArray=r=>{const o=[Dh(r)];for(;o.length<12;){const s=o[o.length-1];o.push(this.getNextMonth(s))}return o},this.mergeDateAndTime=(r,i)=>this.setSeconds(this.setMinutes(this.setHours(r,this.getHours(i)),this.getMinutes(i)),this.getSeconds(i)),this.getWeekdays=()=>{const r=new Date;return h3({start:pm(r,{locale:this.locale}),end:gm(r,{locale:this.locale})}).map(i=>this.formatByString(i,"EEEEEE"))},this.getWeekArray=r=>{const i=pm(ES(r),{locale:this.locale}),o=gm(MS(r),{locale:this.locale});let s=0,l=i;const c=[];for(;uc(l,o);){const d=Math.floor(s/7);c[d]=c[d]||[],c[d].push(l),l=dm(l,1),s+=1}return c},this.getWeekNumber=r=>f3(r,{locale:this.locale}),this.getYearRange=(r,i)=>{const o=Dh(r),s=fm(i),l=[];let c=o;for(;uc(c,s);)l.push(c),c=LS(c,1);return l}}}var lu={},ND;function Hoe(){if(ND)return lu;ND=1;var e=ln();Object.defineProperty(lu,"__esModule",{value:!0}),lu.default=void 0;var t=e(un()),n=cn();return lu.default=(0,t.default)((0,n.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),lu}var Woe=Hoe();const lS=vt(Woe);var cu={},BD;function qoe(){if(BD)return cu;BD=1;var e=ln();Object.defineProperty(cu,"__esModule",{value:!0}),cu.default=void 0;var t=e(un()),n=cn();return cu.default=(0,t.default)((0,n.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown"),cu}var Uoe=qoe();const cS=vt(Uoe);var uu={},HD;function Voe(){if(HD)return uu;HD=1;var e=ln();Object.defineProperty(uu,"__esModule",{value:!0}),uu.default=void 0;var t=e(un()),n=cn();return uu.default=(0,t.default)((0,n.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance"),uu}var Goe=Voe();const Hj=vt(Goe);var Koe={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},Yoe=function(t,n,r){var i,o=Koe[t];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?i+" 후":i+" 전":i},Xoe={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},Joe={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Qoe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Zoe={date:ym({formats:Xoe,defaultWidth:"full"}),time:ym({formats:Joe,defaultWidth:"full"}),dateTime:ym({formats:Qoe,defaultWidth:"full"})},ese={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},tse=function(t,n,r,i){return ese[t]},nse={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},rse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},ase={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},ise={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},ose={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},sse={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},lse=function(t,n){var r=Number(t),i=String(n==null?void 0:n.unit);switch(i){case"minute":case"second":return String(r);case"date":return r+"일";default:return r+"번째"}},cse={ordinalNumber:lse,era:dc({values:nse,defaultWidth:"wide"}),quarter:dc({values:rse,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:dc({values:ase,defaultWidth:"wide"}),day:dc({values:ise,defaultWidth:"wide"}),dayPeriod:dc({values:ose,defaultWidth:"wide",formattingValues:sse,defaultFormattingWidth:"wide"})},use=/^(\d+)(일|번째)?/i,dse=/\d+/i,hse={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},fse={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},pse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},gse={any:[/1/i,/2/i,/3/i,/4/i]},mse={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},yse={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},bse={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},vse={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},xse={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},wse={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},Cse={ordinalNumber:p3({matchPattern:use,parsePattern:dse,valueCallback:function(t){return parseInt(t,10)}}),era:hc({matchPatterns:hse,defaultMatchWidth:"wide",parsePatterns:fse,defaultParseWidth:"any"}),quarter:hc({matchPatterns:pse,defaultMatchWidth:"wide",parsePatterns:gse,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:hc({matchPatterns:mse,defaultMatchWidth:"wide",parsePatterns:yse,defaultParseWidth:"any"}),day:hc({matchPatterns:bse,defaultMatchWidth:"wide",parsePatterns:vse,defaultParseWidth:"any"}),dayPeriod:hc({matchPatterns:xse,defaultMatchWidth:"any",parsePatterns:wse,defaultParseWidth:"any"})},Ko={code:"ko",formatDistance:Yoe,formatLong:Zoe,formatRelative:tse,localize:cse,match:Cse,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Sse=({selectedAgent:e,formatCurrency:t})=>{const[n,r]=u.useState(0),[i,o]=u.useState(10),[s,l]=u.useState(""),[c,d]=u.useState(null),[h,f]=u.useState(null),[g,w]=u.useState("daily"),[x,y]=u.useState("all"),p=(T,I)=>{r(I)},v=T=>{o(parseInt(T.target.value,10)),r(0)},b=T=>{w(T);const I=new Date;let L=new Date;switch(T){case"daily":L=new Date(I.getFullYear(),I.getMonth(),I.getDate());break;case"weekly":const A=I.getDay();L=new Date(I.getFullYear(),I.getMonth(),I.getDate()-A);break;case"monthly":L=new Date(I.getFullYear(),I.getMonth(),1);break}d(L),f(I)},P=()=>{r(0)},C=[...Array(10)].map((T,I)=>{const L=new Date;L.setDate(L.getDate()-I);const A=["슬롯","카지노","스포츠","미니게임"],D=A[Math.floor(Math.random()*A.length)],B=Math.floor(Math.random()*5e6),$=(Math.random()*2).toFixed(2),N=Math.floor(B*($/100));return{id:`rolling-${I+1}`,date:L,gameType:D,bettingAmount:B,rollingRate:parseFloat($),rollingAmount:N,status:Math.random()>.2?"지급완료":"대기중",paymentDate:Math.random()>.2?new Date(L.getTime()+1440*60*1e3):null}}),_=(()=>{const T=C.reduce((D,B)=>D+B.bettingAmount,0),I=C.reduce((D,B)=>D+B.rollingAmount,0),L=C.filter(D=>D.status==="지급완료").length,A=C.filter(D=>D.status==="대기중").length;return{totalBetting:T,totalRolling:I,completedCount:L,pendingCount:A,averageRate:C.length>0?(I/T*100).toFixed(2):0}})();return m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"롤링/정산 내역"}),m(W,{container:!0,spacing:2,sx:{mb:3},children:[a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(lS,{color:"primary",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"primary",children:[t?t(_.totalBetting):_.totalBetting,"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 베팅금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(Hj,{color:"success",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"success.main",children:[t?t(((e==null?void 0:e.rolling_slot_amount)||0)+((e==null?void 0:e.rolling_casino_amount)||0)):((e==null?void 0:e.rolling_slot_amount)||0)+((e==null?void 0:e.rolling_casino_amount)||0),"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 롤링금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(cS,{color:"warning",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"warning.main",children:[_.averageRate,"%"]}),a(M,{variant:"body2",color:"text.secondary",children:"평균 롤링율"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[m(j,{sx:{display:"flex",justifyContent:"center",gap:1,mb:1},children:[a(ut,{label:`완료: ${_.completedCount}`,color:"success",size:"small"}),a(ut,{label:`대기: ${_.pendingCount}`,color:"warning",size:"small"})]}),a(M,{variant:"body2",color:"text.secondary",children:"처리 현황"})]})})})]}),m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,md:3,children:a($e,{fullWidth:!0,size:"small",placeholder:"검색어 입력",value:s,onChange:T=>l(T.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:a(Ct,{onClick:P,edge:"end",children:a(Bo,{})})})}})}),a(W,{item:!0,xs:12,md:2,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{children:"게임 유형"}),m(an,{value:x,label:"게임 유형",onChange:T=>y(T.target.value),children:[a(Me,{value:"all",children:"전체"}),a(Me,{value:"슬롯",children:"슬롯"}),a(Me,{value:"카지노",children:"카지노"}),a(Me,{value:"스포츠",children:"스포츠"}),a(Me,{value:"미니게임",children:"미니게임"})]})]})}),a(W,{item:!0,xs:12,md:5,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[a(Ja,{label:"시작일",value:c,onChange:d,slotProps:{textField:{size:"small"}}}),a(j,{sx:{mx:1},children:"~"}),a(Ja,{label:"종료일",value:h,onChange:f,slotProps:{textField:{size:"small"}}}),a(Se,{variant:"contained",size:"small",sx:{ml:1},onClick:P,children:"검색"})]})})}),a(W,{item:!0,xs:12,md:2,children:m(ih,{variant:"outlined",size:"small",fullWidth:!0,children:[a(Se,{onClick:()=>b("daily"),variant:g==="daily"?"contained":"outlined",children:"일별"}),a(Se,{onClick:()=>b("weekly"),variant:g==="weekly"?"contained":"outlined",children:"주별"}),a(Se,{onClick:()=>b("monthly"),variant:g==="monthly"?"contained":"outlined",children:"월별"})]})})]})}),a(wa,{children:m(va,{size:"small",children:[a(pa,{children:m(mn,{sx:{bgcolor:"#f5f5f5"},children:[a(ye,{align:"center",sx:{fontWeight:"bold"},children:"날짜"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"게임유형"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"베팅금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"롤링율"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"롤링금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"상태"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"지급일"})]})}),a(xa,{children:C.map(T=>m(mn,{hover:!0,children:[a(ye,{align:"center",children:T.date.toLocaleDateString()}),a(ye,{align:"center",children:a(ut,{label:T.gameType,size:"small",color:T.gameType==="슬롯"?"primary":T.gameType==="카지노"?"secondary":T.gameType==="스포츠"?"success":"warning"})}),m(ye,{align:"center",children:[t?t(T.bettingAmount):T.bettingAmount," 원"]}),m(ye,{align:"center",children:[T.rollingRate,"%"]}),m(ye,{align:"center",sx:{fontWeight:"medium",color:"success.main"},children:[t?t(T.rollingAmount):T.rollingAmount," 원"]}),a(ye,{align:"center",children:a(ut,{label:T.status,size:"small",color:T.status==="지급완료"?"success":"warning"})}),a(ye,{align:"center",children:T.paymentDate?T.paymentDate.toLocaleDateString():"-"})]},T.id))})]})}),a(oh,{component:"div",count:100,page:n,onPageChange:p,rowsPerPage:i,onRowsPerPageChange:v,labelRowsPerPage:"행 수:",labelDisplayedRows:({from:T,to:I,count:L})=>`${T}-${I} / ${L}`,rowsPerPageOptions:[10,25,50]})]})]})},Pse=({selectedAgent:e,formatCurrency:t})=>{const[n,r]=u.useState(0),[i,o]=u.useState(10),[s,l]=u.useState(""),[c,d]=u.useState(null),[h,f]=u.useState(null),[g,w]=u.useState("daily"),[x,y]=u.useState("all"),[p,v]=u.useState("all"),b=(L,A)=>{r(A)},P=L=>{o(parseInt(L.target.value,10)),r(0)},k=L=>{w(L);const A=new Date;let D=new Date;switch(L){case"daily":D=new Date(A.getFullYear(),A.getMonth(),A.getDate());break;case"weekly":const B=A.getDay();D=new Date(A.getFullYear(),A.getMonth(),A.getDate()-B);break;case"monthly":D=new Date(A.getFullYear(),A.getMonth(),1);break}d(D),f(A)},C=()=>{r(0)},_=[...Array(15)].map((L,A)=>{const D=new Date;D.setHours(D.getHours()-Math.floor(Math.random()*24*7));const B=["슬롯","카지노","스포츠","미니게임"],$=["프라그마틱","에볼루션","마이크로게이밍","넷엔트","플레이테크"],N=["당첨","낙첨","진행중","취소"],F=B[Math.floor(Math.random()*B.length)],O=$[Math.floor(Math.random()*$.length)],R=N[Math.floor(Math.random()*N.length)],E=Math.floor(Math.random()*5e5)+1e4,z=R==="당첨"?Math.floor(E*(1+Math.random()*5)):0,q=z-E;return{id:`bet-${A+1}`,date:D,gameType:F,provider:O,gameName:`${F} 게임 ${A+1}`,betAmount:E,winAmount:z,profit:q,status:R,odds:F==="스포츠"?(1.5+Math.random()*3).toFixed(2):null}}),I=(()=>{const L=_.length,A=_.reduce((F,O)=>F+O.betAmount,0),D=_.reduce((F,O)=>F+O.winAmount,0),B=D-A,$=_.filter(F=>F.status==="당첨").length,N=L>0?($/L*100).toFixed(1):0;return{totalBets:L,totalBetAmount:A,totalWinAmount:D,totalProfit:B,winCount:$,winRate:N}})();return m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"베팅 내역"}),m(W,{container:!0,spacing:2,sx:{mb:3},children:[a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(XC,{color:"primary",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"primary",children:[I.totalBets,"건"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 베팅 건수"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(lS,{color:"info",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"info.main",children:[t?t(I.totalBetAmount):I.totalBetAmount,"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 베팅금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(YC,{color:"success",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"success.main",children:[t?t(I.totalWinAmount):I.totalWinAmount,"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 당첨금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(cS,{color:I.totalProfit>=0?"success":"error",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:I.totalProfit>=0?"success.main":"error.main",children:[t?t(Math.abs(I.totalProfit)):Math.abs(I.totalProfit),"원"]}),m(M,{variant:"body2",color:"text.secondary",children:[I.totalProfit>=0?"총 수익":"총 손실"," (승률: ",I.winRate,"%)"]})]})})})]}),m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,md:2,children:a($e,{fullWidth:!0,size:"small",placeholder:"검색어 입력",value:s,onChange:L=>l(L.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:a(Ct,{onClick:C,edge:"end",children:a(Bo,{})})})}})}),a(W,{item:!0,xs:12,md:2,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{children:"게임 유형"}),m(an,{value:x,label:"게임 유형",onChange:L=>y(L.target.value),children:[a(Me,{value:"all",children:"전체"}),a(Me,{value:"슬롯",children:"슬롯"}),a(Me,{value:"카지노",children:"카지노"}),a(Me,{value:"스포츠",children:"스포츠"}),a(Me,{value:"미니게임",children:"미니게임"})]})]})}),a(W,{item:!0,xs:12,md:2,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{children:"베팅 상태"}),m(an,{value:p,label:"베팅 상태",onChange:L=>v(L.target.value),children:[a(Me,{value:"all",children:"전체"}),a(Me,{value:"당첨",children:"당첨"}),a(Me,{value:"낙첨",children:"낙첨"}),a(Me,{value:"진행중",children:"진행중"}),a(Me,{value:"취소",children:"취소"})]})]})}),a(W,{item:!0,xs:12,md:4,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[a(Ja,{label:"시작일",value:c,onChange:d,slotProps:{textField:{size:"small"}}}),a(j,{sx:{mx:1},children:"~"}),a(Ja,{label:"종료일",value:h,onChange:f,slotProps:{textField:{size:"small"}}}),a(Se,{variant:"contained",size:"small",sx:{ml:1},onClick:C,children:"검색"})]})})}),a(W,{item:!0,xs:12,md:2,children:m(ih,{variant:"outlined",size:"small",fullWidth:!0,children:[a(Se,{onClick:()=>k("daily"),variant:g==="daily"?"contained":"outlined",children:"일별"}),a(Se,{onClick:()=>k("weekly"),variant:g==="weekly"?"contained":"outlined",children:"주별"}),a(Se,{onClick:()=>k("monthly"),variant:g==="monthly"?"contained":"outlined",children:"월별"})]})})]})}),a(wa,{children:m(va,{size:"small",children:[a(pa,{children:m(mn,{sx:{bgcolor:"#f5f5f5"},children:[a(ye,{align:"center",sx:{fontWeight:"bold"},children:"날짜/시간"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"게임유형"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"제공사"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"게임명"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"베팅금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"당첨금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"손익"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"상태"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"배당률"})]})}),a(xa,{children:_.map(L=>m(mn,{hover:!0,children:[m(ye,{align:"center",children:[a(M,{variant:"body2",children:L.date.toLocaleDateString()}),a(M,{variant:"caption",color:"text.secondary",children:L.date.toLocaleTimeString()})]}),a(ye,{align:"center",children:a(ut,{label:L.gameType,size:"small",color:L.gameType==="슬롯"?"primary":L.gameType==="카지노"?"secondary":L.gameType==="스포츠"?"success":"warning"})}),a(ye,{align:"center",children:a(M,{variant:"body2",children:L.provider})}),a(ye,{align:"center",children:a(M,{variant:"body2",children:L.gameName})}),a(ye,{align:"center",children:m(M,{variant:"body2",children:[t?t(L.betAmount):L.betAmount," 원"]})}),a(ye,{align:"center",children:m(M,{variant:"body2",color:L.winAmount>0?"success.main":"text.secondary",children:[t?t(L.winAmount):L.winAmount," 원"]})}),a(ye,{align:"center",children:m(M,{variant:"body2",color:L.profit>0?"success.main":L.profit<0?"error.main":"text.secondary",sx:{fontWeight:"medium"},children:[L.profit>0?"+":"",t?t(L.profit):L.profit," 원"]})}),a(ye,{align:"center",children:a(ut,{label:L.status,size:"small",color:L.status==="당첨"?"success":L.status==="낙첨"?"error":L.status==="진행중"?"info":"default"})}),a(ye,{align:"center",children:a(M,{variant:"body2",children:L.odds?`${L.odds}배`:"-"})})]},L.id))})]})}),a(oh,{component:"div",count:100,page:n,onPageChange:b,rowsPerPage:i,onRowsPerPageChange:P,labelRowsPerPage:"행 수:",labelDisplayedRows:({from:L,to:A,count:D})=>`${L}-${A} / ${D}`,rowsPerPageOptions:[10,25,50]})]})]})};var du={},WD;function kse(){if(WD)return du;WD=1;var e=ln();Object.defineProperty(du,"__esModule",{value:!0}),du.default=void 0;var t=e(un()),n=cn();return du.default=(0,t.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Pending"),du}var _se=kse();const Tse=vt(_se),Ise=({selectedAgent:e,formatCurrency:t})=>{const[n,r]=u.useState(0),[i,o]=u.useState(10),[s,l]=u.useState(""),[c,d]=u.useState(null),[h,f]=u.useState(null),[g,w]=u.useState("daily"),[x,y]=u.useState("all"),[p,v]=u.useState("all"),b=(L,A)=>{r(A)},P=L=>{o(parseInt(L.target.value,10)),r(0)},k=L=>{w(L);const A=new Date;let D=new Date;switch(L){case"daily":D=new Date(A.getFullYear(),A.getMonth(),A.getDate());break;case"weekly":const B=A.getDay();D=new Date(A.getFullYear(),A.getMonth(),A.getDate()-B);break;case"monthly":D=new Date(A.getFullYear(),A.getMonth(),1);break}d(D),f(A)},C=()=>{r(0)},_=[...Array(12)].map((L,A)=>{const D=new Date;D.setHours(D.getHours()-Math.floor(Math.random()*24*30));const B=["입금","출금"],$=["완료","대기중","취소","실패"],N=["계좌이체","무통장입금","카드결제","전자지갑"],F=B[Math.floor(Math.random()*B.length)],O=$[Math.floor(Math.random()*$.length)],R=N[Math.floor(Math.random()*N.length)],E=Math.floor(Math.random()*2e6)+5e4,z=F==="출금"?Math.floor(E*.01):0,q=F==="출금"?E-z:E;return{id:`transaction-${A+1}`,date:D,type:F,amount:E,fee:z,actualAmount:q,method:R,status:O,bankName:"국민은행",accountNumber:"123-456-789012",accountHolder:(e==null?void 0:e.username)||"user123",memo:`${F} 요청 ${A+1}`,processedAt:O==="완료"?new Date(D.getTime()+Math.random()*24*60*60*1e3):null}}),I=(()=>{const L=_.filter(F=>F.type==="입금"),A=_.filter(F=>F.type==="출금"),D=L.reduce((F,O)=>F+(O.status==="완료"?O.amount:0),0),B=A.reduce((F,O)=>F+(O.status==="완료"?O.actualAmount:0),0),$=L.filter(F=>F.status==="대기중").length,N=A.filter(F=>F.status==="대기중").length;return{totalDeposits:D,totalWithdrawals:B,netAmount:D-B,pendingDeposits:$,pendingWithdrawals:N,totalTransactions:_.length}})();return m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"입출금 내역"}),m(W,{container:!0,spacing:2,sx:{mb:3},children:[a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(lS,{color:"success",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"success.main",children:[t?t(I.totalDeposits):I.totalDeposits,"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 입금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(cS,{color:"error",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:"error.main",children:[t?t(I.totalWithdrawals):I.totalWithdrawals,"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 출금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(Hj,{color:I.netAmount>=0?"primary":"warning",sx:{fontSize:40,mb:1}}),m(M,{variant:"h6",color:I.netAmount>=0?"primary.main":"warning.main",children:[t?t(Math.abs(I.netAmount)):Math.abs(I.netAmount),"원"]}),a(M,{variant:"body2",color:"text.secondary",children:I.netAmount>=0?"순 입금액":"순 출금액"})]})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a(Sn,{children:m(In,{sx:{textAlign:"center"},children:[a(Tse,{color:"warning",sx:{fontSize:40,mb:1}}),m(j,{sx:{display:"flex",justifyContent:"center",gap:1,mb:1},children:[a(ut,{label:`입금: ${I.pendingDeposits}`,color:"success",size:"small"}),a(ut,{label:`출금: ${I.pendingWithdrawals}`,color:"error",size:"small"})]}),a(M,{variant:"body2",color:"text.secondary",children:"대기중 건수"})]})})})]}),m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,md:2,children:a($e,{fullWidth:!0,size:"small",placeholder:"검색어 입력",value:s,onChange:L=>l(L.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:a(Ct,{onClick:C,edge:"end",children:a(Bo,{})})})}})}),a(W,{item:!0,xs:12,md:2,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{children:"거래 유형"}),m(an,{value:x,label:"거래 유형",onChange:L=>y(L.target.value),children:[a(Me,{value:"all",children:"전체"}),a(Me,{value:"입금",children:"입금"}),a(Me,{value:"출금",children:"출금"})]})]})}),a(W,{item:!0,xs:12,md:2,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{children:"처리 상태"}),m(an,{value:p,label:"처리 상태",onChange:L=>v(L.target.value),children:[a(Me,{value:"all",children:"전체"}),a(Me,{value:"완료",children:"완료"}),a(Me,{value:"대기중",children:"대기중"}),a(Me,{value:"취소",children:"취소"}),a(Me,{value:"실패",children:"실패"})]})]})}),a(W,{item:!0,xs:12,md:4,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[a(Ja,{label:"시작일",value:c,onChange:d,slotProps:{textField:{size:"small"}}}),a(j,{sx:{mx:1},children:"~"}),a(Ja,{label:"종료일",value:h,onChange:f,slotProps:{textField:{size:"small"}}}),a(Se,{variant:"contained",size:"small",sx:{ml:1},onClick:C,children:"검색"})]})})}),a(W,{item:!0,xs:12,md:2,children:m(ih,{variant:"outlined",size:"small",fullWidth:!0,children:[a(Se,{onClick:()=>k("daily"),variant:g==="daily"?"contained":"outlined",children:"일별"}),a(Se,{onClick:()=>k("weekly"),variant:g==="weekly"?"contained":"outlined",children:"주별"}),a(Se,{onClick:()=>k("monthly"),variant:g==="monthly"?"contained":"outlined",children:"월별"})]})})]})}),a(wa,{children:m(va,{size:"small",children:[a(pa,{children:m(mn,{sx:{bgcolor:"#f5f5f5"},children:[a(ye,{align:"center",sx:{fontWeight:"bold"},children:"날짜/시간"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"구분"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"수수료"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"실제금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"결제방법"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"계좌정보"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"상태"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"처리일시"})]})}),a(xa,{children:_.map(L=>m(mn,{hover:!0,children:[m(ye,{align:"center",children:[a(M,{variant:"body2",children:L.date.toLocaleDateString()}),a(M,{variant:"caption",color:"text.secondary",children:L.date.toLocaleTimeString()})]}),a(ye,{align:"center",children:a(ut,{label:L.type,size:"small",color:L.type==="입금"?"success":"error"})}),a(ye,{align:"center",children:m(M,{variant:"body2",sx:{fontWeight:"medium"},children:[t?t(L.amount):L.amount," 원"]})}),a(ye,{align:"center",children:a(M,{variant:"body2",color:L.fee>0?"warning.main":"text.secondary",children:L.fee>0?`${t?t(L.fee):L.fee} 원`:"-"})}),a(ye,{align:"center",children:m(M,{variant:"body2",sx:{fontWeight:"medium",color:L.type==="입금"?"success.main":"error.main"},children:[t?t(L.actualAmount):L.actualAmount," 원"]})}),a(ye,{align:"center",children:a(M,{variant:"body2",children:L.method})}),m(ye,{align:"center",children:[a(M,{variant:"body2",children:L.bankName}),a(M,{variant:"caption",color:"text.secondary",children:L.accountNumber})]}),a(ye,{align:"center",children:a(ut,{label:L.status,size:"small",color:L.status==="완료"?"success":L.status==="대기중"?"warning":L.status==="취소"?"default":"error"})}),a(ye,{align:"center",children:L.processedAt?m(bn,{children:[a(M,{variant:"body2",children:L.processedAt.toLocaleDateString()}),a(M,{variant:"caption",color:"text.secondary",children:L.processedAt.toLocaleTimeString()})]}):a(M,{variant:"body2",color:"text.secondary",children:"-"})})]},L.id))})]})}),a(oh,{component:"div",count:100,page:n,onPageChange:b,rowsPerPage:i,onRowsPerPageChange:P,labelRowsPerPage:"행 수:",labelDisplayedRows:({from:L,to:A,count:D})=>`${L}-${A} / ${D}`,rowsPerPageOptions:[10,25,50]})]})]})},Ose=({selectedAgent:e,formatCurrency:t})=>{const[n,r]=u.useState(0),[i,o]=u.useState(10),[s,l]=u.useState(""),[c,d]=u.useState(null),[h,f]=u.useState(null),[g,w]=u.useState("daily"),x=(k,C)=>{r(C)},y=k=>{o(parseInt(k.target.value,10)),r(0)},p=k=>{w(k);const C=new Date;let S=new Date;switch(k){case"daily":S=new Date(C.getFullYear(),C.getMonth(),C.getDate());break;case"weekly":const _=C.getDay();S=new Date(C.getFullYear(),C.getMonth(),C.getDate()-_);break;case"monthly":S=new Date(C.getFullYear(),C.getMonth(),1);break}d(S),f(C)},v=()=>{r(0)},P=[...Array(10)].map((k,C)=>{const S=new Date;S.setDate(S.getDate()-C);const _=Math.floor(Math.random()*2e6),T=Math.floor(Math.random()*15e5),I=_-T,L=Math.floor(Math.random()*3e6),A=Math.floor(L*(.7+Math.random()*.6)),D=A-L,B=Math.floor(Math.random()*5e5),$=Math.floor(Math.random()*1e7);return{id:`stat-${C+1}`,date:S,deposit:_,withdraw:T,depositProfit:I,betting:L,winning:A,bettingProfit:D,rolling:B,balance:$}});return m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"종합 통계"}),m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,md:4,children:a($e,{fullWidth:!0,size:"small",placeholder:"검색어 입력",value:s,onChange:k=>l(k.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:a(Ct,{onClick:v,edge:"end",children:a(Bo,{})})})}})}),a(W,{item:!0,xs:12,md:6,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(j,{sx:{display:"flex",alignItems:"center"},children:[a(Ja,{label:"시작일",value:c,onChange:d,slotProps:{textField:{size:"small"}}}),a(j,{sx:{mx:1},children:"~"}),a(Ja,{label:"종료일",value:h,onChange:f,slotProps:{textField:{size:"small"}}}),a(Se,{variant:"contained",size:"small",sx:{ml:1},onClick:v,children:"검색"})]})})}),a(W,{item:!0,xs:12,md:2,children:m(ih,{variant:"outlined",size:"small",fullWidth:!0,children:[a(Se,{onClick:()=>p("daily"),variant:g==="daily"?"contained":"outlined",children:"일별"}),a(Se,{onClick:()=>p("weekly"),variant:g==="weekly"?"contained":"outlined",children:"주별"}),a(Se,{onClick:()=>p("monthly"),variant:g==="monthly"?"contained":"outlined",children:"월별"})]})})]})}),a(wa,{children:m(va,{size:"small",children:[a(pa,{children:m(mn,{sx:{bgcolor:"#f5f5f5"},children:[a(ye,{align:"center",sx:{fontWeight:"bold"},children:"날짜"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"입금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"출금액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"입출금 손익"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"베팅액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"당첨액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"베팅 손익"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"롤링액"}),a(ye,{align:"center",sx:{fontWeight:"bold"},children:"보유금액"})]})}),a(xa,{children:P.map(k=>m(mn,{hover:!0,children:[a(ye,{align:"center",children:k.date.toLocaleDateString()}),m(ye,{align:"center",children:[t(k.deposit)," 원"]}),m(ye,{align:"center",children:[t(k.withdraw)," 원"]}),m(ye,{align:"center",sx:{color:k.depositProfit>=0?"success.main":"error.main",fontWeight:"medium"},children:[t(Math.abs(k.depositProfit))," ",k.depositProfit>=0?"원":"원 손실"]}),m(ye,{align:"center",children:[t(k.betting)," 원"]}),m(ye,{align:"center",children:[t(k.winning)," 원"]}),m(ye,{align:"center",sx:{color:k.bettingProfit>=0?"success.main":"error.main",fontWeight:"medium"},children:[t(Math.abs(k.bettingProfit))," ",k.bettingProfit>=0?"원":"원 손실"]}),m(ye,{align:"center",children:[t(k.rolling)," 원"]}),m(ye,{align:"center",children:[t(k.balance)," 원"]})]},k.id))})]})}),a(oh,{component:"div",count:100,page:n,onPageChange:x,rowsPerPage:i,onRowsPerPageChange:y,labelRowsPerPage:"행 수:",labelDisplayedRows:({from:k,to:C,count:S})=>`${k}-${C} / ${S}`,rowsPerPageOptions:[10,25,50]})]})]})},Ase=({member:e,onSave:t})=>{var p,v,b,P,k,C;const[n,r]=u.useState([]),[i,o]=u.useState((e==null?void 0:e.parent_id)||""),[s,l]=u.useState(!1),[c,d]=u.useState(null),[h,f]=u.useState(!1);yo(),u.useEffect(()=>{g()},[e]);const g=async()=>{var S,_,T;if(e)try{l(!0);const L=((_=(S=(await Pe.members.getChildren(e.id)).data)==null?void 0:S.data)==null?void 0:_.map(N=>N.id))||[],D=((T=(await Pe.members.getAll()).data)==null?void 0:T.data)||[],B=[e.id,...L],$=D.filter(N=>!B.includes(N.id)&&N.agent_level_id===e.agent_level_id-1);r($),o(e.parent_id||"")}catch(I){console.error("상위 에이전트 조회 실패:",I),d("상위 에이전트 목록을 불러오는데 실패했습니다.")}finally{l(!1)}},w=S=>{o(S.target.value),d(null),f(!1)},x=async()=>{if(!i||i===e.parent_id){d("변경할 상위 에이전트를 선택해주세요.");return}try{l(!0),d(null),await Pe.members.update(e.id,{parent_id:i}),f(!0),t&&t({...e,parent_id:i}),setTimeout(()=>f(!1),3e3)}catch(S){console.error("상위 에이전트 변경 실패:",S),d("상위 에이전트 변경에 실패했습니다.")}finally{l(!1)}},y=n.find(S=>S.id===(e==null?void 0:e.parent_id));return m(j,{sx:{p:2},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[a(Sl,{}),a(M,{variant:"h6",children:"라인설정"})]}),m(rt,{sx:{p:3,mb:3},children:[a(M,{variant:"subtitle2",sx:{mb:2},children:"현재 소속 정보"}),m(j,{sx:{mb:2},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"현재 단계"}),a(ut,{label:((p=e==null?void 0:e.type)==null?void 0:p.label)||"미지정",size:"small",sx:{backgroundColor:((v=e==null?void 0:e.type)==null?void 0:v.backgroundColor)||"#e0e0e0",borderColor:((b=e==null?void 0:e.type)==null?void 0:b.borderColor)||"#757575",border:"1px solid"}})]}),y&&m(j,{children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"현재 상위 에이전트"}),m(kr,{direction:"row",spacing:1,alignItems:"center",children:[a(ut,{label:((P=y.type)==null?void 0:P.label)||"미지정",size:"small",sx:{backgroundColor:((k=y.type)==null?void 0:k.backgroundColor)||"#e0e0e0",borderColor:((C=y.type)==null?void 0:C.borderColor)||"#757575",border:"1px solid"}}),m(M,{variant:"body2",children:[y.username,y.nickname&&` (${y.nickname})`]})]})]})]}),m(rt,{sx:{p:3},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[a(b1,{}),a(M,{variant:"subtitle2",children:"상위 에이전트 변경"})]}),c&&a(Jt,{severity:"error",sx:{mb:2},children:c}),h&&a(Jt,{severity:"success",sx:{mb:2},children:"상위 에이전트가 성공적으로 변경되었습니다."}),a(Jt,{severity:"warning",icon:a(uE,{}),sx:{mb:2},children:"주의: 소속 변경은 같은 레벨 내에서만 가능합니다. 정확히 한 단계 위 레벨의 에이전트만 선택할 수 있습니다. 레벨을 변경하려면 관리자에게 문의하세요."}),s?a(j,{sx:{display:"flex",justifyContent:"center",py:2},children:a(ir,{})}):m(bn,{children:[m(Zt,{fullWidth:!0,sx:{mb:2},children:[a(hn,{children:"새로운 상위 에이전트"}),m(an,{value:i,onChange:w,label:"새로운 상위 에이전트",disabled:n.length===0,children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),n.map(S=>{var _,T,I;return a(Me,{value:S.id,children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ut,{label:((_=S.type)==null?void 0:_.label)||"미지정",size:"small",sx:{backgroundColor:((T=S.type)==null?void 0:T.backgroundColor)||"#e0e0e0",borderColor:((I=S.type)==null?void 0:I.borderColor)||"#757575",border:"1px solid",height:"20px"}}),m(M,{children:[S.username,S.nickname&&` (${S.nickname})`]})]})},S.id)})]})]}),n.length===0&&a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"변경 가능한 상위 에이전트가 없습니다."}),a(Se,{variant:"contained",onClick:x,disabled:s||!i||i===(e==null?void 0:e.parent_id),fullWidth:!0,children:"변경사항 저장"})]})]})]})},Dse=({selectedAgent:e})=>m(j,{sx:{p:2},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[a(v1,{}),a(M,{variant:"h6",children:"쪽지"})]}),a(rt,{sx:{p:3,textAlign:"center"},children:a(M,{variant:"body1",color:"text.secondary",children:"쪽지 기능이 구현될 예정입니다."})})]}),Rse=({editedMember:e,handleInputChange:t,handleNestedInputChange:n})=>{var p,v,b,P,k,C,S,_,T,I,L,A,D,B,$,N,F,O,R,E,z,q,X,H,K,ee,ge,oe,G,Q,te,U,V,ae,ne,me,ue,Ae,we,ce,De,le,se,J,Z,ie,_e,Re,He,ft,St,Tt,gt,et,xt,Rt,ht,jt,$t,Ut,Bt,Kt,Ft,Et,Ot,zt,Wt,kt,Mt,Ht,qt,Yt,Xt,tn,Fe,je,Oe,ke,bt,it,fe,be,Te,Ne,Ve,Ge,At,Qe,Ie,Xe,ve,at,We,xe,qe,Ee,Y,he,ze,de,Ze,lt,Qt,tr,$n,Xn,Gn,Xr,ra,ja,ma,Ke,Pt,en,fn,Ue,ct,Je,Nt,br,vr,Jr,ka,Fa,za,wo,ai,tt,wt,yt,dn,En,Pn,Tr;const[r,i]=u.useState(0),[o,s]=u.useState(10),c=[{id:"child1",username:"agent001",nickname:"대리점A",levelName:"대리점",level:2,hasVoidBetting:!0,voidBettingSettings:{slot:{enabled:!0,percentage:15,type:"individual"},casino:{enabled:!1}}},{id:"child2",username:"agent002",nickname:"대리점B",levelName:"대리점",level:2,hasVoidBetting:!1,voidBettingSettings:null},{id:"child3",username:"dist001",nickname:"총판A",levelName:"총판",level:3,hasVoidBetting:!0,voidBettingSettings:{slot:{enabled:!0,percentage:10,type:"group"},casino:{enabled:!0,percentage:20,type:"individual"}}},{id:"child4",username:"dist002",nickname:"총판B",levelName:"총판",level:3,hasVoidBetting:!1,voidBettingSettings:null},{id:"child5",username:"user001",nickname:"회원A",levelName:"회원",level:4,hasVoidBetting:!0,voidBettingSettings:{slot:{enabled:!0,percentage:5,type:"individual"},casino:{enabled:!1}}},{id:"child6",username:"user002",nickname:"회원B",levelName:"회원",level:4,hasVoidBetting:!1,voidBettingSettings:null}],h=(()=>{const Be=[];for(let Ye=0;Ye<50;Ye++)Be.push({id:Ye+1,date:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toLocaleDateString("ko-KR"),time:`${String(Math.floor(Math.random()*24)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,gameType:Math.random()>.5?"슬롯":"카지노",gameProvider:["프라그마틱","에볼루션","마이크로게이밍","넷엔트","PG소프트"][Math.floor(Math.random()*5)],gameName:["Sweet Bonanza","Gates of Olympus","Baccarat","Roulette","Blackjack"][Math.floor(Math.random()*5)],originalBetAmount:Math.floor(Math.random()*1e5)+1e4,voidedAmount:Math.floor(Math.random()*5e4)+5e3,voidedPercentage:Math.floor(Math.random()*50)+10,rollingLoss:Math.floor(Math.random()*1e4)+1e3,type:["그룹","개별"][Math.floor(Math.random()*2)],reason:["그룹 설정 적용","개별 설정 적용"][Math.floor(Math.random()*2)],status:"완료"});return Be.sort((Ye,mt)=>new Date(mt.date)-new Date(Ye.date))})(),f=(Be,Ye)=>{i(Ye)},g=Be=>{s(parseInt(Be.target.value,10)),i(0)},w=Be=>new Intl.NumberFormat("ko-KR").format(Be),y=(()=>{const Be=h.reduce((st,Le)=>st+Le.voidedAmount,0),Ye=h.reduce((st,Le)=>st+Le.rollingLoss,0),mt=h.filter(st=>st.gameType==="슬롯").length,pe=h.filter(st=>st.gameType==="카지노").length;return{totalVoidedAmount:Be,totalRollingLoss:Ye,slotVoidCount:mt,casinoVoidCount:pe,totalCount:h.length}})();return m(j,{sx:{p:2},children:[a(M,{variant:"h6",gutterBottom:!0,children:"공베팅 설정"}),m(Jt,{severity:"info",sx:{mb:3},children:[a(M,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"공베팅은 베팅을 무효화하여 롤링금을 의도적으로 누락시키는 관리 기능입니다."}),m(M,{variant:"body2",sx:{fontSize:"0.875rem"},children:["• ",a("strong",{children:"그룹 설정"}),": 선택한 회원 및 하위 회원들에게 일괄 적용 (최대 3단계)",a("br",{}),"• ",a("strong",{children:"개별 설정"}),": 각 회원별로 독립적인 공베팅 조건 설정",a("br",{}),"• ",a("strong",{children:"수동 처리"}),": 베팅상세내역에서 직접 무효화 가능 (별도 상시 활성화)"]})]}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:1,sx:{p:3},children:[m(j,{sx:{display:"flex",alignItems:"center",mb:2},children:[a(M,{variant:"h6",sx:{mr:2},children:"슬롯 공베팅"}),a(ut,{label:"SLOT",color:"primary",size:"small",sx:{fontWeight:"bold"}})]}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((v=(p=e==null?void 0:e.voidBetting)==null?void 0:p.slot)==null?void 0:v.enabled)||!1,onChange:Be=>{var Ye;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,enabled:Be.target.checked})}}),label:"슬롯 공베팅 활성화"})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"공베팅 유형"}),m(an,{value:((P=(b=e==null?void 0:e.voidBetting)==null?void 0:b.slot)==null?void 0:P.type)||"individual",label:"공베팅 유형",onChange:Be=>{var Ye;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,type:Be.target.value})},disabled:!((C=(k=e==null?void 0:e.voidBetting)==null?void 0:k.slot)!=null&&C.enabled),children:[a(Me,{value:"group",children:"그룹 설정"}),a(Me,{value:"individual",children:"개별 설정"})]})]})}),a(W,{item:!0,xs:12,children:a($e,{label:"공베팅 비율",value:((_=(S=e==null?void 0:e.voidBetting)==null?void 0:S.slot)==null?void 0:_.percentage)||"0",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"%"})},disabled:!((I=(T=e==null?void 0:e.voidBetting)==null?void 0:T.slot)!=null&&I.enabled),onFocus:Be=>{var Ye,mt,pe;((mt=(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot)==null?void 0:mt.percentage)==="0"&&n&&n("voidBetting","slot",{...(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.slot,percentage:""})},onChange:Be=>{var mt;const Ye=Be.target.value.replace(/[^0-9.]/g,"");(parseFloat(Ye)<=100||Ye==="")&&n&&n("voidBetting","slot",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot,percentage:Ye})},onBlur:Be=>{var Ye;Be.target.value===""&&n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,percentage:"0"})},helperText:"베팅 중 무효화할 비율을 설정합니다."})}),a(W,{item:!0,xs:12,children:a($e,{label:"최소 베팅금액",value:((A=(L=e==null?void 0:e.voidBetting)==null?void 0:L.slot)==null?void 0:A.minBetAmount)||"",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},disabled:!((B=(D=e==null?void 0:e.voidBetting)==null?void 0:D.slot)!=null&&B.enabled),onChange:Be=>{var mt;const Ye=Be.target.value.replace(/[^0-9]/g,"");n&&n("voidBetting","slot",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot,minBetAmount:Ye})},helperText:"이 금액 이상의 베팅에만 공베팅이 적용됩니다."})}),((N=($=e==null?void 0:e.voidBetting)==null?void 0:$.slot)==null?void 0:N.type)==="group"&&m(bn,{children:[a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",sx:{mt:2,mb:1,color:"primary.main"},children:"그룹 공베팅 설정 (최대 3단계)"})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"적용 대상 선택"}),m(an,{value:((R=(O=(F=e==null?void 0:e.voidBetting)==null?void 0:F.slot)==null?void 0:O.groupSettings)==null?void 0:R.selectedMember)||"",label:"적용 대상 선택",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.groupSettings,selectedMember:Be.target.value}})},children:[m(Me,{value:"self",children:["자신 (",(e==null?void 0:e.username)||"N/A"," / ",(e==null?void 0:e.nickname)||"N/A"," / ",(e==null?void 0:e.levelName)||"N/A",")"]}),c.map(Be=>m(Me,{value:Be.id,children:[Be.username," (",Be.nickname,") / ",Be.levelName]},Be.id))]})]})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",sx:{mt:2},children:"선택한 회원의 하위 모든 회원에게 동일한 공베팅 설정이 일괄 적용됩니다. 설정 권한 범위는 공베팅을 설정할 수 있는 계층 권한을 의미합니다."})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"설정 권한 범위 (단계)",type:"number",value:((q=(z=(E=e==null?void 0:e.voidBetting)==null?void 0:E.slot)==null?void 0:z.groupSettings)==null?void 0:q.maxDepth)||3,fullWidth:!0,margin:"normal",InputProps:{inputProps:{min:1,max:3},endAdornment:a(Dt,{position:"end",children:"단계"})},onChange:Be=>{var mt,pe,st;const Ye=Math.min(3,Math.max(1,parseInt(Be.target.value)||1));n&&n("voidBetting","slot",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot,groupSettings:{...(st=(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.slot)==null?void 0:st.groupSettings,maxDepth:Ye}})},helperText:"공베팅을 설정할 수 있는 권한 범위 (최대 3단계)"})}),a(W,{item:!0,xs:12,sm:6,children:a(Lt,{control:a(sn,{checked:((K=(H=(X=e==null?void 0:e.voidBetting)==null?void 0:X.slot)==null?void 0:H.groupSettings)==null?void 0:K.inheritSettings)||!0,onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.groupSettings,inheritSettings:Be.target.checked}})}}),label:"하위 회원 설정 상속",sx:{mt:2}})}),a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((oe=(ge=(ee=e==null?void 0:e.voidBetting)==null?void 0:ee.slot)==null?void 0:ge.groupSettings)==null?void 0:oe.onlyLosing)||!1,onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.groupSettings,onlyLosing:Be.target.checked}})}}),label:"패배 베팅에만 적용"})})]}),((Q=(G=e==null?void 0:e.voidBetting)==null?void 0:G.slot)==null?void 0:Q.type)==="individual"&&m(bn,{children:[a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",sx:{mt:2,mb:1,color:"primary.main"},children:"개별 공베팅 설정"})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",children:"상위 회원이 하위 회원들을 개별적으로 설정할 수 있습니다."})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"설정할 회원 선택"}),m(an,{value:((V=(U=(te=e==null?void 0:e.voidBetting)==null?void 0:te.slot)==null?void 0:U.individualSettings)==null?void 0:V.selectedMember)||"",label:"설정할 회원 선택",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.individualSettings,selectedMember:Be.target.value}})},children:[a(Me,{value:"",children:"회원을 선택하세요"}),c.map(Be=>a(Me,{value:Be.id,children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[m("span",{children:[Be.username," (",Be.nickname,") / ",Be.levelName]}),Be.hasVoidBetting&&a(ut,{label:"공베팅적용",color:"warning",size:"small",sx:{ml:"auto"}})]})},Be.id))]})]})}),((me=(ne=(ae=e==null?void 0:e.voidBetting)==null?void 0:ae.slot)==null?void 0:ne.individualSettings)==null?void 0:me.selectedMember)&&(()=>{var Ye,mt,pe,st;const Be=c.find(Le=>{var Vt,nn,rn;return Le.id===((rn=(nn=(Vt=e==null?void 0:e.voidBetting)==null?void 0:Vt.slot)==null?void 0:nn.individualSettings)==null?void 0:rn.selectedMember)});return Be?a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2,backgroundColor:"background.default"},children:[m(M,{variant:"subtitle2",gutterBottom:!0,children:["현재 설정된 공베팅 정보: ",Be.username," (",Be.nickname,")"]}),Be.hasVoidBetting?m(j,{children:[m(M,{variant:"body2",color:"text.secondary",children:["• 슬롯: ",(mt=(Ye=Be.voidBettingSettings)==null?void 0:Ye.slot)!=null&&mt.enabled?`활성화 (${Be.voidBettingSettings.slot.percentage}%, ${Be.voidBettingSettings.slot.type})`:"비활성화"]}),m(M,{variant:"body2",color:"text.secondary",children:["• 카지노: ",(st=(pe=Be.voidBettingSettings)==null?void 0:pe.casino)!=null&&st.enabled?`활성화 (${Be.voidBettingSettings.casino.percentage}%, ${Be.voidBettingSettings.casino.type})`:"비활성화"]})]}):a(M,{variant:"body2",color:"text.secondary",children:"공베팅 설정이 없습니다."})]})}):null})(),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"최대 베팅금액",value:((we=(Ae=(ue=e==null?void 0:e.voidBetting)==null?void 0:ue.slot)==null?void 0:Ae.individualSettings)==null?void 0:we.maxBetAmount)||"",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},disabled:!((le=(De=(ce=e==null?void 0:e.voidBetting)==null?void 0:ce.slot)==null?void 0:De.individualSettings)!=null&&le.selectedMember),onChange:Be=>{var mt,pe,st;const Ye=Be.target.value.replace(/[^0-9]/g,"");n&&n("voidBetting","slot",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot,individualSettings:{...(st=(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.slot)==null?void 0:st.individualSettings,maxBetAmount:Ye}})},helperText:"이 금액 이하의 베팅에만 적용"})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"적용 시간대"}),m(an,{value:((Z=(J=(se=e==null?void 0:e.voidBetting)==null?void 0:se.slot)==null?void 0:J.individualSettings)==null?void 0:Z.timeRange)||"always",label:"적용 시간대",disabled:!((Re=(_e=(ie=e==null?void 0:e.voidBetting)==null?void 0:ie.slot)==null?void 0:_e.individualSettings)!=null&&Re.selectedMember),onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.individualSettings,timeRange:Be.target.value}})},children:[a(Me,{value:"always",children:"상시 적용"}),a(Me,{value:"morning",children:"오전 (06:00-12:00)"}),a(Me,{value:"afternoon",children:"오후 (12:00-18:00)"}),a(Me,{value:"evening",children:"저녁 (18:00-24:00)"}),a(Me,{value:"night",children:"새벽 (00:00-06:00)"}),a(Me,{value:"custom",children:"사용자 설정"})]})]})}),((St=(ft=(He=e==null?void 0:e.voidBetting)==null?void 0:He.slot)==null?void 0:ft.individualSettings)==null?void 0:St.timeRange)==="custom"&&m(bn,{children:[a(W,{item:!0,xs:6,sm:3,children:a($e,{label:"시작 시간",type:"time",value:((et=(gt=(Tt=e==null?void 0:e.voidBetting)==null?void 0:Tt.slot)==null?void 0:gt.individualSettings)==null?void 0:et.customStartTime)||"00:00",fullWidth:!0,margin:"normal",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.individualSettings,customStartTime:Be.target.value}})}})}),a(W,{item:!0,xs:6,sm:3,children:a($e,{label:"종료 시간",type:"time",value:((ht=(Rt=(xt=e==null?void 0:e.voidBetting)==null?void 0:xt.slot)==null?void 0:Rt.individualSettings)==null?void 0:ht.customEndTime)||"23:59",fullWidth:!0,margin:"normal",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.individualSettings,customEndTime:Be.target.value}})}})})]}),a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((Ut=($t=(jt=e==null?void 0:e.voidBetting)==null?void 0:jt.slot)==null?void 0:$t.individualSettings)==null?void 0:Ut.onlyLosing)||!1,disabled:!((Ft=(Kt=(Bt=e==null?void 0:e.voidBetting)==null?void 0:Bt.slot)==null?void 0:Kt.individualSettings)!=null&&Ft.selectedMember),onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","slot",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.slot,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.slot)==null?void 0:pe.individualSettings,onlyLosing:Be.target.checked}})}}),label:"패배 베팅에만 적용"})})]})]})]})}),a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:1,sx:{p:3},children:[m(j,{sx:{display:"flex",alignItems:"center",mb:2},children:[a(M,{variant:"h6",sx:{mr:2},children:"카지노 공베팅"}),a(ut,{label:"CASINO",color:"secondary",size:"small",sx:{fontWeight:"bold"}})]}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((Ot=(Et=e==null?void 0:e.voidBetting)==null?void 0:Et.casino)==null?void 0:Ot.enabled)||!1,onChange:Be=>{var Ye;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,enabled:Be.target.checked})}}),label:"카지노 공베팅 활성화"})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"공베팅 유형"}),m(an,{value:((Wt=(zt=e==null?void 0:e.voidBetting)==null?void 0:zt.casino)==null?void 0:Wt.type)||"individual",label:"공베팅 유형",onChange:Be=>{var Ye;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,type:Be.target.value})},disabled:!((Mt=(kt=e==null?void 0:e.voidBetting)==null?void 0:kt.casino)!=null&&Mt.enabled),children:[a(Me,{value:"group",children:"그룹 설정"}),a(Me,{value:"individual",children:"개별 설정"})]})]})}),a(W,{item:!0,xs:12,children:a($e,{label:"공베팅 비율",value:((qt=(Ht=e==null?void 0:e.voidBetting)==null?void 0:Ht.casino)==null?void 0:qt.percentage)||"0",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"%"})},disabled:!((Xt=(Yt=e==null?void 0:e.voidBetting)==null?void 0:Yt.casino)!=null&&Xt.enabled),onFocus:Be=>{var Ye,mt,pe;((mt=(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino)==null?void 0:mt.percentage)==="0"&&n&&n("voidBetting","casino",{...(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.casino,percentage:""})},onChange:Be=>{var mt;const Ye=Be.target.value.replace(/[^0-9.]/g,"");(parseFloat(Ye)<=100||Ye==="")&&n&&n("voidBetting","casino",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino,percentage:Ye})},onBlur:Be=>{var Ye;Be.target.value===""&&n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,percentage:"0"})},helperText:"베팅 중 무효화할 비율을 설정합니다."})}),a(W,{item:!0,xs:12,children:a($e,{label:"최소 베팅금액",value:((Fe=(tn=e==null?void 0:e.voidBetting)==null?void 0:tn.casino)==null?void 0:Fe.minBetAmount)||"",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},disabled:!((Oe=(je=e==null?void 0:e.voidBetting)==null?void 0:je.casino)!=null&&Oe.enabled),onChange:Be=>{var mt;const Ye=Be.target.value.replace(/[^0-9]/g,"");n&&n("voidBetting","casino",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino,minBetAmount:Ye})},helperText:"이 금액 이상의 베팅에만 공베팅이 적용됩니다."})}),((bt=(ke=e==null?void 0:e.voidBetting)==null?void 0:ke.casino)==null?void 0:bt.type)==="group"&&m(bn,{children:[a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",sx:{mt:2,mb:1,color:"secondary.main"},children:"그룹 공베팅 설정 (최대 3단계)"})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"적용 대상 선택"}),m(an,{value:((be=(fe=(it=e==null?void 0:e.voidBetting)==null?void 0:it.casino)==null?void 0:fe.groupSettings)==null?void 0:be.selectedMember)||"",label:"적용 대상 선택",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.groupSettings,selectedMember:Be.target.value}})},children:[m(Me,{value:"self",children:["자신 (",(e==null?void 0:e.username)||"N/A"," / ",(e==null?void 0:e.nickname)||"N/A"," / ",(e==null?void 0:e.levelName)||"N/A",")"]}),c.map(Be=>m(Me,{value:Be.id,children:[Be.username," (",Be.nickname,") / ",Be.levelName]},Be.id))]})]})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",sx:{mt:2},children:"선택한 회원의 하위 모든 회원에게 동일한 공베팅 설정이 일괄 적용됩니다. 설정 권한 범위는 공베팅을 설정할 수 있는 계층 권한을 의미합니다."})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"설정 권한 범위 (단계)",type:"number",value:((Ve=(Ne=(Te=e==null?void 0:e.voidBetting)==null?void 0:Te.casino)==null?void 0:Ne.groupSettings)==null?void 0:Ve.maxDepth)||3,fullWidth:!0,margin:"normal",InputProps:{inputProps:{min:1,max:3},endAdornment:a(Dt,{position:"end",children:"단계"})},onChange:Be=>{var mt,pe,st;const Ye=Math.min(3,Math.max(1,parseInt(Be.target.value)||1));n&&n("voidBetting","casino",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino,groupSettings:{...(st=(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.casino)==null?void 0:st.groupSettings,maxDepth:Ye}})},helperText:"공베팅을 설정할 수 있는 권한 범위 (최대 3단계)"})}),a(W,{item:!0,xs:12,sm:6,children:a(Lt,{control:a(sn,{checked:((Qe=(At=(Ge=e==null?void 0:e.voidBetting)==null?void 0:Ge.casino)==null?void 0:At.groupSettings)==null?void 0:Qe.inheritSettings)||!0,onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.groupSettings,inheritSettings:Be.target.checked}})}}),label:"하위 회원 설정 상속",sx:{mt:2}})}),a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((ve=(Xe=(Ie=e==null?void 0:e.voidBetting)==null?void 0:Ie.casino)==null?void 0:Xe.groupSettings)==null?void 0:ve.onlyLosing)||!1,onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,groupSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.groupSettings,onlyLosing:Be.target.checked}})}}),label:"패배 베팅에만 적용"})})]}),((We=(at=e==null?void 0:e.voidBetting)==null?void 0:at.casino)==null?void 0:We.type)==="individual"&&m(bn,{children:[a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",sx:{mt:2,mb:1,color:"secondary.main"},children:"개별 공베팅 설정"})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",children:"상위 회원이 하위 회원들을 개별적으로 설정할 수 있습니다."})}),a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"설정할 회원 선택"}),m(an,{value:((Ee=(qe=(xe=e==null?void 0:e.voidBetting)==null?void 0:xe.casino)==null?void 0:qe.individualSettings)==null?void 0:Ee.selectedMember)||"",label:"설정할 회원 선택",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.individualSettings,selectedMember:Be.target.value}})},children:[a(Me,{value:"",children:"회원을 선택하세요"}),c.map(Be=>a(Me,{value:Be.id,children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[m("span",{children:[Be.username," (",Be.nickname,") / ",Be.levelName]}),Be.hasVoidBetting&&a(ut,{label:"공베팅적용",color:"warning",size:"small",sx:{ml:"auto"}})]})},Be.id))]})]})}),((ze=(he=(Y=e==null?void 0:e.voidBetting)==null?void 0:Y.casino)==null?void 0:he.individualSettings)==null?void 0:ze.selectedMember)&&(()=>{var Ye,mt,pe,st;const Be=c.find(Le=>{var Vt,nn,rn;return Le.id===((rn=(nn=(Vt=e==null?void 0:e.voidBetting)==null?void 0:Vt.casino)==null?void 0:nn.individualSettings)==null?void 0:rn.selectedMember)});return Be?a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2,backgroundColor:"background.default"},children:[m(M,{variant:"subtitle2",gutterBottom:!0,children:["현재 설정된 공베팅 정보: ",Be.username," (",Be.nickname,")"]}),Be.hasVoidBetting?m(j,{children:[m(M,{variant:"body2",color:"text.secondary",children:["• 슬롯: ",(mt=(Ye=Be.voidBettingSettings)==null?void 0:Ye.slot)!=null&&mt.enabled?`활성화 (${Be.voidBettingSettings.slot.percentage}%, ${Be.voidBettingSettings.slot.type})`:"비활성화"]}),m(M,{variant:"body2",color:"text.secondary",children:["• 카지노: ",(st=(pe=Be.voidBettingSettings)==null?void 0:pe.casino)!=null&&st.enabled?`활성화 (${Be.voidBettingSettings.casino.percentage}%, ${Be.voidBettingSettings.casino.type})`:"비활성화"]})]}):a(M,{variant:"body2",color:"text.secondary",children:"공베팅 설정이 없습니다."})]})}):null})(),a(W,{item:!0,xs:12,sm:6,children:a($e,{label:"최대 베팅금액",value:((lt=(Ze=(de=e==null?void 0:e.voidBetting)==null?void 0:de.casino)==null?void 0:Ze.individualSettings)==null?void 0:lt.maxBetAmount)||"",fullWidth:!0,margin:"normal",InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},disabled:!(($n=(tr=(Qt=e==null?void 0:e.voidBetting)==null?void 0:Qt.casino)==null?void 0:tr.individualSettings)!=null&&$n.selectedMember),onChange:Be=>{var mt,pe,st;const Ye=Be.target.value.replace(/[^0-9]/g,"");n&&n("voidBetting","casino",{...(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino,individualSettings:{...(st=(pe=e==null?void 0:e.voidBetting)==null?void 0:pe.casino)==null?void 0:st.individualSettings,maxBetAmount:Ye}})},helperText:"이 금액 이하의 베팅에만 적용"})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"적용 시간대"}),m(an,{value:((Xr=(Gn=(Xn=e==null?void 0:e.voidBetting)==null?void 0:Xn.casino)==null?void 0:Gn.individualSettings)==null?void 0:Xr.timeRange)||"always",label:"적용 시간대",disabled:!((ma=(ja=(ra=e==null?void 0:e.voidBetting)==null?void 0:ra.casino)==null?void 0:ja.individualSettings)!=null&&ma.selectedMember),onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.individualSettings,timeRange:Be.target.value}})},children:[a(Me,{value:"always",children:"상시 적용"}),a(Me,{value:"morning",children:"오전 (06:00-12:00)"}),a(Me,{value:"afternoon",children:"오후 (12:00-18:00)"}),a(Me,{value:"evening",children:"저녁 (18:00-24:00)"}),a(Me,{value:"night",children:"새벽 (00:00-06:00)"}),a(Me,{value:"custom",children:"사용자 설정"})]})]})}),((en=(Pt=(Ke=e==null?void 0:e.voidBetting)==null?void 0:Ke.casino)==null?void 0:Pt.individualSettings)==null?void 0:en.timeRange)==="custom"&&m(bn,{children:[a(W,{item:!0,xs:6,sm:3,children:a($e,{label:"시작 시간",type:"time",value:((ct=(Ue=(fn=e==null?void 0:e.voidBetting)==null?void 0:fn.casino)==null?void 0:Ue.individualSettings)==null?void 0:ct.customStartTime)||"00:00",fullWidth:!0,margin:"normal",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.individualSettings,customStartTime:Be.target.value}})}})}),a(W,{item:!0,xs:6,sm:3,children:a($e,{label:"종료 시간",type:"time",value:((br=(Nt=(Je=e==null?void 0:e.voidBetting)==null?void 0:Je.casino)==null?void 0:Nt.individualSettings)==null?void 0:br.customEndTime)||"23:59",fullWidth:!0,margin:"normal",onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.individualSettings,customEndTime:Be.target.value}})}})})]}),a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:((ka=(Jr=(vr=e==null?void 0:e.voidBetting)==null?void 0:vr.casino)==null?void 0:Jr.individualSettings)==null?void 0:ka.onlyLosing)||!1,disabled:!((wo=(za=(Fa=e==null?void 0:e.voidBetting)==null?void 0:Fa.casino)==null?void 0:za.individualSettings)!=null&&wo.selectedMember),onChange:Be=>{var Ye,mt,pe;return n&&n("voidBetting","casino",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.casino,individualSettings:{...(pe=(mt=e==null?void 0:e.voidBetting)==null?void 0:mt.casino)==null?void 0:pe.individualSettings,onlyLosing:Be.target.checked}})}}),label:"패배 베팅에만 적용"})})]})]})]})}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"공베팅 통계"}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:3,children:a(Sn,{elevation:2,children:m(In,{sx:{textAlign:"center"},children:[a(M,{variant:"h4",color:"error.main",sx:{fontWeight:"bold"},children:y.totalCount}),a(M,{variant:"body2",color:"text.secondary",children:"총 공베팅 건수"})]})})}),a(W,{item:!0,xs:12,md:3,children:a(Sn,{elevation:2,children:m(In,{sx:{textAlign:"center"},children:[m(M,{variant:"h4",color:"warning.main",sx:{fontWeight:"bold"},children:[w(y.totalVoidedAmount),"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"총 무효화 금액"})]})})}),a(W,{item:!0,xs:12,md:3,children:a(Sn,{elevation:2,children:m(In,{sx:{textAlign:"center"},children:[m(M,{variant:"h4",color:"error.main",sx:{fontWeight:"bold"},children:[w(y.totalRollingLoss),"원"]}),a(M,{variant:"body2",color:"text.secondary",children:"누락된 롤링금"})]})})}),a(W,{item:!0,xs:12,md:3,children:a(Sn,{elevation:2,children:m(In,{sx:{textAlign:"center"},children:[m(M,{variant:"body1",component:"div",sx:{fontWeight:"bold"},children:[a(ut,{label:"슬롯",color:"primary",size:"small",sx:{mr:1}}),y.slotVoidCount,"건"]}),m(M,{variant:"body1",component:"div",sx:{fontWeight:"bold",mt:1},children:[a(ut,{label:"카지노",color:"secondary",size:"small",sx:{mr:1}}),y.casinoVoidCount,"건"]}),a(M,{variant:"body2",color:"text.secondary",children:"게임별 무효화"})]})})})]})]})}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3},children:[a(M,{variant:"h6",gutterBottom:!0,children:"공베팅 전체 설정"}),a(yn,{sx:{my:2}}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,md:4,children:a(Lt,{control:a(sn,{checked:((tt=(ai=e==null?void 0:e.voidBetting)==null?void 0:ai.global)==null?void 0:tt.enableLog)||!0,onChange:Be=>{var Ye;return n&&n("voidBetting","global",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.global,enableLog:Be.target.checked})}}),label:"공베팅 로그 기록"})}),a(W,{item:!0,xs:12,md:4,children:a(Lt,{control:a(sn,{checked:((yt=(wt=e==null?void 0:e.voidBetting)==null?void 0:wt.global)==null?void 0:yt.autoCalculateRolling)||!1,onChange:Be=>{var Ye;return n&&n("voidBetting","global",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.global,autoCalculateRolling:Be.target.checked})}}),label:"롤링금 자동 재계산"})}),a(W,{item:!0,xs:12,md:4,children:a(Lt,{control:a(sn,{checked:((En=(dn=e==null?void 0:e.voidBetting)==null?void 0:dn.global)==null?void 0:En.excludeWinningsFromVoid)||!1,onChange:Be=>{var Ye;return n&&n("voidBetting","global",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.global,excludeWinningsFromVoid:Be.target.checked})}}),label:m(j,{sx:{display:"flex",alignItems:"center"},children:[a("span",{children:"당첨내역 공베팅 제외"}),a(Fn,{title:"당첨된 베팅은 공베팅 대상에서 제외됩니다",placement:"top",children:a(hd,{fontSize:"small",sx:{ml:.5,color:"text.secondary"}})})]})})}),a(W,{item:!0,xs:12,children:a($e,{label:"공베팅 메모",multiline:!0,rows:3,fullWidth:!0,value:((Tr=(Pn=e==null?void 0:e.voidBetting)==null?void 0:Pn.global)==null?void 0:Tr.memo)||"",onChange:Be=>{var Ye;return n&&n("voidBetting","global",{...(Ye=e==null?void 0:e.voidBetting)==null?void 0:Ye.global,memo:Be.target.value})},placeholder:"공베팅 설정에 대한 메모를 입력하세요",helperText:"공베팅 설정 이유나 특별한 조건을 기록할 수 있습니다."})})]})]})}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[a(M,{variant:"h6",children:"공베팅 내역"}),a(Se,{variant:"outlined",startIcon:a(ds,{}),size:"small",children:"전체 내역 보기"})]}),a(wa,{children:m(va,{children:[a(pa,{children:m(mn,{children:[a(ye,{children:"날짜/시간"}),a(ye,{children:"게임유형"}),a(ye,{children:"제공사"}),a(ye,{children:"게임명"}),a(ye,{align:"right",children:"원본 베팅금액"}),a(ye,{align:"right",children:"무효화 금액"}),a(ye,{align:"center",children:"무효화 비율"}),a(ye,{align:"right",children:"누락 롤링금"}),a(ye,{align:"center",children:"유형"}),a(ye,{children:"사유"})]})}),a(xa,{children:h.slice(r*o,r*o+o).map(Be=>m(mn,{hover:!0,children:[m(ye,{children:[a(M,{variant:"body2",children:Be.date}),a(M,{variant:"caption",color:"text.secondary",children:Be.time})]}),a(ye,{children:a(ut,{label:Be.gameType,color:Be.gameType==="슬롯"?"primary":"secondary",size:"small"})}),a(ye,{children:Be.gameProvider}),a(ye,{children:Be.gameName}),m(ye,{align:"right",children:[w(Be.originalBetAmount),"원"]}),a(ye,{align:"right",children:m(M,{color:"error.main",fontWeight:"bold",children:[w(Be.voidedAmount),"원"]})}),a(ye,{align:"center",children:a(ut,{label:`${Be.voidedPercentage}%`,color:"warning",size:"small"})}),a(ye,{align:"right",children:m(M,{color:"error.main",children:["-",w(Be.rollingLoss),"원"]})}),a(ye,{align:"center",children:a(ut,{label:Be.type,color:Be.type==="그룹"?"success":"info",size:"small"})}),a(ye,{children:a(M,{variant:"body2",color:"text.secondary",children:Be.reason})})]},Be.id))})]})}),a(oh,{rowsPerPageOptions:[5,10,25],component:"div",count:h.length,rowsPerPage:o,page:r,onPageChange:f,onRowsPerPageChange:g,labelRowsPerPage:"페이지당 행 수:",labelDisplayedRows:({from:Be,to:Ye,count:mt})=>`${Be}-${Ye} / 총 ${mt}개`})]})})]})]})},Ese=(e,t=3e4,n=!0)=>{const r=Kr(),i=u.useRef(null),o=u.useRef(null),s=u.useCallback(async()=>{var l;if(e)try{const c=await Pe.post("/admin/refresh-balance/"+e);if(!c.data.error&&c.data.newBalance!==void 0){const d=c.data.newBalance;o.current!==d&&(o.current=d,r(s5({userId:e,balance:d})))}}catch(c){((l=c.response)==null?void 0:l.status)!==429&&console.error("잔액 새로고침 실패:",c)}},[e,r]);return u.useEffect(()=>{if(!(!n||!e))return s(),i.current=setInterval(s,t),()=>{i.current&&clearInterval(i.current)}},[n,e,t,s]),{refreshBalance:s,lastBalance:o.current}},Mse=(e=[],t=3e4,n=!0)=>{const r=Kr(),i=u.useRef(null),o=u.useCallback(async()=>{if(!e.length)return;const s=5;for(let l=0;l<e.length;l+=s){const c=e.slice(l,l+s);await Promise.all(c.map(async d=>{try{const h=await Pe.post("/admin/refresh-balance/"+d);!h.data.error&&h.data.newBalance!==void 0&&r(s5({userId:d,balance:h.data.newBalance}))}catch{}})),l+s<e.length&&await new Promise(d=>setTimeout(d,1e3))}},[e,r]);return u.useEffect(()=>{if(!(!n||!e.length))return i.current=setInterval(o,t),()=>{i.current&&clearInterval(i.current)}},[n,e,t,o]),{refreshAllBalances:o}};function Ki(e){return{id:`member-tab-${e}`,"aria-controls":`member-tabpanel-${e}`}}function Yi(e){const{children:t,value:n,index:r,...i}=e;return a("div",{role:"tabpanel",hidden:n!==r,id:`tabpanel-${r}`,"aria-labelledby":`tab-${r}`,style:{height:"100%",overflow:"auto"},className:`member-tab-panel member-tab-panel-${r}`,...i,children:n===r&&a(j,{sx:{height:"100%",p:{xs:1,sm:2}},children:t})})}const Bi=({open:e,onClose:t,member:n,onSave:r})=>{const i=On();u.useEffect(()=>()=>{},[]);const{types:o,isInitialized:s,getTypeInfo:l,getTypeIdByLevelName:c}=yo(),[d,h]=u.useState(0),[f,g]=u.useState({}),[w,x]=u.useState([]),[y,p]=u.useState(""),[v,b]=u.useState(!1);Ese(n==null?void 0:n.id,1e4,e&&d===8);const[P,k]=u.useState(null),[C,S]=u.useState(null),_=u.useRef(null);u.useEffect(()=>{var R,E;if(n&&n.id){const z={...n,username:n.username||((R=n.userId)==null?void 0:R.split(`
`)[0])||"",nickname:n.nickname||((E=n.userId)==null?void 0:E.split(`
`)[1])||"",password:n.password||""},q={...z,grantPermissionTo:null,delegatePermissionType:null,selectedDomainId:n.selectedDomainId||null};g(q),x(n.siteUrls||[]),b(!1),h(0),p(""),S(z),k(null)}else g({}),x([]),b(!1),h(0),p(""),S(null),k(null)},[n==null?void 0:n.id]),u.useEffect(()=>{e&&_.current&&setTimeout(()=>{_.current.focus()},50)},[e]),u.useEffect(()=>{e||(g({}),x([]),b(!1),h(0),p(""),S(null),k(null))},[e]),u.useEffect(()=>{if(n&&e&&d===1){const E=(()=>{const z=[],q={id:n.id,username:n.username,nickname:n.nickname||"",balance:n.balance,rate:n.rate,phone:n.phone,accountNumber:n.accountNumber,accountHolder:n.accountHolder,bank:n.bank,createdAt:n.createdAt,status:n.status,levelName:n.levelName,rollingAmount:n.rollingAmount,sharedBetting:n.sharedBetting,playerStats:n.playerStats,children:[]};if(window.members&&n.hasChildren){const H=window.members.filter(K=>K.parentId===n.id);q.children=H.map(K=>{const ee={...K,children:[]},ge=window.members.filter(oe=>oe.parentId===K.id);return ge.length>0&&(ee.children=ge),ee})}const X={id:"root",username:"",nickname:"",levelName:"",children:[]};if(z.length>0){let H=X;for(const K of z){const ee={...K,children:[]};H.children.push(ee),H=ee}H.children.push(q)}else X.children.push(q);return X})();k(E),S(n)}},[n,e,d]);const T=()=>{b(!v)},I=(R,E)=>{h(E)},L=(R,E)=>{g(R==="grantPermissionTo"?{...f,[R]:E,selectedDomainId:null}:{...f,[R]:E})},A=(R,E,z)=>{g({...f,[R]:{...f[R],[E]:z}})},D=()=>{y.trim()&&(x([...w,y.trim()]),p(""))},B=R=>{const E=[...w];E.splice(R,1),x(E)},$=async()=>{try{if(f.referral_code!==(n==null?void 0:n.referral_code)){const E=f.referral_code||f.userId||f.username||"";if(E){const z=await Pe.members.checkReferralCode(E,f.id);if(!z.data.available){alert(z.data.message||"사용할 수 없는 추천인 코드입니다.");return}}await Pe.members.updateReferralCode(f.id,f.referral_code||"")}const R={...f,siteUrls:w};r(R)}catch{alert("저장 중 오류가 발생했습니다.")}},N=R=>new Intl.NumberFormat("ko-KR",{style:"decimal",maximumFractionDigits:0}).format(R||0),F=()=>{if(!n)return null;let R=[];if(n.parentTypes)if(typeof n.parentTypes=="string")try{R=JSON.parse(n.parentTypes)}catch{R=[]}else R=n.parentTypes;return m(j,{sx:{display:"flex",alignItems:"center",gap:1,ml:2},children:[R.length>0&&R.map((E,z)=>{const q=E.id||`${E.label}-${z}`,X=E.borderColor||i.palette.divider;return m(Ce.Fragment,{children:[a(ut,{label:E.levelName||E.label||"",size:"small",sx:{backgroundColor:`${E.backgroundColor||i.palette.background.paper} !important`,color:`${X} !important`,border:`1px solid ${X} !important`,fontWeight:400,fontSize:"0.75rem",height:"24px","& .MuiChip-label":{px:1.5,py:.5,color:`${X} !important`}}}),z<R.length-1&&a(M,{variant:"body2",sx:{color:"text.secondary",mx:.5},children:">"})]},q)}),R&&R.length>0&&a(M,{variant:"body2",sx:{color:"text.secondary",mx:.5},children:">"}),n&&a(ut,{label:n.agent_level_name||n.levelName||"",size:"small",sx:{backgroundColor:`${n.agent_level_bg_color||n.backgroundColor||i.palette.background.paper} !important`,color:`${n.agent_level_border_color||n.borderColor||i.palette.divider} !important`,border:`1px solid ${n.agent_level_border_color||n.borderColor||i.palette.divider} !important`,fontWeight:400,fontSize:"0.75rem",height:"24px","& .MuiChip-label":{px:1.5,py:.5,color:`${n.agent_level_border_color||n.borderColor||i.palette.divider} !important`}}})]})},O=u.useCallback(R=>{if(!s||typeof c!="function"||typeof l!="function")return{backgroundColor:i.palette.grey[200],borderColor:i.palette.grey[700],textColor:i.palette.grey[700],name:typeof R.levelName=="object"?R.levelName.name||R.levelName.label||R.agent_level_name||"":R.levelName||R.agent_level_name||""};let E=null;if(R.type&&typeof R.type=="object"){const z=c(R.type.label);E=l(z)}else if(R.type&&typeof R.type=="string"){const z=c(R.type);E=l(z)}else if(R.levelName){const z=c(R.levelName);E=l(z)}return E?{backgroundColor:E.backgroundColor||i.palette.grey[100],textColor:E.borderColor||i.palette.text.primary,borderColor:E.borderColor||i.palette.divider,name:typeof E.label=="object"?E.label.name||E.label.label||R.agent_level_name||"":E.label||R.levelName||R.agent_level_name||""}:{backgroundColor:i.palette.grey[100],textColor:i.palette.text.primary,borderColor:i.palette.divider,name:typeof R.levelName=="object"?R.levelName.name||R.levelName.label||R.agent_level_name||"":R.levelName||R.agent_level_name||""}},[o,s,c,l,i]);return m(Yn,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh",borderRadius:"16px",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15)",backgroundImage:`linear-gradient(to bottom, ${Sr(i.palette.background.paper,.9)}, ${i.palette.background.paper})`,border:`1px solid ${Sr(i.palette.divider,.1)}`}},children:[m(Zn,{id:"member-detail-dialog-title",sx:{minHeight:"64px",flex:"0 0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:Sr(i.palette.primary.main,.04),borderBottom:`1px solid ${Sr(i.palette.primary.main,.1)}`,py:1.5,px:3},children:[m(j,{sx:{display:"flex",alignItems:"center"},children:[a(M,{variant:"h6",component:"span",sx:{fontWeight:600,color:i.palette.primary.main},children:"회원 상세 정보"}),n&&m(j,{sx:{display:"flex",alignItems:"center",ml:2},children:[a(ut,{label:typeof n.username=="object"?n.username.id||"":n.username||"",size:"small",variant:"outlined",sx:{borderColor:Sr(i.palette.primary.main,.5),fontWeight:500,backgroundColor:Sr(i.palette.primary.main,.05),"& .MuiChip-label":{px:1}}}),a(M,{variant:"body2",sx:{ml:1,color:"text.secondary"},children:typeof n.nickname=="object"?n.nickname.value||"":n.nickname||""})]})]}),a(Ct,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",sx:{color:i.palette.text.secondary,transition:"all 0.2s","&:hover":{color:i.palette.primary.main,backgroundColor:Sr(i.palette.primary.main,.1)}},children:a(Sa,{})})]}),m(j,{sx:{display:"flex",flexDirection:"column",height:"calc(100% - 64px)",overflow:"hidden"},children:[a(j,{sx:{borderBottom:1,borderColor:"divider",bgcolor:Sr(i.palette.background.default,.5),zIndex:10,position:"relative"},children:m(La,{value:d,onChange:I,"aria-label":"member detail tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{minHeight:"54px",textTransform:"none",minWidth:130,fontSize:"0.875rem",fontWeight:500,color:i.palette.text.secondary,py:1.5,transition:"all 0.2s","&:hover":{color:i.palette.text.primary,backgroundColor:Sr(i.palette.action.hover,.7)}},"& .Mui-selected":{color:i.palette.primary.main,fontWeight:600},"& .MuiTabs-indicator":{height:3,borderTopLeftRadius:3,borderTopRightRadius:3}},children:[a(_n,{icon:a(hd,{fontSize:"small"}),iconPosition:"start",label:"기본정보",ref:_,...Ki(0)}),a(_n,{icon:a(b1,{fontSize:"small"}),iconPosition:"start",label:"트리뷰",...Ki(1)}),a(_n,{icon:a(KF,{fontSize:"small"}),iconPosition:"start",label:"롤링/정산",...Ki(2)}),a(_n,{icon:a(Cs,{fontSize:"small"}),iconPosition:"start",label:"베팅내역",...Ki(3)}),a(_n,{icon:a(ig,{fontSize:"small"}),iconPosition:"start",label:"입/출금",...Ki(4)}),a(_n,{icon:a(YF,{fontSize:"small"}),iconPosition:"start",label:"통계",...Ki(5)}),a(_n,{icon:a(XF,{fontSize:"small"}),iconPosition:"start",label:"공베팅",...Ki(6)}),a(_n,{icon:a(Sl,{fontSize:"small"}),iconPosition:"start",label:"라인설정",...Ki(7)}),a(_n,{icon:a(v1,{fontSize:"small"}),iconPosition:"start",label:"쪽지",...Ki(8)})]})}),a(Kn,{sx:{padding:0,display:"flex",flexDirection:"column",flex:"1 1 auto",overflow:"hidden"},className:"member-detail-content",children:n&&f.id?m(bn,{children:[a(Yi,{value:d,index:0,children:a(rie,{editedMember:f,handleInputChange:L,handleNestedInputChange:A,showPassword:v,toggleShowPassword:T,siteUrls:w,newSiteUrl:y,setNewSiteUrl:p,handleAddSiteUrl:D,handleDeleteSiteUrl:B,renderHierarchy:F,formatCurrency:N,getLevelChipStyle:O},`basic-info-${(f==null?void 0:f.id)||"new"}`)}),a(Yi,{value:d,index:1,children:a(Loe,{selectedAgent:f,formatCurrency:N})}),a(Yi,{value:d,index:2,children:a(Sse,{selectedAgent:C,formatCurrency:N})}),a(Yi,{value:d,index:3,children:a(Pse,{selectedAgent:C,formatCurrency:N})}),a(Yi,{value:d,index:4,children:a(Ise,{selectedAgent:C,formatCurrency:N})}),a(Yi,{value:d,index:5,children:a(Ose,{selectedAgent:C,formatCurrency:N})}),a(Yi,{value:d,index:6,children:a(Rse,{editedMember:f,handleInputChange:L,handleNestedInputChange:A})}),a(Yi,{value:d,index:7,children:a(Ase,{member:f,onSave:$})}),a(Yi,{value:d,index:8,children:a(Dse,{selectedAgent:C})})]}):a(j,{sx:{height:"400px"}})})]}),a(yn,{}),m(nr,{sx:{p:2.5,backgroundColor:Sr(i.palette.background.default,.6),justifyContent:"flex-end",gap:1.5},children:[a(Se,{variant:"outlined",onClick:t,sx:{textTransform:"none",fontWeight:500,borderRadius:"8px",px:2.5,borderColor:Sr(i.palette.text.secondary,.3),color:i.palette.text.secondary,"&:hover":{borderColor:i.palette.text.primary,color:i.palette.text.primary,backgroundColor:Sr(i.palette.action.hover,.8)}},children:"닫기"}),a(Se,{variant:"contained",onClick:$,startIcon:a(qo,{}),sx:{textTransform:"none",fontWeight:500,borderRadius:"8px",px:2.5,boxShadow:"0 4px 10px rgba(0, 0, 0, 0.07)","&:hover":{boxShadow:"0 6px 15px rgba(0, 0, 0, 0.1)"}},color:"primary",children:"저장"})]})]})},Wj={id:"",username:"",nickname:"",password:"",confirmPassword:"",name:"",phone:"",email:"",parentId:"",level:1,type:"",balance:0,gameMoney:0,rollingPercent:0,rollingAmount:0,api:"",deposit:0,withdrawal:0,connectionStatus:"오프라인",lastGame:"",accountNumber:"",bank:"",profitLoss:{slot:0,casino:0,total:0},connectionDate:"",registrationDate:new Date().toISOString().split("T")[0],description:"",bulkCreation:!1,isHeadquarters:!1,memberPageUrlStandard:"",bettingStandard:"",agentManagerUrl:"",memberPageUrl:"",memo:"",recommenderId:"",recommenderUsername:"",language:"한국어",bulkRollingRate:{enabled:!1,value:""},laterRollingInput:!0,rollingRates:{slot:"",casino:""},bulkLosingRate:{enabled:!0,value:""},laterLosingInput:!0,losingRates:{slot:"",casino:"",minigame:""},passwordConfirm:"",accountHolder:"",usernamePattern:{start:"",end:""},slotBettingLimit:"",casinoBettingLimit:""},Lse=["국민은행","신한은행","우리은행","하나은행","기업은행","농협은행","카카오뱅크","토스뱅크","케이뱅크","새마을금고","신협","우체국","기타"],qn=(e,t,n,r,i)=>{var h,f,g,w;const{name:o,value:s,type:l,checked:c}=e.target;let d;if(l==="checkbox"||e.target.tagName==="INPUT"&&e.target.role==="switch"?d=c:d=s!==void 0?s:"",o&&o.includes(".")){const x=o.split(".");n(y=>{const p={...y};let v=p;for(let P=0;P<x.length-1;P++)!v[x[P]]||typeof v[x[P]]!="object"?v[x[P]]={}:v[x[P]]={...v[x[P]]},v=v[x[P]];const b=x[x.length-1];return v[b]=d,p})}else n(x=>({...x,[o]:d}));if(o&&o.includes("rollingRates")){const x=parseFloat(d)||0;if(o.includes("slot")&&((h=t.parentRollingPercent)==null?void 0:h.slot)>0){if(x>t.parentRollingPercent.slot){i(y=>({...y,[o]:`상위 회원의 슬롯 롤링%(${t.parentRollingPercent.slot}%)를 초과할 수 없습니다.`}));return}}else if(o.includes("casino")&&((f=t.parentRollingPercent)==null?void 0:f.casino)>0&&x>t.parentRollingPercent.casino){i(y=>({...y,[o]:`상위 회원의 카지노 롤링%(${t.parentRollingPercent.casino}%)를 초과할 수 없습니다.`}));return}}else if(o==="bulkRollingRate.value"){const x=parseFloat(d)||0,y=Math.max(((g=t.parentRollingPercent)==null?void 0:g.slot)||0,((w=t.parentRollingPercent)==null?void 0:w.casino)||0);if(y>0&&x>y){i(p=>({...p,[o]:`상위 회원의 최대 롤링%(${y}%)를 초과할 수 없습니다.`}));return}}r&&r[o]&&i(x=>{const y={...x};return delete y[o],y})},$se=(e,t)=>{const n=e.memberPageUrl?e.memberPageUrl.split(`
`):[];n.push(""),t(r=>({...r,memberPageUrl:n.join(`
`)}))},jse=(e,t)=>{typeof e=="function"&&e({...Wj}),typeof t=="function"&&t({})},Lr={"& .MuiInputBase-root":{height:"48px"},"& .MuiInputBase-inputMultiline":{height:"auto !important"}},Fse=({open:e,onClose:t,members:n,onCreateMember:r})=>{var T,I,L,A,D,B,$,N,F;const[i,o]=u.useState(()=>({...Wj})),[s,l]=u.useState({}),[c,d]=u.useState(!1),[h,f]=u.useState(null),[g,w]=u.useState(!1),[x,y]=u.useState(null);u.useEffect(()=>{e||(jse(o,l),f(null),y(null))},[e]);const p=O=>O?O.length<4||O.length>10?"아이디는 4자 이상 10자 이하로 입력해주세요.":/^[a-zA-Z0-9]+$/.test(O)?null:"아이디는 영문과 숫자만 사용 가능합니다.":"아이디를 입력해주세요.",v=O=>O?O.length<5?"비밀번호는 5자 이상이어야 합니다.":null:"비밀번호를 입력해주세요.",b=O=>O?O.length<3?"닉네임은 3자 이상이어야 합니다.":/^[가-힣a-zA-Z0-9]+$/.test(O)?null:"닉네임은 한글, 영문, 숫자만 사용 가능합니다.":"닉네임을 입력해주세요.",P=u.useCallback(async O=>{const R=p(O);if(R){f(!1),l(E=>({...E,username:R}));return}d(!0);try{const E=await Pe.members.checkUsername(O);E.data,f(E.data.available),E.data.available?l(z=>{const{username:q,...X}=z;return X}):l(z=>({...z,username:E.data.message}))}catch(E){console.error("아이디 중복 체크 실패:",E),console.error("에러 상세:",E.response)}finally{d(!1)}},[]),k=u.useCallback(async O=>{const R=b(O);if(R){y(!1),l(E=>({...E,nickname:R}));return}w(!0);try{const E=await Pe.members.checkNickname(O);E.data,y(E.data.available),E.data.available?l(z=>{const{nickname:q,...X}=z;return X}):l(z=>({...z,nickname:E.data.message}))}catch(E){console.error("닉네임 중복 체크 실패:",E),console.error("에러 상세:",E.response)}finally{w(!1)}},[]);u.useEffect(()=>{const O=setTimeout(()=>{i.username&&P(i.username)},500);return()=>clearTimeout(O)},[i.username,P]),u.useEffect(()=>{const O=setTimeout(()=>{i.nickname&&!i.bulkCreation&&k(i.nickname)},500);return()=>clearTimeout(O)},[i.nickname,i.bulkCreation,k]);const[C,S]=u.useState([]);u.useEffect(()=>{e&&(async()=>{var R;try{const E=await Pe.agentLevels.getAll();(R=E.data)!=null&&R.data&&S(E.data.data.sort((z,q)=>z.level-q.level))}catch(E){console.error("Failed to fetch agent levels:",E)}})()},[e]),u.useEffect(()=>{if(i.parentId&&n&&C.length>0){const O=n.find(R=>R.id===i.parentId);if(O&&(O.type==="본사"||O.agent_level_name==="본사"?o(R=>({...R,isHeadquarters:!0})):o(R=>({...R,isHeadquarters:!1,memberPageUrlStandard:"",bettingStandard:"",agentManagerUrl:"",memberPageUrl:""})),o(R=>({...R,parentRollingPercent:{slot:O.rolling_slot_percent||O.rollingPercent||0,casino:O.rolling_casino_percent||O.rollingPercent||0}})),O.agent_level_id)){const R=C.find(E=>E.id===O.agent_level_id);if(R){const E=C.find(z=>z.level===R.level+1);E&&o(z=>({...z,agent_level_id:E.id}))}}}},[i.parentId,n,C]);const _=async()=>{var z,q,X,H,K,ee,ge,oe,G,Q,te,U,V,ae,ne,me;const O={};if(i.parentId||(O.parentId="상부를 선택해주세요."),i.bulkCreation){(z=i.username)!=null&&z.trim()||(O.username="아이디 접두사를 입력해주세요.");const ue=parseInt(i.usernamePattern.start),Ae=parseInt(i.usernamePattern.end);(!i.usernamePattern.start||isNaN(ue))&&(O["usernamePattern.start"]="시작 번호를 입력해주세요."),(!i.usernamePattern.end||isNaN(Ae))&&(O["usernamePattern.end"]="끝 번호를 입력해주세요."),ue&&Ae&&ue>Ae&&(O["usernamePattern.end"]="끝 번호는 시작 번호보다 커야 합니다."),ue&&Ae&&Ae-ue>50&&(O["usernamePattern.end"]="한 번에 최대 50개까지만 생성 가능합니다.")}else{const ue=p(i.username);ue?O.username=ue:h===!1?O.username="이미 사용 중인 아이디입니다.":c&&(O.username="아이디 중복 체크 중입니다.")}const R=v(i.password);R&&(O.password=R);const E=b(i.nickname);if(E?O.nickname=E:!i.bulkCreation&&x===!1?O.nickname="이미 사용 중인 닉네임입니다.":!i.bulkCreation&&g&&(O.nickname="닉네임 중복 체크 중입니다."),i.password!==i.passwordConfirm&&(O.passwordConfirm="비밀번호가 일치하지 않습니다."),(q=i.name)!=null&&q.trim()||(O.name="이름을 입력해주세요."),(X=i.phone)!=null&&X.trim()||(O.phone="전화번호를 입력해주세요."),i.bank||(O.bank="은행을 선택해주세요."),(H=i.accountNumber)!=null&&H.trim()||(O.accountNumber="계좌번호를 입력해주세요."),(K=i.accountHolder)!=null&&K.trim()||(O.accountHolder="예금주를 입력해주세요."),i.agent_level_id||(O.agent_level_id="회원 레벨이 자동 설정되지 않았습니다."),i.laterRollingInput||(i.bulkRollingRate.enabled?!i.bulkRollingRate.value&&i.bulkRollingRate.value!==0&&(O["bulkRollingRate.value"]="일괄 롤링%를 입력해주세요."):(!i.rollingRates.slot&&i.rollingRates.slot!==0&&(O["rollingRates.slot"]="슬롯 롤링%를 입력해주세요."),!i.rollingRates.casino&&i.rollingRates.casino!==0&&(O["rollingRates.casino"]="카지노 롤링%를 입력해주세요."))),i.laterLosingInput||!i.bulkLosingRate.value&&i.bulkLosingRate.value!==0&&(O["bulkLosingRate.value"]="일괄 루징%를 입력해주세요."),Object.keys(O).length>0){l(O);const ue=[];O.parentId&&ue.push("상부"),O.username&&ue.push("아이디"),O.password&&ue.push("비밀번호"),O.passwordConfirm&&ue.push("비밀번호 확인"),O.nickname&&ue.push("닉네임"),O.name&&ue.push("이름"),O.phone&&ue.push("전화번호"),O.bank&&ue.push("은행"),O.accountNumber&&ue.push("계좌번호"),O.accountHolder&&ue.push("예금주"),O["usernamePattern.start"]&&ue.push("시작 번호"),O["usernamePattern.end"]&&ue.push("끝 번호"),O["bulkRollingRate.value"]&&ue.push("일괄 롤링%"),O["rollingRates.slot"]&&ue.push("슬롯 롤링%"),O["rollingRates.casino"]&&ue.push("카지노 롤링%"),O["bulkLosingRate.value"]&&ue.push("일괄 루징%"),ue.length>0&&alert(`다음 필수 항목을 입력해주세요:
${ue.join(", ")}`),setTimeout(()=>{const Ae=document.querySelector(".MuiTextField-root .Mui-error input, .MuiTextField-root .Mui-error textarea");Ae&&(Ae.focus(),Ae.scrollIntoView({behavior:"smooth",block:"center"}))},100);return}try{if(i.bulkCreation){const ue={bulk_creation:!0,username_prefix:i.username,start_number:parseInt(i.usernamePattern.start),end_number:parseInt(i.usernamePattern.end),password:i.password,nickname:i.nickname,name:i.name,phone:i.phone,bank:i.bank,account_number:i.accountNumber,account_holder:i.accountHolder,parent_id:i.parentId,agent_level_id:i.agent_level_id,status:"active",language:i.language||"한국어",memo:i.memo||"",recommender_username:i.recommenderUsername||null,slot_percent:i.bulkRollingRate.enabled?i.bulkRollingRate.value||0:((ee=i.rollingRates)==null?void 0:ee.slot)||0,casino_percent:i.bulkRollingRate.enabled?i.bulkRollingRate.value||0:((ge=i.rollingRates)==null?void 0:ge.casino)||0},Ae=await Pe.post("/members/bulk",ue);if(Ae.data.success){typeof r=="function"&&r(Ae.data.data||Ae.data.summary);const we=Ae.data.message||`${Ae.data.summary.total}명의 회원이 생성되었습니다.`;typeof t=="function"&&t()}else l({general:Ae.data.error||"일괄 회원 생성에 실패했습니다."})}else{const ue={user_id:i.username,password:i.password,nickname:i.nickname,name:i.name,phone:i.phone,bank:i.bank,account_number:i.accountNumber,account_holder:i.accountHolder,parent_id:i.parentId,agent_level_id:i.agent_level_id,status:"active",language:i.language||"한국어",memo:i.memo||"",recommender_username:i.recommenderUsername||null,slot_percent:((oe=i.rollingRates)==null?void 0:oe.slot)||0,casino_percent:((G=i.rollingRates)==null?void 0:G.casino)||0},Ae=await Pe.members.create(ue);Ae.data.success?(typeof r=="function"&&r(Ae.data.data),typeof t=="function"&&t()):l({general:Ae.data.error||"회원 생성에 실패했습니다."})}}catch(ue){console.error("회원 생성 오류:",ue),console.error("에러 응답:",(Q=ue.response)==null?void 0:Q.data);const Ae=((U=(te=ue.response)==null?void 0:te.data)==null?void 0:U.error)||"회원 생성 중 오류가 발생했습니다.",we=(ae=(V=ue.response)==null?void 0:V.data)==null?void 0:ae.sqlMessage,ce=(me=(ne=ue.response)==null?void 0:ne.data)==null?void 0:me.details;l({general:we?`${Ae} (SQL: ${we})`:Ae}),ce&&console.error("상세 오류:",ce)}};return m(Yn,{open:!!e,onClose:typeof t=="function"?t:()=>{},maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"12px",overflow:"hidden"}},children:[m(Zn,{className:"dialog-title",sx:{backgroundColor:"#3699FF !important",padding:"16px 24px",borderBottom:"1px solid #e0e0e0"},children:[m(j,{className:"section-title",children:[a(ba,{fontSize:"small"}),a(M,{variant:"h6",className:"dialog-title-text",children:"회원생성"})]}),a(Ct,{edge:"end",color:"inherit",onClick:typeof t=="function"?t:()=>{},"aria-label":"close",className:"close-button",children:a(Sa,{})})]}),m(Kn,{className:"dialog-content",children:[m(j,{className:"section-header",children:[m(j,{className:"section-title",children:[a(Sl,{fontSize:"small",color:"primary"}),a(M,{variant:"h6",className:"section-title-text",children:"회원생성"})]}),m(j,{className:"bulk-creation-toggle",children:[a(M,{variant:"body1",className:"bulk-creation-label",children:"일괄생성"}),a(sn,{checked:!!(i!=null&&i.bulkCreation),onChange:(O,R)=>qn({target:{name:"bulkCreation",type:"checkbox",checked:R}},i,o,s,l),color:"primary"})]})]}),m(j,{className:"form-section",children:[m(j,{className:"form-section-header",children:[m(j,{className:"form-section-title",children:[a(gf,{className:"field-icon"}),a(M,{variant:"subtitle1",className:"form-section-title-text",children:"필수항목"})]}),n&&i.parentId&&i.agent_level_id&&C.length>0&&a(ut,{label:(()=>{const O=C.find(R=>R.id===i.agent_level_id);return O?O.name:""})(),className:"parent-chip",sx:{backgroundColor:(()=>{const O=C.find(R=>R.id===i.agent_level_id);return O?O.background_color:"#e8f5e9"})(),color:(()=>{const O=C.find(R=>R.id===i.agent_level_id);return O?O.border_color:"#2e7d32"})(),border:`1px solid ${(()=>{const O=C.find(R=>R.id===i.agent_level_id);return O?O.border_color:"#2e7d32"})()}`,fontWeight:"bold",fontSize:"0.75rem",height:"24px"}})]}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a(dE,{options:n?n.filter(O=>O&&O.agent_level_id):[],getOptionLabel:O=>O?`${O.username}${O.nickname?` (${O.nickname})`:""}`:"",renderOption:(O,R)=>{const{key:E,...z}=O;return m(rt,{...z,elevation:0,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m("span",{children:[R.username,R.nickname?` (${R.nickname})`:""]}),R.agent_level_name&&a(j,{component:"span",sx:{ml:1},children:a(ut,{label:R.agent_level_name,size:"small",sx:{backgroundColor:`${R.agent_level_bg_color||R.background_color||"#e8f5e9"} !important`,color:`${R.agent_level_border_color||R.border_color||"#2e7d32"} !important`,border:`1px solid ${R.agent_level_border_color||R.border_color||"#2e7d32"} !important`,fontWeight:400,fontSize:"0.75rem","& .MuiChip-label":{color:`${R.agent_level_border_color||R.border_color||"#2e7d32"} !important`},height:"24px"}})})]},E)},renderInput:O=>a($e,{...O,label:"상부",required:!0,variant:"outlined",size:"small",error:!!s.parentId,helperText:s.parentId||(s.general&&!s.parentId?s.general:""),InputProps:{...O.InputProps,startAdornment:m(bn,{children:[a(ba,{className:"field-icon"}),O.InputProps.startAdornment]})}}),value:n&&i.parentId&&n.find(O=>O.id===i.parentId)||null,onChange:(O,R)=>{qn({target:{name:"parentId",value:R?R.id:""}},i,o,s,l),o(E=>({...E,agent_level_id:null,recommenderUsername:R?R.username:""}))},isOptionEqualToValue:(O,R)=>O.id===R.id})}),i.isHeadquarters&&m(bn,{children:[a(W,{item:!0,xs:12,children:a(M,{variant:"subtitle2",sx:{fontWeight:"bold",color:"#333",mb:1},children:"기준 에이전트"})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,size:"small",error:!!s.memberPageUrlStandard,children:[a(hn,{id:"member-page-url-standard-label",children:"회원페이지 URL 적용기준"}),m(an,{labelId:"member-page-url-standard-label",name:"memberPageUrlStandard",value:i.memberPageUrlStandard,onChange:O=>qn(O,i,o,s,l),label:"회원페이지 URL 적용기준",startAdornment:a(Dt,{position:"start",children:a(Ss,{className:"field-icon"})}),children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),n&&n.filter(O=>{const R=C.find(E=>E.id===O.agent_level_id);return R&&R.level<=3||O.id===i.parentId}).map(O=>a(Me,{value:O.id,children:O.username},O.id))]}),s.memberPageUrlStandard&&a(Xu,{children:s.memberPageUrlStandard})]})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,size:"small",error:!!s.bettingStandard,children:[a(hn,{id:"betting-standard-label",children:"공베팅적용기준"}),m(an,{labelId:"betting-standard-label",name:"bettingStandard",value:i.bettingStandard,onChange:O=>qn(O,i,o,s,l),label:"공베팅적용기준",startAdornment:a(Dt,{position:"start",children:a(Cs,{className:"field-icon"})}),children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),n&&n.filter(O=>{const R=C.find(E=>E.id===O.agent_level_id);return R&&R.level<=3||O.id===i.parentId}).map(O=>a(Me,{value:O.id,children:O.username},O.id))]}),s.bettingStandard&&a(Xu,{children:s.bettingStandard})]})}),a(W,{item:!0,xs:12,children:m(j,{className:"url-input-container",children:[a($e,{fullWidth:!0,label:"에이전트 관리자 URL",name:"agentManagerUrl",value:i.agentManagerUrl,onChange:O=>qn(O,i,o,s,l),variant:"outlined",size:"small",placeholder:"관리자 URL 입력",InputProps:{startAdornment:a(ix,{className:"field-icon"})}}),a(Fn,{title:"URL 추가",children:a(Ct,{color:"primary",onClick:()=>$se(),className:"url-add-button",children:a(lo,{})})})]})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"회원페이지 URL",name:"memberPageUrl",value:i.memberPageUrl,onChange:O=>qn(O,i,o,s,l),variant:"outlined",size:"small",placeholder:"회원페이지 URL 입력",InputProps:{startAdornment:a(Ss,{className:"field-icon"})}})})]}),a(W,{item:!0,xs:12,sm:6,children:i.bulkCreation?m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:6,children:a($e,{fullWidth:!0,label:"아이디",name:"username",value:i.username,onChange:O=>qn(O,i,o,s,l),required:!0,variant:"outlined",size:"small",placeholder:"2~5글자",error:!!s.username,helperText:s.username,InputProps:{startAdornment:a(gf,{className:"field-icon"})},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:3,children:a($e,{fullWidth:!0,label:"시작",name:"usernamePattern.start",value:i.usernamePattern.start,onChange:O=>qn(O,i,o,s,l),required:!0,variant:"outlined",size:"small",type:"number",placeholder:"시작 번호",error:!!s["usernamePattern.start"],helperText:s["usernamePattern.start"],sx:Lr})}),a(W,{item:!0,xs:3,children:a($e,{fullWidth:!0,label:"끝",name:"usernamePattern.end",value:i.usernamePattern.end,onChange:O=>qn(O,i,o,s,l),required:!0,variant:"outlined",size:"small",type:"number",placeholder:"끝 번호",error:!!s["usernamePattern.end"],helperText:s["usernamePattern.end"],sx:Lr})})]}):a($e,{fullWidth:!0,label:"아이디",name:"username",value:i.username,onChange:O=>{qn(O,i,o,s,l);const R=p(O.target.value);R&&l(E=>({...E,username:R}))},required:!0,variant:"outlined",size:"small",placeholder:"영문, 4-10자",error:!!s.username||h===!1,helperText:c?"확인 중...":s.username||(h===!0?"사용 가능한 아이디입니다":h===!1?"이미 사용 중인 아이디입니다":""),InputProps:{startAdornment:a(gf,{className:"field-icon"}),endAdornment:c?a(ir,{size:20}):h===!0?a(ul,{color:"success"}):h===!1?a(mf,{color:"error"}):null},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:i.bulkCreation?a(W,{container:!0,spacing:2,children:a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"닉네임",name:"nickname",value:i.nickname,onChange:O=>qn(O,i,o,s,l),required:!0,variant:"outlined",size:"small",placeholder:"2~5글자, 아이디 패턴을 따름",error:!!s.nickname,helperText:s.nickname,InputProps:{startAdornment:a(ba,{className:"field-icon"})},autoComplete:"off",sx:Lr})})}):a($e,{fullWidth:!0,label:"닉네임",name:"nickname",value:i.nickname,onChange:O=>{qn(O,i,o,s,l);const R=b(O.target.value);R?(l(E=>({...E,nickname:R})),y(null)):l(E=>{const{nickname:z,...q}=E;return q})},required:!0,variant:"outlined",size:"small",placeholder:"한글/영문, 3자 이상",error:!!s.nickname||x===!1,helperText:g?"확인 중...":s.nickname||(x===!0?"사용 가능한 닉네임입니다":x===!1?"이미 사용 중인 닉네임입니다":""),InputProps:{startAdornment:a(ba,{className:"field-icon"}),endAdornment:g?a(ir,{size:20}):x===!0?a(ul,{color:"success"}):x===!1?a(mf,{color:"error"}):null},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,type:"password",label:"비밀번호",name:"password",value:i.password,onChange:O=>{qn(O,i,o,s,l);const R=v(O.target.value);l(R?E=>({...E,password:R}):E=>{const{password:z,...q}=E;return q})},required:!0,variant:"outlined",size:"small",placeholder:"5자 이상",error:!!s.password,helperText:s.password,InputProps:{startAdornment:a(yS,{className:"field-icon"})},autoComplete:"new-password",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,type:"password",label:"비밀번호 확인",name:"passwordConfirm",value:i.passwordConfirm,onChange:O=>{qn(O,i,o,s,l),O.target.value&&i.password&&(O.target.value!==i.password?l(R=>({...R,passwordConfirm:"비밀번호가 일치하지 않습니다."})):l(R=>{const{passwordConfirm:E,...z}=R;return z}))},required:!0,variant:"outlined",size:"small",error:!!s.passwordConfirm,helperText:s.passwordConfirm,InputProps:{startAdornment:a(yS,{className:"field-icon"}),endAdornment:i.passwordConfirm&&(i.password===i.passwordConfirm?a(ul,{color:"success"}):a(mf,{color:"error"}))},autoComplete:"new-password",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"이름",name:"name",value:i.name,onChange:O=>qn(O,i,o,s,l),required:!i.bulkCreation,variant:"outlined",size:"small",placeholder:"예금주와 불일치 시 출금 불가",error:!!s.name,helperText:s.name,InputProps:{startAdornment:a(ba,{className:"field-icon"})},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"전화번호",name:"phone",value:i.phone,onChange:O=>qn(O,i,o,s,l),required:!i.bulkCreation,variant:"outlined",size:"small",placeholder:"전화번호 형식에 맞게 입력",error:!!s.phone,helperText:s.phone,InputProps:{startAdornment:a(hE,{className:"field-icon"})},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,size:"small",error:!!s.bank,required:!i.bulkCreation,children:[a(hn,{id:"bank-label",children:"은행"}),m(an,{labelId:"bank-label",name:"bank",value:i.bank,onChange:O=>qn(O,i,o,s,l),label:"은행",startAdornment:a(Dt,{position:"start",children:a(so,{className:"field-icon"})}),children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),Lse.map(O=>a(Me,{value:O,children:O},O))]}),s.bank&&a(Xu,{children:s.bank})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"계좌번호",name:"accountNumber",value:i.accountNumber,onChange:O=>qn(O,i,o,s,l),required:!i.bulkCreation,variant:"outlined",size:"small",placeholder:"'-' 없이 입력",error:!!s.accountNumber,helperText:s.accountNumber,InputProps:{startAdornment:a(ig,{className:"field-icon"})},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"예금주",name:"accountHolder",value:i.accountHolder,onChange:O=>qn(O,i,o,s,l),required:!i.bulkCreation,variant:"outlined",size:"small",placeholder:"이름과 불일치 시 출금 불가",error:!!s.accountHolder,helperText:s.accountHolder,InputProps:{startAdornment:a(ba,{className:"field-icon"})},autoComplete:"off",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"추천인",name:"recommenderUsername",value:i.recommenderUsername||"상부 선택 시 자동 설정",variant:"outlined",size:"small",disabled:!0,InputProps:{readOnly:!0,startAdornment:a(ba,{className:"field-icon"})},helperText:"추천인은 상부와 동일하게 자동 설정됩니다",sx:Lr})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,size:"small",children:[a(hn,{id:"language-label",children:"언어"}),m(an,{labelId:"language-label",name:"language",value:i.language||"한국어",onChange:O=>qn(O,i,o,s,l),label:"언어",startAdornment:a(Dt,{position:"start",children:a(Ss,{className:"field-icon"})}),children:[a(Me,{value:"한국어",children:"한국어"}),a(Me,{value:"영어",children:"영어"}),a(Me,{value:"중국어",children:"중국어"}),a(Me,{value:"일본어",children:"일본어"})]})]})})]})]}),a(W,{item:!0,xs:12,children:m(j,{className:"form-section",children:[a(j,{className:"form-section-header",children:m(j,{className:"form-section-title",children:[a(Ih,{className:"field-icon"}),a(M,{variant:"subtitle1",className:"form-section-title-text",children:"롤링 설정"})]})}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:m(j,{display:"flex",alignItems:"center",gap:2,children:[a(Lt,{control:a(sn,{checked:!!((T=i==null?void 0:i.bulkRollingRate)!=null&&T.enabled),onChange:(O,R)=>qn({target:{name:"bulkRollingRate.enabled",type:"checkbox",checked:R}},i,o,s,l),size:"small"}),label:a(M,{variant:"body2",children:"일괄 롤링"})}),((I=i==null?void 0:i.bulkRollingRate)==null?void 0:I.enabled)&&a($e,{label:"일괄 롤링 %",name:"bulkRollingRate.value",value:((L=i==null?void 0:i.bulkRollingRate)==null?void 0:L.value)||"",onChange:O=>{const R=parseFloat(O.target.value);R<0&&(O.target.value="0"),qn(O,i,o,s,l),R&&R!==0&&qn({target:{name:"laterRollingInput",type:"checkbox",checked:!1,value:!1}},i,o,s,l)},variant:"outlined",size:"small",type:"number",placeholder:i.parentRollingPercent?`상부 ${i.parentRollingPercent}% 이하 설정`:"롤링% 입력",sx:{...Lr,width:"200px",mr:"15px"},InputProps:{startAdornment:a(Ih,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{min:0,step:.01}},required:!i.laterRollingInput}),a(Lt,{control:a(sn,{checked:!!(i!=null&&i.laterRollingInput),onChange:(O,R)=>qn({target:{name:"laterRollingInput",type:"checkbox",checked:R}},i,o,s,l),size:"small",disabled:!!i.bulkRollingRate.value||!!i.rollingRates.slot||!!i.rollingRates.casino}),label:a(M,{variant:"body2",children:"나중에 기입하기"})})]})}),!((A=i==null?void 0:i.bulkRollingRate)!=null&&A.enabled)&&m(bn,{children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"슬롯 롤링 %",name:"rollingRates.slot",value:((D=i==null?void 0:i.rollingRates)==null?void 0:D.slot)||"",onChange:O=>{const R=parseFloat(O.target.value);R<0&&(O.target.value="0"),qn(O,i,o,s,l),R&&R!==0&&qn({target:{name:"laterRollingInput",type:"checkbox",checked:!1,value:!1}},i,o,s,l)},variant:"outlined",size:"small",type:"number",placeholder:(B=i.parentRollingPercent)!=null&&B.slot?`상부 ${parseFloat(i.parentRollingPercent.slot).toFixed(2)}% 이하 설정`:"롤링% 입력",InputProps:{startAdornment:a(JF,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{min:0,step:.01}},sx:Lr,required:!i.laterRollingInput,error:!!s["rollingRates.slot"],helperText:s["rollingRates.slot"]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"카지노 롤링 %",name:"rollingRates.casino",value:(($=i==null?void 0:i.rollingRates)==null?void 0:$.casino)||"",onChange:O=>{const R=parseFloat(O.target.value);R<0&&(O.target.value="0"),qn(O,i,o,s,l),R&&R!==0&&qn({target:{name:"laterRollingInput",type:"checkbox",checked:!1,value:!1}},i,o,s,l)},variant:"outlined",size:"small",type:"number",placeholder:(N=i.parentRollingPercent)!=null&&N.casino?`상부 ${parseFloat(i.parentRollingPercent.casino).toFixed(2)}% 이하 설정`:"롤링% 입력",InputProps:{startAdornment:a(Cs,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{min:0,step:.01}},sx:Lr,required:!i.laterRollingInput,error:!!s["rollingRates.casino"],helperText:s["rollingRates.casino"]})})]})]})]})}),a(W,{item:!0,xs:12,children:m(j,{className:"form-section",children:[a(j,{className:"form-section-header",children:m(j,{className:"form-section-title",children:[a(Ih,{className:"field-icon"}),a(M,{variant:"subtitle1",className:"form-section-title-text",children:"루징 설정"})]})}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:m(j,{display:"flex",alignItems:"center",gap:2,children:[a(Lt,{control:a(sn,{checked:!0,onChange:O=>{O.preventDefault(),alert("루징 다중설정은 아직 미지원 상태입니다.")},size:"small",disabled:!1}),label:a(M,{variant:"body2",children:"일괄 루징"})}),a($e,{label:"일괄 루징 %",name:"bulkLosingRate.value",value:((F=i==null?void 0:i.bulkLosingRate)==null?void 0:F.value)||"",onChange:O=>{const R=parseFloat(O.target.value);R<0&&(O.target.value="0"),qn(O,i,o,s,l),R&&R!==0&&qn({target:{name:"laterLosingInput",type:"checkbox",checked:!1,value:!1}},i,o,s,l)},variant:"outlined",size:"small",type:"number",placeholder:`${i.parentId?"상부의 %이하 설정":""}`,sx:{...Lr,width:"200px",mr:"15px"},InputProps:{startAdornment:a(Ih,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{min:0,step:.01}},required:!i.laterLosingInput}),a(Lt,{control:a(sn,{checked:!!(i!=null&&i.laterLosingInput),onChange:(O,R)=>qn({target:{name:"laterLosingInput",type:"checkbox",checked:R}},i,o,s,l),size:"small",disabled:!!i.bulkLosingRate.value}),label:a(M,{variant:"body2",children:"나중에 기입하기"})})]})}),!1]})]})}),a(W,{item:!0,xs:12,children:m(j,{className:"form-section",children:[a(j,{className:"form-section-header",children:m(j,{className:"form-section-title",children:[a(sm,{className:"field-icon"}),a(M,{variant:"subtitle1",className:"form-section-title-text",children:"베팅 제한액"})]})}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"슬롯 베팅 제한액",name:"slotBettingLimit",value:i.slotBettingLimit,onChange:O=>qn(O,i,o,s,l),variant:"outlined",size:"small",type:"number",sx:Lr,InputProps:{startAdornment:a(sm,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"원"})}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"카지노 베팅 제한액",name:"casinoBettingLimit",value:i.casinoBettingLimit,onChange:O=>qn(O,i,o,s,l),variant:"outlined",size:"small",type:"number",sx:Lr,InputProps:{startAdornment:a(sm,{className:"field-icon"}),endAdornment:a(Dt,{position:"end",children:"원"})}})})]})]})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"메모",name:"memo",value:i.memo,onChange:O=>qn(O,i,o,s,l),variant:"outlined",size:"small",multiline:!0,rows:4,sx:{...Lr,"& .MuiInputBase-root":{height:"auto"},"& .MuiInputBase-inputMultiline":{height:"auto !important",padding:"8px 14px"}}})})]}),m(nr,{className:"action-buttons",children:[a(Se,{onClick:typeof t=="function"?t:()=>{},color:"inherit",className:"cancel-button",sx:{marginBottom:"5px"},children:"취소"}),a(Se,{onClick:_,color:"primary",variant:"contained",className:"submit-button",sx:{marginRight:"20px",marginBottom:"5px"},children:"생성"})]})]})},zse=[{value:"Honor API",label:"Honor API"},{value:"disabled",label:"비활성"}],Nse={members_table:"1.1.0",rolling_history_table:"1.0.0",username_change_history_table:"1.0.0",money_transfer_table:"1.0.0",transaction_history_table:"1.0.0",deposit_table:"1.0.0",withdrawal_table:"1.0.0",money_history_table:"1.0.0",today_settlement_table:"1.0.0",member_settlement_table:"1.0.0",third_party_settlement_table:"1.0.0",daily_settlement_table:"1.0.0",slot_setting_table:"1.0.0",casino_setting_table:"1.0.0",slot_casino_betting_table:"1.0.0",agent_level_table:"1.0.0",permission_table:"1.0.0",change_username_table:"1.0.0",messages_table:"1.0.0",templates_table:"1.0.0",sent_messages_table:"1.0.0",notices_table:"1.0.0",events_table:"1.0.0",popup_table:"1.0.0"},qj=e=>Nse[e]||"1.0.0",d1=zse,Bse=qj("members_table"),Hse=[{id:"checkbox",type:"checkbox",width:50,sortable:!1},{id:"number",type:"number",header:"No.",width:70,align:"center"},{id:"type",header:"유형",type:"hierarchical",width:120,cellRenderer:"chip",sortable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0},{id:"parentTypes",header:"상위에이전트",type:"custom",width:200,sortable:!1,cellRenderer:"parentChips"},{id:"actions",header:"지급/회수",type:"button",width:160,align:"center",buttons:[{label:"지급",color:"primary",variant:"outlined"},{label:"회수",color:"error",variant:"outlined"}],buttonDirection:"row"},{id:"balance",header:"보유금액",type:"default",width:120,align:"right",sortable:!0},{id:"gameMoney",header:"게임머니",type:"custom",width:160,align:"right",sortable:!0,customRenderer:"gameMoneyWithButton"},{id:"rollingPercent",header:"롤링%",type:"custom",width:100,align:"center",sortable:!0,customRenderer:"rollingPercent"},{id:"rollingAmount",header:"롤링금",type:"custom",width:160,align:"right",sortable:!0,customRenderer:"rollingAmountWithButton"},{id:"api",header:"API",type:"dropdown",width:120,align:"center",sortable:!0},{id:"deposit",header:"입금",type:"default",width:120,align:"right",sortable:!0},{id:"withdrawal",header:"출금",type:"default",width:120,align:"right",sortable:!0},{id:"connectionStatus",header:"접속상태",type:"chip",width:100,align:"center",sortable:!0},{id:"lastGame",header:"마지막게임",type:"default",width:150,align:"center",sortable:!0},{id:"name",header:"이름",type:"default",width:100,align:"center",sortable:!0},{id:"accountNumber",header:"계좌번호",type:"default",width:150,align:"center",sortable:!0},{id:"bank",header:"은행",type:"default",width:100,align:"center",sortable:!0},{id:"phone",header:"전화번호",type:"default",width:130,align:"center",sortable:!0},{id:"profitLoss",type:"group",header:"손익",children:[{id:"profitLoss.slot",header:"슬롯",width:100,align:"right",sortable:!0},{id:"profitLoss.casino",header:"카지노",width:100,align:"right",sortable:!0},{id:"profitLoss.total",header:"종합",width:100,align:"right",sortable:!0}]},{id:"lastLoginDate",header:"접속일",type:"datetime",width:150,align:"center",sortable:!0},{id:"registrationDate",header:"가입일",type:"datetime",width:150,align:"center",sortable:!0}];[...d1.map(e=>({value:e.value,label:e.label}))];const Za=e=>{const{pageType:t,dataGenerator:n,requiresMembersData:r=!1,membersDataGenerator:i=null,pagination:o=null}=e;new Date().toISOString();const s=yo(),{types:l,typeHierarchy:c,isLoading:d,error:h,isInitialized:f,convertToHierarchicalData:g}=s,w=[],[x,y]=u.useState([]),[p,v]=u.useState([]),[b,P]=u.useState(!1),[k,C]=u.useState(null),[S,_]=u.useState([]),[T,I]=u.useState(!1),[L,A]=u.useState(null),[D,B]=u.useState([]),[$,N]=u.useState(!1),[F,O]=u.useState(null),[R,E]=u.useState([]),[z,q]=u.useState(!1),[X,H]=u.useState(null),[K,ee]=u.useState([]),[ge,oe]=u.useState(!1),[G,Q]=u.useState(null),[te,U]=u.useState([]),[V,ae]=u.useState(!1),[ne,me]=u.useState(null),[ue,Ae]=u.useState(0),[we,ce]=u.useState([]),[De,le]=u.useState(!1),[se,J]=u.useState(null),[Z,ie]=u.useState([]),[_e,Re]=u.useState(!1),[He,ft]=u.useState(null);u.useEffect(()=>{const gt=f||Object.keys(l||{}).length>0;t==="settlement"&&gt&&(async()=>{P(!0),C(null);try{const xt=await Pe.settlement.getTodaySettlement();if(xt.data.success){const Rt=xt.data.data.map(ht=>({...ht,parentId:ht.parent_id}));v(Rt)}else throw new Error(xt.data.error||"정산 데이터 로드 실패")}catch(xt){C(xt.message),v([])}finally{P(!1)}})()},[t,f,l]),u.useEffect(()=>{t==="rollingHistory"&&f&&(async()=>{I(!0),A(null);try{const et=await Pe.rollingHistory.getAll({page:0,rowsPerPage:1e3});if(et.data.success)_(et.data.data);else throw new Error(et.data.error||"롤링금전환내역 데이터 로드 실패")}catch(et){A(et.message),_([])}finally{I(!1)}})()},[t,f]),u.useEffect(()=>{t==="history"&&f&&(async()=>{N(!0),O(null);try{const et=await Pe.moneyHistory.getAll({page:0,rowsPerPage:1e3,format:"transactionHistory"});if(et.data.success)B(et.data.data);else throw new Error(et.data.error||"충환내역 데이터 로드 실패")}catch(et){O(et.message),B([])}finally{N(!1)}})()},[t,f]),u.useEffect(()=>{t==="moneyHistory"&&f&&(async()=>{N(!0),O(null);try{const et=await Pe.moneyHistory.getAll({page:0,rowsPerPage:1e3,type:"bonus,adjustment"});if(et.data.success)B(et.data.data);else throw new Error(et.data.error||"머니처리내역 데이터 로드 실패")}catch(et){O(et.message),B([])}finally{N(!1)}})()},[t,f]),u.useEffect(()=>{t==="moneyTransfer"&&f&&(async()=>{q(!0),H(null);try{const et=await Pe.moneyTransfer.getAll({page:0,rowsPerPage:1e3});if(et.data.success)E(et.data.data);else throw new Error(et.data.error||"머니이동내역 데이터 로드 실패")}catch(et){H(et.message),E([])}finally{q(!1)}})()},[t,f]),u.useEffect(()=>{t==="slotCasino"&&(async()=>{ae(!0),me(null);try{const et=await Pe.betting.getSlotCasino({gameType:"all",page:0,rowsPerPage:1e3});if(et.data.success)et.data.data.length,et.data.totalCount,U(et.data.data),Ae(et.data.totalCount||et.data.data.length);else throw new Error(et.data.error||"베팅내역 데이터 로드 실패")}catch(et){me(et.message),console.error("[usePageData] 베팅내역 데이터 로드 실패:",et),U([]),Ae(0)}finally{ae(!1)}})()},[t]),u.useEffect(()=>{t==="dailySettlement"&&(async()=>{le(!0),J(null);try{const et=await Pe.settlement.getDailySettlement();if(et.data.success)ce(et.data.data);else throw new Error(et.data.error||"일자별정산 데이터 로드 실패")}catch(et){J(et.message),ce([])}finally{le(!1)}})()},[t]),u.useEffect(()=>{t==="thirdPartySettlement"&&(async()=>{Re(!0),ft(null);try{const et=await Pe.settlement.getThirdPartySettlement();if(et.data.success)ie(et.data.data);else throw new Error(et.data.error||"게임사별정산 데이터 로드 실패")}catch(et){ft(et.message),ie([])}finally{Re(!1)}})()},[t]),u.useEffect(()=>{t==="members"&&(async()=>{oe(!0),Q(null);try{const et=await Pe.members.getAll();if(et.data){const xt=et.data.data||et.data;xt.length;const Rt=xt.map(ht=>{let jt=ht.parentTypes||[];const $t={id:ht.agent_level_id,label:ht.agent_level_label||ht.agent_level_name||"미지정",backgroundColor:ht.agent_level_bg_color||"#e0e0e0",borderColor:ht.agent_level_border_color||"#757575",color:"default",order:ht.level_order||ht.agent_level_order||999};return{...ht,userId:ht.nickname?`${ht.username}
${ht.nickname}`:ht.username,type:$t,parentId:ht.parentId,parentTypes:jt,levelOrder:ht.level_order||ht.agent_level_order||$t.order||999}});Rt.length,ee(Rt)}}catch(et){console.error("회원 데이터 로드 에러:",et),Q(et.message),ee([])}finally{oe(!1)}})()},[t]);const St=u.useMemo(()=>t==="members"?(K.length,K):t==="couponCreate"||t==="couponHistory"?x:t==="settlement"?p:t==="rollingHistory"?S:t==="moneyHistory"||t==="history"?D:t==="moneyTransfer"?R:t==="slotCasino"?(te.length,te):t==="dailySettlement"?we:t==="thirdPartySettlement"?Z:[],[t,K,x,p,S,D,R,te,we,Z]),Tt=u.useCallback(async()=>{if(t==="members"&&f)(async()=>{oe(!0),Q(null);try{const et=await Pe.members.getAll();if(et.data){const Rt=(et.data.data||et.data).map(ht=>{var Ut,Bt,Kt,Ft;let jt=ht.parentTypes||[];const $t={id:ht.agent_level_id,label:((Ut=ht.type)==null?void 0:Ut.label)||ht.agent_level_name||ht.level_name||"미지정",backgroundColor:((Bt=ht.type)==null?void 0:Bt.backgroundColor)||ht.background_color||"#e0e0e0",borderColor:((Kt=ht.type)==null?void 0:Kt.borderColor)||ht.border_color||"#757575",color:((Ft=ht.type)==null?void 0:Ft.color)||"default",order:ht.level_order||ht.agent_level_order||999};return{...ht,userId:ht.nickname?`${ht.username}
${ht.nickname}`:ht.username,type:$t,parentId:ht.parentId,parentTypes:jt,levelOrder:ht.level_order||ht.agent_level_order||$t.order||999}});ee(Rt)}}catch(et){Q(et.message),ee([])}finally{oe(!1)}})();else if(t==="settlement"&&f){P(!0),C(null);try{const gt=await Pe.settlement.getTodaySettlement();if(gt.data.success){const et=gt.data.data.map(xt=>({...xt,parentId:xt.parent_id}));v(et)}else throw new Error(gt.data.error||"정산 데이터 로드 실패")}catch(gt){C(gt.message),v([])}finally{P(!1)}}else if(t==="dailySettlement"){le(!0),J(null);try{const gt=await Pe.settlement.getDailySettlement();if(gt.data.success)ce(gt.data.data);else throw new Error(gt.data.error||"일자별정산 데이터 로드 실패")}catch(gt){J(gt.message),ce([])}finally{le(!1)}}else if(t==="thirdPartySettlement"){Re(!0),ft(null);try{const gt=await Pe.settlement.getThirdPartySettlement();if(gt.data.success)ie(gt.data.data);else throw new Error(gt.data.error||"게임사별정산 데이터 로드 실패")}catch(gt){ft(gt.message),ie([])}finally{Re(!1)}}},[t,f]);return{data:St,membersData:w,setData:t==="couponCreate"||t==="couponHistory"?y:void 0,types:l,typeHierarchy:c,isLoading:t==="members"?ge||d:t==="settlement"?b||d:t==="rollingHistory"?T||d:t==="moneyHistory"||t==="history"?$||d:t==="moneyTransfer"?z||d:t==="slotCasino"?V||d:t==="dailySettlement"?De||d:t==="thirdPartySettlement"&&_e||d,error:t==="members"?G||h:t==="settlement"?k||h:t==="rollingHistory"?L||h:t==="moneyHistory"||t==="history"?F||h:t==="moneyTransfer"?X||h:t==="slotCasino"?ne||h:t==="dailySettlement"?se||h:t==="thirdPartySettlement"&&He||h,isInitialized:f,totalCount:t==="slotCasino"?ue:(St==null?void 0:St.length)||0,convertToHierarchicalData:g,refreshPageData:Tt}},Wse=()=>{On();const e=zn(pe=>pe.auth.user);zi();const{handleRefresh:t,showNotification:n}=$a(),{socketService:r,sequenceService:i}=ni(),[o,s]=u.useState({});u.useRef(0);const[l,c]=u.useState(!1),[d,h]=u.useState(new Set),f=u.useRef(null),[g,w]=u.useState(!1),[x,y]=u.useState({}),{types:p,isInitialized:v}=yo(),[b,P]=u.useState([]),[k,C]=u.useState(!0),[S,_]=u.useState(null),T=u.useCallback(async()=>{try{const pe=await Pe.userStatus.getAll();if(pe.status===200){const st=pe.data;if(st.success&&st.data.users){const Le={};st.data.users.forEach(Vt=>{Le[Vt.userId]={status:Vt.status,lastActivity:Vt.lastActivity,gameInfo:Vt.gameInfo}}),y(Le)}}else pe.status===403&&console.debug("[MembersPage] 사용자 상태 조회 권한 없음 - 선택적 기능이므로 무시")}catch(pe){pe.status!==403&&console.error("[MembersPage] 사용자 상태 조회 오류:",pe)}},[]),I=u.useCallback(async()=>{try{C(!0);const pe=await Pe.members.getAll();if(pe.data,pe.data&&pe.data.success){pe.data.data.slice(0,2).map(Le=>({id:Le.id,username:Le.username,agent_level_id:Le.agent_level_id,agent_level_id_type:typeof Le.agent_level_id,agent_level_name:Le.agent_level_name}));const st=pe.data.data.map(Le=>{var rn;if(Le.agent_level_id===1||Le.is_top_level===1){const It={id:Le.agent_level_id,label:Le.agent_level_name||"",color:"default",backgroundColor:Le.agent_level_bg_color||"#e0e0e0",borderColor:Le.agent_level_border_color||"#757575"};return{...Le,type:It,userId:Le.nickname?`${Le.username}
${Le.nickname}`:Le.username,parentTypes:Le.parentTypes,balance:"-",gameMoney:"-",deposit:"-",withdrawal:"-",rollingPercent:"-",rolling_slot_percent:0,rolling_casino_percent:0,rollingAmount:0,rolling_slot_amount:0,rolling_casino_amount:0,api:"-",connectionStatus:"-",lastGame:"-",name:"-",accountNumber:"-",bank:"-",phone:"-",profitLoss:(()=>{var on,Mn,Jn,pr,Mr,Qr,Co,Si,ns,ya;try{if(typeof Le.profitLoss=="string"){const So=JSON.parse(Le.profitLoss);return{slot:((Mn=(on=So.byGameType)==null?void 0:on.slot)==null?void 0:Mn.profitLoss)||0,casino:((pr=(Jn=So.byGameType)==null?void 0:Jn.casino)==null?void 0:pr.profitLoss)||0,total:((Mr=So.summary)==null?void 0:Mr.netProfitLoss)||0}}else if(Le.profitLoss&&typeof Le.profitLoss=="object")return{slot:((Co=(Qr=Le.profitLoss.byGameType)==null?void 0:Qr.slot)==null?void 0:Co.profitLoss)||0,casino:((ns=(Si=Le.profitLoss.byGameType)==null?void 0:Si.casino)==null?void 0:ns.profitLoss)||0,total:((ya=Le.profitLoss.summary)==null?void 0:ya.netProfitLoss)||0}}catch(So){console.error("profitLoss 파싱 오류:",So)}return{slot:0,casino:0,total:0}})(),connectionDate:"-",registrationDate:Le.registrationDate,isTopLevel:!0}}const nn={id:Le.agent_level_id,label:Le.agent_level_name||"",color:"default",backgroundColor:Le.agent_level_bg_color||"#e0e0e0",borderColor:Le.agent_level_border_color||"#757575"};return{...Le,type:nn,userId:Le.nickname?`${Le.username}
${Le.nickname}`:Le.username,parentTypes:Le.parentTypes||[],balance:Le.balance||0,gameMoney:Le.gameMoney||0,deposit:Le.deposit||0,withdrawal:Le.withdrawal||0,api:Le.api&&Le.api!=="disabled"&&Le.api&&Le.api.toLowerCase().startsWith("api")?"Honor API":Le.api||"-",isTopLevel:!1,connectionStatus:((rn=x[Le.id])==null?void 0:rn.status)||"offline",profitLoss:(()=>{var It,on,Mn,Jn,pr,Mr,Qr,Co,Si,ns;try{if(typeof Le.profitLoss=="string"){const ya=JSON.parse(Le.profitLoss);return{slot:((on=(It=ya.byGameType)==null?void 0:It.slot)==null?void 0:on.profitLoss)||0,casino:((Jn=(Mn=ya.byGameType)==null?void 0:Mn.casino)==null?void 0:Jn.profitLoss)||0,total:((pr=ya.summary)==null?void 0:pr.netProfitLoss)||0}}else if(Le.profitLoss&&typeof Le.profitLoss=="object")return{slot:((Qr=(Mr=Le.profitLoss.byGameType)==null?void 0:Mr.slot)==null?void 0:Qr.profitLoss)||0,casino:((Si=(Co=Le.profitLoss.byGameType)==null?void 0:Co.casino)==null?void 0:Si.profitLoss)||0,total:((ns=Le.profitLoss.summary)==null?void 0:ns.netProfitLoss)||0}}catch(ya){console.error("profitLoss 파싱 오류:",ya)}return{slot:0,casino:0,total:0}})(),lastGame:Le.lastGame||"-",connectionDate:Le.connectionDate||"-",name:Le.name||Le.realname||"-",accountNumber:Le.accountNumber||Le.account_number||"-",bank:Le.bank||Le.bank_name||"-",phone:Le.phone||"-",lastLoginDate:Le.last_login_at||"-",registrationDate:Le.created_at||Le.registrationDate||"-",rollingPercent:Le.rolling_slot_percent||Le.rolling_casino_percent?`S:${Le.rolling_slot_percent||0}% / C:${Le.rolling_casino_percent||0}%`:"-",rolling_slot_percent:Le.rolling_slot_percent||0,rolling_casino_percent:Le.rolling_casino_percent||0,rollingAmount:Number(Le.rolling_slot_amount||0)+Number(Le.rolling_casino_amount||0),rolling_slot_amount:Number(Le.rolling_slot_amount||0),rolling_casino_amount:Number(Le.rolling_casino_amount||0)}});if(e&&e.agent_level_id!==1&&!st.some(Vt=>Vt.id===e.id))try{const Vt=await Pe.members.getById(e.id);if(Vt.data&&Vt.data.success){const nn=Vt.data.data,rn={...nn,userId:nn.nickname?`${nn.username}
${nn.nickname}`:nn.username,balance:nn.balance,gameMoney:nn.gameMoney,deposit:nn.deposit||0,withdrawal:nn.withdrawal||0,api:nn.api&&nn.api!=="disabled"&&nn.api.toLowerCase().startsWith("api")?"Honor API":nn.api,isTopLevel:!1,parentId:nn.parentId||nn.parent_id||null};st.unshift(rn)}}catch(Vt){console.error("본인 정보 조회 실패:",Vt)}st.slice(0,2).map(Le=>{var Vt;return{id:Le.id,username:Le.username,agent_level_id:Le.agent_level_id,agent_level_id_type:typeof Le.agent_level_id,agent_level_name:Le.agent_level_name||((Vt=Le.type)==null?void 0:Vt.label)}}),P(st)}}catch(pe){console.error("회원 데이터 조회 실패:",pe),_(pe.message)}finally{C(!1)}},[]);u.useEffect(()=>{T().then(()=>{I()})},[I,T]),u.useEffect(()=>{if(!r||!i)return;const pe=It=>{let on=It,Mn=null,Jn=null;if(It.data&&It.sequence){if(!i.updateSequence(It.sequence))return;on=It.data}Mn=on.memberId||on.userId||on.id,Jn=on.afterBalance||on.balance||on.newBalance;const pr=on.rollingAmount;if(!Mn||Jn===null||Jn===void 0){console.error("Invalid balance update event:",It);return}s(Mr=>({...Mr,[`balance_${Mn}`]:on})),P(Mr=>Mr.map(Qr=>{if(Qr.id===Mn){if(Qr.agent_level_id===1||Qr.is_top_level===1)return Qr;const Si={...Qr,balance:Jn,deposit:on.deposit!==void 0?on.deposit:Qr.deposit,withdrawal:on.withdrawal!==void 0?on.withdrawal:Qr.withdrawal,_realtimeUpdated:!0,_updateTimestamp:It.timestamp||new Date};return pr!=null&&(Si.rollingAmount=pr),Si}return Qr}))};i.setOnMissingEvents(It=>{It.type==="balance:update"&&pe(It)}),r.on("realtime:balance",pe),r.on("balance:update",pe),r.on("balance:changed",pe),r.on("member:balance:updated",pe),r.on("member:balance-changed",pe);const st=It=>{pe(It.detail)};window.addEventListener("memberBalanceUpdated",st),window.addEventListener("balanceChanged",st),window.addEventListener("realtimeBalanceUpdate",st);const Le=It=>{var Mn;const on=It.userId||((Mn=It.data)==null?void 0:Mn.userId);on&&h(Jn=>{const pr=new Set(Jn);return pr.add(on),pr})},Vt=It=>{var Mn;const on=It.userId||((Mn=It.data)==null?void 0:Mn.userId);on&&h(Jn=>{const pr=new Set(Jn);return pr.delete(on),pr})},nn=It=>{const on=It.data||It;on.userId&&(y(Mn=>({...Mn,[on.userId]:{status:on.status,timestamp:on.timestamp,styleInfo:on.styleInfo}})),P(Mn=>Mn.map(Jn=>Jn.id===on.userId?{...Jn,connectionStatus:on.status}:Jn)))};r.on("game:started",Le),r.on("game:ended",Vt),r.on("user:status-changed",nn);const rn=It=>{JSON.stringify(It,null,2);const on=It.data||It,{memberId:Mn,userId:Jn,rollingAmount:pr,rolling_slot_amount:Mr,rolling_casino_amount:Qr,timestamp:Co}=on,Si=Mn||Jn;P(ns=>ns.map(ya=>{if(ya.id===Si){const So=parseFloat(Mr!==void 0?Mr:ya.rolling_slot_amount||0),dS=parseFloat(Qr!==void 0?Qr:ya.rolling_casino_amount||0),tF=So+dS;return{...ya,rollingAmount:tF,rolling_slot_amount:So,rolling_casino_amount:dS,lastUpdated:Co||new Date}}return ya}))};return r.on("rolling:update",rn),r.on("member:rolling:updated",rn),()=>{r.off("realtime:balance",pe),r.off("balance:update",pe),r.off("balance:changed",pe),r.off("member:balance:updated",pe),r.off("member:balance-changed",pe),r.off("game:started",Le),r.off("game:ended",Vt),r.off("user:status-changed",nn),r.off("rolling:update",rn),r.off("member:rolling:updated",rn),window.removeEventListener("memberBalanceUpdated",st),window.removeEventListener("balanceChanged",st),window.removeEventListener("realtimeBalanceUpdate",st),i.setOnMissingEvents(null)}},[r,i]);const L=u.useCallback(async()=>{t("회원 목록"),await I()},[t,I]);u.useEffect(()=>(d.size>0&&!l?(Array.from(d),c(!0),I(),f.current=setInterval(()=>{I()},1e4)):d.size===0&&l&&(c(!1),f.current&&(clearInterval(f.current),f.current=null)),()=>{f.current&&(clearInterval(f.current),f.current=null)}),[d.size,l,I]);const{containerRef:A,tableHeight:D,autoHeight:B,toggleAutoHeight:$,setManualHeight:N}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:F,getResizeHandleProps:O}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:pe=>{B&&$(!1),N(`${pe}px`)}}),{indentMode:R,toggleIndentMode:E}=qs(!0),z=u.useCallback((pe,st=null)=>pe.filter(Le=>Le.parentId===st).map(Le=>({...Le,children:z(pe,Le.id)})).filter(Le=>Le.id!==void 0),[]),[q,X]=u.useState(0),[H,K]=u.useState(25),ee=u.useMemo(()=>{if(!b||b.length===0)return[];if(e&&e.agent_level_id!==1){const st=b.find(Le=>Le.id==e.id||Le.id===e.id||String(Le.id)===String(e.id));if(st){const Le=z(b,st.id);return[{...st,parentId:null,children:Le}]}else return z(b)}return z(b)},[b,z,e]),[ge,oe]=u.useState({}),G=u.useMemo(()=>{if(!ee||ee.length===0)return[];const pe=(nn,rn=!0)=>{const It=[];return nn.forEach(on=>{rn&&on.id&&on.agent_level_id!==1&&It.push(on.id),on.children&&on.children.length>0&&ge[on.id]&&It.push(...pe(on.children,!0))}),It},st=pe(ee),Le=q*H,Vt=Le+H;return st.slice(Le,Vt)},[ee,ge,q,H]);Mse(G,3e4,!0);const Q=u.useCallback(pe=>{oe(st=>({...st,[pe]:!st[pe]}))},[]);u.useCallback(pe=>{const st={},Le=(Vt,nn=!1)=>{Vt.forEach(rn=>{rn.children&&rn.children.length>0&&(st[rn.id]=pe,Le(rn.children,!1))})};Le(ee,!0),oe(st)},[ee]),u.useEffect(()=>{if(ee.length>0){const pe={},st=(Le,Vt=!1)=>{Le.forEach(nn=>{nn.children&&nn.children.length>0&&(pe[nn.id]=!0,st(nn.children,!1))})};st(ee,!0),oe(pe)}},[ee,e]);const{tableHeaderRef:te,getTableHeaderStyles:U}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),[V,ae]=u.useState(!1),[ne,me]=u.useState(null),[ue,Ae]=u.useState("deposit"),[we,ce]=u.useState(!1),[De,le]=u.useState(null),[se,J]=u.useState(!1),Z=u.useCallback(pe=>{if(e&&pe.id===e.id){alert("자기 자신에게는 머니를 지급할 수 없습니다.");return}me(pe),Ae("deposit"),ae(!0)},[e]),ie=u.useCallback(pe=>{if(e&&pe.id===e.id){alert("자기 자신으로부터는 머니를 회수할 수 없습니다.");return}me(pe),Ae("withdraw"),ae(!0)},[e]),_e=u.useCallback(async pe=>{var Vt,nn;const st=pe.action==="deposit"?"지급":"회수",Le=(ne==null?void 0:ne.name)||(ne==null?void 0:ne.userId)||"회원";try{const rn={memberId:ne.id,action:pe.action,amount:pe.amount,paymentType:pe.paymentType,note:pe.note},It=await Pe.moneyTransfer.adminTransfer(rn);It.data.success?(alert(`${Le}님에게 ${pe.amount.toLocaleString()}원 ${st} 처리가 완료되었습니다.`),ae(!1),I()):alert(`${st} 처리 실패: ${It.data.message||"알 수 없는 오류"}`)}catch(rn){console.error("머니 지급/회수 오류:",rn),alert(`${st} 처리 중 오류가 발생했습니다: ${((nn=(Vt=rn.response)==null?void 0:Vt.data)==null?void 0:nn.message)||rn.message}`)}},[ne,I]),Re=u.useCallback(async(pe,st=!1)=>{var Le,Vt,nn,rn;try{const It=await Pe.honorSync.withdrawFromGame({userId:pe});if(It.data.success){const on=It.data.withdrawnAmount||0;return ne&&ne.username===pe&&me(Mn=>({...Mn,balance:(Mn.balance||0)+on,gameMoney:0})),st||alert(`${on.toLocaleString()}원이 보유금으로 전환되었습니다.`),I(),{success:!0,amount:on}}else return st||alert("게임머니 전환 실패: "+(It.data.error||"알 수 없는 오류")),{success:!1,error:It.data.error}}catch(It){return console.error("게임머니 전환 오류:",It),st||alert("게임머니 전환 중 오류가 발생했습니다: "+(((Vt=(Le=It.response)==null?void 0:Le.data)==null?void 0:Vt.error)||It.message)),{success:!1,error:((rn=(nn=It.response)==null?void 0:nn.data)==null?void 0:rn.error)||It.message}}},[I,ne]),He=u.useCallback(async(pe,st="all")=>{var Le,Vt,nn,rn;try{const It=b.find(Jn=>Jn.username===pe||Jn.id===pe),on=(It==null?void 0:It.id)||pe,Mn=await Pe.rollingTransfer.transfer({memberId:on,transferType:st});if(Mn.data.success){const Jn=((Le=Mn.data.data)==null?void 0:Le.transferAmount)||0,pr=((Vt=Mn.data.data)==null?void 0:Vt.afterRolling)||{slot:0,casino:0};ne&&(ne.username===pe||ne.id===on)&&me(Mr=>({...Mr,balance:(Mr.balance||0)+Jn,rollingAmount:pr.slot+pr.casino,rolling_slot_amount:pr.slot,rolling_casino_amount:pr.casino})),alert(Mn.data.message),I()}else alert("롤링금 전환 실패: "+(Mn.data.error||"알 수 없는 오류"))}catch(It){console.error("롤링금 전환 오류:",It),alert("롤링금 전환 중 오류가 발생했습니다: "+(((rn=(nn=It.response)==null?void 0:nn.data)==null?void 0:rn.error)||It.message))}},[I,ne,b]),ft=u.useCallback(()=>{ae(!1),me(null),Ae("deposit")},[]),St=u.useCallback(async pe=>{le(null),ce(!1),await new Promise(st=>setTimeout(st,50));try{const st=await Pe.members.getById(pe.id);if(st.data&&st.data.success){const Le=st.data.data,Vt={...pe,...Le,userId:pe.userId,type:pe.type};le(Vt),ce(!0)}else alert("회원 정보를 불러올 수 없습니다.")}catch(st){console.error("회원 상세 조회 실패:",st),alert("회원 정보 조회 중 오류가 발생했습니다.")}},[]),Tt=u.useCallback(()=>{ce(!1),le(null)},[]),gt=u.useCallback(async pe=>{var Le,Vt;const st={id:pe.id,nickname:pe.nickname,status:typeof pe.status=="object"?pe.status.label:pe.status,name:pe.name,phone:pe.phone,bank:pe.bank,accountNumber:pe.accountNumber,accountHolder:pe.accountHolder,referrer:pe.referrer,memo:pe.memo,language:pe.language,browserTitle:pe.browserTitle,usernameChangeEnabled:pe.usernameChangeEnabled,slot_percent:pe.slot_percent,casino_percent:pe.casino_percent,agent_level_id:pe.agent_level_id,designTemplateId:pe.designTemplateId};try{if((await Pe.members.update(pe.id,st)).data.success){let rn="";if(pe.designTemplateId!==void 0&&pe.selectedDomainId)try{(await Pe.post("/design-templates/assign/domain",{domainId:pe.selectedDomainId,templateId:pe.designTemplateId||null})).data.success&&(rn=pe.designTemplateId?`
선택한 도메인에 디자인 템플릿이 적용되었습니다.`:`
선택한 도메인의 디자인 템플릿이 제거되었습니다.`)}catch(on){console.error("디자인 템플릿 처리 오류:",on)}let It="";if(pe.grantPermissionTo||pe.delegatePermissionType||pe.selectedDomainId!==void 0)try{const Mn=await(await zae(async()=>{const{default:Jn}=await import("./userDomainPermissionService-DizwxGXC.js");return{default:Jn}},__vite__mapDeps([0,1,2,3,4]))).default.handleMemberUpdate(pe.id,{grantPermissionTo:pe.grantPermissionTo,delegatePermissionType:pe.delegatePermissionType,selectedDomainId:pe.selectedDomainId},e);if(Mn.success&&Mn.results.length>0){const Jn=Mn.results.filter(Mr=>Mr.success).length,pr=Mn.results.filter(Mr=>!Mr.success).length;Jn>0&&pr===0?It=`
도메인 권한이 ${Jn}명에게 성공적으로 부여되었습니다.`:Jn>0&&pr>0?It=`
도메인 권한: 성공 ${Jn}명, 실패 ${pr}명`:pr>0&&(It=`
도메인 권한 부여에 실패했습니다. (${pr}명)`)}}catch(on){console.error("도메인 권한 처리 오류:",on)}alert(`${pe.nickname||pe.username}님의 정보가 저장되었습니다.${rn}${It}`),await I(),Tt()}else alert("회원정보 수정에 실패했습니다.")}catch(nn){alert(`오류가 발생했습니다: ${((Vt=(Le=nn.response)==null?void 0:Le.data)==null?void 0:Vt.error)||nn.message}`)}},[Tt,I,e]),et=u.useCallback(()=>{J(!0)},[]),xt=u.useCallback(()=>{J(!1)},[]),Rt=u.useCallback(pe=>{Array.isArray(pe)?n(`${pe.length}명의 회원이 생성되었습니다.`,"success"):n(`${pe.nickname||pe.username} 회원이 생성되었습니다.`,"success"),I(),xt()},[xt,I,n]),ht=u.useCallback(()=>{alert("회원 목록을 엑셀로 다운로드합니다.")},[]),jt=u.useCallback(()=>{alert("회원 목록을 인쇄합니다.")},[]),{checkedItems:$t,sortConfig:Ut,allChecked:Bt,handleSort:Kt,handleCheck:Ft,handleToggleAll:Et,handleToggleExpand:Ot}=Nn({data:ee,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:ge,indentMode:!0,page:q,rowsPerPage:H}),zt=u.useMemo(()=>Hse.map(pe=>pe.id==="actions"&&pe.buttons?{...pe,buttons:pe.buttons.map(st=>({...st,onClick:st.label==="지급"?Z:ie}))}:pe.id==="type"&&pe.type==="hierarchical"?{...pe,onToggle:st=>{const Le=ee.find(Vt=>Vt.id===st);if(Le&&Le.type){const Vt=typeof Le.type=="object"?Le.type.id:Le.type;Q(Vt)}}}:pe.id==="userId"?{...pe,clickable:!0,onClick:st=>{St(st)}}:(pe.id==="gameMoney"||pe.id==="rollingAmount",pe)),[Z,ie,ee,Q,St]),Wt=u.useMemo(()=>{var Vt;Object.keys(p||{}).length,b!=null&&b.length,(Vt=b==null?void 0:b.slice(0,2))==null||Vt.map(nn=>({agent_level_id:nn.agent_level_id,agent_level_name:nn.agent_level_name}));const pe={1:"본사",2:"부본사",3:"총판",4:"매장",5:"회원"};let st=[];if(Object.keys(p||{}).length>0)st=Object.entries(p).map(([nn,rn])=>({value:nn,label:rn.label}));else{const nn=Array.from(new Set(b.map(rn=>rn.agent_level_id))).filter(rn=>rn);[1,2,3,4,5].forEach(rn=>{nn.includes(rn)||nn.push(rn)}),st=nn.sort((rn,It)=>rn-It).map(rn=>{const It=b.find(Mn=>Mn.agent_level_id===rn),on=(It==null?void 0:It.agent_level_name)||pe[rn]||`레벨 ${rn}`;return{value:`agent_level_${rn}`,label:on}})}return[{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"online",label:"온라인"},{value:"offline",label:"오프라인"},{value:"suspended",label:"정지"}]},{id:"type",label:"회원유형",items:[{value:"",label:"전체"},...st]},{id:"api",label:"API",items:[{value:"",label:"전체"},...d1.map(nn=>({value:nn.value,label:nn.label}))]}]},[v,p,d1]),{activeFilters:kt,isDateFilterActive:Mt,isDateFilterOpen:Ht,dateFilterAnchorEl:qt,handleOpenDateFilter:Yt,handleCloseDateFilter:Xt,handleDateRangeChange:tn,resetDateFilter:Fe,dateRange:je,page:Oe,rowsPerPage:ke,totalCount:bt,totalPages:it,handlePageChange:fe,handleRowsPerPageChange:be,filteredData:Te,displayData:Ne,filterValues:Ve,handleFilter:Ge,handleClearFilters:At}=yr({columns:zt,data:ee,defaultRowsPerPage:25,hierarchical:!0,filterOptions:{initialFilters:{status:"all",type:"all",api:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:b.length,onExcelDownload:ht,onPrint:jt}}),{searchText:Qe,totalItems:Ie,sequentialPageNumbers:Xe,hasPinnedColumns:ve,isGridReady:at,handleSearchChange:We,handleClearSearch:xe,togglePageNumberMode:qe,toggleColumnPin:Ee,setGridReady:Y}=Rn({initialTotalItems:b.length,tableId:"membersPage",onSearch:pe=>{Oe!==0&&fe(0)},onToggleColumnPin:pe=>{pe?Gn():Xn()}});u.useEffect(()=>{Y(!0)},[Y]),u.useEffect(()=>(window.handleGameMoneyTransfer=Re,window.handleRollingTransfer=He,()=>{delete window.handleGameMoneyTransfer,delete window.handleRollingTransfer}),[Re,He]);const{columns:he,dragInfo:ze,pinnedColumns:de,handleDragStart:Ze,handleDragEnd:lt,handleDragOver:Qt,handleDrop:tr,updateColumns:$n,clearAllPinnedColumns:Xn,setDefaultPinnedColumns:Gn}=sr({initialColumns:zt,tableId:"members_table",version:Bse,onColumnOrderChange:pe=>{}}),{columnVisibility:Xr,visibleColumns:ra,hiddenColumnsCount:ja,toggleableColumns:ma,toggleColumnVisibility:Ke,showAllColumns:Pt,resetToDefault:en}=dr(he,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"members_table"}),[fn,Ue]=u.useState(null),ct=!!fn,Je=u.useCallback(pe=>{Ue(pe)},[]),Nt=u.useCallback(()=>{Ue(null)},[]),br=!0,vr={handleDragStart:Ze,handleDragEnd:lt,handleDragOver:Qt,handleDrop:tr},Jr=u.useCallback(pe=>{Q(pe),typeof Ot=="function"&&Ot(pe)},[Q,Ot]),ka=u.useCallback((pe,st,Le)=>{switch(pe.length,pe[0]&&(pe[0].id,pe[0].username,pe[0].agent_level_id,pe[0].agent_level_id),st){case"status":return Le==="all"||Le===""?pe:pe.filter(It=>{switch(Le){case"online":return It.connectionStatus==="온라인";case"offline":return It.connectionStatus==="오프라인";case"suspended":return It.connectionStatus==="정지";default:return!0}});case"type":if(!Le||Le===""||!Le.startsWith("agent_level_"))return pe;const Vt=parseInt(Le.replace("agent_level_",""));return pe.filter(It=>Number(It.agent_level_id)===Vt);case"api":return Le==="all"||Le===""?pe:pe.filter(It=>It.api===Le);case"date":let rn=[...pe];return Le.startDate&&(rn=rn.filter(It=>It.id>=3)),Le.endDate&&(rn=rn.filter(It=>It.id<=6)),rn;default:return pe}},[]),Fa=u.useCallback((pe,st)=>{const Le=st==="all"||st===""?"":st;Ge({[pe]:Le})},[Ge]),za=u.useMemo(()=>{const pe={...kt};return Object.keys(pe).forEach(st=>{pe[st]==="all"&&(pe[st]="")}),pe},[kt]),wo=Dr({data:b,activeFilters:za,searchText:Qe,isDateFilterActive:Mt,dateRange:je,filterCallback:ka}),ai=u.useMemo(()=>wo?wo.map(pe=>pe.id):[],[wo]),tt=u.useMemo(()=>{const pe=Object.values(za).some(Vt=>Vt&&Vt!=="");return Qe&&Qe.trim()!==""?!b||!ai||ai.length===0?[]:b.filter(Vt=>ai.includes(Vt.id)):pe?!b||!ai||ai.length===0?[]:b.filter(Vt=>ai.includes(Vt.id)):(ee==null?void 0:ee.length)>0?ee:b},[ee,ai,za,Qe,b]);u.useEffect(()=>{},[Oe,ke]);const wt=tt||[],yt=u.useMemo(()=>{const pe=st=>{if(!st||!st.length)return 0;let Le=0;return st.forEach(Vt=>{Le++,Vt.children&&Vt.children.length>0&&(Le+=pe(Vt.children))}),Le};return pe(wt)},[wt]);u.useEffect(()=>{wt.length},[wt.length,Ie,yt]);const dn=u.useCallback((pe,st)=>{let Le=st;if(typeof pe=="number"&&st===void 0&&(Le=pe),typeof Le!="number"){console.error("유효하지 않은 페이지 번호:",Le);return}X(Le),fe(Le)},[q,fe]),En=u.useCallback(pe=>{if(!pe||!pe.target||!pe.target.value){console.error("회원 행 수 변경 이벤트 오류:",pe);return}const st=parseInt(pe.target.value,10);K(st),X(0),be(pe)},[H,be]),[Pn,Tr]=u.useState(Date.now());u.useEffect(()=>{Tr(Date.now())},[q,H]);const Be=u.useMemo(()=>!wt||wt.length===0?[]:wt,[wt,q,H,yt]),Ye=u.useMemo(()=>ra.map(st=>st.id==="actions"&&st.buttons?{...st,buttons:st.buttons.map(Le=>({...Le,onClick:Le.label==="지급"?Z:ie}))}:st.id==="userId"?{...st,clickable:!0,onClick:Le=>{St(Le)}}:st),[ra,Z,ie,St]),mt=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:g?"page":"all",customFilter:pe=>{const st=pe.agent_level_id||pe.agent_level||0;return st!==1&&st!==2}},columns:{balance:{type:"sum",format:"currency"},gameMoney:{type:"sum",format:"currency"},deposit:{type:"sum",format:"currency"},withdrawal:{type:"sum",format:"currency"},rollingAmount:{type:"sum",format:"currency"},rolling_slot_amount:{type:"sum",format:"currency"},rolling_casino_amount:{type:"sum",format:"currency"},"profitLoss.slot":{type:"sum",format:"currency"},"profitLoss.casino":{type:"sum",format:"currency"},"profitLoss.total":{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[g]);return m(vn,{children:[a(Cn,{title:"회원관리",onDisplayOptionsClick:Je,showAddButton:!0,showRefreshButton:!0,addButtonText:"회원 추가",onAddClick:et,onRefreshClick:L,sx:{mb:2}}),a(or,{anchorEl:fn,open:ct,onClose:Nt,toggleableColumns:ma,columnVisibility:Xr,onToggleColumn:Ke,onShowAll:Pt,onReset:en,hiddenColumnsCount:ja,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"회원 목록",totalItems:yt,countLabel:"총 ##count##명의 회원",indentMode:R,toggleIndentMode:E,sequentialPageNumbers:Xe,togglePageNumberMode:qe,hasPinnedColumns:ve,isGridReady:at,toggleColumnPin:Ee,searchText:Qe,handleSearchChange:We,handleClearSearch:xe,onRefresh:L,showIndentToggle:!0,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"회원 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:he,filterValues:Ve||{},activeFilters:za||{},filterOptions:Wt,handleFilterChange:Fa,onFilter:Ge,onClearFilters:At,isDateFilterActive:Mt,handleOpenDateFilter:Yt,resetDateFilter:Fe},paginationProps:{count:yt,page:q,rowsPerPage:H,onPageChange:dn,onRowsPerPageChange:En,totalCount:yt,onExcelDownload:ht,onPrint:jt}})}),m(j,{sx:{width:"100%",mt:2},ref:A,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",q+1," / ",Math.ceil(yt/H)," (페이지당 ",H,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Ye,data:Be,checkable:!0,hierarchical:!0,indentMode:R,checkedItems:$t,expandedRows:ge,allChecked:Bt,onCheck:Ft,onToggleAll:Et,onToggleExpand:Jr,onSort:Kt,sortConfig:Ut,page:q,rowsPerPage:H,totalCount:yt,sequentialPageNumbers:Xe,draggableColumns:br,onColumnOrderChange:$n,dragHandlers:vr,dragInfo:ze,fixedHeader:!0,fixedFooter:!0,maxHeight:D,tableHeaderRef:te,headerStyle:U(),pinnedColumns:de,summary:mt,showCurrentPageOnly:g,onSummaryToggle:pe=>{w(pe)},dependencies:{realtimeUpdates:o,userStatuses:x,gamingUserIds:d}},`members-table-${Pn}`),a(rr,{resizeHandleProps:O(parseFloat(D)),showIcon:!0,isDragging:F,sx:{mt:1,opacity:F?1:.7,"&:hover":{opacity:1}}})]})]}),a(Zae,{open:V,onClose:ft,member:ne,action:ue,onConfirm:_e,formatCurrency:pe=>new Intl.NumberFormat("ko-KR").format(pe||0),onGameMoneyTransfer:Re,onRollingTransfer:He}),a(Bi,{open:we,onClose:Tt,member:De,onSave:gt},De!=null&&De.id?`member-${De.id}`:"no-member"),a(Fse,{open:se,onClose:xt,members:b,onCreateMember:Rt})]})},qD=[{id:"checkbox",label:"",width:50,fixed:"left",type:"checkbox",sortable:!1},{id:"index",label:"No.",width:60,fixed:"left",align:"center",sortable:!1,type:"index"},{id:"username",label:"아이디",width:120,sortable:!0,render:(e,t)=>m("span",{children:[e,t.nickname&&m("span",{style:{color:"#666",marginLeft:4},children:["(",t.nickname,")"]})]})},{id:"referrer",label:"상위에이전트",width:120,sortable:!0},{id:"name",label:"이름",width:100,sortable:!0},{id:"account_number",label:"계좌번호",width:200,render:(e,t)=>{const n={kb:"국민은행",shinhan:"신한은행",woori:"우리은행",hana:"하나은행",nh:"농협은행",ibk:"기업은행",sc:"SC제일은행",kakao:"카카오뱅크",toss:"토스뱅크"};return!e&&!t.bank_name?"-":m("span",{children:[e||"-"," (",n[t.bank_name]||t.bank_name||"-",")"]})}},{id:"bank_name",label:"은행",width:100,align:"center",render:(e,t)=>({kb:"국민은행",shinhan:"신한은행",woori:"우리은행",hana:"하나은행",nh:"농협은행",ibk:"기업은행",sc:"SC제일은행",kakao:"카카오뱅크",toss:"토스뱅크"})[e]||e},{id:"phone",label:"전화번호",width:120,sortable:!0},{id:"created_at",label:"가입신청일",width:140,sortable:!0,render:(e,t)=>e?new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"},{id:"status",label:"상태",width:100,align:"center",type:"status"},{id:"actions",label:"액션",width:200,fixed:"right",align:"center",buttons:[{label:"승인",type:"approve",color:"primary",size:"small",show:e=>e.status==="pending"||e.status==="waiting"},{label:"대기",type:"wait",color:"warning",size:"small",show:e=>e.status==="pending"},{label:"비승인",type:"reject",color:"error",size:"small",show:e=>e.status==="pending"||e.status==="waiting"}]}],UD={url:"/registration-requests",pageSize:20,searchableFields:["username","nickname","name","phone"],filterableFields:["status","created_at"],sortableFields:["username","name","phone","created_at"]},qse="1.0.0",Use=[{value:"all",label:"전체"},{value:"pending",label:"요청 중"},{value:"waiting",label:"대기"},{value:"rejected",label:"비승인"}],Vse=()=>{var oe;zn(G=>G.auth.user),zi();const{handleRefresh:e,showNotification:t}=$a(),{socketService:n}=ni(),[r,i]=u.useState("all"),[o,s]=u.useState([]),[l,c]=u.useState(!0),[d,h]=u.useState(null),[f,g]=u.useState({all:0,pending:0,waiting:0,rejected:0}),[w,x]=u.useState(null),y=yr({}),{checkedItems:p,allChecked:v,handleCheck:b,handleToggleAll:P,sortConfig:k,handleSort:C}=Nn({data:o,page:y.currentPage,rowsPerPage:y.pageSize}),S=Rn({}),{columns:_,dragInfo:T,handleDragStart:I,handleDragEnd:L,handleDragOver:A,handleDrop:D}=sr({initialColumns:qD,tableId:"registration_requests_table",version:qse}),{columnVisibility:B,visibleColumns:$,hiddenColumnsCount:N,toggleableColumns:F,toggleColumnVisibility:O,showAllColumns:R,resetToDefault:E}=dr(_,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"registration_requests_table"}),z=cr({}),q=lr({minHeight:300});qs({enabled:!1}),fr({});const X=u.useRef(null),H=u.useCallback(async(G,Q)=>{var te,U;try{if(G==="approve"){const V=`${Q.username}(${Q.nickname}) 회원가입을 승인하시겠습니까?`;if(!window.confirm(V))return;(await Pe.post(`/registration-requests/${Q.id}/approve`)).data.success&&(t("회원가입이 승인되었습니다.","success"),X.current&&await X.current())}else if(G==="wait")(await Pe.put(`/registration-requests/${Q.id}/status`,{status:"waiting"})).data.success&&(t("대기 상태로 변경되었습니다.","success"),X.current&&await X.current());else if(G==="reject"){const V=window.prompt("비승인 사유를 입력하세요:");if(!V)return;(await Pe.put(`/registration-requests/${Q.id}/status`,{status:"rejected",rejectionReason:V})).data.success&&(t("비승인 처리되었습니다.","success"),X.current&&await X.current())}}catch(V){console.error("액션 처리 실패:",V),t(((U=(te=V.response)==null?void 0:te.data)==null?void 0:U.error)||"처리 중 오류가 발생했습니다.","error")}},[t]),K=u.useMemo(()=>$.map(G=>{if(G.id==="actions"){const Q=qD.find(te=>te.id==="actions");return{...G,buttons:(Q==null?void 0:Q.buttons)||G.buttons,onActionClick:H}}return G}),[$,H]),ee=u.useCallback(async()=>{c(!0);try{const G={page:y.currentPage+1,limit:y.pageSize,search:y.searchTerm,status:r==="all"?void 0:r};y.sortBy&&(G.sortBy=y.sortBy,G.sortDirection=y.sortDirection||"desc"),y.activeFilters&&Object.entries(y.activeFilters).forEach(([te,U])=>{U!=null&&U!==""&&(G[te]=U)});const Q=await Pe.get(UD.url,{params:G});if(Q.data.success){Q.data,Q.data.data,Q.data.pagination.total,s(Q.data.data),y.setTotalItems(Q.data.pagination.total);const te=Q.data.counts||{},U={all:te.all||Q.data.pagination.total||0,pending:te.pending||0,waiting:te.waiting||0,rejected:te.rejected||0};g(U),y.totalCount}}catch(G){console.error("데이터 조회 실패:",G),h(G.message),t("데이터 조회에 실패했습니다.","error")}finally{c(!1)}},[y.currentPage,y.pageSize,y.searchTerm,y.sortBy,y.sortOrder,y.filters,r]);return u.useEffect(()=>{X.current=ee},[ee]),u.useEffect(()=>{if(!n)return;const G=te=>{ee(),t(`새로운 회원가입 요청: ${te.username}`,"info")},Q=te=>{ee()};return n.on("registration:new",G),n.on("registration:status:changed",Q),()=>{n.off("registration:new",G),n.off("registration:status:changed",Q)}},[n,ee]),u.useEffect(()=>{ee()},[ee]),m(vn,{children:[a(Cn,{title:"회원가입요청",showAddButton:!1,showRefreshButton:!0,onRefreshClick:ee}),a(rt,{elevation:0,sx:{mb:2},children:m(La,{value:r,onChange:(G,Q)=>{i(Q),y.setPage(0)},indicatorColor:"primary",textColor:"primary",sx:{borderBottom:1,borderColor:"divider"},children:[a(_n,{label:`전체 (${f.all})`,value:"all"}),a(_n,{label:`요청 중 (${f.pending})`,value:"pending",sx:{color:f.pending>0?"#F64E60":"inherit","&.Mui-selected":{color:"#F64E60"}}}),a(_n,{label:`대기 (${f.waiting})`,value:"waiting",sx:{color:f.waiting>0?"#FFA800":"inherit","&.Mui-selected":{color:"#FFA800"}}}),a(_n,{label:`비승인 (${f.rejected})`,value:"rejected"})]})}),a(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:m(j,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[a(gn,{...S.headerProps,title:"회원가입 요청 목록",showColumnVisibility:!0,onColumnVisibilityClick:G=>x(G.currentTarget)}),a(Vn,{filterProps:{activeFilters:y.activeFilters||{},handleFilterChange:y.handleFilterChange,filterOptions:((oe=UD.filterableFields)==null?void 0:oe.map(G=>({id:G,label:G==="status"?"상태":G==="created_at"?"가입신청일":G,items:G==="status"?Use:[]})))||[],showDateFilter:!0,handleOpenDateFilter:y.handleOpenDateFilter,isDateFilterActive:y.isDateFilterActive},paginationProps:{count:y.totalCount||0,page:y.currentPage||0,rowsPerPage:y.pageSize||25,onPageChange:y.handlePageChange,onRowsPerPageChange:y.handleRowsPerPageChange,rowsPerPageOptions:[10,25,50,100]}}),m(j,{sx:{mt:2},children:[console.log("[RegistrationRequestsPage] Passing to BaseTable:",{columnsCount:K.length,columns:K.map(G=>({id:G.id,type:G.type,label:G.label})),dataCount:o.length,page:y.currentPage,rowsPerPage:y.pageSize,sequentialPageNumbers:!0}),a(An,{columns:K,data:o,loading:l,checkable:!0,hierarchical:!1,onActionClick:H,rowHeight:52,showColumnLines:!0,striped:!0,dragInfo:T,onDragStart:I,onDragEnd:L,onDragOver:A,onDrop:D,resizingColumn:z.resizingColumn,onColumnResize:z.handleMouseDown,onColumnResizeEnd:z.handleMouseUp,tableHeight:q.tableHeight,checkedItems:p,allChecked:v,onCheck:b,onToggleAll:P,onSort:C,sortConfig:k,page:y.currentPage,rowsPerPage:y.pageSize,sequentialPageNumbers:!0})]})]})}),a(or,{open:!!w,onClose:()=>x(null),columns:F,columnVisibility:B,onToggle:O,onShowAll:R,onReset:E,hiddenCount:N,title:"회원가입요청 컬럼 설정"})]})},Gse=[{value:"pending",label:"대기"},{value:"completed",label:"완료"},{value:"failed",label:"실패"},{value:"cancelled",label:"취소"}],Kse=[{value:"admin1",label:"관리자1"},{value:"admin2",label:"관리자2"},{value:"admin3",label:"관리자3"},{value:"system",label:"시스템"}],Yse=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"superAgent",header:"상위에이전트",type:"custom",cellRenderer:"parentChips",width:200,sortable:!1,pinnable:!0},{id:"memberType",header:"유형",type:"hierarchical",cellRenderer:"chip",width:150,align:"center",sortable:!0,pinnable:!0},{id:"beforeRolling",header:"전환롤링금",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"afterRolling",header:"전환후롤링금",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"beforeBalance",header:"처리전보유금",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"afterBalance",header:"처리후보유금",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"status",header:"상태",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0},{id:"processor",header:"처리자",type:"default",width:100,align:"center",sortable:!0,pinnable:!0},{id:"processTime",header:"처리시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0}],Xse=()=>{On();const{data:e,membersData:t,types:n,isInitialized:r}=Za({pageType:"rollingHistory",requiresMembersData:!1}),{containerRef:i,tableHeight:o,autoHeight:s,toggleAutoHeight:l,setManualHeight:c}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:d,getResizeHandleProps:h}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ie=>{s&&l(!1),c(`${Ie}px`)}}),{tableHeaderRef:f,getTableHeaderStyles:g}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),w=u.useCallback(()=>{alert("롤링금전환내역을 엑셀로 다운로드합니다.")},[]),x=u.useCallback(()=>{alert("롤링금전환내역을 인쇄합니다.")},[]),[y,p]=u.useState(0),[v,b]=u.useState(25),[P,k]=u.useState(!1),[C,S]=u.useState(!1),[_,T]=u.useState(null),I=u.useCallback(Ie=>{const Xe=t.find(ve=>ve.username===Ie.username||ve.userId===Ie.userId);T(Xe||Ie),S(!0)},[t]),L=u.useCallback(()=>{S(!1),T(null)},[]),A=u.useCallback(Ie=>{alert(`${Ie.nickname||Ie.username}님의 정보가 저장되었습니다.`),L()},[L]),{checkedItems:D,sortConfig:B,expandedRows:$,allChecked:N,handleSort:F,handleCheck:O,handleToggleAll:R,handleToggleExpand:E}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:y,rowsPerPage:v}),z=u.useMemo(()=>Yse.map(Ie=>Ie.id==="userId"?{...Ie,clickable:!0,onClick:Xe=>{var xe;Xe.userId;const[ve,at]=Xe.userId.split(`
`),We={username:ve,nickname:at||"",type:((xe=Xe.memberType)==null?void 0:xe.label)||Xe.memberType,parentTypes:Xe.superAgent};I(We)}}:Ie),[I]),q=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},...Gse.map(Xe=>({value:Xe.value,label:Xe.label}))]},{id:"processor",label:"처리자",items:[{value:"",label:"전체"},...Kse.map(Xe=>({value:Xe.value,label:Xe.label}))]},{id:"memberType",label:"회원유형",items:[{value:"",label:"전체"},...r&&n?Object.keys(n).map(Xe=>({value:Xe,label:n[Xe].label||Xe})):[]]}],[r,n]),{activeFilters:X,handleFilterChange:H,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge,dateRange:oe,page:G,rowsPerPage:Q,totalCount:te,totalPages:U,handlePageChange:V,handleRowsPerPageChange:ae,filteredData:ne,displayData:me,filterValues:ue,handleFilter:Ae,handleClearFilters:we}=yr({columns:z,data:e,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:"all",processor:"all",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:e.length,onExcelDownload:w,onPrint:x}}),{searchText:ce,totalItems:De,sequentialPageNumbers:le,hasPinnedColumns:se,isGridReady:J,handleSearchChange:Z,handleClearSearch:ie,togglePageNumberMode:_e,toggleColumnPin:Re,setGridReady:He}=Rn({initialTotalItems:e.length,onSearch:Ie=>{G!==0&&V(0)},onToggleColumnPin:Ie=>{Ie?$t():jt()}});u.useEffect(()=>{He(!0)},[He]);const{columns:ft,dragInfo:St,pinnedColumns:Tt,handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt,updateColumns:ht,clearAllPinnedColumns:jt,setDefaultPinnedColumns:$t}=sr({initialColumns:z,tableId:"rolling_history_table",onColumnOrderChange:Ie=>{}}),{columnVisibility:Ut,visibleColumns:Bt,hiddenColumnsCount:Kt,toggleableColumns:Ft,toggleColumnVisibility:Et,showAllColumns:Ot,resetToDefault:zt}=dr(ft,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"rolling_history_table"}),[Wt,kt]=u.useState(null),Mt=!!Wt,Ht=u.useCallback(Ie=>{kt(Ie)},[]),qt=u.useCallback(()=>{kt(null)},[]),Yt=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:P?"page":"all"},columns:{beforeRolling:{type:"sum",format:"currency"},afterRolling:{type:"sum",format:"currency"},beforeBalance:{type:"sum",format:"currency"},afterBalance:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[P]),Xt=!0,tn={handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt},Fe=u.useCallback((Ie,Xe,ve)=>{switch(Xe){case"status":return ve==="all"||ve===""?Ie:Ie.filter(We=>{var qe;const xe=((qe=We.status)==null?void 0:qe.label)||We.status;switch(ve){case"pending":return xe==="대기";case"completed":return xe==="완료";case"failed":return xe==="실패";case"cancelled":return xe==="취소";default:return!0}});case"processor":return ve==="all"||ve===""?Ie:Ie.filter(We=>{switch(ve){case"admin1":return We.processor==="관리자1";case"admin2":return We.processor==="관리자2";case"admin3":return We.processor==="관리자3";case"system":return We.processor==="시스템";default:return!0}});case"memberType":return ve==="all"||ve===""?Ie:Ie.filter(We=>{var Ee;const xe=((Ee=We.memberType)==null?void 0:Ee.label)||We.memberType,qe=n[ve];return xe===((qe==null?void 0:qe.label)||ve)});case"date":let at=[...Ie];return ve.startDate&&(at=at.filter(We=>We.id>=10)),ve.endDate&&(at=at.filter(We=>We.id<=40)),at;default:return Ie}},[n]),je=u.useCallback((Ie,Xe)=>{H(Ie,Xe)},[H]),Oe=u.useMemo(()=>{const Ie={...X};return Object.keys(Ie).forEach(Xe=>{Ie[Xe]==="all"&&(Ie[Xe]="")}),Ie},[X]),ke=Dr({data:e,activeFilters:Oe,searchText:ce,isDateFilterActive:K,dateRange:oe,filterCallback:Fe}),bt=u.useMemo(()=>ke?ke.map(Ie=>Ie.id):[],[ke]),it=u.useMemo(()=>{const Ie=Object.values(Oe).some(ve=>ve&&ve!==""),Xe=ce&&ce.trim()!=="";return!Ie&&!Xe?e:!e||!bt||bt.length===0?[]:e.filter(ve=>bt.includes(ve.id))},[e,bt,Oe,ce]);u.useEffect(()=>{},[G,Q]);const fe=it||[],be=fe.length;u.useEffect(()=>{fe.length!==De&&`${fe.length}`},[fe.length,De,be]);const Te=u.useCallback((Ie,Xe)=>{let ve=Xe;if(typeof Ie=="number"&&Xe===void 0&&(ve=Ie),typeof ve!="number"){console.error("유효하지 않은 페이지 번호:",ve);return}p(ve),V(ve)},[y,V]),Ne=u.useCallback(Ie=>{if(!Ie||!Ie.target||!Ie.target.value){console.error("롤링금전환내역 행 수 변경 이벤트 오류:",Ie);return}const Xe=parseInt(Ie.target.value,10);b(Xe),p(0),ae(Ie)},[v,ae]),[Ve,Ge]=u.useState(Date.now());u.useEffect(()=>{Ge(Date.now())},[y,v]);const At=u.useMemo(()=>!fe||fe.length===0?[]:fe.map(Xe=>{const ve={...Xe};return ve.status&&typeof ve.status=="object"&&ve.status.label&&(ve.status=ve.status.label),ve}),[fe,y,v,be]),Qe=u.useMemo(()=>Bt.map(Ie=>Ie.id==="userId"?{...Ie,clickable:!0,onClick:Xe=>{I(Xe)}}:Ie),[Bt,I]);return m(vn,{children:[a(Cn,{title:"롤링금전환내역",onDisplayOptionsClick:Ht,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("롤링금전환내역 새로고침"),sx:{mb:2}}),a(or,{anchorEl:Wt,open:Mt,onClose:qt,toggleableColumns:Ft,columnVisibility:Ut,onToggleColumn:Et,onShowAll:Ot,onReset:zt,hiddenColumnsCount:Kt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"롤링금전환내역 목록",totalItems:be,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:le,togglePageNumberMode:_e,hasPinnedColumns:se,isGridReady:J,toggleColumnPin:Re,searchText:ce,handleSearchChange:Z,handleClearSearch:ie,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"롤링금전환내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:ft,filterValues:ue||{},activeFilters:Oe||{},filterOptions:q,handleFilterChange:je,onFilter:Ae,onClearFilters:we,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge},paginationProps:{count:be,page:y,rowsPerPage:v,onPageChange:Te,onRowsPerPageChange:Ne,totalCount:be,onExcelDownload:w,onPrint:x}})}),m(j,{sx:{width:"100%",mt:2},ref:i,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",y+1," / ",Math.ceil(be/v)," (페이지당 ",v,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Qe,data:At,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:D,expandedRows:$,allChecked:N,onCheck:O,onToggleAll:R,onToggleExpand:E,onSort:F,sortConfig:B,page:y,rowsPerPage:v,totalCount:be,sequentialPageNumbers:le,draggableColumns:Xt,onColumnOrderChange:ht,dragHandlers:tn,dragInfo:St,fixedHeader:!0,fixedFooter:!0,maxHeight:o,tableHeaderRef:f,headerStyle:g(),pinnedColumns:Tt,summary:Yt},`rolling-history-table-${Ve}`),a(rr,{resizeHandleProps:h(parseFloat(o)),showIcon:!0,isDragging:d,sx:{mt:1,opacity:d?1:.7,"&:hover":{opacity:1}}})]})]}),a(Bi,{open:C,onClose:L,onSave:A,member:_})]})},VD=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"memberType",header:"유형",type:"chip",width:100,align:"center",sortable:!0,chipConfig:{member:{label:"회원",color:"primary"},agent:{label:"에이전트",color:"secondary"}}},{id:"bettingId",header:"베팅ID",type:"text",width:150,sortable:!0,ellipsis:!0},{id:"betAmount",header:"베팅금액",type:"currency",width:120,align:"right",sortable:!0},{id:"winAmount",header:"당첨금액",type:"currency",width:120,align:"right",sortable:!0},{id:"commissionRate",header:"커미션율(%)",type:"text",width:100,align:"center",sortable:!0,formatter:e=>`${e}%`},{id:"commissionAmount",header:"커미션금액",type:"currency",width:120,align:"right",sortable:!0,style:{color:"#f44336",fontWeight:"bold"}},{id:"type",header:"타입",type:"chip",width:100,align:"center",sortable:!0,chipConfig:{betting:{label:"베팅",color:"info"},manual:{label:"수동",color:"default"}}},{id:"status",header:"상태",type:"chip",width:100,align:"center",sortable:!0,chipConfig:{applied:{label:"적용",color:"success"},refunded:{label:"환불",color:"warning"},cancelled:{label:"취소",color:"error"}}},{id:"note",header:"비고",type:"text",width:200,sortable:!1,ellipsis:!0},{id:"processTime",header:"처리시간",type:"datetime",width:150,sortable:!0}],Jse=()=>{On();const[e,t]=u.useState([]),[n,r]=u.useState(!1),[i,o]=u.useState(0),{containerRef:s,tableHeight:l,autoHeight:c,toggleAutoHeight:d,setManualHeight:h}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:f,getResizeHandleProps:g}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Oe=>{c&&d(!1),h(`${Oe}px`)}}),{tableHeaderRef:w,getTableHeaderStyles:x}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),y=u.useCallback(()=>{alert("커미션내역을 엑셀로 다운로드합니다.")},[]),p=u.useCallback(()=>{alert("커미션내역을 인쇄합니다.")},[]),[v,b]=u.useState(0),[P,k]=u.useState(25),[C,S]=u.useState(!1),{checkedItems:_,sortConfig:T,expandedRows:I,allChecked:L,handleSort:A,handleCheck:D,handleToggleAll:B,handleToggleExpand:$}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:v,rowsPerPage:P}),N=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"applied",label:"적용"},{value:"refunded",label:"환불"},{value:"cancelled",label:"취소"}]},{id:"type",label:"타입",items:[{value:"",label:"전체"},{value:"betting",label:"베팅"},{value:"manual",label:"수동"}]},{id:"memberType",label:"회원유형",items:[{value:"",label:"전체"},{value:"member",label:"회원"},{value:"agent",label:"에이전트"}]}],[]),{activeFilters:F,handleFilterChange:O,isDateFilterActive:R,handleOpenDateFilter:E,resetDateFilter:z,dateRange:q,page:X,rowsPerPage:H,totalCount:K,totalPages:ee,handlePageChange:ge,handleRowsPerPageChange:oe,filteredData:G,displayData:Q,filterValues:te,handleFilter:U,handleClearFilters:V,setTotalItems:ae}=yr({columns:VD,data:e,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:"all",type:"all",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:i,onExcelDownload:y,onPrint:p}}),{searchText:ne,totalItems:me,sequentialPageNumbers:ue,hasPinnedColumns:Ae,isGridReady:we,handleSearchChange:ce,handleClearSearch:De,togglePageNumberMode:le,toggleColumnPin:se,setGridReady:J}=Rn({initialTotalItems:i,onSearch:Oe=>{X!==0&&ge(0)},onToggleColumnPin:Oe=>{Oe?Ft():Kt()}}),Z=u.useCallback((Oe,ke)=>{O(Oe,ke)},[O]),ie=u.useMemo(()=>{const Oe={...F};return Object.keys(Oe).forEach(ke=>{Oe[ke]==="all"&&(Oe[ke]="")}),Oe},[F]),_e=u.useMemo(()=>Array.isArray(e)?e:[],[e]),Re=i||_e.length,He=u.useCallback((Oe,ke)=>{let bt=ke;if(typeof Oe=="number"&&ke===void 0&&(bt=Oe),typeof bt!="number"){console.error("유효하지 않은 페이지 번호:",bt);return}b(bt),ge(bt)},[v,ge]),ft=u.useCallback(Oe=>{if(!Oe||!Oe.target||!Oe.target.value){console.error("커미션내역 행 수 변경 이벤트 오류:",Oe);return}const ke=parseInt(Oe.target.value,10);k(ke),b(0),oe(Oe)},[P,oe]),St=Oe=>!Oe||!Array.isArray(Oe)?[]:Oe.map(ke=>({...ke,userId:ke.username||ke.member_id,betAmount:ke.bet_amount,winAmount:ke.win_amount,commissionRate:ke.commission_rate,commissionAmount:ke.commission_amount,processTime:ke.created_at,memberType:ke.member_type||"member",bettingId:ke.betting_id,transactionId:ke.transaction_id,type:ke.type||"betting",status:ke.status||"applied",note:ke.note||""})),Tt=u.useCallback(async(Oe=1,ke=25,bt={})=>{var it,fe;r(!0);try{const be=new URLSearchParams({page:Oe,limit:ke,...bt}),Te=await Pe.get(`/settings/betting-commission/logs?${be}`);if(Te.data,(it=Te.data.data)==null||it.length,Te.data.success){const Ne=St(Te.data.data);t(Ne),o(Te.data.pagination.total),ae&&ae(Te.data.pagination.total)}else if(Te.data.data){const Ne=St(Te.data.data);t(Ne);const Ve=((fe=Te.data.pagination)==null?void 0:fe.total)||0;o(Ve),ae&&ae(Ve)}}catch(be){console.error("커미션 내역 조회 오류:",be),t([]),o(0),ae&&ae(0)}finally{r(!1)}},[ae]);u.useEffect(()=>{Tt(v+1,P,ie)},[v,P]);const gt=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:C?"page":"all"},columns:{betAmount:{type:"sum",format:"currency"},winAmount:{type:"sum",format:"currency"},commissionAmount:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[C]);u.useEffect(()=>{J(!0)},[J]);const{columns:et,dragInfo:xt,pinnedColumns:Rt,handleDragStart:ht,handleDragEnd:jt,handleDragOver:$t,handleDrop:Ut,updateColumns:Bt,clearAllPinnedColumns:Kt,setDefaultPinnedColumns:Ft}=sr({initialColumns:VD,tableId:"commission_history_table",onColumnOrderChange:Oe=>{}}),{columnVisibility:Et,visibleColumns:Ot,hiddenColumnsCount:zt,toggleableColumns:Wt,toggleColumnVisibility:kt,showAllColumns:Mt,resetToDefault:Ht}=dr(et,{defaultHiddenColumns:[],alwaysVisibleColumns:[],tableId:"commission_history_table"}),[qt,Yt]=u.useState(null),Xt=!!qt,tn=u.useCallback(Oe=>{Yt(Oe)},[]),Fe=u.useCallback(()=>{Yt(null)},[]);u.useEffect(()=>{`${e.length}`},[e]),u.useEffect(()=>{`${_e.length}`},[_e]);const je=u.useMemo(()=>Ot.map(Oe=>Oe),[Ot]);return m(vn,{children:[a(Cn,{title:"커미션내역",onDisplayOptionsClick:tn,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>{Tt(v+1,P,ie)},sx:{mb:2}}),a(or,{anchorEl:qt,open:Xt,onClose:Fe,toggleableColumns:Wt,columnVisibility:Et,onToggleColumn:kt,onShowAll:Mt,onReset:Ht,hiddenColumnsCount:zt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"커미션내역 목록",totalItems:Re,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:ue,togglePageNumberMode:le,hasPinnedColumns:Ae,isGridReady:we,toggleColumnPin:se,searchText:ne,handleSearchChange:ce,handleClearSearch:De,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"커미션내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:et,filterValues:te||{},activeFilters:ie||{},filterOptions:N,handleFilterChange:Z,onFilter:U,onClearFilters:V,isDateFilterActive:R,handleOpenDateFilter:E,resetDateFilter:z},paginationProps:{count:Re,page:v,rowsPerPage:P,onPageChange:He,onRowsPerPageChange:ft,totalCount:Re,onExcelDownload:y,onPrint:p}})}),m(j,{sx:{width:"100%",mt:2},ref:s,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",v+1," / ",Math.ceil(Re/P)," (페이지당 ",P,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),console.log("BaseTable render - data:",e,"length:",e.length,"page:",v),a(An,{columns:je,data:e,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:_,expandedRows:I,allChecked:L,onCheck:D,onToggleAll:B,onToggleExpand:$,onSort:A,sortConfig:T,page:0,rowsPerPage:e.length,totalCount:Re,sequentialPageNumbers:ue,draggableColumns:!0,onColumnOrderChange:Bt,dragHandlers:{handleDragStart:ht,handleDragEnd:jt,handleDragOver:$t,handleDrop:Ut},dragInfo:xt,fixedHeader:!0,fixedFooter:!0,maxHeight:l,tableHeaderRef:w,headerStyle:x(),pinnedColumns:Rt,summary:gt}),a(rr,{resizeHandleProps:g(parseFloat(l)),showIcon:!0,isDragging:f,sx:{mt:1,opacity:f?1:.7,"&:hover":{opacity:1}}})]})]})]})},Qse=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"superAgent",header:"상위에이전트",type:"custom",cellRenderer:"parentChips",width:200,sortable:!1,pinnable:!0},{id:"memberType",header:"유형",type:"hierarchical",cellRenderer:"chip",width:150,align:"center",sortable:!0,pinnable:!0},{id:"processAmount",header:"처리금",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"beforeBalance",header:"처리전보유금",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"afterBalance",header:"처리후보유금",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"type",header:"타입",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0},{id:"processor",header:"처리자",type:"default",width:100,align:"center",sortable:!0,pinnable:!0},{id:"processTime",header:"처리시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0}],Zse=[{value:"charge",label:"입금"},{value:"exchange",label:"출금"},{value:"bonus",label:"보너스"},{value:"adjustment",label:"조정"}],ele=[{value:"admin1",label:"관리자1"},{value:"admin2",label:"관리자2"},{value:"admin3",label:"관리자3"},{value:"system",label:"시스템"}],tle=()=>{On();const{socketService:e}=ni(),{handleRefresh:t}=$a(),[n,r]=u.useState({}),i=u.useRef(0),{data:o,membersData:s,types:l,isInitialized:c,refreshPageData:d}=Za({pageType:"moneyHistory",requiresMembersData:!1}),h=u.useMemo(()=>o?Object.keys(n).length===0?o:o.map(ct=>{const Je=n[`money_${ct.id}`];return Je?{...ct,status:Je.status,processor:Je.processor,processTime:Je.processTime,_realtimeUpdated:!0,_updateTimestamp:Je.timestamp}:ct}):[],[o,n]);u.useEffect(()=>{if(!e)return;const ct=Je=>{if(Je.sequence<=i.current){console.warn("⚠️ 중복 이벤트 감지:",Je.sequence);return}i.current=Je.sequence,(Je.type==="money:status"||Je.type==="money:created")&&(r(Nt=>({...Nt,[`money_${Je.data.historyId}`]:{...Je.data,processor:Je.data.processedBy?`처리자${Je.data.processedBy}`:"시스템",processTime:new Date(Je.timestamp).toLocaleString("ko-KR"),timestamp:Je.timestamp}})),Je.type==="money:created"&&setTimeout(()=>{d()},500))};return e.on("realtime:money",ct),()=>{e.off("realtime:money",ct)}},[e,d]);const{containerRef:f,tableHeight:g,autoHeight:w,toggleAutoHeight:x,setManualHeight:y}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:p,getResizeHandleProps:v}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:ct=>{w&&x(!1),y(`${ct}px`)}}),{tableHeaderRef:b,getTableHeaderStyles:P}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),k=u.useCallback(()=>{alert("머니처리내역을 엑셀로 다운로드합니다.")},[]),C=u.useCallback(()=>{alert("머니처리내역을 인쇄합니다.")},[]),[S,_]=u.useState(0),[T,I]=u.useState(25),[L,A]=u.useState(!1),[D,B]=u.useState(!1),[$,N]=u.useState(null),F=u.useCallback(ct=>{const Je=s.find(Nt=>Nt.username===ct.username||Nt.userId===ct.userId);N(Je||ct),B(!0)},[s]),O=u.useCallback(()=>{B(!1),N(null)},[]),R=u.useCallback(ct=>{alert(`${ct.nickname||ct.username}님의 정보가 저장되었습니다.`),O()},[O]),{checkedItems:E,sortConfig:z,expandedRows:q,allChecked:X,handleSort:H,handleCheck:K,handleToggleAll:ee,handleToggleExpand:ge}=Nn({data:h,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:S,rowsPerPage:T}),oe=u.useMemo(()=>Qse.map(ct=>ct.id==="userId"?{...ct,clickable:!0,onClick:Je=>{Je.userId;const[Nt,br]=Je.userId.split(`
`),vr={username:Nt,nickname:br||"",type:Je.memberType,parentTypes:Je.superAgent};F(vr)}}:ct),[F]),G=u.useMemo(()=>[{id:"type",label:"타입",items:[{value:"",label:"전체"},...Zse.map(Je=>({value:Je.value,label:Je.label}))]},{id:"processor",label:"처리자",items:[{value:"",label:"전체"},...ele.map(Je=>({value:Je.value,label:Je.label}))]},{id:"memberType",label:"회원유형",items:[{value:"",label:"전체"},...c&&l?Object.keys(l).map(Je=>({value:Je,label:l[Je].label||Je})):[]]}],[c,l]),{activeFilters:Q,handleFilterChange:te,isDateFilterActive:U,isDateFilterOpen:V,dateFilterAnchorEl:ae,handleOpenDateFilter:ne,handleCloseDateFilter:me,handleDateRangeChange:ue,resetDateFilter:Ae,dateRange:we,page:ce,rowsPerPage:De,totalCount:le,totalPages:se,handlePageChange:J,handleRowsPerPageChange:Z,filteredData:ie,displayData:_e,filterValues:Re,handleFilter:He,handleClearFilters:ft}=yr({columns:oe,data:h,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{type:"all",processor:"all",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:h.length,onExcelDownload:k,onPrint:C}}),[St,Tt]=u.useState(null),gt=u.useCallback(ct=>{Tt(ct.currentTarget)},[]),et=u.useCallback(()=>{Tt(null)},[]),{searchText:xt,totalItems:Rt,sequentialPageNumbers:ht,hasPinnedColumns:jt,isGridReady:$t,handleSearchChange:Ut,handleClearSearch:Bt,togglePageNumberMode:Kt,toggleColumnPin:Ft,setGridReady:Et}=Rn({initialTotalItems:h.length,onSearch:ct=>{ce!==0&&J(0)},onToggleColumnPin:ct=>{ct?Fe():tn()}}),Ot=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:L?"page":"all"},columns:{processAmount:{type:"sum",format:"currency"},beforeBalance:{type:"sum",format:"currency"},afterBalance:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[L]);u.useEffect(()=>{Et(!0)},[Et]);const{columns:zt,dragInfo:Wt,pinnedColumns:kt,handleDragStart:Mt,handleDragEnd:Ht,handleDragOver:qt,handleDrop:Yt,updateColumns:Xt,clearAllPinnedColumns:tn,setDefaultPinnedColumns:Fe}=sr({initialColumns:oe,tableId:"money_history_table",onColumnOrderChange:ct=>{}}),{columnVisibility:je,visibleColumns:Oe,hiddenColumnsCount:ke,toggleableColumns:bt,toggleColumnVisibility:it,showAllColumns:fe,resetToDefault:be}=dr(zt,{defaultHiddenColumns:[],alwaysVisibleColumns:[],tableId:"money_history_table"}),[Te,Ne]=u.useState(null),Ve=!!Te,Ge=u.useCallback(ct=>{Ne(ct)},[]),At=u.useCallback(()=>{Ne(null)},[]),Qe=!0,Ie={handleDragStart:Mt,handleDragEnd:Ht,handleDragOver:qt,handleDrop:Yt},Xe=u.useCallback((ct,Je,Nt)=>{switch(Je){case"type":return Nt==="all"||Nt===""?ct:ct.filter(vr=>{var ka;const Jr=((ka=vr.type)==null?void 0:ka.label)||vr.type;switch(Nt){case"deposit":return Jr==="입금";case"withdrawal":return Jr==="출금";case"bonus":return Jr==="보너스";case"penalty":return Jr==="차감";case"adjustment":return Jr==="조정";default:return!0}});case"processor":return Nt==="all"||Nt===""?ct:ct.filter(vr=>{switch(Nt){case"admin1":return vr.processor==="관리자1";case"admin2":return vr.processor==="관리자2";case"admin3":return vr.processor==="관리자3";case"system":return vr.processor==="시스템";default:return!0}});case"memberType":return Nt==="all"||Nt===""?ct:ct.filter(vr=>{var Fa;const Jr=((Fa=vr.memberType)==null?void 0:Fa.label)||vr.memberType,ka=l[Nt];return Jr===((ka==null?void 0:ka.label)||Nt)});case"date":let br=[...ct];return(Nt.startDate||Nt.endDate)&&(br=br.filter(vr=>{if(!vr.processTime)return!1;const Jr=Hr(vr.processTime);return!(Nt.startDate&&Jr.isBefore(Nt.startDate)||Nt.endDate&&Jr.isAfter(Nt.endDate))})),br;default:return ct}},[l]),ve=u.useCallback((ct,Je)=>{te(ct,Je)},[te]),at=u.useMemo(()=>{const ct={...Q};return Object.keys(ct).forEach(Je=>{ct[Je]==="all"&&(ct[Je]="")}),ct},[Q]),We=Dr({data:h,activeFilters:U?{...at,date:we}:at,searchText:xt,isDateFilterActive:U,dateRange:we,filterCallback:Xe}),xe=u.useMemo(()=>We?We.map(ct=>ct.id):[],[We]),qe=u.useMemo(()=>{const ct=Object.values(at).some(Nt=>Nt&&Nt!==""),Je=xt&&xt.trim()!=="";return!ct&&!Je?h:!h||!xe||xe.length===0?[]:h.filter(Nt=>xe.includes(Nt.id))},[h,xe,at,xt]);u.useEffect(()=>{},[ce,De]);const Ee=qe||[],Y=Ee.length;u.useEffect(()=>{Ee.length!==Rt&&`${Ee.length}`},[Ee.length,Rt,Y]);const he=u.useCallback((ct,Je)=>{let Nt=Je;if(typeof ct=="number"&&Je===void 0&&(Nt=ct),typeof Nt!="number"){console.error("유효하지 않은 페이지 번호:",Nt);return}_(Nt),J(Nt)},[S,J]),ze=u.useCallback(ct=>{if(!ct||!ct.target||!ct.target.value){console.error("머니처리내역 행 수 변경 이벤트 오류:",ct);return}const Je=parseInt(ct.target.value,10);I(Je),_(0),Z(ct)},[T,Z]),[de,Ze]=u.useState(Date.now());u.useEffect(()=>{Ze(Date.now())},[S,T]);const lt=u.useMemo(()=>!Ee||Ee.length===0?[]:Ee,[Ee,S,T,Y]),Qt=u.useMemo(()=>Oe.map(ct=>ct.id==="userId"?{...ct,clickable:!0,onClick:Je=>{F(Je)}}:ct),[Oe,F]),[tr,$n]=u.useState("processTime"),[Xn,Gn]=u.useState(null),[Xr,ra]=u.useState(null),ja=u.useCallback(ct=>{$n(ct.target.value)},[]),ma=u.useCallback(ct=>{Gn(ct)},[]),Ke=u.useCallback(ct=>{ra(ct)},[]),Pt=u.useCallback(ct=>{const Je=Hr();let Nt,br;switch(ct){case"today":Nt=Je.startOf("day"),br=Je.endOf("day");break;case"yesterday":Nt=Je.subtract(1,"day").startOf("day"),br=Je.subtract(1,"day").endOf("day");break;case"thisWeek":Nt=Je.startOf("week"),br=Je.endOf("week");break;case"lastWeek":Nt=Je.subtract(1,"week").startOf("week"),br=Je.subtract(1,"week").endOf("week");break;case"thisMonth":Nt=Je.startOf("month"),br=Je.endOf("month");break;case"lastMonth":Nt=Je.subtract(1,"month").startOf("month"),br=Je.subtract(1,"month").endOf("month");break;case"allTime":Nt=null,br=null;break;default:return}Gn(Nt),ra(br)},[]),en=u.useCallback(()=>{ue&&ue({startDate:Xn,endDate:Xr}),et()},[Xn,Xr,ue,et]),fn=u.useCallback(()=>{Gn(null),ra(null),Ae&&Ae(),et()},[Ae,et]),Ue=[{value:"processTime",label:"처리시간"}];return m(vn,{children:[a(Cn,{title:"머니처리내역",onDisplayOptionsClick:Ge,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("머니처리내역 새로고침"),sx:{mb:2}}),a(or,{anchorEl:Te,open:Ve,onClose:At,toggleableColumns:bt,columnVisibility:je,onToggleColumn:it,onShowAll:fe,onReset:be,hiddenColumnsCount:ke,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"머니처리내역 목록",totalItems:Y,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:ht,togglePageNumberMode:Kt,hasPinnedColumns:jt,isGridReady:$t,toggleColumnPin:Ft,searchText:xt,handleSearchChange:Ut,handleClearSearch:Bt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"머니처리내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:zt,filterValues:Re||{},activeFilters:at||{},filterOptions:G,handleFilterChange:ve,onFilter:He,onClearFilters:ft,isDateFilterActive:U,handleOpenDateFilter:gt,resetDateFilter:Ae},paginationProps:{count:Y,page:S,rowsPerPage:T,onPageChange:he,onRowsPerPageChange:ze,totalCount:Y,onExcelDownload:k,onPrint:C}})}),m(j,{sx:{width:"100%",mt:2},ref:f,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",S+1," / ",Math.ceil(Y/T)," (페이지당 ",T,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Qt,data:lt,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:E,expandedRows:q,allChecked:X,onCheck:K,onToggleAll:ee,onToggleExpand:ge,onSort:H,sortConfig:z,page:S,rowsPerPage:T,totalCount:Y,sequentialPageNumbers:ht,draggableColumns:Qe,onColumnOrderChange:Xt,dragHandlers:Ie,dragInfo:Wt,fixedHeader:!0,fixedFooter:!0,maxHeight:g,tableHeaderRef:b,headerStyle:P(),pinnedColumns:kt,summary:Ot},`money-history-table-${de}`),a(rr,{resizeHandleProps:v(parseFloat(g)),showIcon:!0,isDragging:p,sx:{mt:1,opacity:p?1:.7,"&:hover":{opacity:1}}})]})]}),a(Bi,{open:D,onClose:O,onSave:R,member:$}),a(GC,{anchorEl:St,onClose:et,dateFilterField:tr,handleDateFilterFieldChange:ja,startDate:Xn,handleStartDateChange:ma,endDate:Xr,handleEndDateChange:Ke,handleQuickDateSelect:Pt,applyDateFilter:en,resetDateFilter:fn,dateFields:Ue})]})},nle=[{value:"deposit",label:"입금처리"},{value:"withdraw",label:"출금처리"},{value:"game_to_balance",label:"게임머니→보유금"},{value:"balance_to_game",label:"보유금→게임머니"},{value:"bonus",label:"보너스지급"},{value:"penalty",label:"차감처리"},{value:"transfer_in",label:"타회원입금"},{value:"transfer_out",label:"타회원출금"}],rle=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"superAgent",header:"상위에이전트",type:"custom",cellRenderer:"parentChips",width:200,sortable:!1,pinnable:!0},{id:"memberType",header:"유형",type:"hierarchical",cellRenderer:"chip",width:150,align:"center",sortable:!0,pinnable:!0},{id:"transferAmount",header:"이동금액",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"balanceAmount",header:"보유금액",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"gameMoneyAmount",header:"게임머니",type:"currency",width:120,align:"center",sortable:!0,pinnable:!0},{id:"route",header:"경로",type:"chip",width:150,align:"center",sortable:!0,pinnable:!0},{id:"processTime",header:"처리시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0}],ale=()=>{On();const{data:e,membersData:t}=Za({pageType:"moneyTransfer",requiresMembersData:!1}),{containerRef:n,tableHeight:r,autoHeight:i,toggleAutoHeight:o,setManualHeight:s}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:l,getResizeHandleProps:c}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ne=>{i&&o(!1),s(`${Ne}px`)}}),{tableHeaderRef:d,getTableHeaderStyles:h}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),f=u.useCallback(()=>{alert("머니이동내역을 엑셀로 다운로드합니다.")},[]),g=u.useCallback(()=>{alert("머니이동내역을 인쇄합니다.")},[]),[w,x]=u.useState(0),[y,p]=u.useState(25),[v,b]=u.useState(!1),[P,k]=u.useState(null),C=u.useCallback(Ne=>{const Ve=t.find(Ge=>Ge.username===Ne.username||Ge.userId===Ne.userId);k(Ve||Ne),b(!0)},[t]),S=u.useCallback(()=>{b(!1),k(null)},[]),_=u.useCallback(Ne=>{alert(`${Ne.nickname||Ne.username}님의 정보가 저장되었습니다.`),S()},[S]),{checkedItems:T,sortConfig:I,expandedRows:L,allChecked:A,handleSort:D,handleCheck:B,handleToggleAll:$,handleToggleExpand:N}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:w,rowsPerPage:y}),F=u.useMemo(()=>rle.map(Ne=>Ne.id==="userId"?{...Ne,clickable:!0,onClick:Ve=>{Ve.userId;const[Ge,At]=Ve.userId.split(`
`),Qe={username:Ge,nickname:At||"",type:Ve.memberType,parentTypes:Ve.superAgent};C(Qe)}}:Ne),[C]),O=u.useMemo(()=>[{id:"route",label:"경로",items:[{value:"",label:"전체"},...nle.map(Ve=>({value:Ve.value,label:Ve.label}))]}],[]),{activeFilters:R,handleFilterChange:E,isDateFilterActive:z,handleOpenDateFilter:q,resetDateFilter:X,dateRange:H,page:K,rowsPerPage:ee,totalCount:ge,totalPages:oe,handlePageChange:G,handleRowsPerPageChange:Q,filteredData:te,displayData:U,filterValues:V,handleFilter:ae,handleClearFilters:ne}=yr({columns:F,data:e,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{route:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:e.length,onExcelDownload:f,onPrint:g}}),{searchText:me,totalItems:ue,sequentialPageNumbers:Ae,hasPinnedColumns:we,isGridReady:ce,handleSearchChange:De,handleClearSearch:le,togglePageNumberMode:se,toggleColumnPin:J,setGridReady:Z}=Rn({initialTotalItems:e.length,onSearch:Ne=>{K!==0&&G(0)},onToggleColumnPin:Ne=>{Ne?xt():et()}});u.useEffect(()=>{Z(!0)},[Z]);const{columns:ie,dragInfo:_e,pinnedColumns:Re,handleDragStart:He,handleDragEnd:ft,handleDragOver:St,handleDrop:Tt,updateColumns:gt,clearAllPinnedColumns:et,setDefaultPinnedColumns:xt}=sr({initialColumns:F,tableId:"money_transfer_table",onColumnOrderChange:Ne=>{}}),{columnVisibility:Rt,visibleColumns:ht,hiddenColumnsCount:jt,toggleableColumns:$t,toggleColumnVisibility:Ut,showAllColumns:Bt,resetToDefault:Kt}=dr(ie,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"money_transfer_table"}),[Ft,Et]=u.useState(null),Ot=!!Ft,zt=u.useCallback(Ne=>{Et(Ne)},[]),Wt=u.useCallback(()=>{Et(null)},[]),kt=!0,Mt={handleDragStart:He,handleDragEnd:ft,handleDragOver:St,handleDrop:Tt},Ht=u.useCallback((Ne,Ve,Ge)=>{switch(Ve){case"route":return Ge==="all"||Ge===""?Ne:Ne.filter(Qe=>{var Xe;const Ie=((Xe=Qe.route)==null?void 0:Xe.label)||Qe.route;switch(Ge){case"deposit":return Ie==="입금처리";case"withdraw":return Ie==="출금처리";case"game_to_balance":return Ie==="게임머니→보유금";case"balance_to_game":return Ie==="보유금→게임머니";case"bonus":return Ie==="보너스지급";case"penalty":return Ie==="차감처리";case"transfer_in":return Ie==="타회원입금";case"transfer_out":return Ie==="타회원출금";default:return!0}});case"date":let At=[...Ne];return Ge.startDate&&(At=At.filter(Qe=>Qe.id>=10)),Ge.endDate&&(At=At.filter(Qe=>Qe.id<=40)),At;default:return Ne}},[]),qt=u.useCallback((Ne,Ve)=>{E(Ne,Ve)},[E]),Yt=u.useMemo(()=>{const Ne={...R};return Object.keys(Ne).forEach(Ve=>{Ne[Ve]==="all"&&(Ne[Ve]="")}),Ne},[R]),Xt=Dr({data:e,activeFilters:Yt,searchText:me,isDateFilterActive:z,dateRange:H,filterCallback:Ht}),tn=u.useMemo(()=>Xt?Xt.map(Ne=>Ne.id):[],[Xt]),Fe=u.useMemo(()=>{const Ne=Object.values(Yt).some(Ge=>Ge&&Ge!==""),Ve=me&&me.trim()!=="";return!Ne&&!Ve?e:!e||!tn||tn.length===0?[]:e.filter(Ge=>tn.includes(Ge.id))},[e,tn,Yt,me]);u.useEffect(()=>{},[K,ee]);const je=Fe||[],Oe=je.length;u.useEffect(()=>{je.length!==ue&&`${je.length}`},[je.length,ue,Oe]);const ke=u.useCallback((Ne,Ve)=>{let Ge=Ve;if(typeof Ne=="number"&&Ve===void 0&&(Ge=Ne),typeof Ge!="number"){console.error("유효하지 않은 페이지 번호:",Ge);return}x(Ge),G(Ge)},[w,G]),bt=u.useCallback(Ne=>{if(!Ne||!Ne.target||!Ne.target.value){console.error("머니이동내역 행 수 변경 이벤트 오류:",Ne);return}const Ve=parseInt(Ne.target.value,10);p(Ve),x(0),Q(Ne)},[y,Q]),[it,fe]=u.useState(Date.now());u.useEffect(()=>{fe(Date.now())},[w,y]);const be=u.useMemo(()=>!je||je.length===0?[]:je,[je,w,y,Oe]),Te=u.useMemo(()=>ht.map(Ne=>Ne.id==="userId"?{...Ne,clickable:!0,onClick:Ve=>{Ve.userId;const[Ge,At]=Ve.userId.split(`
`),Qe={username:Ge,nickname:At||"",type:Ve.memberType,parentTypes:Ve.superAgent};C(Qe)}}:Ne),[ht,C]);return m(vn,{children:[a(Cn,{title:"머니이동내역",onDisplayOptionsClick:zt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("머니이동내역 새로고침"),sx:{mb:2}}),a(or,{anchorEl:Ft,open:Ot,onClose:Wt,toggleableColumns:$t,columnVisibility:Rt,onToggleColumn:Ut,onShowAll:Bt,onReset:Kt,hiddenColumnsCount:jt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"머니이동내역 목록",totalItems:Oe,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:Ae,togglePageNumberMode:se,hasPinnedColumns:we,isGridReady:ce,toggleColumnPin:J,searchText:me,handleSearchChange:De,handleClearSearch:le,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"머니이동내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:ie,filterValues:V||{},activeFilters:Yt||{},filterOptions:O,handleFilterChange:qt,onFilter:ae,onClearFilters:ne,isDateFilterActive:z,handleOpenDateFilter:q,resetDateFilter:X},paginationProps:{count:Oe,page:w,rowsPerPage:y,onPageChange:ke,onRowsPerPageChange:bt,totalCount:Oe,onExcelDownload:f,onPrint:g}})}),m(j,{sx:{width:"100%",mt:2},ref:n,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",w+1," / ",Math.ceil(Oe/y)," (페이지당 ",y,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Te,data:be,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:T,expandedRows:L,allChecked:A,onCheck:B,onToggleAll:$,onToggleExpand:N,onSort:D,sortConfig:I,page:w,rowsPerPage:y,totalCount:Oe,sequentialPageNumbers:Ae,draggableColumns:kt,onColumnOrderChange:gt,dragHandlers:Mt,dragInfo:_e,fixedHeader:!0,maxHeight:r,tableHeaderRef:d,headerStyle:h(),pinnedColumns:Re},`money-transfer-table-${it}`),a(rr,{resizeHandleProps:c(parseFloat(r)),showIcon:!0,isDragging:l,sx:{mt:1,opacity:l?1:.7,"&:hover":{opacity:1}}})]})]}),a(Bi,{open:v,onClose:S,onSave:_,member:P})]})};qj("today_settlement_table");const ile=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,pinnable:!0},{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"type",header:"유형",type:"hierarchical",width:120,cellRenderer:"chip",sortable:!0,pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"deposit_withdrawal",type:"group",header:"입출",children:[{id:"deposit_withdrawal.charge_amount",header:"충전금액",width:120,align:"right",sortable:!0,type:"currency"},{id:"deposit_withdrawal.exchange_amount",header:"환전금액",width:120,align:"right",sortable:!0,type:"currency"},{id:"deposit_withdrawal.profit_loss",header:"충환손익",width:120,align:"right",sortable:!0,type:"currency"}]},{id:"slot",type:"group",header:"슬롯",children:[{id:"slot.betting",header:"베팅",width:100,align:"right",sortable:!0,type:"currency"},{id:"slot.winning",header:"당첨",width:100,align:"right",sortable:!0,type:"currency"},{id:"slot.betting_winning",header:"베팅-당첨",width:100,align:"right",sortable:!0,type:"currency"},{id:"slot.rolling_percent",header:"롤링%",width:80,align:"center",sortable:!0},{id:"slot.rolling_amount",header:"롤링금",width:100,align:"right",sortable:!0,type:"currency"},{id:"slot.rolling_total",header:"롤링금합계",width:120,align:"right",sortable:!0,type:"currency"},{id:"slot.final_profit_loss",header:"베팅-당첨-롤링금",width:140,align:"right",sortable:!0,type:"currency"},{id:"slot.losing",header:"루징",width:100,align:"right",sortable:!0,type:"currency"}]},{id:"casino",type:"group",header:"카지노",children:[{id:"casino.betting",header:"베팅",width:100,align:"right",sortable:!0,type:"currency"},{id:"casino.winning",header:"당첨",width:100,align:"right",sortable:!0,type:"currency"},{id:"casino.betting_winning",header:"베팅-당첨",width:100,align:"right",sortable:!0,type:"currency"},{id:"casino.rolling_percent",header:"롤링%",width:80,align:"center",sortable:!0},{id:"casino.rolling_amount",header:"롤링금",width:100,align:"right",sortable:!0,type:"currency"},{id:"casino.rolling_total",header:"롤링금합계",width:120,align:"right",sortable:!0,type:"currency"},{id:"casino.final_profit_loss",header:"베팅-당첨-롤링금",width:140,align:"right",sortable:!0,type:"currency"},{id:"casino.losing",header:"루징",width:100,align:"right",sortable:!0,type:"currency"}]},{id:"total",type:"group",header:"합계",children:[{id:"total.betting",header:"베팅",width:100,align:"right",sortable:!0},{id:"total.winning",header:"당첨",width:100,align:"right",sortable:!0},{id:"total.rolling_amount",header:"롤링금",width:100,align:"right",sortable:!0},{id:"total.rolling_total",header:"롤링금합계",width:120,align:"right",sortable:!0},{id:"total.final_profit_loss",header:"베팅-당첨-롤링금",width:140,align:"right",sortable:!0},{id:"total.losing",header:"루징",width:100,align:"right",sortable:!0}]},{id:"last_balance",header:"마지막보유금",type:"currency",width:120,align:"right",sortable:!0},{id:"last_rolling_amount",header:"마지막롤링금",type:"currency",width:120,align:"right",sortable:!0}],ole=()=>{const e=On(),{handleRefresh:t}=$a(),{socketService:n,agentLevelService:r,sequenceService:i}=ni(),[o,s]=u.useState({}),l=u.useRef(0),[c,d]=u.useState(!1),{types:h,isLoading:f,error:g,isInitialized:w}=yo(),x={agent_level_1:{id:1,label:"총판",color:"error",backgroundColor:"#f44336",borderColor:"#f44336",order:1},agent_level_2:{id:2,label:"부본",color:"secondary",backgroundColor:"#e91e63",borderColor:"#e91e63",order:2},agent_level_3:{id:3,label:"매장",color:"primary",backgroundColor:"#3f51b5",borderColor:"#3f51b5",order:3},agent_level_4:{id:4,label:"일반회원",color:"info",backgroundColor:"#2196f3",borderColor:"#2196f3",order:4}},y=h&&Object.keys(h).length>0?h:x;u.useEffect(()=>{Object.keys(y||{}).length,!h||Object.keys(h).length},[w,f,g,y,h]),u.useEffect(()=>{n&&(n.getConnectionStatus(),window.socketService=n,window.agentLevelService=r);const tt=setTimeout(()=>{(!y||Object.keys(y).length===0)&&(n&&n.isConnected?n.emit("request-agent-levels"):r&&r.requestInitialData())},5e3);return()=>clearTimeout(tt)},[n,r]);const{data:p,isLoading:v,error:b,refreshPageData:P}=Za({pageType:"settlement",requiresMembersData:!1}),k=u.useMemo(()=>p?p.map(tt=>{let wt={...tt,type:y[`agent_level_${tt.agent_level_id}`]||null};const yt=o[`balance_${tt.id}`];return yt&&(wt={...wt,last_balance:yt.balance,_realtimeUpdated:!0,_updateTimestamp:yt.timestamp}),wt}):[],[p,o,y]),C=u.useRef(P);C.current=P,u.useEffect(()=>{if(!r)return;const tt=r.addListener(wt=>{wt.type,(wt.type==="hierarchy-changed"||wt.type==="updated"||wt.type==="loaded")&&setTimeout(()=>{C.current&&C.current()},500)});return()=>{r.removeListener(tt)}},[r]),u.useEffect(()=>{if(!n||!i)return;const tt=yt=>{i.updateSequence(yt.sequence)&&s(En=>({...En,[`balance_${yt.data.memberId}`]:yt.data}))},wt=yt=>{if(i.updateSequence(yt.sequence)){if(yt.sequence<=l.current){console.warn("⚠️ 중복 이벤트 감지:",yt.sequence);return}l.current=yt.sequence,s(En=>({...En,[`betting_${yt.data.bettingId}`]:yt.data}))}};return i.setOnMissingEvents(yt=>{yt.type==="balance:update"?tt(yt):yt.type==="betting:update"&&wt(yt)}),n.on("realtime:balance",tt),n.on("realtime:betting",wt),()=>{n.off("realtime:balance",tt),n.off("realtime:betting",wt),i.setOnMissingEvents(null)}},[n,i]);const{containerRef:S,tableHeight:_,autoHeight:T,toggleAutoHeight:I,setManualHeight:L}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:A,getResizeHandleProps:D}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:tt=>{T&&I(!1),L(`${tt}px`)}}),{indentMode:B,toggleIndentMode:$}=qs(!0),N=u.useCallback((tt,wt=null,yt=0)=>tt.filter(En=>En.parentId===wt).sort((En,Pn)=>{const Tr=En.levelOrder||En.level_order||En.agent_level_order||999,Be=Pn.levelOrder||Pn.level_order||Pn.agent_level_order||999;return Tr-Be}).map(En=>({...En,level:yt,_displayLevel:yt,children:N(tt,En.id,yt+1)})),[]),[F,O]=u.useState({}),R=u.useMemo(()=>!k||k.length===0?[]:Object.keys(F).length===0?k:k.filter(tt=>F[tt.agent_level_id]===!0),[k,F]),E=u.useMemo(()=>{if(R!=null&&R.length,R==null||R[0],!R||R.length===0)return[];const tt=[...R].sort((Pn,Tr)=>{const Be=Pn.levelOrder||Pn.level_order||Pn.agent_level_order||999,Ye=Tr.levelOrder||Tr.level_order||Tr.agent_level_order||999;return Be!==Ye?Be-Ye:Pn.id-Tr.id}),wt=N(tt),yt=new Set,dn=Pn=>{Pn.forEach(Tr=>{yt.add(Tr.id),Tr.children&&Tr.children.length>0&&dn(Tr.children)})};dn(wt);const En=tt.filter(Pn=>!yt.has(Pn.id));return En.length>0&&(console.warn("🚨 계층 구조에서 누락된 항목:",En.length,"개"),console.warn("누락된 항목 상세:",En.map(Pn=>({id:Pn.id,username:Pn.username,parentId:Pn.parentId,levelName:Pn.levelName,type:Pn.type}))),wt.map(Pn=>({id:Pn.id,username:Pn.username,parentId:Pn.parentId})),En.forEach(Pn=>{wt.push({...Pn,level:0,_displayLevel:0,children:[],_orphaned:!0})})),wt.length,wt},[R,N]),[z,q]=u.useState(()=>{const tt={},wt=yt=>{yt.forEach(dn=>{dn.children&&dn.children.length>0&&(tt[dn.id]=!0,wt(dn.children))})};return E.length>0&&wt(E),tt}),X=u.useCallback((tt,wt=!0)=>{let yt=[];return tt.forEach(dn=>{if(wt&&yt.push(dn),dn.children&&dn.children.length>0){const En=z[dn.id];yt=yt.concat(X(dn.children,wt&&En))}}),yt},[z]),H=u.useCallback(tt=>{q(wt=>({...wt,[tt]:!wt[tt]}))},[]);u.useCallback(tt=>{const wt={},yt=dn=>{dn.forEach(En=>{En.children&&En.children.length>0&&(wt[En.id]=tt,yt(En.children))})};yt(E),q(wt)},[E]),u.useEffect(()=>{if(E.length>0&&Object.keys(z).length===0){const tt={},wt=yt=>{yt.forEach(dn=>{dn.children&&dn.children.length>0&&(tt[dn.id]=!0,wt(dn.children))})};wt(E),q(tt)}},[E.length]);const K=E,ee=K;u.useEffect(()=>{var tt,wt,yt;if(k&&k.length>0){k[0],(tt=k[0])==null||tt.type,(wt=k[0])==null||wt.parent_id,(yt=k[0])==null||yt.parentId;const dn=k.filter(Pn=>Pn.parent_id||Pn.parentId);dn.length,dn.length>0&&dn[0],N(k).length}},[k,N]),u.useEffect(()=>{var tt,wt,yt;p!=null&&p.length,k!=null&&k.length,E!=null&&E.length,K!=null&&K.length,ee!=null&&ee.length,k==null||k[0],(tt=k==null?void 0:k[0])==null||tt.type,E==null||E[0],(wt=E==null?void 0:E[0])==null||wt.type,K==null||K[0],(yt=K==null?void 0:K[0])==null||yt.type},[p,k,E,K,ee,v,b,w,z]);const{tableHeaderRef:ge,getTableHeaderStyles:oe}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),[G,Q]=u.useState(!1),[te,U]=u.useState(null),V=u.useCallback(tt=>{U(tt),Q(!0)},[]),ae=u.useCallback(()=>{Q(!1),U(null)},[]),ne=u.useCallback(tt=>{alert(`${tt.nickname||tt.username}님의 정보가 저장되었습니다.`),ae()},[ae]),me=u.useCallback(()=>{t("당일정산"),P()},[t,P]),ue=u.useCallback(()=>{alert("당일정산 목록을 엑셀로 다운로드합니다.")},[]),Ae=u.useCallback(()=>{alert("당일정산 목록을 인쇄합니다.")},[]),[we,ce]=u.useState(0),[De,le]=u.useState(25),{checkedItems:se,sortConfig:J,allChecked:Z,handleSort:ie,handleCheck:_e,handleToggleAll:Re,handleToggleExpand:He}=Nn({data:ee,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!0,page:we,rowsPerPage:De}),ft=u.useMemo(()=>(ee==null||ee[0],ile.map(tt=>tt.id==="type"&&tt.type==="hierarchical"?{...tt,onToggle:wt=>{const yt=ee.find(dn=>dn.id===wt);if(yt&&yt.type){const dn=typeof yt.type=="object"?yt.type.id:yt.type;H(dn)}}}:tt.id==="userId"?{...tt,clickable:!0,onClick:wt=>{V(wt)}}:tt)),[ee,H,V]),St=u.useMemo(()=>{if(!k||k.length===0)return[];const tt=new Map;return k.forEach(yt=>{var dn;yt.agent_level_id&&((dn=yt.type)!=null&&dn.label)&&tt.set(yt.agent_level_id,yt.type.label)}),Array.from(tt.entries()).map(([yt,dn])=>({id:yt,label:dn})).sort((yt,dn)=>yt.id-dn.id)},[k]);u.useEffect(()=>{if(St.length>0&&Object.keys(F).length===0){const tt={};St.forEach(wt=>{tt[wt.id]=!0}),O(tt)}},[St,F]);const Tt=u.useMemo(()=>{y&&Object.keys(y),y&&Object.keys(y).length;const tt=[{id:"type",label:"회원유형",items:[{value:"",label:"전체"},...y&&Object.keys(y).length>0?Object.keys(y).map(wt=>({value:String(wt),label:y[wt].label||wt})):[]]}];return tt[0].items,tt},[w,y]),{activeFilters:gt,handleFilterChange:et,isDateFilterActive:xt,handleOpenDateFilter:Rt,resetDateFilter:ht,dateRange:jt,page:$t,rowsPerPage:Ut,totalCount:Bt,totalPages:Kt,handlePageChange:Ft,handleRowsPerPageChange:Et,filteredData:Ot,displayData:zt,filterValues:Wt,handleFilter:kt,handleClearFilters:Mt}=yr({columns:ft,data:ee,defaultRowsPerPage:25,hierarchical:!0,filterOptions:{initialFilters:{type:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:ee.length,onExcelDownload:ue,onPrint:Ae}}),{searchText:Ht,totalItems:qt,sequentialPageNumbers:Yt,hasPinnedColumns:Xt,isGridReady:tn,handleSearchChange:Fe,handleClearSearch:je,togglePageNumberMode:Oe,toggleColumnPin:ke,setGridReady:bt}=Rn({initialTotalItems:ee.length,tableId:"todaySettlementPage",onSearch:tt=>{$t!==0&&Ft(0)},onToggleColumnPin:tt=>{tt?Ie():Qe()}});u.useEffect(()=>{bt(!0)},[bt]);const{columns:it,dragInfo:fe,pinnedColumns:be,handleDragStart:Te,handleDragEnd:Ne,handleDragOver:Ve,handleDrop:Ge,updateColumns:At,clearAllPinnedColumns:Qe,setDefaultPinnedColumns:Ie}=sr({initialColumns:ft,tableId:"today_settlement_table",initialPinnedColumns:["checkbox","number","type","userId"],onColumnOrderChange:tt=>{}}),{columnVisibility:Xe,visibleColumns:ve,hiddenColumnsCount:at,toggleableColumns:We,toggleColumnVisibility:xe,showAllColumns:qe,resetToDefault:Ee}=dr(it,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"today_settlement_table"}),[Y,he]=u.useState(null),ze=!!Y,[de,Ze]=u.useState(null),lt=!!de,Qt=u.useCallback(tt=>{he(tt)},[]),tr=u.useCallback(()=>{he(null)},[]),$n=u.useCallback(tt=>{Ze(tt.currentTarget)},[]),Xn=u.useCallback(()=>{Ze(null)},[]),Gn=u.useCallback(tt=>{O(wt=>({...wt,[tt]:!wt[tt]}))},[]),Xr=u.useCallback(tt=>{const wt={};St.forEach(yt=>{wt[yt.id]=tt}),O(wt)},[St]),ra=!0,ja={handleDragStart:Te,handleDragEnd:Ne,handleDragOver:Ve,handleDrop:Ge},ma=u.useCallback(tt=>{H(tt),typeof He=="function"&&He(tt)},[H,He]),Ke=u.useCallback((tt,wt,yt)=>{var dn,En,Pn;switch(wt){case"type":if(yt==="all"||yt==="")return tt;tt.length,(dn=tt[0])==null||dn.type,(Pn=(En=tt[0])==null?void 0:En.type)==null||Pn.id,tt.slice(0,3).map(Ye=>{var mt,pe,st,Le;return{itemTypeId:(mt=Ye.type)==null?void 0:mt.id,itemTypeIdType:typeof((pe=Ye.type)==null?void 0:pe.id),stringItemTypeId:String((st=Ye.type)==null?void 0:st.id),stringFilterValue:String(yt),matches:String((Le=Ye.type)==null?void 0:Le.id)===String(yt)}});const Tr=tt.filter(Ye=>Ye.type&&String(Ye.type.id)===String(yt));return tt.length,Tr.length,Tr.slice(0,3).map(Ye=>{var mt;return{id:Ye.id,typeId:(mt=Ye.type)==null?void 0:mt.id,userId:Ye.userId}}),Tr;case"date":let Be=[...tt];return yt.startDate&&(Be=Be.filter(Ye=>Ye.id>=3)),yt.endDate&&(Be=Be.filter(Ye=>Ye.id<=6)),Be;default:return tt}},[]),Pt=u.useCallback((tt,wt)=>{kt({[tt]:wt})},[kt]),en=u.useMemo(()=>{const tt={...gt};return Object.keys(tt).forEach(wt=>{tt[wt]==="all"&&(tt[wt]="")}),tt},[gt]),fn=Dr({data:R,activeFilters:en,searchText:Ht,isDateFilterActive:xt,dateRange:jt,filterCallback:Ke}),Ue=u.useMemo(()=>fn?fn.map(tt=>tt.id):[],[fn]),ct=u.useMemo(()=>{const tt=K,wt=Object.values(en).some(En=>En&&En!==""),yt=Ht&&Ht.trim()!=="";if(!wt&&!yt)return tt;if(!tt||!Ue||Ue.length===0)return[];const dn=En=>En.filter(Pn=>{const Tr=Ue.includes(Pn.id),Be=Pn.children&&Pn.children.length>0&&Pn.children.some(Ye=>Ue.includes(Ye.id));return Tr||Be?{...Pn,children:Pn.children?dn(Pn.children):[]}:!1}).filter(Boolean);return dn(tt)},[K,Ue,en,Ht]);u.useEffect(()=>{},[$t,Ut]);const Je=ct||[];u.useMemo(()=>X(Je),[Je,X]);const Nt=u.useMemo(()=>{const tt=wt=>{if(!wt||!wt.length)return 0;let yt=0;return wt.forEach(dn=>{yt++,dn.children&&dn.children.length>0&&(yt+=tt(dn.children))}),yt};return tt(Je)},[Je]);u.useEffect(()=>{Je.length},[Je.length,qt,Nt]);const br=u.useCallback((tt,wt)=>{let yt=wt;if(typeof tt=="number"&&wt===void 0&&(yt=tt),typeof yt!="number"){console.error("유효하지 않은 페이지 번호:",yt);return}ce(yt),Ft(yt)},[we,Ft]),vr=u.useCallback(tt=>{if(!tt||!tt.target||!tt.target.value){console.error("당일정산 행 수 변경 이벤트 오류:",tt);return}const wt=parseInt(tt.target.value,10);le(wt),ce(0),Et(tt)},[De,Et]),[Jr,ka]=u.useState(Date.now());u.useEffect(()=>{ka(Date.now())},[we,De]);const Fa=u.useMemo(()=>!Je||Je.length===0?[]:Je,[Je,we,De]),za=u.useMemo(()=>ve.map(tt=>tt.id==="userId"?{...tt,clickable:!0,onClick:wt=>{V(wt)}}:tt),[ve,V]),wo=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:c?"page":"all",customFilter:tt=>tt.agent_level_id!==1&&tt.agent_level_id!==2},columns:{"deposit_withdrawal.charge_amount":{type:"sum",format:"currency"},"deposit_withdrawal.exchange_amount":{type:"sum",format:"currency"},"deposit_withdrawal.profit_loss":{type:"sum",format:"currency"},"slot.betting":{type:"sum",format:"currency"},"slot.winning":{type:"sum",format:"currency"},"slot.betting_winning":{type:"sum",format:"currency"},"slot.rolling_amount":{type:"sum",format:"currency"},"slot.rolling_total":{type:"sum",format:"currency"},"slot.final_profit_loss":{type:"sum",format:"currency"},"slot.losing":{type:"sum",format:"currency"},"casino.betting":{type:"sum",format:"currency"},"casino.winning":{type:"sum",format:"currency"},"casino.betting_winning":{type:"sum",format:"currency"},"casino.rolling_amount":{type:"sum",format:"currency"},"casino.rolling_total":{type:"sum",format:"currency"},"casino.final_profit_loss":{type:"sum",format:"currency"},"casino.losing":{type:"sum",format:"currency"},"total.betting":{type:"sum",format:"currency"},"total.winning":{type:"sum",format:"currency"},"total.rolling_amount":{type:"sum",format:"currency"},"total.rolling_total":{type:"sum",format:"currency"},"total.final_profit_loss":{type:"sum",format:"currency"},"total.losing":{type:"sum",format:"currency"},last_balance:{type:"sum",format:"currency"},last_rolling_balance:{type:"sum",format:"currency"}},ui:{label:"전체 합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:e.palette.grey[100],fontWeight:700,borderColor:e.palette.primary.main}}}),[e,c]);return m(vn,{children:[a("style",{children:`
    /* 입출 그룹 - 파란색 계열 */
    [data-column-id="deposit_withdrawal"],
    [data-column-id*="deposit_withdrawal."] {
      background-color: rgba(54, 153, 255, 0.15) !important;
    }
    
    /* 슬롯 그룹 - 초록색 계열 */
    [data-column-id="slot"],
    [data-column-id*="slot."] {
      background-color: rgba(76, 175, 80, 0.15) !important;
    }
    
    /* 카지노 그룹 - 보라색 계열 */
    [data-column-id="casino"],
    [data-column-id*="casino."] {
      background-color: rgba(156, 39, 176, 0.15) !important;
    }
    
    /* 합계 그룹 - 주황색 계열 */
    [data-column-id="total"],
    [data-column-id*="total."] {
      background-color: rgba(255, 152, 0, 0.15) !important;
    }
    
    /* 테이블 바디의 셀에도 동일한 색상 적용 - 모든 가능한 선택자 */
    .MuiTableBody-root .MuiTableCell-root[data-column-id="deposit_withdrawal"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="deposit_withdrawal."],
    tbody .MuiTableCell-root[data-column-id="deposit_withdrawal"],
    tbody .MuiTableCell-root[data-column-id*="deposit_withdrawal."],
    table tbody tr td[data-column-id="deposit_withdrawal"],
    table tbody tr td[data-column-id*="deposit_withdrawal."],
    td[data-column-id="deposit_withdrawal"],
    td[data-column-id*="deposit_withdrawal."] {
      background-color: rgba(54, 153, 255, 0.08) !important;
    }
    
    .MuiTableBody-root .MuiTableCell-root[data-column-id="slot"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="slot."],
    tbody .MuiTableCell-root[data-column-id="slot"],
    tbody .MuiTableCell-root[data-column-id*="slot."],
    table tbody tr td[data-column-id="slot"],
    table tbody tr td[data-column-id*="slot."],
    td[data-column-id="slot"],
    td[data-column-id*="slot."] {
      background-color: rgba(76, 175, 80, 0.08) !important;
    }
    
    .MuiTableBody-root .MuiTableCell-root[data-column-id="casino"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="casino."],
    tbody .MuiTableCell-root[data-column-id="casino"],
    tbody .MuiTableCell-root[data-column-id*="casino."],
    table tbody tr td[data-column-id="casino"],
    table tbody tr td[data-column-id*="casino."],
    td[data-column-id="casino"],
    td[data-column-id*="casino."] {
      background-color: rgba(156, 39, 176, 0.08) !important;
    }
    
    .MuiTableBody-root .MuiTableCell-root[data-column-id="total"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="total."],
    tbody .MuiTableCell-root[data-column-id="total"],
    tbody .MuiTableCell-root[data-column-id*="total."],
    table tbody tr td[data-column-id="total"],
    table tbody tr td[data-column-id*="total."],
    td[data-column-id="total"],
    td[data-column-id*="total."] {
      background-color: rgba(255, 152, 0, 0.08) !important;
    }
  `}),a(Cn,{title:"당일정산",onDisplayOptionsClick:Qt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:me,customActions:a(Se,{variant:"outlined",color:"primary",onClick:$n,size:"small",sx:{mr:1},children:"표시단계"}),sx:{mb:2}}),a(or,{anchorEl:Y,open:ze,onClose:tr,toggleableColumns:We,columnVisibility:Xe,onToggleColumn:xe,onShowAll:qe,onReset:Ee,hiddenColumnsCount:at,menuWidth:"350px"}),a(qf,{open:lt,anchorEl:de,onClose:Xn,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{width:250,maxHeight:400,borderRadius:2,boxShadow:3}},children:m(j,{sx:{p:2},children:[a(M,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"표시할 단계 선택"}),m(j,{sx:{mb:2,display:"flex",gap:1},children:[a(Se,{size:"small",variant:"outlined",onClick:()=>Xr(!0),sx:{fontSize:"12px"},children:"전체 선택"}),a(Se,{size:"small",variant:"outlined",onClick:()=>Xr(!1),sx:{fontSize:"12px"},children:"전체 해제"})]}),a(yn,{sx:{mb:2}}),a(xi,{sx:{p:0},children:St.map(tt=>a(Oa,{sx:{p:0,mb:1},children:a(Lt,{control:a(gr,{checked:F[tt.id]||!1,onChange:()=>Gn(tt.id),size:"small"}),label:a(M,{variant:"body2",children:tt.label}),sx:{width:"100%",m:0}})},tt.id))}),St.length===0&&a(M,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"표시할 단계가 없습니다."})]})}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"당일정산 목록",totalItems:Nt,countLabel:"총 ##count##건의 정산",indentMode:B,toggleIndentMode:$,sequentialPageNumbers:Yt,togglePageNumberMode:Oe,hasPinnedColumns:Xt,isGridReady:tn,toggleColumnPin:ke,searchText:Ht,handleSearchChange:Fe,handleClearSearch:je,showIndentToggle:!0,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"당일정산 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:it,filterValues:Wt||{},activeFilters:en||{},filterOptions:Tt,handleFilterChange:Pt,onFilter:kt,onClearFilters:Mt,isDateFilterActive:xt,handleOpenDateFilter:Rt,resetDateFilter:ht},paginationProps:{count:Nt,page:we,rowsPerPage:De,onPageChange:br,onRowsPerPageChange:vr,totalCount:Nt,onExcelDownload:ue,onPrint:Ae}})}),m(j,{sx:{width:"100%",mt:2},ref:S,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",we+1," / ",Math.ceil(Nt/De)," (페이지당 ",De,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),console.log("🔍 BaseTable에 전달되는 데이터:",{visibleDataLength:(Fa==null?void 0:Fa.length)||0,columnsLength:(za==null?void 0:za.length)||0,page:we,rowsPerPage:De}),a(An,{columns:za,data:Fa,checkable:!0,hierarchical:!0,indentMode:B,checkedItems:se,expandedRows:z,allChecked:Z,onCheck:_e,onToggleAll:Re,onToggleExpand:ma,onSort:ie,sortConfig:J,page:we,rowsPerPage:De,totalCount:Nt,sequentialPageNumbers:Yt,draggableColumns:ra,onColumnOrderChange:At,dragHandlers:ja,dragInfo:fe,fixedHeader:!0,maxHeight:_,tableHeaderRef:ge,headerStyle:oe(),pinnedColumns:be,summary:wo,onSummaryToggle:tt=>d(tt),fixedFooter:!0},`today-settlement-table-${Jr}`),a(rr,{resizeHandleProps:D(parseFloat(_)),showIcon:!0,isDragging:A,sx:{mt:1,opacity:A?1:.7,"&:hover":{opacity:1}}})]})]}),a(Bi,{open:G,onClose:ae,member:te,onSave:ne})]})},sle=[{value:"pending",label:"요청 중"},{value:"waiting",label:"대기"},{value:"approved",label:"승인"},{value:"rejected",label:"비승인"}],lle=e=>{switch(e){case"pending":return{color:"warning",variant:"filled"};case"waiting":return{color:"info",variant:"filled"};case"approved":return{color:"success",variant:"filled"};case"rejected":return{color:"error",variant:"filled"};default:return{color:"default",variant:"filled"}}},Uj=e=>{switch(e){case"pending":return"요청 중";case"waiting":return"대기";case"approved":return"승인";case"rejected":return"비승인";default:return e}},GD=[{id:"no",label:"No.",width:80,sortable:!1,alwaysVisible:!0,type:"number"},{id:"type",label:"입금유형",width:100,sortable:!1,type:"chip",render:()=>({label:"입금",color:"primary",variant:"outlined"})},{id:"username",label:"아이디(닉네임)",width:200,sortable:!0,type:"custom",render:e=>m("span",{style:{color:"#1976d2",cursor:"pointer"},children:[e.username," ",e.nickname&&`(${e.nickname})`]})},{id:"level_name",label:"유형",width:120,sortable:!0,type:"custom",render:e=>e.level_name?a(ut,{label:e.level_name,size:"small",sx:{backgroundColor:e.backgroundColor||"#e8f5e9",color:e.borderColor||"#2e7d32",border:`1px solid ${e.borderColor||"#2e7d32"}`,fontWeight:400,borderRadius:"50px",padding:"0 8px",height:"28px",fontSize:"0.8rem","&:hover":{backgroundColor:e.backgroundColor||"#e8f5e9"}}}):"-"},{id:"parentAgents",label:"상위에이전트",width:200,sortable:!1,type:"custom",render:e=>{if(!e.parentAgents||e.parentAgents.length===0)return"-";const t=e.parentAgents.map(n=>({label:n.username,nickname:n.nickname,backgroundColor:n.backgroundColor||"#e8f5e9",borderColor:n.borderColor||"#2e7d32"}));return a(ng,{parentTypes:t,direction:"row"})}},{id:"amount",label:"신청금액",width:150,sortable:!0,type:"custom",render:e=>{const t=Math.floor(e.requested_amount||e.amount||0),n=Math.floor(e.bonus_amount||0);return n>0?m("span",{children:[t.toLocaleString(),m("span",{style:{color:"#1976d2",fontWeight:"bold"},children:["(",n.toLocaleString(),")"]}),"원"]}):`${t.toLocaleString()}원`}},{id:"before_balance",label:"처리전금액",width:120,sortable:!0,type:"custom",render:e=>{if(e.status==="pending"||e.status==="waiting")return`${Math.floor(e.current_balance||0).toLocaleString()}원`;if(e.status==="approved"){const t=e.credited_amount||e.final_amount||e.amount||0,n=(e.current_balance||0)-t;return`${Math.floor(n).toLocaleString()}원`}return`${Math.floor(e.current_balance||0).toLocaleString()}원`}},{id:"after_balance",label:"처리후금액",width:120,sortable:!0,type:"custom",render:e=>e.status==="approved"?`${Math.floor(e.current_balance||0).toLocaleString()}원`:e.status==="rejected"?`${Math.floor(e.current_balance||0).toLocaleString()}원`:"-"},{id:"bank_name",label:"은행명",width:100,sortable:!0,type:"custom",render:e=>e.deposit_bank_name||"-"},{id:"account_number",label:"계좌번호",width:150,sortable:!0,type:"custom",render:e=>e.deposit_account_number||"-"},{id:"account_holder",label:"예금주",width:100,sortable:!0,type:"custom",render:e=>e.deposit_account_holder||"-"},{id:"status",label:"상태",width:100,sortable:!0,type:"custom",render:e=>a(ut,{label:Uj(e.status),size:"small",...lle(e.status)})},{id:"created_at",label:"신청일시",width:180,sortable:!0,type:"custom",render:e=>e.created_at?new Date(e.created_at).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-"},{id:"processed_at",label:"처리일시",width:180,sortable:!0,type:"custom",render:e=>e.status!=="approved"&&e.status!=="rejected"||!e.processed_at?"-":new Date(e.processed_at).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},{id:"processor",label:"처리자",width:120,sortable:!0,type:"custom",render:e=>(e.status==="approved"||e.status==="rejected")&&e.processor_username||"-"},{id:"reject_reason",label:"비승인 사유",width:120,sortable:!1,type:"custom",render:(e,t)=>e.status==="rejected"&&e.reject_reason?a(Se,{variant:"outlined",color:"error",size:"small",onClick:()=>{var n;return(n=t==null?void 0:t.onViewRejectReason)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"사유 보기"}):"-"},{id:"actions",label:"액션",width:150,sortable:!1,type:"custom",render:(e,t)=>e.status==="approved"||e.status==="rejected"?"-":m(kr,{direction:"row",spacing:.5,children:[(e.status==="pending"||e.status==="waiting")&&a(Se,{variant:"outlined",color:"primary",size:"small",onClick:()=>{var n;return(n=t==null?void 0:t.onApprove)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"승인"}),e.status==="pending"&&a(Se,{variant:"outlined",color:"warning",size:"small",onClick:()=>{var n;return(n=t==null?void 0:t.onWait)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"대기"}),(e.status==="pending"||e.status==="waiting")&&a(Se,{variant:"outlined",color:"error",size:"small",onClick:()=>{var n;return(n=t==null?void 0:t.onReject)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"비승인"})]})}],cle=23,Qi={getAll:async(e={})=>(await Pe.get("/deposit-inquiries",{params:e})).data,getCounts:async()=>(await Pe.get("/deposit-inquiries/counts")).data,updateStatus:async(e,t)=>(await Pe.put(`/deposit-inquiries/${e}/status`,t)).data,bulkUpdate:async e=>(await Pe.put("/deposit-inquiries/bulk-update",e)).data,getInquiry:async e=>(await Pe.get(`/deposit-inquiries/${e}`)).data},Vj=({open:e,onClose:t,reason:n,title:r="비승인 사유"})=>m(Yn,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:3}},children:[m(Zn,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:1,borderColor:"divider",pb:2},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(uE,{color:"error"}),a(M,{variant:"h6",component:"span",children:r})]}),a(Ct,{edge:"end",color:"inherit",onClick:t,"aria-label":"close",size:"small",children:a(Sa,{})})]}),a(Kn,{sx:{mt:2},children:a(j,{sx:{p:2,backgroundColor:"error.lighter",borderRadius:1,border:1,borderColor:"error.light"},children:a(M,{variant:"body1",sx:{color:"error.dark"},children:n||"비승인 사유가 없습니다."})})}),a(nr,{sx:{px:3,pb:2},children:a(Se,{onClick:t,variant:"contained",size:"small",children:"확인"})})]}),ule=()=>{const e=On(),{socketService:t}=ni(),[n,r]=u.useState("pending"),i=(de,Ze)=>{r(Ze)},[o,s]=u.useState([]),[l,c]=u.useState({all:0,pending:0,waiting:0,rejected:0,approved:0}),[d,h]=u.useState(!0),[f,g]=u.useState(null),[w,x]=u.useState({open:!1,reason:""}),y=u.useCallback(async()=>{try{h(!0);const de=await Qi.getCounts();de.success&&c({all:de.data.total||0,pending:de.data.pending||0,waiting:de.data.waiting||0,rejected:de.data.rejected||0,approved:de.data.approved||0});const Ze={page:1,limit:1e3,status:n==="all"?null:n},lt=await Qi.getAll(Ze);lt.success&&(lt.data,s(lt.data||[])),g(null)}catch(de){console.error("입금문의 데이터 로드 실패:",de),g(de.message),s([])}finally{h(!1)}},[n]);u.useEffect(()=>{y()},[n,y]),u.useEffect(()=>{const de=localStorage.getItem("depositPage_columnsVersion"),Ze=cle.toString();de!==Ze&&(localStorage.removeItem("depositPage_columnVisibility"),localStorage.removeItem("depositPage_columnOrder"),localStorage.removeItem("depositPage_pinnedColumns"),localStorage.setItem("depositPage_columnsVersion",Ze),window.location.reload())},[]),u.useEffect(()=>{if(!t)return;const de=lt=>{y()},Ze=lt=>{(lt.pendingCount!==void 0||lt.waitingCount!==void 0)&&c(Qt=>({...Qt,pending:lt.pendingCount||Qt.pending,waiting:lt.waitingCount||Qt.waiting})),y()};return t.on("deposit:inquiry:created",de),t.on("deposit:inquiry:status:changed",Ze),()=>{t.off("deposit:inquiry:created",de),t.off("deposit:inquiry:status:changed",Ze)}},[t,y]);const{containerRef:p,tableHeight:v,autoHeight:b,toggleAutoHeight:P,setManualHeight:k}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:C,getResizeHandleProps:S}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:de=>{b&&P(!1),k(`${de}px`)}}),{tableHeaderRef:_,getTableHeaderStyles:T}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),I=u.useCallback(()=>{alert("입금신청 목록을 엑셀로 다운로드합니다.")},[]),L=u.useCallback(()=>{alert("입금신청 목록을 인쇄합니다.")},[]),A=u.useCallback(de=>{le(de),ce(!0)},[]),D=u.useCallback(()=>{ce(!1),le(null)},[]),B=u.useCallback(de=>{alert(`${de.nickname||de.username}님의 정보가 저장되었습니다.`),D()},[D]),$=u.useCallback(async(de,Ze,lt="")=>{try{(await Qi.updateStatus(de.id,{status:Ze,rejectReason:lt})).success&&(alert(`입금문의가 ${Uj(Ze)} 처리되었습니다.`),y())}catch(Qt){console.error("상태 변경 실패:",Qt),alert("상태 변경에 실패했습니다.")}},[y]),N=u.useMemo(()=>GD.map(de=>de.id==="username"?{...de,clickable:!0,onClick:Ze=>{A(Ze)}}:de.id==="actions"?{...de,render:Ze=>de.render(Ze,{onApprove:lt=>$(lt,"approved"),onWait:lt=>$(lt,"waiting"),onReject:lt=>{const Qt=prompt("비승인 사유를 입력하세요:");Qt!==null&&$(lt,"rejected",Qt)}})}:de.id==="reject_reason"?{...de,render:Ze=>de.render(Ze,{onViewRejectReason:lt=>{x({open:!0,reason:lt.reject_reason})}})}:de),[A,$]),{columnVisibility:F,toggleableColumns:O,visibleColumns:R,hiddenColumnsCount:E,toggleColumnVisibility:z,showAllColumns:q,resetToDefault:X}=dr(GD,{defaultHiddenColumns:[],tableId:"depositPage_columnVisibility"}),{columns:H,dragInfo:K,pinnedColumns:ee,handleDragStart:ge,handleDragEnd:oe,handleDragOver:G,handleDrop:Q,updateColumns:te,setDefaultPinnedColumns:U,clearAllPinnedColumns:V}=sr({initialColumns:R,onColumnOrderChange:de=>{de.map(Ze=>Ze.id)}}),[ae,ne]=u.useState(null),me=!!ae,ue=u.useCallback(de=>{ne(de)},[]),Ae=u.useCallback(()=>{ne(null)},[]),[we,ce]=u.useState(!1),[De,le]=u.useState(null),[se,J]=u.useState(0),[Z,ie]=u.useState(25),[_e,Re]=u.useState(!1),{checkedItems:He,allChecked:ft,handleCheck:St,handleToggleAll:Tt,expandedRows:gt,handleToggleExpand:et,sortConfig:xt,handleSort:Rt}=Nn({data:o}),ht=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},...sle.map(Ze=>({value:Ze.value,label:Ze.label}))]}],[]),{activeFilters:jt,handleFilterChange:$t,isDateFilterActive:Ut,handleOpenDateFilter:Bt,resetDateFilter:Kt,dateRange:Ft,page:Et,rowsPerPage:Ot,totalCount:zt,totalPages:Wt,handlePageChange:kt,handleRowsPerPageChange:Mt,filteredData:Ht,displayData:qt,filterValues:Yt,handleFilter:Xt,handleClearFilters:tn}=yr({columns:N,data:o,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:"",paymentMethod:"",processor:"",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:o.length,onExcelDownload:I,onPrint:L}}),Fe=u.useMemo(()=>{const de={...jt};return Object.keys(de).forEach(Ze=>{de[Ze]==="all"&&(de[Ze]="")}),de},[jt]),{searchText:je,totalItems:Oe,sequentialPageNumbers:ke,hasPinnedColumns:bt,isGridReady:it,handleSearchChange:fe,handleClearSearch:be,togglePageNumberMode:Te,toggleColumnPin:Ne,setGridReady:Ve}=Rn({initialTotalItems:o.length,onSearch:de=>{Et!==0&&kt(null,0)},onToggleColumnPin:de=>{de?U():V()}}),Ge=u.useCallback((de,Ze,lt)=>{switch(Ze){case"status":return lt==="all"||lt===""?de:de.filter(tr=>tr.status===lt);case"date":let Qt=[...de];return lt.startDate&&(Qt=Qt.filter(tr=>{const $n=new Date(tr.created_at),Xn=new Date(lt.startDate);return Xn.setHours(0,0,0,0),$n>=Xn})),lt.endDate&&(Qt=Qt.filter(tr=>{const $n=new Date(tr.created_at),Xn=new Date(lt.endDate);return Xn.setHours(23,59,59,999),$n<=Xn})),Qt;default:return de}},[]),At=u.useCallback((de,Ze)=>{$t(de,Ze)},[$t]),Qe=Dr({data:o,activeFilters:Fe,searchText:je,isDateFilterActive:Ut,dateRange:Ft,filterCallback:Ge}),Ie=u.useMemo(()=>Qe?Qe.map(de=>de.id):[],[Qe]),ve=u.useMemo(()=>{const de=Object.values(Fe).some(lt=>lt&&lt!==""),Ze=je&&je.trim()!=="";return!de&&!Ze?o:!o||!Ie||Ie.length===0?[]:o.filter(lt=>Ie.includes(lt.id))},[o,Ie,Fe,je])||[],at=ve.length,We=u.useCallback((de,Ze)=>{let lt=Ze;if(typeof de=="number"&&Ze===void 0&&(lt=de),typeof lt!="number"){console.error("유효하지 않은 페이지 번호:",lt);return}J(lt),kt(lt)},[se,kt]),xe=u.useCallback(de=>{if(!de||!de.target||!de.target.value){console.error("입금페이지 행 수 변경 이벤트 오류:",de);return}const Ze=parseInt(de.target.value,10);ie(Ze),J(0),Mt(de)},[Z,Mt]),[qe,Ee]=u.useState(Date.now());u.useEffect(()=>{Ee(Date.now())},[se,Z]);const Y=u.useMemo(()=>!ve||ve.length===0?[]:ve,[ve,se,Z,at]),he=u.useMemo(()=>{const de=new Map(N.map(Ze=>[Ze.id,Ze]));return H.map(Ze=>{const lt=de.get(Ze.id);return lt?{...Ze,...lt,id:Ze.id,label:Ze.label}:Ze})},[H,N]),ze=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:_e?"page":"all"},columns:{amount:{type:"sum",format:"currency"},before_balance:{type:"sum",format:"currency"},after_balance:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[_e]);return u.useEffect(()=>{Ve(!0)},[Ve]),m(vn,{children:[a(Cn,{title:"입금문의",onDisplayOptionsClick:ue,showAddButton:!1,showRefreshButton:!0,onRefreshClick:y,sx:{mb:2}}),a(or,{anchorEl:ae,open:me,onClose:Ae,toggleableColumns:O,columnVisibility:F,onToggleColumn:z,onShowAll:q,onReset:X,hiddenColumnsCount:E,menuWidth:"350px"}),a(rt,{elevation:1,sx:{mb:2},children:m(La,{value:n,onChange:i,indicatorColor:"primary",textColor:"primary",sx:{borderBottom:1,borderColor:"divider"},children:[a(_n,{label:`전체 (${l.all})`,value:"all",sx:{minWidth:100}}),a(_n,{label:`요청 중 (${l.pending})`,value:"pending",sx:{minWidth:120,color:e.palette.warning.main}}),a(_n,{label:`대기 (${l.waiting})`,value:"waiting",sx:{minWidth:100,color:e.palette.info.main}}),a(_n,{label:`승인 (${l.approved})`,value:"approved",sx:{minWidth:100,color:e.palette.success.main}}),a(_n,{label:`비승인 (${l.rejected})`,value:"rejected",sx:{minWidth:100,color:e.palette.error.main}})]})}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"입금문의 목록",totalItems:at,countLabel:"총 ##count##건의 입금문의",sequentialPageNumbers:ke,togglePageNumberMode:Te,hasPinnedColumns:bt,isGridReady:it,toggleColumnPin:Ne,searchText:je,handleSearchChange:fe,handleClearSearch:be,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"입금신청 검색...",sx:{mb:2}}),He.length>0&&n==="pending"&&m(j,{sx:{mb:2,display:"flex",gap:1},children:[m(Se,{variant:"contained",color:"success",size:"small",onClick:async()=>{if(confirm(`선택한 ${He.length}건을 승인하시겠습니까?`))try{const de=await Qi.bulkUpdate({ids:He,status:"approved"});de.success&&(alert(de.message),y(),Tt(!1))}catch{alert("일괄 승인에 실패했습니다.")}},children:["선택 승인 (",He.length,")"]}),m(Se,{variant:"contained",color:"info",size:"small",onClick:async()=>{if(confirm(`선택한 ${He.length}건을 대기 처리하시겠습니까?`))try{const de=await Qi.bulkUpdate({ids:He,status:"waiting"});de.success&&(alert(de.message),y(),Tt(!1))}catch{alert("일괄 대기 처리에 실패했습니다.")}},children:["선택 대기 (",He.length,")"]}),m(Se,{variant:"contained",color:"error",size:"small",onClick:async()=>{const de=prompt("비승인 사유를 입력하세요:");if(de!==null&&confirm(`선택한 ${He.length}건을 비승인하시겠습니까?`))try{const Ze=await Qi.bulkUpdate({ids:He,status:"rejected",rejectReason:de});Ze.success&&(alert(Ze.message),y(),Tt(!1))}catch{alert("일괄 비승인에 실패했습니다.")}},children:["선택 비승인 (",He.length,")"]})]}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:N,filterValues:Yt||{},activeFilters:jt||{},filterOptions:ht,handleFilterChange:At,onFilter:Xt,onClearFilters:tn,isDateFilterActive:Ut,handleOpenDateFilter:Bt,resetDateFilter:Kt},paginationProps:{count:at,page:se,rowsPerPage:Z,onPageChange:We,onRowsPerPageChange:xe,totalCount:at,onExcelDownload:I,onPrint:L}})}),m(j,{sx:{width:"100%",mt:2},ref:p,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",se+1," / ",Math.ceil(at/Z)," (페이지당 ",Z,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),console.log("BaseTable 렌더링:",{columnsCount:he.length,dataCount:Y.length,firstData:Y[0],finalColumns:he.map(de=>({id:de.id,label:de.label,type:de.type,hasRender:!!de.render,renderFunction:de.render?de.render.toString().substring(0,100):"no render"}))}),a(An,{columns:he,data:Y,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:He,expandedRows:gt,allChecked:ft,onCheck:St,onToggleAll:Tt,onToggleExpand:et,onSort:Rt,sortConfig:xt,page:se,rowsPerPage:Z,totalCount:at,sequentialPageNumbers:ke,draggableColumns:!0,onColumnOrderChange:te,dragHandlers:{handleDragStart:ge,handleDragEnd:oe,handleDragOver:G,handleDrop:Q},dragInfo:K,fixedHeader:!0,fixedFooter:!0,maxHeight:v,tableHeaderRef:_,headerStyle:T(),pinnedColumns:ee,summary:ze},`deposit-table-${qe}`),a(rr,{resizeHandleProps:S(parseFloat(v)),showIcon:!0,isDragging:C})]})]}),a(Bi,{open:we,onClose:D,member:De,onSave:B,title:"회원 상세정보"}),a(Vj,{open:w.open,onClose:()=>x({open:!1,reason:""}),reason:w.reason,title:"입금문의 비승인 사유"})]})},dle=[{value:"pending",label:"요청 중"},{value:"waiting",label:"대기"},{value:"approved",label:"승인"},{value:"rejected",label:"비승인"}],hle=e=>{switch(e){case"pending":return{color:"warning",variant:"filled"};case"waiting":return{color:"info",variant:"filled"};case"approved":return{color:"success",variant:"filled"};case"rejected":return{color:"error",variant:"filled"};default:return{color:"default",variant:"filled"}}},Gj=e=>{switch(e){case"pending":return"요청 중";case"waiting":return"대기";case"approved":return"승인";case"rejected":return"비승인";default:return e}},KD=[{id:"no",label:"No.",width:80,sortable:!1,alwaysVisible:!0,type:"number"},{id:"type",label:"출금유형",width:100,sortable:!1,type:"chip",render:()=>({label:"출금",color:"secondary",variant:"outlined"})},{id:"username",label:"아이디(닉네임)",width:200,sortable:!0,type:"custom",render:e=>m("span",{style:{color:"#1976d2",cursor:"pointer"},children:[e.username," ",e.nickname&&`(${e.nickname})`]})},{id:"level_name",label:"유형",width:120,sortable:!0,type:"custom",render:e=>e.level_name?a(ut,{label:e.level_name,size:"small",sx:{backgroundColor:e.backgroundColor||"#e8f5e9",color:e.borderColor||"#2e7d32",border:`1px solid ${e.borderColor||"#2e7d32"}`,fontWeight:400,borderRadius:"50px",padding:"0 8px",height:"28px",fontSize:"0.8rem","&:hover":{backgroundColor:e.backgroundColor||"#e8f5e9"}}}):"-"},{id:"parentAgents",label:"상위에이전트",width:200,sortable:!1,type:"custom",render:e=>{if(!e.parentAgents||e.parentAgents.length===0)return"-";const t=e.parentAgents.map(n=>({label:n.username,nickname:n.nickname,backgroundColor:n.backgroundColor||"#e8f5e9",borderColor:n.borderColor||"#2e7d32"}));return a(ng,{parentTypes:t,direction:"row"})}},{id:"amount",label:"신청금액",width:120,sortable:!0,type:"custom",render:e=>`${Math.floor(e.amount||0).toLocaleString()}원`},{id:"before_balance",label:"처리전금액",width:120,sortable:!0,type:"custom",render:e=>{if(e.status==="pending"||e.status==="waiting")return`${Math.floor(e.current_balance||0).toLocaleString()}원`;if(e.status==="approved"){const t=(e.current_balance||0)+(e.amount||0);return`${Math.floor(t).toLocaleString()}원`}return`${Math.floor(e.current_balance||0).toLocaleString()}원`}},{id:"after_balance",label:"처리후금액",width:120,sortable:!0,type:"custom",render:e=>e.status==="approved"?`${Math.floor(e.current_balance||0).toLocaleString()}원`:e.status==="rejected"?`${Math.floor(e.current_balance||0).toLocaleString()}원`:"-"},{id:"bank_name",label:"은행명",width:100,sortable:!0,type:"custom",render:e=>e.bank_name||"-"},{id:"account_number",label:"계좌번호",width:150,sortable:!0,type:"custom",render:e=>e.account_number||"-"},{id:"account_holder",label:"예금주",width:100,sortable:!0,type:"custom",render:e=>e.account_holder||"-"},{id:"status",label:"상태",width:100,sortable:!0,type:"custom",render:e=>a(ut,{label:Gj(e.status),size:"small",...hle(e.status)})},{id:"created_at",label:"신청일시",width:180,sortable:!0,type:"custom",render:e=>e.created_at?new Date(e.created_at).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-"},{id:"processed_at",label:"처리일시",width:180,sortable:!0,type:"custom",render:e=>e.processed_at?new Date(e.processed_at).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-"},{id:"processor",label:"처리자",width:100,sortable:!0,type:"custom",render:e=>(e.status==="approved"||e.status==="rejected")&&e.processor_username||"-"},{id:"memo",label:"메모",width:150,sortable:!1,type:"custom",render:e=>e.memo||"-"},{id:"reject_reason",label:"비승인사유",width:150,sortable:!1,type:"custom",render:e=>e.reject_reason||"-"},{id:"actions",label:"액션",width:220,sortable:!1,alwaysVisible:!0,type:"custom",render:(e,t={})=>e.status==="pending"?m(kr,{direction:"row",spacing:.5,children:[a(Se,{variant:"outlined",color:"primary",size:"small",onClick:()=>{var n;return(n=t.onApprove)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"승인"}),a(Se,{variant:"outlined",color:"warning",size:"small",onClick:()=>{var n;return(n=t.onWait)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"대기"}),a(Se,{variant:"outlined",color:"error",size:"small",onClick:()=>{var n;return(n=t.onReject)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"비승인"})]}):e.status==="waiting"?m(kr,{direction:"row",spacing:.5,children:[a(Se,{variant:"outlined",color:"primary",size:"small",onClick:()=>{var n;return(n=t.onApprove)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"승인"}),a(Se,{variant:"outlined",color:"error",size:"small",onClick:()=>{var n;return(n=t.onReject)==null?void 0:n.call(t,e)},sx:{minWidth:"auto",px:1},children:"비승인"})]}):"-"}],fle="1.0.10",Zs={getAll:async(e={})=>(await Pe.get("/withdrawal-inquiries",{params:e})).data,getCounts:async()=>(await Pe.get("/withdrawal-inquiries/counts")).data,updateStatus:async(e,t)=>(await Pe.put(`/withdrawal-inquiries/${e}/status`,t)).data,bulkUpdate:async e=>(await Pe.put("/withdrawal-inquiries/bulk-update",e)).data,getInquiry:async e=>(await Pe.get(`/withdrawal-inquiries/${e}`)).data},ple=()=>{const e=On(),{socketService:t}=ni(),[n,r]=u.useState("pending"),i=(de,Ze)=>{r(Ze)},[o,s]=u.useState([]),[l,c]=u.useState({all:0,pending:0,waiting:0,rejected:0,approved:0}),[d,h]=u.useState(!0),[f,g]=u.useState(null),[w,x]=u.useState({open:!1,reason:""}),y=u.useCallback(async()=>{try{h(!0);const de=await Zs.getCounts();de.success&&c({all:de.data.total||0,pending:de.data.pending||0,waiting:de.data.waiting||0,rejected:de.data.rejected||0,approved:de.data.approved||0});const Ze={page:1,limit:1e3,status:n==="all"?null:n},lt=await Zs.getAll(Ze);lt.success&&(lt.data,s(lt.data||[])),g(null)}catch(de){console.error("출금문의 데이터 로드 실패:",de),g(de.message),s([])}finally{h(!1)}},[n]);u.useEffect(()=>{y()},[n,y]),u.useEffect(()=>{const de=localStorage.getItem("withdrawalPage_columnsVersion"),Ze=fle.toString();de!==Ze&&(localStorage.removeItem("withdrawalPage_columnVisibility"),localStorage.removeItem("withdrawalPage_columnOrder"),localStorage.removeItem("withdrawalPage_pinnedColumns"),localStorage.setItem("withdrawalPage_columnsVersion",Ze),window.location.reload())},[]),u.useEffect(()=>{if(!t)return;const de=lt=>{try{const Qt=new(window.AudioContext||window.webkitAudioContext),tr=Qt.createOscillator(),$n=Qt.createGain();tr.connect($n),$n.connect(Qt.destination),tr.frequency.value=800,$n.gain.value=.3,tr.start(),tr.stop(Qt.currentTime+.2),setTimeout(()=>{const Xn=Qt.createOscillator(),Gn=Qt.createGain();Xn.connect(Gn),Gn.connect(Qt.destination),Xn.frequency.value=1e3,Gn.gain.value=.3,Xn.start(),Xn.stop(Qt.currentTime+.2)},250)}catch{}y()},Ze=lt=>{(lt.pendingCount!==void 0||lt.waitingCount!==void 0)&&c(Qt=>({...Qt,pending:lt.pendingCount||Qt.pending,waiting:lt.waitingCount||Qt.waiting})),y()};return t.on("withdrawal:inquiry:created",de),t.on("withdrawal:inquiry:new",de),t.on("withdrawal:inquiry:status:changed",Ze),()=>{t.off("withdrawal:inquiry:created",de),t.off("withdrawal:inquiry:new",de),t.off("withdrawal:inquiry:status:changed",Ze)}},[t,y]);const{containerRef:p,tableHeight:v,autoHeight:b,toggleAutoHeight:P,setManualHeight:k}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:C,getResizeHandleProps:S}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:de=>{b&&P(!1),k(`${de}px`)}}),{tableHeaderRef:_,getTableHeaderStyles:T}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),I=u.useCallback(()=>{alert("출금신청 목록을 엑셀로 다운로드합니다.")},[]),L=u.useCallback(()=>{alert("출금신청 목록을 인쇄합니다.")},[]),A=u.useCallback(de=>{le(de),ce(!0)},[]),D=u.useCallback(()=>{ce(!1),le(null)},[]),B=u.useCallback(de=>{alert(`${de.nickname||de.username}님의 정보가 저장되었습니다.`),D()},[D]),$=u.useCallback(async(de,Ze,lt="")=>{try{(await Zs.updateStatus(de.id,{status:Ze,rejectReason:lt})).success&&(alert(`출금문의가 ${Gj(Ze)} 처리되었습니다.`),y())}catch(Qt){console.error("상태 변경 실패:",Qt),alert("상태 변경에 실패했습니다.")}},[y]),N=u.useMemo(()=>KD.map(de=>de.id==="username"?{...de,clickable:!0,onClick:Ze=>{A(Ze)}}:de.id==="actions"?{...de,render:Ze=>de.render(Ze,{onApprove:lt=>$(lt,"approved"),onWait:lt=>$(lt,"waiting"),onReject:lt=>{const Qt=prompt("비승인 사유를 입력하세요:");Qt!==null&&$(lt,"rejected",Qt)}})}:de.id==="reject_reason"?{...de,render:Ze=>de.render(Ze,{onViewRejectReason:lt=>{x({open:!0,reason:lt.reject_reason})}})}:de),[A,$]),{columnVisibility:F,toggleableColumns:O,visibleColumns:R,hiddenColumnsCount:E,toggleColumnVisibility:z,showAllColumns:q,resetToDefault:X}=dr(KD,{defaultHiddenColumns:[],tableId:"withdrawalPage_columnVisibility"}),{columns:H,dragInfo:K,pinnedColumns:ee,handleDragStart:ge,handleDragEnd:oe,handleDragOver:G,handleDrop:Q,updateColumns:te,setDefaultPinnedColumns:U,clearAllPinnedColumns:V}=sr({initialColumns:R,onColumnOrderChange:de=>{de.map(Ze=>Ze.id)}}),[ae,ne]=u.useState(null),me=!!ae,ue=u.useCallback(de=>{ne(de)},[]),Ae=u.useCallback(()=>{ne(null)},[]),[we,ce]=u.useState(!1),[De,le]=u.useState(null),[se,J]=u.useState(0),[Z,ie]=u.useState(25),[_e,Re]=u.useState(!1),{checkedItems:He,allChecked:ft,handleCheck:St,handleToggleAll:Tt,expandedRows:gt,handleToggleExpand:et,sortConfig:xt,handleSort:Rt}=Nn({data:o}),ht=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},...dle.map(Ze=>({value:Ze.value,label:Ze.label}))]}],[]),{activeFilters:jt,handleFilterChange:$t,isDateFilterActive:Ut,handleOpenDateFilter:Bt,resetDateFilter:Kt,dateRange:Ft,page:Et,rowsPerPage:Ot,totalCount:zt,totalPages:Wt,handlePageChange:kt,handleRowsPerPageChange:Mt,filteredData:Ht,displayData:qt,filterValues:Yt,handleFilter:Xt,handleClearFilters:tn}=yr({columns:N,data:o,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:o.length,onExcelDownload:I,onPrint:L}}),Fe=u.useMemo(()=>{const de={...jt};return Object.keys(de).forEach(Ze=>{de[Ze]==="all"&&(de[Ze]="")}),de},[jt]),{searchText:je,totalItems:Oe,sequentialPageNumbers:ke,hasPinnedColumns:bt,isGridReady:it,handleSearchChange:fe,handleClearSearch:be,togglePageNumberMode:Te,toggleColumnPin:Ne,setGridReady:Ve}=Rn({initialTotalItems:o.length,onSearch:de=>{Et!==0&&kt(null,0)},onToggleColumnPin:de=>{de?U():V()}}),Ge=u.useCallback((de,Ze,lt)=>{switch(Ze){case"status":return lt==="all"||lt===""?de:de.filter(tr=>tr.status===lt);case"date":let Qt=[...de];return lt.startDate&&(Qt=Qt.filter(tr=>{const $n=new Date(tr.created_at),Xn=new Date(lt.startDate);return Xn.setHours(0,0,0,0),$n>=Xn})),lt.endDate&&(Qt=Qt.filter(tr=>{const $n=new Date(tr.created_at),Xn=new Date(lt.endDate);return Xn.setHours(23,59,59,999),$n<=Xn})),Qt;default:return de}},[]),At=u.useCallback((de,Ze)=>{$t(de,Ze)},[$t]),Qe=Dr({data:o,activeFilters:Fe,searchText:je,isDateFilterActive:Ut,dateRange:Ft,filterCallback:Ge}),Ie=u.useMemo(()=>Qe?Qe.map(de=>de.id):[],[Qe]),ve=u.useMemo(()=>{const de=Object.values(Fe).some(lt=>lt&&lt!==""),Ze=je&&je.trim()!=="";return!de&&!Ze?o:!o||!Ie||Ie.length===0?[]:o.filter(lt=>Ie.includes(lt.id))},[o,Ie,Fe,je])||[],at=ve.length,We=u.useCallback((de,Ze)=>{let lt=Ze;if(typeof de=="number"&&Ze===void 0&&(lt=de),typeof lt!="number"){console.error("유효하지 않은 페이지 번호:",lt);return}J(lt),kt(lt)},[se,kt]),xe=u.useCallback(de=>{if(!de||!de.target||!de.target.value){console.error("출금페이지 행 수 변경 이벤트 오류:",de);return}const Ze=parseInt(de.target.value,10);ie(Ze),J(0),Mt(de)},[Z,Mt]),[qe,Ee]=u.useState(Date.now());u.useEffect(()=>{Ee(Date.now())},[se,Z]);const Y=u.useMemo(()=>!ve||ve.length===0?[]:ve,[ve,se,Z,at]),he=u.useMemo(()=>{const de=new Map(N.map(Ze=>[Ze.id,Ze]));return H.map(Ze=>{const lt=de.get(Ze.id);return lt?{...Ze,...lt,id:Ze.id,label:Ze.label}:Ze})},[H,N]),ze=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:_e?"page":"all"},columns:{amount:{type:"sum",format:"currency"},before_balance:{type:"sum",format:"currency"},after_balance:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[_e]);return u.useEffect(()=>{Ve(!0)},[Ve]),m(vn,{children:[a(Cn,{title:"출금문의",onDisplayOptionsClick:ue,showAddButton:!1,showRefreshButton:!0,onRefreshClick:y,sx:{mb:2}}),a(or,{anchorEl:ae,open:me,onClose:Ae,toggleableColumns:O,columnVisibility:F,onToggleColumn:z,onShowAll:q,onReset:X,hiddenColumnsCount:E,menuWidth:"350px"}),a(rt,{elevation:1,sx:{mb:2},children:m(La,{value:n,onChange:i,indicatorColor:"primary",textColor:"primary",sx:{borderBottom:1,borderColor:"divider"},children:[a(_n,{label:`전체 (${l.all})`,value:"all",sx:{minWidth:100}}),a(_n,{label:`요청 중 (${l.pending})`,value:"pending",sx:{minWidth:120,color:e.palette.warning.main}}),a(_n,{label:`대기 (${l.waiting})`,value:"waiting",sx:{minWidth:100,color:e.palette.info.main}}),a(_n,{label:`승인 (${l.approved})`,value:"approved",sx:{minWidth:100,color:e.palette.success.main}}),a(_n,{label:`비승인 (${l.rejected})`,value:"rejected",sx:{minWidth:100,color:e.palette.error.main}})]})}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"출금문의 목록",totalItems:at,countLabel:"총 ##count##건의 출금문의",sequentialPageNumbers:ke,togglePageNumberMode:Te,hasPinnedColumns:bt,isGridReady:it,toggleColumnPin:Ne,searchText:je,handleSearchChange:fe,handleClearSearch:be,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"출금신청 검색...",sx:{mb:2}}),He.length>0&&n==="pending"&&m(j,{sx:{mb:2,display:"flex",gap:1},children:[m(Se,{variant:"contained",color:"success",size:"small",onClick:async()=>{if(confirm(`선택한 ${He.length}건을 승인하시겚습니까?`))try{const de=await Zs.bulkUpdate({ids:He,status:"approved"});de.success&&(alert(de.message),y(),Tt(!1))}catch{alert("일괄 승인에 실패했습니다.")}},children:["선택 승인 (",He.length,")"]}),m(Se,{variant:"contained",color:"info",size:"small",onClick:async()=>{if(confirm(`선택한 ${He.length}건을 대기 처리하시겚습니까?`))try{const de=await Zs.bulkUpdate({ids:He,status:"waiting"});de.success&&(alert(de.message),y(),Tt(!1))}catch{alert("일괄 대기 처리에 실패했습니다.")}},children:["선택 대기 (",He.length,")"]}),m(Se,{variant:"contained",color:"error",size:"small",onClick:async()=>{const de=prompt("비승인 사유를 입력하세요:");if(de!==null&&confirm(`선택한 ${He.length}건을 비승인하시겚습니까?`))try{const Ze=await Zs.bulkUpdate({ids:He,status:"rejected",rejectReason:de});Ze.success&&(alert(Ze.message),y(),Tt(!1))}catch{alert("일괄 비승인에 실패했습니다.")}},children:["선택 비승인 (",He.length,")"]})]}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:N,filterValues:Yt||{},activeFilters:jt||{},filterOptions:ht,handleFilterChange:At,onFilter:Xt,onClearFilters:tn,isDateFilterActive:Ut,handleOpenDateFilter:Bt,resetDateFilter:Kt},paginationProps:{count:at,page:se,rowsPerPage:Z,onPageChange:We,onRowsPerPageChange:xe,totalCount:at,onExcelDownload:I,onPrint:L}})}),m(j,{sx:{width:"100%",mt:2},ref:p,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",se+1," / ",Math.ceil(at/Z)," (페이지당 ",Z,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),console.log("BaseTable 렌더링:",{columnsCount:he.length,dataCount:Y.length,data:Y,firstData:Y[0],finalColumns:he}),a(An,{columns:he,data:Y,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:He,expandedRows:gt,allChecked:ft,onCheck:St,onToggleAll:Tt,onToggleExpand:et,onSort:Rt,sortConfig:xt,page:se,rowsPerPage:Z,totalCount:at,sequentialPageNumbers:ke,draggableColumns:!0,onColumnOrderChange:te,dragHandlers:{handleDragStart:ge,handleDragEnd:oe,handleDragOver:G,handleDrop:Q},dragInfo:K,fixedHeader:!0,fixedFooter:!0,maxHeight:v,tableHeaderRef:_,headerStyle:T(),pinnedColumns:ee,summary:ze},`withdrawal-table-${qe}`),a(rr,{resizeHandleProps:S(parseFloat(v)),showIcon:!0,isDragging:C})]})]}),a(Bi,{open:we,onClose:D,member:De,onSave:B,title:"회원 상세정보"}),a(Vj,{open:w.open,onClose:()=>x({open:!1,reason:""}),reason:w.reason,title:"출금문의 비승인 사유"})]})},gle=[{value:"completed",label:"완료"},{value:"pending",label:"대기"},{value:"suspended",label:"중지"}],mle=[{value:"bank_transfer",label:"무통장"},{value:"manual",label:"수동처리"},{value:"crypto",label:"가상화폐"},{value:"virtual_account",label:"가상계좌"},{value:"gift_card",label:"상품권"},{value:"coupon",label:"쿠폰"}],yle=[{value:"admin1",label:"관리자1"},{value:"admin2",label:"관리자2"},{value:"admin3",label:"관리자3"},{value:"system",label:"시스템"}],ble=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:180,sortable:!0,clickable:!0,pinnable:!0},{id:"superAgent",header:"상위에이전트",type:"horizontal",width:200,sortable:!0,pinnable:!0},{id:"memberType",header:"유형",type:"chip",width:150,align:"center",sortable:!0,pinnable:!0},{id:"applicationAmount",header:"신청금액",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"previousBalance",header:"이전보유금액",type:"currency",width:130,align:"right",sortable:!0,pinnable:!0},{id:"afterBalance",header:"이후보유금액",type:"currency",width:130,align:"right",sortable:!0,pinnable:!0},{id:"paymentMethod",header:"수단",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0},{id:"processorBalance",header:"처리자보유금",type:"currency",width:130,align:"right",sortable:!0,pinnable:!0},{id:"accountNumber",header:"계좌번호",type:"default",width:150,align:"center",sortable:!0,pinnable:!0},{id:"bank",header:"은행",type:"default",width:100,align:"center",sortable:!0,pinnable:!0},{id:"accountHolder",header:"예금주",type:"default",width:100,align:"center",sortable:!0,pinnable:!0},{id:"applicationTime",header:"신청시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0},{id:"processTime",header:"처리시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0},{id:"processor",header:"처리자",type:"multiline",width:120,align:"center",sortable:!0,pinnable:!0},{id:"processorBalanceAfter",header:"처리자보유금",type:"currency",width:130,align:"right",sortable:!0,pinnable:!0},{id:"status",header:"상태",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0}],vle=()=>{On();const{socketService:e}=ni(),{handleRefresh:t}=$a(),[n,r]=u.useState({}),i=u.useRef(0),{data:o,types:s,isInitialized:l,refreshPageData:c}=Za({pageType:"history",requiresMembersData:!1}),d=u.useMemo(()=>{if(!o)return[];if(o.length>0){const We=o[0];Object.entries(We).forEach(([xe,qe])=>{})}return Object.keys(n).length===0?o:o.map(We=>{const xe=n[`transaction_${We.id}`];return xe?{...We,status:xe.status,processor:xe.processor,processTime:xe.processTime,processorBalanceAfter:xe.processorBalanceAfter||We.processorBalanceAfter,afterBalance:xe.afterBalance||We.afterBalance,_realtimeUpdated:!0,_updateTimestamp:xe.timestamp}:We})},[o,n]);u.useEffect(()=>{if(!e)return;const We=xe=>{if(xe.sequence<=i.current){console.warn("⚠️ 중복 이벤트 감지:",xe.sequence);return}if(i.current=xe.sequence,xe.type==="money:status"||xe.type==="money:created"){const qe=xe.data.transactionType;(qe==="charge"||qe==="exchange")&&(r(Ee=>({...Ee,[`transaction_${xe.data.historyId}`]:{...xe.data,status:{label:xe.data.status==="completed"?"완료":xe.data.status==="pending"?"대기":xe.data.status==="rejected"?"거절":"중지",color:xe.data.status==="completed"?"success":xe.data.status==="pending"?"warning":"error",variant:"outlined"},processor:xe.data.processedBy?`처리자${xe.data.processedBy}`:"-",processTime:xe.data.status==="completed"?new Date(xe.timestamp).toLocaleString("ko-KR"):"-",timestamp:xe.timestamp}})),xe.type==="money:created"&&setTimeout(()=>{c()},500))}};return e.on("realtime:money",We),()=>{e.off("realtime:money",We)}},[e,c]);const{containerRef:h,tableHeight:f,autoHeight:g,toggleAutoHeight:w,setManualHeight:x}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:y,getResizeHandleProps:p}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:We=>{g&&w(!1),x(`${We}px`)}}),{tableHeaderRef:v,getTableHeaderStyles:b}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),P=u.useCallback(()=>{alert("충환내역 목록을 엑셀로 다운로드합니다.")},[]),k=u.useCallback(()=>{alert("충환내역 목록을 인쇄합니다.")},[]),C=u.useCallback(We=>{ne(We),V(!0)},[]),S=u.useCallback(()=>{V(!1),ne(null)},[]),_=u.useCallback(We=>{alert(`${We.nickname||We.username}님의 정보가 저장되었습니다.`),S()},[S]),T=u.useMemo(()=>ble.map(We=>We.id==="userId"?{...We,clickable:!0,onClick:xe=>{C(xe)}}:We),[C]),{columnVisibility:I,toggleableColumns:L,visibleColumns:A,hiddenColumnsCount:D,toggleColumnVisibility:B,showAllColumns:$,resetToDefault:N}=dr(T,{defaultHiddenColumns:[],tableId:"transactionHistoryPage_columnVisibility"}),{columns:F,dragInfo:O,pinnedColumns:R,handleDragStart:E,handleDragEnd:z,handleDragOver:q,handleDrop:X,updateColumns:H,setDefaultPinnedColumns:K,clearAllPinnedColumns:ee}=sr({initialColumns:A,onColumnOrderChange:We=>{We.map(xe=>xe.id)}}),[ge,oe]=u.useState(null),G=!!ge,Q=u.useCallback(We=>{oe(We)},[]),te=u.useCallback(()=>{oe(null)},[]),[U,V]=u.useState(!1),[ae,ne]=u.useState(null),[me,ue]=u.useState(0),[Ae,we]=u.useState(25),[ce,De]=u.useState(!1),{checkedItems:le,allChecked:se,handleCheck:J,handleToggleAll:Z,expandedRows:ie,handleToggleExpand:_e,sortConfig:Re,handleSort:He}=Nn({data:d}),ft=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},...gle.map(xe=>({value:xe.value,label:xe.label}))]},{id:"paymentMethod",label:"수단",items:[{value:"",label:"전체"},...mle.map(xe=>({value:xe.value,label:xe.label}))]},{id:"processor",label:"처리자",items:[{value:"",label:"전체"},...yle.map(xe=>({value:xe.value,label:xe.label}))]},{id:"memberType",label:"회원유형",items:[{value:"",label:"전체"},...l&&s?Object.keys(s).map(xe=>({value:xe,label:s[xe].label||xe})):[]]}],[l,s]),{activeFilters:St,handleFilterChange:Tt,isDateFilterActive:gt,handleOpenDateFilter:et,resetDateFilter:xt,dateRange:Rt,page:ht,rowsPerPage:jt,totalCount:$t,totalPages:Ut,handlePageChange:Bt,handleRowsPerPageChange:Kt,filteredData:Ft,displayData:Et,filterValues:Ot,handleFilter:zt,handleClearFilters:Wt}=yr({columns:T,data:d,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:"",paymentMethod:"",processor:"",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:d.length,onExcelDownload:P,onPrint:k}}),kt=u.useMemo(()=>{const We={...St};return Object.keys(We).forEach(xe=>{We[xe]==="all"&&(We[xe]="")}),We},[St]),{searchText:Mt,totalItems:Ht,sequentialPageNumbers:qt,hasPinnedColumns:Yt,isGridReady:Xt,handleSearchChange:tn,handleClearSearch:Fe,togglePageNumberMode:je,toggleColumnPin:Oe,setGridReady:ke}=Rn({initialTotalItems:d.length,onSearch:We=>{ht!==0&&Bt(null,0)},onToggleColumnPin:We=>{We?K():ee()}}),bt=u.useCallback((We,xe,qe)=>{switch(xe){case"status":return qe==="all"||qe===""?We:We.filter(Y=>{var ze;const he=((ze=Y.status)==null?void 0:ze.label)||Y.status;switch(qe){case"pending":return he==="대기";case"completed":return he==="완료";case"suspended":return he==="중지";default:return!0}});case"paymentMethod":return qe==="all"||qe===""?We:We.filter(Y=>{var ze;return(((ze=Y.paymentMethod)==null?void 0:ze.value)||Y.paymentMethod)===qe});case"processor":return qe==="all"||qe===""?We:We.filter(Y=>{var he,ze,de,Ze;switch(qe){case"admin1":return(he=Y.processor)==null?void 0:he.includes("관리자1");case"admin2":return(ze=Y.processor)==null?void 0:ze.includes("관리자2");case"admin3":return(de=Y.processor)==null?void 0:de.includes("관리자3");case"system":return(Ze=Y.processor)==null?void 0:Ze.includes("시스템");default:return!0}});case"memberType":return qe==="all"||qe===""?We:We.filter(Y=>{var de;const he=((de=Y.memberType)==null?void 0:de.label)||Y.memberType,ze=s[qe];return he===((ze==null?void 0:ze.label)||qe)});case"date":let Ee=[...We];return qe.startDate&&(Ee=Ee.filter(Y=>Y.id>=3010)),qe.endDate&&(Ee=Ee.filter(Y=>Y.id<=3040)),Ee;default:return We}},[s]),it=u.useCallback((We,xe)=>{Tt(We,xe)},[Tt]),fe=Dr({data:d,activeFilters:kt,searchText:Mt,isDateFilterActive:gt,dateRange:Rt,filterCallback:bt}),be=u.useMemo(()=>fe?fe.map(We=>We.id):[],[fe]),Ne=u.useMemo(()=>{const We=Object.values(kt).some(qe=>qe&&qe!==""),xe=Mt&&Mt.trim()!=="";return!We&&!xe?d:!d||!be||be.length===0?[]:d.filter(qe=>be.includes(qe.id))},[d,be,kt,Mt])||[],Ve=Ne.length,Ge=u.useCallback((We,xe)=>{let qe=xe;if(typeof We=="number"&&xe===void 0&&(qe=We),typeof qe!="number"){console.error("유효하지 않은 페이지 번호:",qe);return}ue(qe),Bt(qe)},[me,Bt]),At=u.useCallback(We=>{if(!We||!We.target||!We.target.value){console.error("충환내역 행 수 변경 이벤트 오류:",We);return}const xe=parseInt(We.target.value,10);we(xe),ue(0),Kt(We)},[Ae,Kt]),[Qe,Ie]=u.useState(Date.now());u.useEffect(()=>{Ie(Date.now())},[me,Ae]);const Xe=u.useMemo(()=>!Ne||Ne.length===0?[]:Ne.map(xe=>{const qe={...xe};return qe.status&&typeof qe.status=="object"&&qe.status.label&&(qe.status=qe.status.label),qe.paymentMethod&&typeof qe.paymentMethod=="object"&&qe.paymentMethod.label&&(qe.paymentMethod=qe.paymentMethod.label),qe}),[Ne,me,Ae,Ve]),ve=u.useMemo(()=>F.map(We=>We.id==="userId"?{...We,clickable:!0,onClick:xe=>{C(xe)}}:We),[F,C]),at=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:ce?"page":"all"},columns:{applicationAmount:{type:"sum",format:"currency"},previousBalance:{type:"sum",format:"currency"},afterBalance:{type:"sum",format:"currency"},processorBalance:{type:"sum",format:"currency"},processorBalanceAfter:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[ce]);return u.useEffect(()=>{ke(!0)},[ke]),m(vn,{children:[a(Cn,{title:"충환내역",onDisplayOptionsClick:Q,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("충환내역 목록 새로고침"),sx:{mb:2}}),a(or,{anchorEl:ge,open:G,onClose:te,toggleableColumns:L,columnVisibility:I,onToggleColumn:B,onShowAll:$,onReset:N,hiddenColumnsCount:D,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"충환내역 목록",totalItems:Ve,countLabel:"총 ##count##건의 충환내역",sequentialPageNumbers:qt,togglePageNumberMode:je,hasPinnedColumns:Yt,isGridReady:Xt,toggleColumnPin:Oe,searchText:Mt,handleSearchChange:tn,handleClearSearch:Fe,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"충환내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:T,filterValues:Ot||{},activeFilters:St||{},filterOptions:ft,handleFilterChange:it,onFilter:zt,onClearFilters:Wt,isDateFilterActive:gt,handleOpenDateFilter:et,resetDateFilter:xt,showDateFilter:!0},paginationProps:{count:Ve,page:me,rowsPerPage:Ae,onPageChange:Ge,onRowsPerPageChange:At,totalCount:Ve,onExcelDownload:P,onPrint:k}})}),m(j,{sx:{width:"100%",mt:2},ref:h,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",me+1," / ",Math.ceil(Ve/Ae)," (페이지당 ",Ae,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:ve,data:Xe,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:le,expandedRows:ie,allChecked:se,onCheck:J,onToggleAll:Z,onToggleExpand:_e,onSort:He,sortConfig:Re,page:me,rowsPerPage:Ae,totalCount:Ve,sequentialPageNumbers:qt,draggableColumns:!0,onColumnOrderChange:H,dragHandlers:{handleDragStart:E,handleDragEnd:z,handleDragOver:q,handleDrop:X},dragInfo:O,fixedHeader:!0,fixedFooter:!0,maxHeight:f,tableHeaderRef:v,headerStyle:b(),pinnedColumns:R,summary:at},`transaction-history-table-${Qe}`),a(rr,{resizeHandleProps:p(parseFloat(f)),showIcon:!0,isDragging:y})]})]}),a(Bi,{open:U,onClose:S,member:ae,onSave:_,title:"회원 상세정보"})]})},xle=[{value:"pragmatic",label:"Pragmatic Play"},{value:"evolution",label:"Evolution Gaming"},{value:"netent",label:"NetEnt"},{value:"microgaming",label:"Microgaming"},{value:"playtech",label:"Playtech"},{value:"bigtime",label:"Big Time Gaming"},{value:"nolimit",label:"Nolimit City"},{value:"redtiger",label:"Red Tiger Gaming"},{value:"yggdrasil",label:"Yggdrasil Gaming"},{value:"hacksaw",label:"Hacksaw Gaming"},{value:"push",label:"Push Gaming"},{value:"thunderkick",label:"Thunderkick"},{value:"relax",label:"Relax Gaming"},{value:"kalamba",label:"Kalamba Games"},{value:"isoftbet",label:"iSoftBet"},{value:"blueprint",label:"Blueprint Gaming"},{value:"elk",label:"ELK Studios"},{value:"quickspin",label:"Quickspin"},{value:"playngo",label:"Play'n GO"},{value:"betsoft",label:"BetSoft Gaming"},{value:"endorphina",label:"Endorphina"},{value:"pgsoft",label:"PG Soft"},{value:"pocket",label:"Pocket Games Soft"},{value:"onetouch",label:"OneTouch"},{value:"spadegaming",label:"Spade Gaming"},{value:"skywind",label:"Skywind Group"},{value:"cq9",label:"CQ9 Gaming"},{value:"joker",label:"Joker Gaming"},{value:"habanero",label:"Habanero Systems"},{value:"booongo",label:"Booongo Gaming"},{value:"evoplay",label:"Evoplay Entertainment"},{value:"spinomenal",label:"Spinomenal"}],wle=[{id:"number",type:"number",header:"No.",label:"No.",width:60,align:"center",sx:{textAlign:"center !important"}},{id:"gameProvider",header:"게임사",label:"게임사",width:180,align:"center",type:"text",sx:{textAlign:"center !important"}},{id:"memberCount",header:"회원수",label:"회원수",width:80,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"bettingCount",header:"베팅건수",label:"베팅건수",width:100,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"totalBetting",header:"총베팅",label:"총베팅",width:150,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"totalWinning",header:"총당첨",label:"총당첨",width:150,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"totalProfit",header:"수익",label:"수익",width:150,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"rtp",header:"RTP(%)",label:"RTP(%)",width:100,align:"center",type:"percent",sx:{textAlign:"center !important"}}],Cle=()=>{On();const{data:e}=Za({pageType:"thirdPartySettlement",requiresMembersData:!1}),t=u.useMemo(()=>(e&&e.length>0&&(e[0],e[0].index,e[0].gameProvider,e[0].memberCount,e[0].bettingCount,e[0].totalBetting),e||[]),[e]),{containerRef:n,tableHeight:r,autoHeight:i,toggleAutoHeight:o,setManualHeight:s}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:l,getResizeHandleProps:c}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:ke=>{i&&o(!1),s(`${ke}px`)}}),{tableHeaderRef:d,getTableHeaderStyles:h}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),f=u.useCallback(()=>{alert("게임사별 정산을 엑셀로 다운로드합니다.")},[]),g=u.useCallback(()=>{alert("게임사별 정산을 인쇄합니다.")},[]),[w,x]=u.useState(0),[y,p]=u.useState(25),[v,b]=u.useState(!1),{checkedItems:P,sortConfig:k,expandedRows:C,allChecked:S,handleSort:_,handleCheck:T,handleToggleAll:I,handleToggleExpand:L}=Nn({data:t,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:w,rowsPerPage:y}),A=u.useMemo(()=>wle.map(ke=>ke),[]),D=u.useMemo(()=>[{id:"gameProvider",label:"게임사",items:[{value:"",label:"전체"},...xle.map(ke=>({value:ke.label,label:ke.label}))]}],[]),{activeFilters:B,handleFilterChange:$,isDateFilterActive:N,handleOpenDateFilter:F,resetDateFilter:O,dateRange:R,page:E,rowsPerPage:z,totalCount:q,totalPages:X,handlePageChange:H,handleRowsPerPageChange:K,filteredData:ee,displayData:ge,filterValues:oe,handleFilter:G,handleClearFilters:Q}=yr({columns:A,data:t,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{gameProvider:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:t.length,onExcelDownload:f,onPrint:g}}),{searchText:te,totalItems:U,sequentialPageNumbers:V,hasPinnedColumns:ae,isGridReady:ne,handleSearchChange:me,handleClearSearch:ue,togglePageNumberMode:Ae,toggleColumnPin:we,setGridReady:ce}=Rn({initialTotalItems:t.length,onSearch:ke=>{E!==0&&H(0)},onToggleColumnPin:ke=>{ke?ft():He()}});u.useEffect(()=>{ce(!0)},[ce]);const{columns:De,dragInfo:le,pinnedColumns:se,handleDragStart:J,handleDragEnd:Z,handleDragOver:ie,handleDrop:_e,updateColumns:Re,clearAllPinnedColumns:He,setDefaultPinnedColumns:ft}=sr({initialColumns:A,tableId:"third_party_settlement_table",initialPinnedColumns:["index","gameProvider"],onColumnOrderChange:ke=>{}}),{columnVisibility:St,visibleColumns:Tt,hiddenColumnsCount:gt,toggleableColumns:et,toggleColumnVisibility:xt,showAllColumns:Rt,resetToDefault:ht}=dr(De,{defaultHiddenColumns:[],alwaysVisibleColumns:["index","gameProvider"],tableId:"third_party_settlement_table"}),[jt,$t]=u.useState(null),Ut=!!jt,Bt=u.useCallback(ke=>{$t(ke)},[]),Kt=u.useCallback(()=>{$t(null)},[]),Ft=u.useCallback((ke,bt,it)=>{switch(bt){case"gameProvider":return it==="all"||it===""?ke:ke.filter(fe=>fe.gameProvider===it);default:return ke}},[]),Et=u.useCallback((ke,bt)=>{$(ke,bt)},[$]),Ot=u.useMemo(()=>{const ke={...B};return Object.keys(ke).forEach(bt=>{ke[bt]==="all"&&(ke[bt]="")}),ke},[B]),zt=Dr({data:t,activeFilters:Ot,searchText:te,isDateFilterActive:N,dateRange:R,filterCallback:Ft}),Wt=u.useMemo(()=>zt?zt.map(ke=>ke.id):[],[zt]),Mt=u.useMemo(()=>{const ke=Object.values(Ot).some(it=>it&&it!==""),bt=te&&te.trim()!=="";return!ke&&!bt?t:!t||!Wt||Wt.length===0?[]:t.filter(it=>Wt.includes(it.id))},[t,Wt,Ot,te])||[],Ht=Mt.length,qt=u.useCallback((ke,bt)=>{let it=bt;if(typeof ke=="number"&&bt===void 0&&(it=ke),typeof it!="number"){console.error("유효하지 않은 페이지 번호:",it);return}x(it),H(it)},[w,H]),Yt=u.useCallback(ke=>{if(!ke||!ke.target||!ke.target.value){console.error("게임사별 정산 행 수 변경 이벤트 오류:",ke);return}const bt=parseInt(ke.target.value,10);p(bt),x(0),K(ke)},[y,K]),[Xt,tn]=u.useState(Date.now());u.useEffect(()=>{tn(Date.now())},[w,y]);const Fe=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:v?"page":"all"},columns:{memberCount:{type:"sum",format:"number"},bettingCount:{type:"sum",format:"number"},totalBetting:{type:"sum",format:"currency"},totalWinning:{type:"sum",format:"currency"},totalProfit:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[v]),je=!0,Oe={handleDragStart:J,handleDragEnd:Z,handleDragOver:ie,handleDrop:_e};return m(vn,{children:[a(Cn,{title:"게임사별 정산",onDisplayOptionsClick:Bt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("게임사별 정산 새로고침"),sx:{mb:2}}),a(or,{anchorEl:jt,open:Ut,onClose:Kt,toggleableColumns:et,columnVisibility:St,onToggleColumn:xt,onShowAll:Rt,onReset:ht,hiddenColumnsCount:gt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"게임사별 정산 목록",totalItems:Ht,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:V,togglePageNumberMode:Ae,hasPinnedColumns:ae,isGridReady:ne,toggleColumnPin:we,searchText:te,handleSearchChange:me,handleClearSearch:ue,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"게임사별 정산 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:De,filterValues:oe||{},activeFilters:Ot||{},filterOptions:D,handleFilterChange:Et,onFilter:G,onClearFilters:Q,isDateFilterActive:N,handleOpenDateFilter:F,resetDateFilter:O},paginationProps:{count:Ht,page:w,rowsPerPage:y,onPageChange:qt,onRowsPerPageChange:Yt,totalCount:Ht,onExcelDownload:f,onPrint:g}})}),m(j,{sx:{width:"100%",mt:2},ref:n,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",w+1," / ",Math.ceil(Ht/y)," (페이지당 ",y,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Tt,data:Mt,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:P,expandedRows:C,allChecked:S,onCheck:T,onToggleAll:I,onToggleExpand:L,onSort:_,sortConfig:k,page:w,rowsPerPage:y,totalCount:Ht,sequentialPageNumbers:V,draggableColumns:je,onColumnOrderChange:Re,dragHandlers:Oe,dragInfo:le,fixedHeader:!0,fixedFooter:!0,maxHeight:r,tableHeaderRef:d,headerStyle:h(),pinnedColumns:se,summary:Fe},`third-party-settlement-table-${Xt}`),a(rr,{resizeHandleProps:c(parseFloat(r)),showIcon:!0,isDragging:l,sx:{mt:1,opacity:l?1:.7,"&:hover":{opacity:1}}})]})]}),!1]})},Sle=[{value:"daily",label:"일자별"},{value:"weekly",label:"주별"},{value:"monthly",label:"월별"}],Ple=[{id:"index",label:"No.",width:20,minWidth:20,maxWidth:20,align:"center",type:"number",sx:{textAlign:"center !important"}},{id:"date",label:"날짜",width:100,minWidth:100,maxWidth:100,align:"center",type:"text",sx:{textAlign:"center !important"}},{id:"slotGroup",label:"슬롯",type:"group",align:"center",children:[{id:"slotBetting",label:"베팅",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"slotWinning",label:"당첨",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"slotProfit",label:"베팅수익",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}}]},{id:"casinoGroup",label:"카지노",type:"group",align:"center",children:[{id:"casinoBetting",label:"베팅",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"casinoWinning",label:"당첨",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"casinoProfit",label:"베팅수익",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}}]},{id:"totalGroup",label:"합계",type:"group",align:"center",children:[{id:"totalBetting",label:"베팅",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"totalWinning",label:"당첨",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}},{id:"totalProfit",label:"베팅수익",width:120,align:"center",type:"currency",sx:{textAlign:"center !important"}}]}],kle=()=>{On();const{data:e,refreshPageData:t}=Za({pageType:"dailySettlement",requiresMembersData:!1}),n=u.useMemo(()=>e||[],[e]),{containerRef:r,tableHeight:i,autoHeight:o,toggleAutoHeight:s,setManualHeight:l}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:c,getResizeHandleProps:d}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:it=>{o&&s(!1),l(`${it}px`)}}),{tableHeaderRef:h,getTableHeaderStyles:f}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),g=u.useCallback(()=>{alert("일자별 정산을 엑셀로 다운로드합니다.")},[]),w=u.useCallback(()=>{alert("일자별 정산을 인쇄합니다.")},[]),[x,y]=u.useState(0),[p,v]=u.useState(25),[b,P]=u.useState(!1),{checkedItems:k,sortConfig:C,expandedRows:S,allChecked:_,handleSort:T,handleCheck:I,handleToggleAll:L,handleToggleExpand:A}=Nn({data:n,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:x,rowsPerPage:p}),D=u.useMemo(()=>Ple.map(it=>it),[]),B=u.useMemo(()=>[{id:"period",label:"기간",items:[{value:"",label:"전체"},...Sle.map(it=>({value:it.value,label:it.label}))]}],[]),{activeFilters:$,handleFilterChange:N,isDateFilterActive:F,handleOpenDateFilter:O,resetDateFilter:R,dateRange:E,page:z,rowsPerPage:q,totalCount:X,totalPages:H,handlePageChange:K,handleRowsPerPageChange:ee,filteredData:ge,displayData:oe,filterValues:G,handleFilter:Q,handleClearFilters:te}=yr({columns:D,data:n,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{period:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:n.length,onExcelDownload:g,onPrint:w}}),{searchText:U,totalItems:V,sequentialPageNumbers:ae,hasPinnedColumns:ne,isGridReady:me,handleSearchChange:ue,handleClearSearch:Ae,togglePageNumberMode:we,toggleColumnPin:ce,setGridReady:De}=Rn({initialTotalItems:n.length,onSearch:it=>{z!==0&&K(0)},onToggleColumnPin:it=>{it?St():ft()}});u.useEffect(()=>{De(!0)},[De]);const{columns:le,dragInfo:se,pinnedColumns:J,handleDragStart:Z,handleDragEnd:ie,handleDragOver:_e,handleDrop:Re,updateColumns:He,clearAllPinnedColumns:ft,setDefaultPinnedColumns:St}=sr({initialColumns:D,tableId:"daily_settlement_table",initialPinnedColumns:["index","date"],onColumnOrderChange:it=>{}}),{columnVisibility:Tt,visibleColumns:gt,hiddenColumnsCount:et,toggleableColumns:xt,toggleColumnVisibility:Rt,showAllColumns:ht,resetToDefault:jt}=dr(le,{defaultHiddenColumns:[],alwaysVisibleColumns:["index","date"],tableId:"daily_settlement_table"}),[$t,Ut]=u.useState(null),Bt=!!$t,Kt=u.useCallback(it=>{Ut(it)},[]),Ft=u.useCallback(()=>{Ut(null)},[]),Et=u.useCallback((it,fe,be)=>{switch(fe){case"period":if(be==="all"||be==="")return it;const Te=new Date;let Ne;switch(be){case"daily":Ne=new Date(Te.getTime()-1440*60*1e3);break;case"weekly":Ne=new Date(Te.getTime()-10080*60*1e3);break;case"monthly":Ne=new Date(Te.getTime()-720*60*60*1e3);break;default:return it}return it.filter(Ve=>new Date(Ve.date)>=Ne);default:return it}},[]),Ot=u.useCallback((it,fe)=>{N(it,fe)},[N]),zt=u.useMemo(()=>{const it={...$};return Object.keys(it).forEach(fe=>{it[fe]==="all"&&(it[fe]="")}),it},[$]),Wt=Dr({data:n,activeFilters:zt,searchText:U,isDateFilterActive:F,dateRange:E,filterCallback:Et}),kt=u.useMemo(()=>Wt?Wt.map(it=>it.id):[],[Wt]),Ht=u.useMemo(()=>{const it=Object.values(zt).some(be=>be&&be!==""),fe=U&&U.trim()!=="";return!it&&!fe?n:!n||!kt||kt.length===0?[]:n.filter(be=>kt.includes(be.id))},[n,kt,zt,U])||[],qt=Ht.length,Yt=u.useCallback((it,fe)=>{let be=fe;if(typeof it=="number"&&fe===void 0&&(be=it),typeof be!="number"){console.error("유효하지 않은 페이지 번호:",be);return}y(be),K(be)},[x,K]),Xt=u.useCallback(it=>{if(!it||!it.target||!it.target.value){console.error("일자별 정산 행 수 변경 이벤트 오류:",it);return}const fe=parseInt(it.target.value,10);v(fe),y(0),ee(it)},[p,ee]),[tn,Fe]=u.useState(Date.now());u.useEffect(()=>{Fe(Date.now())},[x,p]);const je=u.useMemo(()=>({enabled:!0,position:"bottom",scope:{type:b?"page":"all"},columns:{slotBetting:{type:"sum",format:"currency"},slotWinning:{type:"sum",format:"currency"},slotProfit:{type:"sum",format:"currency"},casinoBetting:{type:"sum",format:"currency"},casinoWinning:{type:"sum",format:"currency"},casinoProfit:{type:"sum",format:"currency"},totalBetting:{type:"sum",format:"currency"},totalWinning:{type:"sum",format:"currency"},totalProfit:{type:"sum",format:"currency"}},ui:{label:"전체합계",toggleable:!0,toggleLabel:"현재 페이지만",styling:{backgroundColor:"#f5f5f5",fontWeight:"bold"}}}),[b]),Oe=!0,ke={handleDragStart:Z,handleDragEnd:ie,handleDragOver:_e,handleDrop:Re};return m(vn,{children:[a("style",{children:`
    /* 슬롯 그룹 - 초록색 계열 */
    [data-column-id="slotGroup"],
    [data-column-id*="slot"] {
      background-color: rgba(76, 175, 80, 0.15) !important;
    }
    
    /* 카지노 그룹 - 보라색 계열 */
    [data-column-id="casinoGroup"],
    [data-column-id*="casino"] {
      background-color: rgba(156, 39, 176, 0.15) !important;
    }
    
    /* 합계 그룹 - 주황색 계열 */
    [data-column-id="totalGroup"],
    [data-column-id*="total"] {
      background-color: rgba(255, 152, 0, 0.15) !important;
    }
    
    /* 테이블 바디의 셀에도 동일한 색상 적용 - 모든 가능한 선택자 */
    .MuiTableBody-root .MuiTableCell-root[data-column-id="slotGroup"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="slot"],
    tbody .MuiTableCell-root[data-column-id="slotGroup"],
    tbody .MuiTableCell-root[data-column-id*="slot"],
    table tbody tr td[data-column-id="slotGroup"],
    table tbody tr td[data-column-id*="slot"],
    td[data-column-id="slotGroup"],
    td[data-column-id*="slot"] {
      background-color: rgba(76, 175, 80, 0.08) !important;
    }
    
    .MuiTableBody-root .MuiTableCell-root[data-column-id="casinoGroup"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="casino"],
    tbody .MuiTableCell-root[data-column-id="casinoGroup"],
    tbody .MuiTableCell-root[data-column-id*="casino"],
    table tbody tr td[data-column-id="casinoGroup"],
    table tbody tr td[data-column-id*="casino"],
    td[data-column-id="casinoGroup"],
    td[data-column-id*="casino"] {
      background-color: rgba(156, 39, 176, 0.08) !important;
    }
    
    .MuiTableBody-root .MuiTableCell-root[data-column-id="totalGroup"],
    .MuiTableBody-root .MuiTableCell-root[data-column-id*="total"],
    tbody .MuiTableCell-root[data-column-id="totalGroup"],
    tbody .MuiTableCell-root[data-column-id*="total"],
    table tbody tr td[data-column-id="totalGroup"],
    table tbody tr td[data-column-id*="total"],
    td[data-column-id="totalGroup"],
    td[data-column-id*="total"] {
      background-color: rgba(255, 152, 0, 0.08) !important;
    }
  `}),a(Cn,{title:"일자별 정산",onDisplayOptionsClick:Kt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:t,sx:{mb:2}}),a(or,{anchorEl:$t,open:Bt,onClose:Ft,toggleableColumns:xt,columnVisibility:Tt,onToggleColumn:Rt,onShowAll:ht,onReset:jt,hiddenColumnsCount:et,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"일자별 정산 목록",totalItems:qt,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:ae,togglePageNumberMode:we,hasPinnedColumns:ne,isGridReady:me,toggleColumnPin:ce,searchText:U,handleSearchChange:ue,handleClearSearch:Ae,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"날짜로 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:le,filterValues:G||{},activeFilters:zt||{},filterOptions:B,handleFilterChange:Ot,onFilter:Q,onClearFilters:te,isDateFilterActive:F,handleOpenDateFilter:O,resetDateFilter:R},paginationProps:{count:qt,page:x,rowsPerPage:p,onPageChange:Yt,onRowsPerPageChange:Xt,totalCount:qt,onExcelDownload:g,onPrint:w}})}),m(j,{sx:{width:"100%",mt:2},ref:r,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",x+1," / ",Math.ceil(qt/p)," (페이지당 ",p,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:gt,data:Ht,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:k,expandedRows:S,allChecked:_,onCheck:I,onToggleAll:L,onToggleExpand:A,onSort:T,sortConfig:C,page:x,rowsPerPage:p,totalCount:qt,sequentialPageNumbers:ae,draggableColumns:Oe,onColumnOrderChange:He,dragHandlers:ke,dragInfo:se,fixedHeader:!0,fixedFooter:!0,maxHeight:i,tableHeaderRef:h,headerStyle:f(),pinnedColumns:J,summary:je,sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}},`daily-settlement-table-${tn}`),a(rr,{resizeHandleProps:d(parseFloat(i)),showIcon:!0,isDragging:c,sx:{mt:1,opacity:c?1:.7,"&:hover":{opacity:1}}})]})]}),!1]})},_le=[{id:"no",label:"No.",width:"80px",sortable:!0,type:"number",pinnable:!0},{id:"bettingDate",label:"베팅일자",width:"180px",sortable:!0,type:"betting_date",pinnable:!0},{id:"memberInfo",label:"아이디(닉네임)",width:"160px",sortable:!0,type:"multiline",clickable:!0,pinned:!1,pinnable:!0},{id:"bettingInfo",label:"베팅정보",width:"200px",sortable:!1,type:"betting_info",pinnable:!0},{id:"bettingSection",label:"베팅섹션",width:"120px",sortable:!0,type:"text",pinnable:!0},{id:"gameType",label:"게임유형",width:"100px",sortable:!0,type:"text",pinnable:!0},{id:"gameCompany",label:"게임사",width:"120px",sortable:!0,type:"text",pinnable:!0},{id:"gameName",label:"게임",width:"150px",sortable:!0,type:"text",pinnable:!0},{id:"gameId",label:"게임ID",width:"120px",sortable:!0,type:"text",pinnable:!0},{id:"transId",label:"TransID",width:"150px",sortable:!0,type:"text",pinnable:!0},{id:"linkTransId",label:"LinkTransID",width:"150px",sortable:!0,type:"text",pinnable:!0},{id:"detailView",label:"상세보기",width:"100px",sortable:!1,type:"button",buttonText:"상세보기",pinnable:!1},{id:"remarks",label:"비고",width:"120px",sortable:!1,type:"betting_action",pinnable:!1}],Kj=({open:e,onClose:t,bettingData:n})=>{var s,l,c,d,h,f,g,w,x,y,p,v,b,P,k,C,S,_,T,I,L,A,D,B;const r=On();if(!n)return null;const i=$=>typeof $=="number"?$.toLocaleString():"-",o=$=>$?new Date($).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-";return m(Yn,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,sx:{"& .MuiDialog-paper":{borderRadius:2,maxHeight:"90vh"}},children:[m(Zn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${r.palette.divider}`,pb:2},children:[a(M,{variant:"h6",component:"h2",children:"베팅 상세정보"}),a(Ct,{onClick:t,size:"small",sx:{color:r.palette.grey[500],"&:hover":{color:r.palette.grey[700]}},children:a(yj,{})})]}),a(Kn,{sx:{pt:3,pb:2},children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(Sn,{variant:"outlined",children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"기본정보"}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"Transaction ID"}),a(M,{variant:"body2",fontWeight:"medium",children:((s=n.basicInfo)==null?void 0:s.transId)||"-"})]}),m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"Link Transaction ID"}),a(M,{variant:"body2",fontWeight:"medium",children:((l=n.basicInfo)==null?void 0:l.linkTransId)||"-"})]}),m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임 ID"}),a(M,{variant:"body2",fontWeight:"medium",children:((c=n.basicInfo)==null?void 0:c.gameId)||"-"})]}),m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"라운드 ID"}),a(M,{variant:"body2",fontWeight:"medium",children:((d=n.basicInfo)==null?void 0:d.roundId)||"-"})]}),m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"테이블 ID"}),a(M,{variant:"body2",fontWeight:"medium",children:((h=n.basicInfo)==null?void 0:h.tableId)||"-"})]}),m(W,{item:!0,xs:6,sm:4,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임 결과"}),a(ut,{label:((f=n.basicInfo)==null?void 0:f.gameResult)||"-",size:"small",color:"success",variant:"outlined"})]})]})]})})}),a(W,{item:!0,xs:12,md:6,children:a(Sn,{variant:"outlined",children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"회원정보"}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"아이디"}),a(M,{variant:"body2",fontWeight:"medium",children:((g=n.memberInfo)==null?void 0:g.username)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"닉네임"}),a(M,{variant:"body2",fontWeight:"medium",children:((w=n.memberInfo)==null?void 0:w.nickname)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"IP 주소"}),a(M,{variant:"body2",fontWeight:"medium",children:((x=n.memberInfo)==null?void 0:x.ip)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"접속 기기"}),a(M,{variant:"body2",fontWeight:"medium",children:((y=n.memberInfo)==null?void 0:y.device)||"-"})]})]})]})})}),a(W,{item:!0,xs:12,md:6,children:a(Sn,{variant:"outlined",children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"베팅정보"}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"베팅일시"}),a(M,{variant:"body2",fontWeight:"medium",children:o((p=n.bettingDetails)==null?void 0:p.bettingTime)})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"처리일시"}),a(M,{variant:"body2",fontWeight:"medium",children:o((v=n.bettingDetails)==null?void 0:v.processTime)})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임유형"}),a(M,{variant:"body2",fontWeight:"medium",children:((b=n.bettingDetails)==null?void 0:b.gameType)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임사"}),a(M,{variant:"body2",fontWeight:"medium",children:((P=n.bettingDetails)==null?void 0:P.gameCompany)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임명"}),a(M,{variant:"body2",fontWeight:"medium",children:((k=n.bettingDetails)==null?void 0:k.gameName)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"베팅섹션"}),a(ut,{label:((C=n.bettingDetails)==null?void 0:C.bettingSection)||"-",size:"small",color:"primary",variant:"outlined"})]})]})]})})}),a(W,{item:!0,xs:12,children:a(Sn,{variant:"outlined",children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"금액정보"}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:6,sm:3,children:m(j,{sx:{textAlign:"center",p:2,bgcolor:"grey.50",borderRadius:1},children:[a(M,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"베팅 전 금액"}),a(M,{variant:"h6",fontWeight:"bold",children:i((S=n.bettingDetails)==null?void 0:S.beforeAmount)})]})}),a(W,{item:!0,xs:6,sm:3,children:m(j,{sx:{textAlign:"center",p:2,bgcolor:"primary.light",color:"primary.contrastText",borderRadius:1},children:[a(M,{variant:"caption",gutterBottom:!0,sx:{opacity:.9},children:"베팅금액"}),a(M,{variant:"h6",fontWeight:"bold",children:i((_=n.bettingDetails)==null?void 0:_.betAmount)})]})}),a(W,{item:!0,xs:6,sm:3,children:m(j,{sx:{textAlign:"center",p:2,bgcolor:"success.light",color:"success.contrastText",borderRadius:1},children:[a(M,{variant:"caption",gutterBottom:!0,sx:{opacity:.9},children:"당첨금액"}),a(M,{variant:"h6",fontWeight:"bold",children:i((T=n.bettingDetails)==null?void 0:T.winAmount)})]})}),a(W,{item:!0,xs:6,sm:3,children:m(j,{sx:{textAlign:"center",p:2,bgcolor:"grey.50",borderRadius:1},children:[a(M,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"베팅 후 금액"}),a(M,{variant:"h6",fontWeight:"bold",children:i((I=n.bettingDetails)==null?void 0:I.afterAmount)})]})})]}),a(yn,{sx:{my:2}}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"배당률"}),a(M,{variant:"body2",fontWeight:"medium",children:((L=n.bettingDetails)==null?void 0:L.odds)||"-"})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"수수료"}),a(M,{variant:"body2",fontWeight:"medium",children:i((A=n.bettingDetails)==null?void 0:A.commission)})]})]})]})})}),n.gameDetails&&a(W,{item:!0,xs:12,children:a(Sn,{variant:"outlined",children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:"bold"},children:"게임 상세정보"}),n.gameDetails.cards&&m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"플레이어 카드"}),a(j,{sx:{display:"flex",gap:1},children:(D=n.gameDetails.cards.player)==null?void 0:D.map(($,N)=>a(ut,{label:$,size:"small",sx:{bgcolor:"grey.100",fontFamily:"monospace",fontSize:"14px"}},N))})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"뱅커 카드"}),a(j,{sx:{display:"flex",gap:1},children:(B=n.gameDetails.cards.banker)==null?void 0:B.map(($,N)=>a(ut,{label:$,size:"small",sx:{bgcolor:"grey.100",fontFamily:"monospace",fontSize:"14px"}},N))})]}),m(W,{item:!0,xs:12,children:[a(M,{variant:"caption",color:"text.secondary",children:"게임 결과"}),m(M,{variant:"body2",fontWeight:"medium",children:[n.gameDetails.result,n.gameDetails.natural&&" (Natural)"]})]})]})]})})})]})}),a(nr,{sx:{px:3,py:2,borderTop:`1px solid ${r.palette.divider}`},children:a(Se,{onClick:t,variant:"contained",color:"primary",children:"닫기"})})]})};Kj.propTypes={open:re.bool.isRequired,onClose:re.func.isRequired,bettingData:re.object};const Tle=()=>{On();const{handleRefresh:e}=$a(),t=u.useCallback(()=>{e("슬롯/카지노 베팅내역")},[e]),n=u.useRef([]),r=u.useCallback(()=>{alert("슬롯/카지노 베팅내역을 엑셀로 다운로드합니다.")},[]),i=u.useCallback(()=>{alert("슬롯/카지노 베팅내역을 인쇄합니다.")},[]),[o,s]=u.useState(0),[l,c]=u.useState(25),{data:d,membersData:h,types:f,isInitialized:g}=Za({pageType:"slotCasino",requiresMembersData:!1});u.useEffect(()=>{d&&d.length>0&&(n.current=d)},[d]);const w=u.useMemo(()=>!d||d.length===0?(n.current.length,n.current):d,[d]),{containerRef:x,tableHeight:y,autoHeight:p,toggleAutoHeight:v,setManualHeight:b}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:P,getResizeHandleProps:k}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ee=>{p&&v(!1),b(`${Ee}px`)}}),{tableHeaderRef:C,getTableHeaderStyles:S}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),[_,T]=u.useState(!1),[I,L]=u.useState(null),[A,D]=u.useState(!1),[B,$]=u.useState(null),N=u.useCallback(Ee=>{const Y=h.find(he=>he.username===Ee.username||he.userId===Ee.userId);L(Y||Ee),T(!0)},[h]),F=u.useCallback(()=>{T(!1),L(null)},[]),O=u.useCallback(Ee=>{alert(`${Ee.nickname||Ee.username}님의 정보가 저장되었습니다.`),F()},[F]),R=u.useCallback(async Ee=>{try{const Y=await fetch(`/api/betting/detail/${Ee.bettingId||Ee.betting_id||Ee.id}`);if(!Y.ok)throw new Error("베팅 상세 정보를 가져오는데 실패했습니다.");const he=await Y.json();he.success&&he.data?($(he.data),D(!0)):console.error("베팅 상세 정보를 찾을 수 없습니다.")}catch(Y){console.error("베팅 상세 정보 조회 오류:",Y),alert("베팅 상세 정보를 가져오는데 실패했습니다.")}},[]),E=u.useCallback(()=>{D(!1),$(null)},[]),z=u.useCallback(Ee=>{alert(`${Ee.transId} 베팅에 대해 공베팅이 적용되었습니다.`)},[]),q=u.useCallback(Ee=>{alert(`${Ee.transId} 베팅에 대해 공베팅이 취소되었습니다.`)},[]),{checkedItems:X,allChecked:H,handleCheck:K,handleToggleAll:ee,expandedRows:ge,handleToggleExpand:oe,sortConfig:G,handleSort:Q}=Nn({data:w}),te=u.useMemo(()=>_le.map(Ee=>Ee.id==="memberInfo"?{...Ee,clickable:!0,onClick:Y=>{N(Y)}}:Ee.id==="detailView"?{...Ee,onClick:Y=>{R(Y)}}:Ee.id==="remarks"?{...Ee,onVoidApply:z,onVoidCancel:q}:Ee),[N,R,z,q]),{columnVisibility:U,toggleableColumns:V,visibleColumns:ae,hiddenColumnsCount:ne,toggleColumnVisibility:me,showAllColumns:ue,resetToDefault:Ae}=dr(te,{defaultHiddenColumns:[],tableId:"slotCasinoPage_columnVisibility"}),{columns:we,dragInfo:ce,pinnedColumns:De,handleDragStart:le,handleDragEnd:se,handleDragOver:J,handleDrop:Z,updateColumns:ie,setDefaultPinnedColumns:_e,clearAllPinnedColumns:Re}=sr({initialColumns:ae,tableId:"slot_casino_table",initialPinnedColumns:["no","memberInfo"],onColumnOrderChange:Ee=>{Ee.map(Y=>Y.id)}}),[He,ft]=u.useState(null),St=!!He,Tt=u.useCallback(Ee=>{ft(Ee)},[]),gt=u.useCallback(()=>{ft(null)},[]),et=u.useMemo(()=>{const Ee=[...new Set(w.map(de=>de.gameType).filter(Boolean))],Y=[...new Set(w.map(de=>de.gameCompany).filter(Boolean))],he=[...new Set(w.map(de=>de.bettingSection).filter(Boolean))];return[{id:"gameType",label:"게임유형",items:[{value:"",label:"전체"},...Ee.sort().map(de=>({value:de,label:de}))]},{id:"gameCompany",label:"게임사",items:[{value:"",label:"전체"},...Y.sort().map(de=>({value:de,label:de}))]},{id:"bettingSection",label:"베팅섹션",items:[{value:"",label:"전체"},...he.sort().map(de=>({value:de,label:de}))]},{id:"memberType",label:"회원유형",items:[{value:"",label:"전체"},...g&&f?Object.keys(f).map(de=>({value:de,label:f[de].label||de})):[]]}]},[w,g,f]),{activeFilters:xt,handleFilterChange:Rt,isDateFilterActive:ht,handleOpenDateFilter:jt,resetDateFilter:$t,dateRange:Ut,page:Bt,rowsPerPage:Kt,totalCount:Ft,totalPages:Et,handlePageChange:Ot,handleRowsPerPageChange:zt,filteredData:Wt,displayData:kt,filterValues:Mt,handleFilter:Ht,handleClearFilters:qt}=yr({columns:te,data:w,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{gameType:"",gameCompany:"",bettingSection:"",memberType:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:w.length,onExcelDownload:r,onPrint:i}}),Yt=u.useCallback((Ee,Y)=>{let he=Y;if(typeof Ee=="number"&&Y===void 0&&(he=Ee),typeof he!="number"){console.error("유효하지 않은 페이지 번호:",he);return}s(he),Ot(he)},[o,Ot]),Xt=u.useCallback(Ee=>{if(!Ee||!Ee.target||!Ee.target.value){console.error("슬롯/카지노 행 수 변경 이벤트 오류:",Ee);return}const Y=parseInt(Ee.target.value,10);c(Y),s(0),zt(Ee)},[l,zt]),tn=u.useMemo(()=>{const Ee={...xt};return Object.keys(Ee).forEach(Y=>{Ee[Y]==="all"&&(Ee[Y]="")}),Ee},[xt]),{searchText:Fe,totalItems:je,sequentialPageNumbers:Oe,hasPinnedColumns:ke,isGridReady:bt,handleSearchChange:it,handleClearSearch:fe,togglePageNumberMode:be,toggleColumnPin:Te,setGridReady:Ne}=Rn({initialTotalItems:w.length||0,tableId:"slotCasinoPage",onSearch:Ee=>{o!==0&&(s(0),Ot&&Ot(0))},onTogglePageNumberMode:Ee=>{},onToggleColumnPin:Ee=>{Ee?_e():Re()}}),Ve=u.useCallback((Ee,Y,he)=>{switch(Y){case"gameType":return he==="all"||he===""?Ee:Ee.filter(de=>de._gameTypeValue===he);case"gameCompany":return he==="all"||he===""?Ee:Ee.filter(de=>de._gameCompanyValue===he);case"bettingSection":return he==="all"||he===""?Ee:Ee.filter(de=>de._bettingSectionValue===he);case"memberType":return he==="all"||he===""?Ee:Ee.filter(de=>{var Qt;const Ze=((Qt=de.memberType)==null?void 0:Qt.label)||de.memberType,lt=f[he];return Ze===((lt==null?void 0:lt.label)||he)});case"date":let ze=[...Ee];return he.startDate&&(ze=ze.filter(de=>de.id>=10)),he.endDate&&(ze=ze.filter(de=>de.id<=40)),ze;default:return Ee}},[f]),Ge=u.useCallback((Ee,Y)=>{Ht({[Ee]:Y})},[Ht]),At=Dr({data:w,activeFilters:tn,searchText:Fe,isDateFilterActive:ht,dateRange:Ut,filterCallback:Ve}),Qe=u.useMemo(()=>At?At.map(Ee=>Ee.id):[],[At]),Ie=u.useMemo(()=>{const Ee=Object.values(tn).some(he=>he&&he!==""),Y=Fe&&Fe.trim()!=="";return!Ee&&!Y?w:!w||!Qe||Qe.length===0?[]:w.filter(he=>Qe.includes(he.id))},[w,Qe,tn,Fe]);u.useEffect(()=>{},[Bt,Kt]);const Xe=Ie||[],ve=Xe.length;u.useEffect(()=>{Xe.length!==je&&`${Xe.length}`},[Xe.length,je,ve]),u.useEffect(()=>{},[o,l]);const[at,We]=u.useState(Date.now());u.useEffect(()=>{We(Date.now())},[o,l]);const xe=u.useMemo(()=>!Xe||Xe.length===0?[]:Xe,[Xe]),qe=u.useMemo(()=>we.map(Ee=>Ee.id==="memberInfo"?{...Ee,clickable:!0,onClick:Y=>{N(Y)}}:Ee.id==="detailView"?{...Ee,onClick:Y=>{R(Y)}}:Ee.id==="remarks"?{...Ee,onVoidApply:z,onVoidCancel:q}:Ee),[we,N,R,z,q]);return u.useEffect(()=>{Ne(!0)},[Ne]),m(vn,{children:[a(Cn,{title:"슬롯/카지노 베팅상세내역",onDisplayOptionsClick:Tt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:t,sx:{mb:2}}),a(or,{anchorEl:He,open:St,onClose:gt,toggleableColumns:V,columnVisibility:U,onToggleColumn:me,onShowAll:ue,onReset:Ae,hiddenColumnsCount:ne,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"슬롯/카지노 베팅내역 목록",totalItems:ve,countLabel:"총 ##count##건의 베팅내역",sequentialPageNumbers:Oe,togglePageNumberMode:be,hasPinnedColumns:ke,isGridReady:bt,toggleColumnPin:Te,searchText:Fe,handleSearchChange:it,handleClearSearch:fe,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"베팅내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:te,filterValues:Mt||{},activeFilters:tn||{},filterOptions:et,handleFilterChange:Ge,onFilter:Ht,onClearFilters:qt,isDateFilterActive:ht,handleOpenDateFilter:jt,resetDateFilter:$t},paginationProps:{count:ve,page:o,rowsPerPage:l,onPageChange:Yt,onRowsPerPageChange:Xt,totalCount:ve,onExcelDownload:r,onPrint:i}})}),m(j,{sx:{width:"100%",mt:2},ref:x,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",o+1," / ",Math.ceil(ve/l)," (페이지당 ",l,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:qe,data:xe,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:X,expandedRows:ge,allChecked:H,onCheck:K,onToggleAll:ee,onToggleExpand:oe,onSort:Q,sortConfig:G,page:o,rowsPerPage:l,totalCount:ve,sequentialPageNumbers:Oe,draggableColumns:!0,onColumnOrderChange:ie,dragHandlers:{handleDragStart:le,handleDragEnd:se,handleDragOver:J,handleDrop:Z},dragInfo:ce,fixedHeader:!0,maxHeight:y,tableHeaderRef:C,headerStyle:S(),pinnedColumns:De},`slot-casino-table-${at}`),a(rr,{resizeHandleProps:k(parseFloat(y)),showIcon:!0,isDragging:P})]})]}),a(Bi,{open:_,onClose:F,member:I,onSave:O,title:"회원 상세정보"}),a(Kj,{open:A,onClose:E,bettingData:B})]})},Ile=({open:e,onClose:t,message:n,onStatusChange:r,onReply:i})=>{var x,y,p,v,b,P,k;const[o,s]=u.useState(""),[l,c]=u.useState(!1),d=u.useCallback(()=>{c(!l),l||s("")},[l]),h=u.useCallback(()=>{if(!o.trim()){alert("답변 내용을 입력해주세요.");return}const C={messageId:n==null?void 0:n.id,content:o,timestamp:new Date().toISOString()};i==null||i(C),s(""),c(!1),r==null||r(n==null?void 0:n.id,"replied")},[n==null?void 0:n.id,o,i,r]),f=u.useCallback(C=>{r==null||r(n==null?void 0:n.id,C)},[n==null?void 0:n.id,r]),g=u.useCallback(()=>{c(!1),s(""),t()},[t]);if(!n)return null;const w=C=>{switch(C){case"unread":return"error";case"read":return"primary";case"pending":return"warning";case"replied":return"success";case"completed":return"info";default:return"default"}};return m(Yn,{open:e,onClose:g,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"600px"}},children:[m(Zn,{sx:{m:0,p:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(M,{variant:"h6",component:"div",children:"문의 상세 정보"}),a(Ct,{"aria-label":"close",onClick:g,sx:{color:"grey.500"},children:a(Sa,{})})]}),a(Kn,{dividers:!0,sx:{p:3},children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(rt,{elevation:1,sx:{p:2,mb:2},children:m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"작성자"}),m(M,{variant:"body1",children:[n.username," (",n.nickname,")"]})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"회원 유형"}),a(ut,{label:((x=n.memberType)==null?void 0:x.label)||"일반",color:((y=n.memberType)==null?void 0:y.color)||"default",size:"small",variant:"outlined"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"등록일"}),a(M,{variant:"body1",children:n.createdDate})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"읽은일"}),a(M,{variant:"body1",children:n.readDate||"-"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"현재 상태"}),a(ut,{label:((p=n.status)==null?void 0:p.label)||"미읽음",color:w((v=n.status)==null?void 0:v.label),size:"small",variant:"outlined"})]}),n.superAgent&&n.superAgent.length>0&&m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"상위에이전트"}),a(j,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:n.superAgent.map((C,S)=>a(ut,{label:C.label,color:C.color||"default",size:"small",variant:"outlined"},S))})]})]})})}),m(W,{item:!0,xs:12,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"제목"}),a(M,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:n.title})]}),m(W,{item:!0,xs:12,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"내용"}),a(rt,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",minHeight:"200px"},children:a(M,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.6},children:n.content})})]}),m(W,{item:!0,xs:12,children:[a(yn,{sx:{my:2}}),a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"상태 변경"}),m(j,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[a(Se,{variant:"outlined",color:"warning",size:"small",onClick:()=>f("pending"),disabled:((b=n.status)==null?void 0:b.label)==="대기",children:"대기로 변경"}),a(Se,{variant:"outlined",color:"success",size:"small",onClick:()=>f("read"),disabled:((P=n.status)==null?void 0:P.label)==="읽음",children:"읽음으로 변경"}),a(Se,{variant:"outlined",color:"info",size:"small",onClick:()=>f("completed"),disabled:((k=n.status)==null?void 0:k.label)==="완료",children:"완료로 변경"})]})]}),m(W,{item:!0,xs:12,children:[a(yn,{sx:{my:2}}),m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[a(M,{variant:"subtitle2",color:"text.secondary",children:"답변 작성"}),a(Se,{variant:"outlined",size:"small",onClick:d,children:l?"취소":"답변하기"})]}),l&&m(j,{sx:{mt:2},children:[a($e,{fullWidth:!0,multiline:!0,rows:4,placeholder:"답변 내용을 입력하세요...",value:o,onChange:C=>s(C.target.value),sx:{mb:2}}),m(j,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[a(Se,{variant:"outlined",onClick:d,children:"취소"}),a(Se,{variant:"contained",startIcon:a(fE,{}),onClick:h,disabled:!o.trim(),children:"답변 전송"})]})]})]})]})}),a(nr,{sx:{p:2},children:a(Se,{onClick:g,variant:"outlined",children:"닫기"})})]})},YD=[{value:"all",label:"전체",color:"default"},{value:"requesting",label:"문의 중",color:"warning"},{value:"waiting",label:"대기",color:"info"},{value:"replied",label:"답변완료",color:"success"},{value:"no_reply",label:"미답변완료",color:"default"}],XD=[{value:"inquiry",label:"일반문의"},{value:"complaint",label:"불만사항"},{value:"suggestion",label:"건의사항"},{value:"technical",label:"기술지원"},{value:"payment",label:"결제문의"},{value:"account",label:"계정문의"}],Ole=[{id:"index",label:"No.",width:80,align:"center",type:"number",sx:{textAlign:"center !important"},pinnable:!0},{id:"memberType",label:"유형",width:120,align:"center",type:"chip",sx:{textAlign:"center !important"},pinnable:!0},{id:"memberInfo",label:"아이디(닉네임)",width:180,align:"center",type:"member",clickable:!0,sx:{textAlign:"center !important"},pinnable:!0},{id:"superAgent",label:"상위에이전트",width:200,align:"center",type:"horizontal",sx:{textAlign:"center !important"},pinnable:!0},{id:"inquiryType",label:"문의유형",width:120,align:"center",type:"chip",sx:{textAlign:"center !important"},pinnable:!0},{id:"title",label:"제목",width:300,align:"center",type:"clickable",sx:{textAlign:"center !important"},pinnable:!0},{id:"createdDate",label:"등록날짜",width:180,align:"center",type:"datetime",sx:{textAlign:"center !important"},pinnable:!0},{id:"readDate",label:"읽은날짜",width:180,align:"center",type:"datetime",sx:{textAlign:"center !important"},pinnable:!0},{id:"status",label:"상태",width:100,align:"center",type:"chip",sx:{textAlign:"center !important"},pinnable:!0},{id:"actions",label:"액션",width:250,align:"center",type:"button",sx:{textAlign:"center !important"},pinnable:!1,buttons:[{type:"reply",label:"회신",variant:"outlined",color:"primary",size:"small",show:e=>{const t=e.statusLabel||e.status||"문의 중";return t!=="답변완료"&&t!=="미답변완료"}},{type:"pending",label:"대기",variant:"outlined",color:"warning",size:"small",show:e=>(e.statusLabel||e.status||"문의 중")==="문의 중"},{type:"delete",label:"삭제",variant:"outlined",color:"error",size:"small",show:e=>!0}]}],ki={getMessages:async(e={})=>{try{return(await Pe.get("/customer-service",{params:e})).data}catch(t){throw console.error("문의 목록 조회 오류:",t),t}},getMessageDetail:async e=>{try{return(await Pe.get(`/customer-service/${e}`)).data}catch(t){throw console.error("문의 상세 조회 오류:",t),t}},replyToMessage:async(e,t)=>{try{let n,r={};return t.image?(n=new FormData,n.append("content",t.content),n.append("image",t.image),r["Content-Type"]="multipart/form-data"):n={content:t.content},(await Pe.post(`/customer-service/${e}/reply`,n,{headers:r})).data}catch(n){throw console.error("문의 답변 작성 오류:",n),n}},updateMessageStatus:async(e,t)=>{try{const r={unread:"unread",read:"read",pending:"waiting",replied:"replied",completed:"completed"}[t]||t;return(await Pe.put(`/customer-service/${e}/status`,{status:r})).data}catch(n){throw console.error("문의 상태 변경 오류:",n),n.response&&n.response.data&&console.error("서버 응답:",n.response.data),n}},getUnreadStats:async()=>{try{return(await Pe.get("/customer-service/stats/unread")).data}catch(e){throw console.error("읽지 않은 문의 수 조회 오류:",e),e}},sendMessage:async e=>{try{return(await Pe.post("/customer-service/send",e)).data}catch(t){throw console.error("문의 보내기 오류:",t),t}},deleteMessage:async e=>{try{return(await Pe.delete(`/customer-service/${e}`)).data}catch(t){throw console.error("문의 삭제 오류:",t),t}},getSentMessages:async(e={})=>{try{return(await Pe.get("/customer-service/sent",{params:e})).data}catch(t){throw console.error("보낸 문의 목록 조회 오류:",t),t}},getAllMessages:async(e={})=>{try{return(await Pe.get("/customer-service/all",{params:e})).data}catch(t){throw console.error("전체 문의 목록 조회 오류:",t),t}},resendMessage:async e=>{try{return(await Pe.post(`/customer-service/${e}/resend`)).data}catch(t){throw console.error("문의 재발송 오류:",t),t}},cancelMessage:async e=>{try{return(await Pe.put(`/customer-service/${e}/cancel`)).data}catch(t){throw console.error("문의 취소 오류:",t),t}}},Ale=e=>({requesting:"문의 중",waiting:"대기",replied:"답변완료",no_reply:"미답변완료",unread:"미읽음",read:"읽음",pending:"대기",completed:"완료"})[e]||e,Dle=e=>({requesting:"warning",waiting:"info",replied:"success",no_reply:"default",unread:"error",read:"primary",pending:"warning",completed:"info"})[e]||"default",Rle=e=>({general:"일반문의",deposit:"입금문의",withdrawal:"출금문의",game:"게임문의",account:"계정문의",other:"기타문의"})[e]||e,K0=e=>{const t=e.sender_type||e.senderType,n=e.inquiry_type||e.inquiryType,r=e.sender_username||e.senderUsername,i=e.sender_name||e.senderName,o=e.created_at||e.createdAt,s=e.read_at||e.readAt,l=e.parent_agents||e.parentAgents||[];return{id:e.id,title:e.title,content:e.content,username:r,nickname:i,memberInfo:r&&i?`${r}
${i}`:r||i||"",superAgent:l,memberType:{id:t,label:t==="user"?"회원":"에이전트",color:t==="user"?"primary":"secondary",variant:"outlined"},inquiryType:{id:n,label:Rle(n),color:"info",variant:"outlined"},status:{id:e.status,label:Ale(e.status),color:Dle(e.status),variant:"outlined"},statusValue:e.status,actualStatus:e.actual_status||e.status,createdDate:o||null,readDate:s||null,createdAt:o,updatedAt:e.updated_at||e.updatedAt,isRead:e.is_read||e.isRead||!1,replyCount:e.reply_count||e.replyCount||0,attachmentCount:e.attachment_count||e.attachmentCount||0}},Ele=e=>{const t=e.recipient_type||e.recipientType,n=e.recipientUsername||e.recipient_username,r=e.totalRecipients||e.total_recipients||1,i=e.readRecipients||e.read_recipients||0,o=e.createdAt||e.created_at;let s={firstRecipient:n||t||"unknown",total:r,read:i};const l=r-i;let c={read:i,unread:l,total:r,hasUnread:l>0};return e.status==="sending"?c.sending=!0:e.status==="failed"&&(c.failed=!0),{id:e.id,subject:e.title,content:e.content,recipientType:t,recipientTypeInfo:{value:t,label:t==="all"?"전체":t==="agent"?"에이전트":t==="line"?"라인":t==="member"?"회원":"선택",color:t==="all"?"primary":t==="agent"?"secondary":t==="line"?"info":t==="member"?"success":"warning",variant:"outlined"},status:e.status,statusInfo:{value:e.status,label:e.status==="completed"?"발송완료":e.status==="sending"?"발송중":"발송실패",color:e.status==="completed"?"success":e.status==="sending"?"warning":"error",variant:"outlined"},recipientCount:s,readStatus:c,hasUnreadMessages:l>0&&e.status==="completed",sentDate:o?new Date(o).toLocaleString("ko-KR"):null,senderInfo:{name:"관리자",role:"admin"}}},uS=()=>{const[e,t]=u.useState([]),[n,r]=u.useState(!1),[i,o]=u.useState(null),[s,l]=u.useState({userInquiries:0,agentInquiries:0,total:0}),[c,d]=u.useState({page:1,limit:1e3,total:0,totalPages:0}),{showNotification:h,handleRefresh:f}=$a(),g=u.useCallback(()=>{const R=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBCyAyfPincMQDfa///+fWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKnWfipbODzTfipgm8EB076qHKn");R.volume=.5,R.play().catch(E=>console.log("알림음 재생 실패:",E))},[]),w=u.useCallback(async(R={})=>{r(!0),o(null);try{const E=await ki.getMessages({page:c.page,limit:c.limit,...R});if(E.success){E.data;const z=Array.isArray(E.data)?E.data.map(K0):[];t(z),E.pagination&&d(q=>({...q,total:E.pagination.total,totalPages:E.pagination.totalPages}))}else console.error("API 응답 실패:",E),t([])}catch(E){console.error("API 에러:",E),o(E.message||"문의 목록을 불러오는데 실패했습니다."),h("문의 목록을 불러오는데 실패했습니다.","error")}finally{r(!1)}},[c.page,c.limit,h]),x=u.useCallback(async()=>{try{const R=await ki.getUnreadStats();R.success&&l(R.data)}catch(R){console.error("읽지 않은 문의 수 조회 실패:",R)}},[]),y=u.useCallback(async(R,E)=>{try{const z=await ki.updateMessageStatus(R,E);if(z.success){if(z.data){const q=K0(z.data);t(X=>{const H=X.map(K=>K.id===R?q:K);return H}),D(X=>{const H=X.map(K=>K.id===R?q:K);return H})}else await w();h("상태가 변경되었습니다.","success"),(E==="read"||E==="completed")&&x()}}catch(z){throw console.error("[useCustomerService] updateMessageStatus 에러:",z),h("상태 변경에 실패했습니다.","error"),z}},[h,x,w]),p=u.useCallback(async R=>{try{(await ki.deleteMessage(R)).success&&(t(z=>z.filter(q=>q.id!==R)),D(z=>z.filter(q=>q.id!==R)),h("문의가 삭제되었습니다.","success"))}catch(E){throw h("문의 삭제에 실패했습니다.","error"),E}},[h]),v=u.useCallback(R=>{g(),h(`새 문의: ${R.title}`,"info"),w(),x()},[g,h,w,x]);u.useEffect(()=>((async()=>{await Tn.connect()&&(Tn.on("customer:service:new",v),Tn.on("customer:service:status:changed",z=>{w()}))})(),()=>{Tn.off("customer:service:new",v),Tn.off("customer:service:status:changed")}),[v]),u.useEffect(()=>{w(),x()},[w,x]);const b=u.useCallback(R=>{d(E=>({...E,page:R}))},[]),P=u.useCallback(R=>{d(E=>({...E,page:1,limit:R}))},[]),[k,C]=u.useState([]),[S,_]=u.useState(!1),T=u.useCallback(async(R={})=>{_(!0);try{const E=await ki.getSentMessages({page:c.page,limit:c.limit,...R});if(E.success){const z=Array.isArray(E.data)?E.data.map(Ele):[];C(z)}}catch(E){console.error("보낸 문의 조회 실패:",E),C([])}finally{_(!1)}},[c.page,c.limit]),I=u.useCallback(async R=>{try{const E=await ki.sendMessage(R);return E.success?(h("문의가 전송되었습니다.","success"),T(),{success:!0}):{success:!1,error:E.message}}catch(E){return h("문의 전송에 실패했습니다.","error"),{success:!1,error:E.message}}},[h,T]),L=u.useCallback(async R=>{try{const{messageId:E,content:z}=R,q=await ki.replyToMessage(E,{content:z});return q.success?(h("답변이 등록되었습니다.","success"),w(),T(),{success:!0}):{success:!1,error:q.message}}catch(E){return h("답변 등록에 실패했습니다.","error"),{success:!1,error:E.message}}},[h,w,T]),[A,D]=u.useState([]),[B,$]=u.useState(!1),N=u.useCallback(async(R={})=>{$(!0);try{const E=await ki.getAllMessages({page:c.page,limit:c.limit,...R});if(E.success){const z=Array.isArray(E.data)?E.data.map(q=>{const X=K0(q);return X.direction=q.direction,X.directionInfo={value:q.direction,label:q.direction==="sent"?"보낸":"받은",color:q.direction==="sent"?"primary":"secondary",variant:"outlined"},q.direction==="sent"&&(X.recipientUsername=q.related_username,X.recipientNickname=q.related_nickname),X}):[];D(z),E.pagination&&d(q=>({...q,total:E.pagination.total,totalPages:E.pagination.totalPages}))}}catch(E){console.error("전체 문의 조회 실패:",E),D([]),h("전체 문의 목록을 불러오는데 실패했습니다.","error")}finally{$(!1)}},[c.page,c.limit,h]),F=u.useCallback(async R=>{try{const E=await ki.resendMessage(R);return E.success?(h("문의가 재발송되었습니다.","success"),T(),{success:!0}):{success:!1,error:E.message}}catch(E){return h("문의 재발송에 실패했습니다.","error"),{success:!1,error:E.message}}},[h,T]),O=u.useCallback(async R=>{try{const E=await ki.cancelMessage(R);return E.success?(h("문의가 취소되었습니다.","success"),T(),{success:!0}):{success:!1,error:E.message}}catch(E){return h("문의 취소에 실패했습니다.","error"),{success:!1,error:E.message}}},[h,T]);return{messages:e,sentMessages:k,allMessages:A,loading:n,sentLoading:S,allLoading:B,error:i,unreadStats:s,pagination:c,fetchMessages:w,fetchSentMessages:T,fetchAllMessages:N,fetchUnreadStats:x,updateMessageStatus:y,deleteMessage:p,sendMessage:I,replyToMessage:L,resendMessage:F,cancelMessage:O,changePage:b,changeLimit:P,refreshData:()=>{w(),T(),x()}}},Mle=[{value:"completed",label:"발송완료",color:"success"},{value:"sending",label:"발송중",color:"warning"},{value:"failed",label:"발송실패",color:"error"}],Lle=[{value:"all",label:"전체",color:"primary"},{value:"agent",label:"에이전트",color:"secondary"},{value:"line",label:"라인",color:"info"},{value:"member",label:"회원",color:"success"},{value:"custom",label:"선택",color:"warning"}],$le=[{id:"index",label:"No.",width:80,align:"center",type:"number",sx:{textAlign:"center !important"},pinnable:!0},{id:"recipientType",label:"유형",width:120,align:"center",type:"text",sx:{textAlign:"center !important"},pinnable:!0},{id:"recipientCount",label:"수신자",width:200,align:"center",type:"custom",sx:{textAlign:"center !important"},pinnable:!0},{id:"readStatus",label:"읽음여부",width:120,align:"center",type:"custom",sx:{textAlign:"center !important"},pinnable:!0},{id:"subject",label:"제목",width:300,align:"center",type:"clickable",sx:{textAlign:"center !important"},pinnable:!0},{id:"sentDate",label:"발송일시",width:150,align:"center",type:"datetime",sx:{textAlign:"center !important"},pinnable:!0},{id:"status",label:"상태",width:100,align:"center",type:"text",sx:{textAlign:"center !important"},pinnable:!0},{id:"actions",label:"비고",width:200,align:"center",type:"actions",sx:{textAlign:"center !important"},pinnable:!1}],jle=()=>{var ke,bt,it,fe,be,Te,Ne,Ve,Ge,At,Qe,Ie,Xe;On();const{sentMessages:e,sentLoading:t,fetchSentMessages:n,resendMessage:r,deleteMessage:i,cancelMessage:o}=uS(),[s,l]=u.useState([]);u.useEffect(()=>{e&&e.length>0&&(e[0],e[0].recipientType,e[0].status),l(e||[])},[e]),u.useEffect(()=>{n()},[n]);const[c,d]=u.useState(null),[h,f]=u.useState(!1),{containerRef:g,tableHeight:w,autoHeight:x,toggleAutoHeight:y,setManualHeight:p}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:v,getResizeHandleProps:b}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:ve=>{x&&y(!1),p(`${ve}px`)}}),{tableHeaderRef:P,getTableHeaderStyles:k}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),C=u.useCallback(ve=>{d(ve),f(!0)},[]),S=u.useCallback(async ve=>{if(confirm("이 문의를 재발송하시겠습니까?"))try{(await r(ve)).success}catch(at){console.error("재발송 오류:",at)}},[r]),_=u.useCallback(async ve=>{if(confirm("이 보낸문의를 삭제하시겠습니까?"))try{(await i(ve)).success}catch(at){console.error("삭제 오류:",at)}},[i]),T=u.useCallback(async ve=>{if(confirm("아직 읽지 않은 수신자들에게 발송을 취소하시겠습니까?"))try{(await o(ve)).success}catch(at){console.error("발송취소 오류:",at)}},[o]),[I,L]=u.useState(0),[A,D]=u.useState(25),{checkedItems:B,sortConfig:$,expandedRows:N,allChecked:F,handleSort:O,handleCheck:R,handleToggleAll:E,handleToggleExpand:z}=Nn({data:s,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:I,rowsPerPage:A}),q=u.useCallback(ve=>{if(!ve)return a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",children:"-"})});let at;return typeof ve.recipientType=="object"&&ve.recipientType!==null?at=ve.recipientType:ve.recipientTypeInfo?at=ve.recipientTypeInfo:at={label:ve.recipientType||"-",color:"default",variant:"outlined"},a(j,{sx:{textAlign:"center"},children:a(ut,{label:at.label,color:at.color||"default",variant:at.variant||"filled",size:"small"})})},[]),X=u.useCallback(ve=>{if(!ve)return a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",children:"-"})});let at;return typeof ve.status=="object"&&ve.status!==null?at=ve.status:ve.statusInfo?at=ve.statusInfo:at={label:ve.status||"-",color:"default",variant:"outlined"},a(j,{sx:{textAlign:"center"},children:a(ut,{label:at.label,color:at.color||"default",variant:at.variant||"filled",size:"small"})})},[]),H=u.useCallback(ve=>{if(!ve||!ve.recipientCount)return a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",children:"-"})});const at=ve.recipientCount;if(typeof at!="object"||at===null)return a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",children:"-"})});const We=at.firstRecipient||"user001",xe=Number(at.total)||0,qe=xe-1;return xe===1?a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",sx:{fontWeight:"medium"},children:We})}):a(j,{sx:{textAlign:"center"},children:m(M,{variant:"body2",sx:{fontWeight:"medium"},children:[We," 외 ",qe,"명"]})})},[]),K=u.useCallback(ve=>{if(!ve||!ve.readStatus)return a(j,{sx:{textAlign:"center"},children:a(M,{variant:"body2",children:"-"})});const at=ve.readStatus;if(at.failed)return a(j,{sx:{textAlign:"center"},children:a(ut,{label:"발송실패",size:"small",color:"error",variant:"outlined"})});if(at.sending)return a(j,{sx:{textAlign:"center"},children:a(ut,{label:"발송중",size:"small",color:"warning",variant:"outlined"})});if(at.cancelled)return a(j,{sx:{textAlign:"center"},children:a(ut,{label:"발송취소",size:"small",color:"default",variant:"outlined"})});const We=Number(at.read)||0,xe=Number(at.unread)||0,qe=Number(at.total)||0;return xe===0?m(j,{sx:{textAlign:"center"},children:[a(ut,{label:"모두 읽음",size:"small",color:"success",variant:"outlined"}),m(M,{variant:"caption",sx:{display:"block",mt:.5},children:[We,"/",qe]})]}):m(j,{sx:{textAlign:"center"},children:[a(ut,{label:"일부 읽음",size:"small",color:"warning",variant:"outlined"}),m(M,{variant:"caption",sx:{display:"block",mt:.5},children:[We,"/",qe," (미읽음 ",xe,")"]})]})},[]),ee=u.useCallback(ve=>{var We;if(!ve)return a(j,{sx:{display:"flex",gap:.5,justifyContent:"center",alignItems:"center",width:"100%"},children:a(M,{variant:"body2",children:"-"})});const at=((We=ve.status)==null?void 0:We.value)||ve.status||"unknown";return m(j,{sx:{display:"flex",gap:.5,justifyContent:"center",alignItems:"center",width:"100%"},children:[a(Se,{size:"small",variant:"outlined",color:"primary",onClick:xe=>{xe.stopPropagation(),C(ve)},sx:{minWidth:"auto",fontSize:"0.75rem"},children:"상세"}),ve.hasUnreadMessages&&a(Se,{size:"small",variant:"outlined",color:"secondary",onClick:xe=>{xe.stopPropagation(),T(ve.id)},sx:{minWidth:"auto",fontSize:"0.75rem"},children:"발송취소"}),at==="failed"&&a(Se,{size:"small",variant:"outlined",color:"warning",onClick:xe=>{xe.stopPropagation(),S(ve.id)},sx:{minWidth:"auto",fontSize:"0.75rem"},children:"재발송"}),(at==="completed"||at==="failed")&&a(Se,{size:"small",variant:"outlined",color:"error",onClick:xe=>{xe.stopPropagation(),_(ve.id)},sx:{minWidth:"auto",fontSize:"0.75rem"},children:"삭제"}),at==="sending"&&a(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",color:"warning.main",fontSize:"0.75rem"},children:"발송중..."})]})},[C,S,_,T]),ge=u.useMemo(()=>$le.map(ve=>ve.id==="subject"?{...ve,clickable:!0,onClick:at=>{C(at)}}:ve.id==="recipientType"?{...ve,render:q}:ve.id==="status"?{...ve,render:X}:ve.id==="recipientCount"?{...ve,render:H}:ve.id==="readStatus"?{...ve,render:K}:ve.id==="actions"?{...ve,render:ee}:ve),[C,q,X,H,K,ee]),oe=u.useMemo(()=>[{id:"recipientType",label:"수신자 유형",items:[{value:"",label:"전체"},...Lle.map(ve=>({value:ve.value,label:ve.label}))]},{id:"status",label:"발송 상태",items:[{value:"",label:"전체"},...Mle.map(ve=>({value:ve.value,label:ve.label}))]}],[]),{activeFilters:G,handleFilterChange:Q,isDateFilterActive:te,handleOpenDateFilter:U,resetDateFilter:V,dateRange:ae,page:ne,rowsPerPage:me,totalCount:ue,totalPages:Ae,handlePageChange:we,handleRowsPerPageChange:ce,filteredData:De,displayData:le,filterValues:se,handleFilter:J,handleClearFilters:Z}=yr({columns:ge,data:s,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{recipientType:"",status:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:s.length,onExcelDownload:()=>{alert("보낸문의를 엑셀로 다운로드합니다.")},onPrint:()=>{alert("보낸문의를 인쇄합니다.")}}}),{searchText:ie,totalItems:_e,sequentialPageNumbers:Re,hasPinnedColumns:He,isGridReady:ft,handleSearchChange:St,handleClearSearch:Tt,togglePageNumberMode:gt,toggleColumnPin:et,setGridReady:xt}=Rn({initialTotalItems:s.length,onSearch:ve=>{ne!==0&&we(0)},onToggleColumnPin:ve=>{}});u.useEffect(()=>{xt(!0)},[xt]);const{columns:Rt,dragInfo:ht,pinnedColumns:jt,handleDragStart:$t,handleDragEnd:Ut,handleDragOver:Bt,handleDrop:Kt,updateColumns:Ft}=sr({initialColumns:ge,tableId:"sent_messages_table",initialPinnedColumns:["index","recipientType"],onColumnOrderChange:ve=>{}});u.useEffect(()=>{Rt.forEach(ve=>{(ve.id==="recipientCount"||ve.id==="readStatus"||ve.id==="actions")&&(`${ve.id}`,ve.render,ve.render),ve.id==="subject"&&(`${ve.id}`,ve.onClick,ve.onClick,`${ve.id}`,ve.clickable)})},[Rt]);const Et=u.useMemo(()=>Rt.map(ve=>{const at=ge.find(We=>We.id===ve.id);return at?{...ve,render:at.render,onClick:at.onClick,clickable:at.clickable}:ve}),[Rt,ge]),Ot=u.useCallback((ve,at,We)=>{switch(at){case"recipientType":return We==="all"||We===""?ve:ve.filter(xe=>(typeof xe.recipientType=="object"?xe.recipientType.value:xe.recipientType)===We);case"status":return We==="all"||We===""?ve:ve.filter(xe=>(typeof xe.status=="object"?xe.status.value:xe.status)===We);default:return ve}},[]),zt=u.useCallback((ve,at)=>{Q(ve,at)},[Q]),Wt=u.useMemo(()=>{const ve={...G};return Object.keys(ve).forEach(at=>{ve[at]==="all"&&(ve[at]="")}),ve},[G]),kt=Dr({data:s,activeFilters:Wt,searchText:ie,isDateFilterActive:te,dateRange:ae,filterCallback:Ot}),Ht=u.useMemo(()=>{const ve=Object.values(Wt).some(We=>We&&We!==""),at=ie&&ie.trim()!=="";return!ve&&!at?s:kt||[]},[s,kt,Wt,ie])||[],qt=Ht.length,Yt=u.useCallback((ve,at)=>{let We=at;typeof ve=="number"&&at===void 0&&(We=ve),L(We),we(We)},[I,we]),Xt=u.useCallback(ve=>{const at=parseInt(ve.target.value,10);D(at),L(0),ce(ve)},[A,ce]),[tn,Fe]=u.useState(Date.now());u.useEffect(()=>{Fe(Date.now())},[I,A]);const je=!0,Oe={handleDragStart:$t,handleDragEnd:Ut,handleDragOver:Bt,handleDrop:Kt};return t?m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[a(ir,{}),a(M,{sx:{ml:2},children:"보낸 문의 목록을 불러오는 중..."})]}):m(bn,{children:[a(gn,{title:"보낸문의 목록",totalItems:qt,countLabel:"총 ##count##건의 문의",sequentialPageNumbers:Re,togglePageNumberMode:gt,hasPinnedColumns:He,isGridReady:ft,toggleColumnPin:et,searchText:ie,handleSearchChange:St,handleClearSearch:Tt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"제목 또는 수신자로 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:Rt,filterValues:se||{},activeFilters:Wt||{},filterOptions:oe,handleFilterChange:zt,onFilter:J,onClearFilters:Z,isDateFilterActive:te,handleOpenDateFilter:U,resetDateFilter:V},paginationProps:{count:qt,page:I,rowsPerPage:A,onPageChange:Yt,onRowsPerPageChange:Xt,totalCount:qt,onExcelDownload:()=>{alert("보낸문의를 엑셀로 다운로드합니다.")},onPrint:()=>{alert("보낸문의를 인쇄합니다.")}}})}),m(j,{sx:{width:"100%",mt:2},ref:g,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",I+1," / ",Math.ceil(qt/A)," (페이지당 ",A,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Et,data:Ht,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:B,expandedRows:N,allChecked:F,onCheck:R,onToggleAll:E,onToggleExpand:z,onSort:O,sortConfig:$,page:I,rowsPerPage:A,totalCount:qt,sequentialPageNumbers:Re,draggableColumns:je,onColumnOrderChange:Ft,dragHandlers:Oe,dragInfo:ht,fixedHeader:!0,maxHeight:w,tableHeaderRef:P,headerStyle:k(),pinnedColumns:jt},`sent-messages-table-${tn}`),a(rr,{resizeHandleProps:b(parseFloat(w)),showIcon:!0,isDragging:v,sx:{mt:1,opacity:v?1:.7,"&:hover":{opacity:1}}})]}),c&&m(Yn,{open:h,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"600px"}},children:[m(Zn,{sx:{m:0,p:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(M,{variant:"h6",component:"div",children:"보낸문의 상세 정보"}),a(Ct,{"aria-label":"close",onClick:()=>f(!1),sx:{color:"grey.500"},children:a(Sa,{})})]}),a(Kn,{dividers:!0,sx:{p:3},children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(rt,{elevation:1,sx:{p:2,mb:2},children:m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"수신자 유형"}),a(ut,{label:typeof c.recipientType=="object"?(ke=c.recipientType)==null?void 0:ke.label:((bt=c.recipientTypeInfo)==null?void 0:bt.label)||c.recipientType||"전체",color:typeof c.recipientType=="object"?(it=c.recipientType)==null?void 0:it.color:((fe=c.recipientTypeInfo)==null?void 0:fe.color)||"default",size:"small",variant:"outlined"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"발송일시"}),a(M,{variant:"body1",children:c.sentDate})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"수신자 정보"}),m(M,{variant:"body1",children:[(be=c.recipientCount)==null?void 0:be.firstRecipient,((Te=c.recipientCount)==null?void 0:Te.total)>1&&` 외 ${c.recipientCount.total-1}명`]})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"발송 상태"}),a(ut,{label:typeof c.status=="object"?(Ne=c.status)==null?void 0:Ne.label:((Ve=c.statusInfo)==null?void 0:Ve.label)||c.status||"발송완료",color:typeof c.status=="object"?(Ge=c.status)==null?void 0:Ge.color:((At=c.statusInfo)==null?void 0:At.color)||"default",size:"small",variant:"outlined"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"읽음 상태"}),c.readStatus?m(j,{children:[c.readStatus.failed&&a(ut,{label:"발송실패",size:"small",color:"error",variant:"outlined"}),c.readStatus.sending&&a(ut,{label:"발송중",size:"small",color:"warning",variant:"outlined"}),c.readStatus.cancelled&&a(ut,{label:"발송취소",size:"small",color:"default",variant:"outlined"}),!c.readStatus.failed&&!c.readStatus.sending&&!c.readStatus.cancelled&&m(bn,{children:[a(ut,{label:c.readStatus.unread===0?"모두 읽음":"일부 읽음",size:"small",color:c.readStatus.unread===0?"success":"warning",variant:"outlined"}),m(M,{variant:"caption",sx:{display:"block",mt:.5},children:["읽음: ",c.readStatus.read,"/",c.readStatus.total,c.readStatus.unread>0&&` (미읽음: ${c.readStatus.unread})`]})]})]}):a(M,{variant:"body2",children:"-"})]}),m(W,{item:!0,xs:12,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"발송자"}),m(M,{variant:"body1",children:[((Qe=c.senderInfo)==null?void 0:Qe.name)||"관리자"," (",((Ie=c.senderInfo)==null?void 0:Ie.role)||"admin",")"]})]})]})})}),m(W,{item:!0,xs:12,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"제목"}),a(M,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:c.subject}),a(yn,{sx:{my:2}})]}),m(W,{item:!0,xs:12,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"내용"}),a(rt,{elevation:0,sx:{p:2,backgroundColor:"grey.50",border:"1px solid",borderColor:"grey.200",borderRadius:1,whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:1.6},children:a(M,{variant:"body1",children:c.content||"내용이 없습니다."})})]})]})}),m(nr,{sx:{p:2,gap:1},children:[a(Se,{onClick:()=>f(!1),variant:"outlined",children:"닫기"}),c.hasUnreadMessages&&a(Se,{onClick:()=>{T(c.id),f(!1)},variant:"contained",color:"secondary",children:"발송취소"}),((Xe=c.status)==null?void 0:Xe.value)==="failed"&&a(Se,{onClick:()=>{S(c.id),f(!1)},variant:"contained",color:"warning",children:"재발송"})]})]})]})},Fle=()=>{var L,A;const{agentLevels:e,isLoading:t}=yo(),{sendMessage:n}=uS(),[r,i]=u.useState({recipientType:"",selectedSubType:"",recipients:[],subject:"",content:"",sendImmediately:!0}),[o,s]=u.useState(!1),[l,c]=u.useState(""),[d,h]=u.useState(!1),[f,g]=u.useState(null),[w,x]=u.useState(""),[y,p]=u.useState({}),v=u.useMemo(()=>[{id:"line001",name:"line001",nickname:"라인1",type:"agent",children:[{id:"user001",name:"user001",nickname:"회원1",type:"member"},{id:"user002",name:"user002",nickname:"회원2",type:"member"},{id:"user003",name:"user003",nickname:"회원3",type:"member"}]},{id:"line002",name:"line002",nickname:"라인2",type:"agent",children:[{id:"user004",name:"user004",nickname:"회원4",type:"member"},{id:"user005",name:"user005",nickname:"회원5",type:"member"}]},{id:"line003",name:"line003",nickname:"라인3",type:"agent",children:[{id:"user006",name:"user006",nickname:"회원6",type:"member"},{id:"user007",name:"user007",nickname:"회원7",type:"member"},{id:"user008",name:"user008",nickname:"회원8",type:"member"},{id:"user009",name:"user009",nickname:"회원9",type:"member"}]},{id:"member010",name:"member010",nickname:"직속회원1",type:"member",children:[]},{id:"member011",name:"member011",nickname:"직속회원2",type:"member",children:[]}],[]),b=u.useMemo(()=>[{id:"user001",name:"user001",nickname:"회원1",type:"member"},{id:"user002",name:"user002",nickname:"회원2",type:"member"},{id:"agent001",name:"agent001",nickname:"에이전트1",type:"agent"},{id:"agent002",name:"agent002",nickname:"에이전트2",type:"agent"},{id:"admin001",name:"admin001",nickname:"관리자1",type:"admin"}],[]),P=u.useMemo(()=>{const D=[{value:"all",label:"전체",color:"primary"},{value:"agent",label:"에이전트",color:"secondary"},{value:"member",label:"회원",color:"success"}],B=e.map((N,F)=>({value:`level_${N.id||F}`,label:N.levelType,color:"info"})),$=[{value:"line",label:"라인",color:"warning"},{value:"custom",label:"선택",color:"error"}];return[...D,...B,...$]},[e]),k=u.useCallback(D=>{switch(D){case"all":return 1e3;case"agent":return 50;case"member":return 800;case"line":return r.recipients.length;case"custom":return r.recipients.length;default:const B=D.startsWith("level_")?D.substring(6):null;return e.find(N=>N.id==B||`level_${N.id}`===D)?10:0}},[r.recipients.length,e]),C=u.useCallback((D,B)=>{i($=>({...$,[D]:B})),D==="recipientType"&&i($=>({...$,recipientType:B,selectedSubType:"",recipients:[]}))},[]),S=u.useCallback(()=>{i({recipientType:"",selectedSubType:"",recipients:[],subject:"",content:"",sendImmediately:!0}),c(""),p({}),g(null),x("")},[]),_=u.useCallback(()=>{h(D=>!D)},[]),T=u.useCallback(()=>{const D={};return r.recipientType||(D.recipientType="수신자 유형을 선택해주세요."),r.recipientType==="custom"&&r.recipients.length===0&&(D.recipients="수신자를 선택해주세요."),r.recipientType==="line"&&(r.selectedSubType||(D.selectedSubType="세부 유형을 선택해주세요.")),r.subject.trim()||(D.subject="제목을 입력해주세요."),r.content.trim()||(D.content="내용을 입력해주세요."),p(D),Object.keys(D).length===0},[r]),I=u.useCallback(async()=>{var D,B;if(T())try{s(!0);let $=[];switch(r.recipientType){case"all":$=["all"];break;case"agent":$=["all_agents"];break;case"member":$=["all_members"];break;case"line":$=r.recipients.map(O=>O.id);break;case"custom":$=r.recipients.map(O=>O.id);break;default:$=[r.recipientType];break}const N={recipientType:r.recipientType,recipientIds:$,title:r.subject,content:r.content},F=await n(N);F.success?(x("메시지가 성공적으로 전송되었습니다."),g(null),S(),setTimeout(()=>{x("")},3e3)):(g(F.error||"메시지 전송에 실패했습니다."),x(""))}catch($){console.error("메시지 전송 실패:",$),g(((B=(D=$.response)==null?void 0:D.data)==null?void 0:B.error)||"메시지 전송에 실패했습니다."),x("")}finally{s(!1)}},[r,T,S,n]);return t?m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:4},children:[a(ir,{}),a(M,{sx:{ml:2},children:"단계 설정 정보를 불러오는 중..."})]}):m(j,{sx:{width:"100%"},children:[a(M,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:"문의보내기"}),w&&a(Jt,{severity:"success",sx:{mb:2},onClose:()=>x(""),children:w}),f&&a(Jt,{severity:"error",sx:{mb:2},onClose:()=>g(null),children:f}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:d?6:12,children:a(Sn,{elevation:1,children:a(In,{sx:{p:3},children:m(kr,{spacing:3,children:[m(Zt,{fullWidth:!0,children:[a(hn,{children:"수신자 유형"}),a(an,{value:r.recipientType,label:"수신자 유형",onChange:D=>C("recipientType",D.target.value),error:!!y.recipientType,children:P.map(D=>a(Me,{value:D.value,children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ut,{label:D.label,size:"small",color:D.color,variant:"outlined"}),m(M,{variant:"body2",color:"text.secondary",children:["(약 ",k(D.value),"명)"]})]})},D.value))}),y.recipientType&&a(M,{variant:"caption",color:"error",sx:{mt:.5},children:y.recipientType})]}),r.recipientType==="custom"&&m(j,{children:[a(M,{variant:"subtitle2",sx:{mb:2,fontWeight:"medium"},children:"수신자 선택"}),a(j,{sx:{mb:2},children:a(dE,{options:b,getOptionLabel:D=>`${D.name} (${D.nickname})`,value:null,inputValue:l,onInputChange:(D,B)=>{c(B)},onChange:(D,B)=>{B&&!r.recipients.some($=>$.id===B.id)&&(i($=>({...$,recipients:[...$.recipients,B]})),c(""))},renderInput:D=>a($e,{...D,label:"수신자 검색 및 추가",placeholder:"아이디 또는 닉네임으로 검색...",size:"small",error:!!y.recipients,helperText:y.recipients}),renderOption:(D,B)=>a(j,{component:"li",...D,children:m(j,{children:[a(M,{variant:"body2",sx:{fontWeight:"medium"},children:B.name}),m(M,{variant:"caption",color:"text.secondary",children:[B.nickname," • ",B.type]})]})}),noOptionsText:"검색 결과가 없습니다"})}),m(j,{children:[m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[m(M,{variant:"body2",color:"text.secondary",children:["선택된 수신자 (",r.recipients.length,"명)"]}),r.recipients.length>0&&a(Se,{size:"small",color:"error",onClick:()=>i(D=>({...D,recipients:[]})),startIcon:a(Wo,{}),children:"전체 삭제"})]}),a(rt,{variant:"outlined",sx:{maxHeight:200,overflow:"auto"},children:r.recipients.length===0?a(j,{sx:{p:2,textAlign:"center"},children:a(M,{variant:"body2",color:"text.secondary",children:"선택된 수신자가 없습니다"})}):a(xi,{dense:!0,children:r.recipients.map(D=>m(Oa,{children:[a(_r,{primary:D.name,secondary:`${D.nickname} • ${D.type}`}),a(g1,{children:a(Ct,{edge:"end",size:"small",onClick:()=>{i(B=>({...B,recipients:B.recipients.filter($=>$.id!==D.id)}))},children:a(Wo,{fontSize:"small"})})})]},D.id))})})]})]}),r.recipientType==="line"&&m(j,{children:[a(M,{variant:"subtitle2",sx:{mb:2,fontWeight:"medium"},children:"라인 수신자 선택"}),m(Zt,{fullWidth:!0,margin:"normal",sx:{mb:2},children:[a(hn,{children:"세부 유형 선택"}),m(an,{value:r.selectedSubType,onChange:D=>C("selectedSubType",D.target.value),error:!!y.selectedSubType,children:[a(Me,{value:"agent",children:"에이전트 선택"},"agent"),a(Me,{value:"member",children:"회원 선택"},"member")]}),y.selectedSubType&&a(M,{variant:"caption",color:"error",sx:{mt:.5},children:y.selectedSubType})]}),r.selectedSubType&&m(bn,{children:[m(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[r.selectedSubType==="agent"?"에이전트":"회원"," 선택",a(M,{component:"span",variant:"caption",color:"text.secondary",sx:{ml:1},children:"(선택 시 본인 + 하부 조직 포함)"})]}),a(rt,{variant:"outlined",sx:{maxHeight:300,overflow:"auto",p:1},children:v.filter(D=>D.type===r.selectedSubType).map(D=>a(j,{sx:{mb:1},children:a(Lt,{control:a(gr,{checked:r.recipients.some(B=>B.id===D.id),onChange:B=>{if(B.target.checked){const $=[D];D.children&&D.children.length>0&&$.push(...D.children),i(N=>({...N,recipients:[...N.recipients,...$]}))}else{const $=[D.id];D.children&&D.children.length>0&&$.push(...D.children.map(N=>N.id)),i(N=>({...N,recipients:N.recipients.filter(F=>!$.includes(F.id))}))}}}),label:m(j,{children:[m(M,{variant:"body2",children:[D.nickname," (",D.name,")"]}),D.children&&D.children.length>0&&m(M,{variant:"caption",color:"text.secondary",children:["하부 조직 ",D.children.length,"명 포함"]})]})})},D.id))}),m(M,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["선택된 수신자: ",r.recipients.length,"명"]})]})]}),a($e,{fullWidth:!0,label:"제목",value:r.subject,onChange:D=>C("subject",D.target.value),placeholder:"문의 제목을 입력하세요",error:!!y.subject,helperText:y.subject}),a($e,{fullWidth:!0,label:"내용",value:r.content,onChange:D=>C("content",D.target.value),placeholder:"문의 내용을 입력하세요",multiline:!0,rows:8,error:!!y.content,helperText:y.content}),m(j,{sx:{display:"flex",gap:2,pt:2},children:[a(Se,{variant:"contained",color:"primary",onClick:I,disabled:o,startIcon:o?a(ir,{size:16}):a(fE,{}),sx:{flex:1},children:o?"전송 중...":"메시지 전송"}),a(Se,{variant:"outlined",onClick:_,startIcon:a(ds,{}),disabled:!r.subject||!r.content,children:"미리보기"}),a(Se,{variant:"text",onClick:S,startIcon:a(Hu,{}),children:"초기화"})]})]})})})}),d&&a(W,{item:!0,xs:12,md:6,children:a(Sn,{elevation:1,children:m(In,{sx:{p:3},children:[a(M,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:"발송 미리보기"}),m(kr,{spacing:2,children:[m(j,{children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"발송 정보"}),a(rt,{variant:"outlined",sx:{p:2},children:m(W,{container:!0,spacing:1,children:[a(W,{item:!0,xs:4,children:a(M,{variant:"caption",color:"text.secondary",children:"수신자 유형:"})}),a(W,{item:!0,xs:8,children:a(ut,{label:(L=P.find(D=>D.value===r.recipientType))==null?void 0:L.label,size:"small",color:(A=P.find(D=>D.value===r.recipientType))==null?void 0:A.color,variant:"outlined"})}),a(W,{item:!0,xs:4,children:a(M,{variant:"caption",color:"text.secondary",children:"예상 수신자:"})}),a(W,{item:!0,xs:8,children:m(M,{variant:"body2",children:["약 ",k(r.recipientType),"명"]})})]})})]}),a(yn,{}),m(j,{children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"문의 내용"}),m(rt,{variant:"outlined",sx:{p:2},children:[a(M,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:r.subject||"(제목 없음)"}),a(M,{variant:"body2",sx:{whiteSpace:"pre-wrap",lineHeight:1.6,minHeight:100},children:r.content||"(내용 없음)"})]})]})]})]})})})]}),m(Jt,{severity:"info",sx:{mt:3},children:[m(M,{variant:"body2",children:["💡 ",a("strong",{children:"안내:"})," 발송된 문의는 '보낸문의' 탭에서 확인하실 수 있습니다. 수신자들의 읽음 여부와 답변 현황을 실시간으로 모니터링할 수 있습니다."]}),m(M,{variant:"body2",sx:{mt:1},children:["🔧 ",a("strong",{children:"수신자 유형:"})," ",e.map(D=>D.levelType).join(", ")," 등의 단계는 '단계설정' 페이지에서 실시간으로 관리되며 웹소켓을 통해 자동으로 업데이트됩니다."]})]})]})},zle=()=>{var tn;On();const e=lg(),[t,n]=u.useState(((tn=e.state)==null?void 0:tn.activeTab)||0),r=zn(Fe=>jB(Fe,"customer-service"));r!=null&&r.requests,r!=null&&r.pending;const{handleRefresh:i}=$a(),o=u.useCallback((Fe,je)=>{n(je)},[]),s=u.useCallback(()=>{i("문의관리")},[i]),{messages:l,allMessages:c,loading:d,allLoading:h,error:f,fetchMessages:g,fetchAllMessages:w,updateMessageStatus:x,replyToMessage:y,deleteMessage:p}=uS(),{containerRef:v,tableHeight:b,autoHeight:P,toggleAutoHeight:k,setManualHeight:C}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:S,getResizeHandleProps:_}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Fe=>{P&&k(!1),C(`${Fe}px`)}}),{tableHeaderRef:T,getTableHeaderStyles:I}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),{visibleColumns:L,toggleColumnVisibility:A,resetToDefault:D,columnVisibility:B,toggleableColumns:$,hiddenColumnsCount:N,showAllColumns:F}=dr(Ole||[],{}),[O,R]=u.useState(null),E=!!O,z=u.useCallback(Fe=>{R(Fe)},[]),q=u.useCallback(()=>{R(null)},[]),X=u.useMemo(()=>t===0?c||[]:l||[],[t,c,l]),[H,K]=u.useState(null),[ee,ge]=u.useState(!1),[oe,G]=u.useState(null),[Q,te]=u.useState(!1),U=u.useCallback(async(Fe,je)=>{try{if(await x(Fe,je),H&&H.id===Fe){const Oe=l==null?void 0:l.find(ke=>ke.id===Fe);Oe&&K(Oe)}}catch(Oe){console.error("상태 변경 오류:",Oe),await g()}},[x,g,H,l]),V=u.useCallback(async Fe=>{if(window.confirm("이 문의를 삭제하시겠습니까?"))try{await p(Fe),H&&H.id===Fe&&(K(null),ge(!1))}catch(je){console.error("삭제 오류:",je),await g()}},[p,H,g]),ae=u.useCallback(async Fe=>{var je,Oe;Fe.status,Fe.statusValue,K(Fe),ge(!0),(((je=Fe.status)==null?void 0:je.id)==="unread"||((Oe=Fe.status)==null?void 0:Oe.label)==="미읽음"||Fe.statusValue==="unread")&&(Fe.id,await U(Fe.id,"read"))},[U]),ne=u.useCallback(Fe=>{G(Fe),te(!0)},[]),{currentPage:me,currentRowsPerPage:ue,handlePageChange:Ae,handleRowsPerPageChange:we,searchText:ce,handleSearchChange:De,handleClearSearch:le,handleFilterChange:se,activeFilters:J,sequentialPageNumbers:Z,togglePageNumberMode:ie}=yr({data:X||[],defaultRowsPerPage:25,paginationOptions:{initialPage:0,initialRowsPerPage:25}}),_e=u.useMemo(()=>{let Fe=[...X||[]];if(ce){const je=ce.toLowerCase();Fe=Fe.filter(Oe=>{var ke,bt,it,fe;return((ke=Oe.title)==null?void 0:ke.toLowerCase().includes(je))||((bt=Oe.memberInfo)==null?void 0:bt.toLowerCase().includes(je))||((it=Oe.username)==null?void 0:it.toLowerCase().includes(je))||((fe=Oe.nickname)==null?void 0:fe.toLowerCase().includes(je))})}return Object.entries(J).forEach(([je,Oe])=>{Oe&&Oe!==""&&(Fe=Fe.filter(ke=>{var bt,it;if(je==="memberType"&&ke.memberType)return ke.memberType.id===Oe;if(je==="status"&&ke.status){const fe=typeof ke.status=="string"?ke.status:ke.status.label;return fe===Oe||((bt=YD.find(be=>be.label===fe))==null?void 0:bt.value)===Oe}if(je==="inquiryType"&&ke.inquiryType){const fe=typeof ke.inquiryType=="string"?ke.inquiryType:ke.inquiryType.label;return fe===Oe||((it=XD.find(be=>be.label===fe))==null?void 0:it.value)===Oe}return!0}))}),Fe},[X,ce,J]),Re=_e.length,He=[{id:"memberType",label:"회원 유형",items:[{value:"",label:"전체"},{value:"member",label:"회원"},{value:"agent",label:"에이전트"},{value:"dealer",label:"딜러"},{value:"admin",label:"관리자"}]},{id:"status",label:"상태",items:[{value:"",label:"전체"},...YD.map(Fe=>({value:Fe.value,label:Fe.label}))]},{id:"inquiryType",label:"문의 유형",items:[{value:"",label:"전체"},...XD.map(Fe=>({value:Fe.value,label:Fe.label}))]}],{dragHandlers:ft,dragInfo:St,handleColumnOrderChange:Tt,pinnedColumns:gt,toggleColumnPin:et,isColumnPinned:xt,clearAllPinnedColumns:Rt,hasPinnedColumns:ht}=sr({initialColumns:L,tableId:"messages-table",enableColumnPinning:!0,initialPinnedColumns:["index","memberType","memberInfo"]}),{isGridReady:jt,setGridReady:$t,headerToggleColumnPin:Ut}=Rn({initialTotalItems:Re,onSearch:Fe=>{me!==0&&Ae(0)},onToggleColumnPin:Fe=>{gt.length>0?Rt():(xt("index")||et("index"),xt("memberType")||et("memberType"),xt("memberInfo")||et("memberInfo"))}});u.useEffect(()=>{$t(!0)},[$t]),u.useEffect(()=>{t===0&&w()},[t,w]);const Bt=u.useMemo(()=>!L||L.length===0?[]:L.map(Fe=>{if(Fe.id==="title")return{...Fe,type:"clickable",clickable:!0,onClick:je=>{ae(je)}};if(Fe.id==="memberInfo")return{...Fe,clickable:!0,onClick:je=>ne(je)};if(Fe.id==="memberType")return{...Fe,type:"chip",render:je=>je.memberTypeLabel?{label:je.memberTypeLabel,color:je.memberTypeColor||"default",variant:"outlined"}:{label:"미분류",color:"default",variant:"outlined"}};if(Fe.id==="inquiryType")return{...Fe,type:"chip",render:je=>je.inquiryTypeLabel?{label:je.inquiryTypeLabel,color:je.inquiryTypeColor||"default",variant:"outlined"}:{label:"미분류",color:"default",variant:"outlined"}};if(Fe.id==="status")return{...Fe,type:"chip",render:je=>je.statusLabel?{label:je.statusLabel,color:je.statusColor||"default",variant:je.statusVariant||"outlined"}:{label:"미읽음",color:"error",variant:"outlined"}};if(Fe.id==="actions"){const je=Fe.buttons.map(Oe=>({...Oe,onClick:ke=>{switch(Oe.type){case"reply":ae(ke);break;case"pending":U(ke.id,"pending");break;case"delete":V(ke.id);break}}}));return{...Fe,buttons:je}}return Fe}),[L,ae,ne,U,V]),Kt=null,[Ft,Et]=u.useState([]),Ot=u.useMemo(()=>{const Fe={};return Ft.forEach(je=>{Fe[je]=!0}),Fe},[Ft]),zt=u.useMemo(()=>{if(!_e||_e.length===0)return!1;const Fe=_e.slice((me||0)*(ue||25),((me||0)+1)*(ue||25));return!Fe||Fe.length===0?!1:Fe.every(je=>Ft.includes(je.id))},[_e,me,ue,Ft]),Wt=u.useCallback((Fe,je)=>{Et(je?Oe=>[...Oe,Fe]:Oe=>Oe.filter(ke=>ke!==Fe))},[]),kt=u.useCallback(Fe=>{if(!(!_e||_e.length===0))if(Fe){const je=_e.slice((me||0)*(ue||25),((me||0)+1)*(ue||25)).map(Oe=>Oe.id);Et(Oe=>{const ke=[...Oe];return je.forEach(bt=>{ke.includes(bt)||ke.push(bt)}),ke})}else{const je=_e.slice((me||0)*(ue||25),((me||0)+1)*(ue||25)).map(Oe=>Oe.id);Et(Oe=>Oe.filter(ke=>!je.includes(ke)))}},[_e,me,ue]),[Mt,Ht]=u.useState({key:null,direction:null}),qt=u.useCallback((Fe,je)=>{Ht({key:Fe,direction:je})},[]);u.useMemo(()=>[{label:"선택 삭제",variant:"outlined",color:"error",disabled:Ft.length===0,onClick:()=>{window.confirm(`선택된 ${Ft.length}개의 문의를 삭제하시겠습니까?`)&&(setLocalMessagesData(Fe=>Fe.filter(je=>!Ft.includes(je.id))),Et([]))}}],[Ft]);const Yt=()=>{if(h)return a(rt,{sx:{p:3,mb:3},children:m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[a(ir,{}),a(M,{sx:{ml:2},children:"데이터를 불러오는 중..."})]})});if(f)return m(rt,{sx:{p:3,mb:3},children:[m(Jt,{severity:"error",sx:{mb:2},children:["데이터를 불러오는 중 오류가 발생했습니다: ",f]}),a(Se,{variant:"contained",onClick:()=>w(),startIcon:a(Gf,{}),children:"다시 시도"})]});const Fe=c||[];return m(rt,{sx:{p:3,mb:3},children:[a(gn,{title:"전체 문의",totalItems:Fe.length,countLabel:"총 ##count##건의 문의",sequentialPageNumbers:Z,togglePageNumberMode:ie,hasPinnedColumns:ht,isGridReady:jt,toggleColumnPin:Ut,searchText:ce,handleSearchChange:De,handleClearSearch:le,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"문의 검색...",sx:{mb:2}}),a(Fi,{autoHeight:P,tableHeight:b,toggleAutoHeight:k,setManualHeight:C}),a(Vn,{filterProps:{activeFilters:J,handleFilterChange:(je,Oe)=>{const ke={...J,[je]:Oe};se(ke)},filterOptions:[{id:"direction",label:"유형",items:[{value:"",label:"전체"},{value:"received",label:"받은"},{value:"sent",label:"보낸"}]},...He],showDateFilter:!1},paginationProps:{count:Fe.length||0,page:me||0,rowsPerPage:ue||25,onPageChange:Ae,onRowsPerPageChange:we}}),m(j,{ref:v,sx:{position:"relative"},children:[a(An,{data:Fe.slice((me||0)*(ue||25),((me||0)+1)*(ue||25)).map(Oe=>{const ke={...Oe};return ke.status&&typeof ke.status=="object"&&(ke.statusLabel=ke.status.label,ke.statusColor=ke.status.color,ke.statusVariant=ke.status.variant,ke.status=ke.status.label),ke.directionInfo&&(ke.directionLabel=ke.directionInfo.label,ke.directionColor=ke.directionInfo.color),ke.memberType&&typeof ke.memberType=="object"&&(ke.memberTypeLabel=ke.memberType.label,ke.memberTypeColor=ke.memberType.color,ke.memberType=ke.memberType.label),ke.inquiryType&&typeof ke.inquiryType=="object"&&(ke.inquiryTypeLabel=ke.inquiryType.label,ke.inquiryTypeColor=ke.inquiryType.color,ke.inquiryType=ke.inquiryType.label),ke}),columns:[...Bt.slice(0,2),{id:"direction",label:"유형",width:80,type:"chip",render:Oe=>({label:Oe.directionLabel||"받은",color:Oe.directionColor||"secondary",variant:"outlined"})},...Bt.slice(2)],checkable:!0,checkedItems:Ot,allChecked:zt,onCheck:Wt,onToggleAll:kt,sortConfig:Mt,onSort:qt,onRowClick:Kt,page:me||0,rowsPerPage:ue||25,totalCount:Fe.length||0,sequentialPageNumbers:Z||!1,tableHeaderRef:T,headerStyle:I(),fixedHeader:!0,maxHeight:b,draggableColumns:!0,onColumnOrderChange:Tt,dragHandlers:ft,dragInfo:St,pinnedColumns:gt}),a(rr,{resizeHandleProps:_(parseFloat(b)),isDragging:S})]})]})},Xt=()=>d?a(rt,{sx:{p:3,mb:3},children:m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[a(ir,{}),a(M,{sx:{ml:2},children:"데이터를 불러오는 중..."})]})}):f?m(rt,{sx:{p:3,mb:3},children:[m(Jt,{severity:"error",sx:{mb:2},children:["데이터를 불러오는 중 오류가 발생했습니다: ",f]}),a(Se,{variant:"contained",onClick:()=>g(),startIcon:a(Gf,{}),children:"다시 시도"})]}):m(rt,{sx:{p:3,mb:3},children:[a(gn,{title:"받은 문의",totalItems:Re,countLabel:"총 ##count##건의 문의",sequentialPageNumbers:Z,togglePageNumberMode:ie,hasPinnedColumns:ht,isGridReady:jt,toggleColumnPin:Ut,searchText:ce,handleSearchChange:De,handleClearSearch:le,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"문의 검색...",sx:{mb:2}}),a(Fi,{autoHeight:P,tableHeight:b,toggleAutoHeight:k,setManualHeight:C}),a(Vn,{filterProps:{activeFilters:J,handleFilterChange:(Fe,je)=>{const Oe={...J,[Fe]:je};se(Oe)},filterOptions:He,showDateFilter:!1},paginationProps:{count:Re||0,page:me||0,rowsPerPage:ue||25,onPageChange:Ae,onRowsPerPageChange:we}}),m(j,{ref:v,sx:{position:"relative"},children:[a(An,{data:_e.slice((me||0)*(ue||25),((me||0)+1)*(ue||25)).map(je=>{const Oe={...je};return Oe.status&&typeof Oe.status=="object"&&(Oe.statusLabel=Oe.status.label,Oe.statusColor=Oe.status.color,Oe.statusVariant=Oe.status.variant,Oe.status=Oe.status.label),Oe.memberType&&typeof Oe.memberType=="object"&&(Oe.memberTypeLabel=Oe.memberType.label,Oe.memberTypeColor=Oe.memberType.color,Oe.memberType=Oe.memberType.label),Oe.inquiryType&&typeof Oe.inquiryType=="object"&&(Oe.inquiryTypeLabel=Oe.inquiryType.label,Oe.inquiryTypeColor=Oe.inquiryType.color,Oe.inquiryType=Oe.inquiryType.label),Oe}),columns:Bt||[],checkable:!0,checkedItems:Ot,allChecked:zt,onCheck:Wt,onToggleAll:kt,sortConfig:Mt,onSort:qt,onRowClick:Kt,page:me||0,rowsPerPage:ue||25,totalCount:Re||0,sequentialPageNumbers:Z||!1,tableHeaderRef:T,headerStyle:I(),fixedHeader:!0,maxHeight:b,draggableColumns:!0,onColumnOrderChange:Tt,dragHandlers:ft,dragInfo:St,pinnedColumns:gt}),a(rr,{resizeHandleProps:_(parseFloat(b)),isDragging:S})]})]});return m(vn,{children:[a(Cn,{title:"문의관리",onDisplayOptionsClick:z,onRefresh:s,showDisplayOptionsButton:!0,showRefreshButton:!0,showAddButton:!1,titleTabs:m(La,{value:t,onChange:o,sx:{minHeight:"auto","& .MuiTabs-indicator":{backgroundColor:"#1976d2"},"& .MuiTab-root":{minHeight:"auto",padding:"6px 16px",fontSize:"14px",fontWeight:500,color:"#666","&.Mui-selected":{color:"#1976d2"}}},children:[a(_n,{label:"전체문의"}),a(_n,{label:"받은문의"}),a(_n,{label:"보낸문의"}),a(_n,{label:"문의보내기"})]})}),a(or,{anchorEl:O,open:E,onClose:q,toggleableColumns:$,columnVisibility:B,onToggleColumn:A,onShowAll:F,onReset:D,hiddenColumnsCount:N,menuWidth:"350px"}),t===0&&Yt(),t===1&&Xt(),t===2&&a(jle,{}),t===3&&a(Fle,{}),a(Ile,{open:ee,onClose:()=>ge(!1),message:H,onStatusChange:U,onReply:y}),a(Bi,{open:Q,onClose:()=>te(!1),member:oe})]})},Nle=({open:e,onClose:t,template:n,onSave:r,mode:i="view"})=>{const[o,s]=u.useState(i==="edit"||i==="create"),[l,c]=u.useState({title:"",category:"",content:"",status:"활성",description:"",tags:[]}),[d,h]=u.useState({});u.useEffect(()=>{n?c({title:n.title||"",category:n.category||"",content:n.content||"",status:n.status||"활성",description:n.description||"",tags:n.tags||[]}):i==="create"&&c({title:"",category:"일반문의",content:"",status:"활성",description:"",tags:[]}),h({})},[n,i]),u.useEffect(()=>{s(i==="edit"||i==="create")},[i]);const f=u.useCallback(()=>{s(!o),o&&(n&&c({title:n.title||"",category:n.category||"",content:n.content||"",status:n.status||"활성",description:n.description||"",tags:n.tags||[]}),h({}))},[o,n]),g=u.useCallback((k,C)=>{c(S=>({...S,[k]:C})),d[k]&&h(S=>({...S,[k]:null}))},[d]),w=u.useCallback(()=>{const k={};return l.title.trim()||(k.title="템플릿명을 입력해주세요."),l.category||(k.category="카테고리를 선택해주세요."),l.content.trim()||(k.content="템플릿 내용을 입력해주세요."),h(k),Object.keys(k).length===0},[l]),x=u.useCallback(()=>{if(!w())return;const k={...l,id:(n==null?void 0:n.id)||Date.now(),updatedAt:new Date().toISOString().split("T")[0],createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString().split("T")[0],usageCount:(n==null?void 0:n.usageCount)||0};r==null||r(k),s(!1)},[l,n,r,w]),y=u.useCallback(()=>{s(i==="edit"||i==="create"),h({}),t()},[t,i]),p=k=>{switch(k){case"활성":return"success";case"비활성":return"error";case"임시저장":return"warning";default:return"default"}},v=["일반문의","계정문의","결제문의","기술지원","신고접수","기타"],b=i==="create";return m(Yn,{open:e,onClose:y,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"700px"}},children:[m(Zn,{sx:{m:0,p:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(M,{variant:"h6",component:"div",children:b?"새 템플릿 생성":o?"템플릿 편집":"템플릿 상세 정보"}),m(j,{sx:{display:"flex",gap:1},children:[!b&&!o&&a(Ct,{"aria-label":"edit",onClick:f,sx:{color:"primary.main"},children:a(Kf,{})}),a(Ct,{"aria-label":"close",onClick:y,sx:{color:"grey.500"},children:a(Sa,{})})]})]}),a(Kn,{dividers:!0,sx:{p:3},children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2,mb:2},children:[a(M,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"기본 정보"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:8,children:a($e,{fullWidth:!0,label:"템플릿명",value:l.title,onChange:k=>g("title",k.target.value),disabled:!o,error:!!d.title,helperText:d.title,variant:o?"outlined":"standard",InputProps:{readOnly:!o}})}),a(W,{item:!0,xs:12,sm:4,children:m(Zt,{fullWidth:!0,disabled:!o,error:!!d.category,children:[a(hn,{children:"카테고리"}),a(an,{value:l.category,onChange:k=>g("category",k.target.value),label:"카테고리",variant:o?"outlined":"standard",children:v.map(k=>a(Me,{value:k,children:k},k))})]})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,disabled:!o,children:[a(hn,{children:"상태"}),m(an,{value:l.status,onChange:k=>g("status",k.target.value),label:"상태",variant:o?"outlined":"standard",children:[a(Me,{value:"활성",children:"활성"}),a(Me,{value:"비활성",children:"비활성"}),a(Me,{value:"임시저장",children:"임시저장"})]})]})}),!b&&a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"사용 횟수",value:(n==null?void 0:n.usageCount)||0,disabled:!0,variant:"standard"})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"설명",value:l.description,onChange:k=>g("description",k.target.value),disabled:!o,multiline:!0,rows:2,variant:o?"outlined":"standard",InputProps:{readOnly:!o}})})]})]})}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2},children:[a(M,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"템플릿 내용"}),a($e,{fullWidth:!0,label:"내용",value:l.content,onChange:k=>g("content",k.target.value),disabled:!o,error:!!d.content,helperText:d.content||"고객에게 전송될 메시지 내용을 입력하세요.",multiline:!0,rows:8,variant:o?"outlined":"standard",InputProps:{readOnly:!o}})]})}),!b&&!o&&a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2},children:[a(M,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold",mb:2},children:"메타 정보"}),m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"생성일"}),a(M,{variant:"body1",children:(n==null?void 0:n.createdAt)||"-"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"수정일"}),a(M,{variant:"body1",children:(n==null?void 0:n.updatedAt)||"-"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"현재 상태"}),a(ut,{label:(n==null?void 0:n.status)||"활성",color:p(n==null?void 0:n.status),size:"small",variant:"outlined"})]}),m(W,{item:!0,xs:12,sm:6,children:[a(M,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"사용 횟수"}),m(M,{variant:"body1",children:[(n==null?void 0:n.usageCount)||0,"회"]})]})]})]})}),Object.keys(d).length>0&&a(W,{item:!0,xs:12,children:a(Jt,{severity:"error",children:"입력 정보를 확인해주세요."})})]})}),a(nr,{sx:{p:2,gap:1},children:o?m(bn,{children:[a(Se,{onClick:f,color:"inherit",children:"취소"}),a(Se,{onClick:x,variant:"contained",startIcon:a(qo,{}),children:"저장"})]}):m(bn,{children:[a(Se,{onClick:y,color:"inherit",children:"닫기"}),!b&&a(Se,{onClick:f,variant:"contained",startIcon:a(Kf,{}),children:"편집"})]})})]})},Ble=[{value:"all",label:"전체"},{value:"일반문의",label:"일반문의"},{value:"계정문의",label:"계정문의"},{value:"결제문의",label:"결제문의"},{value:"기술지원",label:"기술지원"},{value:"불만사항",label:"불만사항"},{value:"건의사항",label:"건의사항"},{value:"환불요청",label:"환불요청"},{value:"공지사항",label:"공지사항"},{value:"기타",label:"기타"}],Hle=[{value:"all",label:"전체"},{value:"활성",label:"활성"},{value:"비활성",label:"비활성"}],JD=[{id:"checkbox",label:"",type:"checkbox",width:50,sortable:!1,visible:!0,pinnable:!1},{id:"no",label:"No.",type:"number",width:80,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"title",label:"템플릿명",type:"clickable",width:250,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"category",label:"카테고리",type:"text",width:120,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"status",label:"상태",type:"chip",width:100,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"usageCount",label:"사용횟수",type:"number",width:100,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"createdAt",label:"생성일",type:"date",width:120,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"updatedAt",label:"수정일",type:"date",width:120,sortable:!0,visible:!0,align:"center",pinnable:!0},{id:"actions",label:"액션",type:"actions",width:150,sortable:!1,visible:!0,align:"center",pinnable:!1}],QD=()=>[{id:1,no:1,title:"환영 메시지",category:"일반문의",status:"활성",content:"안녕하세요! 문의해 주셔서 감사합니다. 빠른 시일 내에 답변드리겠습니다.",description:"고객 문의 시 첫 응답으로 사용하는 환영 메시지 템플릿",usageCount:45,createdAt:"2024-01-15",updatedAt:"2024-01-20"},{id:2,no:2,title:"계정 잠금 해제 안내",category:"계정문의",status:"활성",content:"계정 잠금 해제를 위해 본인 확인 절차가 필요합니다. 신분증을 첨부하여 문의해 주세요.",description:"계정 잠금 시 해제 절차를 안내하는 템플릿",usageCount:23,createdAt:"2024-01-16",updatedAt:"2024-01-22"},{id:3,no:3,title:"결제 오류 처리 방법",category:"결제문의",status:"활성",content:"결제 오류가 발생한 경우, 거래 내역을 확인하여 중복 결제 여부를 점검해 드리겠습니다.",description:"결제 관련 오류 발생 시 처리 방법을 안내하는 템플릿",usageCount:18,createdAt:"2024-01-17",updatedAt:"2024-01-23"},{id:4,no:4,title:"기술 지원 요청",category:"기술지원",status:"활성",content:"기술적인 문제가 발생하셨군요. 상세한 오류 내용과 스크린샷을 첨부해 주시면 빠르게 해결해 드리겠습니다.",description:"기술적 문제 해결을 위한 추가 정보 요청 템플릿",usageCount:31,createdAt:"2024-01-18",updatedAt:"2024-01-24"},{id:5,no:5,title:"환불 처리 안내",category:"환불요청",status:"활성",content:"환불 요청을 접수하였습니다. 환불 정책에 따라 3-5일 내에 처리해 드리겠습니다.",description:"환불 요청 접수 확인 및 처리 일정 안내 템플릿",usageCount:12,createdAt:"2024-01-19",updatedAt:"2024-01-25"},{id:6,no:6,title:"서비스 점검 안내",category:"공지사항",status:"비활성",content:"시스템 점검으로 인해 일시적으로 서비스 이용이 제한될 수 있습니다.",description:"정기 점검 시 고객에게 안내하는 템플릿",usageCount:8,createdAt:"2024-01-20",updatedAt:"2024-01-26"},{id:7,no:7,title:"불만사항 접수 확인",category:"불만사항",status:"활성",content:"불편을 끼쳐드려 죄송합니다. 담당자가 확인 후 개선 방안을 마련하여 연락드리겠습니다.",description:"고객 불만사항 접수 시 사용하는 사과 및 처리 안내 템플릿",usageCount:7,createdAt:"2024-01-21",updatedAt:"2024-01-27"},{id:8,no:8,title:"건의사항 감사 인사",category:"건의사항",status:"활성",content:"소중한 의견을 주셔서 감사합니다. 서비스 개선에 적극 반영하도록 하겠습니다.",description:"고객 건의사항에 대한 감사 인사 템플릿",usageCount:15,createdAt:"2024-01-22",updatedAt:"2024-01-28"},{id:9,no:9,title:"임시 비활성 템플릿",category:"기타",status:"비활성",content:"임시로 비활성화된 템플릿입니다.",description:"테스트용 임시 템플릿",usageCount:0,createdAt:"2024-01-23",updatedAt:"2024-01-29"},{id:10,no:10,title:"일반 문의 응답",category:"일반문의",status:"활성",content:"문의사항을 확인하였습니다. 관련 부서에서 검토 후 답변드리겠습니다.",description:"일반적인 문의에 대한 기본 응답 템플릿",usageCount:52,createdAt:"2024-01-24",updatedAt:"2024-01-30"}],Wle=[{key:"category",type:"select",label:"카테고리",options:Ble},{key:"status",type:"select",label:"상태",options:Hle}],qle=()=>{On();const{handleRefresh:e}=$a(),t=u.useCallback(()=>{e("템플릿관리")},[e]),{data:n}=Za({pageType:"templates",dataGenerator:QD,requiresMembersData:!1}),[r,i]=u.useState([]),o=u.useMemo(()=>!n||n.length===0?QD():n,[n]);u.useEffect(()=>{o.length,i(o)},[o]),u.useEffect(()=>{r.length,r.length>0&&r[0]},[r]);const[s,l]=u.useState(null),[c,d]=u.useState(!1),[h,f]=u.useState("view"),g=u.useMemo(()=>!s||!r?s:r.find(J=>J.id===s.id)||s,[s,r]),{visibleColumns:w,toggleColumnVisibility:x,resetToDefault:y,columnVisibility:p}=dr(JD||[],{}),{containerRef:v,tableHeight:b,autoHeight:P,toggleAutoHeight:k,setManualHeight:C}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:S,getResizeHandleProps:_}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:se=>{P&&k(!1),C(`${se}px`)}}),{tableHeaderRef:T,getTableHeaderStyles:I}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),L=u.useCallback(se=>{l(se),f("view"),d(!0)},[]),A=u.useCallback(()=>{l(null),f("create"),d(!0)},[]),D=u.useCallback(se=>{l(se),f("edit"),d(!0)},[]),B=u.useCallback(se=>{window.confirm(`"${se.title}" 템플릿을 삭제하시겠습니까?`)&&i(J=>{const Z=J.filter(ie=>ie.id!==se.id);return`${se.id}`,Z})},[]);u.useCallback((se,J)=>{i(Z=>Z.map(ie=>ie.id===se?{...ie,status:J,updatedAt:new Date().toISOString().split("T")[0]}:ie))},[]);const $=u.useCallback(se=>{i(J=>{const Z=J.findIndex(ie=>ie.id===se.id);if(Z>=0){const ie=[...J];return ie[Z]={...ie[Z],...se,no:ie[Z].no},se.id,ie}else{const ie={...se,no:J.length+1,id:se.id||Date.now()};return ie.id,[...J,ie]}}),d(!1)},[]),N=u.useMemo(()=>w.map(se=>se.type==="clickable"&&se.id==="title"?{...se,clickable:!0,onClick:L}:se.type==="actions"&&se.id==="actions"?{...se,actions:[{type:"button",label:"수정",variant:"outlined",size:"small",color:"primary",onClick:D},{type:"button",label:"삭제",variant:"outlined",size:"small",color:"error",onClick:B}]}:se.type==="chip"&&se.id==="status"?{...se,render:J=>{const Z=typeof J=="object"?J.status:J;return{label:Z,color:Z==="활성"?"success":"default"}}}:se.id==="usageCount"?{...se,render:J=>`${J}회`}:se),[w,L,D,B]),[F,O]=u.useState({}),[R,E]=u.useState(0),[z,q]=u.useState(10),[X,H]=u.useState([]),K=u.useMemo(()=>r.filter(se=>!(F.category&&F.category!=="all"&&se.category!==F.category||F.status&&F.status!=="all"&&se.status!==F.status)),[r,F]),ee=u.useMemo(()=>{const se=R*z;return K.slice(se,se+z)},[K,R,z]),ge=K.length;u.useCallback(se=>{O(se),E(0)},[]);const oe=u.useCallback(se=>{E(se)},[]),G=u.useCallback(se=>{const J=parseInt(se.target.value,10);q(J),E(0)},[]);u.useCallback(()=>{O({}),E(0)},[]);const[Q,te]=u.useState(!1),U=u.useMemo(()=>[{label:"새 템플릿",variant:"contained",color:"primary",onClick:A},{label:"선택 삭제",variant:"outlined",color:"error",disabled:X.length===0,onClick:()=>{}}],[X,A]),V=u.useMemo(()=>{const se={};return X.forEach(J=>{se[J]=!0}),se},[X]),ae=u.useMemo(()=>ee.length>0&&ee.every(se=>X.includes(se.id)),[ee,X]),ne=u.useCallback((se,J,Z)=>{H(J?ie=>[...ie,se]:ie=>ie.filter(_e=>_e!==se))},[]),me=u.useCallback(se=>{if(se){const J=ee.map(Z=>Z.id);H(Z=>{const ie=[...Z];return J.forEach(_e=>{ie.includes(_e)||ie.push(_e)}),ie})}else{const J=ee.map(Z=>Z.id);H(Z=>Z.filter(ie=>!J.includes(ie)))}},[ee]),[ue,Ae]=u.useState({key:null,direction:null}),we=u.useCallback((se,J)=>{Ae({key:se,direction:J}),J&&i(Z=>[...Z].sort((_e,Re)=>{const He=_e[se],ft=Re[se];return He===ft?0:J==="asc"?He>ft?1:-1:He<ft?1:-1}))},[]),{dragHandlers:ce,dragInfo:De,handleColumnOrderChange:le}=sr({initialColumns:N,tableId:"templates-page",enableColumnPinning:!0});return m(vn,{children:[a(Cn,{title:"템플릿 관리",subtitle:"자동응답 템플릿을 관리할 수 있습니다.",onAddClick:A,onDisplayOptionsClick:se=>{te(!0)},onRefresh:t,addButtonText:"템플릿 추가",showAddButton:!0,showDisplayOptionsButton:!0,showRefreshButton:!0}),m(rt,{sx:{p:3,mb:3},children:[a(gn,{title:"템플릿 목록",subtitle:`총 ${ge}개의 템플릿`,actionButtons:U,onColumnSettings:()=>te(!0)}),a(Fi,{autoHeight:P,tableHeight:b,toggleAutoHeight:k,setManualHeight:C}),a(Vn,{filterProps:{activeFilters:F,handleFilterChange:(se,J)=>{O(Z=>({...Z,[se]:J})),E(0)},filterOptions:Wle.map(se=>({id:se.key,label:se.label,items:se.options})),showDateFilter:!1},paginationProps:{page:R,rowsPerPage:z,count:ge,onPageChange:oe,onRowsPerPageChange:G}}),m(j,{ref:v,sx:{position:"relative"},children:[a(An,{data:ee,columns:N,checkable:!0,checkedItems:V,allChecked:ae,onCheck:ne,onToggleAll:me,sortConfig:ue,onSort:we,onRowClick:L,page:R,rowsPerPage:z,totalCount:ge,sequentialPageNumbers:!0,tableHeaderRef:T,headerStyle:I(),fixedHeader:!1,maxHeight:b,draggableColumns:!0,onColumnOrderChange:le,dragHandlers:ce,dragInfo:De}),a(rr,{resizeHandleProps:_(parseFloat(b)),isDragging:S})]})]}),a(or,{open:Q,onClose:()=>te(!1),columns:JD,visibleColumns:p,onToggleColumn:x,onReset:y}),a(Nle,{open:c,onClose:()=>d(!1),template:g,onSave:$,mode:h})]})};var hu={},ZD;function Ule(){if(ZD)return hu;ZD=1;var e=ln();Object.defineProperty(hu,"__esModule",{value:!0}),hu.default=void 0;var t=e(un()),n=cn();return hu.default=(0,t.default)((0,n.jsx)("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42M10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5"}),"FormatBold"),hu}var Vle=Ule();const Gle=vt(Vle);var fu={},eR;function Kle(){if(eR)return fu;eR=1;var e=ln();Object.defineProperty(fu,"__esModule",{value:!0}),fu.default=void 0;var t=e(un()),n=cn();return fu.default=(0,t.default)((0,n.jsx)("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}),"FormatItalic"),fu}var Yle=Kle();const Xle=vt(Yle);var pu={},tR;function Jle(){if(tR)return pu;tR=1;var e=ln();Object.defineProperty(pu,"__esModule",{value:!0}),pu.default=void 0;var t=e(un()),n=cn();return pu.default=(0,t.default)((0,n.jsx)("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6m-7 2v2h14v-2z"}),"FormatUnderlined"),pu}var Qle=Jle();const Zle=vt(Qle);var gu={},nR;function ece(){if(nR)return gu;nR=1;var e=ln();Object.defineProperty(gu,"__esModule",{value:!0}),gu.default=void 0;var t=e(un()),n=cn();return gu.default=(0,t.default)((0,n.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted"),gu}var tce=ece();const nce=vt(tce);var mu={},rR;function rce(){if(rR)return mu;rR=1;var e=ln();Object.defineProperty(mu,"__esModule",{value:!0}),mu.default=void 0;var t=e(un()),n=cn();return mu.default=(0,t.default)((0,n.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered"),mu}var ace=rce();const ice=vt(ace);var yu={},aR;function oce(){if(aR)return yu;aR=1;var e=ln();Object.defineProperty(yu,"__esModule",{value:!0}),yu.default=void 0;var t=e(un()),n=cn();return yu.default=(0,t.default)((0,n.jsx)("path",{d:"M2 20h20v4H2zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5zm4.42-5.61 2.03-5.79h.12l2.03 5.79z"}),"FormatColorText"),yu}var sce=oce();const lce=vt(sce);var bu={},iR;function cce(){if(iR)return bu;iR=1;var e=ln();Object.defineProperty(bu,"__esModule",{value:!0}),bu.default=void 0;var t=e(un()),n=cn();return bu.default=(0,t.default)((0,n.jsx)("path",{d:"M16.56 8.94 7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12M5.21 10 10 5.21 14.79 10zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5M2 20h20v4H2z"}),"FormatColorFill"),bu}var uce=cce();const dce=vt(uce);var vu={},oR;function hce(){if(oR)return vu;oR=1;var e=ln();Object.defineProperty(vu,"__esModule",{value:!0}),vu.default=void 0;var t=e(un()),n=cn();return vu.default=(0,t.default)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),vu}var fce=hce();const pce=vt(fce);var xu={},sR;function gce(){if(sR)return xu;sR=1;var e=ln();Object.defineProperty(xu,"__esModule",{value:!0}),xu.default=void 0;var t=e(un()),n=cn();return xu.default=(0,t.default)((0,n.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),xu}var mce=gce();const yce=vt(mce);var wu={},lR;function bce(){if(lR)return wu;lR=1;var e=ln();Object.defineProperty(wu,"__esModule",{value:!0}),wu.default=void 0;var t=e(un()),n=cn();return wu.default=(0,t.default)((0,n.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"InsertPhoto"),wu}var vce=bce();const xce=vt(vce),zs=Ce.memo(({value:e,onChange:t,label:n="내용",height:r=300,required:i=!1,placeholder:o="내용을 입력해주세요...",onImageInsert:s})=>{const[l,c]=u.useState(e||""),[d,h]=u.useState("editor"),[f,g]=u.useState(null),[w,x]=u.useState(null),[y,p]=u.useState("medium"),v=u.useRef(null);u.useRef(null);const b=["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#FF0000","#FF9900","#FFFF00","#00FF00","#00FFFF","#0000FF","#9900FF","#FF00FF","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43"],P=[{value:"small",label:"소 (12px)",size:"12px"},{value:"medium",label:"중 (16px)",size:"16px"},{value:"large",label:"대 (20px)",size:"20px"},{value:"x-large",label:"특대 (24px)",size:"24px"}];u.useEffect(()=>{v.current&&e!==void 0&&v.current.innerHTML!==e&&(v.current.innerHTML=e,c(e))},[e]);const k=u.useCallback(()=>{if(v.current){const A=v.current.innerHTML;c(A),t&&t(A)}},[t]),C=u.useCallback((A,D=null)=>{d==="editor"&&(document.execCommand(A,!1,D),k(),v.current&&v.current.focus())},[d,k]),S=A=>{switch(A){case"bold":C("bold");break;case"italic":C("italic");break;case"underline":C("underline");break;case"bullet":C("insertUnorderedList");break;case"number":C("insertOrderedList");break}},_=A=>{const D=A.target.value;p(D),C("fontSize",{small:"1",medium:"3",large:"5","x-large":"7"}[D])},T=A=>{C("foreColor",A),g(null)},I=A=>{C("hiliteColor",A),x(null)},L=()=>{s&&s()};return m(j,{sx:{mb:2,mt:2},children:[n&&m(M,{variant:"body1",sx:{mb:1,fontWeight:i?"bold":"normal"},children:[n," ",i&&a(j,{component:"span",sx:{color:"error.main"},children:"*"})]}),m(rt,{elevation:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:[m(j,{sx:{p:1,borderBottom:"1px solid",borderColor:"divider",backgroundColor:"grey.50",display:"flex",flexWrap:"wrap",gap:1,alignItems:"center"},children:[m(cl,{size:"small",children:[a(_i,{value:"bold",onClick:()=>S("bold"),title:"굵게 (Ctrl+B)",children:a(Gle,{fontSize:"small"})}),a(_i,{value:"italic",onClick:()=>S("italic"),title:"기울임 (Ctrl+I)",children:a(Xle,{fontSize:"small"})}),a(_i,{value:"underline",onClick:()=>S("underline"),title:"밑줄 (Ctrl+U)",children:a(Zle,{fontSize:"small"})})]}),a(yn,{orientation:"vertical",flexItem:!0}),m(cl,{size:"small",children:[a(_i,{value:"bullet",onClick:()=>S("bullet"),title:"글머리 기호",children:a(nce,{fontSize:"small"})}),a(_i,{value:"number",onClick:()=>S("number"),title:"번호 매기기",children:a(ice,{fontSize:"small"})})]}),a(yn,{orientation:"vertical",flexItem:!0}),a(Zt,{size:"small",sx:{minWidth:100},children:a(an,{value:y,onChange:_,displayEmpty:!0,variant:"outlined",disabled:d!=="editor",children:P.map(A=>a(Me,{value:A.value,children:A.label},A.value))})}),a(Ct,{size:"small",onClick:A=>g(A.currentTarget),title:"텍스트 색상",disabled:d!=="editor",children:a(lce,{fontSize:"small"})}),a(Ct,{size:"small",onClick:A=>x(A.currentTarget),title:"배경색",disabled:d!=="editor",children:a(dce,{fontSize:"small"})}),s&&a(Ct,{size:"small",onClick:L,title:"이미지 삽입",disabled:d!=="editor",children:a(xce,{fontSize:"small"})}),a(yn,{orientation:"vertical",flexItem:!0}),m(cl,{size:"small",value:d,exclusive:!0,onChange:(A,D)=>{D!==null&&h(D)},children:[a(_i,{value:"editor",title:"편집 모드",children:a(yce,{fontSize:"small"})}),a(_i,{value:"preview",title:"미리보기 모드",children:a(pce,{fontSize:"small"})})]})]}),d==="editor"?a(j,{ref:v,contentEditable:!0,suppressContentEditableWarning:!0,onInput:k,onBlur:k,sx:{padding:"16px",minHeight:r,maxHeight:r,overflowY:"auto",fontSize:"16px",lineHeight:"1.6",fontFamily:'"Noto Sans KR", "Roboto", sans-serif',border:"none",outline:"none","&:empty:before":{content:`"${o}"`,color:"text.secondary",fontStyle:"italic"},"& img":{width:"100%",height:"auto",display:"block",margin:"0"}}}):a(j,{sx:{padding:"16px",minHeight:r,maxHeight:r,overflowY:"auto",fontSize:"16px",lineHeight:"1.6",fontFamily:'"Noto Sans KR", "Roboto", sans-serif',backgroundColor:"grey.50","& img":{width:"100%",height:"auto",display:"block",margin:"0"}},dangerouslySetInnerHTML:{__html:l||`<p style="color: #999; font-style: italic;">${o}</p>`}})]}),a(qf,{open:!!f,anchorEl:f,onClose:()=>g(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:a(j,{sx:{p:2,display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:1,width:200},children:b.map(A=>a(j,{sx:{width:24,height:24,backgroundColor:A,border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>T(A),title:A},A))})}),a(qf,{open:!!w,anchorEl:w,onClose:()=>x(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:m(j,{sx:{p:2,display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:1,width:200},children:[a(j,{sx:{width:24,height:24,background:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"4px 4px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>I("transparent"),title:"투명"}),b.map(A=>a(j,{sx:{width:24,height:24,backgroundColor:A,border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer","&:hover":{transform:"scale(1.1)"}},onClick:()=>I(A),title:A},A))]})}),a(M,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"* 텍스트를 선택한 후 툴바 버튼을 클릭하여 서식을 적용할 수 있습니다. 미리보기 모드에서 실제 팝업 표시 결과를 확인할 수 있습니다."})]})});zs.displayName="SimpleRichTextEditor";const wce=6,Cce=[{id:"no",label:"No.",width:70,align:"center",type:"number"},{id:"title",label:"제목",width:300,align:"left",type:"clickable",sortable:!0},{id:"writer",label:"작성자",width:150,align:"center",type:"multiline",sortable:!0},{id:"importance",label:"중요도",width:100,align:"center",type:"chip",sortable:!0,render:e=>{const n={high:{label:"중요",color:"error"},medium:{label:"보통",color:"warning"},low:{label:"일반",color:"success"}}[e.importance];return n?{label:n.label,color:n.color,variant:"outlined"}:{label:e.importance||"미정",color:"default",variant:"outlined"}}},{id:"status",label:"상태",width:100,align:"center",type:"chip",sortable:!0,render:e=>{const n={active:{label:"게시중",color:"success"},inactive:{label:"미게시",color:"default"},scheduled:{label:"예약",color:"info"}}[e.status];return n?{label:n.label,color:n.color,variant:"outlined"}:{label:e.status||"미정",color:"default",variant:"outlined"}}},{id:"pinned",label:"상단고정",width:100,align:"center",type:"chip",sortable:!0,render:e=>e.pinned?{label:"고정",color:"warning",variant:"outlined"}:{label:"일반",color:"default",variant:"outlined"}},{id:"target",label:"대상",width:120,align:"center",type:"text",sortable:!0},{id:"viewCount",label:"조회수",width:100,align:"right",type:"number",sortable:!0},{id:"createdAt",label:"작성일",width:120,align:"center",type:"date",sortable:!0},{id:"updatedAt",label:"수정일",width:120,align:"center",type:"date",sortable:!0},{id:"actions",label:"관리",width:250,align:"center",type:"actions",actions:["edit","delete"]}],cR=wce,Y0=[{value:"all",label:"전체"},{value:"member",label:"회원"},{value:"agent",label:"에이전트"}],X0=[{value:"urgent",label:"긴급"},{value:"important",label:"중요"},{value:"normal",label:"일반"}],Sce=[{value:"1",label:"활성"},{value:"0",label:"비활성"}],Pce=()=>{var at,We;const[e,t]=u.useState([]),[n,r]=u.useState(!1),[i,o]=u.useState(null),[s,l]=u.useState(!1),[c,d]=u.useState(!1),[h,f]=u.useState("create"),[g,w]=u.useState({title:"",content:"",target_type:"all",priority:"normal",pinned:!1,start_time:null,end_time:null}),[x,y]=u.useState({open:!1,message:"",severity:"success"}),p=u.useCallback((xe,qe="success")=>{y({open:!0,message:xe,severity:qe})},[]),v=()=>{y(xe=>({...xe,open:!1}))},b=u.useCallback(async()=>{r(!0);try{const xe=await Pe.notices.getAll({include_expired:!0});if(xe.data.success){xe.data.data,xe.data.data[0];const qe=xe.data.data.map((Ee,Y)=>{const he=Ee.created_by_username&&Ee.created_by_nickname?`${Ee.created_by_username}
${Ee.created_by_nickname}`:Ee.created_by_username||Ee.created_by||`admin
관리자`;return{...Ee,no:Y+1,writer:he,viewCount:Ee.view_count,createdAt:Ee.created_at,updatedAt:Ee.updated_at}});t(qe)}}catch(xe){console.error("공지사항 조회 오류:",xe),p("공지사항을 불러오는데 실패했습니다.","error"),t([])}finally{r(!1)}},[p]);u.useEffect(()=>{b()},[b]);const{containerRef:P,tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:T,getResizeHandleProps:I}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:xe=>{C&&S(!1),_(`${xe}px`)}}),{tableHeaderRef:L,getTableHeaderStyles:A}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),D=u.useCallback(()=>{p("공지사항을 엑셀로 다운로드합니다.","info")},[]),B=u.useCallback(()=>{p("공지사항을 인쇄합니다.","info")},[]),[$,N]=u.useState(0),[F,O]=u.useState(10),{checkedItems:R,sortConfig:E,expandedRows:z,allChecked:q,handleSort:X,handleCheck:H,handleToggleAll:K,handleToggleExpand:ee}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:$,rowsPerPage:F}),ge=u.useCallback(async xe=>{try{const qe=await Pe.notices.getById(xe.id);qe.data.success&&(o(qe.data.data),l(!0),await Pe.notices.incrementView(xe.id))}catch(qe){console.error("공지사항 상세 조회 오류:",qe),p("공지사항을 불러오는데 실패했습니다.","error")}},[p]),oe=u.useCallback(xe=>{o(xe),f("edit"),w({title:xe.title,content:xe.content,target_type:xe.target_type,priority:xe.priority,pinned:xe.pinned===1,start_time:xe.start_time?nl(xe.start_time):null,end_time:xe.end_time?nl(xe.end_time):null}),d(!0)},[]),G=u.useCallback(async xe=>{if(window.confirm(`"${xe.title}" 공지사항을 삭제하시겠습니까?`))try{(await Pe.notices.delete(xe.id)).data.success&&(p("공지사항이 삭제되었습니다.","success"),t(Ee=>Ee.filter(Y=>Y.id!==xe.id)))}catch(qe){console.error("공지사항 삭제 오류:",qe),p("공지사항 삭제에 실패했습니다.","error")}},[p]),Q=u.useMemo(()=>Cce.map(qe=>qe.id==="title"?{...qe,clickable:!0,onClick:Ee=>{ge(Ee)}}:qe.id==="is_pinned"?{...qe,type:"chip",render:Ee=>Ee.is_pinned?{label:"고정",color:"warning",variant:"outlined"}:{label:"일반",color:"primary",variant:"outlined"}}:qe.id==="status"?{...qe,type:"chip",render:Ee=>{const he={active:{label:"게시중",color:"success"},inactive:{label:"미게시",color:"secondary"},scheduled:{label:"예약",color:"info"}}[Ee.status];return he?{label:he.label,color:he.color,variant:"outlined"}:{label:Ee.status||"미정",color:"primary",variant:"outlined"}}}:qe.id==="importance"?{...qe,type:"chip",render:Ee=>{const he={high:{label:"중요",color:"error"},medium:{label:"보통",color:"warning"},low:{label:"일반",color:"success"}}[Ee.importance];return he?{label:he.label,color:he.color,variant:"outlined"}:{label:Ee.importance||"미정",color:"primary",variant:"outlined"}}}:qe.id==="actions"?{...qe,type:"button",width:250,buttons:[{label:"상세보기",variant:"outlined",color:"primary",size:"small",onClick:Ee=>{ge(Ee)}},{label:"수정",variant:"outlined",color:"primary",size:"small",onClick:Ee=>{oe(Ee)}},{label:"삭제",variant:"outlined",color:"error",size:"small",onClick:Ee=>{G(Ee)}}]}:qe),[oe,G,ge]),te=u.useMemo(()=>[{id:"target_type",label:"대상",items:[{value:"",label:"전체"},...Y0]},{id:"priority",label:"우선순위",items:[{value:"",label:"전체"},...X0]},{id:"active",label:"상태",items:[{value:"",label:"전체"},...Sce]}],[]),{activeFilters:U,handleFilterChange:V,isDateFilterActive:ae,handleOpenDateFilter:ne,resetDateFilter:me,dateRange:ue,page:Ae,rowsPerPage:we,totalCount:ce,totalPages:De,handlePageChange:le,handleRowsPerPageChange:se,filteredData:J,displayData:Z,filterValues:ie,handleFilter:_e,handleClearFilters:Re}=yr({columns:Q,data:e,defaultRowsPerPage:10,hierarchical:!1,filterOptions:{initialFilters:{target_type:"",priority:"",active:""}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:e.length,onExcelDownload:D,onPrint:B}}),{searchText:He,totalItems:ft,sequentialPageNumbers:St,hasPinnedColumns:Tt,isGridReady:gt,handleSearchChange:et,handleClearSearch:xt,togglePageNumberMode:Rt,toggleColumnPin:ht,setGridReady:jt}=Rn({initialTotalItems:e.length,initialSequentialPageNumbers:!0,onSearch:xe=>{Ae!==0&&le(0)},onToggleColumnPin:xe=>{}});u.useEffect(()=>{jt(!0)},[jt]);const{columns:$t,dragInfo:Ut,pinnedColumns:Bt,handleDragStart:Kt,handleDragEnd:Ft,handleDragOver:Et,handleDrop:Ot,updateColumns:zt}=sr({initialColumns:Q,tableId:`notices_table_v${cR}`,initialPinnedColumns:["id","title"],onColumnOrderChange:xe=>{}}),Wt=!0,kt={handleDragStart:Kt,handleDragEnd:Ft,handleDragOver:Et,handleDrop:Ot},{columnVisibility:Mt,visibleColumns:Ht,hiddenColumnsCount:qt,toggleableColumns:Yt,toggleColumnVisibility:Xt,showAllColumns:tn,resetToDefault:Fe}=dr($t,{defaultHiddenColumns:[],alwaysVisibleColumns:["id","title"],tableId:`notices_table_v${cR}`}),je=u.useMemo(()=>{const xe=new Map(Q.map(qe=>[qe.id,qe]));return Ht.map(qe=>{const Ee=xe.get(qe.id);return Ee?{...qe,...Ee,id:qe.id,label:qe.label}:qe})},[Ht,Q]),[Oe,ke]=u.useState(null),bt=!!Oe,it=u.useCallback(xe=>{ke(xe)},[]),fe=u.useCallback(()=>{ke(null)},[]),be=u.useCallback((xe,qe,Ee)=>{switch(qe){case"target_type":return Ee===""||Ee==="all"?xe:xe.filter(Y=>Y.target_type===Ee);case"priority":return Ee===""||Ee==="all"?xe:xe.filter(Y=>Y.priority===Ee);case"active":return Ee===""?xe:xe.filter(Y=>Y.active===parseInt(Ee));default:return xe}},[]),Te=Dr({data:e,activeFilters:U,searchText:He,isDateFilterActive:ae,dateRange:ue,filterCallback:be}),Ne=u.useMemo(()=>Te?Te.map(xe=>xe.id):[],[Te]),Ge=u.useMemo(()=>{const xe=Object.values(U).some(Ee=>Ee!==""),qe=He&&He.trim()!=="";return!xe&&!qe?e:!e||!Ne||Ne.length===0?[]:e.filter(Ee=>Ne.includes(Ee.id))},[e,Ne,U,He])||[],At=Ge.length,Qe=()=>{f("create"),w({title:"",content:"",target_type:"all",priority:"normal",pinned:!1,start_time:null,end_time:null}),d(!0)},Ie=()=>{b(),p("데이터를 새로고침했습니다.","success")},Xe=async()=>{try{const xe={...g,pinned:g.pinned?1:0,start_time:g.start_time?rl(g.start_time,"yyyy-MM-dd HH:mm:ss"):null,end_time:g.end_time?rl(g.end_time,"yyyy-MM-dd HH:mm:ss"):null};h==="create"?(await Pe.notices.create(xe)).data.success&&(p("새 공지사항이 등록되었습니다.","success"),b()):(await Pe.notices.update(i.id,xe)).data.success&&(p("공지사항이 수정되었습니다.","success"),b()),d(!1)}catch(xe){console.error("공지사항 저장 오류:",xe),p("공지사항 저장에 실패했습니다.","error")}},ve=xe=>{const{name:qe,value:Ee,checked:Y}=xe.target;w(he=>({...he,[qe]:qe==="pinned"?Y:Ee}))};return m(vn,{children:[a(Cn,{title:"공지사항",onAddClick:Qe,onDisplayOptionsClick:it,showAddButton:!0,showRefreshButton:!0,onRefreshClick:Ie,addButtonText:"공지사항 등록",sx:{mb:2}}),a(or,{anchorEl:Oe,open:bt,onClose:fe,toggleableColumns:Yt,columnVisibility:Mt,onToggleColumn:Xt,onShowAll:tn,onReset:Fe,hiddenColumnsCount:qt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"공지사항 목록",totalItems:At,countLabel:"총 ##count##개의 공지사항",sequentialPageNumbers:St,togglePageNumberMode:Rt,hasPinnedColumns:Tt,isGridReady:gt,toggleColumnPin:ht,searchText:He,handleSearchChange:et,handleClearSearch:xt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"공지사항 검색...",sx:{mb:2}}),a(Fi,{tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_,minHeight:200,maxHeight:1200,step:50}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:$t,filterValues:ie||{},activeFilters:U||{},filterOptions:te,handleFilterChange:V,onFilter:_e,onClearFilters:Re,isDateFilterActive:ae,handleOpenDateFilter:ne,resetDateFilter:me},paginationProps:{count:At,page:$,rowsPerPage:F,onPageChange:(xe,qe)=>{N(qe),le(qe)},onRowsPerPageChange:xe=>{const qe=parseInt(xe.target.value,10);O(qe),N(0),se(xe)},totalCount:At,onExcelDownload:D,onPrint:B}})}),m(j,{sx:{width:"100%",mt:2},ref:P,children:[a(An,{columns:je,data:Ge,loading:n,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:R,expandedRows:z,allChecked:q,onCheck:H,onToggleAll:K,onToggleExpand:ee,onSort:X,sortConfig:E,page:$,rowsPerPage:F,totalCount:At,sequentialPageNumbers:St,draggableColumns:Wt,onColumnOrderChange:zt,dragHandlers:kt,dragInfo:Ut,fixedHeader:!0,maxHeight:k,tableHeaderRef:L,headerStyle:A(),pinnedColumns:Bt,onEdit:oe,onDelete:G,sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}},`notices-table-${$}-${F}`),a(rr,{resizeHandleProps:I(parseFloat(k)),showIcon:!0,isDragging:T,sx:{mt:1,opacity:T?1:.7,"&:hover":{opacity:1}}})]})]}),a(Yn,{open:s,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,children:i&&m(bn,{children:[a(Zn,{children:"공지사항 상세 정보"}),m(Kn,{dividers:!0,children:[m(M,{variant:"h6",gutterBottom:!0,children:[i.title,i.pinned===1&&a(j,{component:"span",sx:{ml:1,color:"error.main"},children:"[상단고정]"})]}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["작성일: ",rl(nl(i.created_at),"yyyy-MM-dd HH:mm")," | 조회수: ",i.view_count]}),m(M,{variant:"body2",children:["우선순위: ",(at=X0.find(xe=>xe.value===i.priority))==null?void 0:at.label," | 대상: ",(We=Y0.find(xe=>xe.value===i.target_type))==null?void 0:We.label]})]}),(i.start_time||i.end_time)&&a(j,{sx:{mb:2,p:1,bgcolor:"background.default",borderRadius:1},children:m(M,{variant:"body2",children:["표시 기간: ",i.start_time?rl(nl(i.start_time),"yyyy-MM-dd HH:mm"):"시작일 없음"," ~ ",i.end_time?rl(nl(i.end_time),"yyyy-MM-dd HH:mm"):"종료일 없음"]})}),a(yn,{sx:{mb:2}}),a(M,{variant:"body1",component:"div",sx:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:i.content}})]}),m(nr,{children:[a(Se,{onClick:()=>l(!1),children:"닫기"}),a(Se,{onClick:()=>{l(!1),oe(i)},children:"수정"}),a(Se,{color:"error",onClick:()=>{l(!1),G(i)},children:"삭제"})]})]})}),m(Yn,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:h==="create"?"공지사항 등록":"공지사항 수정"}),a(Kn,{dividers:!0,children:m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a($e,{name:"title",label:"제목",value:g.title,onChange:ve,fullWidth:!0,margin:"normal",required:!0})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"대상"}),a(an,{name:"target_type",value:g.target_type,onChange:ve,label:"대상",children:Y0.map(xe=>a(Me,{value:xe.value,children:xe.label},xe.value))})]})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"우선순위"}),a(an,{name:"priority",value:g.priority,onChange:ve,label:"우선순위",children:X0.map(xe=>a(Me,{value:xe.value,children:xe.label},xe.value))})]})}),a(W,{item:!0,xs:12,md:4,children:a(Lt,{control:a(sn,{name:"pinned",checked:g.pinned,onChange:ve}),label:"상단 고정",sx:{mt:2}})}),a(W,{item:!0,xs:12,md:6,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:a(Wf,{label:"표시 시작일시",value:g.start_time,onChange:xe=>{w(qe=>({...qe,start_time:xe}))},slotProps:{textField:{fullWidth:!0,margin:"normal"}}})})}),a(W,{item:!0,xs:12,md:6,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:a(Wf,{label:"표시 종료일시",value:g.end_time,onChange:xe=>{w(qe=>({...qe,end_time:xe}))},slotProps:{textField:{fullWidth:!0,margin:"normal"}}})})}),m(W,{item:!0,xs:12,children:[a(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:"내용"}),a(zs,{value:g.content,onChange:xe=>ve({target:{name:"content",value:xe}}),fullWidth:!0,minHeight:200})]})]})}),m(nr,{children:[a(Se,{onClick:()=>d(!1),children:"취소"}),a(Se,{variant:"contained",onClick:Xe,disabled:!g.title||!g.content,children:h==="create"?"등록":"수정"})]})]}),a(ua,{open:x.open,autoHideDuration:4e3,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:v,severity:x.severity,sx:{width:"100%"},children:x.message})})]})},Yu=[{value:"promotion",label:"프로모션"},{value:"bonus",label:"보너스"},{value:"tournament",label:"토너먼트"},{value:"special",label:"특별 이벤트"},{value:"seasonal",label:"시즌 이벤트"}],Nf=[{value:"scheduled",label:"예정",color:"info"},{value:"active",label:"진행중",color:"success"},{value:"paused",label:"일시정지",color:"warning"},{value:"ended",label:"종료",color:"default"},{value:"cancelled",label:"취소",color:"error"}],J0=[{value:"all",label:"전체 회원"},{value:"new",label:"신규 회원"},{value:"vip",label:"VIP 회원"},{value:"active",label:"활성 회원"},{value:"inactive",label:"비활성 회원"}],kce=[{id:"no",label:"No.",width:80,align:"center",type:"number",sortable:!0,pinnable:!0},{id:"title",label:"이벤트명",width:250,align:"left",type:"string",sortable:!0,pinnable:!0},{id:"event_type",label:"타입",width:120,align:"center",type:"chip",sortable:!0,render:e=>{const t=Yu.find(n=>n.value===e.event_type);return t?{label:t.label,color:"default",variant:"outlined"}:{label:e.event_type||"미분류",color:"default",variant:"outlined"}}},{id:"status",label:"상태",width:100,align:"center",type:"chip",sortable:!0,render:e=>{const t=Nf.find(n=>n.value===e.status);return t?{label:t.label,color:t.color,variant:"outlined"}:{label:e.status||"미정",color:"default",variant:"outlined"}}},{id:"start_date",label:"시작일",width:180,align:"center",type:"datetime",sortable:!0},{id:"end_date",label:"종료일",width:180,align:"center",type:"datetime",sortable:!0},{id:"current_participants",label:"참여자수",width:100,align:"right",type:"number",sortable:!0,render:e=>e.current_participants?e.current_participants.toLocaleString():"0"},{id:"view_count",label:"조회수",width:100,align:"right",type:"number",sortable:!0},{id:"created_by",label:"작성자",width:150,align:"center",type:"multiline",sortable:!0},{id:"created_at",label:"등록일",width:180,align:"center",type:"datetime",sortable:!0},{id:"actions",label:"관리",width:320,align:"center",sortable:!1,pinnable:!1}],Cu={async getEvents(e={}){try{return(await Pe.get("/events",{params:e})).data}catch(t){throw console.error("이벤트 목록 조회 실패:",t),t}},async getEvent(e){try{return(await Pe.get(`/events/${e}`)).data}catch(t){throw console.error("이벤트 상세 조회 실패:",t),t}},async createEvent(e){try{return(await Pe.post("/events",e)).data}catch(t){throw console.error("이벤트 생성 실패:",t),t}},async updateEvent(e,t){try{return(await Pe.put(`/events/${e}`,t)).data}catch(n){throw console.error("이벤트 수정 실패:",n),n}},async deleteEvent(e){try{return(await Pe.delete(`/events/${e}`)).data}catch(t){throw console.error("이벤트 삭제 실패:",t),t}},async toggleMainPin(e){try{return(await Pe.patch(`/events/${e}/toggle-pin`)).data}catch(t){throw console.error("이벤트 메인고정 토글 실패:",t),t}},async updateEventOrder(e){try{return(await Pe.put("/events/update-order",{orders:e})).data}catch(t){throw console.error("이벤트 순서 변경 실패:",t),t}},async getPinnedEvents(){try{return(await Pe.get("/events/pinned")).data}catch(e){throw console.error("메인 고정 이벤트 조회 실패:",e),e}},async uploadImage(e){try{const t=new FormData;return t.append("image",e),(await Pe.post("/events/upload-image",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("이미지 업로드 실패:",t),t}}},_ce=()=>{var Gn,Xr,ra,ja,ma;const[e,t]=u.useState([]),[n,r]=u.useState(null),[i,o]=u.useState(!1),[s,l]=u.useState([]),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[g,w]=u.useState("create"),[x,y]=u.useState({title:"",content:"",eventType:"promotion",status:"scheduled",target:"all",startDate:new Date,endDate:new Date,rewardAmount:0,writer:"관리자",isPinned:!1}),[p,v]=u.useState({open:!1,message:"",severity:"success"});u.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const Ke=await Cu.getEvents();if(Ke.success&&Ke.data){const Pt=Ke.data.map(fn=>{const Ue=fn.created_by_username&&fn.created_by_nickname?`${fn.created_by_username}
${fn.created_by_nickname}`:fn.created_by_username||fn.created_by||`admin
관리자`;return{...fn,created_by:Ue}});t(Pt);const en=Pt.filter(fn=>fn.is_pinned);l(en)}else if(Ke.data&&Array.isArray(Ke.data)){Ke.data,t(Ke.data);const Pt=Ke.data.filter(en=>en.is_pinned);l(Pt)}else t([]),l([])}catch(Ke){console.error("이벤트 목록 로드 실패:",Ke),P("이벤트 목록을 불러오는데 실패했습니다. 잠시 후 다시 시도해주세요.","error"),t([]),l([])}finally{o(!1)}},P=(Ke,Pt="success")=>{v({open:!0,message:Ke,severity:Pt})},k=()=>{v(Ke=>({...Ke,open:!1}))},{containerRef:C,tableHeight:S,autoHeight:_,toggleAutoHeight:T,setManualHeight:I}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:L,getResizeHandleProps:A}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ke=>{_&&T(!1),I(`${Ke}px`)}}),{tableHeaderRef:D,getTableHeaderStyles:B}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),$=u.useCallback(()=>{P("이벤트를 엑셀로 다운로드합니다.","info")},[]),N=u.useCallback(()=>{P("이벤트를 인쇄합니다.","info")},[]),[F,O]=u.useState(0),[R,E]=u.useState(10),{checkedItems:z,sortConfig:q,expandedRows:X,allChecked:H,handleSort:K,handleCheck:ee,handleToggleAll:ge,handleToggleExpand:oe}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:F,rowsPerPage:R}),G=u.useCallback(Ke=>{r(Ke),d(!0)},[]),Q=u.useCallback(Ke=>{r(Ke),w("edit"),y({title:Ke.title,content:Ke.content,eventType:Ke.eventType,status:Ke.status,target:Ke.target,startDate:new Date(Ke.startDate),endDate:new Date(Ke.endDate),rewardAmount:Ke.rewardAmount,writer:Ke.writer,isPinned:Ke.isPinned||!1}),f(!0)},[]),te=u.useCallback(async Ke=>{if(window.confirm(`"${Ke.title}" 이벤트를 삭제하시겠습니까?`))try{await Cu.deleteEvent(Ke.id),t(Pt=>Pt.filter(en=>en.id!==Ke.id)),P("이벤트가 삭제되었습니다.","success")}catch(Pt){console.error("이벤트 삭제 실패:",Pt),P("이벤트 삭제에 실패했습니다.","error")}},[]),U=u.useCallback(async Ke=>{try{const Pt=await Cu.toggleMainPin(Ke.id);Pt.success&&(t(en=>en.map(fn=>fn.id===Ke.id?{...fn,main_fixed:Pt.data.isPinned}:fn)),P(Pt.data.isPinned?"메인에 고정되었습니다.":"메인 고정이 해제되었습니다.","success"))}catch(Pt){console.error("메인고정 토글 실패:",Pt),P("메인고정 변경에 실패했습니다.","error")}},[]),V=u.useMemo(()=>kce.map(Ke=>Ke.id==="title"?{...Ke,clickable:!0,onClick:Pt=>G(Pt)}:Ke.id==="event_type"?{...Ke,type:"chip",render:Pt=>{const en=Yu.find(fn=>fn.value===Pt.event_type);return en?{label:en.label,color:"primary",variant:"outlined"}:{label:Pt.event_type||"미분류",color:"primary",variant:"outlined"}}}:Ke.id==="status"?{...Ke,type:"chip",render:Pt=>{const fn={upcoming:{label:"예정",color:"info"},ongoing:{label:"진행중",color:"success"},ended:{label:"종료",color:"warning"},paused:{label:"일시정지",color:"secondary"},cancelled:{label:"취소",color:"error"}}[Pt.status];return fn?{label:fn.label,color:fn.color,variant:"outlined"}:{label:Pt.status||"미정",color:"primary",variant:"outlined"}}}:Ke.id==="created_by"?{...Ke,type:"multiline"}:Ke.id==="actions"?{...Ke,type:"button",width:320,buttons:[{label:"메인고정",variant:"outlined",color:"primary",size:"small",onClick:Pt=>{U(Pt)}},{label:"상세보기",variant:"outlined",color:"primary",size:"small",onClick:Pt=>{G(Pt)}},{label:"수정",variant:"outlined",color:"primary",size:"small",onClick:Pt=>{Q(Pt)}},{label:"삭제",variant:"outlined",color:"error",size:"small",onClick:Pt=>{te(Pt)}}]}:Ke),[Q,te,U,G]),ae=u.useMemo(()=>[{id:"eventType",label:"이벤트 타입",items:[{value:"",label:"전체"},...Yu]},{id:"status",label:"상태",items:[{value:"",label:"전체"},...Nf]},{id:"target",label:"대상",items:[{value:"",label:"전체"},...J0]}],[]),{activeFilters:ne,handleFilterChange:me,isDateFilterActive:ue,handleOpenDateFilter:Ae,resetDateFilter:we,dateRange:ce,page:De,rowsPerPage:le,totalCount:se,totalPages:J,handlePageChange:Z,handleRowsPerPageChange:ie,filteredData:_e,displayData:Re,filterValues:He,handleFilter:ft,handleClearFilters:St}=yr({columns:V,data:e,defaultRowsPerPage:10,hierarchical:!1,filterOptions:{initialFilters:{eventType:"",status:"",target:""}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:e.length,onExcelDownload:$,onPrint:N}}),{searchText:Tt,totalItems:gt,sequentialPageNumbers:et,hasPinnedColumns:xt,isGridReady:Rt,handleSearchChange:ht,handleClearSearch:jt,togglePageNumberMode:$t,toggleColumnPin:Ut,setGridReady:Bt}=Rn({initialTotalItems:e.length,initialSequentialPageNumbers:!0,onSearch:Ke=>{De!==0&&Z(0)},onToggleColumnPin:Ke=>{Ke?qt():Ht()}});u.useEffect(()=>{Bt(!0)},[Bt]);const{columns:Kt,dragInfo:Ft,pinnedColumns:Et,handleDragStart:Ot,handleDragEnd:zt,handleDragOver:Wt,handleDrop:kt,updateColumns:Mt,clearAllPinnedColumns:Ht,setDefaultPinnedColumns:qt}=sr({initialColumns:V,tableId:"events_table",initialPinnedColumns:["no","title"],onColumnOrderChange:Ke=>{}}),{columnVisibility:Yt,visibleColumns:Xt,hiddenColumnsCount:tn,toggleableColumns:Fe,toggleColumnVisibility:je,showAllColumns:Oe,resetToDefault:ke}=dr(Kt,{defaultHiddenColumns:[],alwaysVisibleColumns:["no","title"],tableId:"events_table"}),[bt,it]=u.useState(null),fe=!!bt,be=u.useCallback(Ke=>{it(Ke)},[]),Te=u.useCallback(()=>{it(null)},[]),Ne=u.useCallback((Ke,Pt,en)=>{switch(Pt){case"eventType":return en===""||en==="all"?Ke:Ke.filter(fn=>fn.eventType===en);case"status":return en===""||en==="all"?Ke:Ke.filter(fn=>fn.status===en);case"target":return en===""||en==="all"?Ke:Ke.filter(fn=>fn.target===en);default:return Ke}},[]),Ve=u.useCallback((Ke,Pt)=>{me(Ke,Pt)},[me]),Ge=u.useMemo(()=>{const Ke={...ne};return Object.keys(Ke).forEach(Pt=>{Ke[Pt]==="all"&&(Ke[Pt]="")}),Ke},[ne]),At=Dr({data:e,activeFilters:Ge,searchText:Tt,isDateFilterActive:ue,dateRange:ce,filterCallback:Ne}),Qe=u.useMemo(()=>At?At.map(Ke=>Ke.id):[],[At]),Xe=u.useMemo(()=>{const Ke=Object.values(Ge).some(en=>en&&en!==""),Pt=Tt&&Tt.trim()!=="";return!Ke&&!Pt?e:!e||!Qe||Qe.length===0?[]:e.filter(en=>Qe.includes(en.id))},[e,Qe,Ge,Tt])||[],ve=Xe.length,at=u.useCallback((Ke,Pt)=>{let en=Pt;if(typeof Ke=="number"&&Pt===void 0&&(en=Ke),typeof en!="number"){console.error("유효하지 않은 페이지 번호:",en);return}O(en),Z(en)},[F,Z]),We=u.useCallback(Ke=>{if(!Ke||!Ke.target||!Ke.target.value){console.error("이벤트 행 수 변경 이벤트 오류:",Ke);return}const Pt=parseInt(Ke.target.value,10);E(Pt),O(0),ie(Ke)},[R,ie]),[xe,qe]=u.useState(Date.now());u.useEffect(()=>{qe(Date.now())},[F,R]);const Ee=!0,Y={handleDragStart:Ot,handleDragEnd:zt,handleDragOver:Wt,handleDrop:kt},he=u.useMemo(()=>{const Ke=new Map(V.map(Pt=>[Pt.id,Pt]));return Xt.map(Pt=>{const en=Ke.get(Pt.id);return en?{...Pt,...en,id:Pt.id,label:Pt.label}:Pt})},[Xt,V]),ze=()=>{w("create"),y({title:"",content:"",eventType:"promotion",status:"scheduled",target:"all",startDate:new Date,endDate:new Date,rewardAmount:0,writer:"관리자",isPinned:!1}),f(!0)},de=()=>{b(),P("데이터를 새로고침했습니다.","success")},Ze=async()=>{var Ke,Pt;try{const en={title:x.title,content:x.content,event_type:x.eventType,start_date:x.startDate.toISOString().split("T")[0],end_date:x.endDate.toISOString().split("T")[0],is_pinned:x.isPinned,max_participants:x.maxParticipants||null};if(g==="create"){const fn=await Cu.createEvent(en);P("새 이벤트가 등록되었습니다.","success")}else{const fn=await Cu.updateEvent(n.id,en);P("이벤트가 수정되었습니다.","success")}await b(),f(!1)}catch(en){console.error("이벤트 저장 실패:",en);const fn=((Pt=(Ke=en.response)==null?void 0:Ke.data)==null?void 0:Pt.message)||(g==="create"?"이벤트 등록에 실패했습니다.":"이벤트 수정에 실패했습니다.");P(fn,"error")}},lt=Ke=>{if(typeof Ke=="string"){y(fn=>({...fn,content:Ke}));return}const{name:Pt,value:en}=Ke.target;y(fn=>({...fn,[Pt]:en}))},Qt=Ke=>{y(Pt=>({...Pt,content:Ke}))},tr=Ke=>{const Pt=document.createElement("DIV");return Pt.innerHTML=Ke||"",Pt.textContent||Pt.innerText||""},$n=()=>{var Ke,Pt;return((Ke=x.title)==null?void 0:Ke.trim())&&tr(x.content).trim().length>0&&((Pt=x.writer)==null?void 0:Pt.trim())&&x.startDate&&x.endDate},Xn=(Ke,Pt)=>{y(en=>({...en,[Ke]:Pt}))};return m(vn,{children:[a(Cn,{title:"이벤트 관리",onAddClick:ze,onDisplayOptionsClick:be,showAddButton:!0,showRefreshButton:!0,onRefreshClick:de,addButtonText:"이벤트 등록",sx:{mb:2}}),a(or,{anchorEl:bt,open:fe,onClose:Te,toggleableColumns:Fe,columnVisibility:Yt,onToggleColumn:je,onShowAll:Oe,onReset:ke,hiddenColumnsCount:tn,menuWidth:"350px"}),i&&a(j,{sx:{display:"flex",justifyContent:"center",p:3},children:a(ir,{})}),s.length>0&&a(rt,{elevation:1,sx:{p:2,mb:2,backgroundColor:"#f5f5f5"},children:m(M,{variant:"body2",color:"text.secondary",children:["메인 고정 이벤트: ",s.length,"개",s.map((Ke,Pt)=>m("span",{children:[Pt>0&&", ",Ke.title]},Ke.id))]})}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"이벤트 목록",totalItems:ve,countLabel:"총 ##count##개의 이벤트",sequentialPageNumbers:et,togglePageNumberMode:$t,hasPinnedColumns:xt,isGridReady:Rt,toggleColumnPin:Ut,searchText:Tt,handleSearchChange:ht,handleClearSearch:jt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"이벤트 검색...",sx:{mb:2}}),a(Fi,{tableHeight:S,autoHeight:_,toggleAutoHeight:T,setManualHeight:I,minHeight:200,maxHeight:1200,step:50}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:Kt,filterValues:He||{},activeFilters:Ge||{},filterOptions:ae,handleFilterChange:Ve,onFilter:ft,onClearFilters:St,isDateFilterActive:ue,handleOpenDateFilter:Ae,resetDateFilter:we},paginationProps:{count:ve,page:F,rowsPerPage:R,onPageChange:at,onRowsPerPageChange:We,totalCount:ve,onExcelDownload:$,onPrint:N}})}),m(j,{sx:{width:"100%",mt:2},ref:C,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",F+1," / ",Math.ceil(ve/R)," (페이지당 ",R,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:he,data:Xe,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:z,expandedRows:X,allChecked:H,onCheck:ee,onToggleAll:ge,onToggleExpand:oe,onSort:K,sortConfig:q,page:F,rowsPerPage:R,totalCount:ve,sequentialPageNumbers:et,draggableColumns:Ee,onColumnOrderChange:Mt,dragHandlers:Y,dragInfo:Ft,fixedHeader:!0,maxHeight:S,tableHeaderRef:D,headerStyle:B(),pinnedColumns:Et,onEdit:Q,onDelete:te,sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}},`events-table-${xe}`),a(rr,{resizeHandleProps:A(parseFloat(S)),showIcon:!0,isDragging:L,sx:{mt:1,opacity:L?1:.7,"&:hover":{opacity:1}}})]})]}),a(Yn,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:n&&m(bn,{children:[a(Zn,{children:"이벤트 상세 정보"}),m(Kn,{dividers:!0,children:[a(M,{variant:"h6",gutterBottom:!0,children:n.title}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["작성자: ",n.writer," | 등록일: ",n.createdAt," | 수정일: ",n.updatedAt]}),m(M,{variant:"body2",children:["타입: ",(Gn=Yu.find(Ke=>Ke.value===n.eventType))==null?void 0:Gn.label," | 상태: ",(Xr=Nf.find(Ke=>Ke.value===n.status))==null?void 0:Xr.label," | 대상: ",(ra=J0.find(Ke=>Ke.value===n.target))==null?void 0:ra.label]})]}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["시작일: ",n.startDate," | 종료일: ",n.endDate]}),m(M,{variant:"body2",children:["참여자수: ",((ja=n.participantCount)==null?void 0:ja.toLocaleString())||0,"명 | 보상금액: ",((ma=n.rewardAmount)==null?void 0:ma.toLocaleString())||0,"원"]})]}),a(yn,{sx:{mb:2}}),a(M,{variant:"body1",component:"div",sx:{whiteSpace:"pre-wrap"},children:n.content})]}),m(nr,{children:[a(Se,{onClick:()=>d(!1),children:"닫기"}),a(Se,{onClick:()=>{d(!1),Q(n)},children:"수정"}),a(Se,{color:"error",onClick:()=>{d(!1),te(n)},children:"삭제"})]})]})}),m(Yn,{open:h,onClose:()=>f(!1),maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:g==="create"?"이벤트 등록":"이벤트 수정"}),a(Kn,{dividers:!0,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a($e,{name:"title",label:"이벤트명",value:x.title,onChange:lt,fullWidth:!0,margin:"normal",required:!0})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"이벤트 타입"}),a(an,{name:"eventType",value:x.eventType,onChange:lt,label:"이벤트 타입",children:Yu.map(Ke=>a(Me,{value:Ke.value,children:Ke.label},Ke.value))})]})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"상태"}),a(an,{name:"status",value:x.status,onChange:lt,label:"상태",children:Nf.map(Ke=>a(Me,{value:Ke.value,children:Ke.label},Ke.value))})]})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"대상"}),a(an,{name:"target",value:x.target,onChange:lt,label:"대상",children:J0.map(Ke=>a(Me,{value:Ke.value,children:Ke.label},Ke.value))})]})}),a(W,{item:!0,xs:12,md:6,children:a(Ja,{label:"시작일",value:x.startDate,onChange:Ke=>Xn("startDate",Ke),renderInput:Ke=>a($e,{...Ke,fullWidth:!0,margin:"normal"})})}),a(W,{item:!0,xs:12,md:6,children:a(Ja,{label:"종료일",value:x.endDate,onChange:Ke=>Xn("endDate",Ke),renderInput:Ke=>a($e,{...Ke,fullWidth:!0,margin:"normal"})})}),a(W,{item:!0,xs:12,md:6,children:a($e,{name:"rewardAmount",label:"보상금액",type:"number",value:x.rewardAmount,onChange:lt,fullWidth:!0,margin:"normal",InputProps:{endAdornment:"원"}})}),a(W,{item:!0,xs:12,md:6,children:a($e,{name:"writer",label:"작성자",value:x.writer,onChange:lt,fullWidth:!0,margin:"normal",required:!0})}),a(W,{item:!0,xs:12,children:a(zs,{value:x.content,onChange:Qt,label:"이벤트 내용",height:350,required:!0})}),m(W,{item:!0,xs:12,children:[a(Lt,{control:a(sn,{checked:x.isPinned,onChange:Ke=>y(Pt=>({...Pt,isPinned:Ke.target.checked})),color:"primary"}),label:"메인 페이지에 고정"}),x.isPinned&&a(M,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"* 메인 페이지에 고정된 이벤트는 홈페이지 이벤트 섹션에 노출됩니다."})]})]})})}),m(nr,{children:[a(Se,{onClick:()=>f(!1),children:"취소"}),a(Se,{variant:"contained",onClick:Ze,disabled:!$n(),children:g==="create"?"등록":"수정"})]})]}),a(ua,{open:p.open,autoHideDuration:4e3,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:k,severity:p.severity,sx:{width:"100%"},children:p.message})})]})};var Su={},uR;function Tce(){if(uR)return Su;uR=1;var e=ln();Object.defineProperty(Su,"__esModule",{value:!0}),Su.default=void 0;var t=e(un()),n=cn();return Su.default=(0,t.default)((0,n.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),Su}var Ice=Tce();const Oce=vt(Ice),dR=[{value:"center",label:"중앙"},{value:"top",label:"상단"},{value:"bottom",label:"하단"},{value:"custom",label:"커스텀"}],Bf=[{value:"active",label:"활성"},{value:"inactive",label:"비활성"}],Yj=[{value:"admin",label:"관리자"},{value:"user",label:"유저페이지"},{value:"all",label:"관리자+유저페이지"}],Q0=Yj,Ace=[{id:"no",label:"No.",width:80,align:"center",type:"number",sortable:!0,pinnable:!0},{id:"title",label:"팝업명",width:200,align:"left",sortable:!0,pinnable:!0},{id:"status",label:"상태",width:80,align:"center",sortable:!0,type:"text",formatter:e=>{const t=Bf.find(n=>n.value===e);return t?t.label:e}},{id:"topPosition",label:"Top",width:80,align:"center",sortable:!0,type:"text",formatter:e=>`${e}px`},{id:"leftPosition",label:"Left",width:80,align:"center",sortable:!0,type:"text",formatter:e=>`${e}px`},{id:"target",label:"대상",width:120,align:"center",sortable:!0,type:"text",formatter:(e,t)=>{const n=Yj.find(r=>r.value===t.display_page);return n?n.label:t.display_page}},{id:"width",label:"가로",width:80,align:"center",sortable:!0,type:"text",formatter:e=>`${e}px`},{id:"height",label:"세로",width:80,align:"center",sortable:!0,type:"text",formatter:e=>`${e}px`},{id:"startDate",label:"시작일",width:120,align:"center",sortable:!0},{id:"endDate",label:"종료일",width:120,align:"center",sortable:!0},{id:"writer",label:"작성자",width:100,align:"center",sortable:!0},{id:"createdAt",label:"등록일",width:120,align:"center",sortable:!0},{id:"actions",label:"액션",width:140,align:"center",sortable:!1,pinnable:!1,type:"button",buttons:[{label:"수정",color:"primary",variant:"outlined",type:"edit"},{label:"삭제",color:"error",variant:"outlined",type:"delete"}],buttonDirection:"row"}],Dce=()=>{const[e,t]=u.useState([]),[n,r]=u.useState(!1),[i,o]=u.useState(null),s=u.useCallback(async()=>{r(!0),o(null);try{const w=await Pe.popups.getAll();w.data&&w.data.data?t(w.data.data):w.data&&Array.isArray(w.data)?t(w.data):t([])}catch(w){console.error("Failed to fetch popups:",w),o("팝업 목록을 불러오는데 실패했습니다."),t([])}finally{r(!1)}},[]),l=u.useCallback(async w=>{var x,y;r(!0),o(null);try{const p=await Pe.popups.create(w);if(p.data)return await s(),p.data}catch(p){console.error("Failed to create popup:",p);const v=((y=(x=p.response)==null?void 0:x.data)==null?void 0:y.message)||"팝업 생성에 실패했습니다.";throw o(v),new Error(v)}finally{r(!1)}},[s]),c=u.useCallback(async(w,x)=>{var y,p;r(!0),o(null);try{const v=await Pe.popups.update(w,x);if(v.data)return await s(),v.data}catch(v){console.error("Failed to update popup:",v);const b=((p=(y=v.response)==null?void 0:y.data)==null?void 0:p.message)||"팝업 수정에 실패했습니다.";throw o(b),new Error(b)}finally{r(!1)}},[s]),d=u.useCallback(async w=>{var x,y;r(!0),o(null);try{const p=await Pe.popups.delete(w);if(p.data)return await s(),p.data}catch(p){console.error("Failed to delete popup:",p);const v=((y=(x=p.response)==null?void 0:x.data)==null?void 0:y.message)||"팝업 삭제에 실패했습니다.";throw o(v),new Error(v)}finally{r(!1)}},[s]),h=u.useCallback(async w=>{var x,y;r(!0),o(null);try{const p=await Pe.popups.toggle(w);if(p.data)return await s(),p.data}catch(p){console.error("Failed to toggle popup status:",p);const v=((y=(x=p.response)==null?void 0:x.data)==null?void 0:y.message)||"팝업 상태 변경에 실패했습니다.";throw o(v),new Error(v)}finally{r(!1)}},[s]),f=u.useCallback(async w=>{var x,y,p;r(!0),o(null);try{const v=new FormData;v.append("image",w);const b=await Pe.popups.uploadImage(v);if(b.data){const P=((x=b.data.data)==null?void 0:x.imageUrl)||b.data.imageUrl||b.data.url;if(P)return P}throw new Error("이미지 URL을 응답에서 찾을 수 없습니다.")}catch(v){console.error("Failed to upload image:",v);const b=((p=(y=v.response)==null?void 0:y.data)==null?void 0:p.message)||"이미지 업로드에 실패했습니다.";throw o(b),new Error(b)}finally{r(!1)}},[]),g=u.useCallback(async w=>{var x,y;r(!0),o(null);try{const p=await Pe.popups.deleteImage({imageUrl:w});if(p.data)return p.data}catch(p){console.error("Failed to delete image:",p);const v=((y=(x=p.response)==null?void 0:x.data)==null?void 0:y.message)||"이미지 삭제에 실패했습니다.";throw o(v),new Error(v)}finally{r(!1)}},[]);return u.useEffect(()=>{s()},[s]),{popups:e,loading:n,error:i,createPopup:l,updatePopup:c,deletePopup:d,togglePopupStatus:h,uploadImage:f,deleteImage:g,refetch:s}},Rce=()=>{var ma,Ke,Pt,en,fn;const[e,t]=u.useState([]),[n,r]=u.useState(!1),[i,o]=u.useState(null),[s,l]=u.useState(!1),[c,d]=u.useState(!1),[h,f]=u.useState("create"),[g,w]=u.useState({title:"",content:"",popupType:"modal",status:"active",position:"custom",target:"all",width:400,height:300,heightType:"fixed",topPosition:0,leftPosition:0,startDate:new Date,endDate:new Date,closeOnClick:!1,showOnce:!1,imageUrl:"",linkUrl:"",writer:"관리자",closeAfterHours:12}),[x,y]=u.useState(""),[p,v]=u.useState(!1),[b,P]=u.useState(!1),{uploadImage:k}=Dce(),[C,S]=u.useState({open:!1,message:"",severity:"success"}),_=u.useCallback((Ue,ct="success")=>{S({open:!0,message:Ue,severity:ct})},[]),T=()=>{S(Ue=>({...Ue,open:!1}))},I=u.useCallback(async()=>{r(!0);try{const Ue=await Pe.popups.getAll();if(Ue.data.success){const ct=Ue.data.data.map((Je,Nt)=>({...Je,no:Nt+1,topPosition:Je.top_position||Je.topPosition||0,leftPosition:Je.left_position||Je.leftPosition||0,displayPage:Je.display_page||Je.target||"all",target:Je.display_page||Je.target||"all",startDate:Je.start_date||Je.startDate,endDate:Je.end_date||Je.endDate,createdAt:Je.created_at||Je.createdAt,updatedAt:Je.updated_at||Je.updatedAt,writer:Je.created_by_username?`${Je.created_by_username}${Je.created_by_nickname?`
${Je.created_by_nickname}`:""}`:Je.writer||"관리자"}));t(ct)}}catch(Ue){console.error("팝업 조회 오류:",Ue),_("팝업 목록을 불러오는데 실패했습니다.","error"),t([])}finally{r(!1)}},[_]);u.useEffect(()=>{I()},[I]);const{containerRef:L,tableHeight:A,autoHeight:D,toggleAutoHeight:B,setManualHeight:$}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:N,getResizeHandleProps:F}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Ue=>{D&&B(!1),$(`${Ue}px`)}}),{tableHeaderRef:O,getTableHeaderStyles:R}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),E=u.useCallback(()=>{_("팝업을 엑셀로 다운로드합니다.","info")},[]),z=u.useCallback(()=>{_("팝업을 인쇄합니다.","info")},[]),[q,X]=u.useState(0),[H,K]=u.useState(10),{checkedItems:ee,sortConfig:ge,expandedRows:oe,allChecked:G,handleSort:Q,handleCheck:te,handleToggleAll:U,handleToggleExpand:V}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:q,rowsPerPage:H}),ae=u.useCallback(Ue=>{o(Ue),l(!0)},[]),ne=u.useCallback(Ue=>{o(Ue),f("edit"),w({title:Ue.title,content:Ue.content,popupType:Ue.popupType,status:Ue.status,position:Ue.position,target:Ue.target,width:Ue.width,height:Ue.height==="auto"?"auto":Ue.height,heightType:Ue.height==="auto"?"auto":"fixed",startDate:new Date(Ue.startDate),topPosition:Ue.top_position||Ue.topPosition||0,leftPosition:Ue.left_position||Ue.leftPosition||0,endDate:new Date(Ue.endDate),closeOnClick:Ue.closeOnClick,showOnce:Ue.showOnce,imageUrl:Ue.imageUrl||"",linkUrl:Ue.linkUrl||"",writer:Ue.writer,closeAfterHours:Ue.close_after_hours||12}),y(Ue.imageUrl||""),v(!1),d(!0)},[]),me=u.useCallback(async Ue=>{if(window.confirm(`"${Ue.title}" 팝업을 삭제하시겠습니까?`))try{(await Pe.popups.delete(Ue.id)).data.success&&(await I(),_("팝업이 삭제되었습니다.","success"))}catch(ct){console.error("팝업 삭제 오류:",ct),_("팝업 삭제에 실패했습니다.","error")}},[I,_]),ue=u.useMemo(()=>Ace.map(Ue=>Ue.formatter&&!Ue.render?{...Ue,render:ct=>{const Je=ct.row[Ue.id];return Ue.formatter(Je,ct.row)}}:Ue.id==="actions"&&Ue.type==="button"?{...Ue,onActionClick:(ct,Je)=>{ct==="edit"?ne(Je):ct==="delete"&&me(Je)}}:Ue),[ne,me]),Ae=u.useMemo(()=>[{id:"status",label:"상태",items:[{value:"",label:"전체"},...Bf]},{id:"target",label:"대상",items:[{value:"",label:"전체"},...Q0]}],[]),{activeFilters:we,handleFilterChange:ce,isDateFilterActive:De,handleOpenDateFilter:le,resetDateFilter:se,dateRange:J,page:Z,rowsPerPage:ie,totalCount:_e,totalPages:Re,handlePageChange:He,handleRowsPerPageChange:ft,filteredData:St,displayData:Tt,filterValues:gt,handleFilter:et,handleClearFilters:xt}=yr({columns:ue,data:e,defaultRowsPerPage:10,hierarchical:!1,filterOptions:{initialFilters:{status:"",target:""}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:e.length,onExcelDownload:E,onPrint:z}}),{searchText:Rt,totalItems:ht,sequentialPageNumbers:jt,hasPinnedColumns:$t,isGridReady:Ut,handleSearchChange:Bt,handleClearSearch:Kt,togglePageNumberMode:Ft,toggleColumnPin:Et,setGridReady:Ot}=Rn({initialTotalItems:e.length,initialSequentialPageNumbers:!0,onSearch:Ue=>{Z!==0&&He(0)},onToggleColumnPin:Ue=>{Ue?Fe():tn()}});u.useEffect(()=>{Ot(!0)},[Ot]);const{columns:zt,dragInfo:Wt,pinnedColumns:kt,handleDragStart:Mt,handleDragEnd:Ht,handleDragOver:qt,handleDrop:Yt,updateColumns:Xt,clearAllPinnedColumns:tn,setDefaultPinnedColumns:Fe}=sr({initialColumns:ue,tableId:"popup_table",initialPinnedColumns:["no","title","actions"],onColumnOrderChange:Ue=>{}}),je=u.useMemo(()=>zt.map(Ue=>{if(Ue.id==="actions"&&Ue.type==="button"){const ct=ue.find(Je=>Je.id==="actions");return{...Ue,buttons:ct?ct.buttons:Ue.buttons,onActionClick:(Je,Nt)=>{Je==="edit"?ne(Nt):Je==="delete"&&me(Nt)}}}return Ue}),[zt,ue,ne,me]),{columnVisibility:Oe,visibleColumns:ke,hiddenColumnsCount:bt,toggleableColumns:it,toggleColumnVisibility:fe,showAllColumns:be,resetToDefault:Te}=dr(je,{defaultHiddenColumns:[],alwaysVisibleColumns:["no","title","actions"],tableId:"popup_table"}),[Ne,Ve]=u.useState(null),Ge=!!Ne,At=u.useCallback(Ue=>{Ve(Ue)},[]),Qe=u.useCallback(()=>{Ve(null)},[]),Ie=u.useCallback((Ue,ct,Je)=>{switch(ct){case"status":return Je===""||Je==="all"?Ue:Ue.filter(Nt=>Nt.status===Je);case"target":return Je===""||Je==="all"?Ue:Ue.filter(Nt=>Nt.target===Je);default:return Ue}},[]),Xe=u.useCallback((Ue,ct)=>{ce(Ue,ct)},[ce]),ve=u.useMemo(()=>{const Ue={...we};return Object.keys(Ue).forEach(ct=>{Ue[ct]==="all"&&(Ue[ct]="")}),Ue},[we]),at=Dr({data:e,activeFilters:ve,searchText:Rt,isDateFilterActive:De,dateRange:J,filterCallback:Ie}),We=u.useMemo(()=>at?at.map(Ue=>Ue.id):[],[at]),qe=u.useMemo(()=>{const Ue=Object.values(ve).some(Je=>Je&&Je!==""),ct=Rt&&Rt.trim()!=="";return!Ue&&!ct?e:!e||!We||We.length===0?[]:e.filter(Je=>We.includes(Je.id))},[e,We,ve,Rt])||[],Ee=qe.length,Y=u.useCallback((Ue,ct)=>{let Je=ct;if(typeof Ue=="number"&&ct===void 0&&(Je=Ue),typeof Je!="number"){console.error("유효하지 않은 페이지 번호:",Je);return}X(Je),He(Je)},[q,He]),he=u.useCallback(Ue=>{if(!Ue||!Ue.target||!Ue.target.value){console.error("팝업 행 수 변경 이벤트 오류:",Ue);return}const ct=parseInt(Ue.target.value,10);K(ct),X(0),ft(Ue)},[H,ft]),[ze,de]=u.useState(Date.now());u.useEffect(()=>{de(Date.now())},[q,H]);const Ze=!0,lt={handleDragStart:Mt,handleDragEnd:Ht,handleDragOver:qt,handleDrop:Yt};u.useCallback(()=>{P(!0)},[]);const Qt=u.useCallback(async()=>{try{try{const Ue=await Pe.popups.clearAllDismissals();Ue.success&&(`${Ue.affectedRows}`,_(`${Ue.affectedRows}개의 숨김 기록이 삭제되었습니다.`,"success"))}catch(Ue){console.error("API call error:",Ue),_("팝업 복원 중 오류가 발생했습니다.","error");return}P(!1),I()}catch(Ue){console.error("팝업 복원 오류:",Ue),_("팝업 복원 중 오류가 발생했습니다.","error")}},[_,I]),tr=()=>{f("create"),w({title:"",content:"",popupType:"modal",status:"active",position:"custom",target:"all",width:400,height:300,heightType:"fixed",topPosition:0,leftPosition:0,startDate:new Date,endDate:new Date,closeOnClick:!1,showOnce:!1,imageUrl:"",linkUrl:"",writer:"관리자",closeAfterHours:12}),y(""),v(!1),d(!0)},$n=()=>{I(),_("데이터를 새로고침했습니다.","success")},Xn=async()=>{try{const Ue={title:g.title,content:g.content,type:g.popupType,status:g.status,position:g.position,display_page:g.target,width:parseInt(g.width),height:g.heightType==="auto"?"auto":parseInt(g.height),top_position:g.position==="custom"?parseInt(g.topPosition||0):0,left_position:g.position==="custom"?parseInt(g.leftPosition||0):0,start_date:g.startDate?g.startDate.toISOString().split("T")[0]:null,end_date:g.endDate?g.endDate.toISOString().split("T")[0]:null,close_on_click:g.closeOnClick,show_once:g.showOnce,image_url:g.imageUrl,link_url:g.linkUrl,link_target:g.linkUrl?"_blank":null,click_action:g.linkUrl?"url":"none",close_after_hours:g.closeAfterHours?parseInt(g.closeAfterHours):null};h==="create"?(await Pe.popups.create(Ue)).data.success&&(await I(),_("새 팝업이 등록되었습니다.","success")):(await Pe.popups.update(i.id,Ue)).data.success&&(await I(),_("팝업이 수정되었습니다.","success")),d(!1)}catch(Ue){console.error("팝업 저장 오류:",Ue),_(h==="create"?"팝업 등록에 실패했습니다.":"팝업 수정에 실패했습니다.","error")}},Gn=Ue=>{const{name:ct,value:Je,checked:Nt}=Ue.target;w(br=>({...br,[ct]:ct==="closeOnClick"||ct==="showOnce"?Nt:Je}))},Xr=(Ue,ct)=>{w(Je=>({...Je,[Ue]:ct}))},ra=async Ue=>{const ct=Ue.target.files[0];if(ct){if(!ct.type.startsWith("image/")){_("이미지 파일만 업로드 가능합니다.","error");return}if(ct.size>5*1024*1024){_("파일 크기는 5MB를 초과할 수 없습니다.","error");return}try{v(!0);const Je=await k(ct);if(Je){const Nt=`http://125.187.89.85:5100${Je}`,br=`<img src="${Nt}" alt="팝업 이미지" style="width: 100%; height: auto; display: block; margin: 0;" />`;w(vr=>({...vr,imageUrl:Nt,content:vr.content?`${br}<br/>${vr.content}`:br})),_("이미지가 업로드되어 팝업 내용에 추가되었습니다.","success")}else throw new Error("업로드 응답이 올바르지 않습니다.")}catch(Je){console.error("이미지 업로드 오류:",Je),_("이미지 업로드에 실패했습니다. 다시 시도해주세요.","error")}finally{v(!1),Ue.target.value=""}}};return m(vn,{children:[a(Cn,{title:"팝업 설정",onAddClick:tr,onDisplayOptionsClick:At,showAddButton:!0,showRefreshButton:!0,onRefreshClick:$n,addButtonText:"팝업 등록",customActions:!1,sx:{mb:2}}),a(or,{anchorEl:Ne,open:Ge,onClose:Qe,toggleableColumns:it,columnVisibility:Oe,onToggleColumn:fe,onShowAll:be,onReset:Te,hiddenColumnsCount:bt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"팝업 목록",totalItems:Ee,countLabel:"총 ##count##개의 팝업",sequentialPageNumbers:jt,togglePageNumberMode:Ft,hasPinnedColumns:$t,isGridReady:Ut,toggleColumnPin:Et,searchText:Rt,handleSearchChange:Bt,handleClearSearch:Kt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"팝업 검색...",sx:{mb:2}}),a(Fi,{tableHeight:A,autoHeight:D,toggleAutoHeight:B,setManualHeight:$,minHeight:200,maxHeight:1200,step:50}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:je,filterValues:gt||{},activeFilters:ve||{},filterOptions:Ae,handleFilterChange:Xe,onFilter:et,onClearFilters:xt,isDateFilterActive:De,handleOpenDateFilter:le,resetDateFilter:se},paginationProps:{count:Ee,page:q,rowsPerPage:H,onPageChange:Y,onRowsPerPageChange:he,totalCount:Ee,onExcelDownload:E,onPrint:z}})}),m(j,{sx:{width:"100%",mt:2},ref:L,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",q+1," / ",Math.ceil(Ee/H)," (페이지당 ",H,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:ke,data:qe,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:ee,expandedRows:oe,allChecked:G,onCheck:te,onToggleAll:U,onToggleExpand:V,onSort:Q,sortConfig:ge,page:q,rowsPerPage:H,totalCount:Ee,sequentialPageNumbers:jt,draggableColumns:Ze,onColumnOrderChange:Xt,dragHandlers:lt,dragInfo:Wt,fixedHeader:!0,maxHeight:A,tableHeaderRef:O,headerStyle:R(),pinnedColumns:kt,onRowClick:ae,onEdit:ne,onDelete:me,sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}},`popup-table-${ze}`),a(rr,{resizeHandleProps:F(parseFloat(A)),showIcon:!0,isDragging:N,sx:{mt:1,opacity:N?1:.7,"&:hover":{opacity:1}}})]})]}),a(Yn,{open:s,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,children:i&&m(bn,{children:[a(Zn,{children:"팝업 상세 정보"}),m(Kn,{dividers:!0,children:[a(M,{variant:"h6",gutterBottom:!0,children:i.title}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["작성자: ",i.writer," | 등록일: ",i.createdAt," | 수정일: ",i.updatedAt]}),m(M,{variant:"body2",children:["상태: ",(ma=Bf.find(Ue=>Ue.value===i.status))==null?void 0:ma.label]})]}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["위치: ",(Ke=dR.find(Ue=>Ue.value===i.position))==null?void 0:Ke.label," | 대상: ",(Pt=Q0.find(Ue=>Ue.value===i.target))==null?void 0:Pt.label]}),m(M,{variant:"body2",children:["크기: ",i.width,"x",i.height,"px | 시작일: ",i.startDate," | 종료일: ",i.endDate]})]}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",color:"text.secondary"},children:[m(M,{variant:"body2",children:["노출수: ",((en=i.viewCount)==null?void 0:en.toLocaleString())||0,"회 | 클릭수: ",((fn=i.clickCount)==null?void 0:fn.toLocaleString())||0,"회"]}),m(M,{variant:"body2",children:["클릭시 닫기: ",i.closeOnClick?"예":"아니오"," | 한번만 표시: ",i.showOnce?"예":"아니오"]})]}),a(yn,{sx:{mb:2}}),a(M,{variant:"body1",component:"div",sx:{whiteSpace:"pre-wrap"},children:i.content}),i.imageUrl&&a(j,{sx:{mt:2},children:m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["이미지 URL: ",i.imageUrl]})}),i.linkUrl&&a(j,{sx:{mt:1},children:m(M,{variant:"body2",sx:{color:"text.secondary"},children:["링크 URL: ",i.linkUrl]})})]}),m(nr,{children:[a(Se,{onClick:()=>l(!1),children:"닫기"}),a(Se,{onClick:()=>{l(!1),ne(i)},children:"수정"}),a(Se,{color:"error",onClick:()=>{l(!1),me(i)},children:"삭제"})]})]})}),m(Yn,{open:c,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:h==="create"?"팝업 등록":"팝업 수정"}),a(Kn,{dividers:!0,children:a(co,{dateAdapter:Go,adapterLocale:Ko,children:m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,children:a($e,{name:"title",label:"팝업명",value:g.title,onChange:Gn,fullWidth:!0,margin:"normal",required:!0})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"상태"}),a(an,{name:"status",value:g.status,onChange:Gn,label:"상태",children:Bf.map(Ue=>a(Me,{value:Ue.value,children:Ue.label},Ue.value))})]})}),a(W,{item:!0,xs:12,md:4,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"위치"}),a(an,{name:"position",value:g.position,onChange:Gn,label:"위치",children:dR.map(Ue=>a(Me,{value:Ue.value,children:Ue.label},Ue.value))})]})}),a(W,{item:!0,xs:12,md:6,children:m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"대상"}),a(an,{name:"target",value:g.target,onChange:Gn,label:"대상",children:Q0.map(Ue=>a(Me,{value:Ue.value,children:Ue.label},Ue.value))})]})}),g.position==="custom"&&m(bn,{children:[a(W,{item:!0,xs:12,md:6,children:a($e,{name:"topPosition",label:"상단 위치",type:"number",value:g.topPosition,onChange:Gn,fullWidth:!0,margin:"normal",InputProps:{endAdornment:"px"}})}),a(W,{item:!0,xs:12,md:6,children:a($e,{name:"leftPosition",label:"좌측 위치",type:"number",value:g.leftPosition,onChange:Gn,fullWidth:!0,margin:"normal",InputProps:{endAdornment:"px"}})})]}),a(W,{item:!0,xs:12,md:3,children:a($e,{name:"width",label:"가로 크기",type:"number",value:g.width,onChange:Gn,fullWidth:!0,margin:"normal",InputProps:{endAdornment:"px"}})}),m(W,{item:!0,xs:12,md:3,children:[m(Zt,{fullWidth:!0,margin:"normal",children:[a(hn,{children:"세로 크기"}),m(an,{name:"heightType",value:g.heightType,onChange:Gn,label:"세로 크기",children:[a(Me,{value:"fixed",children:"고정 크기"}),a(Me,{value:"auto",children:"자동 크기"})]})]}),g.heightType==="fixed"&&a($e,{name:"height",label:"높이 (px)",type:"number",value:g.height,onChange:Gn,fullWidth:!0,margin:"normal",InputProps:{endAdornment:"px"}})]}),a(W,{item:!0,xs:12,md:6,children:a(Ja,{label:"시작일",value:g.startDate,onChange:Ue=>Xr("startDate",Ue),renderInput:Ue=>a($e,{...Ue,fullWidth:!0,margin:"normal"})})}),a(W,{item:!0,xs:12,md:6,children:a(Ja,{label:"종료일",value:g.endDate,onChange:Ue=>Xr("endDate",Ue),renderInput:Ue=>a($e,{...Ue,fullWidth:!0,margin:"normal"})})}),a(W,{item:!0,xs:12,md:6,children:a(Lt,{control:a(sn,{name:"closeOnClick",checked:g.closeOnClick,onChange:Gn}),label:"클릭시 닫기"})}),a(W,{item:!0,xs:12,md:6,children:a(Lt,{control:a(sn,{name:"showOnce",checked:g.showOnce,onChange:Gn}),label:"한번만 표시"})}),m(W,{item:!0,xs:12,children:[a(M,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:"이미지 업로드 (선택사항)"}),m(Se,{variant:"outlined",component:"label",disabled:p,sx:{mb:2},children:[p?"업로드 중...":"이미지 파일 선택",a("input",{type:"file",hidden:!0,accept:"image/*",onChange:ra})]}),p&&m(j,{sx:{mb:2},children:[a(QF,{}),a(M,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:"이미지를 업로드 중입니다..."})]}),a($e,{name:"imageUrl",label:"이미지 URL (직접 입력 또는 업로드)",value:g.imageUrl,onChange:Gn,fullWidth:!0,margin:"normal",helperText:"이미지 파일을 업로드하거나 직접 URL을 입력하세요"})]}),a(W,{item:!0,xs:12,children:a($e,{name:"linkUrl",label:"링크 URL (선택사항)",value:g.linkUrl,onChange:Gn,fullWidth:!0,margin:"normal"})}),a(W,{item:!0,xs:12,children:a(zs,{value:g.content,onChange:Ue=>w(ct=>({...ct,content:Ue})),label:"팝업 내용",height:300,required:!0})}),a(W,{item:!0,xs:12,children:a($e,{name:"closeAfterHours",label:"시간 동안 보지 않기 (시간)",type:"number",value:g.closeAfterHours,onChange:Gn,fullWidth:!0,margin:"normal",InputProps:{inputProps:{min:0,max:168}},helperText:"0 입력 시 '보지 않기' 버튼이 표시되지 않습니다. (기본값: 12시간)"})}),a(W,{item:!0,xs:12,children:a($e,{name:"writer",label:"작성자",value:g.writer,onChange:Gn,fullWidth:!0,margin:"normal",required:!0})})]})})}),m(nr,{children:[a(Se,{onClick:()=>d(!1),children:"취소"}),a(Se,{variant:"contained",onClick:Xn,disabled:!g.title||!g.content||!g.writer,children:h==="create"?"등록":"수정"})]})]}),a(ua,{open:C.open,autoHideDuration:4e3,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:T,severity:C.severity,sx:{width:"100%"},children:C.message})}),m(Yn,{open:b,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[a(Zn,{sx:{pb:1},children:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(Oce,{color:"warning"}),"숨김팝업 일괄 복원"]})}),m(Kn,{children:[a(M,{variant:"body1",sx:{mb:2},children:"현재 사용자에게 숨겨진 팝업이 있을 수 있습니다."}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"이 작업을 수행하면:"}),m(j,{component:"ul",sx:{pl:2,mb:2},children:[a(M,{component:"li",variant:"body2",color:"text.secondary",children:"모든 숨겨진 팝업이 다시 표시됩니다"}),a(M,{component:"li",variant:"body2",color:"text.secondary",children:'사용자가 설정한 "시간 동안 보지 않기" 설정이 초기화됩니다'}),a(M,{component:"li",variant:"body2",color:"text.secondary",children:"사용자 페이지 새로고침 시 팝업이 즉시 노출됩니다"})]}),a(Jt,{severity:"warning",sx:{mt:2},children:m(M,{variant:"body2",children:[a("strong",{children:"주의:"}),' 이는 개발환경 전용 기능입니다. 복원 후 사용자는 다시 "시간 동안 보지 않기"를 설정할 수 있습니다.']})})]}),m(nr,{children:[a(Se,{onClick:()=>P(!1),children:"취소"}),a(Se,{variant:"contained",color:"warning",onClick:Qt,children:"복원하기"})]})]})]})},Ece=()=>{const[e,t]=u.useState([]),[n,r]=u.useState({}),[i,o]=u.useState(null),[s,l]=u.useState(!1),c="/user-api",d=async()=>{try{const v=await Ps.get(`${c}/api/popups/auto-close-settings`);v.data.success&&v.data.data&&o(v.data.data)}catch{o({close_after_hours:24,enabled:!0})}},h=async()=>{try{const v=await Ps.get(`${c}/api/popups/active?page=admin`);if(v.data.success){const b=JSON.parse(localStorage.getItem("temporaryDismissedPopups")||"{}"),P=new Date().getTime(),k={};Object.keys(b).forEach(S=>{b[S]>P&&(k[S]=b[S])}),localStorage.setItem("temporaryDismissedPopups",JSON.stringify(k));const C=v.data.data.filter(S=>{if(S.display_page!=="all"&&S.display_page!=="admin")return!1;if(k[String(S.id)]){const _=Math.ceil((k[String(S.id)]-P)/6e4);return!1}return!0});t(C)}}catch(v){console.error("팝업 로드 오류:",v)}};u.useEffect(()=>{const v=()=>{const C=localStorage.getItem("token");l(!!C),C?(d(),h()):t([])};v();const b=C=>{C.key==="token"&&v()},P=()=>{v()};window.addEventListener("storage",b),window.addEventListener("authChange",P);const k=setInterval(()=>{localStorage.getItem("token")&&s&&h()},3e5);return()=>{window.removeEventListener("storage",b),window.removeEventListener("authChange",P),clearInterval(k)}},[]);const f=v=>{n[v.id]&&(clearTimeout(n[v.id]),r(b=>{const P={...b};return delete P[v.id],P})),t(b=>b.filter(P=>P.id!==v.id))},g=async v=>{n[v.id]&&(clearTimeout(n[v.id]),r(C=>{const S={...C};return delete S[v.id],S}));const b=v.close_after_hours||12,P=new Date().getTime()+b*60*60*1e3,k=JSON.parse(localStorage.getItem("temporaryDismissedPopups")||"{}");k[String(v.id)]=P,localStorage.setItem("temporaryDismissedPopups",JSON.stringify(k));try{await Ps.post(`${c}/api/popups/${v.id}/dismiss`,{hours:b})}catch(C){console.error("시간 기반 팝업 닫기 추적 오류:",C)}t(C=>C.filter(S=>S.id!==v.id))};if(u.useEffect(()=>()=>{Object.values(n).forEach(v=>clearTimeout(v))},[n]),!s)return null;const w=v=>{v.click_url&&window.open(v.click_url,"_blank"),v.close_on_click&&f(v)},x=v=>v?v.replace(/<br\s*\/?\>\s*$/gi,"").replace(/(<img[^>]*>)\s*<br\s*\/?\>/gi,"$1"):"",y=v=>{const b={width:`${v.width}px`,height:v.height==="auto"?"auto":`${v.height}px`,position:"fixed",zIndex:1500,backgroundColor:v.background_color||"white",color:v.text_color||"#000000",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",borderRadius:"8px",overflow:"hidden",fontSize:v.text_size==="small"?"12px":v.text_size==="large"?"16px":"14px"};if(v.top_position!==null&&v.top_position!==void 0&&v.top_position!==0||v.left_position!==null&&v.left_position!==void 0&&v.left_position!==0)return{...b,top:`${v.top_position}px`,left:`${v.left_position}px`};switch(v.position){case"center":return{...b,top:"50%",left:"50%",transform:"translate(-50%, -50%)"};case"top-left":return{...b,top:"20px",left:"20px"};case"top-right":return{...b,top:"20px",right:"20px"};case"bottom-left":return{...b,bottom:"20px",left:"20px"};case"bottom-right":return{...b,bottom:"20px",right:"20px"};default:return{...b,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}},p=v=>{const b={position:"absolute",top:"10px",right:"10px",background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",zIndex:1};switch(v){case"minimal":return{...b,fontSize:"16px",opacity:.7,"&:hover":{opacity:1}};case"rounded":return{...b,borderRadius:"50%",width:"30px",height:"30px",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center"};default:return b}};return a(bn,{children:e.map(v=>m("div",{className:`popup-container popup-type-${v.popup_type} ${v.show_header===!1?"no-header":""} text-${v.text_size||"medium"}`,style:y(v),children:[v.show_header!==!1&&m("div",{className:"popup-header",style:{padding:"10px 15px",borderBottom:"1px solid #ddd",position:"relative",backgroundColor:v.header_background_color||"#f5f5f5"},children:[a("h3",{style:{margin:0,paddingRight:"30px"},children:v.title}),a("button",{className:`popup-close ${v.close_button_style?`style-${v.close_button_style}`:""}`,onClick:()=>f(v),"aria-label":"닫기",style:p(v.close_button_style),children:"×"})]}),v.show_header===!1&&a("button",{className:`popup-close ${v.close_button_style?`style-${v.close_button_style}`:""}`,onClick:()=>f(v),"aria-label":"닫기",style:p(v.close_button_style),children:"×"}),a("div",{className:"popup-content",onClick:()=>w(v),style:{cursor:v.click_url?"pointer":"default"},dangerouslySetInnerHTML:{__html:x(v.content)}}),v.close_after_hours&&v.close_after_hours>0&&a("div",{className:"popup-footer",style:{padding:"10px 15px",borderTop:"1px solid #ddd",backgroundColor:"#f9f9f9",textAlign:"center"},children:m("button",{onClick:()=>g(v),style:{padding:"8px 16px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},onMouseOver:b=>b.target.style.backgroundColor="#555",onMouseOut:b=>b.target.style.backgroundColor="#666",children:[v.close_after_hours,"시간 동안 보지 않기"]})})]},v.id))})},Mce=()=>{const e=On();return a(Xl,{maxWidth:"md",children:m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",textAlign:"center",py:8},children:[a(ZF,{sx:{fontSize:100,color:e.palette.error.main,mb:4}}),a(M,{variant:"h1",component:"h1",sx:{fontSize:{xs:"4rem",md:"6rem"},fontWeight:700,color:e.palette.text.primary,mb:2},children:"404"}),a(M,{variant:"h4",component:"h2",sx:{mb:3,color:e.palette.text.primary,fontWeight:500},children:"페이지를 찾을 수 없습니다"}),a(M,{variant:"body1",color:"text.secondary",sx:{mb:4,maxWidth:500},children:"요청하신 페이지가 삭제되었거나, 이름이 변경되었거나, 일시적으로 사용이 불가능합니다."}),m(j,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[a(Se,{component:fd,to:"/dashboard",variant:"contained",color:"primary",size:"large",startIcon:a(ez,{}),sx:{py:1.5,px:3,boxShadow:"0 8px 16px -4px rgba(33, 150, 243, 0.3)"},children:"대시보드로 돌아가기"}),a(Se,{component:"a",href:"mailto:support@example.com",variant:"outlined",color:"primary",size:"large",sx:{py:1.5,px:3},children:"관리자에게 문의하기"})]})]})})},Lce=()=>{const e=On(),t=Kr(),n=mo(),{isLoading:r,isAuthenticated:i,error:o}=zn(p=>p.auth),[s,l]=u.useState({username:"",password:""}),[c,d]=u.useState(!1),[h,f]=u.useState(!1);u.useEffect(()=>{i&&n("/dashboard")},[i,n]);const g=p=>{const{name:v,value:b}=p.target;l(P=>({...P,[v]:b}))},w=p=>{f(p.target.checked)},x=p=>{p.preventDefault(),t(Cf(s))},y=()=>{d(!c)};return a(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",bgcolor:e.palette.background.default,backgroundImage:`linear-gradient(145deg, ${e.palette.primary.main}15, ${e.palette.background.default})`,p:3},children:m(Xl,{maxWidth:"sm",children:[a(Sn,{sx:{width:"100%",borderRadius:2,boxShadow:e.shadows[4],overflow:"hidden"},children:m(j,{sx:{p:4,py:6,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white"},children:[a(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",bgcolor:e.palette.primary.main,color:"white",width:64,height:64,borderRadius:"50%",mb:3,boxShadow:"0 8px 20px -10px rgba(33, 150, 243, 0.6)"},children:a(bS,{fontSize:"large"})}),a(M,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:600,children:"관리자 로그인"}),a(M,{variant:"body2",color:"text.secondary",textAlign:"center",sx:{mb:3},children:"관리자 계정으로 로그인하여 시스템을 관리하세요."}),o&&a(Jt,{severity:"error",sx:{mb:3,width:"100%"},children:o}),m(j,{component:"form",onSubmit:x,sx:{width:"100%",mt:1},children:[a($e,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"아이디",name:"username",autoComplete:"username",autoFocus:!0,value:s.username,onChange:g,sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(v1,{color:"action"})})}}),a($e,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"비밀번호",type:c?"text":"password",id:"password",autoComplete:"current-password",value:s.password,onChange:g,InputProps:{startAdornment:a(Dt,{position:"start",children:a(bS,{color:"action"})}),endAdornment:a(Dt,{position:"end",children:a(Ct,{"aria-label":"toggle password visibility",onClick:y,edge:"end",children:c?a(Bu,{}):a(ds,{})})})},sx:{mb:2}}),m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[a(Lt,{control:a(gr,{checked:h,onChange:w,color:"primary"}),label:"로그인 상태 유지"}),a(M,{variant:"body2",color:"primary",sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"비밀번호 찾기"})]}),a(Se,{type:"submit",fullWidth:!0,variant:"contained",disabled:r,sx:{py:1.5,mt:2,mb:2,bgcolor:e.palette.primary.main,color:"white","&:hover":{bgcolor:e.palette.primary.dark},boxShadow:"0 8px 16px -4px rgba(33, 150, 243, 0.3)"},startIcon:r?null:a(tz,{}),children:r?a(ir,{size:24,color:"inherit"}):"로그인"}),a(yn,{sx:{my:3},children:a(M,{variant:"body2",color:"text.secondary",children:"또는"})}),m(j,{sx:{display:"flex",justifyContent:"center",gap:1,mt:2},children:[a(Se,{variant:"outlined",size:"small",onClick:()=>alert("관리자 문의"),children:"관리자 문의"}),a(Se,{variant:"outlined",size:"small",onClick:()=>alert("접근 요청"),children:"접근 요청"})]})]})]})}),m(M,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:3},children:["© ",new Date().getFullYear()," 관리자 시스템. All rights reserved."]})]})})},ld=[{value:"Honor API",label:"Honor API"}],$ce=[{id:"no",label:"No.",width:70,minWidth:50,align:"center",type:"number"},{id:"vendorLogo",label:"로고",width:120,minWidth:100,align:"center",type:"image"},{id:"vendorName",label:"게임사",width:200,align:"left",type:"text",sortable:!0},{id:"enabled",label:"활성/비활성",width:120,align:"center",type:"toggle",onToggle:null},{id:"api",label:"API",width:180,align:"center",type:"dropdown",dropdownOptions:ld,onApiChange:null},{id:"gameCount",label:"게임 수",width:100,align:"center",type:"text",sortable:!0},{id:"action",label:"액션",width:200,align:"center",type:"actions",actions:[{type:"button",buttonText:"게임리스트",onClick:null,variant:"outlined",color:"primary"},{type:"button",buttonText:"동기화",onClick:null,variant:"contained",color:"secondary"}]}],jce=[{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"enabled",label:"활성"},{value:"disabled",label:"비활성"}]},{id:"api",label:"API",items:[{value:"",label:"전체"},...ld]}],Fce=(e,t)=>{const n=["Video Slot","Classic Slot","Progressive Slot","3D Slot","Megaways"];return Array.from({length:t},(r,i)=>({id:`${e.toLowerCase().replace(/\s+/g,"-")}-game-${i+1}`,name:`${e} - ${n[i%n.length]} ${i+1}`,type:n[i%n.length],rtp:(94+Math.random()*4).toFixed(2)+"%",volatility:["Low","Medium","High"][Math.floor(Math.random()*3)]}))},zce=e=>{const t={"Pragmatic Play":{src:"/image/pragmatic-play.svg",fallback:{bg:"#FF6B35",text:"PP"}},NetEnt:{src:"/image/netent.svg",fallback:{bg:"#00A859",text:"NE"}},Microgaming:{src:"/image/microgaming.svg",fallback:{bg:"#E74C3C",text:"MG"}},"Play'n GO":{src:"/image/playngo.svg",fallback:{bg:"#9B59B6",text:"PNG"}},"Red Tiger":{src:"/image/red-tiger.svg",fallback:{bg:"#E67E22",text:"RT"}},"Big Time Gaming":{src:"/image/big-time-gaming.svg",fallback:{bg:"#3498DB",text:"BTG"}},"Push Gaming":{src:"/image/push-gaming.svg",fallback:{bg:"#1ABC9C",text:"PG"}},"Nolimit City":{src:"/image/nolimit-city.svg",fallback:{bg:"#34495E",text:"NC"}},"Hacksaw Gaming":{src:"/image/hacksaw-gaming.svg",fallback:{bg:"#F39C12",text:"HG"}},"ELK Studios":{src:"/image/elk-studios.svg",fallback:{bg:"#8E44AD",text:"ELK"}}},n=e.replace(/\s+\d+$/,"");return(t[n]||{fallback:{bg:"#95A5A6",text:"LOGO"}}).fallback},hR=(e=30)=>{const t=["Pragmatic Play","NetEnt","Microgaming","Play'n GO","Red Tiger","Big Time Gaming","Push Gaming","Nolimit City","Hacksaw Gaming","ELK Studios"],n=[];for(let r=0;r<e;r++){const i=r%t.length,o=Math.floor(r/t.length),s=t[i]+(o>0?` ${o+1}`:""),l=Math.floor(Math.random()*20)+10,c=Fce(s,l);n.push({id:r+1,no:r+1,vendorLogo:zce(s),vendorName:s,enabled:Math.random()>.2,api:"Honor API",games:c,gameCount:`${c.length}개`,order:r+1})}return n};class Nce{async getGames(t={}){try{return(await Pe.games.getAll(t)).data}catch(n){if(n.code==="ERR_NETWORK")return this.getMockGames(t);throw n}}async getVendors(t){try{return(await Pe.games.getVendors({game_type:t})).data}catch(n){if(n.code==="ERR_NETWORK")return this.getMockVendors(t);throw n}}async syncGames(t,n){var r,i;try{return(await Pe.games.sync({vendor:t,game_type:n})).data}catch(o){if((i=(r=o.response)==null?void 0:r.data)!=null&&i.details){const s=o.response.data.details,l=`동기화 실패: ${s.message||"알 수 없는 오류"}`;throw s.apiConfigured?new Error(l):new Error("Honor API 토큰이 설정되지 않았습니다. 관리자에게 문의하세요.")}if(o.code==="ERR_NETWORK")return{success:!0,message:"[테스트] 게임 동기화가 완료되었습니다.",synced_count:Math.floor(Math.random()*100)+50};throw o}}async updateGameSettings(t,n){try{return(await Pe.games.update(t,n)).data}catch(r){throw r}}async getVendorGameCounts(t){try{return(await Pe.get("/games/vendor-game-counts",{params:{game_type:t}})).data.data||{}}catch{return{pragmatic:128,habanero:95,netent:87,redtiger:72,playngo:65,evolution:45,ag:38,mg:42}}}async updateCategoryStatus(t,n){try{return(await Pe.put(`/games/categories/${t}/status`,{is_active:n})).data}catch(r){throw r}}async getSyncLogs(t={}){try{return(await Pe.get("/games/sync-logs",{params:t})).data}catch(n){throw n}}getMockVendors(t){return{success:!0,data:{slot:[{code:"pragmatic",name:"Pragmatic Play",name_ko:"프라그마틱 플레이",type:"slot",is_active:!0},{code:"habanero",name:"Habanero",name_ko:"하바네로",type:"slot",is_active:!0},{code:"netent",name:"NetEnt",name_ko:"넷엔트",type:"slot",is_active:!0},{code:"redtiger",name:"Red Tiger",name_ko:"레드타이거",type:"slot",is_active:!0},{code:"playngo",name:"Play'n GO",name_ko:"플레이앤고",type:"slot",is_active:!0}],casino:[{code:"evolution",name:"Evolution Gaming",name_ko:"에볼루션 게이밍",type:"casino",is_active:!0},{code:"ag",name:"Asia Gaming",name_ko:"아시아 게이밍",type:"casino",is_active:!0},{code:"mg",name:"Micro Gaming",name_ko:"마이크로 게이밍",type:"casino",is_active:!0},{code:"dreamgame",name:"Dream Gaming",name_ko:"드림 게이밍",type:"casino",is_active:!0},{code:"wm",name:"WM Live",name_ko:"WM 라이브",type:"casino",is_active:!0}]}[t]||[]}}async getTagMode(t){try{return(await Pe.get("/games/tag-mode",{params:{game_type:t}})).data}catch(n){return console.error("태그 모드 조회 실패:",n),{success:!0,mode:"manual"}}}async updateVendorStatus(t,n){try{const r=await Pe.put(`/games/vendors/${t}/status`,{is_active:n});return r.data,r.data}catch(r){throw console.error("게임사 상태 업데이트 실패:",r),r}}async updateGameStatus(t,n){var r,i;try{const o=await Pe.put(`/games/${t}/status`,{is_active:n});return o.data,o.data,(r=o.data)==null||r.success,o.data?o.data:o}catch(o){throw console.error("게임 상태 업데이트 실패:",o),console.error("에러 응답 데이터:",(i=o.response)==null?void 0:i.data),o}}async setTagMode(t,n){try{return(await Pe.post("/games/tag-mode",{game_type:t,mode:n})).data}catch(r){throw console.error("태그 모드 설정 실패:",r),r}}async clearAllTags(t){try{return(await Pe.post("/games/clear-all-tags",{game_type:t})).data}catch(n){throw console.error("태그 해제 실패:",n),n}}async updateProviderOrder(t){try{return(await Pe.put("/games/providers/order",{providers:t})).data}catch(n){throw console.error("게임사 순서 업데이트 실패:",n),n}}getMockGames(t){const n=[];return(t.game_type==="slot"?["pragmatic","habanero","netent","redtiger","playngo"]:["evolution","ag","mg","dreamgame","wm"]).forEach(i=>{for(let o=1;o<=20;o++)n.push({id:`${i}_${o}`,vendor:i,game_code:`${i}_game_${o}`,game_name:`${i.toUpperCase()} Game ${o}`,game_name_ko:`${i} 게임 ${o}`,game_type:t.game_type||"slot",thumbnail_url:`/images/games/${i}_${o}.jpg`,is_active:!0,is_featured:Math.random()>.8,is_hot:Math.random()>.7,is_new:Math.random()>.9,rtp:(Math.random()*5+94).toFixed(2),min_bet:100,max_bet:1e6})}),{success:!0,data:n,count:n.length}}}const Wr=new Nce,Xj=({open:e,onClose:t,vendorName:n,vendorLogo:r,vendorCode:i,gameType:o="slot",tagMode:s="manual",onGameUpdate:l})=>{const[c,d]=u.useState([]),[h,f]=u.useState(!1),[g,w]=u.useState(null),[x,y]=u.useState(""),[p,v]=u.useState({showActive:!0,showInactive:!0,showFeatured:!1,showHot:!1,showNew:!1}),[b,P]=u.useState(null),[k,C]=u.useState([]),[S,_]=u.useState(!1),[T,I]=u.useState(""),[L]=u.useState(["Honor API"]),[A,D]=u.useState("all");u.useEffect(()=>{e&&i&&(B(),C([]),_(!1))},[e,i]);const B=async()=>{try{f(!0),w(null);const H=await Wr.getGames({vendor:i,game_type:o});H.success&&H.data?d(H.data):d([])}catch(H){console.error("게임 목록 로드 실패:",H),w("게임 목록을 불러오는데 실패했습니다."),d([])}finally{f(!1)}},$=async H=>{var K;H.id,H.game_name,H.is_active,H.is_active,H.is_active;try{const ee=H.is_active!==1,ge=await Wr.updateGameStatus(H.id,ee);ge!=null&&ge.success||(K=ge==null?void 0:ge.data)!=null&&K.success?(d(oe=>oe.map(G=>G.id===H.id?{...G,is_active:ee?1:0}:G)),l&&l(H.id,{is_active:ee?1:0})):(console.error("API 응답 실패:",ge),alert("게임 상태 변경에 실패했습니다."))}catch(ee){console.error("게임 상태 업데이트 실패:",ee),console.error("에러 상세:",{message:ee.message,stack:ee.stack,response:ee.response}),alert("게임 상태 변경 중 오류가 발생했습니다.")}},N=async(H,K)=>{try{const ee=await Wr.updateGameSettings(H.id,K);ee.success&&(ee.data?d(ge=>ge.map(oe=>oe.id===H.id?ee.data:oe)):d(ge=>ge.map(oe=>oe.id===H.id?{...oe,...K}:oe)),P(null),l&&l(H.id,K))}catch(ee){console.error("게임 설정 업데이트 실패:",ee)}},F=H=>{C(K=>K.includes(H)?K.filter(ee=>ee!==H):[...K,H])},O=()=>{C(S?[]:X.map(H=>H.id)),_(!S)},R=async H=>{try{const K=k.map(oe=>Wr.updateGameStatus(oe,H)),ge=(await Promise.allSettled(K)).filter(oe=>{var G,Q,te;return oe.status==="fulfilled"&&(((G=oe.value)==null?void 0:G.success)||((te=(Q=oe.value)==null?void 0:Q.data)==null?void 0:te.success))}).length;ge>0&&(d(oe=>oe.map(G=>k.includes(G.id)?{...G,is_active:H?1:0}:G)),alert(`${ge}개 게임의 상태가 변경되었습니다.`)),ge<k.length&&alert(`${k.length-ge}개 게임의 상태 변경에 실패했습니다.`),C([]),_(!1)}catch(K){console.error("일괄 상태 업데이트 실패:",K),alert("일괄 상태 변경 중 오류가 발생했습니다.")}},E=async(H,K)=>{try{const ee={};H==="featured"&&(ee.is_featured=K),H==="hot"&&(ee.is_hot=K),H==="new"&&(ee.is_new=K);const ge=k.map(G=>{const Q=c.find(te=>te.id===G);return Wr.updateGameSettings(G,ee)});await Promise.all(ge),d(G=>G.map(Q=>k.includes(Q.id)?{...Q,...ee}:Q));const oe=H==="featured"?"추천":H==="hot"?"인기":"신규";alert(`${k.length}개 게임을 ${oe} 게임으로 설정했습니다.`),C([]),_(!1)}catch(ee){console.error("일괄 태그 업데이트 실패:",ee)}},z=async H=>{if(!(!H||k.length===0))try{alert(`${k.length}개 게임을 ${H}로 변경하는 기능은 백엔드 구현이 필요합니다.`),C([]),_(!1),I("")}catch(K){console.error("일괄 API 변경 실패:",K)}},q=async()=>{if(s!=="manual"){alert("수동 모드에서만 태그를 해제할 수 있습니다.");return}if(window.confirm("모든 게임의 추천/인기/신규 태그를 해제하시겠습니까?"))try{const H=await Wr.clearAllTags(o);H.success&&(d(K=>K.map(ee=>({...ee,is_featured:0,is_hot:0,is_new:0}))),alert(H.message))}catch(H){console.error("태그 해제 실패:",H),alert("태그 해제에 실패했습니다.")}},X=c.filter(H=>{var K,ee,ge;if(x){const oe=x.toLowerCase();if(!((K=H.game_name)!=null&&K.toLowerCase().includes(oe))&&!((ee=H.game_name_ko)!=null&&ee.toLowerCase().includes(oe))&&!((ge=H.game_code)!=null&&ge.toLowerCase().includes(oe)))return!1}return!(A!=="all"&&A!=="Honor API"||!p.showActive&&H.is_active===1||!p.showInactive&&H.is_active!==1||p.showFeatured&&!H.is_featured||p.showHot&&!H.is_hot||p.showNew&&!H.is_new)});return m(Yn,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[m(Zn,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:1,borderColor:"divider"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[r&&a(j,{sx:{width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:1,bgcolor:"grey.100"},children:typeof r=="string"?a("img",{src:r,alt:n,style:{maxWidth:"100%",maxHeight:"100%"}}):a(M,{variant:"h6",children:r})}),m(j,{children:[m(M,{variant:"h6",children:[n," 게임 목록"]}),m(M,{variant:"caption",color:"text.secondary",children:["총 ",X.length,"개 / ",c.length,"개 게임"]})]}),s==="manual"&&a(Se,{size:"small",variant:"outlined",color:"error",onClick:q,sx:{ml:2},children:"모든 태그 해제"})]}),a(Ct,{onClick:t,children:a(Sa,{})})]}),m(Kn,{sx:{p:0},children:[a(j,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"grey.50"},children:m(j,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[a($e,{size:"small",placeholder:"게임 검색...",value:x,onChange:H=>y(H.target.value),sx:{width:300},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{})})}}),a(Zt,{size:"small",sx:{minWidth:120},children:m(an,{value:A,onChange:H=>D(H.target.value),displayEmpty:!0,children:[a(Me,{value:"all",children:"전체 API"}),L.map(H=>a(Me,{value:H,children:H},H))]})}),m(j,{sx:{display:"flex",gap:1,flexWrap:"wrap",flex:1},children:[a(Lt,{control:a(sn,{size:"small",checked:p.showActive,onChange:H=>v(K=>({...K,showActive:H.target.checked}))}),label:"활성"}),a(Lt,{control:a(sn,{size:"small",checked:p.showInactive,onChange:H=>v(K=>({...K,showInactive:H.target.checked}))}),label:"비활성"}),a(Lt,{control:a(sn,{size:"small",checked:p.showFeatured,onChange:H=>v(K=>({...K,showFeatured:H.target.checked}))}),label:"추천"}),a(Lt,{control:a(sn,{size:"small",checked:p.showHot,onChange:H=>v(K=>({...K,showHot:H.target.checked}))}),label:"인기"}),a(Lt,{control:a(sn,{size:"small",checked:p.showNew,onChange:H=>v(K=>({...K,showNew:H.target.checked}))}),label:"신규"})]})]})}),k.length>0&&a(j,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"primary.50"},children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m(M,{variant:"body2",children:[k.length,"개 게임 선택됨"]}),m(j,{sx:{display:"flex",gap:1,alignItems:"center"},children:[a(Se,{size:"small",variant:"outlined",onClick:()=>R(!0),children:"선택 게임 활성화"}),a(Se,{size:"small",variant:"outlined",onClick:()=>R(!1),children:"선택 게임 비활성화"}),a(yn,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),a(Fn,{title:"선택한 게임을 추천 게임으로 설정",children:a(Ct,{size:"small",color:"primary",onClick:()=>E("featured",!0),children:a(lm,{})})}),a(Fn,{title:"선택한 게임을 인기 게임으로 설정",children:a(Ct,{size:"small",color:"error",onClick:()=>E("hot",!0),children:a(cm,{})})}),a(Fn,{title:"선택한 게임을 신규 게임으로 설정",children:a(Ct,{size:"small",color:"success",onClick:()=>E("new",!0),children:a(um,{})})}),a(yn,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),m(j,{sx:{display:"flex",gap:1,alignItems:"center"},children:[m(Zt,{size:"small",sx:{minWidth:120},children:[a(hn,{children:"API 선택"}),m(an,{value:T,onChange:H=>I(H.target.value),label:"API 선택",children:[a(Me,{value:"",children:"선택"}),L.map(H=>a(Me,{value:H,children:H},H))]})]}),a(Se,{size:"small",variant:"contained",onClick:()=>z(T),disabled:!T,startIcon:a(vS,{}),children:"API 변경"})]}),a(yn,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),a(Se,{size:"small",variant:"outlined",color:"error",onClick:()=>{C([]),_(!1)},children:"선택 해제"})]})]})}),a(j,{sx:{p:2,height:k.length>0?"calc(100% - 200px)":"calc(100% - 140px)",overflow:"auto"},children:h?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})}):g?a(Jt,{severity:"error",sx:{m:2},children:g}):X.length===0?a(j,{sx:{textAlign:"center",py:4},children:a(M,{color:"text.secondary",children:x?"검색 결과가 없습니다.":"게임이 없습니다."})}):m(bn,{children:[a(j,{sx:{mb:2},children:a(Lt,{control:a(gr,{checked:S&&k.length===X.length,indeterminate:k.length>0&&k.length<X.length,onChange:O}),label:`전체 선택 (${X.length}개)`})}),a(yn,{sx:{mb:2}}),a(W,{container:!0,spacing:2,children:X.map(H=>a(W,{item:!0,xs:12,sm:6,md:4,lg:3,children:m(Sn,{sx:{height:"100%",display:"flex",flexDirection:"column",opacity:H.is_active?1:.6,transition:"all 0.3s",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:3}},children:[a(j,{sx:{position:"absolute",top:8,left:8,zIndex:1},children:a(gr,{checked:k.includes(H.id),onChange:()=>F(H.id),sx:{bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.95)"}}})}),m(j,{sx:{position:"absolute",top:8,right:8,zIndex:1,display:"flex",gap:.5},children:[H.is_featured===1&&m(j,{sx:{bgcolor:"primary.main",color:"white",px:1,py:.5,borderRadius:1,display:"flex",alignItems:"center",gap:.5,fontSize:"0.75rem",fontWeight:"bold",boxShadow:2},children:[a(lm,{sx:{fontSize:14}}),"추천"]}),H.is_hot===1&&m(j,{sx:{bgcolor:"error.main",color:"white",px:1,py:.5,borderRadius:1,display:"flex",alignItems:"center",gap:.5,fontSize:"0.75rem",fontWeight:"bold",boxShadow:2},children:[a(cm,{sx:{fontSize:14}}),"인기"]}),H.is_new===1&&m(j,{sx:{bgcolor:"success.main",color:"white",px:1,py:.5,borderRadius:1,display:"flex",alignItems:"center",gap:.5,fontSize:"0.75rem",fontWeight:"bold",boxShadow:2},children:[a(um,{sx:{fontSize:14}}),"신규"]})]}),a(nz,{component:"img",height:"160",image:H.thumbnail_url||"/images/game-placeholder.png",alt:H.game_name,sx:{objectFit:"cover"}}),m(In,{sx:{flexGrow:1,pb:1},children:[a(M,{variant:"subtitle2",gutterBottom:!0,noWrap:!0,children:H.game_name_ko||H.game_name}),a(M,{variant:"caption",color:"text.secondary",display:"block",noWrap:!0,children:H.game_code}),a(ut,{icon:a(vS,{sx:{fontSize:14}}),label:H.api||"Honor API",size:"small",sx:{mt:1},variant:"outlined"}),H.rtp&&m(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["RTP: ",H.rtp,"%"]})]}),a(rz,{sx:{px:2,pb:2},children:m(j,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[a(Lt,{control:a(sn,{size:"small",checked:!!H.is_active,onChange:K=>{K.stopPropagation(),H.id,H.is_active,K.target.checked,$(H)},onClick:K=>{K.stopPropagation()}}),label:H.is_active?"활성":"비활성",labelPlacement:"end",sx:{m:0}}),m(j,{sx:{display:"flex",gap:.5,ml:"auto"},children:[a(Fn,{title:H.is_featured===1?"추천 게임 해제":"추천 게임 설정",children:a(Ct,{size:"small",onClick:()=>{N(H,{is_featured:H.is_featured===1?0:1})},sx:{"& .MuiSvgIcon-root":{color:H.is_featured===1?"#1976d2":"#9e9e9e"},"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)"}},children:H.is_featured===1?a(lm,{}):a(az,{})})}),a(Fn,{title:H.is_hot===1?"인기 게임 해제":"인기 게임 설정",children:a(Ct,{size:"small",onClick:()=>N(H,{is_hot:H.is_hot===1?0:1}),sx:{"& .MuiSvgIcon-root":{color:H.is_hot===1?"#f44336":"#9e9e9e"},"&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)"}},children:a(cm,{})})}),a(Fn,{title:H.is_new===1?"신규 게임 해제":"신규 게임 설정",children:a(Ct,{size:"small",onClick:()=>N(H,{is_new:H.is_new===1?0:1}),sx:{"& .MuiSvgIcon-root":{color:H.is_new===1?"#4caf50":"#9e9e9e"},"&:hover":{backgroundColor:"rgba(76, 175, 80, 0.08)"}},children:a(um,{})})}),a(Fn,{title:"게임 설정",children:a(Ct,{size:"small",onClick:()=>P(H),children:a(Kf,{})})})]})]})})]})},H.id))})]})})]}),a(nr,{sx:{borderTop:1,borderColor:"divider"},children:a(Se,{onClick:t,children:"닫기"})}),b&&m(Yn,{open:!!b,onClose:()=>P(null),maxWidth:"sm",fullWidth:!0,children:[a(Zn,{children:"게임 설정"}),a(Kn,{children:m(j,{sx:{pt:2},children:[a($e,{fullWidth:!0,label:"게임명 (한국어)",value:b.game_name_ko||"",onChange:H=>P(K=>({...K,game_name_ko:H.target.value})),margin:"normal"}),m(j,{sx:{mt:2,display:"flex",gap:2},children:[a(Lt,{control:a(sn,{checked:!!b.is_featured,onChange:H=>P(K=>({...K,is_featured:H.target.checked}))}),label:"추천 게임"}),a(Lt,{control:a(sn,{checked:!!b.is_hot,onChange:H=>P(K=>({...K,is_hot:H.target.checked}))}),label:"인기 게임"}),a(Lt,{control:a(sn,{checked:!!b.is_new,onChange:H=>P(K=>({...K,is_new:H.target.checked}))}),label:"신규 게임"})]})]})}),m(nr,{children:[a(Se,{onClick:()=>P(null),children:"취소"}),a(Se,{variant:"contained",onClick:()=>N(b,{game_name_ko:b.game_name_ko,is_featured:!!b.is_featured,is_hot:!!b.is_hot,is_new:!!b.is_new}),children:"저장"})]})]})]})},Bce=()=>{const[e,t]=u.useState([]),[n,r]=u.useState(null),[i,o]=u.useState(!1),[s,l]=u.useState({open:!1,message:"",severity:"success"}),[c,d]=u.useState(""),[h,f]=u.useState("manual"),[g,w]=u.useState(!1);u.useEffect(()=>{x(),v()},[]);const x=async()=>{try{const Y=await Wr.getVendors("slot");if(Y.success&&Y.data){const he=await Wr.getVendorGameCounts("slot"),ze=Y.data.map((de,Ze)=>{var lt;return{id:de.code,vendorCode:de.code,vendorLogo:((lt=de.name_ko)==null?void 0:lt.substring(0,2))||de.name.substring(0,2),vendorName:de.name_ko||de.name,enabled:!!de.is_active,api:"Honor API",gameCount:he[de.code]||0}});t(ze)}else{const he=hR(30);t(he)}}catch(Y){console.error("벤더 데이터 로드 실패:",Y),y("벤더 데이터를 불러오는데 실패했습니다. 목업 데이터를 사용합니다.","warning");const he=hR(30);t(he)}},y=(Y,he="success")=>{l({open:!0,message:Y,severity:he})},p=()=>{l(Y=>({...Y,open:!1}))},v=async()=>{try{const Y=await Wr.getTagMode("slot");Y.success&&f(Y.mode)}catch(Y){console.error("태그 모드 로드 실패:",Y)}},b=async Y=>{const he=Y.target.checked?"auto":"manual";w(!0);try{const ze=await Wr.setTagMode("slot",he);ze.success&&(f(he),y(ze.message))}catch(ze){console.error("태그 모드 변경 실패:",ze),y("태그 모드 변경에 실패했습니다.","error")}finally{w(!1)}},{containerRef:P,tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:T,getResizeHandleProps:I}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Y=>{C&&S(!1),_(`${Y}px`)}}),{tableHeaderRef:L,getTableHeaderStyles:A}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),D=async()=>{await x(),y("데이터를 새로고침했습니다.","success")},[B,$]=u.useState(0),[N,F]=u.useState(10),[O,R]=u.useState(Date.now()),{checkedItems:E,sortConfig:z,expandedRows:q,allChecked:X,handleSort:H,handleCheck:K,handleToggleAll:ee,handleToggleExpand:ge}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:B,rowsPerPage:N}),oe=u.useCallback(async Y=>{try{const he=!Y.enabled,ze=await Wr.updateVendorStatus(Y.vendorCode||Y.id,he);ze.success&&(t(de=>de.map(lt=>lt.id===Y.id?{...lt,enabled:he}:lt)),y(ze.message,"success"))}catch(he){console.error("게임사 상태 변경 실패:",he),y("게임사 상태 변경에 실패했습니다.","error")}},[]),G=u.useCallback((Y,he)=>{t(ze=>ze.map(Ze=>Ze.id===Y.id?{...Ze,api:he}:Ze)),y("API가 변경되었습니다.")},[]),Q=u.useCallback(Y=>{r(Y),o(!0)},[]),te=u.useCallback(async Y=>{try{y(`${Y.vendorName} 게임 동기화를 시작합니다...`,"info");const he=await Wr.syncGames(Y.vendorCode||Y.id,"slot");if(he.success){await x();const ze=he.message||`${Y.vendorName} 게임 동기화가 완료되었습니다.`;he.synced_count!==void 0?y(`${ze} (총 ${he.synced_count}개 게임)`,"success"):y(ze,"success")}else y("게임 동기화에 실패했습니다.","error")}catch(he){console.error("게임 동기화 오류:",he),y("게임 동기화 중 오류가 발생했습니다.","error")}},[]),U=u.useCallback(()=>{const Y=Object.keys(E).filter(he=>E[he]);Y.length!==0&&(t(he=>he.map(ze=>Y.includes(ze.id)?{...ze,enabled:!0}:ze)),y(`${Y.length}개의 게임사가 활성화되었습니다.`,"success"))},[E]),V=u.useCallback(()=>{const Y=Object.keys(E).filter(he=>E[he]);Y.length!==0&&(t(he=>he.map(ze=>Y.includes(ze.id)?{...ze,enabled:!1}:ze)),y(`${Y.length}개의 게임사가 비활성화되었습니다.`,"success"))},[E]),ae=u.useCallback(Y=>{const he=Y.target.value;d(he),he&&(t(ze=>ze.map(de=>({...de,api:he}))),y(`모든 게임사의 API가 ${he}로 변경되었습니다.`,"success"),setTimeout(()=>d(""),2e3))},[]),ne=u.useMemo(()=>Object.values(E).filter(Y=>Y).length,[E]),me=u.useMemo(()=>$ce.map(Y=>Y.id==="enabled"?{...Y,onToggle:oe}:Y.id==="api"?{...Y,dropdownOptions:ld,onApiChange:G}:Y.id==="action"?{...Y,actions:Y.actions.map(he=>he.buttonText==="게임리스트"?{...he,onClick:Q}:he.buttonText==="동기화"?{...he,onClick:te}:he)}:Y),[oe,G,Q,te]),ue=u.useMemo(()=>jce,[]),{activeFilters:Ae,handleFilterChange:we,isDateFilterActive:ce,handleOpenDateFilter:De,resetDateFilter:le,dateRange:se,page:J,rowsPerPage:Z,totalCount:ie,totalPages:_e,handlePageChange:Re,handleRowsPerPageChange:He,filteredData:ft,displayData:St,filterValues:Tt,handleFilter:gt,handleClearFilters:et}=yr({columns:me,data:e,defaultRowsPerPage:10,hierarchical:!1,filterOptions:{initialFilters:{status:"",api:""}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:e.length}}),{searchText:xt,totalItems:Rt,sequentialPageNumbers:ht,hasPinnedColumns:jt,isGridReady:$t,handleSearchChange:Ut,handleClearSearch:Bt,togglePageNumberMode:Kt,toggleColumnPin:Ft,setGridReady:Et}=Rn({initialTotalItems:e.length,tableId:"slotGameSettingPage",initialSequentialPageNumbers:!1,onSearch:Y=>{J!==0&&Re(0)},onTogglePageNumberMode:Y=>{R(Date.now())},onToggleColumnPin:Y=>{Y?tn():Xt()}});u.useEffect(()=>{Et(!0)},[Et]);const{columns:Ot,dragInfo:zt,pinnedColumns:Wt,handleDragStart:kt,handleDragEnd:Mt,handleDragOver:Ht,handleDrop:qt,updateColumns:Yt,clearAllPinnedColumns:Xt,setDefaultPinnedColumns:tn}=sr({initialColumns:me,tableId:"slot_settings_table",initialPinnedColumns:["no"],onColumnOrderChange:Y=>{}}),{getDragHandleProps:Fe}=cj({data:e,onDataChange:async Y=>{t(Y);try{const he=await Wr.updateProviderOrder(Y);y("게임사 순서가 변경되었습니다. 회원 페이지에도 적용됩니다.","success")}catch(he){console.error("게임사 순서 업데이트 실패:",he),y("게임사 순서 변경에 실패했습니다.","error"),x()}},orderField:"order",idField:"id",enabled:!0}),{columnVisibility:je,visibleColumns:Oe,hiddenColumnsCount:ke,toggleableColumns:bt,toggleColumnVisibility:it,showAllColumns:fe,resetToDefault:be}=dr(Ot||me,{defaultHiddenColumns:[],alwaysVisibleColumns:["no"],tableId:"slot_settings_table"}),[Te,Ne]=u.useState(null),Ve=!!Te,Ge=u.useCallback(Y=>{Ne(Y)},[]),At=u.useCallback(()=>{Ne(null)},[]);u.useCallback((Y,he,ze)=>{switch(he){case"status":return ze===""||ze==="all"?Y:ze==="enabled"?Y.filter(de=>de.enabled===!0):ze==="disabled"?Y.filter(de=>de.enabled===!1):Y;case"api":return ze===""||ze==="all"?Y:Y.filter(de=>de.api===ze);default:return Y}},[]);const Qe=u.useMemo(()=>{const Y={...Ae};return Object.keys(Y).forEach(he=>{Y[he]==="all"&&(Y[he]="")}),Y},[Ae]),Ie=u.useCallback((Y,he)=>{gt({[Y]:he})},[gt,Ae,Qe]),Xe=u.useMemo(()=>{if(!e||!Array.isArray(e))return[];let Y=[...e];return xt&&xt.trim()!==""&&(Y=Y.filter(he=>he.vendorName.toLowerCase().includes(xt.toLowerCase()))),Qe.status==="enabled"?Y=Y.filter(he=>he.enabled===!0):Qe.status==="disabled"&&(Y=Y.filter(he=>he.enabled===!1)),Qe.api&&Qe.api!==""&&(Y=Y.filter(he=>he.api===Qe.api)),Y},[e,xt,Qe]),ve=(Xe==null?void 0:Xe.length)||0,at=u.useCallback((Y,he)=>{let ze=he;if(typeof Y=="number"&&he===void 0&&(ze=Y),typeof ze!="number"){console.error("유효하지 않은 페이지 번호:",ze);return}$(ze),Re(ze)},[B,Re]),We=u.useCallback(Y=>{if(!Y||!Y.target||!Y.target.value){console.error("슬롯 행 수 변경 이벤트 오류:",Y);return}const he=parseInt(Y.target.value,10);F(he),$(0),He(Y)},[N,He]);u.useEffect(()=>{R(Date.now())},[B,N]),u.useEffect(()=>{Xe&&Xe.length>0},[Xe,ht]),u.useEffect(()=>{R(Date.now())},[ht]);const xe=!0,qe={handleDragStart:kt,handleDragEnd:Mt,handleDragOver:Ht,handleDrop:qt},Ee=u.useMemo(()=>!Oe||!Array.isArray(Oe)?me||[]:Oe.map(he=>he.id==="enabled"?{...he,onToggle:oe}:he.id==="api"?{...he,dropdownOptions:ld,onApiChange:G}:he.id==="action"?{...he,actions:he.actions.map(ze=>ze.buttonText==="게임리스트"?{...ze,onClick:Q}:ze.buttonText==="동기화"?{...ze,onClick:te}:ze)}:he),[Oe,oe,G,Q]);return m(vn,{children:[a(Cn,{title:"슬롯 게임 설정",onDisplayOptionsClick:Ge,showAddButton:!1,showRefreshButton:!0,onRefreshClick:D,sx:{mb:2},customActions:m(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[a(Lt,{control:a(sn,{checked:h==="auto",onChange:b,disabled:g}),label:h==="auto"?"자동 태그 설정":"수동 태그 설정",sx:{mr:2}}),m(Zt,{size:"small",sx:{minWidth:200},children:[a(hn,{children:"API 일괄 변경"}),m(an,{value:c,onChange:ae,label:"API 일괄 변경",children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),ld.map(Y=>a(Me,{value:Y.value,children:Y.label},Y.value))]})]})]})}),a(or,{anchorEl:Te,open:Ve,onClose:At,toggleableColumns:bt,columnVisibility:je,onToggleColumn:it,onShowAll:fe,onReset:be,hiddenColumnsCount:ke,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"슬롯 게임사 목록",totalItems:ve,countLabel:"총 ##count##개의 게임사",sequentialPageNumbers:ht,togglePageNumberMode:Kt,hasPinnedColumns:jt,isGridReady:$t,toggleColumnPin:Ft,searchText:xt,handleSearchChange:Ut,handleClearSearch:Bt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"게임사 검색...",sx:{mb:2}}),a(Fi,{tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_,minHeight:200,maxHeight:1200,step:50}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:Ot,filterValues:Ae||{},activeFilters:Qe||{},filterOptions:ue,handleFilterChange:Ie,onFilter:gt,onClearFilters:et},paginationProps:{count:ve,page:B,rowsPerPage:N,onPageChange:at,onRowsPerPageChange:We,totalCount:ve}})}),m(j,{sx:{width:"100%",mt:2},ref:P,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",B+1," / ",Math.ceil(ve/N)," (페이지당 ",N,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다. "," - 행을 드래그하여 게임사 순서를 변경할 수 있습니다. ","(번호모드: ",ht?"연속번호":"페이지별번호",")"]}),a(An,{columns:Ee,data:Xe,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:E,expandedRows:q,allChecked:X,onCheck:K,onToggleAll:ee,onToggleExpand:ge,onSort:H,sortConfig:z,page:B,rowsPerPage:N,totalCount:ve,sequentialPageNumbers:ht,draggableColumns:xe,onColumnOrderChange:Yt,dragHandlers:qe,dragInfo:zt,fixedHeader:!0,maxHeight:k,tableHeaderRef:L,headerStyle:A(),pinnedColumns:Wt,draggableRows:!0,rowDragHandlers:{getDragHandleProps:Fe},sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}}),a(rr,{resizeHandleProps:I(parseFloat(k)),showIcon:!0,isDragging:T,sx:{mt:1,opacity:T?1:.7,"&:hover":{opacity:1}}})]}),ne>0&&m(j,{sx:{display:"flex",gap:1,mt:2,justifyContent:"flex-start"},children:[m(Se,{variant:"contained",color:"success",size:"small",onClick:U,sx:{fontSize:"0.875rem"},children:["선택 활성 (",ne,")"]}),m(Se,{variant:"contained",color:"error",size:"small",onClick:V,sx:{fontSize:"0.875rem"},children:["선택 비활성 (",ne,")"]})]})]}),a(Xj,{open:i,onClose:()=>o(!1),vendorName:(n==null?void 0:n.vendorName)||"",vendorLogo:(n==null?void 0:n.vendorLogo)||null,vendorCode:(n==null?void 0:n.vendorCode)||(n==null?void 0:n.id),games:(n==null?void 0:n.games)||[],gameType:"slot",tagMode:h,onGameUpdate:(Y,he)=>{}}),a(ua,{open:s.open,autoHideDuration:4e3,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:p,severity:s.severity,sx:{width:"100%"},children:s.message})})]})},cd=[{value:"Honor API",label:"Honor API"}],Hce=[{id:"no",label:"No.",width:70,minWidth:50,align:"center",type:"number"},{id:"vendorLogo",label:"로고",width:120,minWidth:100,align:"center",type:"image"},{id:"vendorName",label:"게임사",width:200,align:"left",type:"text",sortable:!0},{id:"enabled",label:"활성/비활성",width:120,align:"center",type:"toggle",onToggle:null},{id:"api",label:"API",width:180,align:"center",type:"dropdown",dropdownOptions:cd,onApiChange:null},{id:"gameCount",label:"게임 수",width:100,align:"center",type:"text",sortable:!0},{id:"action",label:"액션",width:200,align:"center",type:"actions",actions:[{type:"button",buttonText:"게임리스트",onClick:null,variant:"outlined",color:"primary"},{type:"button",buttonText:"동기화",onClick:null,variant:"contained",color:"secondary"}]}],Wce=[{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"enabled",label:"활성"},{value:"disabled",label:"비활성"}]},{id:"api",label:"API",items:[{value:"",label:"전체"},...cd]}],qce=(e,t)=>{const n=["Live Baccarat","Live Roulette","Live Blackjack","Live Poker","Live Sic Bo","Live Dragon Tiger"];return Array.from({length:t},(r,i)=>({id:`${e.toLowerCase().replace(/\s+/g,"-")}-game-${i+1}`,name:`${e} - ${n[i%n.length]} ${i+1}`,type:n[i%n.length],minBet:Math.floor(Math.random()*5+1)*1e4,maxBet:Math.floor(Math.random()*50+10)*1e5,tables:Math.floor(Math.random()*10)+1}))},Uce=e=>{const t={"Evolution Gaming":{src:"/image/evolution-gaming.svg",fallback:{bg:"#1976D2",text:"EG"}},"Pragmatic Play Live":{src:"/image/pragmatic-play-live.svg",fallback:{bg:"#FF6B35",text:"PPL"}},Ezugi:{src:"/image/ezugi.svg",fallback:{bg:"#4CAF50",text:"EZ"}},"Vivo Gaming":{src:"/image/vivo-gaming.svg",fallback:{bg:"#9C27B0",text:"VG"}},"Authentic Gaming":{src:"/image/authentic-gaming.svg",fallback:{bg:"#FF9800",text:"AG"}},"Asia Gaming":{src:"/image/asia-gaming.svg",fallback:{bg:"#F44336",text:"AG"}},"SA Gaming":{src:"/image/sa-gaming.svg",fallback:{bg:"#3F51B5",text:"SA"}},"Sexy Gaming":{src:"/image/sexy-gaming.svg",fallback:{bg:"#E91E63",text:"SG"}},"Dream Gaming":{src:"/image/dream-gaming.svg",fallback:{bg:"#00BCD4",text:"DG"}},"WM Casino":{src:"/image/wm-casino.svg",fallback:{bg:"#795548",text:"WM"}}},n=e.replace(/\s+\d+$/,"");return(t[n]||{fallback:{bg:"#607D8B",text:"LOGO"}}).fallback},fR=(e=20)=>{const t=["Evolution Gaming","Pragmatic Play Live","Ezugi","Vivo Gaming","Authentic Gaming","Asia Gaming","SA Gaming","Sexy Gaming","Dream Gaming","WM Casino"],n=[];for(let r=0;r<e;r++){const i=r%t.length,o=Math.floor(r/t.length),s=t[i]+(o>0?` ${o+1}`:""),l=Math.floor(Math.random()*15)+5,c=qce(s,l);n.push({id:r+1,no:r+1,vendorLogo:Uce(s),vendorName:s,enabled:Math.random()>.2,api:"Honor API",games:c,gameCount:`${c.length}개`,order:r+1})}return n},Vce=()=>{const[e,t]=u.useState([]),[n,r]=u.useState(null),[i,o]=u.useState(!1),[s,l]=u.useState({open:!1,message:"",severity:"success"}),[c,d]=u.useState(""),[h,f]=u.useState("manual"),[g,w]=u.useState(!1);u.useEffect(()=>{x(),v()},[]);const x=async()=>{try{const Y=await Wr.getVendors("casino");if(Y.success&&Y.data){const he=await Wr.getVendorGameCounts("casino"),ze=Y.data.map((de,Ze)=>{var lt;return{id:de.code,vendorCode:de.code,vendorLogo:((lt=de.name_ko)==null?void 0:lt.substring(0,2))||de.name.substring(0,2),vendorName:de.name_ko||de.name,enabled:de.is_active!==!1,api:"Honor API",gameCount:he[de.code]||0}});t(ze)}else{const he=fR(20);t(he)}}catch(Y){console.error("벤더 데이터 로드 실패:",Y),y("벤더 데이터를 불러오는데 실패했습니다. 목업 데이터를 사용합니다.","warning");const he=fR(20);t(he)}},y=(Y,he="success")=>{l({open:!0,message:Y,severity:he})},p=()=>{l(Y=>({...Y,open:!1}))},v=async()=>{try{const Y=await Wr.getTagMode("casino");Y.success&&f(Y.mode)}catch(Y){console.error("태그 모드 로드 실패:",Y)}},b=async Y=>{const he=Y.target.checked?"auto":"manual";w(!0);try{const ze=await Wr.setTagMode("casino",he);ze.success&&(f(he),y(ze.message))}catch(ze){console.error("태그 모드 변경 실패:",ze),y("태그 모드 변경에 실패했습니다.","error")}finally{w(!1)}},{containerRef:P,tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:T,getResizeHandleProps:I}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Y=>{C&&S(!1),_(`${Y}px`)}}),{tableHeaderRef:L,getTableHeaderStyles:A}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),D=async()=>{await x(),y("데이터를 새로고침했습니다.","success")},[B,$]=u.useState(0),[N,F]=u.useState(10),[O,R]=u.useState(Date.now()),{checkedItems:E,sortConfig:z,expandedRows:q,allChecked:X,handleSort:H,handleCheck:K,handleToggleAll:ee,handleToggleExpand:ge}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:B,rowsPerPage:N}),oe=u.useCallback(Y=>{t(he=>{const ze=he.map(de=>de.id===Y.id?{...de,enabled:!de.enabled}:de);return ze.find(de=>de.id===Y.id),ze}),y("활성/비활성 상태가 변경되었습니다.")},[]),G=u.useCallback((Y,he)=>{t(ze=>{const de=ze.map(Ze=>Ze.id===Y.id?{...Ze,api:he}:Ze);return de.find(Ze=>Ze.id===Y.id),de}),y("API가 변경되었습니다.")},[]),Q=u.useCallback(Y=>{r(Y),o(!0)},[]),te=u.useCallback(async Y=>{try{y(`${Y.vendorName} 게임 동기화를 시작합니다...`,"info");const he=await Wr.syncGames(Y.vendorCode||Y.id,"casino");if(he.success){await x();const ze=he.message||`${Y.vendorName} 게임 동기화가 완료되었습니다.`;he.synced_count!==void 0?y(`${ze} (총 ${he.synced_count}개 게임)`,"success"):y(ze,"success")}else y("게임 동기화에 실패했습니다.","error")}catch(he){console.error("게임 동기화 오류:",he),y("게임 동기화 중 오류가 발생했습니다.","error")}},[]),U=u.useCallback(()=>{const Y=Object.keys(E).filter(he=>E[he]);Y.length!==0&&(t(he=>he.map(ze=>Y.includes(ze.id)?{...ze,enabled:!0}:ze)),y(`${Y.length}개의 게임사가 활성화되었습니다.`,"success"))},[E]),V=u.useCallback(()=>{const Y=Object.keys(E).filter(he=>E[he]);Y.length!==0&&(t(he=>he.map(ze=>Y.includes(ze.id)?{...ze,enabled:!1}:ze)),y(`${Y.length}개의 게임사가 비활성화되었습니다.`,"success"))},[E]),ae=u.useCallback(Y=>{const he=Y.target.value;d(he),he&&(t(ze=>ze.map(de=>({...de,api:he}))),y(`모든 게임사의 API가 ${he}로 변경되었습니다.`,"success"),setTimeout(()=>d(""),2e3))},[]),ne=u.useMemo(()=>Object.values(E).filter(Y=>Y).length,[E]),me=u.useMemo(()=>Hce.map(Y=>Y.id==="enabled"?{...Y,onToggle:oe}:Y.id==="api"?{...Y,dropdownOptions:cd,onApiChange:G}:Y.id==="action"?{...Y,actions:Y.actions.map(he=>he.buttonText==="게임리스트"?{...he,onClick:Q}:he.buttonText==="동기화"?{...he,onClick:te}:he)}:Y),[oe,G,Q,te]),ue=u.useMemo(()=>Wce,[]),{activeFilters:Ae,handleFilterChange:we,isDateFilterActive:ce,handleOpenDateFilter:De,resetDateFilter:le,dateRange:se,page:J,rowsPerPage:Z,totalCount:ie,totalPages:_e,handlePageChange:Re,handleRowsPerPageChange:He,filteredData:ft,displayData:St,filterValues:Tt,handleFilter:gt,handleClearFilters:et}=yr({columns:me,data:e,defaultRowsPerPage:10,hierarchical:!1,filterOptions:{initialFilters:{status:"",api:""}},paginationOptions:{initialPage:0,initialRowsPerPage:10,totalItems:e.length}}),{searchText:xt,totalItems:Rt,sequentialPageNumbers:ht,hasPinnedColumns:jt,isGridReady:$t,handleSearchChange:Ut,handleClearSearch:Bt,togglePageNumberMode:Kt,toggleColumnPin:Ft,setGridReady:Et}=Rn({initialTotalItems:e.length,tableId:"casinoGameSettingPage",initialSequentialPageNumbers:!1,onSearch:Y=>{J!==0&&Re(0)},onTogglePageNumberMode:Y=>{R(Date.now())},onToggleColumnPin:Y=>{Y?tn():Xt()}});u.useEffect(()=>{Et(!0)},[Et]);const{columns:Ot,dragInfo:zt,pinnedColumns:Wt,handleDragStart:kt,handleDragEnd:Mt,handleDragOver:Ht,handleDrop:qt,updateColumns:Yt,clearAllPinnedColumns:Xt,setDefaultPinnedColumns:tn}=sr({initialColumns:me,tableId:"casino_settings_table",initialPinnedColumns:["no"],onColumnOrderChange:Y=>{}}),{getDragHandleProps:Fe}=cj({data:e,onDataChange:async Y=>{Y.map(he=>he.vendorName),t(Y);try{await Wr.updateProviderOrder(Y),y("게임사 순서가 변경되었습니다. 회원 페이지에도 적용됩니다.","success")}catch(he){console.error("게임사 순서 업데이트 실패:",he),y("게임사 순서 변경에 실패했습니다.","error"),x()}},orderField:"order",idField:"id",enabled:!0}),{columnVisibility:je,visibleColumns:Oe,hiddenColumnsCount:ke,toggleableColumns:bt,toggleColumnVisibility:it,showAllColumns:fe,resetToDefault:be}=dr(Ot||me,{defaultHiddenColumns:[],alwaysVisibleColumns:["no"],tableId:"casino_settings_table"}),[Te,Ne]=u.useState(null),Ve=!!Te,Ge=u.useCallback(Y=>{Ne(Y)},[]),At=u.useCallback(()=>{Ne(null)},[]);u.useCallback((Y,he,ze)=>{switch(he){case"status":return ze===""||ze==="all"?Y:ze==="enabled"?Y.filter(de=>de.enabled===!0):ze==="disabled"?Y.filter(de=>de.enabled===!1):Y;case"api":return ze===""||ze==="all"?Y:Y.filter(de=>de.api===ze);default:return Y}},[]);const Qe=u.useCallback((Y,he)=>{gt({[Y]:he})},[gt]),Ie=u.useMemo(()=>{const Y={...Ae};return Object.keys(Y).forEach(he=>{Y[he]==="all"&&(Y[he]="")}),Y},[Ae]),Xe=u.useMemo(()=>{if(!e||!Array.isArray(e))return[];let Y=[...e];return xt&&xt.trim()!==""&&(Y=Y.filter(he=>he.vendorName.toLowerCase().includes(xt.toLowerCase()))),Ie.status==="enabled"?Y=Y.filter(he=>he.enabled===!0):Ie.status==="disabled"&&(Y=Y.filter(he=>he.enabled===!1)),Ie.api&&Ie.api!==""&&(Y=Y.filter(he=>he.api===Ie.api)),Y},[e,xt,Ie]),ve=(Xe==null?void 0:Xe.length)||0;u.useMemo(()=>{if(!Xe||!Array.isArray(Xe))return[];const Y=B*N,he=Y+N;return Xe.slice(Y,he).map((ze,de)=>({...ze,no:Y+de+1}))},[Xe,B,N]);const at=u.useCallback((Y,he)=>{let ze=he;if(typeof Y=="number"&&he===void 0&&(ze=Y),typeof ze!="number"||isNaN(ze)){console.error("유효하지 않은 페이지 번호:",ze);return}const de=Math.max(0,Math.ceil(ve/N)-1);ze=Math.max(0,Math.min(ze,de)),$(ze),Re(ze)},[B,N,ve,Re]),We=u.useCallback(Y=>{if(!Y||!Y.target||!Y.target.value){console.error("카지노 행 수 변경 이벤트 오류:",Y);return}const he=parseInt(Y.target.value,10);F(he),$(0),He(Y)},[N,He]);u.useEffect(()=>{R(Date.now())},[B,N]),u.useEffect(()=>{},[ht]),u.useEffect(()=>{R(Date.now())},[ht]),u.useEffect(()=>{$(0)},[xt,Ie]),u.useEffect(()=>{const Y=Math.max(0,Math.ceil(ve/N)-1);B>Y&&ve>0&&$(Y)},[ve,N,B]);const xe=!0,qe={handleDragStart:kt,handleDragEnd:Mt,handleDragOver:Ht,handleDrop:qt},Ee=u.useMemo(()=>{if(!Oe||!Array.isArray(Oe))return me||[];const Y=Oe.map(he=>he.id==="enabled"?{...he,onToggle:oe}:he.id==="api"?{...he,dropdownOptions:cd,onApiChange:G}:he.id==="action"?{...he,actions:he.actions.map(ze=>ze.buttonText==="게임리스트"?{...ze,onClick:Q}:ze.buttonText==="동기화"?{...ze,onClick:te}:ze)}:he);return Y.map(he=>({id:he.id,type:he.type,label:he.label})),Y.find(he=>he.id==="no"),Y},[Oe,oe,G,Q]);return m(vn,{children:[a(Cn,{title:"카지노 게임 설정",onDisplayOptionsClick:Ge,showAddButton:!1,showRefreshButton:!0,onRefreshClick:D,sx:{mb:2},customActions:m(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[a(Lt,{control:a(sn,{checked:h==="auto",onChange:b,disabled:g}),label:h==="auto"?"자동 태그 설정":"수동 태그 설정",sx:{mr:2}}),m(Zt,{size:"small",sx:{minWidth:200},children:[a(hn,{children:"API 일괄 변경"}),m(an,{value:c,onChange:ae,label:"API 일괄 변경",children:[a(Me,{value:"",children:a("em",{children:"선택 안함"})}),cd.map(Y=>a(Me,{value:Y.value,children:Y.label},Y.value))]})]})]})}),a(or,{anchorEl:Te,open:Ve,onClose:At,toggleableColumns:bt,columnVisibility:je,onToggleColumn:it,onShowAll:fe,onReset:be,hiddenColumnsCount:ke,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"카지노 게임사 목록",totalItems:ve,countLabel:"총 ##count##개의 게임사",sequentialPageNumbers:ht,togglePageNumberMode:Kt,hasPinnedColumns:jt,isGridReady:$t,toggleColumnPin:Ft,searchText:xt,handleSearchChange:Ut,handleClearSearch:Bt,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"게임사 검색...",sx:{mb:2}}),a(Fi,{tableHeight:k,autoHeight:C,toggleAutoHeight:S,setManualHeight:_,minHeight:200,maxHeight:1200,step:50}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:Ot,filterValues:Ae||{},activeFilters:Ie||{},filterOptions:ue,handleFilterChange:Qe,onFilter:gt,onClearFilters:et},paginationProps:{count:ve,page:B,rowsPerPage:N,onPageChange:at,onRowsPerPageChange:We,totalCount:ve}})}),m(j,{sx:{width:"100%",mt:2},ref:P,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",B+1," / ",Math.ceil(ve/N)," (페이지당 ",N,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."," - 행을 드래그하여 게임사 순서를 변경할 수 있습니다.","(번호모드: ",ht?"연속번호":"페이지별번호",")"]}),a(An,{columns:Ee,data:Xe,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:E,expandedRows:q,allChecked:X,onCheck:K,onToggleAll:ee,onToggleExpand:ge,onSort:H,sortConfig:z,page:B,rowsPerPage:N,totalCount:ve,sequentialPageNumbers:ht,draggableColumns:xe,onColumnOrderChange:Yt,dragHandlers:qe,dragInfo:zt,fixedHeader:!0,maxHeight:k,tableHeaderRef:L,headerStyle:A(),pinnedColumns:Wt,draggableRows:!0,rowDragHandlers:{getDragHandleProps:Fe},sx:{"& table":{tableLayout:"fixed !important",width:"100% !important"}}}),a(rr,{resizeHandleProps:I(parseFloat(k)),showIcon:!0,isDragging:T,sx:{mt:1,opacity:T?1:.7,"&:hover":{opacity:1}}})]}),ne>0&&m(j,{sx:{display:"flex",gap:1,mt:2,justifyContent:"flex-start"},children:[m(Se,{variant:"contained",color:"success",size:"small",onClick:U,sx:{fontSize:"0.875rem"},children:["선택 활성 (",ne,")"]}),m(Se,{variant:"contained",color:"error",size:"small",onClick:V,sx:{fontSize:"0.875rem"},children:["선택 비활성 (",ne,")"]})]})]}),a(Xj,{open:i,onClose:()=>o(!1),vendorName:(n==null?void 0:n.vendorName)||"",vendorLogo:(n==null?void 0:n.vendorLogo)||null,vendorCode:(n==null?void 0:n.vendorCode)||(n==null?void 0:n.id),games:(n==null?void 0:n.games)||[],gameType:"casino",tagMode:h,onGameUpdate:(Y,he)=>{}}),a(ua,{open:s.open,autoHideDuration:4e3,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:p,severity:s.severity,sx:{width:"100%"},children:s.message})})]})};var pR=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Gce(e,t){return!!(e===t||pR(e)&&pR(t))}function Kce(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Gce(e[n],t[n]))return!1;return!0}function Z0(e,t){t===void 0&&(t=Kce);var n,r=[],i,o=!1;function s(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return o&&n===this&&t(l,r)||(i=e.apply(this,l),o=!0,n=this,r=l),i}return s}var Yce=typeof performance=="object"&&typeof performance.now=="function",gR=Yce?function(){return performance.now()}:function(){return Date.now()};function mR(e){cancelAnimationFrame(e.id)}function Xce(e,t){var n=gR();function r(){gR()-n>=t?e.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var ex=-1;function Jce(e){if(e===void 0&&(e=!1),ex===-1||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),ex=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ex}var el=null;function yR(e){if(e===void 0&&(e=!1),el===null||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?el="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?el="negative":el="positive-ascending"),document.body.removeChild(t),el}return el}var Qce=150,Zce=function(t){var n=t.columnIndex;t.data;var r=t.rowIndex;return r+":"+n};function eue(e){var t,n=e.getColumnOffset,r=e.getColumnStartIndexForOffset,i=e.getColumnStopIndexForStartIndex,o=e.getColumnWidth,s=e.getEstimatedTotalHeight,l=e.getEstimatedTotalWidth,c=e.getOffsetForColumnAndAlignment,d=e.getOffsetForRowAndAlignment,h=e.getRowHeight,f=e.getRowOffset,g=e.getRowStartIndexForOffset,w=e.getRowStopIndexForStartIndex,x=e.initInstanceProps,y=e.shouldResetStyleCacheOnItemSizeChange,p=e.validateProps;return t=function(v){iz(b,v);function b(k){var C;return C=v.call(this,k)||this,C._instanceProps=x(C.props,xS(C)),C._resetIsScrollingTimeoutId=null,C._outerRef=void 0,C.state={instance:xS(C),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof C.props.initialScrollLeft=="number"?C.props.initialScrollLeft:0,scrollTop:typeof C.props.initialScrollTop=="number"?C.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},C._callOnItemsRendered=void 0,C._callOnItemsRendered=Z0(function(S,_,T,I,L,A,D,B){return C.props.onItemsRendered({overscanColumnStartIndex:S,overscanColumnStopIndex:_,overscanRowStartIndex:T,overscanRowStopIndex:I,visibleColumnStartIndex:L,visibleColumnStopIndex:A,visibleRowStartIndex:D,visibleRowStopIndex:B})}),C._callOnScroll=void 0,C._callOnScroll=Z0(function(S,_,T,I,L){return C.props.onScroll({horizontalScrollDirection:T,scrollLeft:S,scrollTop:_,verticalScrollDirection:I,scrollUpdateWasRequested:L})}),C._getItemStyle=void 0,C._getItemStyle=function(S,_){var T=C.props,I=T.columnWidth,L=T.direction,A=T.rowHeight,D=C._getItemStyleCache(y&&I,y&&L,y&&A),B=S+":"+_,$;if(D.hasOwnProperty(B))$=D[B];else{var N=n(C.props,_,C._instanceProps),F=L==="rtl";D[B]=$={position:"absolute",left:F?void 0:N,right:F?N:void 0,top:f(C.props,S,C._instanceProps),height:h(C.props,S,C._instanceProps),width:o(C.props,_,C._instanceProps)}}return $},C._getItemStyleCache=void 0,C._getItemStyleCache=Z0(function(S,_,T){return{}}),C._onScroll=function(S){var _=S.currentTarget,T=_.clientHeight,I=_.clientWidth,L=_.scrollLeft,A=_.scrollTop,D=_.scrollHeight,B=_.scrollWidth;C.setState(function($){if($.scrollLeft===L&&$.scrollTop===A)return null;var N=C.props.direction,F=L;if(N==="rtl")switch(yR()){case"negative":F=-L;break;case"positive-descending":F=B-I-L;break}F=Math.max(0,Math.min(F,B-I));var O=Math.max(0,Math.min(A,D-T));return{isScrolling:!0,horizontalScrollDirection:$.scrollLeft<L?"forward":"backward",scrollLeft:F,scrollTop:O,verticalScrollDirection:$.scrollTop<A?"forward":"backward",scrollUpdateWasRequested:!1}},C._resetIsScrollingDebounced)},C._outerRefSetter=function(S){var _=C.props.outerRef;C._outerRef=S,typeof _=="function"?_(S):_!=null&&typeof _=="object"&&_.hasOwnProperty("current")&&(_.current=S)},C._resetIsScrollingDebounced=function(){C._resetIsScrollingTimeoutId!==null&&mR(C._resetIsScrollingTimeoutId),C._resetIsScrollingTimeoutId=Xce(C._resetIsScrolling,Qce)},C._resetIsScrolling=function(){C._resetIsScrollingTimeoutId=null,C.setState({isScrolling:!1},function(){C._getItemStyleCache(-1)})},C}b.getDerivedStateFromProps=function(C,S){return tue(C,S),p(C),null};var P=b.prototype;return P.scrollTo=function(C){var S=C.scrollLeft,_=C.scrollTop;S!==void 0&&(S=Math.max(0,S)),_!==void 0&&(_=Math.max(0,_)),this.setState(function(T){return S===void 0&&(S=T.scrollLeft),_===void 0&&(_=T.scrollTop),T.scrollLeft===S&&T.scrollTop===_?null:{horizontalScrollDirection:T.scrollLeft<S?"forward":"backward",scrollLeft:S,scrollTop:_,scrollUpdateWasRequested:!0,verticalScrollDirection:T.scrollTop<_?"forward":"backward"}},this._resetIsScrollingDebounced)},P.scrollToItem=function(C){var S=C.align,_=S===void 0?"auto":S,T=C.columnIndex,I=C.rowIndex,L=this.props,A=L.columnCount,D=L.height,B=L.rowCount,$=L.width,N=this.state,F=N.scrollLeft,O=N.scrollTop,R=Jce();T!==void 0&&(T=Math.max(0,Math.min(T,A-1))),I!==void 0&&(I=Math.max(0,Math.min(I,B-1)));var E=s(this.props,this._instanceProps),z=l(this.props,this._instanceProps),q=z>$?R:0,X=E>D?R:0;this.scrollTo({scrollLeft:T!==void 0?c(this.props,T,_,F,this._instanceProps,X):F,scrollTop:I!==void 0?d(this.props,I,_,O,this._instanceProps,q):O})},P.componentDidMount=function(){var C=this.props,S=C.initialScrollLeft,_=C.initialScrollTop;if(this._outerRef!=null){var T=this._outerRef;typeof S=="number"&&(T.scrollLeft=S),typeof _=="number"&&(T.scrollTop=_)}this._callPropsCallbacks()},P.componentDidUpdate=function(){var C=this.props.direction,S=this.state,_=S.scrollLeft,T=S.scrollTop,I=S.scrollUpdateWasRequested;if(I&&this._outerRef!=null){var L=this._outerRef;if(C==="rtl")switch(yR()){case"negative":L.scrollLeft=-_;break;case"positive-ascending":L.scrollLeft=_;break;default:var A=L.clientWidth,D=L.scrollWidth;L.scrollLeft=D-A-_;break}else L.scrollLeft=Math.max(0,_);L.scrollTop=Math.max(0,T)}this._callPropsCallbacks()},P.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&mR(this._resetIsScrollingTimeoutId)},P.render=function(){var C=this.props,S=C.children,_=C.className,T=C.columnCount,I=C.direction,L=C.height,A=C.innerRef,D=C.innerElementType,B=C.innerTagName,$=C.itemData,N=C.itemKey,F=N===void 0?Zce:N,O=C.outerElementType,R=C.outerTagName,E=C.rowCount,z=C.style,q=C.useIsScrolling,X=C.width,H=this.state.isScrolling,K=this._getHorizontalRangeToRender(),ee=K[0],ge=K[1],oe=this._getVerticalRangeToRender(),G=oe[0],Q=oe[1],te=[];if(T>0&&E)for(var U=G;U<=Q;U++)for(var V=ee;V<=ge;V++)te.push(u.createElement(S,{columnIndex:V,data:$,isScrolling:q?H:void 0,key:F({columnIndex:V,data:$,rowIndex:U}),rowIndex:U,style:this._getItemStyle(U,V)}));var ae=s(this.props,this._instanceProps),ne=l(this.props,this._instanceProps);return u.createElement(O||R||"div",{className:_,onScroll:this._onScroll,ref:this._outerRefSetter,style:pt({position:"relative",height:L,width:X,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:I},z)},u.createElement(D||B||"div",{children:te,ref:A,style:{height:ae,pointerEvents:H?"none":void 0,width:ne}}))},P._callPropsCallbacks=function(){var C=this.props,S=C.columnCount,_=C.onItemsRendered,T=C.onScroll,I=C.rowCount;if(typeof _=="function"&&S>0&&I>0){var L=this._getHorizontalRangeToRender(),A=L[0],D=L[1],B=L[2],$=L[3],N=this._getVerticalRangeToRender(),F=N[0],O=N[1],R=N[2],E=N[3];this._callOnItemsRendered(A,D,F,O,B,$,R,E)}if(typeof T=="function"){var z=this.state,q=z.horizontalScrollDirection,X=z.scrollLeft,H=z.scrollTop,K=z.scrollUpdateWasRequested,ee=z.verticalScrollDirection;this._callOnScroll(X,H,q,ee,K)}},P._getHorizontalRangeToRender=function(){var C=this.props,S=C.columnCount,_=C.overscanColumnCount,T=C.overscanColumnsCount,I=C.overscanCount,L=C.rowCount,A=this.state,D=A.horizontalScrollDirection,B=A.isScrolling,$=A.scrollLeft,N=_||T||I||1;if(S===0||L===0)return[0,0,0,0];var F=r(this.props,$,this._instanceProps),O=i(this.props,F,$,this._instanceProps),R=!B||D==="backward"?Math.max(1,N):1,E=!B||D==="forward"?Math.max(1,N):1;return[Math.max(0,F-R),Math.max(0,Math.min(S-1,O+E)),F,O]},P._getVerticalRangeToRender=function(){var C=this.props,S=C.columnCount,_=C.overscanCount,T=C.overscanRowCount,I=C.overscanRowsCount,L=C.rowCount,A=this.state,D=A.isScrolling,B=A.verticalScrollDirection,$=A.scrollTop,N=T||I||_||1;if(S===0||L===0)return[0,0,0,0];var F=g(this.props,$,this._instanceProps),O=w(this.props,F,$,this._instanceProps),R=!D||B==="backward"?Math.max(1,N):1,E=!D||B==="forward"?Math.max(1,N):1;return[Math.max(0,F-R),Math.max(0,Math.min(L-1,O+E)),F,O]},b}(u.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var tue=function(t,n){t.children,t.direction,t.height,t.innerTagName,t.outerTagName,t.overscanColumnsCount,t.overscanCount,t.overscanRowsCount,t.width,n.instance},nue=eue({getColumnOffset:function(t,n){var r=t.columnWidth;return n*r},getColumnWidth:function(t,n){var r=t.columnWidth;return r},getRowOffset:function(t,n){var r=t.rowHeight;return n*r},getRowHeight:function(t,n){var r=t.rowHeight;return r},getEstimatedTotalHeight:function(t){var n=t.rowCount,r=t.rowHeight;return r*n},getEstimatedTotalWidth:function(t){var n=t.columnCount,r=t.columnWidth;return r*n},getOffsetForColumnAndAlignment:function(t,n,r,i,o,s){var l=t.columnCount,c=t.columnWidth,d=t.width,h=Math.max(0,l*c-d),f=Math.min(h,n*c),g=Math.max(0,n*c-d+s+c);switch(r==="smart"&&(i>=g-d&&i<=f+d?r="auto":r="center"),r){case"start":return f;case"end":return g;case"center":var w=Math.round(g+(f-g)/2);return w<Math.ceil(d/2)?0:w>h+Math.floor(d/2)?h:w;case"auto":default:return i>=g&&i<=f?i:g>f||i<g?g:f}},getOffsetForRowAndAlignment:function(t,n,r,i,o,s){var l=t.rowHeight,c=t.height,d=t.rowCount,h=Math.max(0,d*l-c),f=Math.min(h,n*l),g=Math.max(0,n*l-c+s+l);switch(r==="smart"&&(i>=g-c&&i<=f+c?r="auto":r="center"),r){case"start":return f;case"end":return g;case"center":var w=Math.round(g+(f-g)/2);return w<Math.ceil(c/2)?0:w>h+Math.floor(c/2)?h:w;case"auto":default:return i>=g&&i<=f?i:g>f||i<g?g:f}},getColumnStartIndexForOffset:function(t,n){var r=t.columnWidth,i=t.columnCount;return Math.max(0,Math.min(i-1,Math.floor(n/r)))},getColumnStopIndexForStartIndex:function(t,n,r){var i=t.columnWidth,o=t.columnCount,s=t.width,l=n*i,c=Math.ceil((s+r-l)/i);return Math.max(0,Math.min(o-1,n+c-1))},getRowStartIndexForOffset:function(t,n){var r=t.rowHeight,i=t.rowCount;return Math.max(0,Math.min(i-1,Math.floor(n/r)))},getRowStopIndexForStartIndex:function(t,n,r){var i=t.rowHeight,o=t.rowCount,s=t.height,l=n*i,c=Math.ceil((s+r-l)/i);return Math.max(0,Math.min(o-1,n+c-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){t.columnWidth,t.rowHeight}});const rue=()=>{const e=u.useRef(null),[t,n]=u.useState({width:800,height:600}),r=Array.from({length:100},(d,h)=>({id:`item-${h}`,name:`Test Item ${h+1}`,value:Math.floor(Math.random()*1e3)}));u.useEffect(()=>{const d=()=>{if(e.current){const{width:f,height:g}=e.current.getBoundingClientRect(),w=Math.floor(f),x=Math.floor(g);if(typeof w!="number"||typeof x!="number"){console.error("❌ Width/Height must be numbers!",{numWidth:w,numHeight:x});return}n({width:w,height:x})}};d();const h=()=>{d()};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[]);const i=4,o=Math.ceil(r.length/i),s=Math.floor(t.width/i),l=150,c=({columnIndex:d,rowIndex:h,style:f})=>{const g=h*i+d,w=r[g];return w?a("div",{style:f,children:a(Sn,{sx:{m:1,height:"calc(100% - 16px)",cursor:"pointer","&:hover":{boxShadow:3}},children:m(In,{children:[a(M,{variant:"h6",noWrap:!0,children:w.name}),m(M,{variant:"body2",color:"text.secondary",children:["Value: ",w.value]}),m(M,{variant:"caption",color:"text.secondary",children:["Index: ",g]})]})})}):null};return m(j,{sx:{p:2},children:[a(M,{variant:"h4",gutterBottom:!0,children:"Virtual Scroll Prototype"}),m(M,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:["Container Size: ",t.width," x ",t.height,"px | Grid: ",i," columns x ",o," rows | Items: ",r.length]}),a(rt,{ref:e,sx:{width:"100%",height:"70vh",overflow:"hidden",position:"relative"},children:t.width>0&&t.height>0&&a(nue,{columnCount:i,columnWidth:s,height:t.height,rowCount:o,rowHeight:l,width:t.width,children:c})}),m(j,{sx:{mt:2},children:[a(M,{variant:"body2",color:"success.main",children:"✅ Virtual scrolling is working if you can see cards above"}),a(M,{variant:"caption",color:"text.secondary",children:"Only visible items are rendered in DOM. Check DevTools to verify."})]})]})},aue=()=>a(Xl,{maxWidth:"xl",children:a(rue,{})});var Pu={},bR;function iue(){if(bR)return Pu;bR=1;var e=ln();Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.default=void 0;var t=e(un()),n=cn();return Pu.default=(0,t.default)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Pu}var oue=iue();const tx=vt(oue),sue=()=>{var Z;On();const[e,t]=u.useState([{id:1,parentType:"총판",parentId:"agent001",userId:"sub001",password:"****",enabled:!0,createdAt:"2024-01-15"},{id:2,parentType:"매장",parentId:"store001",userId:"sub002",password:"****",enabled:!0,createdAt:"2024-01-16"},{id:3,parentType:"총판",parentId:"agent002",userId:"sub003",password:"****",enabled:!1,createdAt:"2024-01-17"}]),[n,r]=u.useState([{id:1,ip:"192.168.1.100",memo:"본사 사무실",enabled:!0,createdAt:"2024-01-10"},{id:2,ip:"192.168.1.101",memo:"개발팀",enabled:!0,createdAt:"2024-01-11"},{id:3,ip:"10.0.0.5",memo:"외부 협력사",enabled:!1,createdAt:"2024-01-12"}]),[i,o]=u.useState([{id:1,ip:"123.45.67.89",memo:"의심스러운 접근",enabled:!0,createdAt:"2024-01-13"},{id:2,ip:"98.76.54.32",memo:"해킹 시도",enabled:!0,createdAt:"2024-01-14"}]),[s,l]=u.useState(!0),[c,d]=u.useState(!0),[h,f]=u.useState({parentType:"",parentId:"",userId:"",password:""}),[g,w]=u.useState({ip:"",memo:""}),[x,y]=u.useState({ip:"",memo:""}),[p,v]=u.useState({총판:["agent001","agent002","agent003"],매장:["store001","store002","store003"],부본:["sub001","sub002"]}),[b,P]=u.useState({open:!1,type:"",data:null}),[k,C]=u.useState({open:!1,message:"",severity:"success"}),[S,_]=u.useState(0),[T,I]=u.useState(10),{searchText:L,handleSearchChange:A,handleClearSearch:D}=Rn({initialTotalItems:e.length,tableId:"adminSubAccounts"}),{searchText:B,handleSearchChange:$,handleClearSearch:N}=Rn({initialTotalItems:n.length,tableId:"adminAllowedIPs"}),{searchText:F,handleSearchChange:O,handleClearSearch:R}=Rn({initialTotalItems:i.length,tableId:"adminBlockedIPs"}),E=(ie,_e="success")=>{C({open:!0,message:ie,severity:_e})},z=u.useCallback(()=>{if(!h.parentType||!h.parentId||!h.userId||!h.password){E("모든 필드를 입력해주세요.","error");return}const ie={id:Date.now(),...h,password:"****",enabled:!0,createdAt:new Date().toISOString().split("T")[0]};t([...e,ie]),f({parentType:"",parentId:"",userId:"",password:""}),E("서브 아이디가 추가되었습니다.")},[h,e]),q=u.useCallback(()=>{if(!g.ip||!g.memo){E("IP 주소와 메모를 입력해주세요.","error");return}const ie={id:Date.now(),...g,enabled:!0,createdAt:new Date().toISOString().split("T")[0]};r([...n,ie]),w({ip:"",memo:""}),E("허용 IP가 추가되었습니다.")},[g,n]),X=u.useCallback(()=>{if(!x.ip||!x.memo){E("IP 주소와 메모를 입력해주세요.","error");return}const ie={id:Date.now(),...x,enabled:!0,createdAt:new Date().toISOString().split("T")[0]};o([...i,ie]),y({ip:"",memo:""}),E("차단 IP가 추가되었습니다.")},[x,i]),H=u.useCallback(ie=>{t(_e=>_e.map(Re=>Re.id===ie?{...Re,enabled:!Re.enabled}:Re))},[]),K=u.useCallback(ie=>{r(_e=>_e.map(Re=>Re.id===ie?{...Re,enabled:!Re.enabled}:Re))},[]),ee=u.useCallback(ie=>{o(_e=>_e.map(Re=>Re.id===ie?{...Re,enabled:!Re.enabled}:Re))},[]),ge=u.useCallback(ie=>{t(_e=>_e.filter(Re=>Re.id!==ie)),E("서브 아이디가 삭제되었습니다.")},[]),oe=u.useCallback(ie=>{r(_e=>_e.filter(Re=>Re.id!==ie)),E("허용 IP가 삭제되었습니다.")},[]),G=u.useCallback(ie=>{o(_e=>_e.filter(Re=>Re.id!==ie)),E("차단 IP가 삭제되었습니다.")},[]),Q=u.useCallback((ie,_e)=>{P({open:!0,type:ie,data:_e})},[]),te=u.useCallback(()=>{P({open:!1,type:"",data:null})},[]),U=ie=>{switch(ie){case"총판":return"primary";case"매장":return"success";case"부본":return"warning";default:return"default"}},V=u.useMemo(()=>L?e.filter(ie=>ie.userId.toLowerCase().includes(L.toLowerCase())||ie.parentId.toLowerCase().includes(L.toLowerCase())):e,[e,L]),ae=u.useMemo(()=>B?n.filter(ie=>ie.ip.includes(B)||ie.memo.toLowerCase().includes(B.toLowerCase())):n,[n,B]),ne=u.useMemo(()=>F?i.filter(ie=>ie.ip.includes(F)||ie.memo.toLowerCase().includes(F.toLowerCase())):i,[i,F]),me=u.useMemo(()=>[{id:"parentType",label:"유형",type:"chip",width:100,sortable:!0,align:"center",render:ie=>({label:ie.parentType,color:U(ie.parentType),variant:"filled"})},{id:"parentId",label:"상위 아이디",type:"text",width:150,sortable:!0,align:"center"},{id:"userId",label:"아이디",type:"text",width:150,sortable:!0,align:"center"},{id:"enabled",label:"상태",type:"toggle",width:100,align:"center",onToggle:(ie,_e)=>{H(ie.id)}},{id:"createdAt",label:"생성일",type:"text",width:150,sortable:!0,align:"center"},{id:"actions",label:"액션",type:"button",width:120,align:"center",buttons:[{label:"수정",variant:"outlined",color:"primary",size:"small",onClick:ie=>Q("subAccount",ie)},{label:"삭제",variant:"outlined",color:"error",size:"small",onClick:ie=>ge(ie.id)}]}],[H,Q,ge]),ue=u.useMemo(()=>[{id:"ip",label:"IP 주소",type:"text",width:200,sortable:!0,align:"center"},{id:"memo",label:"메모",type:"text",width:250,sortable:!0,align:"center"},{id:"enabled",label:"상태",type:"toggle",width:100,align:"center",onToggle:(ie,_e)=>{K(ie.id)}},{id:"createdAt",label:"등록일",type:"text",width:150,sortable:!0,align:"center"},{id:"actions",label:"액션",type:"button",width:120,align:"center",buttons:[{label:"수정",variant:"outlined",color:"primary",size:"small",disabled:!s,onClick:ie=>Q("allowedIP",ie)},{label:"삭제",variant:"outlined",color:"error",size:"small",disabled:!s,onClick:ie=>oe(ie.id)}]}],[K,Q,oe,s]),Ae=u.useMemo(()=>[{id:"ip",label:"IP 주소",type:"text",width:200,sortable:!0,align:"center"},{id:"memo",label:"메모",type:"text",width:250,sortable:!0,align:"center"},{id:"enabled",label:"상태",type:"toggle",width:100,align:"center",onToggle:(ie,_e)=>{ee(ie.id)}},{id:"createdAt",label:"등록일",type:"text",width:150,sortable:!0,align:"center"},{id:"actions",label:"액션",type:"button",width:120,align:"center",buttons:[{label:"수정",variant:"outlined",color:"primary",size:"small",disabled:!c,onClick:ie=>Q("blockedIP",ie)},{label:"삭제",variant:"outlined",color:"error",size:"small",disabled:!c,onClick:ie=>G(ie.id)}]}],[ee,Q,G,c]),{sortConfig:we,handleSort:ce}=Nn({data:V,initialSort:{key:"createdAt",direction:"desc"},initialCheckedItems:{},page:S,rowsPerPage:T}),{sortConfig:De,handleSort:le}=Nn({data:ae,initialSort:{key:"createdAt",direction:"desc"},initialCheckedItems:{},page:0,rowsPerPage:10}),{sortConfig:se,handleSort:J}=Nn({data:ne,initialSort:{key:"createdAt",direction:"desc"},initialCheckedItems:{},page:0,rowsPerPage:10});return m(vn,{children:[a(Cn,{title:"관리자/IP설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:()=>E("데이터를 새로고침했습니다.")}),m(rt,{elevation:1,sx:{p:3,mb:3},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2.5,backgroundColor:"#f5f7fa",borderRadius:1.5,p:2.5,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[a(M,{variant:"h6",sx:{fontWeight:600,color:"#2c3e50",fontSize:"1.1rem"},children:"서브 아이디 관리"}),a(ut,{label:`총 ${V.length}개`,color:"primary",size:"small",sx:{fontWeight:500}})]}),a(j,{sx:{display:"flex",alignItems:"center"},children:a($e,{size:"small",placeholder:"아이디 검색...",value:L,onChange:A,InputProps:{startAdornment:a(Dt,{position:"start",children:a(Bo,{fontSize:"small"})}),endAdornment:L?a(Dt,{position:"end",children:a(Ct,{"aria-label":"clear search",onClick:D,edge:"end",size:"small",children:a(Af,{fontSize:"small"})})}):null,sx:{bgcolor:"#ffffff",borderRadius:"25px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0",borderRadius:"25px"}}},sx:{width:"240px","& .MuiInputBase-root":{height:"36px",fontSize:"0.875rem",borderRadius:"25px"}}})})]}),a(j,{sx:{mb:3},children:m(W,{container:!0,spacing:2,alignItems:"stretch",children:[a(W,{item:!0,xs:12,sm:6,md:2,children:m(Zt,{fullWidth:!0,children:[a(hn,{children:"유형"}),m(an,{value:h.parentType,onChange:ie=>f({...h,parentType:ie.target.value,parentId:""}),label:"유형",children:[a(Me,{value:"총판",children:"총판"}),a(Me,{value:"매장",children:"매장"}),a(Me,{value:"부본",children:"부본"})]})]})}),a(W,{item:!0,xs:12,sm:6,md:3,children:m(Zt,{fullWidth:!0,disabled:!h.parentType,children:[a(hn,{children:"상위 아이디"}),a(an,{value:h.parentId,onChange:ie=>f({...h,parentId:ie.target.value}),label:"상위 아이디",children:h.parentType&&((Z=p[h.parentType])==null?void 0:Z.map(ie=>a(Me,{value:ie,children:ie},ie)))})]})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a($e,{fullWidth:!0,label:"아이디",value:h.userId,onChange:ie=>f({...h,userId:ie.target.value})})}),a(W,{item:!0,xs:12,sm:6,md:3,children:a($e,{fullWidth:!0,label:"비밀번호",type:"password",value:h.password,onChange:ie=>f({...h,password:ie.target.value})})}),a(W,{item:!0,xs:12,md:1,children:a(Ct,{color:"primary",onClick:z,sx:{backgroundColor:"primary.main",color:"white",width:"56px",height:"56px","&:hover":{backgroundColor:"primary.dark"}},children:a(tx,{})})})]})}),a(j,{sx:{mt:2},children:a(An,{columns:me,data:V,checkable:!1,fixedHeader:!0,maxHeight:"400px",sortConfig:we,onSort:ce,page:0,rowsPerPage:10,totalCount:V.length,sequentialPageNumbers:!1})})]}),m(rt,{elevation:1,sx:{p:3,mb:3},children:[a(j,{sx:{mb:3,opacity:s?1:.5},children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2.5,backgroundColor:"#f5f7fa",borderRadius:1.5,p:2.5,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[a(M,{variant:"h6",sx:{fontWeight:600,color:"#2c3e50",fontSize:"1.1rem"},children:"IP 허용 목록"}),a(ut,{label:`${ae.length}개 IP`,color:"primary",size:"small",sx:{fontWeight:500}}),a(Lt,{control:a(sn,{checked:s,onChange:ie=>l(ie.target.checked),color:"success",size:"small"}),label:"허용 목록 사용",sx:{ml:1}})]}),a(j,{sx:{display:"flex",alignItems:"center"},children:a($e,{size:"small",placeholder:"IP 주소 검색...",value:B,onChange:$,InputProps:{startAdornment:a(Dt,{position:"start",children:a(Bo,{fontSize:"small"})}),endAdornment:B?a(Dt,{position:"end",children:a(Ct,{"aria-label":"clear search",onClick:N,edge:"end",size:"small",children:a(Af,{fontSize:"small"})})}):null,sx:{bgcolor:"#ffffff",borderRadius:"25px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0",borderRadius:"25px"}}},sx:{width:"240px","& .MuiInputBase-root":{height:"36px",fontSize:"0.875rem",borderRadius:"25px"}}})})]})}),a(j,{sx:{mb:3,opacity:s?1:.5},children:m(W,{container:!0,spacing:2,alignItems:"stretch",children:[a(W,{item:!0,xs:12,sm:5,children:a($e,{fullWidth:!0,label:"IP 주소",value:g.ip,onChange:ie=>w({...g,ip:ie.target.value}),disabled:!s,placeholder:"예: 192.168.1.100"})}),a(W,{item:!0,xs:12,sm:5,children:a($e,{fullWidth:!0,label:"메모",value:g.memo,onChange:ie=>w({...g,memo:ie.target.value}),disabled:!s,placeholder:"예: 본사 사무실"})}),a(W,{item:!0,xs:12,sm:2,children:a(Ct,{color:"success",onClick:q,disabled:!s,sx:{backgroundColor:"success.main",color:"white",width:"56px",height:"56px","&:hover":{backgroundColor:"success.dark"},"&:disabled":{backgroundColor:"action.disabledBackground"}},children:a(tx,{})})})]})}),a(j,{sx:{mt:2,opacity:s?1:.5},children:a(An,{columns:ue,data:ae,checkable:!1,fixedHeader:!0,maxHeight:"300px",sortConfig:De,onSort:le,page:0,rowsPerPage:10,totalCount:ae.length,sequentialPageNumbers:!1})})]}),m(rt,{elevation:1,sx:{p:3},children:[a(j,{sx:{mb:3,opacity:c?1:.5},children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2.5,backgroundColor:"#f5f7fa",borderRadius:1.5,p:2.5,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[a(M,{variant:"h6",sx:{fontWeight:600,color:"#2c3e50",fontSize:"1.1rem"},children:"IP 차단 목록"}),a(ut,{label:`${ne.length}개 IP`,color:"error",size:"small",sx:{fontWeight:500}}),a(Lt,{control:a(sn,{checked:c,onChange:ie=>d(ie.target.checked),color:"error",size:"small"}),label:"차단 목록 사용",sx:{ml:1}})]}),a(j,{sx:{display:"flex",alignItems:"center"},children:a($e,{size:"small",placeholder:"IP 주소 검색...",value:F,onChange:O,InputProps:{startAdornment:a(Dt,{position:"start",children:a(Bo,{fontSize:"small"})}),endAdornment:F?a(Dt,{position:"end",children:a(Ct,{"aria-label":"clear search",onClick:R,edge:"end",size:"small",children:a(Af,{fontSize:"small"})})}):null,sx:{bgcolor:"#ffffff",borderRadius:"25px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#e0e0e0",borderRadius:"25px"}}},sx:{width:"240px","& .MuiInputBase-root":{height:"36px",fontSize:"0.875rem",borderRadius:"25px"}}})})]})}),a(j,{sx:{mb:3,opacity:c?1:.5},children:m(W,{container:!0,spacing:2,alignItems:"stretch",children:[a(W,{item:!0,xs:12,sm:5,children:a($e,{fullWidth:!0,label:"IP 주소",value:x.ip,onChange:ie=>y({...x,ip:ie.target.value}),disabled:!c,placeholder:"예: 123.45.67.89"})}),a(W,{item:!0,xs:12,sm:5,children:a($e,{fullWidth:!0,label:"메모",value:x.memo,onChange:ie=>y({...x,memo:ie.target.value}),disabled:!c,placeholder:"예: 의심스러운 접근"})}),a(W,{item:!0,xs:12,sm:2,children:a(Ct,{color:"error",onClick:X,disabled:!c,sx:{backgroundColor:"error.main",color:"white",width:"56px",height:"56px","&:hover":{backgroundColor:"error.dark"},"&:disabled":{backgroundColor:"action.disabledBackground"}},children:a(tx,{})})})]})}),a(j,{sx:{mt:2,opacity:c?1:.5},children:a(An,{columns:Ae,data:ne,checkable:!1,fixedHeader:!0,maxHeight:"300px",sortConfig:se,onSort:J,page:0,rowsPerPage:10,totalCount:ne.length,sequentialPageNumbers:!1})})]}),m(Yn,{open:b.open,onClose:te,maxWidth:"sm",fullWidth:!0,children:[m(Zn,{children:[b.type==="subAccount"&&"서브 아이디 수정",b.type==="allowedIP"&&"허용 IP 수정",b.type==="blockedIP"&&"차단 IP 수정"]}),a(Kn,{children:a(M,{sx:{mt:2},children:"수정 기능은 추가 구현이 필요합니다."})}),m(nr,{children:[a(Se,{onClick:te,children:"취소"}),a(Se,{variant:"contained",onClick:te,children:"저장"})]})]}),a(ua,{open:k.open,autoHideDuration:3e3,onClose:()=>C({...k,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>C({...k,open:!1}),severity:k.severity,sx:{width:"100%"},children:k.message})})]})};var ku={},vR;function lue(){if(vR)return ku;vR=1;var e=ln();Object.defineProperty(ku,"__esModule",{value:!0}),ku.default=void 0;var t=e(un()),n=cn();return ku.default=(0,t.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ku}var cue=lue();const uue=vt(cue);var _u={},xR;function due(){if(xR)return _u;xR=1;var e=ln();Object.defineProperty(_u,"__esModule",{value:!0}),_u.default=void 0;var t=e(un()),n=cn();return _u.default=(0,t.default)((0,n.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),_u}var hue=due();const fue=vt(hue);var Tu={},wR;function pue(){if(wR)return Tu;wR=1;var e=ln();Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.default=void 0;var t=e(un()),n=cn();return Tu.default=(0,t.default)((0,n.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image"),Tu}var gue=pue();const mue=vt(gue),yue=()=>{On();const[e,t]=u.useState(0),[n,r]=u.useState(!1),[i,o]=u.useState(!1),[s,l]=u.useState({open:!1,message:"",severity:"success"}),[c,d]=u.useState([{id:1,name:"디자인1",adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}},{id:2,name:"디자인2",adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}},{id:3,name:"디자인3",adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}},{id:4,name:"디자인4",adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}},{id:5,name:"디자인5",adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}}]),h=c[e];u.useRef(null);const f=u.useRef(null),g=u.useRef(null),w=u.useRef(null);u.useRef({}),u.useRef(null),u.useRef({});const x=(T,I="success")=>{l({open:!0,message:T,severity:I})};u.useEffect(()=>{y()},[]);const y=async()=>{r(!0);try{const T=await Pe.get("/design-templates/templates");if(T.data,T.data.success&&T.data.data){const L=T.data.data.map(A=>({id:A.id,name:A.name||`디자인${A.id}`,adminLogo:{file:null,preview:A.admin_logo_url,width:A.admin_logo_width||200,height:A.admin_logo_height||60},userLogos:{main:{file:null,preview:A.user_main_logo_url,width:A.user_main_logo_width||180,height:A.user_main_logo_height||50},footer:{file:null,preview:A.user_footer_logo_url,width:A.user_footer_logo_width||150,height:A.user_footer_logo_height||40},login:{file:null,preview:A.user_login_logo_url,width:A.user_login_logo_width||200,height:A.user_login_logo_height||60}},mainSlides:A.slides?A.slides.map(D=>({id:D.id,file:null,preview:D.image_url,title:D.title||`슬라이드 ${D.slide_order}`})):[],backgroundSettings:{type:A.background_type||"color",color:A.background_color||"#f5f5f5",image:{file:null,preview:A.background_image_url}},snsSettings:A.sns?A.sns.reduce((D,B)=>(D[B.platform]={icon:null,preview:B.icon_url,url:B.link_url||""},D),{}):{}}));for(;L.length<5;)L.push({id:L.length+1,name:`디자인${L.length+1}`,adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}});d(L)}}catch(T){console.error("디자인 템플릿 로드 오류:",T),x("디자인 템플릿을 불러오는데 실패했습니다.","error")}finally{r(!1)}},p=u.useCallback(()=>{x(`${h.name}의 설정을 새로고침했습니다.`)},[h]),v=T=>{d(I=>I.map((L,A)=>A===e?{...L,...T}:L))},b=u.useCallback((T,I,L=null)=>{const A=T.target.files[0];if(!A)return;if(!["image/jpeg","image/png","image/gif","image/svg+xml"].includes(A.type)){x("JPG, PNG, GIF, SVG 파일만 업로드 가능합니다.","error");return}if(A.size>5*1024*1024){x("파일 크기는 5MB 이하여야 합니다.","error");return}const B=new FileReader;B.onloadend=()=>{var N;const $=B.result;switch(I){case"adminLogo":v({adminLogo:{...h.adminLogo,file:A,preview:$}}),x("관리자 로고가 업로드되었습니다.");break;case"userMainLogo":v({userLogos:{...h.userLogos,main:{...h.userLogos.main,file:A,preview:$}}}),x("유저페이지 메인 로고가 업로드되었습니다.");break;case"userFooterLogo":v({userLogos:{...h.userLogos,footer:{...h.userLogos.footer,file:A,preview:$}}}),x("유저페이지 푸터 로고가 업로드되었습니다.");break;case"userLoginLogo":v({userLogos:{...h.userLogos,login:{...h.userLogos.login,file:A,preview:$}}}),x("로그인 페이지 로고가 업로드되었습니다.");break;case"slide":v({mainSlides:h.mainSlides.map(O=>O.id===L?{...O,file:A,preview:$}:O)}),x(`${(N=h.mainSlides.find(O=>O.id===L))==null?void 0:N.title}이 업로드되었습니다.`);break;case"background":v({backgroundSettings:{...h.backgroundSettings,image:{file:A,preview:$}}}),x("백그라운드 이미지가 업로드되었습니다.");break;case"sns":const F=L;v({snsSettings:{...h.snsSettings,[F]:{...h.snsSettings[F],file:A,preview:$}}}),x(`${F} 아이콘이 업로드되었습니다.`);break}},B.readAsDataURL(A)},[h,v]),P=u.useCallback((T,I=null)=>{switch(T){case"adminLogo":v({adminLogo:{...h.adminLogo,file:null,preview:null}}),x("관리자 로고가 삭제되었습니다.");break;case"userMainLogo":v({userLogos:{...h.userLogos,main:{...h.userLogos.main,file:null,preview:null}}}),x("유저페이지 메인 로고가 삭제되었습니다.");break;case"userFooterLogo":v({userLogos:{...h.userLogos,footer:{...h.userLogos.footer,file:null,preview:null}}}),x("유저페이지 푸터 로고가 삭제되었습니다.");break;case"userLoginLogo":v({userLogos:{...h.userLogos,login:{...h.userLogos.login,file:null,preview:null}}}),x("로그인 페이지 로고가 삭제되었습니다.");break;case"slide":v({mainSlides:h.mainSlides.map(A=>A.id===I?{...A,file:null,preview:null}:A)}),x("슬라이드가 삭제되었습니다.");break;case"background":v({backgroundSettings:{...h.backgroundSettings,image:{file:null,preview:null}}}),x("백그라운드 이미지가 삭제되었습니다.");break;case"sns":const L=I;v({snsSettings:{...h.snsSettings,[L]:{...h.snsSettings[L],file:null,preview:null}}}),x(`${L} 아이콘이 삭제되었습니다.`);break}},[h,v]),k=u.useCallback((T,I,L)=>{d(A=>{const D=[...A],B=D[e];switch(T){case"adminLogo":B.adminLogo={...B.adminLogo,[I]:L};break;case"userMainLogo":B.userLogos.main={...B.userLogos.main,[I]:L};break;case"userFooterLogo":B.userLogos.footer={...B.userLogos.footer,[I]:L};break;case"userLoginLogo":B.userLogos.login={...B.userLogos.login,[I]:L};break}return D})},[e]);u.useCallback((T,I)=>{v({snsSettings:{...h.snsSettings,[T]:{...h.snsSettings[T],url:I}}})},[h,v]);const C=u.useCallback(async()=>{o(!0);try{const T=c[e];if(T.userLogos.main.file||T.userLogos.footer.file||T.userLogos.login.file){const L=new FormData;L.append("templateId",T.id),T.userLogos.main.file&&L.append("userMainLogo",T.userLogos.main.file),L.append("userMainLogoWidth",T.userLogos.main.width),L.append("userMainLogoHeight",T.userLogos.main.height),T.userLogos.footer.file&&L.append("userFooterLogo",T.userLogos.footer.file),L.append("userFooterLogoWidth",T.userLogos.footer.width),L.append("userFooterLogoHeight",T.userLogos.footer.height),T.userLogos.login.file&&L.append("userLoginLogo",T.userLogos.login.file),L.append("userLoginLogoWidth",T.userLogos.login.width),L.append("userLoginLogoHeight",T.userLogos.login.height);const A=await Pe.post("/design-templates/upload-logos",L,{headers:{"Content-Type":"multipart/form-data"}});if(A.data.success)x(`${h.name}의 유저페이지 로고가 저장되었습니다.`),await y();else throw new Error(A.data.error||"저장 실패")}else{const L={user_main_logo_width:T.userLogos.main.width,user_main_logo_height:T.userLogos.main.height,user_footer_logo_width:T.userLogos.footer.width,user_footer_logo_height:T.userLogos.footer.height,user_login_logo_width:T.userLogos.login.width,user_login_logo_height:T.userLogos.login.height},A=await Pe.put(`/design-templates/templates/${T.id}`,L);if(A.data.success)x(`${h.name}의 로고 크기가 저장되었습니다.`),await y();else throw new Error(A.data.error||"저장 실패")}}catch(T){console.error("저장 오류:",T),x("유저페이지 로고 저장에 실패했습니다.","error")}finally{o(!1)}},[c,e,h]),S=u.useCallback(()=>{window.confirm(`${h.name} 설정을 초기화하시겠습니까?`)&&(v({adminLogo:{file:null,preview:null,width:200,height:60},userLogos:{main:{file:null,preview:null,width:180,height:50},footer:{file:null,preview:null,width:150,height:40},login:{file:null,preview:null,width:200,height:60}},mainSlides:[{id:1,file:null,preview:null,title:"슬라이드 1"},{id:2,file:null,preview:null,title:"슬라이드 2"},{id:3,file:null,preview:null,title:"슬라이드 3"}],backgroundSettings:{type:"color",color:"#f5f5f5",image:{file:null,preview:null}},snsSettings:{facebook:{icon:null,preview:null,url:""},twitter:{icon:null,preview:null,url:""},instagram:{icon:null,preview:null,url:""},youtube:{icon:null,preview:null,url:""},telegram:{icon:null,preview:null,url:""},kakao:{icon:null,preview:null,url:""}}}),x(`${h.name} 설정이 초기화되었습니다.`))},[h,v]),_=({title:T,logo:I,type:L,inputRef:A,onUpload:D,onDelete:B,onSizeChange:$})=>{const N=F=>O=>{const R=O.target.value;if(R==="")$(L,F,0);else{const E=parseInt(R);!isNaN(E)&&E>=0&&E<=2e3&&$(L,F,E)}};return a(Sn,{elevation:2,sx:{height:"100%"},children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:T}),m(j,{sx:{mt:2,p:3,border:"2px dashed",borderColor:I.preview?"primary.main":"grey.300",borderRadius:2,textAlign:"center",bgcolor:"grey.50",minHeight:200,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[I.preview?m(j,{children:[a("img",{src:I.preview,alt:T,style:{maxWidth:"100%",maxHeight:150,width:I.width,height:I.height,objectFit:"contain"}}),a(Ct,{sx:{position:"absolute",top:8,right:8,bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},size:"small",onClick:()=>B(L),children:a(uue,{fontSize:"small"})})]}):m(j,{children:[a(mue,{sx:{fontSize:48,color:"grey.400",mb:1}}),a(M,{variant:"body2",color:"text.secondary",children:"클릭하여 로고 업로드"}),a(M,{variant:"caption",color:"text.secondary",children:"JPG, PNG, GIF, SVG (최대 5MB)"})]}),a("input",{ref:A,type:"file",accept:"image/*",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"},onChange:F=>D(F,L)})]}),m(j,{sx:{mt:3},children:[a(M,{variant:"body2",gutterBottom:!0,children:"크기 조정"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:6,children:m(kr,{spacing:1,children:[a(M,{variant:"caption",color:"text.secondary",children:"너비"}),a($e,{size:"small",type:"number",value:I.width,onChange:N("width"),InputProps:{endAdornment:a(Dt,{position:"end",children:"px"}),inputProps:{min:0,max:2e3}},fullWidth:!0})]})}),a(W,{item:!0,xs:6,children:m(kr,{spacing:1,children:[a(M,{variant:"caption",color:"text.secondary",children:"높이"}),a($e,{size:"small",type:"number",value:I.height,onChange:N("height"),InputProps:{endAdornment:a(Dt,{position:"end",children:"px"}),inputProps:{min:0,max:2e3}},fullWidth:!0})]})})]})]})]})})};return m(vn,{children:[a(Cn,{title:"디자인설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:p,sx:{mb:1}}),a(rt,{elevation:1,sx:{mb:3},children:a(La,{value:e,onChange:(T,I)=>t(I),variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:48,fontWeight:600}},children:c.map((T,I)=>a(_n,{label:T.name},T.id))})}),m(rt,{elevation:1,sx:{p:3,mb:3},children:[a(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2.5,backgroundColor:"#f5f7fa",borderRadius:1.5,p:2.5,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:a(M,{variant:"h6",sx:{fontWeight:600,color:"#2c3e50",fontSize:"1.1rem"},children:"유저페이지 로고 관리"})}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:6,children:a(_,{title:"메인 로고",logo:h.userLogos.main,type:"userMainLogo",inputRef:f,onUpload:b,onDelete:P,onSizeChange:k})}),a(W,{item:!0,xs:12,md:6,children:a(_,{title:"푸터 로고",logo:h.userLogos.footer,type:"userFooterLogo",inputRef:g,onUpload:b,onDelete:P,onSizeChange:k})}),a(W,{item:!0,xs:12,md:6,children:a(_,{title:"로그인 페이지 로고",logo:h.userLogos.login,type:"userLoginLogo",inputRef:w,onUpload:b,onDelete:P,onSizeChange:k})})]})]}),m(j,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[a(Se,{variant:"outlined",startIcon:a(fue,{}),onClick:S,children:"초기화"}),a(Se,{variant:"contained",color:"primary",onClick:C,disabled:i,sx:{minWidth:120},children:i?a(ir,{size:24,color:"inherit"}):"저장"})]}),a(ua,{open:s.open,autoHideDuration:3e3,onClose:()=>l({...s,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>l({...s,open:!1}),severity:s.severity,sx:{width:"100%"},children:s.message})})]})},Hf=[{id:"dashboard",text:"대시보드",icon:a(oz,{}),path:"/dashboard"},{id:"agent-management",text:"에이전트/회원관리",icon:a(p1,{}),children:[{id:"members",text:"회원관리",path:"/agent-management/members"},{id:"registration-requests",text:"회원가입요청",path:"/agent-management/registration-requests"},{id:"rolling-history",text:"롤링금전환내역",path:"/agent-management/rolling-history"},{id:"commission-history",text:"커미션내역",path:"/agent-management/commission-history"},{id:"money-history",text:"머니처리내역",path:"/money-history"},{id:"money-transfer",text:"머니이동내역",path:"/agent-management/money-transfer"},{id:"username-change-history",text:"아이디바꿔주기내역",path:"/agent-management/username-change-history"}]},{id:"betting",text:"배팅상세내역",icon:a(sz,{}),children:[{id:"slot-casino",text:"슬롯/카지노",path:"/betting/slot-casino"}]},{id:"settlement",text:"정산관리",icon:a(lz,{}),children:[{id:"today",text:"당일정산",path:"/settlement/today"},{id:"daily",text:"일자별",path:"/settlement/daily"},{id:"third-party",text:"게임사별",path:"/settlement/third-party"}]},{id:"transactions",text:"입출금관리",icon:a(cz,{}),children:[{id:"deposit",text:"입금신청처리",path:"/transactions/deposit"},{id:"withdrawal",text:"출금신청처리",path:"/transactions/withdrawal"},{id:"history",text:"충환내역",path:"/transactions/history"}]},{id:"customer-service",text:"고객센터",icon:a(uz,{}),children:[{id:"messages",text:"문의관리",path:"/customer-service/messages"},{id:"templates",text:"템플릿관리",path:"/customer-service/templates"}]},{id:"board",text:"게시판",icon:a(dz,{}),children:[{id:"notices",text:"공지사항",path:"/board/notices"},{id:"events",text:"이벤트",path:"/board/events"},{id:"popup",text:"팝업 설정",path:"/board/popup"}]},{id:"game-settings",text:"게임설정",icon:a(Cs,{}),children:[{id:"slot",text:"슬롯",path:"/game-settings/slot"},{id:"casino",text:"카지노",path:"/game-settings/casino"}]},{id:"site-settings",text:"사이트설정",icon:a(hz,{}),children:[{id:"admin-info",text:"관리자/IP설정",path:"/site-settings/admin-info"},{id:"design",text:"디자인설정",path:"/site-settings/design"},{id:"menu",text:"메뉴설정",path:"/site-settings/menu"},{id:"domain",text:"도메인설정",path:"/site-settings/domain"},{id:"bank",text:"계좌/은행설정",path:"/site-settings/bank"},{id:"agent-level",text:"단계/권한설정",path:"/site-settings/agent-level"},{id:"registration",text:"회원가입설정",path:"/site-settings/registration"},{id:"events-settings",text:"이벤트설정",path:"/site-settings/events"},{id:"change-username",text:"아이디바꿔주기",path:"/site-settings/change-username"},{id:"maintenance",text:"점검설정",path:"/site-settings/maintenance"},{id:"other",text:"기타설정",path:"/site-settings/other"},{id:"master-ip",text:"마스터 IP 설정",path:"/site-settings/master-ip",requireMaster:!0}]},{id:"logs",text:"로그관리",icon:a(fz,{}),children:[{id:"auth",text:"접속로그",path:"/logs/auth"},{id:"member-changes",text:"회원변경로그",path:"/logs/member-changes"},{id:"system",text:"시스템로그",path:"/logs/system"}]},{id:"base-template",text:"기본템플릿",icon:a(pz,{}),path:"/base-template"},{id:"logout",text:"로그아웃",icon:a(pE,{}),path:"/logout",isSpecial:!0}],bue=()=>{On();const e=()=>{const P=localStorage.getItem("menuSettings");if(P)try{return JSON.parse(P)}catch(k){return console.error("Failed to parse menu settings:",k),{}}return{}},t=u.useCallback(()=>{const P=e();return Hf.filter(k=>!k.isSpecial).map(k=>{const C=P[k.id]||{},S={...k,enabled:C.enabled!==void 0?C.enabled:!0,expanded:C.expanded!==void 0?C.expanded:!0};return k.children&&(S.children=k.children.map(_=>{const T=P[`${k.id}.${_.id}`]||{};return{..._,enabled:T.enabled!==void 0?T.enabled:!0}})),S})},[]),[n,r]=u.useState(()=>t()),[i,o]=u.useState({open:!1,message:"",severity:"success"}),{searchText:s,handleSearchChange:l,handleClearSearch:c}=Rn({initialTotalItems:n.length,tableId:"menuSettings"}),d=(P,k="success")=>{o({open:!0,message:P,severity:k})},h=u.useCallback((P,k=null)=>{r(C=>C.map(S=>k===null&&S.id===P?{...S,enabled:!S.enabled}:S.id===P&&S.children?{...S,children:S.children.map(_=>_.id===k?{..._,enabled:!_.enabled}:_)}:S))},[]),f=u.useCallback(P=>{r(k=>k.map(C=>C.id===P?{...C,expanded:!C.expanded}:C))},[]),g=u.useMemo(()=>{let P=0,k=0;return n.forEach(C=>{C.enabled&&P++,k++,C.children&&C.children.forEach(S=>{S.enabled&&P++,k++})}),{enabled:P,total:k}},[n]),w=u.useCallback(()=>{const P={};n.forEach(k=>{P[k.id]={enabled:k.enabled,expanded:k.expanded},k.children&&k.children.forEach(C=>{P[`${k.id}.${C.id}`]={enabled:C.enabled}})}),localStorage.setItem("menuSettings",JSON.stringify(P)),window.dispatchEvent(new Event("menuSettingsUpdated"))},[n]),x=u.useCallback(()=>{w(),d("메뉴 설정이 저장되었습니다.")},[w]),y=u.useCallback(()=>{window.confirm("모든 메뉴를 표시 상태로 초기화하시겠습니까?")&&(r(P=>P.map(k=>({...k,enabled:!0,children:k.children?k.children.map(C=>({...C,enabled:!0})):[]}))),d("메뉴 설정이 초기화되었습니다."))},[]),p=u.useCallback(()=>{d("메뉴 설정을 새로고침했습니다.")},[]),v=u.useMemo(()=>{if(!s)return n;const P=s.toLowerCase();return n.filter(k=>k.text.toLowerCase().includes(P)?!0:k.children?k.children.some(C=>C.text.toLowerCase().includes(P)):!1)},[n,s]),b=(P,k=!1,C=null)=>m(Oa,{sx:{pl:k?6:2,pr:2,py:1.5,borderBottom:k?"none":"1px solid",borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},children:[!k&&P.icon&&a(ur,{sx:{minWidth:40,color:P.enabled?"primary.main":"text.disabled"},children:P.icon}),a(_r,{primary:a(M,{variant:k?"body2":"body1",sx:{fontWeight:k?400:600,color:P.enabled?"text.primary":"text.disabled"},children:P.text}),secondary:P.path&&a(M,{variant:"caption",color:"text.secondary",children:P.path})}),!k&&P.children&&P.children.length>0&&a(Ct,{size:"small",onClick:()=>f(P.id),sx:{mr:1},children:P.expanded?a(gE,{}):a(Oo,{})}),a(g1,{children:a(sn,{edge:"end",checked:P.enabled,onChange:()=>h(C||P.id,k?P.id:null),color:"primary"})})]},P.id);return m(vn,{children:[a(Cn,{title:"메뉴설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:p,sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[a(gn,{title:"사이드바 메뉴 관리",totalItems:g.total,countLabel:`##count##개 메뉴 (${g.enabled}개 활성화)`,showSearch:!0,searchText:s,handleSearchChange:l,handleClearSearch:c,searchPlaceholder:"메뉴 검색...",showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,bgcolor:"background.paper",mb:3,overflow:"hidden"},children:a(xi,{sx:{width:"100%",p:0},children:v.map(P=>m(Ce.Fragment,{children:[b(P),P.children&&P.children.length>0&&a(Is,{in:P.expanded,timeout:"auto",unmountOnExit:!0,children:a(xi,{component:"div",disablePadding:!0,children:P.children.map(k=>b(k,!0,P.id))})})]},P.id))})}),m(j,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[a(Se,{variant:"outlined",onClick:y,children:"초기화"}),a(Se,{variant:"contained",color:"primary",startIcon:a(qo,{}),onClick:x,sx:{minWidth:120},children:"저장"})]})]}),a(ua,{open:i.open,autoHideDuration:3e3,onClose:()=>o({...i,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>o({...i,open:!1}),severity:i.severity,sx:{width:"100%"},children:i.message})})]})},tl=()=>({"X-Domain":window.location.hostname}),Iu={getAllDomains:async()=>{try{return(await Pe.get("/domains",{headers:tl()})).data}catch(e){throw console.error("도메인 조회 실패:",e),e}},getDomainsByType:async e=>{try{return(await Pe.get(`/domains/type/${e}`,{headers:tl()})).data}catch(t){throw console.error("도메인 조회 실패:",t),t}},addDomain:async e=>{try{return(await Pe.post("/domains",e,{headers:tl()})).data}catch(t){throw console.error("도메인 추가 실패:",t),t}},updateDomain:async(e,t)=>{try{return(await Pe.put(`/domains/${e}`,t,{headers:tl()})).data}catch(n){throw console.error("도메인 수정 실패:",n),n}},toggleDomainStatus:async e=>{try{return(await Pe.patch(`/domains/${e}/toggle`,{},{headers:tl()})).data}catch(t){throw console.error("도메인 상태 변경 실패:",t),t}},deleteDomain:async e=>{try{return(await Pe.delete(`/domains/${e}`,{headers:tl()})).data}catch(t){throw console.error("도메인 삭제 실패:",t),t}}},vue=()=>{var oe;const[e,t]=u.useState([]),[n,r]=u.useState([]),[i,o]=u.useState(!0),[s,l]=u.useState({url:"",domain_type:"admin",permissions:[]}),[c,d]=u.useState(!1),[h,f]=u.useState(null),[g,w]=u.useState(null),[x,y]=u.useState({open:!1,domain:null}),[p,v]=u.useState({open:!1,message:"",severity:"success"}),{searchText:b,handleSearchChange:P,handleClearSearch:k}=Rn({initialTotalItems:e.length,tableId:"domainSettings"}),{checkedItems:C,sortConfig:S,allChecked:_,handleSort:T,handleCheck:I,handleToggleAll:L}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{}});u.useEffect(()=>{A()},[]);const A=async()=>{var G,Q;try{o(!0);try{const te=await Iu.getAllDomains();te.success&&t(te.data.map(U=>({id:U.id,domain_type:U.domain_type,url:U.url,permissions:U.permissions||[],createdAt:U.created_at.split("T")[0],updatedAt:U.updated_at.split("T")[0],active:U.is_active===1})))}catch(te){console.error("도메인 로드 실패:",te),!((G=te.response)!=null&&G.status)===401&&D("도메인 목록을 불러오는데 실패했습니다.","error")}try{const te=await Ji.getAll();r(te.filter(U=>U.id!==999))}catch(te){console.error("레벨 로드 실패:",te),!((Q=te.response)!=null&&Q.status)===401&&D("에이전트 레벨을 불러오는데 실패했습니다.","error")}}catch(te){console.error("전체 로드 실패:",te),te.isAuthError?(D("인증이 만료되었습니다. 다시 로그인해주세요.","error"),setTimeout(()=>{window.location.href="/login"},3e3)):D("데이터를 불러오는데 실패했습니다.","error")}finally{o(!1)}},D=(G,Q="success")=>{v({open:!0,message:G,severity:Q})},B=u.useCallback(async()=>{var G,Q;if(!s.url.trim()){D("도메인 URL을 입력해주세요.","error");return}try{new URL(s.url)}catch{D("올바른 URL 형식이 아닙니다.","error");return}try{(await Iu.addDomain({domain_type:s.domain_type,url:s.url.trim(),permissions:s.domain_type==="admin"?s.permissions:[]})).success&&(await A(),l({url:"",domain_type:"admin",permissions:[]}),d(!1),D("도메인이 추가되었습니다."))}catch(te){console.error("도메인 추가 실패:",te),D(((Q=(G=te.response)==null?void 0:G.data)==null?void 0:Q.error)||"도메인 추가에 실패했습니다.","error")}},[s]),$=u.useCallback(G=>{f(G.id),w({...G,permissions:G.permissions.map(Q=>Q.agent_level_id)})},[]),N=u.useCallback(async()=>{var G,Q;if(!g.url.trim()){D("도메인 URL을 입력해주세요.","error");return}try{new URL(g.url)}catch{D("올바른 URL 형식이 아닙니다.","error");return}try{(await Iu.updateDomain(h,{url:g.url.trim(),permissions:g.domain_type==="admin"?g.permissions:[]})).success&&(await A(),f(null),w(null),D("도메인이 수정되었습니다."))}catch(te){console.error("도메인 수정 실패:",te),D(((Q=(G=te.response)==null?void 0:G.data)==null?void 0:Q.error)||"도메인 수정에 실패했습니다.","error")}},[h,g]),F=u.useCallback(()=>{f(null),w(null)},[]),O=u.useCallback(G=>{y({open:!0,domain:G})},[]),R=u.useCallback(async()=>{if(x.domain)try{(await Iu.deleteDomain(x.domain.id)).success&&(await A(),D("도메인이 삭제되었습니다."))}catch(G){console.error("도메인 삭제 실패:",G),D("도메인 삭제에 실패했습니다.","error")}y({open:!1,domain:null})},[x.domain]),E=u.useCallback(async G=>{try{const Q=await Iu.toggleDomainStatus(G.id);Q.success&&(await A(),D(Q.message))}catch(Q){console.error("도메인 상태 변경 실패:",Q),D("도메인 상태 변경에 실패했습니다.","error")}},[]),z=u.useCallback(async()=>{await A(),D("도메인 목록을 새로고침했습니다.")},[]),q=u.useCallback(G=>{navigator.clipboard.writeText(G),D("URL이 클립보드에 복사되었습니다.")},[]),X=u.useCallback(G=>{window.open(G,"_blank")},[]),H=u.useCallback((G,Q=!1)=>{if(Q&&g){const te=g.permissions.includes(G)?g.permissions.filter(U=>U!==G):[...g.permissions,G];w({...g,permissions:te})}else{const te=s.permissions.includes(G)?s.permissions.filter(U=>U!==G):[...s.permissions,G];l({...s,permissions:te})}},[s,g]),K=u.useMemo(()=>{let G=[...e];if(b){const Q=b.toLowerCase();G=G.filter(te=>te.url.toLowerCase().includes(Q)||te.domain_type.toLowerCase().includes(Q))}return G},[e,b]),ee=[{id:"no",label:"No.",width:70,align:"center",type:"number"},{id:"domain_type",label:"타입",width:120,align:"center",type:"custom",render:G=>G?a(ut,{icon:G.domain_type==="admin"?a(gz,{}):a(p1,{}),label:G.domain_type==="admin"?"관리자":"유저",color:G.domain_type==="admin"?"primary":"success",size:"small"}):null},{id:"url",label:"도메인 URL",width:350,align:"left",type:"custom",render:G=>G?h===G.id?a($e,{value:g.url,onChange:Q=>w({...g,url:Q.target.value}),size:"small",fullWidth:!0,InputProps:{startAdornment:a(Dt,{position:"start",children:a(Ss,{fontSize:"small"})})}}):m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(Ss,{fontSize:"small",color:"action"}),a(M,{variant:"body2",sx:{flex:1},children:G.url}),a(Ct,{size:"small",onClick:()=>X(G.url),title:"새창에서 열기",children:a(mz,{fontSize:"small"})}),a(Ct,{size:"small",onClick:()=>q(G.url),title:"URL 복사",children:a(x1,{fontSize:"small"})})]}):null},{id:"permissions",label:"접속 가능 단계",width:300,align:"left",type:"custom",render:G=>G?G.domain_type==="user"?a(M,{variant:"body2",color:"text.secondary",children:"-"}):h===G.id?a(Aa,{row:!0,children:n.map(Q=>a(Lt,{control:a(gr,{size:"small",checked:g.permissions.includes(Q.id),onChange:()=>H(Q.id,!0)}),label:Q.name||Q.levelType||Q.level_name,sx:{mr:1,"& .MuiFormControlLabel-label":{fontSize:"0.875rem"}}},Q.id))}):a(j,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:!G.permissions||G.permissions.length===0?a(M,{variant:"body2",color:"text.secondary",children:"권한 없음"}):G.permissions.map(Q=>a(ut,{label:Q.level_name||Q.levelType,size:"small",color:"default"},Q.agent_level_id))}):null},{id:"createdAt",label:"등록일",width:100,align:"center",type:"text"},{id:"active",label:"상태",width:80,align:"center",type:"custom",render:G=>G?a(sn,{checked:G.active,onChange:()=>E(G),size:"small",color:"primary"}):null},{id:"actions",label:"액션",width:150,align:"center",type:"custom",render:G=>G?h===G.id?m(j,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[a(ut,{label:"저장",color:"primary",size:"small",onClick:N,sx:{cursor:"pointer"}}),a(ut,{label:"취소",color:"default",size:"small",onClick:F,sx:{cursor:"pointer"}})]}):m(j,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[a(ut,{label:"수정",color:"primary",size:"small",variant:"outlined",onClick:()=>$(G),sx:{cursor:"pointer"}}),a(ut,{label:"삭제",color:"error",size:"small",variant:"outlined",onClick:()=>O(G),sx:{cursor:"pointer"}})]}):null}],ge=u.useMemo(()=>K.map((G,Q)=>({...G,no:Q+1})),[K]);return m(vn,{children:[a(Cn,{title:"도메인 설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:z,sx:{mb:2}}),a(rt,{elevation:1,sx:{p:3,borderRadius:2},children:i?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(M,{children:"데이터를 불러오는 중..."})}):m(bn,{children:[a(gn,{title:"도메인 관리",totalItems:e.length,countLabel:"총 ##count##개의 도메인",searchText:b,handleSearchChange:P,handleClearSearch:k,showSearch:!0,searchPlaceholder:"도메인 검색...",showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:2}}),a(j,{sx:{display:"flex",flexDirection:"column",gap:2,mb:3,p:2,border:"1px solid",borderColor:"divider",borderRadius:1,bgcolor:"background.paper"},children:c?m(bn,{children:[m(j,{sx:{display:"flex",gap:2,alignItems:"flex-start"},children:[m(Zt,{size:"small",sx:{minWidth:120},children:[a(hn,{children:"타입"}),m(an,{value:s.domain_type,label:"타입",onChange:G=>l({...s,domain_type:G.target.value,permissions:[]}),children:[a(Me,{value:"admin",children:"관리자"}),a(Me,{value:"user",children:"유저"})]})]}),a($e,{placeholder:"https://example.com",value:s.url,onChange:G=>l({...s,url:G.target.value}),size:"small",sx:{flex:1},InputProps:{startAdornment:a(Dt,{position:"start",children:a(Ss,{})})},onKeyPress:G=>{G.key==="Enter"&&B()}}),a(Ct,{color:"primary",onClick:B,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:a(lo,{})}),a(Se,{variant:"outlined",onClick:()=>{d(!1),l({url:"",domain_type:"admin",permissions:[]})},children:"취소"})]}),s.domain_type==="admin"&&m(j,{children:[a(M,{variant:"body2",sx:{mb:1},children:"접속 가능 단계 선택:"}),n.length===0?a(M,{variant:"body2",color:"text.secondary",children:"에이전트 레벨 데이터를 불러오는 중..."}):a(Aa,{row:!0,children:n.map(G=>a(Lt,{control:a(gr,{size:"small",checked:s.permissions.includes(G.id),onChange:()=>H(G.id)}),label:G.name||G.levelType||G.level_name||`Level ${G.id}`,sx:{mr:2}},G.id))})]})]}):a(Se,{variant:"contained",startIcon:a(lo,{}),onClick:()=>d(!0),sx:{width:"fit-content"},children:"도메인 추가"})}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:a(An,{columns:ee,data:ge,checkable:!0,checkedItems:C,allChecked:_,onCheck:I,onToggleAll:L,onSort:T,sortConfig:S,sx:{"& .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"}}})}),K.length===0&&a(j,{sx:{textAlign:"center",py:10,color:"text.secondary"},children:a(M,{variant:"body1",children:b?"검색 결과가 없습니다.":"등록된 도메인이 없습니다."})})]})}),m(Yn,{open:x.open,onClose:()=>y({open:!1,domain:null}),children:[a(Zn,{children:"도메인 삭제 확인"}),m(Kn,{children:[m(M,{children:['"',(oe=x.domain)==null?void 0:oe.url,'" 도메인을 삭제하시겠습니까?']}),a(M,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"이 작업은 되돌릴 수 없습니다."})]}),m(nr,{children:[a(Se,{onClick:()=>y({open:!1,domain:null}),children:"취소"}),a(Se,{onClick:R,color:"error",variant:"contained",children:"삭제"})]})]}),a(ua,{open:p.open,autoHideDuration:3e3,onClose:()=>v({...p,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>v({...p,open:!1}),severity:p.severity,sx:{width:"100%"},children:p.message})})]})},pf={getAllAccounts:async()=>{try{const e=await Pe.get("/agent-level-accounts");return e.data,e.data}catch(e){throw console.error("에이전트 레벨 계좌 조회 실패:",e),e}},getAccountByLevel:async e=>{try{return(await Pe.get(`/agent-level-accounts/level/${e}`)).data}catch(t){throw console.error("계좌 조회 실패:",t),t}},saveAccount:async e=>{try{return(await Pe.post("/agent-level-accounts",e)).data}catch(t){throw console.error("계좌 저장 실패:",t),t}},bulkSaveAccounts:async e=>{try{return(await Pe.post("/agent-level-accounts/bulk",{accounts:e})).data}catch(t){throw console.error("일괄 저장 실패:",t),t}},bulkApplyAutoReply:async e=>{try{return(await Pe.post("/agent-level-accounts/bulk-auto-reply",{auto_reply:e})).data}catch(t){throw console.error("자동답변 일괄 적용 실패:",t),t}}},xue=["국민은행","KB국민은행","신한은행","우리은행","SC제일은행","하나은행","KEB하나은행","농협은행","NH농협은행","기업은행","IBK기업은행","외환은행","씨티은행","대구은행","부산은행","광주은행","제주은행","전북은행","경남은행","새마을금고","신협","우체국","수협은행","산업은행","KDB산업은행","케이뱅크","카카오뱅크","토스뱅크"],wue=()=>{var se;const[e,t]=u.useState([]),[n,r]=u.useState(!0),[i,o]=u.useState(null);u.useEffect(()=>{(async()=>{try{const Z=await Pe.get("/agent-levels"),_e=(Z.data.data||Z.data).filter(Re=>Re.id!==999).sort((Re,He)=>Re.level-He.level);t(_e)}catch(Z){console.error("에이전트 레벨 로드 실패:",Z),o(Z)}finally{r(!1)}})()},[]);const s=u.useMemo(()=>e.map((J,Z)=>({id:`account_${J.id}`,type:`level_${J.level}`,levelType:J.name,backgroundColor:J.background_color,borderColor:J.border_color,bank:"",accountNumber:"",accountHolder:"",autoReply:`<p>${J.name} 계좌입니다.</p>`,active:!0,no:Z+1,agentLevelId:J.id,levelNumber:J.level})),[e]),[l,c]=u.useState(0),[d,h]=u.useState([]),[f,g]=u.useState(!1),[w,x]=u.useState(null),[y,p]=u.useState(null),[v,b]=u.useState({bankName:"",maintenanceTime:"00:00~00:30",useName:""}),[P,k]=u.useState({open:!1,type:null,content:""}),[C,S]=u.useState({open:!1,content:""}),[_,T]=u.useState({open:!1,item:null,type:null}),[I,L]=u.useState({open:!1,message:"",severity:"success"}),A=s,D=Rn({initialTotalItems:A.length,tableId:"accountSettings"}),B=Rn({initialTotalItems:d.length,tableId:"bankSettings"}),[$,N]=u.useState({}),[F,O]=u.useState(!1),R=Nn({data:A,initialSort:{key:null,direction:"asc"}}),E=Nn({data:d,initialSort:{key:null,direction:"asc"}}),z=(J,Z="success")=>{L({open:!0,message:J,severity:Z})};u.useEffect(()=>{(async()=>{try{const ie=(await n1.getBankAccounts()).map(_e=>{var Re;return{id:_e.id,bankName:_e.bank_name,maintenanceTime:(Re=_e.description)!=null&&Re.includes("점검시간:")?_e.description.replace("점검시간: ",""):"00:00~00:30",useName:_e.bank_name.substring(0,2),active:_e.is_active===1}});h(ie)}catch(Z){console.error("은행 설정 로드 실패:",Z);const ie=localStorage.getItem("bankSettings");ie&&h(JSON.parse(ie))}})()},[]),u.useEffect(()=>{d.length>0&&localStorage.setItem("bankSettings",JSON.stringify(d))},[d]),u.useEffect(()=>{(async()=>{if(!(n||e.length===0))try{const Z=await pf.getAllAccounts(),ie={};Z.forEach(_e=>{if(_e.agent_level_id){const Re=s.find(He=>He.agentLevelId===_e.agent_level_id);Re&&(ie[Re.id]={bank:_e.bank_name||"",accountNumber:_e.account_number||"",accountHolder:_e.account_holder||"",autoReply:_e.auto_reply||"",active:_e.is_active===1})}}),N(ie)}catch(Z){console.error("계좌 설정 로드 실패:",Z);const ie=localStorage.getItem("accountSettings");ie&&N(JSON.parse(ie))}})()},[n,e,s]);const q=u.useCallback((J,Z,ie)=>{N(_e=>({..._e,[J]:{..._e[J],[Z]:ie}}))},[]),X=u.useCallback(J=>{const Z=$[J.id]||{},ie=Z.bank||J.bank||"",_e=Z.accountNumber||J.accountNumber||"",Re=Z.accountHolder||J.accountHolder||"",He=`${ie} ${_e} ${Re}`.trim();if(!He){z("복사할 계좌정보가 없습니다.","warning");return}navigator.clipboard.writeText(He),z("계좌정보가 클립보드에 복사되었습니다.")},[$]),H=u.useCallback((J,Z,ie=null)=>{const _e=(Z==null?void 0:Z.bank)||"",Re=(Z==null?void 0:Z.accountNumber)||"",He=(Z==null?void 0:Z.accountHolder)||"";let ft=ie||(Z==null?void 0:Z.autoReply)||`<p>${J==null?void 0:J.levelType} 계좌입니다.</p>`;if((_e||Re||He)&&(_e&&(ft.match(/<([^>]+)>([^<]*은행[\s]*:[^<]*)<\/\1>/i)?ft=ft.replace(/(<([^>]+)>)([^<]*은행[\s]*:)([^<]*)(<\/\2>)/gi,`$1$3 ${_e}$5`):ft+=`<p>은행: ${_e}</p>`),Re&&(ft.match(/<([^>]+)>([^<]*계좌번호[\s]*:[^<]*)<\/\1>/i)?ft=ft.replace(/(<([^>]+)>)([^<]*계좌번호[\s]*:)([^<]*)(<\/\2>)/gi,`$1$3 ${Re}$5`):ft+=`<p>계좌번호: ${Re}</p>`),He&&(ft.match(/<([^>]+)>([^<]*예금주[\s]*:[^<]*)<\/\1>/i)?ft=ft.replace(/(<([^>]+)>)([^<]*예금주[\s]*:)([^<]*)(<\/\2>)/gi,`$1$3 ${He}$5`):ft+=`<p>예금주: ${He}</p>`),!ft.match(/계좌[\s]*정보/i))){const St=ft.match(/<([^>]+)>([^<]*(은행|계좌번호|예금주)[\s]*:[^<]*)<\/\1>/i);if(St){const Tt=ft.indexOf(St[0]);ft=ft.slice(0,Tt)+"<p><strong>계좌 정보</strong></p>"+ft.slice(Tt)}}return ft},[]),K=u.useCallback(J=>{const Z=s.find(Re=>Re.type===J),ie=$[Z==null?void 0:Z.id]||{},_e=H(Z,ie);k({open:!0,type:J,content:_e})},[s,$,H]),ee=u.useCallback(async()=>{try{const J=s.find(_e=>_e.type===P.type);if(!J)return;const Z=$[J.id]||{},ie=H(J,Z,P.content);await pf.saveAccount({agent_level_id:J.agentLevelId,bank_name:Z.bank||"",account_number:Z.accountNumber||"",account_holder:Z.accountHolder||"",auto_reply:ie,is_active:Z.active!==!1?1:0}),N(_e=>({..._e,[J.id]:{..._e[J.id],autoReply:ie}})),k({open:!1,type:null,content:""}),z("자동답변이 저장되었습니다.")}catch(J){console.error("자동답변 저장 실패:",J),z("자동답변 저장에 실패했습니다.","error")}},[P,s,$,H]),ge=u.useCallback(()=>{S({open:!0,content:""})},[]),oe=u.useCallback(async()=>{try{const J=[];s.forEach(Z=>{const ie=$[Z.id]||{},_e=H(Z,ie,C.content);J.push({agent_level_id:Z.agentLevelId,bank_name:ie.bank||"",account_number:ie.accountNumber||"",account_holder:ie.accountHolder||"",auto_reply:_e,is_active:ie.active!==!1?1:0})}),await pf.bulkSaveAccounts(J),N(Z=>{const ie={...Z};return s.forEach(_e=>{const Re=Z[_e.id]||{},He=H(_e,Re,C.content);ie[_e.id]={...Re,autoReply:He}}),ie}),S({open:!1,content:""}),z("모든 유형에 자동답변이 적용되었습니다.")}catch(J){console.error("일괄 적용 실패:",J),z("일괄 적용에 실패했습니다.","error")}},[C.content,s,$,H]),G=u.useCallback(async()=>{if(!v.bankName.trim()){z("은행명을 입력해주세요.","error");return}try{await n1.addBankAccount({bank_name:v.bankName,account_number:"미지정",account_holder:"미지정",description:`점검시간: ${v.maintenanceTime}`});const J=Math.max(...d.map(Z=>Z.id),0)+1;h(Z=>[...Z,{id:J,...v,active:!0}]),b({bankName:"",maintenanceTime:"00:00~00:30",useName:""}),g(!1),z("은행이 추가되었습니다.")}catch(J){console.error("은행 추가 실패:",J),z("은행 추가에 실패했습니다.","error")}},[d,v]),Q=u.useCallback(J=>{x(J.id),p({...J})},[]),te=u.useCallback(()=>{h(J=>J.map(Z=>Z.id===w?y:Z)),x(null),p(null),z("은행정보가 수정되었습니다.")},[w,y]),U=u.useCallback(()=>{x(null),p(null)},[]),V=u.useCallback((J,Z)=>{T({open:!0,item:J,type:Z})},[]),ae=u.useCallback(()=>{_.type==="bank"&&_.item&&(h(J=>J.filter(Z=>Z.id!==_.item.id)),z("은행이 삭제되었습니다.")),T({open:!1,item:null,type:null})},[_]),ne=u.useCallback((J,Z)=>{var _e,Re;if(Z==="bank")h(He=>He.map(ft=>ft.id===J.id?{...ft,active:!ft.active}:ft));else if(Z==="account"){const He=((_e=$[J.id])==null?void 0:_e.active)??J.active??!0;q(J.id,"active",!He)}const ie=Z==="account"?((Re=$[J.id])==null?void 0:Re.active)??J.active??!0:J.active;z(`${Z==="bank"?"은행":"계좌"}이 ${ie?"비활성화":"활성화"}되었습니다.`)},[$,q]),me=u.useCallback(()=>{z("데이터를 새로고침했습니다.")},[]),ue=u.useMemo(()=>[{id:"no",label:"No.",width:70,align:"center",type:"number"},{id:"levelType",label:"유형",width:150,align:"center",type:"custom",customRenderer:"levelTypeChip"},{id:"bank",label:"은행",width:150,align:"center",type:"custom",render:J=>{var ie;if(!J||!J.id)return null;const Z=((ie=$[J.id])==null?void 0:ie.bank)||J.bank||"";return a(Zt,{size:"small",fullWidth:!0,children:m(an,{value:Z,onChange:_e=>q(J.id,"bank",_e.target.value),displayEmpty:!0,sx:{fontSize:"14px","& .MuiSelect-select":{padding:"4px 8px"}},children:[a(Me,{value:"",children:a("em",{children:"선택하세요"})}),xue.map(_e=>a(Me,{value:_e,children:_e},_e))]})})}},{id:"accountNumber",label:"계좌번호",width:200,align:"center",type:"custom",render:J=>{var ie;if(!J||!J.id)return null;const Z=((ie=$[J.id])==null?void 0:ie.accountNumber)||J.accountNumber||"";return a($e,{value:Z,onChange:_e=>q(J.id,"accountNumber",_e.target.value),size:"small",fullWidth:!0,placeholder:"계좌번호 입력",sx:{"& .MuiInputBase-input":{padding:"4px 8px",fontSize:"14px",textAlign:"center"}}})}},{id:"accountHolder",label:"예금주",width:150,align:"center",type:"custom",render:J=>{var ie;if(!J||!J.id)return null;const Z=((ie=$[J.id])==null?void 0:ie.accountHolder)||J.accountHolder||"";return a($e,{value:Z,onChange:_e=>q(J.id,"accountHolder",_e.target.value),size:"small",fullWidth:!0,placeholder:"예금주 입력",sx:{"& .MuiInputBase-input":{padding:"4px 8px",fontSize:"14px",textAlign:"center"}}})}},{id:"copyButton",label:"복사",width:80,align:"center",type:"custom",render:J=>{var Z,ie,_e;return!J||!J.id?null:a(Ct,{size:"small",onClick:()=>X(J),title:"계좌정보 복사",disabled:!$[J.id]||!((Z=$[J.id])!=null&&Z.bank)&&!((ie=$[J.id])!=null&&ie.accountNumber)&&!((_e=$[J.id])!=null&&_e.accountHolder),children:a(x1,{fontSize:"small"})})}},{id:"autoReply",label:"자동답변",width:150,align:"center",type:"custom",render:J=>J?a(Se,{size:"small",variant:"outlined",startIcon:a(Kf,{}),onClick:()=>K(J.type),children:"편집"}):null},{id:"active",label:"상태",width:100,align:"center",type:"custom",render:J=>{var ie;if(!J||!J.id)return null;const Z=((ie=$[J.id])==null?void 0:ie.active)??J.active??!0;return a(sn,{checked:Z,onChange:()=>ne(J,"account"),size:"small",color:"primary"})}}],[$,X,K,ne,q]),Ae=[{id:"no",label:"No.",width:70,align:"center",type:"number"},{id:"bankName",label:"은행명",width:200,align:"left",type:"custom",render:J=>!J||!J.id?null:w===J.id?a($e,{value:y.bankName,onChange:Z=>p({...y,bankName:Z.target.value}),size:"small",fullWidth:!0}):m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(so,{fontSize:"small",color:"action"}),a(M,{variant:"body2",children:J.bankName})]})},{id:"maintenanceTime",label:"점검시간",width:200,align:"center",type:"custom",render:J=>!J||!J.id?null:w===J.id?a($e,{value:y.maintenanceTime,onChange:Z=>p({...y,maintenanceTime:Z.target.value}),size:"small",fullWidth:!0}):J.maintenanceTime},{id:"useName",label:"사용명",width:150,align:"center",type:"custom",render:J=>!J||!J.id?null:w===J.id?a($e,{value:y.useName,onChange:Z=>p({...y,useName:Z.target.value}),size:"small",fullWidth:!0}):J.useName},{id:"active",label:"상태",width:100,align:"center",type:"custom",render:J=>!J||!J.id?null:a(sn,{checked:J.active,onChange:()=>ne(J,"bank"),size:"small",color:"primary"})},{id:"actions",label:"액션",width:150,align:"center",type:"custom",render:J=>!J||!J.id?null:w===J.id?m(j,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[a(ut,{label:"저장",color:"primary",size:"small",onClick:te,sx:{cursor:"pointer"}}),a(ut,{label:"취소",color:"default",size:"small",onClick:U,sx:{cursor:"pointer"}})]}):m(j,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[a(ut,{label:"수정",color:"primary",size:"small",variant:"outlined",onClick:()=>Q(J),sx:{cursor:"pointer"}}),a(ut,{label:"삭제",color:"error",size:"small",variant:"outlined",onClick:()=>V(J,"bank"),sx:{cursor:"pointer"}})]})}],we=u.useMemo(()=>{if(!A||A.length===0)return[];let J=[...A];if(D.searchText){const Z=D.searchText.toLowerCase();J=J.filter(ie=>{const _e=ie.levelType||ie.type||"",Re=$[ie.id]||{},He=Re.bank||ie.bank||"",ft=Re.accountNumber||ie.accountNumber||"",St=Re.accountHolder||ie.accountHolder||"";return He.toLowerCase().includes(Z)||ft.toLowerCase().includes(Z)||St.toLowerCase().includes(Z)||_e.toLowerCase().includes(Z)})}return J},[A,D.searchText,$]),ce=u.useMemo(()=>{let J=[...d];if(B.searchText){const Z=B.searchText.toLowerCase();J=J.filter(ie=>ie.bankName.toLowerCase().includes(Z)||ie.useName.toLowerCase().includes(Z))}return J},[d,B.searchText]),De=u.useMemo(()=>!we||we.length===0?[]:we.map((Z,ie)=>({...Z,no:ie+1})),[we]),le=u.useMemo(()=>ce.map((J,Z)=>({...J,no:Z+1})),[ce]);return m(vn,{children:[a(Cn,{title:"계좌/은행 설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:me,sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[m(La,{value:l,onChange:(J,Z)=>c(Z),sx:{borderBottom:1,borderColor:"divider",mb:3},children:[a(_n,{label:"계좌설정"}),a(_n,{label:"은행설정"})]}),l===0&&a(bn,{children:n?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})}):m(bn,{children:[a(gn,{title:"계좌 관리",totalItems:we.length,countLabel:"총 ##count##개의 계좌",searchText:D.searchText,handleSearchChange:D.handleSearchChange,handleClearSearch:D.handleClearSearch,showSearch:!0,searchPlaceholder:"계좌정보 검색...",showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m(j,{sx:{display:"flex",gap:1},children:[a(Se,{variant:"outlined",startIcon:a(qo,{}),onClick:async()=>{O(!0);try{const J=[];s.forEach(Z=>{const ie=$[Z.id]||{},_e=ie.autoReply||Z.autoReply||`<p>${Z.levelType} 계좌입니다.</p>`,Re=H(Z,ie,_e);J.push({agent_level_id:Z.agentLevelId,bank_name:ie.bank||"",account_number:ie.accountNumber||"",account_holder:ie.accountHolder||"",auto_reply:Re,is_active:ie.active!==!1?1:0})}),await pf.bulkSaveAccounts(J),z("계좌 정보가 저장되었습니다.")}catch(J){console.error("계좌 저장 실패:",J),z("계좌 저장에 실패했습니다.","error")}finally{O(!1)}},color:"primary",disabled:F,children:F?"저장 중...":"저장"}),a(Se,{variant:"outlined",onClick:()=>{window.confirm("모든 계좌 정보를 초기화하시겠습니까?")&&(localStorage.removeItem("accountSettings"),N({}),z("계좌 정보가 초기화되었습니다."))},color:"error",children:"초기화"})]}),a(Se,{variant:"contained",startIcon:a(yz,{}),onClick:ge,color:"secondary",children:"자동답변 일괄 적용"})]}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:De&&De.length>0?a(An,{columns:ue,data:De,sortConfig:R.sortConfig,onSort:R.handleSort,page:0,rowsPerPage:25,totalCount:De.length,sx:{"& .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"}}}):a(j,{sx:{p:4,textAlign:"center"},children:a(M,{color:"text.secondary",children:"데이터가 없습니다."})})})]})}),l===1&&m(bn,{children:[a(gn,{title:"은행 관리",totalItems:ce.length,countLabel:"총 ##count##개의 은행",searchText:B.searchText,handleSearchChange:B.handleSearchChange,handleClearSearch:B.handleClearSearch,showSearch:!0,searchPlaceholder:"은행 검색...",showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),a(j,{sx:{display:"flex",gap:2,mb:3,p:2,border:"1px solid",borderColor:"divider",borderRadius:1,bgcolor:"background.paper"},children:f?m(bn,{children:[a($e,{size:"small",placeholder:"은행명 입력",label:"은행명",value:v.bankName,onChange:J=>b({...v,bankName:J.target.value}),sx:{minWidth:150}}),a($e,{placeholder:"00:00~00:30",label:"점검시간",value:v.maintenanceTime,onChange:J=>b({...v,maintenanceTime:J.target.value}),size:"small",sx:{width:200}}),a($e,{placeholder:"사용명",label:"사용명",value:v.useName,onChange:J=>b({...v,useName:J.target.value}),size:"small",sx:{width:150}}),a(Se,{variant:"contained",onClick:G,children:"추가"}),a(Se,{variant:"outlined",onClick:()=>{g(!1),b({bankName:"",maintenanceTime:"00:00~00:30",useName:""})},children:"취소"})]}):a(Se,{variant:"contained",startIcon:a(lo,{}),onClick:()=>g(!0),sx:{minWidth:150},children:"은행 추가"})}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:a(An,{columns:Ae,data:le,sortConfig:E.sortConfig,onSort:E.handleSort,sx:{"& .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"}}})})]})]}),m(Yn,{open:P.open,onClose:()=>k({open:!1,type:null,content:""}),maxWidth:"md",fullWidth:!0,children:[m(Zn,{children:["자동답변 편집 - ",((se=A.find(J=>J.type===P.type))==null?void 0:se.levelType)||P.type]}),a(Kn,{children:a(j,{sx:{mt:2},children:a(zs,{value:P.content,onChange:J=>k({...P,content:J}),placeholder:"자동답변 내용을 입력하세요..."})})}),m(nr,{children:[a(Se,{onClick:()=>k({open:!1,type:null,content:""}),children:"취소"}),a(Se,{onClick:ee,variant:"contained",children:"저장"})]})]}),m(Yn,{open:C.open,onClose:()=>S({open:!1,content:""}),maxWidth:"md",fullWidth:!0,children:[a(Zn,{children:"자동답변 일괄 적용"}),m(Kn,{children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"입력한 내용이 모든 유형의 자동답변에 적용됩니다."}),a(j,{sx:{mt:2},children:a(zs,{value:C.content,onChange:J=>S({...C,content:J}),placeholder:"일괄 적용할 자동답변 내용을 입력하세요..."})})]}),m(nr,{children:[a(Se,{onClick:()=>S({open:!1,content:""}),children:"취소"}),a(Se,{onClick:oe,variant:"contained",color:"secondary",children:"일괄 적용"})]})]}),m(Yn,{open:_.open,onClose:()=>T({open:!1,item:null,type:null}),children:[a(Zn,{children:"삭제 확인"}),m(Kn,{children:[a(M,{children:_.type==="bank"&&_.item&&`"${_.item.bankName}"을(를) 삭제하시겠습니까?`}),a(M,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"이 작업은 되돌릴 수 없습니다."})]}),m(nr,{children:[a(Se,{onClick:()=>T({open:!1,item:null,type:null}),children:"취소"}),a(Se,{onClick:ae,color:"error",variant:"contained",children:"삭제"})]})]}),a(ua,{open:I.open,autoHideDuration:3e3,onClose:()=>L({...I,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>L({...I,open:!1}),severity:I.severity,sx:{width:"100%"},children:I.message})})]})},Cue=()=>{const[e,t]=u.useState({target:"none",backgroundColor:"#1a1a1a",mainText:"<h1>시스템 점검 중입니다</h1><p>보다 나은 서비스를 제공하기 위해 시스템 점검을 진행하고 있습니다.</p><p>빠른 시일 내에 서비스를 재개하도록 하겠습니다.</p>",mainLogo:"",mainLogoPosition:{x:50,y:20},mainLogoSize:"200px",footerLogo:"",footerText:"© 2024 All rights reserved.",socialLinks:[{platform:"telegram",url:"",icon:""},{platform:"kakao",url:"",icon:""},{platform:"facebook",url:"",icon:""},{platform:"instagram",url:"",icon:""}],backgroundImage:""}),n=(g,w)=>{t(x=>({...x,[g]:w}))},r=u.useCallback(async()=>{try{const g=await fetch(`${fi.BASE_URL.replace("/api","")}/api/maintenance-settings`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(g.ok){const w=await g.json();w.success&&t(w.data)}else{const w=localStorage.getItem("maintenanceSettings");w&&t(JSON.parse(w))}}catch(g){console.error("점검 설정 로드 오류:",g);const w=localStorage.getItem("maintenanceSettings");w&&t(JSON.parse(w))}},[]);Ce.useEffect(()=>{r()},[r]);const[i,o]=u.useState({open:!1,message:"",severity:"success"}),[s,l]=u.useState(!1),c=u.useCallback(async()=>{try{const g=await fetch(`${fi.BASE_URL.replace("/api","")}/api/maintenance-settings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);localStorage.setItem("maintenanceSettings",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("maintenanceSettingsChanged",{detail:e})),o({open:!0,message:`점검 설정이 저장되었습니다. (대상: ${e.target==="none"?"점검 안함":e.target==="all"?"전체":e.target==="admin"?"관리자 페이지만":e.target==="member"?"회원 페이지만":e.target})`,severity:"success"})}catch(g){console.error("점검 설정 저장 오류:",g),o({open:!0,message:"점검 설정 저장 중 오류가 발생했습니다.",severity:"error"})}},[e]),d=g=>w=>{const x=w.target.files[0];if(x){const y=new FileReader;y.onload=p=>{n(g,p.target.result)},y.readAsDataURL(x)}},h=(g,w,x)=>{const y=[...e.socialLinks];y[g]={...y[g],[w]:x},n("socialLinks",y)},f=()=>m(Yn,{open:s,onClose:()=>l(!1),maxWidth:"lg",fullWidth:!0,children:[a(Zn,{children:"점검 페이지 미리보기"}),a(Kn,{children:m(j,{sx:{width:"100%",height:"600px",backgroundColor:e.backgroundColor,backgroundImage:e.backgroundImage?`url(${e.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.mainLogo&&a(j,{sx:{position:"absolute",left:`${e.mainLogoPosition.x}%`,top:`${e.mainLogoPosition.y}%`,transform:"translate(-50%, -50%)",width:e.mainLogoSize,height:"auto"},children:a("img",{src:e.mainLogo,alt:"Logo",style:{width:"100%",height:"auto"}})}),a(j,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",px:4},children:a(j,{dangerouslySetInnerHTML:{__html:e.mainText},sx:{maxWidth:"800px","& h1":{mb:2},"& p":{mb:1}}})}),m(j,{sx:{p:3,textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"},children:[e.footerLogo&&a(j,{sx:{mb:2},children:a("img",{src:e.footerLogo,alt:"Footer Logo",style:{height:"40px"}})}),a(j,{sx:{mb:2,display:"flex",justifyContent:"center",gap:2},children:e.socialLinks.map((g,w)=>g.icon&&g.url&&a("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",children:a("img",{src:g.icon,alt:g.platform,style:{width:"30px",height:"30px"}})},w))}),a(M,{variant:"body2",sx:{color:"#ccc"},children:e.footerText})]})]})})]});return m(vn,{title:"점검 설정",children:[a(rt,{sx:{p:3},children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:m(Zt,{fullWidth:!0,children:[a(hn,{children:"점검 대상"}),m(an,{value:e.target,onChange:g=>n("target",g.target.value),label:"점검 대상",children:[a(Me,{value:"none",children:"점검 안함"}),a(Me,{value:"all",children:"전체 (관리자 + 회원)"}),a(Me,{value:"admin",children:"관리자 페이지만"}),a(Me,{value:"member",children:"회원 페이지만"})]}),a(Xu,{children:"점검 모드를 활성화할 대상을 선택하세요."})]})}),a(W,{item:!0,xs:12,md:6,children:a($e,{fullWidth:!0,label:"배경색",type:"color",value:e.backgroundColor,onChange:g=>n("backgroundColor",g.target.value),InputLabelProps:{shrink:!0}})}),a(W,{item:!0,xs:12,md:6,children:m(j,{children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"배경 이미지"}),m(Se,{variant:"outlined",component:"label",startIcon:a(wS,{}),fullWidth:!0,children:["배경 이미지 업로드",a("input",{type:"file",hidden:!0,accept:"image/*",onChange:d("backgroundImage")})]}),e.backgroundImage&&m(j,{sx:{mt:1,display:"flex",alignItems:"center"},children:[a(M,{variant:"caption",sx:{flex:1},children:"이미지 업로드됨"}),a(Ct,{size:"small",onClick:()=>n("backgroundImage",""),children:a(Wo,{})})]})]})}),a(W,{item:!0,xs:12,children:a(M,{variant:"h6",gutterBottom:!0,children:"메인 로고"})}),a(W,{item:!0,xs:12,md:4,children:m(j,{children:[m(Se,{variant:"outlined",component:"label",startIcon:a(CS,{}),fullWidth:!0,children:["로고 이미지 업로드",a("input",{type:"file",hidden:!0,accept:"image/*",onChange:d("mainLogo")})]}),e.mainLogo&&a(j,{sx:{mt:1},children:a("img",{src:e.mainLogo,alt:"Main Logo Preview",style:{maxWidth:"100%",maxHeight:"100px"}})})]})}),a(W,{item:!0,xs:12,md:4,children:a($e,{fullWidth:!0,label:"로고 크기",value:e.mainLogoSize,onChange:g=>n("mainLogoSize",g.target.value),placeholder:"예: 200px, 50%"})}),a(W,{item:!0,xs:12,md:4,children:m(j,{children:[m(M,{gutterBottom:!0,children:["로고 위치 (X: ",e.mainLogoPosition.x,"%, Y: ",e.mainLogoPosition.y,"%)"]}),a(SS,{value:e.mainLogoPosition.x,onChange:(g,w)=>n("mainLogoPosition",{...e.mainLogoPosition,x:w}),valueLabelDisplay:"auto",min:0,max:100}),a(SS,{value:e.mainLogoPosition.y,onChange:(g,w)=>n("mainLogoPosition",{...e.mainLogoPosition,y:w}),valueLabelDisplay:"auto",min:0,max:100})]})}),a(W,{item:!0,xs:12,sx:{minHeight:"280px",overflow:"visible"},children:a(j,{sx:{width:"100%",minHeight:"280px",overflow:"visible"},children:a(zs,{label:"점검 안내 메시지",value:e.mainText,onChange:g=>n("mainText",g),height:200})})}),a(W,{item:!0,xs:12,children:a(M,{variant:"h6",gutterBottom:!0,children:"푸터 설정"})}),a(W,{item:!0,xs:12,md:6,children:m(j,{children:[m(Se,{variant:"outlined",component:"label",startIcon:a(CS,{}),fullWidth:!0,children:["푸터 로고 업로드",a("input",{type:"file",hidden:!0,accept:"image/*",onChange:d("footerLogo")})]}),e.footerLogo&&a(j,{sx:{mt:1},children:a("img",{src:e.footerLogo,alt:"Footer Logo Preview",style:{maxHeight:"40px"}})})]})}),a(W,{item:!0,xs:12,md:6,children:a($e,{fullWidth:!0,label:"푸터 텍스트",value:e.footerText,onChange:g=>n("footerText",g.target.value)})}),m(W,{item:!0,xs:12,children:[a(M,{variant:"h6",gutterBottom:!0,children:"SNS 링크"}),a(xi,{children:e.socialLinks.map((g,w)=>a(Oa,{children:m(W,{container:!0,spacing:2,alignItems:"center",children:[a(W,{item:!0,xs:12,md:2,children:a(M,{variant:"subtitle2",children:g.platform.charAt(0).toUpperCase()+g.platform.slice(1)})}),a(W,{item:!0,xs:12,md:4,children:a($e,{fullWidth:!0,size:"small",label:"URL",value:g.url,onChange:x=>h(w,"url",x.target.value),placeholder:"https://..."})}),a(W,{item:!0,xs:12,md:3,children:m(Se,{size:"small",variant:"outlined",component:"label",startIcon:a(wS,{}),fullWidth:!0,children:["아이콘 업로드",a("input",{type:"file",hidden:!0,accept:"image/*",onChange:x=>{const y=x.target.files[0];if(y){const p=new FileReader;p.onload=v=>{h(w,"icon",v.target.result)},p.readAsDataURL(y)}}})]})}),a(W,{item:!0,xs:12,md:3,children:g.icon&&m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a("img",{src:g.icon,alt:`${g.platform} icon`,style:{width:"30px",height:"30px"}}),a(Ct,{size:"small",onClick:()=>h(w,"icon",""),children:a(Wo,{})})]})})]})},w))})]}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[a(Se,{variant:"outlined",startIcon:a(bz,{}),onClick:()=>l(!0),children:"미리보기"}),a(Se,{variant:"contained",startIcon:a(qo,{}),onClick:c,children:"저장"})]})})]})}),f(),a(ua,{open:i.open,autoHideDuration:6e3,onClose:()=>o({...i,open:!1}),children:a(Jt,{onClose:()=>o({...i,open:!1}),severity:i.severity,sx:{width:"100%"},children:i.message})})]})},Sue=()=>{const e=mo(),t=zn(x=>x.auth.user),[n,r]=u.useState([]),[i,o]=u.useState([]),[s,l]=u.useState(!0),[c,d]=u.useState("");u.useEffect(()=>{(t==null?void 0:t.username)!=="master"&&(t==null?void 0:t.agent_level_id)!==999&&(alert("마스터 계정만 접근 가능합니다."),e("/dashboard"))},[t,e]);const h=async()=>{try{const x=await Pe.get("/master-ip");x.data.success&&r(x.data.data)}catch(x){console.error("IP 목록 조회 실패:",x),d("IP 목록을 불러오는데 실패했습니다.")}finally{l(!1)}},f=async()=>{try{const x=await Pe.get("/master-ip/logs?limit=20");x.data.success&&o(x.data.data)}catch(x){console.error("로그 조회 실패:",x)}};u.useEffect(()=>{h(),f()},[]);const g=async x=>{try{(await Pe.put(`/master-ip/${x}/toggle`)).data.success&&(h(),f())}catch{d("IP 상태 변경에 실패했습니다.")}},w=async x=>{var y,p;if(window.confirm("정말로 이 IP를 삭제하시겠습니까?"))try{(await Pe.delete(`/master-ip/${x}`)).data.success&&(h(),f())}catch(v){d(((p=(y=v.response)==null?void 0:y.data)==null?void 0:p.error)||"IP 삭제에 실패했습니다.")}};return s?a("div",{children:"로딩중..."}):m(vn,{children:[a(Cn,{title:"마스터 IP 관리",description:"마스터 계정 접속 허용 IP 관리",icon:a(m1,{})}),c&&a(Jt,{severity:"error",onClose:()=>d(""),sx:{mb:2},children:c}),a(rt,{sx:{mb:3},children:a(wa,{children:m(va,{children:[a(pa,{children:m(mn,{children:[a(ye,{children:"IP 주소"}),a(ye,{children:"설명"}),a(ye,{align:"center",children:"상태"}),a(ye,{children:"등록일"}),a(ye,{children:"등록자"}),a(ye,{align:"center",children:"작업"})]})}),a(xa,{children:n.map(x=>m(mn,{children:[a(ye,{children:a(M,{variant:"body2",sx:{fontFamily:"monospace"},children:x.ip_address})}),a(ye,{children:x.description||"-"}),a(ye,{align:"center",children:a(sn,{checked:x.is_active,onChange:()=>g(x.id),disabled:["127.0.0.1","::1","localhost"].includes(x.ip_address)})}),a(ye,{children:new Date(x.created_at).toLocaleString("ko-KR")}),a(ye,{children:x.created_by||"system"}),a(ye,{align:"center",children:a(Ct,{onClick:()=>w(x.id),disabled:["127.0.0.1","::1","localhost"].includes(x.ip_address),color:"error",children:a(Wo,{})})})]},x.id))})]})})}),m(rt,{children:[a(j,{sx:{p:2},children:a(M,{variant:"h6",gutterBottom:!0,children:"최근 접근 로그"})}),a(wa,{children:m(va,{size:"small",children:[a(pa,{children:m(mn,{children:[a(ye,{children:"시간"}),a(ye,{children:"액션"}),a(ye,{children:"IP"}),a(ye,{children:"사용자"}),a(ye,{children:"상세"})]})}),a(xa,{children:i.map(x=>m(mn,{children:[a(ye,{children:new Date(x.created_at).toLocaleString("ko-KR")}),a(ye,{children:a(ut,{label:x.action,size:"small",color:x.action==="LOGIN_SUCCESS"?"success":x.action==="LOGIN_BLOCKED"?"error":"default"})}),a(ye,{children:a(M,{variant:"body2",sx:{fontFamily:"monospace"},children:x.ip_address})}),a(ye,{children:x.username||"-"}),a(ye,{children:x.details||"-"})]},x.id))})]})})]})]})},Pue=()=>{const[e,t]=u.useState({requiredFields:{nickname:!0,phone:!0,realName:!1,bankName:!1,accountNumber:!1,accountHolder:!1,birthDate:!1},visibleFields:{nickname:!0,phone:!0,realName:!0,bankName:!0,accountNumber:!0,accountHolder:!0,birthDate:!0,referralCode:!0,memo:!0},smsVerification:{enabled:!0,provider:"twilio",requiredFor:"all"},approvalType:"auto",headquartersFields:{memberPageUrlStandard:!0,bettingStandard:!0,agentManagerUrl:!0,defaultSlotRolling:!0,defaultCasinoRolling:!0}}),[n,r]=u.useState(!0),[i,o]=u.useState({open:!1,message:"",severity:"success"});u.useEffect(()=>{(async()=>{try{r(!0);const x=await Pe.get("/settings/registration");t(y=>{var p;return{...y,smsVerification:{...y.smsVerification,enabled:((p=x.data.smsVerification)==null?void 0:p.enabled)??y.smsVerification.enabled}}})}catch(x){console.error("회원가입 설정 로드 실패:",x);const y=localStorage.getItem("registrationSettings");y&&t(JSON.parse(y))}finally{r(!1)}})()},[]);const s=u.useCallback((w,x,y)=>{t(p=>({...p,[w]:{...p[w],[x]:y}}))},[]),l=u.useCallback((w,x)=>{t(y=>({...y,[w]:x}))},[]),c=u.useCallback(async()=>{try{const w=await Pe.put("/settings/registration",{smsVerification:e.smsVerification});localStorage.setItem("registrationSettings",JSON.stringify(e)),o({open:!0,message:"회원가입 설정이 저장되었습니다.",severity:"success"})}catch(w){console.error("회원가입 설정 저장 실패:",w),o({open:!0,message:"설정 저장에 실패했습니다.",severity:"error"})}},[e]),d=u.useCallback(()=>{window.confirm("모든 설정을 초기값으로 되돌리시겠습니까?")&&(t({requiredFields:{nickname:!0,phone:!0,realName:!1,bankName:!1,accountNumber:!1,accountHolder:!1,birthDate:!1},visibleFields:{nickname:!0,phone:!0,realName:!0,bankName:!0,accountNumber:!0,accountHolder:!0,birthDate:!0,referralCode:!0,memo:!0},smsVerification:{enabled:!0,provider:"twilio",requiredFor:"all"},approvalType:"auto",headquartersFields:{memberPageUrlStandard:!0,bettingStandard:!0,agentManagerUrl:!0,defaultSlotRolling:!0,defaultCasinoRolling:!0}}),o({open:!0,message:"설정이 초기화되었습니다.",severity:"info"}))},[]),h=[{key:"nickname",label:"닉네임",icon:a(ba,{fontSize:"small"})},{key:"phone",label:"전화번호",icon:a(hE,{fontSize:"small"})},{key:"realName",label:"실명",icon:a(ba,{fontSize:"small"})},{key:"bankName",label:"은행명",icon:a(so,{fontSize:"small"})},{key:"accountNumber",label:"계좌번호",icon:a(ig,{fontSize:"small"})},{key:"accountHolder",label:"예금주",icon:a(ba,{fontSize:"small"})},{key:"birthDate",label:"생년월일",icon:a(ba,{fontSize:"small"})}],f=[{key:"referralCode",label:"추천인 코드",icon:a(ix,{fontSize:"small"})},{key:"memo",label:"메모",icon:a(Sl,{fontSize:"small"})}],g=[{key:"memberPageUrlStandard",label:"회원페이지 URL 적용기준",icon:a(Ss,{fontSize:"small"})},{key:"bettingStandard",label:"공베팅적용기준",icon:a(Cs,{fontSize:"small"})},{key:"agentManagerUrl",label:"에이전트 관리자 URL",icon:a(ix,{fontSize:"small"})},{key:"defaultSlotRolling",label:"기본 슬롯 롤링",icon:a(Cs,{fontSize:"small"})},{key:"defaultCasinoRolling",label:"기본 카지노 롤링",icon:a(Cs,{fontSize:"small"})}];return n?a(vn,{children:a(j,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:a(M,{children:"설정을 불러오는 중..."})})}):m(vn,{children:[a(Cn,{title:"회원가입설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:()=>window.location.reload(),sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2},children:[a(gn,{title:"회원가입 양식 설정",totalItems:0,showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(Sn,{children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,children:"기본 필드 설정"}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"회원가입 시 표시할 필드와 필수 입력 여부를 설정합니다."}),a(W,{container:!0,spacing:2,children:h.map(w=>a(W,{item:!0,xs:12,sm:6,md:4,children:a(Sn,{variant:"outlined",children:m(In,{children:[m(j,{sx:{display:"flex",alignItems:"center",mb:2},children:[w.icon,a(M,{variant:"subtitle1",sx:{ml:1},children:w.label})]}),m(Aa,{sx:{gap:1},children:[a(Lt,{control:a(sn,{checked:e.visibleFields[w.key],onChange:x=>s("visibleFields",w.key,x.target.checked),size:"small"}),label:"표시",sx:{m:0,"& .MuiTypography-root":{fontSize:"0.875rem"}}}),a(Lt,{control:a(sn,{checked:e.requiredFields[w.key],onChange:x=>s("requiredFields",w.key,x.target.checked),disabled:!e.visibleFields[w.key],size:"small"}),label:"필수",sx:{m:0,"& .MuiTypography-root":{fontSize:"0.875rem"}}})]})]})})},w.key))})]})})}),a(W,{item:!0,xs:12,children:a(Sn,{children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,children:"추가 필드 설정"}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"선택적으로 표시할 수 있는 추가 필드입니다."}),a(W,{container:!0,spacing:2,children:f.map(w=>a(W,{item:!0,xs:12,sm:6,md:4,children:a(Sn,{variant:"outlined",sx:{height:"100%"},children:m(In,{sx:{p:2},children:[m(j,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[a(j,{sx:{color:"primary.main",mr:1},children:w.icon}),a(M,{variant:"subtitle1",sx:{fontSize:"0.95rem",fontWeight:500},children:w.label})]}),a(Lt,{control:a(sn,{checked:e.visibleFields[w.key],onChange:x=>s("visibleFields",w.key,x.target.checked),size:"small"}),label:"표시",sx:{m:0,"& .MuiTypography-root":{fontSize:"0.875rem"}}})]})})},w.key))})]})})}),a(W,{item:!0,xs:12,children:a(Sn,{children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,children:"본사 회원가입 추가 필드"}),a(M,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"상부가 본사인 경우에만 표시되는 추가 필드입니다."}),a(W,{container:!0,spacing:2,children:g.map(w=>a(W,{item:!0,xs:12,sm:6,md:4,children:a(Sn,{variant:"outlined",sx:{height:"100%"},children:m(In,{sx:{p:2},children:[m(j,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[a(j,{sx:{color:"primary.main",mr:1},children:w.icon}),a(M,{variant:"subtitle1",sx:{fontSize:"0.9rem",fontWeight:500},children:w.label})]}),a(Lt,{control:a(sn,{checked:e.headquartersFields[w.key],onChange:x=>s("headquartersFields",w.key,x.target.checked),size:"small"}),label:"표시",sx:{m:0,"& .MuiTypography-root":{fontSize:"0.875rem"}}})]})})},w.key))})]})})}),a(W,{item:!0,xs:12,md:6,children:a(Sn,{children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,children:"문자 인증 설정"}),a(Aa,{sx:{mb:2},children:a(Lt,{control:a(sn,{checked:e.smsVerification.enabled,onChange:w=>s("smsVerification","enabled",w.target.checked)}),label:"문자 인증 사용"})}),e.smsVerification.enabled&&m(Zt,{component:"fieldset",sx:{mt:2},children:[a(PS,{component:"legend",children:"인증 대상"}),m(rx,{value:e.smsVerification.requiredFor,onChange:w=>s("smsVerification","requiredFor",w.target.value),children:[a(Lt,{value:"all",control:a(Io,{}),label:"모든 회원가입"}),a(Lt,{value:"new",control:a(Io,{}),label:"신규 번호만"}),a(Lt,{value:"none",control:a(Io,{}),label:"사용 안함"})]})]})]})})}),a(W,{item:!0,xs:12,md:6,children:a(Sn,{children:m(In,{children:[a(M,{variant:"h6",gutterBottom:!0,children:"가입 승인 설정"}),m(Zt,{component:"fieldset",children:[a(PS,{component:"legend",children:"승인 방식"}),m(rx,{value:e.approvalType,onChange:w=>l("approvalType",w.target.value),children:[a(Lt,{value:"auto",control:a(Io,{}),label:m(j,{children:[a(M,{children:"자동 승인"}),a(M,{variant:"caption",color:"text.secondary",children:"회원가입 즉시 승인됩니다."})]})}),a(Lt,{value:"manual",control:a(Io,{}),label:m(j,{children:[a(M,{children:"수동 승인"}),a(M,{variant:"caption",color:"text.secondary",children:"관리자가 직접 승인해야 합니다."})]})})]})]})]})})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[a(Se,{variant:"outlined",startIcon:a(ah,{}),onClick:d,children:"초기화"}),a(Se,{variant:"contained",startIcon:a(qo,{}),onClick:c,children:"저장"})]})})]})]}),a(ua,{open:i.open,autoHideDuration:3e3,onClose:()=>o({...i,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>o({...i,open:!1}),severity:i.severity,sx:{width:"100%"},children:i.message})})]})},kue=()=>{const[e,t]=u.useState({depositMin:1e4,depositMax:1e7,withdrawalMin:1e4,withdrawalMax:5e6,rollingMin:1e5,rollingMax:1e7}),[n,r]=u.useState({slotApi:!0,casinoApi:!0,sportsApi:!1,lotteryApi:!1,virtualApi:!1}),[i,o]=u.useState({registration:{enabled:!0,soundFile:null,interval:5},depositInquiry:{enabled:!0,soundFile:null,interval:3},withdrawalInquiry:{enabled:!0,soundFile:null,interval:3},customerService:{enabled:!0,soundFile:null,interval:10},agentInquiry:{enabled:!0,soundFile:null,interval:5}}),[s,l]=u.useState({inquiry:{enabled:!0,soundFile:null,interval:5},message:{enabled:!0,soundFile:null,interval:2},notice:{enabled:!0,soundFile:null,interval:10}}),[c,d]=u.useState({inquiry:{enabled:!0,soundFile:null,interval:5},notice:{enabled:!0,soundFile:null,interval:15}}),[h,f]=u.useState({enabled:!1,startTime:"00:00",endTime:"23:59",timezone:"Asia/Seoul"}),[g,w]=u.useState({enabled:!1,seconds:300,maxAttemptsPerHour:10}),[x,y]=u.useState({enabled:!1,startTime:"00:00",endTime:"23:59",timezone:"Asia/Seoul"}),[p,v]=u.useState({enabled:!1,seconds:300,maxAttemptsPerHour:10}),[b,P]=u.useState({enabled:!1,type:"multiplier",value:2,min_deposit:1e4,max_bonus:1e6,bonus_limit_enabled:!1,bonus_limit_count:1,bonus_limit_reset:"daily"}),[k,C]=u.useState({enabled:!1,rate:0,min_bet_amount:0,max_commission:0}),[S,_]=u.useState({enabled:!1,percentage:100,message:"입금액의 100% 이상 베팅 후 출금 가능합니다."}),[T,I]=u.useState({open:!1,message:"",severity:"success"}),[L,A]=u.useState(!1),[D,B]=u.useState(new Set),[$,N]=u.useState(!1),[F,O]=u.useState(!1),[R,E]=u.useState([]),[z,q]=u.useState(null),[X,H]=u.useState(null);u.useEffect(()=>{K()},[]),u.useEffect(()=>()=>{z&&(z.pause(),z.currentTime=0)},[z]),u.useEffect(()=>{const le=se=>{L&&(se.preventDefault(),se.returnValue="")};return window.addEventListener("beforeunload",le),()=>window.removeEventListener("beforeunload",le)},[L]);const K=async()=>{N(!0);try{const se=await Pe.get("/settings/alarms");se.data&&(o(se.data.memberNotifications||{}),l(se.data.agentNotifications||{}),d(se.data.userPageNotifications||{}));const J=await Pe.get("/settings/alarms/available-sounds");J.data&&E(J.data);try{const Z=await Pe.get("/system-settings/deposit-time-restriction");Z.data&&Z.data.success&&f({enabled:Z.data.data.enabled||!1,startTime:Z.data.data.start_time||"00:00",endTime:Z.data.data.end_time||"23:59",timezone:Z.data.data.timezone||"Asia/Seoul"})}catch(Z){console.error("입금 시간 설정 로드 실패:",Z)}try{const Z=await Pe.get("/system-settings/deposit-cooldown");Z.data&&Z.data.success&&w({enabled:Z.data.data.enabled||!1,seconds:Z.data.data.cooldown_seconds||300,maxAttemptsPerHour:Z.data.data.max_attempts_per_hour||10})}catch(Z){console.error("입금 쿨다운 설정 로드 실패:",Z)}try{const Z=await Pe.get("/system-settings/withdrawal-time-restriction");Z.data&&Z.data.success&&y({enabled:Z.data.data.enabled||!1,startTime:Z.data.data.start_time||"00:00",endTime:Z.data.data.end_time||"23:59",timezone:Z.data.data.timezone||"Asia/Seoul"})}catch(Z){console.error("출금 시간 설정 로드 실패:",Z)}try{const Z=await Pe.get("/system-settings/withdrawal-cooldown");Z.data&&Z.data.success&&v({enabled:Z.data.data.enabled||!1,seconds:Z.data.data.cooldown_seconds||300,maxAttemptsPerHour:Z.data.data.max_attempts_per_hour||10})}catch(Z){console.error("출금 쿨다운 설정 로드 실패:",Z)}try{const Z=await Pe.get("/system-settings/deposit-bonus");Z.data&&Z.data.success&&P({enabled:Z.data.data.enabled||!1,type:Z.data.data.type||"multiplier",value:Z.data.data.value||2,min_deposit:Z.data.data.min_deposit||1e4,max_bonus:Z.data.data.max_bonus||1e6,bonus_limit_enabled:Z.data.data.bonus_limit_enabled||!1,bonus_limit_count:Z.data.data.bonus_limit_count||1,bonus_limit_reset:Z.data.data.bonus_limit_reset||"daily"})}catch(Z){console.error("입금 보너스 설정 로드 실패:",Z)}try{const Z=await Pe.get("/settings/betting-commission");Z.data&&C({enabled:Z.data.enabled||!1,rate:Z.data.rate||0,min_bet_amount:Z.data.min_bet_amount||0,max_commission:Z.data.max_commission||0})}catch(Z){console.error("베팅 커미션 설정 로드 실패:",Z)}try{const Z=await Pe.get("/system-settings/withdrawal-rolling");Z.data&&Z.data.success&&_({enabled:Z.data.data.enabled||!1,percentage:Z.data.data.percentage||100,message:Z.data.data.message||"입금액의 100% 이상 베팅 후 출금 가능합니다."})}catch(Z){console.error("출금 롤링 조건 설정 로드 실패:",Z)}}catch(se){console.error("알람 설정 로드 실패:",se);const J=localStorage.getItem("otherSettings");if(J)try{const Z=JSON.parse(J);Z.memberNotifications&&o(Z.memberNotifications),Z.agentNotifications&&l(Z.agentNotifications),Z.userPageNotifications&&d(Z.userPageNotifications)}catch(Z){console.error("localStorage 파싱 실패:",Z)}}const le=localStorage.getItem("otherSettings");if(le)try{const se=JSON.parse(le);se.amountSettings&&t(se.amountSettings),se.apiModules&&r(se.apiModules)}catch(se){console.error("설정 로드 실패:",se)}N(!1)},ee=u.useCallback((le,se="success")=>{I({open:!0,message:le,severity:se})},[]),ge=u.useCallback((le,se)=>{const J=parseInt(se)||0;t(Z=>({...Z,[le]:J})),A(!0),B(Z=>new Set(Z).add("amount"))},[]),oe=u.useCallback(le=>{r(se=>({...se,[le]:!se[le]})),A(!0),B(se=>new Set(se).add("api"))},[]),G=u.useCallback((le,se)=>{const Z={member:o,agent:l,userPage:d}[le];Z&&(Z(ie=>({...ie,[se]:{...ie[se],enabled:!ie[se].enabled}})),A(!0),B(ie=>new Set(ie).add("alarm")))},[]),Q=u.useCallback((le,se,J)=>{const ie={member:o,agent:l,userPage:d}[le];ie&&(ie(_e=>({..._e,[se]:{..._e[se],soundFile:J}})),A(!0),B(_e=>new Set(_e).add("alarm")))},[]),te=u.useCallback((le,se,J)=>{const Z=parseInt(J)||1,_e={member:o,agent:l,userPage:d}[le];_e&&(_e(Re=>({...Re,[se]:{...Re[se],interval:Z}})),A(!0),B(Re=>new Set(Re).add("alarm")))},[]),U=u.useCallback((le,se)=>{f(J=>({...J,[le]:se})),A(!0),B(J=>new Set(J).add("depositTime"))},[]),V=u.useCallback((le,se)=>{w(J=>({...J,[le]:le==="seconds"||le==="maxAttemptsPerHour"?se===""?"":parseInt(se)||0:se})),A(!0),B(J=>new Set(J).add("depositCooldown"))},[]),ae=u.useCallback((le,se)=>{y(J=>({...J,[le]:se})),A(!0),B(J=>new Set(J).add("withdrawalTime"))},[]),ne=u.useCallback((le,se)=>{v(J=>({...J,[le]:le==="seconds"||le==="maxAttemptsPerHour"?se===""?"":parseInt(se)||0:se})),A(!0),B(J=>new Set(J).add("withdrawalCooldown"))},[]);u.useCallback(async()=>{try{await Pe.post("/system-settings/deposit-time-restriction",{enabled:h.enabled,start_time:h.startTime,end_time:h.endTime,timezone:h.timezone}),ee("입금 시간 제한 설정이 저장되었습니다.")}catch(le){console.error("입금 시간 설정 저장 실패:",le),ee("입금 시간 설정 저장에 실패했습니다.","error")}},[h,ee]),u.useCallback(async()=>{try{await Pe.post("/system-settings/deposit-cooldown",{enabled:g.enabled,cooldown_seconds:g.seconds,max_attempts_per_hour:g.maxAttemptsPerHour}),ee("입금 쿨다운 설정이 저장되었습니다.")}catch(le){console.error("입금 쿨다운 설정 저장 실패:",le),ee("입금 쿨다운 설정 저장에 실패했습니다.","error")}},[g,ee]);const me=u.useCallback((le,se)=>{C(J=>({...J,[le]:le==="enabled"?se:parseFloat(se)||0})),A(!0),B(J=>new Set(J).add("bettingCommission"))},[]),ue=u.useCallback((le,se)=>{_(J=>({...J,[le]:le==="percentage"?se===""?"":Math.min(1e3,Math.max(0,parseInt(se)||0)):se})),A(!0),B(J=>new Set(J).add("withdrawalRolling"))},[]),Ae=u.useCallback(async()=>{O(!0);try{const le=[];if(D.has("alarm")&&le.push(Pe.put("/settings/alarms",{memberNotifications:i,agentNotifications:s,userPageNotifications:c})),D.has("depositTime")&&le.push(Pe.post("/system-settings/deposit-time-restriction",{enabled:h.enabled,start_time:h.startTime,end_time:h.endTime,timezone:h.timezone})),D.has("depositCooldown")&&le.push(Pe.post("/system-settings/deposit-cooldown",{enabled:g.enabled,cooldown_seconds:g.seconds,max_attempts_per_hour:g.maxAttemptsPerHour})),D.has("withdrawalTime")&&le.push(Pe.post("/system-settings/withdrawal-time-restriction",{enabled:x.enabled,start_time:x.startTime,end_time:x.endTime,timezone:x.timezone})),D.has("withdrawalCooldown")&&le.push(Pe.post("/system-settings/withdrawal-cooldown",{enabled:p.enabled,cooldown_seconds:p.seconds,max_attempts_per_hour:p.maxAttemptsPerHour})),D.has("depositBonus")&&le.push(Pe.post("/system-settings/deposit-bonus",{enabled:b.enabled,type:b.type,value:b.value,min_deposit:b.min_deposit,max_bonus:b.max_bonus,bonus_limit_enabled:b.bonus_limit_enabled,bonus_limit_count:b.bonus_limit_count,bonus_limit_reset:b.bonus_limit_reset})),D.has("bettingCommission")&&le.push(Pe.put("/settings/betting-commission",{enabled:k.enabled,rate:k.rate,min_bet_amount:k.min_bet_amount,max_commission:k.max_commission})),D.has("withdrawalRolling")&&le.push(Pe.post("/system-settings/withdrawal-rolling",{enabled:S.enabled,percentage:S.percentage,message:S.message})),await Promise.all(le),D.has("amount")||D.has("api")){const J={amountSettings:e,apiModules:n};localStorage.setItem("otherSettings",JSON.stringify(J))}const se={amountSettings:e,apiModules:n,memberNotifications:i,agentNotifications:s,userPageNotifications:c};localStorage.setItem("otherSettings",JSON.stringify(se)),A(!1),B(new Set),ee("모든 설정이 저장되었습니다.")}catch(le){console.error("설정 저장 실패:",le),ee("설정 저장에 실패했습니다.","error")}finally{O(!1)}},[e,n,i,s,c,h,g,x,p,b,k,S,D,ee]),we=u.useCallback(()=>{L&&!window.confirm("저장되지 않은 변경사항이 있습니다. 계속하시겠습니까?")||(K(),A(!1),B(new Set))},[L]),ce=u.useCallback((le,se)=>{var St,Tt;const J=`${le}-${se}`;if(z&&X===J){z.pause(),z.currentTime=0,q(null),H(null);return}z&&(z.pause(),z.currentTime=0);const ie=(Tt=(St={member:i,agent:s,userPage:c}[le])==null?void 0:St[se])==null?void 0:Tt.soundFile;if(!ie)return;const He=`${window.location.origin}/public/alarm-sounds/default/${encodeURIComponent(ie)}`,ft=new Audio(He);ft.addEventListener("ended",()=>{q(null),H(null)}),ft.play().then(()=>{q(ft),H(J)}).catch(gt=>{console.error("알림음 재생 실패:",gt),console.error("오디오 URL:",He),ee("알림음 재생에 실패했습니다.","error")})},[i,s,c,ee,z,X]),De=(le,se,J,Z,ie,_e)=>a(W,{item:!0,xs:12,sm:6,md:4,children:a(Sn,{variant:"outlined",sx:{height:"100%"},children:m(In,{children:[m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"body2",fontWeight:"medium",children:le}),a(sn,{checked:Z,onChange:()=>G(se,J),size:"small"})]}),a(j,{sx:{mb:2},children:a($e,{fullWidth:!0,size:"small",label:"알림 간격",type:"number",value:_e,onChange:Re=>te(se,J,Re.target.value),disabled:!Z,InputProps:{endAdornment:a(Dt,{position:"end",children:"초"}),inputProps:{min:1,max:300}},sx:{"& .MuiInputBase-input":{fontSize:"0.875rem"}}})}),m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[m(Zt,{size:"small",fullWidth:!0,disabled:!Z,children:[a(hn,{children:"알림음 선택"}),m(an,{value:ie||"",onChange:Re=>Q(se,J,Re.target.value),label:"알림음 선택",sx:{"& .MuiInputBase-input":{fontSize:"0.875rem"}},children:[a(Me,{value:"",children:a("em",{children:"없음"})}),R.map(Re=>a(Me,{value:Re.value,children:Re.label},Re.value))]})]}),a(Ct,{size:"small",disabled:!Z||!ie,title:X===`${se}-${J}`?"정지":"미리듣기",onClick:()=>ce(se,J),color:X===`${se}-${J}`?"primary":"default",children:!Z||!ie?a(ox,{}):X===`${se}-${J}`?a(vz,{}):a(xz,{})})]}),ie&&a(M,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:ie})]})})},`${se}-${J}`);return $?a(vn,{children:a(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:a(ir,{})})}):m(vn,{children:[a(Cn,{title:"기타설정",showAddButton:!1,showDisplayOptionsButton:!1,showRefreshButton:!0,onRefreshClick:we,sx:{mb:2}}),m(j,{sx:{display:"flex",flexDirection:"column",gap:3},children:[m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"입금/출금 금액 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최소 입금 금액",type:"number",value:e.depositMin,onChange:le=>ge("depositMin",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최대 입금 금액",type:"number",value:e.depositMax,onChange:le=>ge("depositMax",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최소 출금 금액",type:"number",value:e.withdrawalMin,onChange:le=>ge("withdrawalMin",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최대 출금 금액",type:"number",value:e.withdrawalMax,onChange:le=>ge("withdrawalMax",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"출금 롤링 조건 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[m(W,{item:!0,xs:12,children:[a(Lt,{control:a(sn,{checked:S.enabled,onChange:le=>ue("enabled",le.target.checked)}),label:"출금 롤링 조건 활성화"}),a(M,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:1},children:"활성화 시 입금액 대비 일정 비율 이상 베팅해야 출금이 가능합니다."})]}),S.enabled&&m(bn,{children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"롤링 퍼센트",type:"number",value:S.percentage,onChange:le=>ue("percentage",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{min:0,max:1e3}},helperText:"입금액 대비 베팅 필요 비율을 설정합니다. 100%는 입금액과 동일한 금액을 베팅해야 함을 의미합니다."})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"안내 메시지",multiline:!0,rows:2,value:S.message,onChange:le=>ue("message",le.target.value),helperText:"사용자에게 표시될 출금 조건 안내 메시지입니다."})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",children:m(M,{variant:"body2",children:[a("strong",{children:"롤링 조건 예시:"}),a("br",{}),"• 100% 설정: 10,000원 입금 → 10,000원 이상 베팅 필요",a("br",{}),"• 150% 설정: 10,000원 입금 → 15,000원 이상 베팅 필요",a("br",{}),"• 200% 설정: 10,000원 입금 → 20,000원 이상 베팅 필요"]})})})]})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"입금 보너스 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(Lt,{control:a(sn,{checked:b.enabled,onChange:le=>{P(se=>({...se,enabled:le.target.checked})),A(!0),B(se=>new Set(se).add("depositBonus"))}}),label:"입금 보너스 활성화"})}),b.enabled&&m(bn,{children:[a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,children:[a(hn,{children:"보너스 타입"}),m(an,{value:b.type,label:"보너스 타입",onChange:le=>{P(se=>({...se,type:le.target.value})),A(!0),B(se=>new Set(se).add("depositBonus"))},children:[a(Me,{value:"multiplier",children:"배수"}),a(Me,{value:"flat",children:"고정금액"})]})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:b.type==="multiplier"?"배수":"보너스 금액",type:"number",value:b.value,onChange:le=>{P(se=>({...se,value:parseFloat(le.target.value)||0})),A(!0),B(se=>new Set(se).add("depositBonus"))},InputProps:{endAdornment:a(Dt,{position:"end",children:b.type==="multiplier"?"배":"원"}),inputProps:{step:b.type==="multiplier"?.1:1e3,min:b.type==="multiplier"?1.1:0}},helperText:b.type==="multiplier"?"예: 2배 설정 시 10,000원 입금 → 20,000원 충전":"예: 5,000원 설정 시 모든 입금에 5,000원 추가"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최소 입금액",type:"number",value:b.min_deposit,onChange:le=>{P(se=>({...se,min_deposit:parseInt(le.target.value)||0})),A(!0),B(se=>new Set(se).add("depositBonus"))},InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},helperText:"이 금액 이상 입금 시에만 보너스 적용"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최대 보너스",type:"number",value:b.max_bonus,onChange:le=>{P(se=>({...se,max_bonus:parseInt(le.target.value)||0})),A(!0),B(se=>new Set(se).add("depositBonus"))},InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},helperText:"1회 입금 시 받을 수 있는 최대 보너스 금액"})}),m(W,{item:!0,xs:12,children:[a(yn,{sx:{my:2}}),a(M,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"보너스 횟수 제한 설정"})]}),m(W,{item:!0,xs:12,children:[a(Lt,{control:a(sn,{checked:b.bonus_limit_enabled,onChange:le=>{P(se=>({...se,bonus_limit_enabled:le.target.checked})),A(!0),B(se=>new Set(se).add("depositBonus"))}}),label:"보너스 횟수 제한 활성화"}),a(M,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:1},children:"활성화 시 설정된 기간 내 보너스 지급 횟수를 제한합니다."})]}),b.bonus_limit_enabled&&m(bn,{children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"제한 횟수",type:"number",value:b.bonus_limit_count,onChange:le=>{P(se=>({...se,bonus_limit_count:parseInt(le.target.value)||1})),A(!0),B(se=>new Set(se).add("depositBonus"))},InputProps:{endAdornment:a(Dt,{position:"end",children:"회"}),inputProps:{min:1,max:100}},helperText:"설정한 기간 내 보너스를 받을 수 있는 최대 횟수"})}),a(W,{item:!0,xs:12,sm:6,children:m(Zt,{fullWidth:!0,children:[a(hn,{children:"리셋 주기"}),m(an,{value:b.bonus_limit_reset,label:"리셋 주기",onChange:le=>{P(se=>({...se,bonus_limit_reset:le.target.value})),A(!0),B(se=>new Set(se).add("depositBonus"))},children:[a(Me,{value:"daily",children:"일별"}),a(Me,{value:"weekly",children:"주별"}),a(Me,{value:"monthly",children:"월별"}),a(Me,{value:"none",children:"없음 (전체 기간)"})]}),a(M,{variant:"caption",color:"textSecondary",sx:{mt:1},children:"제한 횟수가 초기화되는 주기를 설정합니다."})]})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",children:m(M,{variant:"body2",children:[a("strong",{children:"보너스 횟수 제한 예시:"}),a("br",{}),"• 일별 3회 제한: 매일 자정에 보너스 지급 횟수가 3회로 초기화",a("br",{}),"• 주별 10회 제한: 매주 월요일 자정에 보너스 지급 횟수가 10회로 초기화",a("br",{}),"• 월별 30회 제한: 매월 1일 자정에 보너스 지급 횟수가 30회로 초기화",a("br",{}),"• 없음: 사용자당 전체 기간 동안 설정한 횟수만큼만 보너스 지급"]})})})]})]})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"베팅 커미션 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[m(W,{item:!0,xs:12,children:[a(Lt,{control:a(sn,{checked:k.enabled,onChange:le=>me("enabled",le.target.checked)}),label:"베팅 커미션 활성화"}),a(M,{variant:"caption",color:"textSecondary",sx:{display:"block",mt:1},children:"활성화 시 사용자가 당첨될 때 베팅 금액의 일정 비율을 차감합니다."})]}),k.enabled&&m(bn,{children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"커미션 비율",type:"number",value:k.rate,onChange:le=>me("rate",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"%"}),inputProps:{step:.1,min:0,max:100}},helperText:"예: 10% 설정 시 10,000원 베팅 → 당첨 시 1,000원 차감"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최소 베팅 금액",type:"number",value:k.min_bet_amount,onChange:le=>me("min_bet_amount",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"}),inputProps:{step:1e3,min:0}},helperText:"이 금액 이상 베팅 시에만 커미션 적용"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최대 커미션 금액",type:"number",value:k.max_commission,onChange:le=>me("max_commission",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"}),inputProps:{step:1e3,min:0}},helperText:"1회 당 차감 가능한 최대 커미션 금액 (0 = 제한 없음)"})}),a(W,{item:!0,xs:12,children:a(Jt,{severity:"info",children:m(M,{variant:"body2",children:[a("strong",{children:"커미션 계산 예시:"}),a("br",{}),"• 베팅: 10,000원, 당첨: 20,000원, 커미션 10%",a("br",{}),"• 커미션 금액: 10,000원 × 10% = 1,000원",a("br",{}),"• 최종 지급: 20,000원 - 1,000원 = 19,000원"]})})})]})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"롤링금전환 금액 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최소 롤링금전환 금액",type:"number",value:e.rollingMin,onChange:le=>ge("rollingMin",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"최대 롤링금전환 금액",type:"number",value:e.rollingMax,onChange:le=>ge("rollingMax",le.target.value),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})}})})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"API 모듈 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),a(W,{container:!0,spacing:2,children:Object.entries(n).map(([le,se])=>a(W,{item:!0,xs:12,sm:6,md:4,children:a(Sn,{variant:"outlined",children:a(In,{children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a(M,{variant:"body2",fontWeight:"medium",children:{slotApi:"슬롯 API",casinoApi:"카지노 API",sportsApi:"스포츠 API",lotteryApi:"복권 API",virtualApi:"가상게임 API"}[le]}),a(sn,{checked:se,onChange:()=>oe(le)})]})})})},le))})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"회원 관련 알림음 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:2,children:[De("회원가입","member","registration",i.registration.enabled,i.registration.soundFile,i.registration.interval),De("입금문의","member","depositInquiry",i.depositInquiry.enabled,i.depositInquiry.soundFile,i.depositInquiry.interval),De("출금문의","member","withdrawalInquiry",i.withdrawalInquiry.enabled,i.withdrawalInquiry.soundFile,i.withdrawalInquiry.interval),De("고객센터","member","customerService",i.customerService.enabled,i.customerService.soundFile,i.customerService.interval),De("에이전트문의","member","agentInquiry",i.agentInquiry.enabled,i.agentInquiry.soundFile,i.agentInquiry.interval)]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"하부에이전트 관리자 알림음 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:2,children:[De("문의","agent","inquiry",s.inquiry.enabled,s.inquiry.soundFile,s.inquiry.interval),De("쪽지","agent","message",s.message.enabled,s.message.soundFile,s.message.interval),De("공지","agent","notice",s.notice.enabled,s.notice.soundFile,s.notice.interval)]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"유저페이지 알림음 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:2,children:[De("문의","userPage","inquiry",c.inquiry.enabled,c.inquiry.soundFile,c.inquiry.interval),De("공지사항","userPage","notice",c.notice.enabled,c.notice.soundFile,c.notice.interval)]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"입금/출금 제한 시간 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(M,{variant:"h6",sx:{mb:2},children:"입금 제한 설정"})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"body1",fontWeight:"medium",children:"입금 제한 시간 활성화"}),a(sn,{checked:h.enabled,onChange:le=>U("enabled",le.target.checked)})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"제한 시작 시간",type:"time",value:h.startTime,onChange:le=>U("startTime",le.target.value),disabled:!h.enabled,InputLabelProps:{shrink:!0},helperText:"이 시간부터 입금이 제한됩니다"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"제한 종료 시간",type:"time",value:h.endTime,onChange:le=>U("endTime",le.target.value),disabled:!h.enabled,InputLabelProps:{shrink:!0},helperText:"이 시간까지 입금이 제한됩니다"})}),a(W,{item:!0,xs:12,children:a(M,{variant:"body2",color:"text.secondary",children:"예시: 00:00 ~ 00:10 설정 시, 자정부터 00:10까지 입금이 제한되며, 00:11부터 23:59까지는 입금이 가능합니다."})}),a(W,{item:!0,xs:12,children:a(yn,{sx:{my:3}})}),a(W,{item:!0,xs:12,children:a(M,{variant:"h6",sx:{mb:2},children:"출금 제한 설정"})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"body1",fontWeight:"medium",children:"출금 제한 시간 활성화"}),a(sn,{checked:x.enabled,onChange:le=>ae("enabled",le.target.checked)})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"제한 시작 시간",type:"time",value:x.startTime,onChange:le=>ae("startTime",le.target.value),disabled:!x.enabled,InputLabelProps:{shrink:!0},helperText:"이 시간부터 출금이 제한됩니다"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"제한 종료 시간",type:"time",value:x.endTime,onChange:le=>ae("endTime",le.target.value),disabled:!x.enabled,InputLabelProps:{shrink:!0},helperText:"이 시간까지 출금이 제한됩니다"})}),a(W,{item:!0,xs:12,children:a(M,{variant:"body2",color:"text.secondary",children:"예시: 00:00 ~ 00:10 설정 시, 자정부터 00:10까지 출금이 제한되며, 00:11부터 23:59까지는 출금이 가능합니다."})})]})]}),m(rt,{elevation:1,sx:{p:3},children:[a(gn,{title:"입금/출금 쿨다운 설정",showSearch:!1,showIndentToggle:!1,showPageNumberToggle:!1,showColumnPinToggle:!1,sx:{mb:3}}),m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,children:a(M,{variant:"h6",sx:{mb:2},children:"입금 쿨다운 설정"})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"body1",fontWeight:"medium",children:"입금 쿨다운 활성화"}),a(sn,{checked:g.enabled,onChange:le=>V("enabled",le.target.checked)})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"쿨다운 시간 (초)",type:"number",value:g.seconds,onChange:le=>V("seconds",le.target.value),disabled:!g.enabled,InputProps:{endAdornment:a(Dt,{position:"end",children:"초"}),inputProps:{min:1,max:3600}},helperText:"1~3600초 (최대 1시간)"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"시간당 최대 시도 횟수",type:"number",value:g.maxAttemptsPerHour,onChange:le=>V("maxAttemptsPerHour",le.target.value),disabled:!g.enabled,InputProps:{endAdornment:a(Dt,{position:"end",children:"회"}),inputProps:{min:1,max:100}}})}),a(W,{item:!0,xs:12,children:a(M,{variant:"body2",color:"text.secondary",children:"입금 신청 후 다음 신청까지 대기해야 하는 시간을 초 단위로 설정합니다. (예: 300초 = 5분)"})}),a(W,{item:!0,xs:12,children:a(yn,{sx:{my:3}})}),a(W,{item:!0,xs:12,children:a(M,{variant:"h6",sx:{mb:2},children:"출금 쿨다운 설정"})}),a(W,{item:!0,xs:12,children:m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a(M,{variant:"body1",fontWeight:"medium",children:"출금 쿨다운 활성화"}),a(sn,{checked:p.enabled,onChange:le=>ne("enabled",le.target.checked)})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"쿨다운 시간 (초)",type:"number",value:p.seconds,onChange:le=>ne("seconds",le.target.value),disabled:!p.enabled,InputProps:{endAdornment:a(Dt,{position:"end",children:"초"}),inputProps:{min:1,max:3600}},helperText:"1~3600초 (최대 1시간)"})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"시간당 최대 시도 횟수",type:"number",value:p.maxAttemptsPerHour,onChange:le=>ne("maxAttemptsPerHour",le.target.value),disabled:!p.enabled,InputProps:{endAdornment:a(Dt,{position:"end",children:"회"}),inputProps:{min:1,max:100}}})}),a(W,{item:!0,xs:12,children:a(M,{variant:"body2",color:"text.secondary",children:"출금 신청 후 다음 신청까지 대기해야 하는 시간을 초 단위로 설정합니다. (예: 300초 = 5분)"})})]})]}),m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,pt:2,position:"sticky",bottom:0,backgroundColor:"background.paper",pb:2,boxShadow:L?"0 -2px 10px rgba(0,0,0,0.1)":"none"},children:[L&&m(M,{variant:"body2",color:"warning.main",sx:{display:"flex",alignItems:"center",gap:1},children:[a(qo,{fontSize:"small"}),"저장되지 않은 변경사항이 있습니다"]}),a(Se,{variant:"contained",size:"large",startIcon:a(qo,{}),onClick:Ae,disabled:F||!L,sx:{minWidth:200,boxShadow:L?3:1},children:F?"저장 중...":"모든 설정 저장"})]})]}),a(ua,{open:T.open,autoHideDuration:3e3,onClose:()=>I({...T,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>I({...T,open:!1}),severity:T.severity,sx:{width:"100%"},children:T.message})})]})},_ue=[{id:"code",label:"쿠폰 코드",width:150,sortable:!0,render:e=>m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(M,{variant:"body2",fontWeight:"medium",children:e.code}),a(Fn,{title:"복사",children:a(Ct,{size:"small",onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(e.code)},children:a(x1,{fontSize:"small"})})})]})},{id:"gameMoney",label:"지급 게임머니",width:120,sortable:!0,align:"right",render:e=>a(M,{variant:"body2",fontWeight:"medium",color:"primary",children:e.gameMoney})},{id:"targetType",label:"대상",width:100,render:e=>a(ut,{label:e.targetType==="all"?"모든 회원":"특정 회원",size:"small",variant:"outlined",color:e.targetType==="all"?"default":"primary"})},{id:"maxUses",label:"최대 사용",width:100,align:"center",render:e=>a(j,{sx:{textAlign:"center"},children:m(M,{variant:"body2",children:[e.usedCount,"/",e.maxUses]})})},{id:"expiryDate",label:"만료일",width:100,sortable:!0,render:e=>a(M,{variant:"body2",color:e.expiryDate==="무제한"?"text.secondary":"text.primary",children:e.expiryDate})},{id:"status",label:"상태",width:80,align:"center",render:(e,t)=>a(sn,{size:"small",checked:e.status==="active",onChange:()=>t.handleToggleStatus(e.id),color:"primary"})},{id:"description",label:"설명",width:200,render:e=>a(M,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.description})},{id:"createdAt",label:"생성일",width:100,sortable:!0,render:e=>new Date(e.createdAt).toLocaleDateString()}],Tue=[{id:"grantedAt",label:"지급 시간",width:150,sortable:!0,render:e=>new Date(e.grantedAt||e.appliedAt).toLocaleString()},{id:"userId",label:"회원 ID",width:100,sortable:!0},{id:"userName",label:"회원명",width:100},{id:"couponCode",label:"쿠폰 방식",width:150,render:e=>a(M,{variant:"body2",fontWeight:"medium",children:e.couponCode})},{id:"gameMoney",label:"지급 게임머니",width:120,align:"right",render:e=>a(M,{variant:"body2",fontWeight:"medium",color:e.status==="success"?"primary":"text.secondary",children:e.gameMoney||e.discount})},{id:"description",label:"지급 사유",width:200,render:e=>a(M,{variant:"body2",color:"text.secondary",children:e.description||"-"})},{id:"status",label:"상태",width:80,align:"center",render:e=>a(ut,{label:e.status==="success"?"성공":"실패",size:"small",color:e.status==="success"?"success":"error",variant:"outlined"})},{id:"adminId",label:"처리자",width:100,render:e=>a(M,{variant:"body2",color:"text.secondary",children:e.adminId||e.ip||"-"})}],Iue=(e=20)=>{const t=["all","specific"],n=["active","inactive"],r=[];for(let i=0;i<e;i++){const o=(Math.floor(Math.random()*20)+1)*1e4;r.push({id:`coupon_${i+1}`,code:`GAME${String(i+1).padStart(4,"0")}`,gameMoney:`${o.toLocaleString()}원`,gameMoneyRaw:o,targetType:t[Math.floor(Math.random()*t.length)],maxUses:Math.random()>.5?String(Math.floor(Math.random()*100)+1):"무제한",usedCount:Math.floor(Math.random()*50),expiryDate:Math.random()>.5?new Date(Date.now()+Math.random()*365*24*60*60*1e3).toLocaleDateString():"무제한",status:n[Math.floor(Math.random()*n.length)],description:`게임머니 쿠폰 ${i+1}`,createdAt:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString()})}return r},Oue=(e=50)=>{const t=["홍길동","김철수","이영희","박민수","정지원"],n=["관리자 직접 지급","GAME0001","GAME0002","EVENT2024","WELCOME100"],r=["이벤트 보상","VIP 특별 혜택","신규 가입 축하","온라인 이벤트","고객 감사 혜택"],i=[];for(let o=0;o<e;o++){const s=Math.random()>.5,l=(Math.floor(Math.random()*50)+1)*1e4;i.push({id:`history_${o+1}`,userId:`user${Math.floor(Math.random()*1e3)+1}`,userName:t[Math.floor(Math.random()*t.length)],couponCode:s?"관리자 직접 지급":n[Math.floor(Math.random()*(n.length-1))+1],gameMoney:`${l.toLocaleString()}원`,description:r[Math.floor(Math.random()*r.length)],status:"success",grantedAt:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),adminId:s?`admin${Math.floor(Math.random()*10)+1}`:null})}return i.sort((o,s)=>new Date(s.grantedAt)-new Date(o.grantedAt))};function CR({children:e,value:t,index:n,...r}){return a("div",{role:"tabpanel",hidden:t!==n,id:`event-tabpanel-${n}`,"aria-labelledby":`event-tab-${n}`,...r,children:t===n&&a(j,{sx:{pt:3},children:e})})}const Aue=()=>{const[e,t]=u.useState(0),{data:n,setData:r}=Za({pageType:"couponCreate",dataGenerator:Iue,requiresMembersData:!1}),{data:i,setData:o}=Za({pageType:"couponHistory",dataGenerator:Oue,requiresMembersData:!1}),[s,l]=u.useState(0),[c,d]=u.useState(10),[h,f]=u.useState(0),[g,w]=u.useState(10),[x,y]=u.useState({code:"",gameMoney:"",maxUses:"",expiryDate:"",description:"",targetType:"all"}),[p,v]=u.useState({userId:"",gameMoney:"",description:""}),[b,P]=u.useState([]),[k,C]=u.useState(null),[S,_]=u.useState(!1),[T,I]=u.useState({open:!1,message:"",severity:"success"}),L=Rn(),A=Rn(),D=Nn(),B=Nn(),$=u.useCallback((ne,me="success")=>{I({open:!0,message:ne,severity:me})},[]),N=(ne,me)=>{t(me)},F=u.useCallback(ne=>me=>{y(ue=>({...ue,[ne]:me.target.value}))},[]),O=u.useCallback(()=>{const ne="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let me="";for(let ue=0;ue<12;ue++)ue>0&&ue%4===0&&(me+="-"),me+=ne.charAt(Math.floor(Math.random()*ne.length));y(ue=>({...ue,code:me}))},[]),R=u.useCallback(()=>{if(!x.code||!x.gameMoney){$("쿠폰 코드와 게임머니를 입력해주세요.","error");return}if(n.some(me=>me.code===x.code)){$("이미 존재하는 쿠폰 코드입니다.","error");return}const ne={id:Date.now().toString(),code:x.code,gameMoney:`${Number(x.gameMoney).toLocaleString()}원`,gameMoneyRaw:Number(x.gameMoney),maxUses:x.maxUses||"무제한",usedCount:0,expiryDate:x.expiryDate||"무제한",status:"active",targetType:x.targetType,description:x.description||"-",createdAt:new Date().toISOString()};r([ne,...n]),$("게임머니 쿠폰이 생성되었습니다."),y({code:"",gameMoney:"",maxUses:"",expiryDate:"",description:"",targetType:"all"})},[x,n,r,$]),E=u.useCallback(()=>{if(b.length===0){$("삭제할 쿠폰을 선택해주세요.","warning");return}r(n.filter(ne=>!b.includes(ne.id))),P([]),$(`${b.length}개의 쿠폰이 삭제되었습니다.`)},[b,n,r,$]),z=u.useCallback(ne=>{r(n.map(me=>me.id===ne?{...me,status:me.status==="active"?"inactive":"active"}:me)),$("쿠폰 상태가 변경되었습니다.")},[n,r,$]),q=u.useCallback(ne=>me=>{v(ue=>({...ue,[ne]:me.target.value}))},[]),X=u.useCallback(ne=>({user123:{name:"홍길동",level:"VIP",balance:"1,500,000원"},test001:{name:"김철수",level:"일반",balance:"300,000원"},vip777:{name:"이영희",level:"VVIP",balance:"5,200,000원"}})[ne]||null,[]),H=u.useCallback(()=>{if(!p.userId.trim()){$("회원 ID를 입력해주세요.","warning");return}const ne=X(p.userId);ne?(C({...ne,userId:p.userId}),$("회원이 확인되었습니다.","success")):(C(null),$("해당 회원을 찾을 수 없습니다.","error"))},[p.userId,X,$]),K=u.useCallback(async()=>{if(!k){$("회원을 먼저 검색해주세요.","warning");return}if(!p.gameMoney){$("지급할 게임머니를 입력해주세요.","warning");return}_(!0),await new Promise(me=>setTimeout(me,1e3));const ne={id:Date.now().toString(),userId:k.userId,userName:k.name,couponCode:"관리자 직접 지급",gameMoney:`${Number(p.gameMoney).toLocaleString()}원`,grantType:"admin",status:"success",description:p.description||"-",grantedAt:new Date().toISOString(),adminId:"admin123"};o([ne,...i]),$(`${k.name}님에게 게임머니 ${Number(p.gameMoney).toLocaleString()}원이 지급되었습니다.`,"success"),v({userId:"",gameMoney:"",description:""}),C(null),_(!1)},[k,p,i,o,$]),ee=u.useCallback((ne,me)=>{const ue=typeof ne=="number"?ne:me;typeof ue=="number"&&l(ue)},[]),ge=u.useCallback(ne=>{d(parseInt(ne.target.value,10)),l(0)},[]),oe=u.useCallback((ne,me)=>{const ue=typeof ne=="number"?ne:me;typeof ue=="number"&&f(ue)},[]),G=u.useCallback(ne=>{w(parseInt(ne.target.value,10)),f(0)},[]),Q=Ce.useMemo(()=>{let ne=[...n];if(L.searchText){const me=L.searchText.toLowerCase();ne=ne.filter(ue=>ue.code.toLowerCase().includes(me)||ue.description.toLowerCase().includes(me))}return ne},[n,L.searchText]),te=Ce.useMemo(()=>{let ne=[...i];if(A.searchText){const me=A.searchText.toLowerCase();ne=ne.filter(ue=>ue.couponCode.toLowerCase().includes(me)||ue.userName.toLowerCase().includes(me)||ue.userId.toLowerCase().includes(me))}return ne},[i,A.searchText]),U=u.useMemo(()=>{const ne=s*c,me=ne+c;return Q.slice(ne,me)},[Q,s,c]),V=u.useMemo(()=>{const ne=h*g,me=ne+g;return te.slice(ne,me)},[te,h,g]),ae={handleToggleStatus:z};return m(vn,{children:[a(Cn,{title:"이벤트설정",showAddButton:!1,sx:{mb:3}}),m(rt,{elevation:1,children:[m(La,{value:e,onChange:N,indicatorColor:"primary",textColor:"primary",sx:{borderBottom:1,borderColor:"divider"},children:[a(_n,{label:"쿠폰코드 생성"}),a(_n,{label:"쿠폰 지급"})]}),m(CR,{value:e,index:0,children:[m(rt,{elevation:0,sx:{p:3,mb:3,bgcolor:"grey.50"},children:[a(M,{variant:"h6",sx:{mb:3},children:"새 게임머니 쿠폰 생성"}),m(W,{container:!0,spacing:2,children:[a(W,{item:!0,xs:12,sm:6,children:m(j,{sx:{display:"flex",gap:1},children:[a($e,{fullWidth:!0,label:"쿠폰 코드",value:x.code,onChange:F("code"),placeholder:"예: WELCOME2024",required:!0}),a(Se,{variant:"outlined",onClick:O,sx:{minWidth:100},children:"자동생성"})]})}),a(W,{item:!0,xs:12,sm:6,children:a($e,{fullWidth:!0,label:"지급 게임머니",type:"number",value:x.gameMoney,onChange:F("gameMoney"),InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},required:!0})}),a(W,{item:!0,xs:12,sm:4,children:m($e,{select:!0,fullWidth:!0,label:"지급 대상",value:x.targetType,onChange:F("targetType"),children:[a(Me,{value:"all",children:"모든 회원"}),a(Me,{value:"specific",children:"특정 회원"})]})}),a(W,{item:!0,xs:12,sm:4,children:a($e,{fullWidth:!0,label:"최대 사용 횟수",type:"number",value:x.maxUses,onChange:F("maxUses"),placeholder:"무제한"})}),a(W,{item:!0,xs:12,sm:4,children:a($e,{fullWidth:!0,label:"만료일",type:"date",value:x.expiryDate,onChange:F("expiryDate"),InputLabelProps:{shrink:!0}})}),a(W,{item:!0,xs:12,children:a($e,{fullWidth:!0,label:"쿠폰 설명",value:x.description,onChange:F("description"),multiline:!0,rows:2,placeholder:"쿠폰 설명을 입력하세요"})}),a(W,{item:!0,xs:12,children:a(j,{sx:{display:"flex",justifyContent:"flex-end"},children:a(Se,{variant:"contained",size:"large",startIcon:a(lo,{}),onClick:R,children:"게임머니 쿠폰 생성"})})})]})]}),m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:a(M,{variant:"h6",children:"생성된 쿠폰 목록"})}),m(j,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a($e,{size:"small",placeholder:"쿠폰 코드 검색...",value:L.searchText,onChange:ne=>L.handleSearchChange(ne.target.value),sx:{width:300}}),b.length>0&&m(Se,{variant:"outlined",color:"error",size:"small",startIcon:a(Wo,{}),onClick:E,children:["선택 삭제 (",b.length,")"]})]}),a(Vn,{filterProps:{filterOptions:[],activeFilters:{},handleFilterChange:()=>{},showDateFilter:!1},paginationProps:{count:Q.length,page:s,rowsPerPage:c,onPageChange:ee,onRowsPerPageChange:ge}}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:a(An,{columns:_ue,data:U,sortConfig:D.sortConfig,onSort:D.handleSort,onRowSelect:P,selectedRows:b,actionHandlers:ae,sx:{"& .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"}}})})]})]}),a(CR,{value:e,index:1,children:m(W,{container:!0,spacing:3,children:[a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:0,sx:{p:3,bgcolor:"grey.50",height:"100%"},children:[m(M,{variant:"h6",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[a(JR,{color:"primary"}),"회원 검색 및 쿠폰 지급"]}),m(j,{sx:{mb:3},children:[m(j,{sx:{display:"flex",gap:1,mb:2},children:[a($e,{fullWidth:!0,label:"회원 ID",value:p.userId,onChange:q("userId"),placeholder:"회원 ID 입력",disabled:S,onKeyPress:ne=>{ne.key==="Enter"&&H()}}),a(Se,{variant:"outlined",onClick:H,disabled:S,sx:{minWidth:100},children:"검색"})]}),k&&a(Sn,{variant:"outlined",sx:{p:2,bgcolor:"primary.50"},children:m(W,{container:!0,spacing:2,children:[m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"ID"}),a(M,{variant:"body2",fontWeight:"medium",children:k.userId})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"이름"}),a(M,{variant:"body2",fontWeight:"medium",children:k.name})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"등급"}),a(M,{variant:"body2",fontWeight:"medium",children:k.level})]}),m(W,{item:!0,xs:6,children:[a(M,{variant:"caption",color:"text.secondary",children:"현재 잔액"}),a(M,{variant:"body2",fontWeight:"medium",children:k.balance})]})]})})]}),m(j,{sx:{mb:3},children:[a($e,{fullWidth:!0,label:"지급 게임머니",type:"number",value:p.gameMoney,onChange:q("gameMoney"),placeholder:"지급할 금액 입력",disabled:!k||S,InputProps:{endAdornment:a(Dt,{position:"end",children:"원"})},sx:{mb:2}}),a($e,{fullWidth:!0,label:"지급 사유",value:p.description,onChange:q("description"),placeholder:"예: 이벤트 보상, VIP 특별 혜택 등",disabled:!k||S,multiline:!0,rows:2})]}),a(Se,{fullWidth:!0,variant:"contained",size:"large",onClick:K,disabled:S||!k||!p.gameMoney,children:S?"처리 중...":"게임머니 지급"}),m(j,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"테스트용 회원 ID:"}),a(j,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:["user123","test001","vip777"].map(ne=>a(ut,{label:ne,size:"small",onClick:()=>v(me=>({...me,userId:ne})),sx:{cursor:"pointer"}},ne))})]})]})}),a(W,{item:!0,xs:12,md:6,children:m(rt,{elevation:0,sx:{p:3,bgcolor:"grey.50",height:"100%"},children:[a(M,{variant:"h6",sx:{mb:3},children:"쿠폰 지급 안내"}),m(j,{sx:{mb:3},children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"🎮 게임머니 쿠폰이란?"}),a(M,{variant:"body2",color:"text.secondary",paragraph:!0,children:"게임머니 쿠폰은 회원에게 게임을 할 수 있는 포인트를 제공하는 시스템입니다. 보유금액과는 별도로 관리되며, 게임 전용으로 사용됩니다."})]}),a(yn,{sx:{my:2}}),m(j,{sx:{mb:3},children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"📌 지급 방법"}),m(M,{variant:"body2",component:"div",color:"text.secondary",children:["1. 회원 ID로 검색하여 회원 확인",a("br",{}),"2. 지급할 게임머니 금액 입력",a("br",{}),"3. 지급 사유 입력 (선택사항)",a("br",{}),"4. 지급 버튼 클릭하여 즉시 지급"]})]}),a(yn,{sx:{my:2}}),m(j,{children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"⚠️ 주의사항"}),m(M,{variant:"body2",component:"div",color:"text.secondary",children:["• 관리자가 직접 지급한 쿠폰은 취소 불가",a("br",{}),"• 모든 지급 내역은 로그에 기록됨",a("br",{}),"• 지급 전 회원 정보를 반드시 확인"]})]})]})}),a(W,{item:!0,xs:12,children:m(rt,{elevation:1,sx:{p:2},children:[a(j,{sx:{mb:2},children:a(M,{variant:"h6",children:"쿠폰 지급 내역"})}),a(j,{sx:{mb:2},children:a($e,{size:"small",placeholder:"회원 ID, 이름, 쿠폰 코드 검색...",value:A.searchText,onChange:ne=>A.handleSearchChange(ne.target.value),sx:{width:300}})}),a(Vn,{filterProps:{filterOptions:[],activeFilters:{},handleFilterChange:()=>{},showDateFilter:!1},paginationProps:{count:te.length,page:h,rowsPerPage:g,onPageChange:oe,onRowsPerPageChange:G}}),a(j,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:a(An,{columns:Tue,data:V,sortConfig:B.sortConfig,onSort:B.handleSort,sx:{"& .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"}}})})]})})]})})]}),a(ua,{open:T.open,autoHideDuration:3e3,onClose:()=>I({...T,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a(Jt,{onClose:()=>I({...T,open:!1}),severity:T.severity,sx:{width:"100%"},children:T.message})})]})},Due=[{id:"no",label:"No.",width:60,sortable:!1,filterable:!1,align:"center",type:"number"},{id:"userId",label:"아이디",width:120,sortable:!0,filterable:!0},{id:"nickname",label:"닉네임",width:120,sortable:!0,filterable:!0},{id:"agentId",label:"에이전트",width:100,sortable:!0,filterable:!0},{id:"level",label:"레벨",width:80,sortable:!0,filterable:!0,type:"chip",render:e=>e},{id:"ipAddress",label:"IP주소",width:120,sortable:!0,filterable:!0},{id:"device",label:"접속기기",width:80,sortable:!0,filterable:!0,type:"chip",render:e=>e},{id:"gameStatus",label:"접속상태",width:100,sortable:!0,filterable:!0,type:"chip",render:e=>e,chipColor:e=>{switch(e){case"로비대기":return"success";case"게임중":return"warning";default:return"default"}}},{id:"runningTimeFormatted",label:"게임접속 러닝타임",width:150,sortable:!1,filterable:!1,type:"custom",render:e=>{const t=new Date(e.loginTime),r=Math.floor((new Date-t)/1e3),i=Math.floor(r/3600),o=Math.floor(r%3600/60),s=r%60;let l;return i>0?l=`${i}시간 ${o}분`:o>0?l=`${o}분 ${s}초`:l=`${s}초`,m("div",{style:{display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[a(QR,{fontSize:"small",color:"action"}),a("span",{children:l})]})}},{id:"actions",label:"액션",width:140,sortable:!1,filterable:!1,align:"center",type:"button",buttonText:"아이디바꿔주기",buttonColor:"primary",buttonVariant:"contained",buttonSize:"small",onClick:e=>{}}],SR=(e,t)=>{const n=[],r=Math.floor(Math.random()*10)+5;for(let i=0;i<r;i++){const o=`user${Math.floor(Math.random()*9e3)+2e4}`;o!==t&&n.push({id:o,userId:o,nickname:`닉네임${Math.floor(Math.random()*1e3)}`,agentId:e,level:"일반",balance:0,rollingAmount:0,gameStatus:"미접속",lastLogin:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),changeEnabled:!0,isOnline:!1})}return n},Rue=(e=50)=>{const t=[],n=["agent001","agent002","agent003","agent004","agent005"],r=new Date;for(let i=0;i<e;i++){const o=new Date(r.getTime()-Math.random()*4*60*60*1e3),s=Math.floor((r-o)/1e3);t.push({id:`user${Math.floor(Math.random()*9e3)+3e4}`,userId:`user${Math.floor(Math.random()*9e3)+3e4}`,nickname:`닉네임${Math.floor(Math.random()*1e3)}`,agentId:n[Math.floor(Math.random()*n.length)],level:"일반",balance:0,gameStatus:"로비대기",loginTime:o.toISOString(),runningTime:s,runningTimeFormatted:Eue(s),ipAddress:`192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,device:["PC","Mobile","Tablet"][Math.floor(Math.random()*3)],changeEnabled:!0,isOnline:!0})}return t};function Eue(e){const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?`${t}시간 ${n}분`:n>0?`${n}분 ${r}초`:`${r}초`}const Mue=({open:e,userId:t,agentId:n,onClose:r})=>{const i=Kr(),{changeableUsers:o,isLoading:s,error:l}=zn(b=>b.usernameChange),[c,d]=u.useState(null),[h,f]=u.useState(""),[g,w]=u.useState([]);u.useEffect(()=>{e&&n&&x()},[e,n]),u.useEffect(()=>{if(o.length>0){const b=o.filter(P=>P.userId.toLowerCase().includes(h.toLowerCase())||P.nickname.toLowerCase().includes(h.toLowerCase()));w(b)}},[o,h]);const x=async()=>{var b,P,k;i(il(!0)),i(Ks(null));try{const C=await Pe.usernameChange.getChangeableUsers(n,t);if(C.data&&Array.isArray(C.data))i(zh(C.data));else{console.warn("API 응답 형식이 올바르지 않습니다:",C.data);const S=SR(n,t);i(zh(S))}}catch(C){if(console.error("변경 가능한 사용자 목록 로드 실패:",C),C.code==="ERR_NETWORK"||((b=C.response)==null?void 0:b.status)>=500){const S=SR(n,t);i(zh(S))}else{let S="변경 가능한 사용자 목록을 불러올 수 없습니다.";(k=(P=C.response)==null?void 0:P.data)!=null&&k.message&&(S=C.response.data.message),i(Ks(S)),i(zh([]))}}finally{i(il(!1))}},y=()=>{i(u5()),i(Ks(null)),d(null),f(""),r&&r(!1)},p=async()=>{var b,P,k,C;if(!c){i(Ks("변경할 아이디를 선택해주세요."));return}i(il(!0)),i(Ks(null));try{const S=await Pe.usernameChange.executeChange({oldUserId:t,newUserId:c.userId,agentId:n,reason:"사용자 요청"});i(KB({oldUserId:t,newUserId:c.userId,agentId:n,reason:"사용자 요청"})),alert(`아이디가 성공적으로 변경되었습니다.

${t} → ${c.userId}`),r&&r(!0),y()}catch(S){console.error("아이디 변경 실패:",S);let _="아이디 변경에 실패했습니다.";(P=(b=S.response)==null?void 0:b.data)!=null&&P.message?_=S.response.data.message:(C=(k=S.response)==null?void 0:k.data)!=null&&C.error?_=S.response.data.error:S.message&&(_=S.message),i(Ks(_))}finally{i(il(!1))}},v=b=>{d(b)};return m(Yn,{open:e,onClose:y,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,minHeight:"60vh"}},children:[m(Zn,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:1,borderColor:"divider",pb:2},children:[m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(gf,{color:"primary"}),a(M,{variant:"h6",children:"아이디 변경"})]}),a(Ct,{onClick:y,size:"small",children:a(Sa,{})})]}),m(Kn,{sx:{pt:2},children:[m(Jt,{severity:"info",sx:{mb:2},children:[m(M,{variant:"body2",children:[a("strong",{children:t})," 아이디를 변경합니다."]}),m(M,{variant:"caption",color:"text.secondary",children:["같은 에이전트(",n,") 소속의 변경 가능한 아이디만 표시됩니다."]})]}),a($e,{fullWidth:!0,size:"small",placeholder:"아이디 또는 닉네임으로 검색",value:h,onChange:b=>f(b.target.value),sx:{mb:2},InputProps:{startAdornment:a(Dt,{position:"start",children:a(yi,{})})}}),l&&a(Jt,{severity:"error",sx:{mb:2},children:l}),s?a(j,{sx:{display:"flex",justifyContent:"center",py:4},children:a(ir,{})}):m(j,{children:[m(M,{variant:"subtitle2",sx:{mb:1},children:["변경 가능한 아이디 (",g.length,"개)"]}),a(xi,{sx:{maxHeight:"300px",overflow:"auto",border:1,borderColor:"divider",borderRadius:1},children:g.length===0?a(Oa,{children:a(_r,{primary:"변경 가능한 아이디가 없습니다.",secondary:"모든 아이디가 사용 중이거나 조건을 만족하지 않습니다.",sx:{textAlign:"center",py:3}})}):g.map(b=>a(Oa,{disablePadding:!0,divider:!0,children:m(yf,{onClick:()=>v(b),selected:(c==null?void 0:c.id)===b.id,children:[a(ur,{children:a(Io,{checked:(c==null?void 0:c.id)===b.id,value:b.id})}),a(_r,{primary:m(j,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(ba,{fontSize:"small",color:"action"}),a(M,{variant:"body1",component:"span",children:b.userId}),m(M,{variant:"body2",color:"text.secondary",children:["(",b.nickname,")"]})]}),secondary:m(j,{sx:{display:"flex",gap:1,mt:.5},children:[a(ut,{label:b.level,size:"small",variant:"outlined"}),a(ut,{label:"미접속",size:"small",color:"success",variant:"outlined",icon:a(ul,{fontSize:"small"})}),a(ut,{label:"잔액: 0원",size:"small",variant:"outlined"})]})})]})},b.id))})]}),c&&m(j,{sx:{mt:2,p:2,bgcolor:"primary.main",color:"white",borderRadius:1},children:[a(M,{variant:"subtitle2",gutterBottom:!0,children:"선택된 아이디"}),m(M,{variant:"h6",children:[t," → ",c.userId]}),a(M,{variant:"caption",children:"변경 후에는 기존 아이디로 로그인할 수 없습니다."})]})]}),a(yn,{}),m(nr,{sx:{p:2},children:[a(Se,{onClick:y,variant:"outlined",children:"취소"}),a(Se,{onClick:p,variant:"contained",disabled:!c||s,startIcon:s&&a(ir,{size:20}),children:s?"변경 중...":"변경하기"})]})]})},Lue=()=>{On();const e=Kr(),{changeDialog:t}=zn(Qe=>Qe.usernameChange),[n,r]=u.useState([]),[i,o]=u.useState(!1),[s,l]=u.useState(null),[c,d]=u.useState(0),h=u.useCallback(async()=>{o(!0),l(null),e(il(!0));try{const Ie=(await Pe.usernameChange.getOnlineChangeableUsers()).data||[];r(Ie),e(oP(Ie))}catch(Qe){console.error("API 호출 실패:",Qe),l(Qe.message||"API 호출에 실패했습니다.");const Ie=Rue(50);r(Ie),e(oP(Ie))}finally{o(!1),e(il(!1))}},[e]);u.useEffect(()=>{h()},[h,c]),u.useEffect(()=>{const Qe=setInterval(()=>{h()},3e4);return()=>clearInterval(Qe)},[h]);const f=u.useCallback(()=>{d(Qe=>Qe+1)},[]),{containerRef:g,tableHeight:w,autoHeight:x,toggleAutoHeight:y,setManualHeight:p}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:v,getResizeHandleProps:b}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Qe=>{x&&y(!1),p(`${Qe}px`)}}),{tableHeaderRef:P,getTableHeaderStyles:k}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),C=u.useCallback(()=>{alert("아이디변경 목록을 엑셀로 다운로드합니다.")},[]),S=u.useCallback(()=>{alert("아이디변경 목록을 인쇄합니다.")},[]),[_,T]=u.useState(0),[I,L]=u.useState(25),A=u.useCallback(Qe=>{e(VB({userId:Qe.userId,agentId:Qe.agentId}))},[e]);u.useEffect(()=>{!t.open&&c>0&&h()},[t.open,h,c]);const{checkedItems:D,sortConfig:B,expandedRows:$,allChecked:N,handleSort:F,handleCheck:O,handleToggleAll:R,handleToggleExpand:E}=Nn({data:n,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:_,rowsPerPage:I}),z=u.useMemo(()=>Due.map(Qe=>Qe.id==="actions"?{...Qe,onClick:A}:Qe),[A]),q=u.useMemo(()=>[{id:"gameStatus",label:"접속상태",items:[{value:"",label:"전체"},{value:"로비대기",label:"로비대기"},{value:"게임중",label:"게임중"}]},{id:"device",label:"접속기기",items:[{value:"",label:"전체"},{value:"PC",label:"PC"},{value:"Mobile",label:"Mobile"},{value:"Tablet",label:"Tablet"}]},{id:"level",label:"레벨",items:[{value:"",label:"전체"},{value:"일반",label:"일반"},{value:"실버",label:"실버"},{value:"골드",label:"골드"},{value:"VIP",label:"VIP"},{value:"플래티넘",label:"플래티넘"}]}],[]),{activeFilters:X,handleFilterChange:H,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge,dateRange:oe,page:G,rowsPerPage:Q,totalCount:te,totalPages:U,handlePageChange:V,handleRowsPerPageChange:ae,filteredData:ne,displayData:me,filterValues:ue,handleFilter:Ae,handleClearFilters:we}=yr({columns:z,data:n,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{gameStatus:"",device:"",level:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:n.length,onExcelDownload:C,onPrint:S}}),{searchText:ce,totalItems:De,sequentialPageNumbers:le,hasPinnedColumns:se,isGridReady:J,handleSearchChange:Z,handleClearSearch:ie,togglePageNumberMode:_e,toggleColumnPin:Re,setGridReady:He}=Rn({initialTotalItems:n.length,onSearch:Qe=>{G!==0&&V(0)},onToggleColumnPin:Qe=>{Qe?$t():jt()}});u.useEffect(()=>{He(!0)},[He]);const{columns:ft,dragInfo:St,pinnedColumns:Tt,handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt,updateColumns:ht,clearAllPinnedColumns:jt,setDefaultPinnedColumns:$t}=sr({initialColumns:z,tableId:"change_username_table",onColumnOrderChange:Qe=>{}}),{columnVisibility:Ut,visibleColumns:Bt,hiddenColumnsCount:Kt,toggleableColumns:Ft,toggleColumnVisibility:Et,showAllColumns:Ot,resetToDefault:zt}=dr(ft,{defaultHiddenColumns:[],alwaysVisibleColumns:["userId","actions"],tableId:"change_username_table"}),[Wt,kt]=u.useState(null),Mt=!!Wt,Ht=u.useCallback(Qe=>{kt(Qe)},[]),qt=u.useCallback(()=>{kt(null)},[]),Yt=!0,Xt={handleDragStart:gt,handleDragEnd:et,handleDragOver:xt,handleDrop:Rt},tn=u.useCallback((Qe,Ie,Xe)=>{switch(Ie){case"gameStatus":return Xe===""||Xe==="all"?Qe:Qe.filter(ve=>ve.gameStatus===Xe);case"device":return Xe===""||Xe==="all"?Qe:Qe.filter(ve=>ve.device===Xe);case"level":return Xe===""||Xe==="all"?Qe:Qe.filter(ve=>ve.level===Xe);default:return Qe}},[]),Fe=u.useCallback((Qe,Ie)=>{H(Qe,Ie)},[H]),je=u.useMemo(()=>{const Qe={...X};return Object.keys(Qe).forEach(Ie=>{Qe[Ie]==="all"&&(Qe[Ie]="")}),Qe},[X]),Oe=Dr({data:n,activeFilters:je,searchText:ce,isDateFilterActive:K,dateRange:oe,filterCallback:tn}),ke=u.useMemo(()=>Oe?Oe.map(Qe=>Qe.id):[],[Oe]),bt=u.useMemo(()=>{const Qe=Object.values(je).some(Xe=>Xe&&Xe!==""),Ie=ce&&ce.trim()!=="";return!Qe&&!Ie?n:!n||!ke||ke.length===0?[]:n.filter(Xe=>ke.includes(Xe.id))},[n,ke,je,ce]);u.useEffect(()=>{},[G,Q]);const it=bt||[],fe=it.length;u.useEffect(()=>{it.length!==De&&`${it.length}`},[it.length,De,fe]);const be=u.useCallback((Qe,Ie)=>{let Xe=Ie;if(typeof Qe=="number"&&Ie===void 0&&(Xe=Qe),typeof Xe!="number"){console.error("유효하지 않은 페이지 번호:",Xe);return}T(Xe),V(Xe)},[_,V]),Te=u.useCallback(Qe=>{if(!Qe||!Qe.target||!Qe.target.value){console.error("아이디변경 행 수 변경 이벤트 오류:",Qe);return}const Ie=parseInt(Qe.target.value,10);L(Ie),T(0),ae(Qe)},[I,ae]),[Ne,Ve]=u.useState(Date.now());u.useEffect(()=>{Ve(Date.now())},[_,I]);const Ge=u.useMemo(()=>!it||it.length===0?[]:it,[it,_,I,fe]),At=u.useMemo(()=>Bt.map(Qe=>Qe.id==="actions"?{...Qe,onClick:A}:Qe),[Bt,A]);return m(vn,{children:[a(Cn,{title:"아이디변경",onDisplayOptionsClick:Ht,showAddButton:!1,showRefreshButton:!0,onRefreshClick:f,sx:{mb:2}}),a(or,{anchorEl:Wt,open:Mt,onClose:qt,toggleableColumns:Ft,columnVisibility:Ut,onToggleColumn:Et,onShowAll:Ot,onReset:zt,hiddenColumnsCount:Kt,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"온라인 변경 가능 사용자",totalItems:fe,countLabel:"총 ##count##명",sequentialPageNumbers:le,togglePageNumberMode:_e,hasPinnedColumns:se,isGridReady:J,toggleColumnPin:Re,searchText:ce,handleSearchChange:Z,handleClearSearch:ie,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"아이디, 닉네임, 에이전트 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:ft,filterValues:ue||{},activeFilters:je||{},filterOptions:q,handleFilterChange:Fe,onFilter:Ae,onClearFilters:we,isDateFilterActive:K,handleOpenDateFilter:ee,resetDateFilter:ge},paginationProps:{count:fe,page:_,rowsPerPage:I,onPageChange:be,onRowsPerPageChange:Te,totalCount:fe,onExcelDownload:C,onPrint:S}})}),m(j,{sx:{width:"100%",mt:2},ref:g,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",_+1," / ",Math.ceil(fe/I)," (페이지당 ",I,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다.",s&&a(M,{component:"span",sx:{ml:2,color:"error.main"},children:"(주의: API 연결 실패로 임시 데이터 표시 중)"})]}),a(An,{columns:At,data:Ge,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:D,expandedRows:$,allChecked:N,onCheck:O,onToggleAll:R,onToggleExpand:E,onSort:F,sortConfig:B,page:_,rowsPerPage:I,totalCount:fe,sequentialPageNumbers:le,draggableColumns:Yt,onColumnOrderChange:ht,dragHandlers:Xt,dragInfo:St,fixedHeader:!0,maxHeight:w,tableHeaderRef:P,headerStyle:k(),pinnedColumns:Tt},`change-username-table-${Ne}`),a(rr,{resizeHandleProps:b(parseFloat(w)),showIcon:!0,isDragging:v,sx:{mt:1,opacity:v?1:.7,"&:hover":{opacity:1}}})]})]}),t.open&&a(Mue,{open:t.open,userId:t.userId,agentId:t.agentId,onClose:()=>{e(u5()),f()}})]})},$ue=(e=null,t=null)=>{const n=[],r=["사용자 요청","보안 정책","중복 아이디 해결","관리자 권한 변경","계정 통합","정책 위반 아이디"],i=["관리자1","관리자2","관리자3","시스템"],o=["주식회사A","주식회사B","주식회사C","주식회사D","주식회사E"],s=["미접속","게임중","로비대기"];for(let l=0;l<100;l++){const c=l+1,d=o[Math.floor(Math.random()*o.length)];n.push({id:c,no:c,changeDate:`2024-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")} ${String(Math.floor(Math.random()*24)).padStart(2,"0")}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,agentId:d,oldUsername:`user${String(c).padStart(3,"0")}`,newUsername:`new_user${String(c).padStart(3,"0")}`,changeReason:r[Math.floor(Math.random()*r.length)],nickname:`닉네임${c}`,currentBalance:Math.floor(Math.random()*5e6),gameStatus:s[Math.floor(Math.random()*s.length)],processor:i[Math.floor(Math.random()*i.length)],ipAddress:`192.168.${Math.floor(Math.random()*256)}.${Math.floor(Math.random()*256)}`,note:Math.random()>.5?`변경 사유: ${r[Math.floor(Math.random()*r.length)]}`:""})}return n.sort((l,c)=>new Date(c.changeDate)-new Date(l.changeDate)),n},PR=[{id:"no",label:"No.",width:60,sortable:!1,filterable:!1,align:"center",type:"number"},{id:"changeDate",label:"변경일시",width:150,sortable:!0,filterable:!0},{id:"agentId",label:"에이전트",width:120,sortable:!0,filterable:!0},{id:"oldUsername",label:"이전 아이디",width:120,sortable:!0,filterable:!0},{id:"newUsername",label:"변경된 아이디",width:120,sortable:!0,filterable:!0},{id:"nickname",label:"닉네임",width:120,sortable:!0,filterable:!0},{id:"changeReason",label:"변경사유",width:200,sortable:!1,filterable:!0},{id:"currentBalance",label:"현재 보유금",width:120,sortable:!0,filterable:!1,align:"right",type:"currency"},{id:"gameStatus",label:"게임상태",width:100,sortable:!0,filterable:!0,type:"chip",renderCell:e=>({label:e,color:e==="게임중"?"error":"success",variant:"outlined"})},{id:"processor",label:"처리자",width:100,sortable:!0,filterable:!0},{id:"ipAddress",label:"IP주소",width:120,sortable:!0,filterable:!0},{id:"note",label:"비고",width:150,sortable:!1,filterable:!1}],jue=()=>{On();const{data:e}=Za({pageType:"usernameChangeHistory",dataGenerator:$ue,requiresMembersData:!1}),{containerRef:t,tableHeight:n,autoHeight:r,toggleAutoHeight:i,setManualHeight:o}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:s,getResizeHandleProps:l}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:je=>{r&&i(!1),o(`${je}px`)}}),{tableHeaderRef:c,getTableHeaderStyles:d}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),h=u.useCallback(()=>{alert("아이디바꿔주기내역을 엑셀로 다운로드합니다.")},[]),f=u.useCallback(()=>{alert("아이디바꿔주기내역을 인쇄합니다.")},[]),[g,w]=u.useState(0),[x,y]=u.useState(25),{checkedItems:p,sortConfig:v,expandedRows:b,allChecked:P,handleSort:k,handleCheck:C,handleToggleAll:S,handleToggleExpand:_}=Nn({data:e,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:g,rowsPerPage:x}),T=u.useMemo(()=>[{id:"changeReason",label:"변경사유",items:[{value:"",label:"전체"},{value:"사용자 요청",label:"사용자 요청"},{value:"보안 정책",label:"보안 정책"},{value:"중복 아이디 해결",label:"중복 아이디 해결"},{value:"관리자 권한 변경",label:"관리자 권한 변경"},{value:"계정 통합",label:"계정 통합"},{value:"정책 위반 아이디",label:"정책 위반 아이디"}]},{id:"gameStatus",label:"게임상태",items:[{value:"",label:"전체"},{value:"미접속",label:"미접속"},{value:"게임중",label:"게임중"},{value:"로비대기",label:"로비대기"}]}],[]),{activeFilters:I,handleFilterChange:L,isDateFilterActive:A,handleOpenDateFilter:D,resetDateFilter:B,dateRange:$,page:N,rowsPerPage:F,totalCount:O,totalPages:R,handlePageChange:E,handleRowsPerPageChange:z,filteredData:q,displayData:X,filterValues:H,handleFilter:K,handleClearFilters:ee}=yr({columns:PR,data:e,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{changeReason:"",gameStatus:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:e.length,onExcelDownload:h,onPrint:f}}),{columns:ge,dragInfo:oe,pinnedColumns:G,handleDragStart:Q,handleDragEnd:te,handleDragOver:U,handleDrop:V,updateColumns:ae,clearAllPinnedColumns:ne,setDefaultPinnedColumns:me}=sr({initialColumns:PR,tableId:"username_change_history_table",initialPinnedColumns:["no","changeDate","oldUsername","newUsername"],onColumnOrderChange:je=>{}}),{searchText:ue,totalItems:Ae,sequentialPageNumbers:we,hasPinnedColumns:ce,isGridReady:De,handleSearchChange:le,handleClearSearch:se,togglePageNumberMode:J,toggleColumnPin:Z,setGridReady:ie,setHasPinnedColumns:_e}=Rn({initialTotalItems:e.length,onSearch:je=>{N!==0&&E(0)},onToggleColumnPin:je=>{je?me():ne()}});u.useEffect(()=>{ie(!0)},[ie]),u.useEffect(()=>{const je=G&&G.length>0;_e(je)},[G,_e]);const{columnVisibility:Re,visibleColumns:He,hiddenColumnsCount:ft,toggleableColumns:St,toggleColumnVisibility:Tt,showAllColumns:gt,resetToDefault:et}=dr(ge,{defaultHiddenColumns:[],alwaysVisibleColumns:["no","changeDate","oldUsername","newUsername"],tableId:"username_change_history_table"}),[xt,Rt]=u.useState(null),ht=!!xt,jt=u.useCallback(je=>{Rt(je)},[]),$t=u.useCallback(()=>{Rt(null)},[]),Ut=!0,Bt={handleDragStart:Q,handleDragEnd:te,handleDragOver:U,handleDrop:V},Kt=u.useCallback((je,Oe,ke)=>{switch(Oe){case"changeReason":return ke===""||!ke?je:je.filter(bt=>bt.changeReason===ke);case"gameStatus":return ke===""||!ke?je:je.filter(bt=>bt.gameStatus===ke);case"date":return je;default:return je}},[]),Ft=u.useCallback((je,Oe)=>{L(je,Oe)},[L]),Et=u.useMemo(()=>{const je={...I};return Object.keys(je).forEach(Oe=>{je[Oe]==="all"&&(je[Oe]="")}),je},[I]),Ot=Dr({data:e,activeFilters:Et,searchText:ue,isDateFilterActive:A,dateRange:$,filterCallback:Kt}),zt=u.useMemo(()=>Ot?Ot.map(je=>je.id):[],[Ot]),Wt=u.useMemo(()=>{const je=Object.values(Et).some(ke=>ke&&ke!==""),Oe=ue&&ue.trim()!=="";return!je&&!Oe?e:!e||!zt||zt.length===0?[]:e.filter(ke=>zt.includes(ke.id))},[e,zt,Et,ue]);u.useEffect(()=>{},[N,F]);const kt=Wt||[],Mt=kt.length;u.useEffect(()=>{kt.length!==Ae&&`${kt.length}`},[kt.length,Ae,Mt]);const Ht=u.useCallback((je,Oe)=>{let ke=Oe;if(typeof je=="number"&&Oe===void 0&&(ke=je),typeof ke!="number"){console.error("유효하지 않은 페이지 번호:",ke);return}w(ke),E(ke)},[g,E]),qt=u.useCallback(je=>{if(!je||!je.target||!je.target.value){console.error("아이디바꿔주기내역 행 수 변경 이벤트 오류:",je);return}const Oe=parseInt(je.target.value,10);y(Oe),w(0),z(je)},[x,z]),[Yt,Xt]=u.useState(Date.now());u.useEffect(()=>{Xt(Date.now())},[g,x]);const tn=u.useMemo(()=>!kt||kt.length===0?[]:kt,[kt,g,x,Mt]),Fe=He;return m(vn,{children:[a(Cn,{title:"아이디바꿔주기내역",onDisplayOptionsClick:jt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:()=>alert("아이디바꿔주기내역 새로고침"),sx:{mb:2}}),a(or,{anchorEl:xt,open:ht,onClose:$t,toggleableColumns:St,columnVisibility:Re,onToggleColumn:Tt,onShowAll:gt,onReset:et,hiddenColumnsCount:ft,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"아이디 변경 이력 목록",totalItems:Mt,countLabel:"총 ##count##건의 내역",sequentialPageNumbers:we,togglePageNumberMode:J,hasPinnedColumns:ce,isGridReady:De,toggleColumnPin:Z,searchText:ue,handleSearchChange:le,handleClearSearch:se,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"아이디바꿔주기내역 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:ge,filterValues:H||{},activeFilters:Et||{},filterOptions:T,handleFilterChange:Ft,onFilter:K,onClearFilters:ee,isDateFilterActive:A,handleOpenDateFilter:D,resetDateFilter:B},paginationProps:{count:Mt,page:g,rowsPerPage:x,onPageChange:Ht,onRowsPerPageChange:qt,totalCount:Mt,onExcelDownload:h,onPrint:f}})}),m(j,{sx:{width:"100%",mt:2},ref:t,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",g+1," / ",Math.ceil(Mt/x)," (페이지당 ",x,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Fe,data:tn,checkable:!1,hierarchical:!1,indentMode:!1,checkedItems:p,expandedRows:b,allChecked:P,onCheck:C,onToggleAll:S,onToggleExpand:_,onSort:k,sortConfig:v,page:g,rowsPerPage:x,totalCount:Mt,sequentialPageNumbers:we,draggableColumns:Ut,onColumnOrderChange:ae,dragHandlers:Bt,dragInfo:oe,fixedHeader:!0,maxHeight:n,tableHeaderRef:c,headerStyle:d(),pinnedColumns:G},`username-change-history-table-${Yt}`),a(rr,{resizeHandleProps:l(parseFloat(n)),showIcon:!0,isDragging:s,sx:{mt:1,opacity:s?1:.7,"&:hover":{opacity:1}}})]})]})]})},kR=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,pinnable:!0},{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"datetime",header:"일시",type:"default",width:180,sortable:!0,pinnable:!0},{id:"type",header:"유형",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0,chipProps:e=>e==="로그인"?{color:"success",variant:"filled",size:"small"}:e==="로그아웃"?{color:"warning",variant:"filled",size:"small"}:{color:"default",variant:"filled",size:"small"}},{id:"userId",header:"사용자ID",type:"default",width:120,sortable:!0},{id:"userType",header:"사용자유형",type:"chip",width:120,align:"center",sortable:!0,chipProps:e=>e==="에이전트"?{color:"primary",variant:"outlined",size:"small"}:e==="회원"?{color:"secondary",variant:"outlined",size:"small"}:{color:"default",variant:"outlined",size:"small"}},{id:"ip",header:"IP",type:"default",width:140,sortable:!0},{id:"device",header:"기기",type:"default",width:150,sortable:!0},{id:"location",header:"위치",type:"default",width:180,sortable:!0},{id:"status",header:"상태",type:"chip",width:80,align:"center",sortable:!0,chipProps:e=>e==="성공"?{color:"success",variant:"filled",size:"small"}:e==="실패"?{color:"error",variant:"filled",size:"small"}:{color:"default",variant:"filled",size:"small"}},{id:"content",header:"내용",type:"default",width:300,sortable:!1}],Fue=()=>{On();const{handleRefresh:e}=$a(),[t,n]=u.useState([]),[r,i]=u.useState(!0),[o,s]=u.useState(null),l=u.useCallback(async(fe=!1)=>{var be;try{i(!0),s(null);const Te=await Pe.logs.getAuthLogs();n(((be=Te.data)==null?void 0:be.data)||Te.data||[]),fe&&e("접속로그 목록")}catch(Te){console.error("접속로그 데이터 로드 실패:",Te),s(Te.message||"데이터를 불러오는데 실패했습니다."),n([])}finally{i(!1)}},[e]);u.useEffect(()=>{l()},[l]);const c=u.useCallback(()=>{l(!0)},[l]),{containerRef:d,tableHeight:h,autoHeight:f,toggleAutoHeight:g,setManualHeight:w}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:x,getResizeHandleProps:y}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:fe=>{f&&g(!1),w(`${fe}px`)}}),{indentMode:p,toggleIndentMode:v}=qs(!1),{tableHeaderRef:b,getTableHeaderStyles:P}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),k=u.useCallback(()=>{alert("접속로그 목록을 엑셀로 다운로드합니다.")},[]),C=u.useCallback(()=>{alert("접속로그 목록을 인쇄합니다.")},[]),[S,_]=u.useState(0),[T,I]=u.useState(25),{checkedItems:L,sortConfig:A,expandedRows:D,allChecked:B,handleSort:$,handleCheck:N,handleToggleAll:F,handleToggleExpand:O}=Nn({data:t,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:S,rowsPerPage:T}),R=u.useMemo(()=>[{id:"type",label:"유형",items:[{value:"",label:"전체"},{value:"로그인",label:"로그인"},{value:"로그아웃",label:"로그아웃"}]},{id:"userType",label:"사용자유형",items:[{value:"",label:"전체"},{value:"에이전트",label:"에이전트"},{value:"회원",label:"회원"}]},{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"성공",label:"성공"},{value:"실패",label:"실패"}]}],[]),{activeFilters:E,handleFilterChange:z,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H,dateRange:K,page:ee,rowsPerPage:ge,totalCount:oe,totalPages:G,handlePageChange:Q,handleRowsPerPageChange:te,filteredData:U,displayData:V,filterValues:ae,handleFilter:ne,handleClearFilters:me}=yr({columns:kR,data:t,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{type:"all",userType:"all",status:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:t.length,onExcelDownload:k,onPrint:C}}),{searchText:ue,totalItems:Ae,sequentialPageNumbers:we,hasPinnedColumns:ce,isGridReady:De,handleSearchChange:le,handleClearSearch:se,togglePageNumberMode:J,toggleColumnPin:Z,setGridReady:ie}=Rn({initialTotalItems:t.length,tableId:"authLogsPage",onSearch:fe=>{ee!==0&&Q(0)},onToggleColumnPin:fe=>{fe?Rt():xt()}});u.useEffect(()=>{ie(!0)},[ie]);const{columns:_e,dragInfo:Re,pinnedColumns:He,handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt,updateColumns:et,clearAllPinnedColumns:xt,setDefaultPinnedColumns:Rt}=sr({initialColumns:kR,tableId:"auth_logs_table",initialPinnedColumns:["checkbox","number","datetime","type"],onColumnOrderChange:fe=>{}}),{columnVisibility:ht,visibleColumns:jt,hiddenColumnsCount:$t,toggleableColumns:Ut,toggleColumnVisibility:Bt,showAllColumns:Kt,resetToDefault:Ft}=dr(_e,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"auth_logs_table"}),[Et,Ot]=u.useState(null),zt=!!Et,Wt=u.useCallback(fe=>{Ot(fe)},[]),kt=u.useCallback(()=>{Ot(null)},[]),Mt=!0,Ht={handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt},qt=u.useCallback((fe,be,Te)=>{switch(be){case"type":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.type===Te);case"userType":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.userType===Te);case"status":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.status===Te);case"date":let Ne=[...fe];if(Te.startDate){const Ve=new Date(Te.startDate);Ne=Ne.filter(Ge=>new Date(Ge.datetime)>=Ve)}if(Te.endDate){const Ve=new Date(Te.endDate);Ve.setHours(23,59,59,999),Ne=Ne.filter(Ge=>new Date(Ge.datetime)<=Ve)}return Ne;default:return fe}},[]),Yt=u.useCallback((fe,be)=>{ne({[fe]:be})},[ne]),Xt=u.useMemo(()=>{const fe={...E};return Object.keys(fe).forEach(be=>{fe[be]==="all"&&(fe[be]="")}),fe},[E]),Fe=Dr({data:t,activeFilters:Xt,searchText:ue,isDateFilterActive:q,dateRange:K,filterCallback:qt})||[];u.useEffect(()=>{},[ee,ge]);const je=u.useCallback((fe,be)=>{let Te=be;if(typeof fe=="number"&&be===void 0&&(Te=fe),typeof Te!="number"){console.error("유효하지 않은 페이지 번호:",Te);return}_(Te),Q(Te)},[S,Q]),Oe=u.useCallback(fe=>{if(!fe||!fe.target||!fe.target.value){console.error("접속로그 행 수 변경 이벤트 오류:",fe);return}const be=parseInt(fe.target.value,10);I(be),_(0),te(fe)},[T,te]),[ke,bt]=u.useState(Date.now());u.useEffect(()=>{bt(Date.now())},[S,T]);const it=u.useMemo(()=>!Fe||Fe.length===0?[]:Fe,[Fe]);return r?m(vn,{children:[a(Cn,{title:"접속로그",showAddButton:!1,showRefreshButton:!1,sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3,textAlign:"center"},children:[a(ir,{size:40,sx:{mb:2}}),a(M,{variant:"body1",color:"text.secondary",children:"접속로그 데이터를 불러오는 중..."})]})]}):o?m(vn,{children:[a(Cn,{title:"접속로그",showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:a(Jt,{severity:"error",action:a(M,{variant:"body2",sx:{cursor:"pointer",textDecoration:"underline"},onClick:c,children:"다시 시도"}),children:o})})]}):m(vn,{children:[a(Cn,{title:"접속로그",onDisplayOptionsClick:Wt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(or,{anchorEl:Et,open:zt,onClose:kt,toggleableColumns:Ut,columnVisibility:ht,onToggleColumn:Bt,onShowAll:Kt,onReset:Ft,hiddenColumnsCount:$t,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"접속로그 목록",totalItems:Fe.length,countLabel:"총 ##count##건의 로그",indentMode:p,toggleIndentMode:v,sequentialPageNumbers:we,togglePageNumberMode:J,hasPinnedColumns:ce,isGridReady:De,toggleColumnPin:Z,searchText:ue,handleSearchChange:le,handleClearSearch:se,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"접속로그 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:_e,filterValues:ae||{},activeFilters:Xt||{},filterOptions:R,handleFilterChange:Yt,onFilter:ne,onClearFilters:me,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H},paginationProps:{count:Fe.length,page:S,rowsPerPage:T,onPageChange:je,onRowsPerPageChange:Oe,totalCount:Fe.length,onExcelDownload:k,onPrint:C}})}),m(j,{sx:{width:"100%",mt:2},ref:d,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",S+1," / ",Math.ceil(Fe.length/T)," (페이지당 ",T,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:jt,data:it,checkable:!0,hierarchical:!1,indentMode:p,checkedItems:L,expandedRows:D,allChecked:B,onCheck:N,onToggleAll:F,onToggleExpand:O,onSort:$,sortConfig:A,page:S,rowsPerPage:T,totalCount:Fe.length,sequentialPageNumbers:we,draggableColumns:Mt,onColumnOrderChange:et,dragHandlers:Ht,dragInfo:Re,fixedHeader:!0,maxHeight:h,tableHeaderRef:b,headerStyle:P(),pinnedColumns:He},`auth-logs-table-${ke}`),a(rr,{resizeHandleProps:y(parseFloat(h)),showIcon:!0,isDragging:x,sx:{mt:1,opacity:x?1:.7,"&:hover":{opacity:1}}})]})]})]})},_R=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,pinnable:!0},{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"changeDate",header:"변경일시",type:"default",width:180,sortable:!0,pinnable:!0},{id:"changedBy",header:"변경자",type:"default",width:120,sortable:!0,pinnable:!0},{id:"targetMember",header:"대상회원",type:"default",width:120,sortable:!0,pinnable:!0},{id:"changeItem",header:"변경항목",type:"chip",width:100,align:"center",sortable:!0,chipProps:e=>({color:{닉네임:"primary",비밀번호:"secondary",은행정보:"info",전화번호:"default",이메일:"default",레벨:"warning",상태:"error",보유금:"success",게임머니:"success"}[e]||"default",variant:"outlined",size:"small"})},{id:"oldValue",header:"이전값",type:"default",width:200,sortable:!1},{id:"newValue",header:"새값",type:"default",width:200,sortable:!1},{id:"ip",header:"IP",type:"default",width:140,sortable:!0},{id:"reason",header:"변경사유",type:"default",width:200,sortable:!1},{id:"content",header:"내용",type:"default",width:300,sortable:!1}],zue=()=>{On();const{handleRefresh:e}=$a(),[t,n]=u.useState([]),[r,i]=u.useState(!0),[o,s]=u.useState(null),l=u.useCallback(async(fe=!1)=>{var be;try{i(!0),s(null);const Te=await Pe.logs.getMemberChanges();n(((be=Te.data)==null?void 0:be.data)||Te.data||[]),fe&&e("회원변경로그 목록")}catch(Te){console.error("회원변경로그 데이터 로드 실패:",Te),s(Te.message||"데이터를 불러오는데 실패했습니다."),n([])}finally{i(!1)}},[e]);u.useEffect(()=>{l()},[l]);const c=u.useCallback(()=>{l(!0)},[l]),{containerRef:d,tableHeight:h,autoHeight:f,toggleAutoHeight:g,setManualHeight:w}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:x,getResizeHandleProps:y}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:fe=>{f&&g(!1),w(`${fe}px`)}}),{indentMode:p,toggleIndentMode:v}=qs(!1),{tableHeaderRef:b,getTableHeaderStyles:P}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),k=u.useCallback(()=>{alert("회원변경로그 목록을 엑셀로 다운로드합니다.")},[]),C=u.useCallback(()=>{alert("회원변경로그 목록을 인쇄합니다.")},[]),[S,_]=u.useState(0),[T,I]=u.useState(25),{checkedItems:L,sortConfig:A,expandedRows:D,allChecked:B,handleSort:$,handleCheck:N,handleToggleAll:F,handleToggleExpand:O}=Nn({data:t,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:S,rowsPerPage:T}),R=u.useMemo(()=>[{id:"changeItem",label:"변경항목",items:[{value:"",label:"전체"},{value:"닉네임",label:"닉네임"},{value:"비밀번호",label:"비밀번호"},{value:"은행정보",label:"은행정보"},{value:"전화번호",label:"전화번호"},{value:"이메일",label:"이메일"},{value:"레벨",label:"레벨"},{value:"상태",label:"상태"},{value:"보유금",label:"보유금"},{value:"게임머니",label:"게임머니"}]},{id:"changedBy",label:"변경자",items:[{value:"",label:"전체"},{value:"admin",label:"관리자"},{value:"system",label:"시스템"},{value:"user",label:"본인"}]}],[]),{activeFilters:E,handleFilterChange:z,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H,dateRange:K,page:ee,rowsPerPage:ge,totalCount:oe,totalPages:G,handlePageChange:Q,handleRowsPerPageChange:te,filteredData:U,displayData:V,filterValues:ae,handleFilter:ne,handleClearFilters:me}=yr({columns:_R,data:t,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{changeItem:"all",changedBy:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:t.length,onExcelDownload:k,onPrint:C}}),{searchText:ue,totalItems:Ae,sequentialPageNumbers:we,hasPinnedColumns:ce,isGridReady:De,handleSearchChange:le,handleClearSearch:se,togglePageNumberMode:J,toggleColumnPin:Z,setGridReady:ie}=Rn({initialTotalItems:t.length,tableId:"memberChangesPage",onSearch:fe=>{ee!==0&&Q(0)},onToggleColumnPin:fe=>{fe?Rt():xt()}});u.useEffect(()=>{ie(!0)},[ie]);const{columns:_e,dragInfo:Re,pinnedColumns:He,handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt,updateColumns:et,clearAllPinnedColumns:xt,setDefaultPinnedColumns:Rt}=sr({initialColumns:_R,tableId:"member_changes_table",initialPinnedColumns:["checkbox","number","changeDate","targetMember"],onColumnOrderChange:fe=>{}}),{columnVisibility:ht,visibleColumns:jt,hiddenColumnsCount:$t,toggleableColumns:Ut,toggleColumnVisibility:Bt,showAllColumns:Kt,resetToDefault:Ft}=dr(_e,{defaultHiddenColumns:[],alwaysVisibleColumns:["checkbox"],tableId:"member_changes_table"}),[Et,Ot]=u.useState(null),zt=!!Et,Wt=u.useCallback(fe=>{Ot(fe)},[]),kt=u.useCallback(()=>{Ot(null)},[]),Mt=!0,Ht={handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt},qt=u.useCallback((fe,be,Te)=>{switch(be){case"changeItem":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.changeItem===Te);case"changedBy":return Te==="all"||Te===""?fe:Te==="admin"?fe.filter(Ve=>Ve.changedBy.startsWith("admin")||Ve.changedBy.startsWith("manager")):Te==="system"?fe.filter(Ve=>Ve.changedBy==="시스템"):Te==="user"?fe.filter(Ve=>Ve.changedBy==="본인"):fe;case"date":let Ne=[...fe];if(Te.startDate){const Ve=new Date(Te.startDate);Ne=Ne.filter(Ge=>new Date(Ge.changeDate)>=Ve)}if(Te.endDate){const Ve=new Date(Te.endDate);Ve.setHours(23,59,59,999),Ne=Ne.filter(Ge=>new Date(Ge.changeDate)<=Ve)}return Ne;default:return fe}},[]),Yt=u.useCallback((fe,be)=>{ne({[fe]:be})},[ne]),Xt=u.useMemo(()=>{const fe={...E};return Object.keys(fe).forEach(be=>{fe[be]==="all"&&(fe[be]="")}),fe},[E]),Fe=Dr({data:t,activeFilters:Xt,searchText:ue,isDateFilterActive:q,dateRange:K,filterCallback:qt})||[];u.useEffect(()=>{},[ee,ge]);const je=u.useCallback((fe,be)=>{let Te=be;if(typeof fe=="number"&&be===void 0&&(Te=fe),typeof Te!="number"){console.error("유효하지 않은 페이지 번호:",Te);return}_(Te),Q(Te)},[S,Q]),Oe=u.useCallback(fe=>{if(!fe||!fe.target||!fe.target.value){console.error("회원변경로그 행 수 변경 이벤트 오류:",fe);return}const be=parseInt(fe.target.value,10);I(be),_(0),te(fe)},[T,te]),[ke,bt]=u.useState(Date.now());u.useEffect(()=>{bt(Date.now())},[S,T]);const it=u.useMemo(()=>!Fe||Fe.length===0?[]:Fe,[Fe]);return r?m(vn,{children:[a(Cn,{title:"회원변경로그",showAddButton:!1,showRefreshButton:!1,sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3,textAlign:"center"},children:[a(ir,{size:40,sx:{mb:2}}),a(M,{variant:"body1",color:"text.secondary",children:"회원변경로그 데이터를 불러오는 중..."})]})]}):o?m(vn,{children:[a(Cn,{title:"회원변경로그",showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:a(Jt,{severity:"error",action:a(M,{variant:"body2",sx:{cursor:"pointer",textDecoration:"underline"},onClick:c,children:"다시 시도"}),children:o})})]}):m(vn,{children:[a(Cn,{title:"회원변경로그",onDisplayOptionsClick:Wt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(or,{anchorEl:Et,open:zt,onClose:kt,toggleableColumns:Ut,columnVisibility:ht,onToggleColumn:Bt,onShowAll:Kt,onReset:Ft,hiddenColumnsCount:$t,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"회원변경로그 목록",totalItems:Fe.length,countLabel:"총 ##count##건의 변경로그",indentMode:p,toggleIndentMode:v,sequentialPageNumbers:we,togglePageNumberMode:J,hasPinnedColumns:ce,isGridReady:De,toggleColumnPin:Z,searchText:ue,handleSearchChange:le,handleClearSearch:se,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"회원변경로그 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:_e,filterValues:ae||{},activeFilters:Xt||{},filterOptions:R,handleFilterChange:Yt,onFilter:ne,onClearFilters:me,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H},paginationProps:{count:Fe.length,page:S,rowsPerPage:T,onPageChange:je,onRowsPerPageChange:Oe,totalCount:Fe.length,onExcelDownload:k,onPrint:C}})}),m(j,{sx:{width:"100%",mt:2},ref:d,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",S+1," / ",Math.ceil(Fe.length/T)," (페이지당 ",T,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:jt,data:it,checkable:!0,hierarchical:!1,indentMode:p,checkedItems:L,expandedRows:D,allChecked:B,onCheck:N,onToggleAll:F,onToggleExpand:O,onSort:$,sortConfig:A,page:S,rowsPerPage:T,totalCount:Fe.length,sequentialPageNumbers:we,draggableColumns:Mt,onColumnOrderChange:et,dragHandlers:Ht,dragInfo:Re,fixedHeader:!0,maxHeight:h,tableHeaderRef:b,headerStyle:P(),pinnedColumns:He},`member-changes-table-${ke}`),a(rr,{resizeHandleProps:y(parseFloat(h)),showIcon:!0,isDragging:x,sx:{mt:1,opacity:x?1:.7,"&:hover":{opacity:1}}})]})]})]})},TR=[{id:"checkbox",type:"checkbox",width:50,sortable:!1,pinnable:!0},{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"datetime",header:"일시",type:"default",width:180,sortable:!0,pinnable:!0},{id:"level",header:"로그레벨",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0,chipProps:e=>({...{INFO:{color:"info",variant:"filled"},WARNING:{color:"warning",variant:"filled"},ERROR:{color:"error",variant:"filled"},CRITICAL:{color:"error",variant:"filled",sx:{fontWeight:"bold"}}}[e]||{color:"default",variant:"filled"},size:"small"})},{id:"category",header:"카테고리",type:"chip",width:120,align:"center",sortable:!0,chipProps:e=>({color:{시스템:"primary",보안:"error",데이터베이스:"secondary",API:"info",결제:"success",게임:"warning",성능:"default"}[e]||"default",variant:"outlined",size:"small"})},{id:"source",header:"소스",type:"default",width:150,sortable:!0},{id:"ip",header:"IP",type:"default",width:140,sortable:!0},{id:"user",header:"사용자",type:"default",width:120,sortable:!0},{id:"action",header:"액션",type:"default",width:200,sortable:!0},{id:"status",header:"상태",type:"chip",width:80,align:"center",sortable:!0,chipProps:e=>({...{처리중:{color:"warning",variant:"filled"},완료:{color:"success",variant:"filled"},실패:{color:"error",variant:"filled"},대기:{color:"default",variant:"filled"}}[e]||{color:"default",variant:"filled"},size:"small"})},{id:"content",header:"내용",type:"default",width:400,sortable:!1},{id:"details",header:"상세내용",type:"default",width:500,sortable:!1}],Nue=()=>{On();const{handleRefresh:e}=$a(),[t,n]=u.useState([]),[r,i]=u.useState(!0),[o,s]=u.useState(null),l=u.useCallback(async(fe=!1)=>{var be;try{i(!0),s(null);const Te=await Pe.logs.getSystemLogs();n(((be=Te.data)==null?void 0:be.data)||Te.data||[]),fe&&e("시스템로그 목록")}catch(Te){console.error("시스템로그 데이터 로드 실패:",Te),s(Te.message||"데이터를 불러오는데 실패했습니다."),n([])}finally{i(!1)}},[e]);u.useEffect(()=>{l()},[l]);const c=u.useCallback(()=>{l(!0)},[l]),{containerRef:d,tableHeight:h,autoHeight:f,toggleAutoHeight:g,setManualHeight:w}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:x,getResizeHandleProps:y}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:fe=>{f&&g(!1),w(`${fe}px`)}}),{indentMode:p,toggleIndentMode:v}=qs(!1),{tableHeaderRef:b,getTableHeaderStyles:P}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),k=u.useCallback(()=>{alert("시스템로그 목록을 엑셀로 다운로드합니다.")},[]),C=u.useCallback(()=>{alert("시스템로그 목록을 인쇄합니다.")},[]),[S,_]=u.useState(0),[T,I]=u.useState(25),{checkedItems:L,sortConfig:A,expandedRows:D,allChecked:B,handleSort:$,handleCheck:N,handleToggleAll:F,handleToggleExpand:O}=Nn({data:t,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:S,rowsPerPage:T}),R=u.useMemo(()=>[{id:"level",label:"로그레벨",items:[{value:"",label:"전체"},{value:"INFO",label:"INFO"},{value:"WARNING",label:"WARNING"},{value:"ERROR",label:"ERROR"},{value:"CRITICAL",label:"CRITICAL"}]},{id:"category",label:"카테고리",items:[{value:"",label:"전체"},{value:"시스템",label:"시스템"},{value:"보안",label:"보안"},{value:"데이터베이스",label:"데이터베이스"},{value:"API",label:"API"},{value:"결제",label:"결제"},{value:"게임",label:"게임"},{value:"성능",label:"성능"}]},{id:"status",label:"상태",items:[{value:"",label:"전체"},{value:"처리중",label:"처리중"},{value:"완료",label:"완료"},{value:"실패",label:"실패"},{value:"대기",label:"대기"}]}],[]),{activeFilters:E,handleFilterChange:z,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H,dateRange:K,page:ee,rowsPerPage:ge,totalCount:oe,totalPages:G,handlePageChange:Q,handleRowsPerPageChange:te,filteredData:U,displayData:V,filterValues:ae,handleFilter:ne,handleClearFilters:me}=yr({columns:TR,data:t,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{level:"all",category:"all",status:"all"}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:t.length,onExcelDownload:k,onPrint:C}}),{searchText:ue,totalItems:Ae,sequentialPageNumbers:we,hasPinnedColumns:ce,isGridReady:De,handleSearchChange:le,handleClearSearch:se,togglePageNumberMode:J,toggleColumnPin:Z,setGridReady:ie}=Rn({initialTotalItems:t.length,tableId:"systemLogsPage",onSearch:fe=>{ee!==0&&Q(0)},onToggleColumnPin:fe=>{fe?Rt():xt()}});u.useEffect(()=>{ie(!0)},[ie]);const{columns:_e,dragInfo:Re,pinnedColumns:He,handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt,updateColumns:et,clearAllPinnedColumns:xt,setDefaultPinnedColumns:Rt}=sr({initialColumns:TR,tableId:"system_logs_table",initialPinnedColumns:["checkbox","number","datetime","level"],onColumnOrderChange:fe=>{}}),{columnVisibility:ht,visibleColumns:jt,hiddenColumnsCount:$t,toggleableColumns:Ut,toggleColumnVisibility:Bt,showAllColumns:Kt,resetToDefault:Ft}=dr(_e,{defaultHiddenColumns:["details"],alwaysVisibleColumns:["checkbox"],tableId:"system_logs_table"}),[Et,Ot]=u.useState(null),zt=!!Et,Wt=u.useCallback(fe=>{Ot(fe)},[]),kt=u.useCallback(()=>{Ot(null)},[]),Mt=!0,Ht={handleDragStart:ft,handleDragEnd:St,handleDragOver:Tt,handleDrop:gt},qt=u.useCallback((fe,be,Te)=>{switch(be){case"level":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.level===Te);case"category":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.category===Te);case"status":return Te==="all"||Te===""?fe:fe.filter(Ve=>Ve.status===Te);case"date":let Ne=[...fe];if(Te.startDate){const Ve=new Date(Te.startDate);Ne=Ne.filter(Ge=>new Date(Ge.datetime)>=Ve)}if(Te.endDate){const Ve=new Date(Te.endDate);Ve.setHours(23,59,59,999),Ne=Ne.filter(Ge=>new Date(Ge.datetime)<=Ve)}return Ne;default:return fe}},[]),Yt=u.useCallback((fe,be)=>{ne({[fe]:be})},[ne]),Xt=u.useMemo(()=>{const fe={...E};return Object.keys(fe).forEach(be=>{fe[be]==="all"&&(fe[be]="")}),fe},[E]),Fe=Dr({data:t,activeFilters:Xt,searchText:ue,isDateFilterActive:q,dateRange:K,filterCallback:qt})||[];u.useEffect(()=>{},[ee,ge]);const je=u.useCallback((fe,be)=>{let Te=be;if(typeof fe=="number"&&be===void 0&&(Te=fe),typeof Te!="number"){console.error("유효하지 않은 페이지 번호:",Te);return}_(Te),Q(Te)},[S,Q]),Oe=u.useCallback(fe=>{if(!fe||!fe.target||!fe.target.value){console.error("시스템로그 행 수 변경 이벤트 오류:",fe);return}const be=parseInt(fe.target.value,10);I(be),_(0),te(fe)},[T,te]),[ke,bt]=u.useState(Date.now());u.useEffect(()=>{bt(Date.now())},[S,T]);const it=u.useMemo(()=>!Fe||Fe.length===0?[]:Fe,[Fe]);return r?m(vn,{children:[a(Cn,{title:"시스템로그",showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:m(j,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:[a(ir,{}),a(M,{sx:{ml:2},children:"시스템로그를 불러오는 중..."})]})})]}):o?m(vn,{children:[a(Cn,{title:"시스템로그",showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(Jt,{severity:"error",sx:{mb:2},children:o}),a(j,{sx:{display:"flex",justifyContent:"center"},children:a(M,{color:"text.secondary",children:"새로고침 버튼을 클릭하여 다시 시도해주세요."})})]})]}):m(vn,{children:[a(Cn,{title:"시스템로그",onDisplayOptionsClick:Wt,showAddButton:!1,showRefreshButton:!0,onRefreshClick:c,sx:{mb:2}}),a(or,{anchorEl:Et,open:zt,onClose:kt,toggleableColumns:Ut,columnVisibility:ht,onToggleColumn:Bt,onShowAll:Kt,onReset:Ft,hiddenColumnsCount:$t,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"시스템로그 목록",totalItems:Fe.length,countLabel:"총 ##count##건의 로그",indentMode:p,toggleIndentMode:v,sequentialPageNumbers:we,togglePageNumberMode:J,hasPinnedColumns:ce,isGridReady:De,toggleColumnPin:Z,searchText:ue,handleSearchChange:le,handleClearSearch:se,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"시스템로그 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:_e,filterValues:ae||{},activeFilters:Xt||{},filterOptions:R,handleFilterChange:Yt,onFilter:ne,onClearFilters:me,isDateFilterActive:q,handleOpenDateFilter:X,resetDateFilter:H},paginationProps:{count:Fe.length,page:S,rowsPerPage:T,onPageChange:je,onRowsPerPageChange:Oe,totalCount:Fe.length,onExcelDownload:k,onPrint:C}})}),m(j,{sx:{width:"100%",mt:2},ref:d,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",S+1," / ",Math.ceil(Fe.length/T)," (페이지당 ",T,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:jt,data:it,checkable:!0,hierarchical:!1,indentMode:p,checkedItems:L,expandedRows:D,allChecked:B,onCheck:N,onToggleAll:F,onToggleExpand:O,onSort:$,sortConfig:A,page:S,rowsPerPage:T,totalCount:Fe.length,sequentialPageNumbers:we,draggableColumns:Mt,onColumnOrderChange:et,dragHandlers:Ht,dragInfo:Re,fixedHeader:!0,maxHeight:h,tableHeaderRef:b,headerStyle:P(),pinnedColumns:He},`system-logs-table-${ke}`),a(rr,{resizeHandleProps:y(parseFloat(h)),showIcon:!0,isDragging:x,sx:{mt:1,opacity:x?1:.7,"&:hover":{opacity:1}}})]})]})]})},Bue=[{id:"number",type:"number",header:"No.",width:70,align:"center",pinnable:!0},{id:"userId",header:"아이디(닉네임)",type:"multiline",width:150,sortable:!0,clickable:!0,pinnable:!0},{id:"superAgent",header:"상위에이전트",type:"custom",cellRenderer:"parentChips",width:200,sortable:!1,pinnable:!0},{id:"amount",header:"금액",type:"currency",width:120,align:"right",sortable:!0,pinnable:!0},{id:"depositorName",header:"입금자명",type:"default",width:120,align:"center",sortable:!0,pinnable:!0},{id:"status",header:"상태",type:"chip",width:100,align:"center",sortable:!0,pinnable:!0},{id:"createdAt",header:"신청시간",type:"default",width:150,align:"center",sortable:!0,pinnable:!0},{id:"actions",header:"액션",type:"custom",cellRenderer:"actions",width:150,align:"center",sortable:!1,pinnable:!1}],Hue=[{value:"",label:"전체"},{value:"pending",label:"요청중"},{value:"waiting",label:"대기"},{value:"approved",label:"승인"},{value:"rejected",label:"비승인"}],Wue=()=>{On();const{socketService:e}=ni(),{handleRefresh:t}=$a(),[n,r]=u.useState([]),[i,o]=u.useState(!1),[s,l]=u.useState(null),[c,d]=u.useState({}),h=u.useRef(0),[f,g]=u.useState(!1),[w,x]=u.useState(null),[y,p]=u.useState(""),v=u.useCallback(async()=>{try{o(!0),l(null);const he=(await Qi.getInquiries()).data.map((ze,de)=>({id:ze.id,number:de+1,userId:`${ze.username}
${ze.nickname||""}`,superAgent:ze.parentAgents||[],amount:ze.amount,depositorName:ze.depositor_name,status:{label:b(ze.status),color:P(ze.status),value:ze.status},createdAt:new Date(ze.created_at).toLocaleString(),rejectReason:ze.reject_reason,originalData:ze}));r(he)}catch(Y){console.error("입금 문의 데이터 로드 오류:",Y),l("데이터를 불러오는 중 오류가 발생했습니다.")}finally{o(!1)}},[]),b=Y=>{switch(Y){case"pending":return"요청중";case"waiting":return"대기";case"approved":return"승인";case"rejected":return"비승인";default:return Y}},P=Y=>{switch(Y){case"pending":return"warning";case"waiting":return"info";case"approved":return"success";case"rejected":return"error";default:return"default"}},k=u.useCallback(async(Y,he)=>{if(he==="rejected"){x(Y),g(!0);return}try{await Qi.updateStatus(Y.id,{status:he}),v(),alert(`입금 문의가 ${b(he)} 처리되었습니다.`)}catch(ze){console.error("상태 변경 오류:",ze),alert("상태 변경 중 오류가 발생했습니다.")}},[v]),C=u.useCallback(async()=>{if(!w||!y.trim()){alert("비승인 사유를 입력해주세요.");return}try{await Qi.updateStatus(w.id,{status:"rejected",rejectReason:y.trim()}),g(!1),x(null),p(""),v(),alert("입금 문의가 비승인 처리되었습니다.")}catch(Y){console.error("비승인 처리 오류:",Y),alert("비승인 처리 중 오류가 발생했습니다.")}},[w,y,v]),S=u.useCallback(Y=>{const he=Y.originalData;return m(j,{sx:{display:"flex",gap:.5},children:[a(Ct,{size:"small",color:"success",onClick:()=>k(Y,"approved"),disabled:he.status==="approved",title:"승인",children:a(ul,{fontSize:"small"})}),a(Ct,{size:"small",color:"info",onClick:()=>k(Y,"waiting"),disabled:he.status==="waiting",title:"대기",children:a(wz,{fontSize:"small"})}),a(Ct,{size:"small",color:"error",onClick:()=>k(Y,"rejected"),disabled:he.status==="rejected",title:"비승인",children:a(mf,{fontSize:"small"})})]})},[k]);u.useEffect(()=>{v()},[v]),u.useEffect(()=>{if(!e)return;const Y=he=>{if(he.sequence<=h.current){console.warn("⚠️ 중복 이벤트 감지:",he.sequence);return}h.current=he.sequence,(he.type==="deposit:inquiry:new"||he.type==="deposit:inquiry:status:changed")&&setTimeout(()=>{v()},500)};return e.on("deposit:inquiry:new",Y),e.on("deposit:inquiry:status:changed",Y),()=>{e.off("deposit:inquiry:new",Y),e.off("deposit:inquiry:status:changed",Y)}},[e,v]);const{containerRef:_,tableHeight:T,autoHeight:I,toggleAutoHeight:L,setManualHeight:A}=lr({defaultHeight:"500px",defaultAutoHeight:!0,minHeight:300,bottomMargin:100}),{isDragging:D,getResizeHandleProps:B}=cr({minHeight:200,maxHeight:null,useViewportLimit:!0,viewportMargin:50,onResize:Y=>{I&&L(!1),A(`${Y}px`)}}),{tableHeaderRef:$,getTableHeaderStyles:N}=fr({zIndex:10,boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}),F=u.useCallback(()=>{alert("입금 문의 내역을 엑셀로 다운로드합니다.")},[]),O=u.useCallback(()=>{alert("입금 문의 내역을 인쇄합니다.")},[]),[R,E]=u.useState(0),[z,q]=u.useState(25),{checkedItems:X,sortConfig:H,expandedRows:K,allChecked:ee,handleSort:ge,handleCheck:oe,handleToggleAll:G,handleToggleExpand:Q}=Nn({data:n,initialSort:{key:null,direction:"asc"},initialCheckedItems:{},initialExpandedRows:{},indentMode:!1,page:R,rowsPerPage:z}),te=u.useMemo(()=>Bue.map(Y=>Y.id==="actions"?{...Y,cellRenderer:S}:Y),[S]),U=u.useMemo(()=>[{id:"status",label:"상태",items:Hue}],[]),{activeFilters:V,handleFilterChange:ae,isDateFilterActive:ne,isDateFilterOpen:me,dateFilterAnchorEl:ue,handleOpenDateFilter:Ae,handleCloseDateFilter:we,handleDateRangeChange:ce,resetDateFilter:De,dateRange:le,page:se,rowsPerPage:J,totalCount:Z,totalPages:ie,handlePageChange:_e,handleRowsPerPageChange:Re,filteredData:He,displayData:ft,filterValues:St,handleFilter:Tt,handleClearFilters:gt}=yr({columns:te,data:n,defaultRowsPerPage:25,hierarchical:!1,filterOptions:{initialFilters:{status:""}},paginationOptions:{initialPage:0,initialRowsPerPage:25,totalItems:n.length,onExcelDownload:F,onPrint:O}}),{searchText:et,totalItems:xt,sequentialPageNumbers:Rt,hasPinnedColumns:ht,isGridReady:jt,handleSearchChange:$t,handleClearSearch:Ut,togglePageNumberMode:Bt,toggleColumnPin:Kt,setGridReady:Ft}=Rn({initialTotalItems:n.length,onSearch:Y=>{se!==0&&_e(0)},onToggleColumnPin:Y=>{}});u.useEffect(()=>{Ft(!0)},[Ft]);const{columns:Et,dragInfo:Ot,pinnedColumns:zt,handleDragStart:Wt,handleDragEnd:kt,handleDragOver:Mt,handleDrop:Ht,updateColumns:qt}=sr({initialColumns:te,tableId:"deposit_inquiries_table",onColumnOrderChange:Y=>{}}),{columnVisibility:Yt,visibleColumns:Xt,hiddenColumnsCount:tn,toggleableColumns:Fe,toggleColumnVisibility:je,showAllColumns:Oe,resetToDefault:ke}=dr(Et,{defaultHiddenColumns:[],alwaysVisibleColumns:[],tableId:"deposit_inquiries_table"}),[bt,it]=u.useState(null),fe=!!bt,be=u.useCallback(Y=>{it(Y)},[]),Te=u.useCallback(()=>{it(null)},[]),Ne=!0,Ve={handleDragStart:Wt,handleDragEnd:kt,handleDragOver:Mt,handleDrop:Ht},Ge=u.useCallback((Y,he,ze)=>{switch(he){case"status":return ze===""||ze==="all"?Y:Y.filter(de=>de.status.value===ze);default:return Y}},[]),At=u.useCallback((Y,he)=>{ae(Y,he)},[ae]),Qe=u.useMemo(()=>{const Y={...V};return Object.keys(Y).forEach(he=>{Y[he]==="all"&&(Y[he]="")}),Y},[V]),Ie=Dr({data:n,activeFilters:Qe,searchText:et,isDateFilterActive:!1,dateRange:null,filterCallback:Ge}),Xe=u.useMemo(()=>{const Y=Object.values(Qe).some(ze=>ze&&ze!==""),he=et&&et.trim()!=="";return!Y&&!he?n:!Ie||Ie.length===0?[]:Ie},[n,Ie,Qe,et]),ve=Xe.length,at=u.useCallback((Y,he)=>{let ze=he;if(typeof Y=="number"&&he===void 0&&(ze=Y),typeof ze!="number"){console.error("유효하지 않은 페이지 번호:",ze);return}E(ze),_e(ze)},[R,_e]),We=u.useCallback(Y=>{if(!Y||!Y.target||!Y.target.value){console.error("입금 문의 행 수 변경 이벤트 오류:",Y);return}const he=parseInt(Y.target.value,10);q(he),E(0),Re(Y)},[z,Re]),[xe,qe]=u.useState(Date.now());u.useEffect(()=>{qe(Date.now())},[R,z]);const Ee=u.useMemo(()=>!Xe||Xe.length===0?[]:Xe,[Xe,R,z,ve]);return m(vn,{children:[a(Cn,{title:"입금 문의 관리",onDisplayOptionsClick:be,showAddButton:!1,showRefreshButton:!0,onRefreshClick:v,sx:{mb:2}}),a(or,{anchorEl:bt,open:fe,onClose:Te,toggleableColumns:Fe,columnVisibility:Yt,onToggleColumn:je,onShowAll:Oe,onReset:ke,hiddenColumnsCount:tn,menuWidth:"350px"}),m(rt,{elevation:1,sx:{p:3,borderRadius:2,mb:3},children:[a(gn,{title:"입금 문의 목록",totalItems:ve,countLabel:"총 ##count##건의 문의",sequentialPageNumbers:Rt,togglePageNumberMode:Bt,hasPinnedColumns:ht,isGridReady:jt,toggleColumnPin:Kt,searchText:et,handleSearchChange:$t,handleClearSearch:Ut,showIndentToggle:!1,showPageNumberToggle:!0,showColumnPinToggle:!0,showSearch:!0,searchPlaceholder:"입금 문의 검색...",sx:{mb:2}}),a(j,{sx:{width:"100%"},children:a(Vn,{filterProps:{columns:Et,filterValues:St||{},activeFilters:Qe||{},filterOptions:U,handleFilterChange:At,onFilter:Tt,onClearFilters:gt,isDateFilterActive:!1,handleOpenDateFilter:null,resetDateFilter:null},paginationProps:{count:ve,page:R,rowsPerPage:z,onPageChange:at,onRowsPerPageChange:We,totalCount:ve,onExcelDownload:F,onPrint:O}})}),m(j,{sx:{width:"100%",mt:2},ref:_,children:[m(M,{variant:"body2",sx:{mb:1,color:"text.secondary"},children:["현재 페이지: ",R+1," / ",Math.ceil(ve/z)," (페이지당 ",z,"행)"," - 컬럼을 드래그하여 순서를 변경할 수 있습니다."]}),a(An,{columns:Xt,data:Ee,checkable:!0,hierarchical:!1,indentMode:!1,checkedItems:X,expandedRows:K,allChecked:ee,onCheck:oe,onToggleAll:G,onToggleExpand:Q,onSort:ge,sortConfig:H,page:R,rowsPerPage:z,totalCount:ve,sequentialPageNumbers:Rt,draggableColumns:Ne,onColumnOrderChange:qt,dragHandlers:Ve,dragInfo:Ot,fixedHeader:!0,maxHeight:T,tableHeaderRef:$,headerStyle:N(),pinnedColumns:zt},`deposit-inquiries-table-${xe}`),a(rr,{resizeHandleProps:B(parseFloat(T)),showIcon:!0,isDragging:D,sx:{mt:1,opacity:D?1:.7,"&:hover":{opacity:1}}})]})]}),m(Yn,{open:f,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,children:[a(Zn,{children:"비승인 사유 입력"}),a(Kn,{children:a($e,{autoFocus:!0,margin:"dense",label:"비승인 사유",fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:y,onChange:Y=>p(Y.target.value),placeholder:"비승인 사유를 입력해주세요."})}),m(nr,{children:[a(Se,{onClick:()=>g(!1),children:"취소"}),a(Se,{onClick:C,variant:"contained",color:"error",children:"비승인 처리"})]})]})]})};var Ou={},IR;function que(){if(IR)return Ou;IR=1;var e=ln();Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.default=void 0;var t=e(un()),n=cn();return Ou.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),Ou}var Uue=que();const Vue=vt(Uue);var Au={},OR;function Gue(){if(OR)return Au;OR=1;var e=ln();Object.defineProperty(Au,"__esModule",{value:!0}),Au.default=void 0;var t=e(un()),n=cn();return Au.default=(0,t.default)((0,n.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4"),Au}var Kue=Gue();const Yue=vt(Kue);var Du={},AR;function Xue(){if(AR)return Du;AR=1;var e=ln();Object.defineProperty(Du,"__esModule",{value:!0}),Du.default=void 0;var t=e(un()),n=cn();return Du.default=(0,t.default)((0,n.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7"),Du}var Jue=Xue();const Que=vt(Jue),DR=()=>{const{mode:e,toggleTheme:t}=O6();return a(Fn,{title:e==="light"?"다크 모드로 전환":"라이트 모드로 전환",children:a(Ct,{onClick:t,color:"inherit","aria-label":"테마 변경",sx:{transition:"all 0.3s","&:hover":{transform:"rotate(30deg)"}},children:e==="light"?a(Yue,{}):a(Que,{})})})},Jj={BASE_URL:"https://api.honorlink.org/api",AGENT_TOKEN:"VB7pHjG9LXktwbvpc7hifjaKK7pymVt2LPnN3IqDd63f6b29"},Qj=Ps.create({baseURL:Jj.BASE_URL,headers:{"Content-Type":"application/json"},timeout:3e4});Qj.interceptors.request.use(e=>(e.headers.Authorization=`Bearer ${Jj.AGENT_TOKEN}`,e),e=>Promise.reject(e));Qj.interceptors.response.use(e=>e,e=>Promise.reject(e));class Zue{constructor(){this.balance=0,this.listeners=[],this.updateInterval=null,this.fetchCount=0,this.lastFetchTime=0}addListener(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}notifyListeners(){this.listeners.forEach(t=>t(this.balance))}async fetchBalance(){var t;try{const n=Date.now();if(n-this.lastFetchTime<1e3){if(this.fetchCount++,this.fetchCount>5)return console.error("⚠️ API 잔액 조회 무한 루프 감지! 중단합니다."),this.balance}else this.fetchCount=0;this.lastFetchTime=n;const i=(t=D1.getState().auth)==null?void 0:t.user;if(i==null||i.username,i==null||i.agent_level_id,!i)return this.balance=0,this.notifyListeners(),this.balance;i.agent_level_id;const o=await Pe.balance.get();return o.data,o.data.error,o.data.error,o.data.error===!1||o.data.success===!0?(this.balance=o.data.balance||0,this.notifyListeners(),this.balance,this.balance):(console.error("❌ API 잔액 조회 실패:",{error:o.data.error,msg:o.data.msg,full_response:o.data}),this.balance=o.data.balance||0,this.notifyListeners(),this.balance)}catch{return this.balance=0,this.notifyListeners(),this.balance}}startPolling(t=3e4){this.updateInterval||(this.fetchBalance(),this.updateInterval=setInterval(()=>{this.fetchBalance()},t))}stopPolling(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}getBalance(){return this.balance}formatBalance(t){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(t)}}const Ai=new Zue,Zj=({handleDrawerToggle:e})=>{On();const t=Kr(),n=mo(),r=lg();zn(FB);const i=zn(a5),o=zn(r5),s=zn(I1),l=zn(ge=>ge.auth.user),{hasPermission:c}=zi(),{socketService:d}=ni(),[h,f]=u.useState(null),[g,w]=u.useState(null),[x,y]=u.useState(null),[p,v]=u.useState(!1),[b,P]=u.useState(new Date),[k,C]=u.useState(0),[S,_]=u.useState(!0),[T,I]=u.useState(!1),L=Ce.useMemo(()=>Object.values(i).reduce((ge,oe)=>ge+oe.requests,0),[i]),A=Ce.useMemo(()=>Object.values(i).reduce((ge,oe)=>ge+oe.pending,0),[i]);u.useEffect(()=>{const ge=setInterval(()=>{P(new Date)},1e3);return()=>clearInterval(ge)},[]),u.useEffect(()=>{if((l==null?void 0:l.agent_level_id)===1||(l==null?void 0:l.agent_level_id)===999||!c("view-api-balance"))return;_(!0);const oe=Ai.getBalance();oe>0?(C(oe),_(!1)):Ai.fetchBalance().then(Q=>{C(Q),_(!1)});const G=Ai.addListener(Q=>{C(Q)});return()=>{G()}},[l,c]),u.useEffect(()=>{if(!d||!l)return;const ge=oe=>{if(oe.memberId===l.id||oe.userId===l.id){const G={...l,balance:oe.balance||oe.newBalance||0};t(Ds(G))}};return d.on("balance:update",ge),d.on("realtime:balance",ge),d.on("member:balance:update",ge),()=>{d.off("balance:update",ge),d.off("realtime:balance",ge),d.off("member:balance:update",ge)}},[d,l,t]);const D=ge=>{const oe=ge.getFullYear(),G=String(ge.getMonth()+1).padStart(2,"0"),Q=String(ge.getDate()).padStart(2,"0"),te=String(ge.getHours()).padStart(2,"0"),U=String(ge.getMinutes()).padStart(2,"0"),V=String(ge.getSeconds()).padStart(2,"0");return`${oe}년 ${G}월 ${Q}일 ${te}:${U}:${V}`},B=ge=>{f(ge.currentTarget)},$=()=>{f(null)},N=ge=>{w(ge.currentTarget)},F=()=>{w(null)},O=ge=>{y(ge.currentTarget)},R=()=>{y(null)},E=()=>{$(),t(Qu()),n("/login")},z=()=>{v(ge=>!ge)},q=()=>{t(MB())},X=()=>{t(UE())},H=[{id:1,message:"새로운 회원이 가입했습니다: user123",time:"5분 전",unread:!0},{id:2,message:"신규 결제가 완료되었습니다: #ORD-12345",time:"10분 전",unread:!0},{id:3,message:"시스템 업데이트가 완료되었습니다.",time:"1시간 전",unread:!1},{id:4,message:"새로운 게시글이 등록되었습니다.",time:"2시간 전",unread:!1},{id:5,message:"서버 점검이 예정되어 있습니다.",time:"3시간 전",unread:!1}],K=H.filter(ge=>ge.unread).length;return m(mE,{position:"fixed",className:"header css-header",sx:{width:{xs:"100%",lg:s==="vertical"?"calc(100% - 280px)":"100%"},ml:{xs:0,lg:s==="vertical"?"280px":0},zIndex:ge=>ge.zIndex.drawer+1},children:[m(Yf,{sx:{minHeight:{xs:"64px",sm:"70px"}},children:[a(Ct,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:e,sx:{mr:2,display:{xs:s==="horizontal"?"none":"block",lg:s==="vertical"?"none":"block"}},children:a(ax,{sx:{fontSize:"24px",color:"#7e8299"}})}),a(j,{sx:{display:"flex",alignItems:"center",mr:3},children:a(M,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"},fontWeight:700,fontSize:"18px",color:"#181c32"},children:"관리자 대시보드"})}),a(j,{sx:{display:{xs:"none",md:"flex"},mr:2},children:(()=>{const ge=r.pathname.split("/").filter(G=>G),oe={dashboard:"대시보드",members:"회원관리",betting:"배팅내역",settlement:"정산관리",transaction:"입출금관리","game-results":"게임결과","customer-service":"고객센터",board:"게시판관리","game-settings":"게임설정","site-settings":"사이트설정",logs:"로그관리","tree-view":"트리뷰",management:"회원관리","rolling-transfer":"롤링금전환내역","money-processing":"머니처리내역","money-transfer":"머니이동내역",create:"회원생성"};return m(kz,{separator:a(Pz,{sx:{fontSize:16,color:"#5E6278"}}),"aria-label":"breadcrumb",children:[m(OS,{component:fd,to:"/",sx:{display:"flex",alignItems:"center",color:"#5E6278",textDecoration:"none","&:hover":{color:"#3699FF",textDecoration:"none"}},children:[a(Sz,{sx:{mr:.5,fontSize:18}}),"홈"]}),ge.map((G,Q)=>{const te=`/${ge.slice(0,Q+1).join("/")}`;return Q===ge.length-1?a(M,{sx:{display:"flex",alignItems:"center",color:"#181C32",fontWeight:600},children:oe[G]||G},G):a(OS,{component:fd,to:te,sx:{display:"flex",alignItems:"center",color:"#5E6278",textDecoration:"none","&:hover":{color:"#3699FF",textDecoration:"none"}},children:oe[G]||G},G)})]})})()}),a(j,{sx:{display:{xs:"none",md:"flex"},alignItems:"center",mr:2,ml:"auto"},children:a(M,{variant:"body1",className:"date-time-display",sx:{fontSize:"1rem !important"},children:D(b)})}),m(j,{sx:{display:"none","@media (max-width: 650px)":{display:"flex",alignItems:"center",gap:1,ml:"auto",mr:1}},children:[l&&l.agent_level_id>=2&&m(j,{sx:{display:"flex",alignItems:"center",gap:.5,p:"6px 10px",backgroundColor:"#fef5f5",borderRadius:"6px",border:"1px solid #F64E60"},children:[a(dd,{sx:{color:"#F64E60",fontSize:"16px"}}),m(j,{children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:"9px",display:"block",lineHeight:1,mb:.25},children:"내 보유금"}),a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:"11px",fontWeight:600,lineHeight:1},children:(l==null?void 0:l.balance)!==void 0&&(l==null?void 0:l.balance)!==null?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(l.balance):"₩0"})]})]}),l&&l.agent_level_id===1&&m(j,{sx:{display:"flex",alignItems:"center",gap:.5,p:"6px 10px",backgroundColor:"#f5f8fa",borderRadius:"6px",border:"1px solid #e4e6ef"},children:[a(so,{sx:{color:"#3699FF",fontSize:"16px"}}),m(j,{children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:"9px",display:"block",lineHeight:1,mb:.25},children:"API 총잔액"}),S?a(ud,{width:50,height:12}):a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:"11px",fontWeight:600,lineHeight:1},children:Ai.formatBalance(k)})]})]})]}),a(j,{sx:{flexGrow:0,display:"flex",justifyContent:"center",position:"relative"},children:p&&m(rt,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:{xs:"100%",sm:400},position:{xs:"absolute",sm:"static"},top:0,left:0,right:0,zIndex:10,borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.04)",border:"1px solid #e4e6ef"},children:[a(Ct,{sx:{p:"10px",color:"#7e8299"},children:a(yi,{})}),a(j,{component:"input",sx:{ml:1,flex:1,border:"none",outline:"none",fontSize:"14px",fontFamily:"inherit",color:"#181c32","&::placeholder":{color:"#a1a5b7",opacity:1}},placeholder:"검색어를 입력하세요...",autoFocus:!0}),a(Ct,{sx:{p:"10px",color:"#7e8299"},onClick:z,children:a(Sa,{})})]})}),m(j,{sx:{flexGrow:0,display:"flex",alignItems:"center"},children:[m(j,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center","@media (max-width: 650px)":{display:"none"}},children:[a(Fn,{title:"검색",children:a(Ct,{onClick:z,className:"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium",sx:{ml:1},children:a(yi,{})})}),a(Fn,{title:s==="vertical"?"가로 모드로 전환":"세로 모드로 전환",children:a(Ct,{onClick:X,className:"sidebar-mode-toggle",sx:{ml:1},children:s==="vertical"?a(sx,{}):a(kS,{})})}),a(Fn,{title:o?"소리 끄기":"소리 켜기",children:a(Ct,{onClick:q,className:`sound-control-button ${o?"sound-on":"sound-off"}`,sx:{ml:1},children:o?a(_S,{}):a(ox,{})})}),a(Fn,{title:"알림판",children:a(Ct,{onClick:()=>t(bx()),className:"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium notification-panel-button",sx:{ml:1},children:a(Oh,{badgeContent:L+A,color:"error",max:99,children:a(TS,{})})})}),a(Fn,{title:"알림",children:a(Ct,{onClick:N,className:"MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium",sx:{ml:1},children:a(Oh,{badgeContent:L,color:"error",children:a(IS,{})})})}),a(DR,{})]}),m(j,{sx:{display:{xs:"flex",sm:"none"},alignItems:"center","@media (min-width: 651px)":{display:"none"}},children:[a(Fn,{title:s==="vertical"?"가로 모드로 전환":"세로 모드로 전환",children:a(Ct,{onClick:X,sx:{ml:1},children:s==="vertical"?a(sx,{}):a(kS,{})})}),a(Fn,{title:"도구",children:a(Ct,{onClick:O,sx:{ml:1},children:a(Sl,{sx:{fontSize:"22px"}})})})]}),a(Fn,{title:"계정 메뉴",children:a(Ct,{onClick:B,sx:{ml:1,p:0,border:"2px solid #e4e6ef","&:hover":{border:"2px solid #3699FF"}},children:a(Vf,{alt:"Admin User",src:"/static/images/avatar/1.jpg",sx:{width:36,height:36}})})})]})]}),m(vi,{anchorEl:x,id:"tools-menu",open:!!x,onClose:R,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.1))",mt:1.5,width:240,borderRadius:"8px","&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m(Me,{onClick:()=>{z(),R()},sx:{py:1.5,px:2},children:[a(ur,{children:a(yi,{fontSize:"small",sx:{color:"#7e8299"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:"검색"})]}),m(Me,{onClick:()=>{N({currentTarget:x}),R()},sx:{py:1.5,px:2},children:[a(ur,{children:a(Oh,{badgeContent:L,color:"error",max:99,sx:{"& .MuiBadge-badge":{fontSize:"0.65rem",height:"16px",minWidth:"16px",padding:"0 4px"}},children:a(IS,{fontSize:"small",sx:{color:"#7e8299"}})})}),m(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:["알림 ",L>0?`(${L})`:""]})]}),m(Me,{onClick:()=>{q(),R()},sx:{py:1.5,px:2},children:[a(ur,{children:o?a(_S,{fontSize:"small",sx:{color:"#7e8299"}}):a(ox,{fontSize:"small",sx:{color:"#7e8299"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:o?"소리 끄기":"소리 켜기"})]}),m(Me,{onClick:()=>{t(bx()),R()},sx:{py:1.5,px:2},children:[a(ur,{children:a(Oh,{badgeContent:L+A,color:"error",max:99,sx:{"& .MuiBadge-badge":{fontSize:"0.65rem",height:"16px",minWidth:"16px",padding:"0 4px"}},children:a(TS,{fontSize:"small",sx:{color:"#7e8299"}})})}),m(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:["알림판 ",L+A>0?`(${L+A})`:""]})]}),a(yn,{}),a(Me,{sx:{py:1.5,px:2},children:m(j,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32",mr:"auto"},children:"테마"}),a(DR,{})]})})]}),m(vi,{anchorEl:g,id:"notifications-menu",open:!!g,onClose:F,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.1))",mt:1.5,width:320,borderRadius:"8px","& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m(j,{sx:{p:2,borderBottom:"1px solid #eff2f5"},children:[a(M,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"15px",color:"#181c32"},children:"알림"}),m(M,{variant:"body2",sx:{color:"#a1a5b7",fontSize:"13px"},children:[K,"개의 읽지 않은 알림이 있습니다"]})]}),H.map(ge=>a(Me,{onClick:F,sx:{py:1.5,px:2,borderLeft:ge.unread?"3px solid #3699FF":"none",backgroundColor:ge.unread?"rgba(54, 153, 255, 0.05)":"transparent","&:hover":{backgroundColor:"#f5f8fa"}},children:a(j,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[a(M,{variant:"body2",sx:{fontWeight:ge.unread?600:400,fontSize:"13px",color:"#181c32"},children:ge.message}),a(M,{variant:"caption",sx:{color:"#a1a5b7",fontSize:"11px",ml:1},children:ge.time})]})})},ge.id)),a(j,{sx:{p:1.5,textAlign:"center",borderTop:"1px solid #eff2f5"},children:a(Se,{size:"small",sx:{fontSize:"13px",fontWeight:500,color:"#3699FF","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.1)"}},children:"모든 알림 보기"})})]}),m(vi,{anchorEl:h,id:"account-menu",open:!!h,onClose:$,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.1))",mt:1.5,width:200,borderRadius:"8px","& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m(j,{sx:{p:2,borderBottom:"1px solid #eff2f5"},children:[a(M,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"15px",color:"#181c32"},children:(l==null?void 0:l.nickname)||(l==null?void 0:l.username)||"관리자"}),a(M,{variant:"body2",sx:{color:"#a1a5b7",fontSize:"13px"},children:(l==null?void 0:l.username)||(l==null?void 0:l.userId)||""})]}),m(Me,{onClick:$,sx:{py:1.5,px:2},children:[a(ur,{children:a(ba,{fontSize:"small",sx:{color:"#7e8299"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:"내 프로필"})]}),m(Me,{onClick:$,sx:{py:1.5,px:2},children:[a(ur,{children:a(Sl,{fontSize:"small",sx:{color:"#7e8299"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:"설정"})]}),m(Me,{onClick:$,sx:{py:1.5,px:2},children:[a(ur,{children:a(Cz,{fontSize:"small",sx:{color:"#7e8299"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#181c32"},children:"도움말"})]}),a(yn,{}),m(Me,{onClick:E,sx:{py:1.5,px:2},children:[a(ur,{children:a(pE,{fontSize:"small",sx:{color:"#f1416c"}})}),a(M,{variant:"body2",sx:{fontSize:"13px",color:"#f1416c"},children:"로그아웃"})]})]})]})};Zj.propTypes={handleDrawerToggle:re.func.isRequired};const h1=({window:e,mobileOpen:t,handleDrawerToggle:n})=>{On();const r=lg(),i=mo(),o=Kr(),s=zn(I1),l=zn(oe=>oe.auth.user),{canAccessMenu:c,permissions:d}=zi(),{socketService:h}=ni(),f=(l==null?void 0:l.level)===999||(l==null?void 0:l.username)==="master",[g,w]=u.useState(0),[x,y]=u.useState(!0),[p,v]=u.useState(!1),[b,P]=u.useState(!1),k=u.useRef(null),C=u.useRef(!1),[S,_]=u.useState(0),[T,I]=u.useState({}),[L,A]=u.useState(()=>{const oe=localStorage.getItem("menuSettings");if(oe)try{return JSON.parse(oe)}catch(G){return console.error("Failed to parse menu settings:",G),{}}return{}}),[D,B]=u.useState(!0),$=()=>{const oe=localStorage.getItem("menuSettings");if(oe)try{return JSON.parse(oe)}catch(G){return console.error("Failed to parse menu settings:",G),{}}return{}};u.useEffect(()=>{const oe=()=>{A($())};if(typeof e<"u")return e.addEventListener("menuSettingsUpdated",oe),()=>{e.removeEventListener("menuSettingsUpdated",oe)}},[]),u.useEffect(()=>{if(l)if(y(!0),l.agent_level_id===1||l.agent_level_id===999){Pe.balance.getAgent().then(G=>{G.data.success&&G.data.data?w(G.data.data.balance||0):w(0),y(!1)}).catch(G=>{console.error("에이전트 잔액 조회 실패:",G),w(0),y(!1)});const oe=setInterval(()=>{Pe.balance.getAgent().then(G=>{G.data.success&&G.data.data&&w(G.data.data.balance||0)}).catch(G=>{console.error("에이전트 잔액 조회 실패:",G)})},3e4);return()=>clearInterval(oe)}else{const oe=Ai.addListener(G=>{w(G),y(!1)});return Ai.startPolling(),()=>{oe(),Ai.stopPolling()}}},[l]),u.useEffect(()=>{if(!h||!l)return;const oe=G=>{if(G.memberId===l.id||G.userId===l.id){const Q={...l,balance:G.balance||G.newBalance||0};o(Ds(Q))}};return h.on("balance:update",oe),h.on("realtime:balance",oe),h.on("member:balance:update",oe),()=>{h.off("balance:update",oe),h.off("realtime:balance",oe),h.off("member:balance:update",oe)}},[h,l,o]);const N=u.useCallback(async()=>{if(!C.current){C.current=!0,v(!0);try{await Ai.fetchBalance()}finally{setTimeout(()=>{v(!1),C.current=!1},500)}}},[]);u.useEffect(()=>{if(!h)return;const oe=Q=>{_(te=>te+1)},G=Q=>{_(te=>Math.max(0,te-1))};return h.on("game:started",oe),h.on("game:ended",G),()=>{h.off("game:started",oe),h.off("game:ended",G)}},[h]),u.useEffect(()=>(S>0&&!b?(P(!0),N(),k.current=setInterval(()=>{N()},1e4)):S===0&&b&&(P(!1),k.current&&(clearInterval(k.current),k.current=null)),()=>{k.current&&(clearInterval(k.current),k.current=null)}),[S,b,N]);const F=(oe,G=null)=>{if(!c(oe))return!1;const Q=G?`${G}.${oe}`:oe,te=L[Q];return!(te&&te.enabled===!1)},O=oe=>{for(const G of oe)if(!(G.id&&!G.isSpecial&&!F(G.id))){if(G.path&&r.pathname===G.path)return G.text;if(G.children){for(const Q of G.children)if(!(Q.id&&!F(Q.id,G.id))&&r.pathname===Q.path)return G.text}}return null};Ce.useEffect(()=>{const oe=O(Hf);I(oe?{[oe]:!0}:{})},[r.pathname]);const R=()=>{o(Qu()),i("/login")},E=u.useMemo(()=>f?Hf:Hf.filter(oe=>oe.isSpecial||!oe.id?!0:c(oe.id)).map(oe=>oe.children?{...oe,children:oe.children.filter(G=>G.id?G.requireMaster&&!f?!1:c(G.id):!0)}:oe).filter(oe=>!(oe.children&&oe.children.length===0)),[L,f,c,d]),z=oe=>{I(G=>{const Q={};return Q[oe]=!G[oe],Q})},q=()=>{o(UE())},X=({item:oe,level:G=0})=>{const Q=r.pathname===oe.path,te=oe.children&&oe.children.length>0,U=T[oe.text]||!1;if(oe.id&&!oe.isSpecial&&!F(oe.id))return null;const V=te&&oe.children.some(ae=>r.pathname===ae.path);return m(bn,{children:[m(yf,{component:oe.path&&!te&&oe.id!=="logout"?fd:"div",to:oe.path&&!te&&oe.id!=="logout"?oe.path:void 0,onClick:()=>{oe.id==="logout"?R():te&&z(oe.text)},sx:{pl:G*2+2,py:1.5,borderRadius:"8px",mb:.5,backgroundColor:Q||V?"rgba(54, 153, 255, 0.1)":"transparent",color:Q||V?"#3699FF":"#5e6278","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.05)"},mx:1},children:[oe.icon&&a(ur,{sx:{minWidth:36,color:Q||V?"#3699FF":"#5e6278","& .MuiSvgIcon-root":{fontSize:"20px"}},children:oe.icon}),a(_r,{primary:oe.text,primaryTypographyProps:{fontSize:"14px",fontWeight:Q||V?600:500}}),te&&a(j,{sx:{transition:"transform 0.6s cubic-bezier(0.25, 0.1, 0.25, 1)",transform:U?"rotate(0deg)":"rotate(-90deg)"},children:U?a(gE,{}):a(Oo,{})})]}),te&&a(Is,{in:U,timeout:600,unmountOnExit:!0,sx:{"& .MuiList-root":{transition:"all 0.6s cubic-bezier(0.25, 0.1, 0.25, 1)"}},children:a(xi,{component:"div",disablePadding:!0,children:oe.children.map((ae,ne)=>m(yf,{component:fd,to:ae.path,sx:{pl:(G+1)*2+2,py:1.25,borderRadius:"8px",mb:.5,backgroundColor:r.pathname===ae.path?"rgba(54, 153, 255, 0.1)":"transparent",color:r.pathname===ae.path?"#3699FF":"#5e6278","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.05)"},mx:1,transition:"all 0.4s cubic-bezier(0.25, 0.1, 0.25, 1)",opacity:1,transform:"translateX(0)",animation:U?"fadeInLeft 0.6s cubic-bezier(0.25, 0.1, 0.25, 1)":"none",animationDelay:`${ne*50}ms`},children:[a(ur,{sx:{minWidth:36,color:r.pathname===ae.path?"#3699FF":"#5e6278"},children:a(cE,{sx:{fontSize:"16px"}})}),a(_r,{primary:ae.text,primaryTypographyProps:{fontSize:"13px",fontWeight:r.pathname===ae.path?600:400}})]},ne))})})]})},H=({item:oe})=>{const G=r.pathname===oe.path,Q=oe.children&&oe.children.length>0,te=Q&&oe.children.some(ue=>r.pathname===ue.path);if(oe.id&&!oe.isSpecial&&!F(oe.id))return null;const[U,V]=Ce.useState(null),ae=!!U,ne=ue=>{oe.id==="logout"?R():Q?V(ue.currentTarget):oe.path&&i(oe.path)},me=()=>{V(null)};return m(j,{sx:{display:"inline-block",flexShrink:0},children:[a(Fn,{title:oe.text,children:m(yf,{onClick:ne,sx:{borderRadius:"8px",mx:.5,px:1,py:.5,minWidth:"70px",backgroundColor:G||te?"rgba(54, 153, 255, 0.1)":"transparent",color:G||te?"#3699FF":"#5e6278","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.05)"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:.5,height:"45px",whiteSpace:"nowrap"},children:[oe.icon&&a(ur,{sx:{minWidth:"auto",color:G||te?"#3699FF":"#5e6278","& .MuiSvgIcon-root":{fontSize:"20px"},display:"flex",alignItems:"center"},children:oe.icon}),a(M,{variant:"caption",sx:{fontSize:"11px",fontWeight:G||te?600:500,whiteSpace:"nowrap",lineHeight:1},children:oe.text})]})}),Q&&a(vi,{anchorEl:U,open:ae,onClose:me,MenuListProps:{"aria-labelledby":"basic-button"},PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.1))",mt:1.5,borderRadius:"8px","& .MuiMenuItem-root":{px:2,py:1,fontSize:"14px",fontWeight:500}}},children:oe.children.map((ue,Ae)=>m(Me,{onClick:()=>{me(),ue.path&&i(ue.path)},sx:{color:r.pathname===ue.path?"#3699FF":"#5e6278",backgroundColor:r.pathname===ue.path?"rgba(54, 153, 255, 0.1)":"transparent","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.05)"}},children:[ue.icon&&a(ur,{sx:{color:r.pathname===ue.path?"#3699FF":"#5e6278",minWidth:"30px"},children:ue.icon}),a(_r,{primary:ue.text})]},Ae))})]})},K=m(j,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[m(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:"1px solid #eff2f5"},children:[a(M,{variant:"h6",sx:{fontWeight:700,color:"#181c32",fontSize:"18px"},children:"관리자 대시보드"}),a(Ct,{size:"small",onClick:q,sx:{color:"#5e6278","&:hover":{backgroundColor:"rgba(54, 153, 255, 0.05)"}},children:a(sx,{fontSize:"small"})})]}),m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,borderBottom:"1px solid #eff2f5"},children:[a(Vf,{sx:{width:80,height:80,mb:2,border:"3px solid #e4e6ef"},alt:"Admin User",src:"/static/images/avatar/1.jpg"}),a(M,{variant:"subtitle1",sx:{fontWeight:600,color:"#181c32",fontSize:"16px"},children:(l==null?void 0:l.nickname)||(l==null?void 0:l.username)||"관리자"}),m(M,{variant:"body2",sx:{color:"#a1a5b7",fontSize:"13px",mb:2},children:[(l==null?void 0:l.username)||(l==null?void 0:l.userId)||"","@",f?"master":"admin"]}),l&&l.agent_level_id>=2&&m(j,{sx:{display:"flex",alignItems:"center",gap:1,mt:2,p:1.5,backgroundColor:"#f5f8fa",borderRadius:"8px",border:"1px solid #e4e6ef",width:"100%"},children:[a(dd,{sx:{color:"#F64E60",fontSize:"20px"}}),m(j,{sx:{flexGrow:1},children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:"11px",display:"block",mb:.5},children:"내 보유금"}),a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:"14px",fontWeight:600},children:l.balance?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(l.balance):"₩0"})]})]}),l&&l.agent_level_id===1&&m(j,{sx:{display:"flex",alignItems:"center",gap:1,mt:2,p:1.5,backgroundColor:"#f5f8fa",borderRadius:"8px",border:"1px solid #e4e6ef",width:"100%"},children:[a(so,{sx:{color:"#3699FF",fontSize:"20px"}}),m(j,{sx:{flexGrow:1},children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:"11px",display:"block",mb:.5},children:"API 총 잔액"}),x?a(ud,{width:"100%",height:20}):a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:"14px",fontWeight:600},children:Ai.formatBalance(g)})]}),a(Ct,{size:"small",onClick:N,disabled:p,sx:{color:"#7e8299",p:.5,"&:hover":{backgroundColor:"rgba(54, 153, 255, 0.1)",color:"#3699FF"}},children:a(Gf,{sx:{fontSize:"18px",animation:p?"spin 1s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})]})]}),a(j,{sx:{flexGrow:1,overflow:"auto",px:1.5,py:2},children:a(xi,{component:"nav",disablePadding:!0,children:E.map((oe,G)=>a(X,{item:oe},G))})}),a(j,{sx:{p:2,borderTop:"1px solid #eff2f5",textAlign:"center"},children:a(M,{variant:"caption",sx:{color:"#a1a5b7",fontSize:"12px"},children:"© 2025 NEWMOON ADMIN"})})]}),ee=a(j,{sx:{flexGrow:1},children:a(mE,{position:"static",className:"css-sidebar",sx:{boxShadow:"none",backgroundColor:"#ffffff",borderBottom:"none",zIndex:1090},children:m(Yf,{sx:{justifyContent:"space-between",minHeight:"50px",py:.5,px:3},children:[a(j,{sx:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",mr:2,width:0},children:a(j,{sx:{display:"flex",alignItems:"center",overflowX:"auto",overflowY:"hidden",height:"50px",px:1,flexWrap:"nowrap",width:"100%","&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#d6d6d6",borderRadius:"2px","&:hover":{backgroundColor:"#999"}}},className:"horizontal-menu",children:E.map((oe,G)=>a(H,{item:oe},G))})}),m(j,{sx:{display:"flex",alignItems:"center",gap:2,flexShrink:0},children:[l&&l.agent_level_id>=2&&m(j,{sx:{display:"flex",alignItems:"center",gap:1,p:{xs:.5,sm:1},px:{xs:1,sm:2},backgroundColor:"#fef5f5",borderRadius:"8px",border:"1px solid #F64E60",minWidth:{xs:"auto",sm:"120px"},flexShrink:0,"@media (max-width: 650px)":{display:"none"}},children:[a(dd,{sx:{color:"#F64E60",fontSize:"18px"}}),m(j,{sx:{flexGrow:1},children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:{xs:"9px",sm:"10px"},display:"block"},children:"내 보유금"}),a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:{xs:"11px",sm:"12px"},fontWeight:600,lineHeight:1},children:l.balance?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(l.balance):"₩0"})]})]}),l&&l.agent_level_id===1&&m(j,{sx:{display:"flex",alignItems:"center",gap:1,p:{xs:.5,sm:1},px:{xs:1,sm:2},backgroundColor:"#f5f8fa",borderRadius:"8px",border:"1px solid #e4e6ef",minWidth:{xs:"auto",sm:"150px"},"@media (max-width: 650px)":{display:"none"}},children:[a(so,{sx:{color:"#3699FF",fontSize:"18px"}}),m(j,{sx:{flexGrow:1},children:[a(M,{variant:"caption",sx:{color:"#7e8299",fontSize:{xs:"9px",sm:"10px"},display:"block"},children:"API 총잔액"}),x?a(ud,{width:60,height:14,sx:{"@media (max-width: 650px)":{width:50,height:12}}}):a(M,{variant:"subtitle2",sx:{color:"#181c32",fontSize:{xs:"11px",sm:"12px"},fontWeight:600,lineHeight:1},children:Ai.formatBalance(g)})]}),a(Ct,{size:"small",onClick:N,disabled:p,sx:{color:"#7e8299",p:{xs:.2,sm:.3},"&:hover":{backgroundColor:"rgba(54, 153, 255, 0.1)",color:"#3699FF"}},children:a(Gf,{sx:{fontSize:"16px",animation:p?"spin 1s linear infinite":"none"}})})]})]})]})})}),ge=e!==void 0?()=>e().document.body:void 0;return s==="vertical"?m(j,{component:"nav",sx:{width:{lg:280},flexShrink:{lg:0}},className:"sidebar-vertical",children:[a(AS,{container:ge,variant:"temporary",open:t,onClose:n,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",lg:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:280,className:"css-sidebar"}},className:"css-sidebar",children:K}),a(AS,{variant:"permanent",sx:{display:{xs:"none",lg:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:280,className:"css-sidebar",borderRight:"none"}},className:"css-sidebar",open:!0,children:K})]}):a(j,{component:"nav",sx:{width:"100%",backgroundColor:"#ffffff",position:"relative",zIndex:1090},className:"sidebar-horizontal",children:ee})};h1.propTypes={window:re.func,mobileOpen:re.bool.isRequired,handleDrawerToggle:re.func.isRequired};var Ru={},RR;function ede(){if(RR)return Ru;RR=1;var e=ln();Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.default=void 0;var t=e(un()),n=cn();return Ru.default=(0,t.default)([(0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7.35 18.5C8.66 17.56 10.26 17 12 17s3.34.56 4.65 1.5c-1.31.94-2.91 1.5-4.65 1.5s-3.34-.56-4.65-1.5m10.79-1.38C16.45 15.8 14.32 15 12 15s-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.95-.7 3.73-1.86 5.12"},"0"),(0,n.jsx)("path",{d:"M12 6c-1.93 0-3.5 1.57-3.5 3.5S10.07 13 12 13s3.5-1.57 3.5-3.5S13.93 6 12 6m0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11"},"1")],"AccountCircleOutlined"),Ru}var tde=ede();const ER=vt(tde);var Eu={},MR;function nde(){if(MR)return Eu;MR=1;var e=ln();Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.default=void 0;var t=e(un()),n=cn();return Eu.default=(0,t.default)((0,n.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined"),Eu}var rde=nde();const ade=vt(rde);var Mu={},LR;function ide(){if(LR)return Mu;LR=1;var e=ln();Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.default=void 0;var t=e(un()),n=cn();return Mu.default=(0,t.default)((0,n.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5z"}),"FileDownloadOutlined"),Mu}var ode=ide();const sde=vt(ode);var Lu={},$R;function lde(){if($R)return Lu;$R=1;var e=ln();Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.default=void 0;var t=e(un()),n=cn();return Lu.default=(0,t.default)([(0,n.jsx)("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62"},"0"),(0,n.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,n.jsx)("circle",{cx:"15",cy:"13",r:"1"},"2"),(0,n.jsx)("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47"},"3")],"SupportAgentOutlined"),Lu}var cde=lde();const ude=vt(cde);var $u={},jR;function dde(){if(jR)return $u;jR=1;var e=ln();Object.defineProperty($u,"__esModule",{value:!0}),$u.default=void 0;var t=e(un()),n=cn();return $u.default=(0,t.default)((0,n.jsx)("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74M8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"GroupsOutlined"),$u}var hde=dde();const fde=vt(hde);var ju={},FR;function pde(){if(FR)return ju;FR=1;var e=ln();Object.defineProperty(ju,"__esModule",{value:!0}),ju.default=void 0;var t=e(un()),n=cn();return ju.default=(0,t.default)((0,n.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"WarningOutlined"),ju}var gde=pde();const mde=vt(gde),yde=()=>{const e=Kr(),t=mo(),n=zn(a5),r=zn(r5),[i,o]=u.useState(window.innerWidth<=800),[,s]=u.useState({}),{canViewLayout:l}=zi(),{socketService:c}=ni(),[d,h]=u.useState({}),f=u.useRef(new Map),g=u.useRef(new Map),[w,x]=u.useState(!1);u.useRef(null),u.useRef(null),u.useEffect(()=>{const S=()=>{s({})};return window.addEventListener("permissionsUpdated",S),()=>{window.removeEventListener("permissionsUpdated",S)}},[]),u.useEffect(()=>{if(!c)return;const S=()=>{c.emit("notifications:request-initial-data")};return c.isConnected&&S(),c.on("connect",S),()=>{c.off("connect",S)}},[c]),u.useEffect(()=>{if(!c)return;const S=()=>{c.emit("alarms:request-settings")};return c.isConnected&&S(),c.on("connect",S),()=>{c.off("connect",S)}},[c]),u.useEffect(()=>{const S=()=>{o(window.innerWidth<=800)};return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}},[]);const y=l("notification-panel");u.useEffect(()=>{},[y]);const p=u.useCallback((S,_,T)=>{if(!_||!w||!r)return;v(S);const L=`/public/alarm-sounds/default/${encodeURIComponent(_)}?t=${Date.now()}`;fetch(L).then($=>(`${$.status}`,`${$.headers.get("content-type")}`,$.blob())).then($=>{`${$.size}${$.type}`}).catch($=>{console.error("[알람음 테스트] Fetch 실패:",$)});const A=new Audio(L);A.loop=!1,g.current.set(S,A);const D=()=>{const $=g.current.get(S);$&&($.currentTime=0,$.play().catch(N=>{console.error("알람음 재생 실패:",N)}))};D(),f.current.set(S,{timerId:null,isPlaying:!0});const B=()=>{const $=g.current.get(S);$&&($.onended=()=>{if(!f.current.get(S))return;const F=setTimeout(()=>{f.current.has(S)&&(D(),B())},T*1e3);f.current.set(S,{timerId:F,isPlaying:!1})})};B()},[w,r]),v=u.useCallback(S=>{if(f.current.has(S)){const T=f.current.get(S);T&&T.timerId&&clearTimeout(T.timerId),f.current.delete(S)}const _=g.current.get(S);_&&(_.onended=null,_.pause(),_.currentTime=0,g.current.delete(S))},[]);if(u.useEffect(()=>{Object.entries(n).forEach(([S,_])=>{var D;const I={"member-registration":"registration","deposit-inquiry":"depositInquiry","withdrawal-inquiry":"withdrawalInquiry","customer-service":"customerService"}[S];if(!I)return;d.memberNotifications;const L=(D=d.memberNotifications)==null?void 0:D[I];if(!L||!L.enabled)return;const A=typeof _.requests=="string"?parseInt(_.requests):_.requests;if(!r||!y){f.current.has(I)&&v(I);return}A>0&&!f.current.has(I)&&p(I,L.soundFile,L.interval),A===0&&f.current.has(I)&&v(I)})},[n,d,w,r,p,v]),u.useEffect(()=>{if(!c)return;const S=D=>{D["agent-inquiry"]&&console.warn("[WARNING] agent-inquiry 데이터가 서버에서 전송됨:",D["agent-inquiry"]),D["balance-mismatch"]&&console.warn("[WARNING] balance-mismatch 데이터가 서버에서 전송됨:",D["balance-mismatch"]);const B=["member-registration","deposit-inquiry","withdrawal-inquiry","customer-service"],$={};B.forEach(N=>{D[N]&&($[N]=D[N])}),e(LB($))},_=D=>{h(D),s({})},T=D=>{h(D)},I=D=>{const{eventType:B,status:$}=D;$==="stopped"&&v(B)},L=D=>{e(Wi({id:"member-registration",requests:D.pendingCount}))},A=D=>{D.pendingCount!==void 0?(e(Wi({id:"member-registration",requests:D.pendingCount,pending:D.waitingCount||0})),D.pendingCount===0&&v("registration")):c.emit("notifications:request-initial-data")};return c.on("notifications:initial-data",S),c.on("alarms:settings",_),c.on("alarm:settings:updated",T),c.on("alarm:state:changed",I),c.on("registration:new",L),c.on("registration:status:changed",A),c.on("registration:approved",A),c.on("deposit:inquiry:new",D=>{e(Wi({id:"deposit-inquiry",requests:D.pendingCount||1}))}),c.on("deposit:inquiry:status:changed",D=>{e(Wi({id:"deposit-inquiry",requests:D.pendingCount||0,pending:D.waitingCount||0})),D.pendingCount===0&&v("depositInquiry")}),c.on("withdrawal:inquiry:new",D=>{e(Wi({id:"withdrawal-inquiry",requests:D.pendingCount||1,pending:D.waitingCount||0}))}),c.on("withdrawal:inquiry:status:changed",D=>{e(Wi({id:"withdrawal-inquiry",requests:D.pendingCount||0,pending:D.waitingCount||0})),D.pendingCount===0&&v("withdrawalInquiry")}),c.on("customer:service:new",D=>{e(Wi({id:"customer-service",requests:D.pendingCount||1}))}),c.on("customer:service:status:changed",D=>{e(Wi({id:"customer-service",requests:D.pendingCount||0,pending:D.waitingCount||0})),D.pendingCount===0&&v("customerService")}),c.on("notifications:update",D=>{if(!D){console.warn("[WebSocket] 알림 업데이트 데이터 없음");return}Object.entries(D).forEach(([B,$])=>{$&&typeof $=="object"&&$.requests!==void 0&&(`${B}`,$.requests,e(Wi({id:B,requests:$.requests||0,pending:$.pending||0})))})}),()=>{c.off("notifications:initial-data",S),c.off("alarms:settings",_),c.off("alarm:settings:updated",T),c.off("alarm:state:changed",I),c.off("registration:new",L),c.off("registration:status:changed",A),c.off("registration:approved",A),c.off("deposit:inquiry:new"),c.off("deposit:inquiry:status:changed"),c.off("withdrawal:inquiry:new"),c.off("withdrawal:inquiry:status:changed"),c.off("customer:service:new"),c.off("customer:service:status:changed"),c.off("notifications:update")}},[c,v,e]),u.useEffect(()=>()=>{f.current.forEach((S,_)=>{S&&S.timerId&&clearTimeout(S.timerId);const T=g.current.get(_);T&&(T.onended=null,T.pause(),T.currentTime=0)})},[]),u.useEffect(()=>{const S=()=>{w||x(!0)};return document.addEventListener("click",S),document.addEventListener("keydown",S),document.addEventListener("touchstart",S),()=>{document.removeEventListener("click",S),document.removeEventListener("keydown",S),document.removeEventListener("touchstart",S)}},[w]),u.useEffect(()=>{(!r||!y)&&Array.from(f.current.keys()).forEach(_=>{v(_)})},[r,y,v]),!y)return a("div",{style:{display:"none"}});const b=S=>{switch(S){case"PersonIcon":return a(ER,{sx:{fontSize:18}});case"ArrowUpwardIcon":return a(ade,{sx:{fontSize:18}});case"ArrowDownwardIcon":return a(sde,{sx:{fontSize:18}});case"SupportAgentIcon":return a(ude,{sx:{fontSize:18}});case"GroupIcon":return a(fde,{sx:{fontSize:18}});case"WarningIcon":return a(mde,{sx:{fontSize:18}});default:return a(ER,{sx:{fontSize:18}})}},P=S=>{const T={"member-registration":"/agent-management/registration-requests","deposit-inquiry":"/transactions/deposit","withdrawal-inquiry":"/transactions/withdrawal","customer-service":"/customer-service/messages"}[S];T&&t(T)},k=["member-registration","deposit-inquiry","withdrawal-inquiry","customer-service"],C=Object.values(n).filter(S=>k.includes(S.id)).slice(0,6);return C.map(S=>S.id),m("div",{className:"notification-panel",style:{width:"100%",display:"block"},children:[!w&&Object.values(d.memberNotifications||{}).some(S=>S.enabled)&&a("div",{style:{backgroundColor:"#fff3cd",color:"#856404",padding:"8px 12px",fontSize:"12px",textAlign:"center",borderBottom:"1px solid #ffeaa7"},children:"알람음을 활성화하려면 페이지를 클릭하세요."}),a("div",{style:{backgroundColor:"transparent",padding:i?"8px 4px":"10px 8px",width:"100%",display:"block"},children:a("div",{style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",width:"100%",justifyContent:"space-between",gap:i?"5px":"4px",overflow:"visible",paddingBottom:"0"},className:"notification-container",children:C.map(S=>a("div",{style:{flex:"1 1 0",margin:"0",minWidth:"0",position:"relative",zIndex:1102,maxHeight:"120px"},className:`notification-card ${i?"compact":""}`,children:m("div",{style:{backgroundColor:"#ffffff",borderRadius:i?"4px":"8px",overflow:"hidden",height:"100%",display:"flex",flexDirection:"column",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)",border:"1px solid #EBEDF3",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>P(S.id),onMouseEnter:_=>{_.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)",_.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:_=>{_.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.05)",_.currentTarget.style.transform="translateY(0)"},children:[m("div",{style:{padding:i?"6px 6px":"12px 16px",display:"flex",alignItems:"center",backgroundColor:"aliceblue",borderBottom:"1px solid #F3F6F9",overflow:"hidden"},children:[!i&&a("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"14px",borderRadius:"6px",backgroundColor:`${S.color}15`,color:S.color,marginRight:"10px",flexShrink:0},children:b(S.icon)}),a("div",{style:{fontWeight:"500",fontSize:i?"11px":"13px",color:"#3F4254",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:S.title})]}),m("div",{style:{padding:i?"8px 8px":"10px 0px",display:"flex",margin:i?"0":"0 10px 0 10px",justifyContent:"space-between",alignItems:"center"},children:[m("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flex:"1 1 0"},children:[a("div",{style:{fontSize:i?"9px":"11px",color:"#B5B5C3",marginBottom:i?"2px":"4px"},children:"요청"}),a("div",{style:{fontSize:i?"12px":"16px",fontWeight:"600",color:S.requests>0?"#F64E60":"#B5B5C3",minWidth:i?"16px":"28px",textAlign:"center"},children:S.requests})]}),a("div",{style:{width:"1px",height:i?"20px":"24px",backgroundColor:"#EBEDF3",margin:"0 4px",flexShrink:0}}),m("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flex:"1 1 0"},children:[a("div",{style:{fontSize:i?"9px":"11px",color:"#B5B5C3",marginBottom:i?"2px":"4px"},children:"대기"}),a("div",{style:{fontSize:i?"12px":"16px",fontWeight:"600",color:S.pending>0?"#FFA800":"#B5B5C3",minWidth:i?"16px":"28px",textAlign:"center"},children:S.pending})]})]})]})},S.id))})})]})};var Fu={},zR;function bde(){if(zR)return Fu;zR=1;var e=ln();Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.default=void 0;var t=e(un()),n=cn();return Fu.default=(0,t.default)((0,n.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),Fu}var vde=bde();const xde=vt(vde);var zu={},NR;function wde(){if(NR)return zu;NR=1;var e=ln();Object.defineProperty(zu,"__esModule",{value:!0}),zu.default=void 0;var t=e(un()),n=cn();return zu.default=(0,t.default)((0,n.jsx)("path",{d:"M12.5 6.9c1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-.53.12-1.03.3-1.48.54l1.47 1.47c.41-.17.91-.27 1.51-.27M5.33 4.06 4.06 5.33 7.5 8.77c0 2.08 1.56 3.21 3.91 3.91l3.51 3.51c-.34.48-1.05.91-2.42.91-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c.96-.18 1.82-.55 2.45-1.12l2.22 2.22 1.27-1.27z"}),"MoneyOff"),zu}var Cde=wde();const Sde=vt(Cde);var Nu={},BR;function Pde(){if(BR)return Nu;BR=1;var e=ln();Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.default=void 0;var t=e(un()),n=cn();return Nu.default=(0,t.default)((0,n.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline"),Nu}var kde=Pde();const _de=vt(kde),Tde=({user:e,onClose:t})=>{const[n,r]=u.useState(""),[i,o]=u.useState(""),[s,l]=u.useState(""),[c,d]=u.useState(""),[h,f]=u.useState(null),[g,w]=u.useState(!1),[x,y]=u.useState(!1),[p,v]=u.useState(!1),[b,P]=u.useState(""),[k,C]=u.useState(""),[S,_]=u.useState(0),[T,I]=u.useState(null),[L,A]=u.useState(0);u.useEffect(()=>{e&&(e.account_holder&&e.account_number&&e.bank_name?l(`${e.account_holder} ${e.account_number} ${e.bank_name}`):l(`${e.name||""} (${e.username||""})`))},[e]),u.useEffect(()=>{D()},[]);const D=async()=>{try{const E=await Pe.deposit.getCooldownSettings();if(E.data.success&&E.data.data){I(E.data.data);const z=localStorage.getItem("agentDepositInquiryTime"),q=localStorage.getItem("agentDepositAccountInfo"),X=localStorage.getItem("agentLastDepositTime");if(z&&E.data.data.enabled){const K=Date.now()-parseInt(z),ee=(E.data.data.cooldown_seconds||300)*1e3;if(K<ee){const ge=Math.ceil((ee-K)/1e3);if(_(ge),q)try{const oe=JSON.parse(q);o(`${oe.bank_name} ${oe.account_number} (예금주: ${oe.account_holder})`),f(oe),w(!0)}catch(oe){console.error("계좌정보 파싱 오류:",oe)}}else localStorage.removeItem("agentDepositInquiryTime"),localStorage.removeItem("agentDepositAccountInfo")}if(X&&E.data.data.enabled){const K=Date.now()-parseInt(X),ee=(E.data.data.cooldown_seconds||300)*1e3;if(K<ee){const ge=Math.ceil((ee-K)/1e3);A(ge)}}}}catch(E){console.error("쿨다운 설정 조회 실패:",E)}};u.useEffect(()=>{if(S>0){const E=setInterval(()=>{_(z=>z<=1?(o(""),f(null),w(!1),localStorage.removeItem("agentDepositInquiryTime"),localStorage.removeItem("agentDepositAccountInfo"),0):z-1)},1e3);return()=>clearInterval(E)}},[S]),u.useEffect(()=>{if(L>0){const E=setInterval(()=>{A(z=>z<=1?(localStorage.removeItem("agentLastDepositTime"),0):z-1)},1e3);return()=>clearInterval(E)}},[L]);const B=async()=>{if(!(x||S>0)){y(!0),P("");try{const E=await Pe.deposit.getBankAccount();if(E.data.success&&E.data.data){const{bank_name:z,account_number:q,account_holder:X}=E.data.data;o(`${z} ${q} (예금주: ${X})`),f(E.data.data),w(!0),localStorage.setItem("agentDepositInquiryTime",Date.now().toString()),localStorage.setItem("agentDepositAccountInfo",JSON.stringify(E.data.data)),T&&T.enabled&&T.cooldown_seconds>0&&_(T.cooldown_seconds)}else P("관리자에게 계좌를 문의해주세요.")}catch(E){console.error("계좌정보 조회 실패:",E),P("관리자에게 계좌를 문의해주세요.")}finally{y(!1)}}},$=E=>{const q=parseInt(n.replace(/,/g,"")||"0")+E;r(q.toString())},N=()=>{r("")},F=async()=>{var E,z;if(L>0){P(`입금 신청은 ${R(L)} 후에 가능합니다.`);return}if(!n){P("신청금액을 입력해주세요.");return}if(!h){P("먼저 입금계좌문의를 해주세요.");return}if(!p){v(!0),P(""),C("");try{(await Pe.deposit.createInquiry({amount:parseInt(n.replace(/,/g,"")),depositorName:s,memo:c})).data.success&&(C("입금신청이 완료되었습니다."),r(""),d(""),w(!1),o(""),f(null),T&&T.enabled&&T.cooldown_seconds>0&&(A(T.cooldown_seconds),localStorage.setItem("agentLastDepositTime",Date.now().toString())),setTimeout(()=>{t()},3e3))}catch(q){console.error("입금신청 실패:",q),P(((z=(E=q.response)==null?void 0:E.data)==null?void 0:z.error)||"입금신청 중 오류가 발생했습니다.")}finally{v(!1)}}},O=E=>E.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),R=E=>{const z=Math.floor(E/60),q=E%60;return`${z}분 ${q}초`};return m(rt,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[a(M,{variant:"h6",sx:{fontWeight:600},children:"입금신청"}),a(Ct,{size:"small",onClick:t,children:a(Sa,{})})]}),b&&a(Jt,{severity:"error",sx:{mb:2},children:b}),k&&a(Jt,{severity:"success",sx:{mb:2},children:k}),m(j,{sx:{mb:3},children:[a(j,{sx:{display:"flex",gap:2,mb:2},children:a(Se,{variant:"contained",startIcon:a(so,{}),onClick:B,disabled:x||S>0,sx:{backgroundColor:"#1BC5BD","&:hover":{backgroundColor:"#16A39F"}},children:x?"조회 중...":S>0?`재문의 가능: ${R(S)}`:"입금계좌문의"})}),a($e,{fullWidth:!0,size:"small",readOnly:!0,value:i,placeholder:"입금계좌를 확인해주세요",InputProps:{readOnly:!0,sx:{backgroundColor:"#ffffff"}}})]}),S>0&&h&&m(Jt,{severity:"info",sx:{mb:2},children:["계좌정보는 ",R(S)," 후에 자동으로 초기화됩니다."]}),m(j,{sx:{mb:3},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"입금자명"}),a($e,{fullWidth:!0,size:"small",value:s,readOnly:!0,InputProps:{readOnly:!0,sx:{backgroundColor:"#f5f5f5"}}})]}),g&&m(bn,{children:[m(j,{sx:{mb:2},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"신청금액"}),m(j,{sx:{display:"flex",gap:1},children:[a($e,{fullWidth:!0,size:"small",placeholder:"신청금액을 입력해주세요",value:n?O(n):"",onChange:E=>{const z=E.target.value.replace(/[^0-9]/g,"");r(z)},sx:{backgroundColor:"#ffffff"}}),a(Se,{variant:"contained",onClick:F,disabled:p||!h||!n||L>0,sx:{minWidth:"120px",backgroundColor:"#3699FF","&:hover":{backgroundColor:"#187DE4"}},children:p?"처리 중...":L>0?`${R(L)}`:"입금신청"})]})]}),m(j,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[[1e4,5e4,1e5,5e5,1e6].map(E=>a(ut,{label:`${O(E/1e4)}만원`,onClick:()=>$(E),color:"primary",variant:"outlined",size:"small",clickable:!0},E)),a(ut,{label:"정정",onClick:N,color:"error",variant:"outlined",size:"small",clickable:!0})]}),L>0&&m(Jt,{severity:"warning",sx:{mb:2},children:["입금 신청 후 ",T&&T.cooldown_seconds<60?`${T.cooldown_seconds}초`:`${Math.floor(((T==null?void 0:T.cooldown_seconds)||300)/60)}분`,"간 추가 신청이 제한됩니다.",R(L)," 후에 다시 시도해주세요."]})]}),m(j,{sx:{mt:3,p:2,backgroundColor:"#fff3cd",borderRadius:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,mb:1},children:"입금 유의사항"}),m(M,{variant:"caption",component:"div",sx:{lineHeight:1.6},children:["• 입력하신 입금자명으로 입금하셔야 합니다.",a("br",{}),"• 입금자명이 불일치시 충전 처리가 불가합니다.",a("br",{}),"• 은행 점검 시간(23:00~00:30) 동안은 입출금이 지연될 수 있습니다.",a("br",{}),"• 입금 계좌는 수시로 변경될 수 있으니 입금 전 계좌번호를 확인해 주시기 바랍니다."]})]})]})},Ide=({user:e,onClose:t})=>{const[n,r]=u.useState(""),[i,o]=u.useState(""),[s,l]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(""),[g,w]=u.useState(""),[x,y]=u.useState(0),[p,v]=u.useState(null);u.useEffect(()=>{e&&(e.bank_name&&e.account_number&&e.account_holder?o(`${e.bank_name} ${e.account_number} (${e.account_holder})`):e.bank_name&&e.account_number&&e.name&&o(`${e.bank_name} ${e.account_number} (${e.name})`))},[e]),u.useEffect(()=>{b()},[]);const b=async()=>{try{const T=await Pe.withdrawal.getCooldownSettings();if(T.data.success&&T.data.data){v(T.data.data);const I=localStorage.getItem("agentLastWithdrawalTime");if(I&&T.data.data.enabled){const A=Date.now()-parseInt(I),D=(T.data.data.cooldown_seconds||300)*1e3;if(A<D){const B=Math.ceil((D-A)/1e3);y(B)}}}}catch(T){console.error("쿨다운 설정 조회 실패:",T)}};u.useEffect(()=>{if(x>0){const T=setInterval(()=>{y(I=>I<=1?(localStorage.removeItem("agentLastWithdrawalTime"),0):I-1)},1e3);return()=>clearInterval(T)}},[x]);const P=T=>{const L=parseInt(n.replace(/,/g,"")||"0")+T;r(L.toString())},k=()=>{r("")},C=async()=>{var D,B;if(x>0){f(`출금 신청은 ${_(x)} 후에 가능합니다.`);return}if(!n){f("출금액을 입력해주세요.");return}if(!i){f("출금계좌 정보가 설정되지 않았습니다.");return}if(c)return;d(!0),f(""),w("");let T,I,L;const A=i.match(/(.+?)\s+(\d+[\d-]*)\s+\((.+)\)/);if(A)[,T,I,L]=A;else if(e&&e.bank_name&&e.account_number&&e.account_holder)console.warn("계좌 정보 파싱 실패, 유저 데이터 사용"),T=e.bank_name,I=e.account_number,L=e.account_holder;else{f("계좌 정보 파싱에 실패했습니다."),d(!1);return}try{(await Pe.withdrawal.createInquiry({amount:parseInt(n.replace(/,/g,"")),bankName:T,accountNumber:I,accountHolder:L,memo:s})).data.success&&(w("출금신청이 완료되었습니다."),r(""),l(""),p&&p.enabled&&p.cooldown_seconds>0&&(y(p.cooldown_seconds),localStorage.setItem("agentLastWithdrawalTime",Date.now().toString())),setTimeout(()=>{t()},3e3))}catch($){console.error("출금신청 실패:",$),f(((B=(D=$.response)==null?void 0:D.data)==null?void 0:B.error)||"출금신청 중 오류가 발생했습니다.")}finally{d(!1)}},S=T=>T.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),_=T=>{const I=Math.floor(T/60),L=T%60;return`${I}분 ${L}초`};return m(rt,{elevation:0,sx:{p:3,backgroundColor:"#f8f9fa"},children:[m(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[a(M,{variant:"h6",sx:{fontWeight:600},children:"출금신청"}),a(Ct,{size:"small",onClick:t,children:a(Sa,{})})]}),h&&a(Jt,{severity:"error",sx:{mb:2},children:h}),g&&a(Jt,{severity:"success",sx:{mb:2},children:g}),m(j,{sx:{mb:3},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"출금 계좌정보"}),a($e,{fullWidth:!0,size:"small",label:"출금계좌",value:i,readOnly:!0,placeholder:"계좌 정보가 설정되지 않았습니다",sx:{backgroundColor:"#f5f5f5"},InputProps:{readOnly:!0,startAdornment:a(so,{sx:{mr:1,color:"text.secondary"}})}})]}),m(j,{sx:{mb:2},children:[a(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"출금액"}),m(j,{sx:{display:"flex",gap:1},children:[a($e,{fullWidth:!0,size:"small",placeholder:"출금액을 입력해주세요",value:n?S(n):"",onChange:T=>{const I=T.target.value.replace(/[^0-9]/g,"");r(I)},sx:{backgroundColor:"#ffffff"}}),a(Se,{variant:"contained",onClick:C,disabled:c||!n||x>0,sx:{minWidth:"120px",backgroundColor:"#F64E60","&:hover":{backgroundColor:"#EE2D41"}},children:c?"처리 중...":x>0?`${_(x)}`:"출금신청"})]})]}),m(j,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[[1e4,5e4,1e5,5e5,1e6].map(T=>a(ut,{label:`${S(T/1e4)}만원`,onClick:()=>P(T),color:"error",variant:"outlined",size:"small",clickable:!0},T)),a(ut,{label:"정정",onClick:k,color:"default",variant:"outlined",size:"small",clickable:!0})]}),x>0&&m(Jt,{severity:"warning",sx:{mb:2},children:["출금 신청 후 ",p&&p.cooldown_seconds<60?`${p.cooldown_seconds}초`:`${Math.floor(((p==null?void 0:p.cooldown_seconds)||300)/60)}분`,"간 추가 신청이 제한됩니다.",_(x)," 후에 다시 시도해주세요."]}),m(j,{sx:{mt:3,p:2,backgroundColor:"#fff3cd",borderRadius:1},children:[a(M,{variant:"body2",sx:{fontWeight:600,mb:1},children:"출금 유의사항"}),m(M,{variant:"caption",component:"div",sx:{lineHeight:1.6},children:["• 출금 계좌는 본인 명의 계좌만 가능합니다.",a("br",{}),"• 출금 신청 후 취소가 불가능하니 신중히 신청해주세요.",a("br",{}),"• 은행 점검 시간(23:00~00:30) 동안은 출금이 지연될 수 있습니다.",a("br",{}),"• 출금 수수료는 회원님이 부담합니다."]})]})]})},Ode=()=>{const{canUseButton:e}=zi(),t=zn(h=>h.auth.user),n=mo(),[r,i]=u.useState(window.innerWidth<=800),[o,s]=u.useState(null),l=t&&t.agent_level_id!==1&&t.agent_level_id!==2;Ce.useEffect(()=>{const h=()=>{i(window.innerWidth<=800)};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[]);const c=()=>{s(o==="deposit"?null:"deposit")},d=()=>{s(o==="withdrawal"?null:"withdrawal")};return l?m("div",{className:"agent-request-panel",style:{width:"100%",backgroundColor:"#ffffff",padding:"12px 16px",borderBottom:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:[m("div",{style:{display:"flex",flexDirection:"row",gap:"8px",justifyContent:"center",flexWrap:"wrap",maxWidth:"1200px",margin:"0 auto"},children:[e("입금신청")&&a(Se,{variant:"outlined",size:"small",startIcon:a(xde,{}),onClick:c,sx:{borderRadius:"8px",textTransform:"none",fontSize:r?"11px":"12px",padding:r?"4px 8px":"6px 12px",borderColor:"#E5E7EB",color:"#6B7280",backgroundColor:"#ffffff","&:hover":{borderColor:"#1BC5BD",backgroundColor:"#C9F7F5",color:"#1BC5BD"}},children:"입금신청"}),e("출금신청")&&a(Se,{variant:"outlined",size:"small",startIcon:a(Sde,{}),onClick:d,sx:{borderRadius:"8px",textTransform:"none",fontSize:r?"11px":"12px",padding:r?"4px 8px":"6px 12px",borderColor:"#E5E7EB",color:"#6B7280",backgroundColor:"#ffffff","&:hover":{borderColor:"#F64E60",backgroundColor:"#FFE2E5",color:"#F64E60"}},children:"출금신청"}),e("문의하기")&&a(Se,{variant:"outlined",size:"small",startIcon:a(_de,{}),onClick:()=>{n("/customer-service/messages",{state:{activeTab:3}})},sx:{borderRadius:"8px",textTransform:"none",fontSize:r?"11px":"12px",padding:r?"4px 8px":"6px 12px",borderColor:"#E5E7EB",color:"#6B7280",backgroundColor:"#ffffff","&:hover":{borderColor:"#FFA800",backgroundColor:"#FFF4DE",color:"#FFA800"}},children:"문의하기"})]}),a(Is,{in:o==="deposit",timeout:"auto",unmountOnExit:!0,children:a(j,{sx:{p:2,borderTop:"1px solid #e9ecef"},children:a(Tde,{user:t,onClose:()=>s(null)})})}),a(Is,{in:o==="withdrawal",timeout:"auto",unmountOnExit:!0,children:a(j,{sx:{p:2,borderTop:"1px solid #e9ecef"},children:a(Ide,{user:t,onClose:()=>s(null)})})})]}):null},eF=({children:e})=>{On();const t=Kr(),[n,r]=u.useState(!1),i=zn($B),o=zn(I1),s=u.useRef(null),[l,c]=u.useState(0),d=zn(g=>g.auth.user),h=d&&d.agent_level_id!==1&&d.agent_level_id!==2,f=()=>{r(!n)};return u.useEffect(()=>{const g=()=>{if(s.current){const x=s.current.offsetHeight;c(x)}};g();const w=new ResizeObserver(g);return s.current&&w.observe(s.current),()=>{w.disconnect()}},[i,h]),m(j,{sx:{display:"flex",minHeight:"100vh",flexDirection:"column"},children:[a(XR,{}),a(Zj,{handleDrawerToggle:f}),a(Yf,{sx:{minHeight:{xs:"14px",sm:"70px"},display:"none"}}),o==="horizontal"&&a(j,{sx:{width:"100%",display:"block",position:"fixed",top:"70px",left:0,right:0,zIndex:1100,backgroundColor:"#ffffff",boxShadow:"0 1px 0 rgba(0, 0, 0, 0.1)",height:"50px"},children:a(h1,{window:void 0,mobileOpen:n,handleDrawerToggle:f})}),o==="horizontal"&&a(j,{sx:{height:"120px"}}),m(j,{sx:{display:"flex",flex:1},children:[o==="vertical"&&a(h1,{window:void 0,mobileOpen:n,handleDrawerToggle:f}),m(j,{sx:{flexGrow:1,width:{xs:"100%",lg:o==="vertical"?"calc(100% - 280px)":"100%"},display:"flex",flexDirection:"column",position:"static"},children:[o==="vertical"&&a(Yf,{sx:{minHeight:{xs:"64px",sm:"70px"}}}),m(j,{ref:s,sx:{position:"fixed",top:o==="horizontal"?"135px":"70px",left:{xs:0,lg:o==="vertical"?"280px":0},right:0,width:{xs:"100%",lg:o==="vertical"?"calc(100% - 280px)":"100%"},zIndex:1150},children:[i&&a(j,{sx:{px:2,py:1,backgroundColor:"#ffffff",borderRadius:"0",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",borderBottom:"1px solid #e9ecef"},children:m(j,{sx:{position:"relative"},children:[a(yde,{}),a(Ct,{size:"small",onClick:()=>t(bx()),sx:{position:"absolute",top:8,right:8,color:"#B5B5C3",backgroundColor:"rgba(255, 255, 255, 0.8)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.9)"},zIndex:1101},children:a(Vue,{fontSize:"small"})})]})}),a(Ode,{})]}),a(j,{component:"main",sx:{position:"fixed",top:o==="horizontal"?`${121+l}px`:`${70+l}px`,left:{xs:0,lg:o==="vertical"?"280px":0},right:0,bottom:0,width:{xs:"100%",lg:o==="vertical"?"calc(100% - 280px)":"100%"},bgcolor:"#F5F8FA",overflowY:"auto",overflowX:"hidden",transition:"top 0.3s ease"},children:a(j,{sx:{p:0,pt:0},children:e||a(bE,{})})})]})]})]})};eF.propTypes={children:re.node};const Ade=({children:e})=>{const{isAuthenticated:t,isLoading:n,user:r}=zn(l=>l.auth),i=lg(),o=Kr(),s=u.useCallback(async()=>{try{const l=await Pe.auth.me();if(l.data.success){const c={...l.data.data,permissions:r==null?void 0:r.permissions};o(Ds(c))}}catch(l){console.error("사용자 정보 업데이트 실패:",l)}},[o,r==null?void 0:r.permissions]);return u.useEffect(()=>{const l=localStorage.getItem("token");if(!(!l&&!t)&&t&&l){s();const c=setInterval(s,12e4);return()=>clearInterval(c)}},[t,s]),n?m(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},children:[a(ir,{size:60}),a(M,{variant:"h6",sx:{mt:2},children:"인증 확인 중..."})]}):t?e||a(bE,{}):a(vE,{to:"/login",state:{from:i},replace:!0})},Dde=()=>{const e=Kr();u.useEffect(()=>{(async()=>{var r,i,o;if(localStorage.getItem("token"))try{const s=await Pe.get("/auth/me");if(s.data.user){s.data.user,e(Ds(s.data.user));try{const l=await Pe.get(`/permissions/member/${s.data.user.id}`);if((r=l.data)!=null&&r.success&&((i=l.data)!=null&&i.data)){const c={...s.data.user,permissions:l.data.data.effectivePermissions};e(Ds(c))}}catch(l){console.error("권한 정보 로드 실패:",l)}}}catch(s){console.error("인증 체크 실패:",s),((o=s.response)==null?void 0:o.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"))}})()},[e])};function Rde(){Dde();const[e,t]=u.useState(!1),[n,r]=u.useState(null),i=u.useCallback(async()=>{try{if(new URLSearchParams(window.location.search).get("bypass")==="maintenance"){t(!1),r(null);return}const l=await fetch(`${fi.BASE_URL}/maintenance-settings`);if(l.ok){const c=await l.json();if(c.success&&c.data){const d=c.data;d.target,d.target==="admin"||d.target==="all"?(t(!0),r(d)):(t(!1),r(null))}}else{const c=localStorage.getItem("maintenanceSettings");if(c){const d=JSON.parse(c);d.target==="admin"||d.target==="all"?(t(!0),r(d)):(t(!1),r(null))}}}catch(o){console.error("관리자 페이지: 점검 설정 로드 오류:",o);const s=localStorage.getItem("maintenanceSettings");if(s)try{const l=JSON.parse(s);(l.target==="admin"||l.target==="all")&&(t(!0),r(l))}catch(l){console.error("관리자 페이지: localStorage 파싱 오류:",l)}}},[]);return u.useEffect(()=>{const o=IH(),s=console.warn;return console.warn=(...l)=>{var c,d;(d=(c=l[0])==null?void 0:c.includes)!=null&&d.call(c,"You are loading @emotion/react when it is already loaded")||s.apply(console,l)},()=>{console.warn=s,o()}},[]),u.useEffect(()=>{if(new URLSearchParams(window.location.search).get("bypass")==="maintenance"){t(!1),r(null);return}i()},[]),u.useEffect(()=>{const o=l=>{l.key==="maintenanceSettings"&&(new URLSearchParams(window.location.search).get("bypass")==="maintenance"||i())},s=()=>{new URLSearchParams(window.location.search).get("bypass")==="maintenance"||i()};return window.addEventListener("storage",o),window.addEventListener("maintenanceSettingsChanged",s),()=>{window.removeEventListener("storage",o),window.removeEventListener("maintenanceSettingsChanged",s)}},[i]),e?a(Cx,{children:a(MH,{settings:n})}):a(Cx,{children:a("div",{className:"app-wrapper",children:a(_H,{children:m(TH,{children:[a(OH,{}),a(AH,{}),a(DH,{}),a(EH,{}),a(Ece,{}),m(_z,{children:[a(xn,{path:"/login",element:a(Lce,{})}),a(xn,{path:"/",element:a(Ade,{}),children:m(xn,{element:a(eF,{}),children:[a(xn,{index:!0,element:a(vE,{to:"/dashboard",replace:!0})}),a(xn,{path:"dashboard",element:a(Fne,{})}),a(xn,{path:"base-template",element:a(cae,{})}),a(xn,{path:"agent-management/members",element:a(Wse,{})}),a(xn,{path:"agent-management/registration-requests",element:a(Vse,{})}),a(xn,{path:"agent-management/rolling-history",element:a(Xse,{})}),a(xn,{path:"agent-management/commission-history",element:a(Jse,{})}),a(xn,{path:"agent-management/money-transfer",element:a(ale,{})}),a(xn,{path:"agent-management/username-change-history",element:a(jue,{})}),a(xn,{path:"money-history",element:a(tle,{})}),a(xn,{path:"settlement/today",element:a(ole,{})}),a(xn,{path:"settlement/third-party",element:a(Cle,{})}),a(xn,{path:"settlement/daily",element:a(kle,{})}),a(xn,{path:"betting/slot-casino",element:a(Tle,{})}),a(xn,{path:"customer-service/messages",element:a(zle,{})}),a(xn,{path:"customer-service/templates",element:a(qle,{})}),a(xn,{path:"board/notices",element:a(Pce,{})}),a(xn,{path:"board/events",element:a(_ce,{})}),a(xn,{path:"board/popup",element:a(Rce,{})}),a(xn,{path:"site-settings/admin-info",element:a(sue,{})}),a(xn,{path:"site-settings/agent-level",element:a(Rae,{})}),a(xn,{path:"site-settings/permission",element:a($ae,{})}),a(xn,{path:"site-settings/design",element:a(yue,{})}),a(xn,{path:"site-settings/menu",element:a(bue,{})}),a(xn,{path:"site-settings/domain",element:a(vue,{})}),a(xn,{path:"site-settings/bank",element:a(wue,{})}),a(xn,{path:"site-settings/maintenance",element:a(Cue,{})}),a(xn,{path:"site-settings/registration",element:a(Pue,{})}),a(xn,{path:"site-settings/other",element:a(kue,{})}),a(xn,{path:"site-settings/events",element:a(Aue,{})}),a(xn,{path:"site-settings/change-username",element:a(Lue,{})}),a(xn,{path:"site-settings/master-ip",element:a(Sue,{})}),a(xn,{path:"transactions/deposit",element:a(ule,{})}),a(xn,{path:"transactions/deposit-inquiries",element:a(Wue,{})}),a(xn,{path:"transactions/withdrawal",element:a(ple,{})}),a(xn,{path:"transactions/history",element:a(vle,{})}),a(xn,{path:"game-settings/slot",element:a(Bce,{})}),a(xn,{path:"game-settings/casino",element:a(Vce,{})}),a(xn,{path:"virtual-scroll-test",element:a(aue,{})}),a(xn,{path:"logs/auth",element:a(Fue,{})}),a(xn,{path:"logs/member-changes",element:a(zue,{})}),a(xn,{path:"logs/system",element:a(Nue,{})}),a(xn,{path:"*",element:a(Mce,{})})]})})]})]})})})})}const Ede=new P6({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});(function(){let t=null;function n(){const i=window.innerWidth;let o=1;i<=1920?o=.8:i<2560&&(o=.9),t!==o&&(document.documentElement.style.zoom=o,t=o)}n();let r;window.addEventListener("resize",function(){clearTimeout(r),r=setTimeout(n,300)})})();x3.createRoot(document.getElementById("root")).render(a(Ce.StrictMode,{children:a(R3,{store:D1,children:a(_E,{loading:null,persistor:t6,children:a(_6,{client:Ede,children:a(Tz,{children:a(Rde,{})})})})})}));export{Pe as a};
